#!/usr/bin/env python3
"""
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
–î–æ–±–∞–≤–ª—è–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø–æ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–º –æ—Ç—á–µ—Ç–∞–º –∏ —Å—Å—ã–ª–∫–∞–º –Ω–∞ –¥–µ–ø–ª–æ–π
"""

import sys
import os
sys.path.insert(0, os.path.dirname(os.path.dirname(os.path.abspath(__file__))))

from sqlalchemy import create_engine, text

DATABASE_URL = os.getenv("DATABASE_URL", "sqlite:///./data/bot.db")

# –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º async –¥—Ä–∞–π–≤–µ—Ä—ã –≤ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏
if "aiosqlite" in DATABASE_URL:
    DATABASE_URL = DATABASE_URL.replace("sqlite+aiosqlite", "sqlite")
if "asyncpg" in DATABASE_URL:
    DATABASE_URL = DATABASE_URL.replace("postgresql+asyncpg", "postgresql")

engine = create_engine(
    DATABASE_URL,
    connect_args={"check_same_thread": False} if "sqlite" in DATABASE_URL else {}
)

# –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Ä–µ–≥–ª–∞–º–µ–Ω—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
UPDATED_CONTENT = """

# üî• **–†–ï–ì–õ–ê–ú–ï–ù–¢ –î–õ–Ø –†–ê–ó–†–ê–ë–û–¢–ß–ò–ö–û–í** (–û–ë–ù–û–í–õ–ï–ù–ù–ê–Ø –í–ï–†–°–ò–Ø)

## **1. –†–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞**

–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ ‚Äî —ç—Ç–æ —á–µ–ª–æ–≤–µ–∫, –∫–æ—Ç–æ—Ä—ã–π —Å—Ç–∞–±–∏–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–¥–∞—á–∏ –≤ —Å—Ä–æ–∫, –¥–µ—Ä–∂–∏—Ç —Å–≤—è–∑—å –∏ –¥–µ–ª–∞–µ—Ç –∞–∫–∫—É—Ä–∞—Ç–Ω–æ.
–ù–∏–∫–∏—Ç–∞ ‚Äî —Ç–∏–º–ª–∏–¥, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –∏ –≥–ª–∞–≤–Ω—ã–π –ø–æ –∑–∞–¥–∞—á–∞–º.
–ò–≤–∞–Ω ‚Äî —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –∏ –≤–∞–∂–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è.

–ö–∞–∂–¥—ã–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –æ–±—è–∑–∞–Ω:

‚Ä¢ –±—Ä–∞—Ç—å –∑–∞–¥–∞—á–∏ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ
‚Ä¢ —Å–æ–±–ª—é–¥–∞—Ç—å –¥–µ–¥–ª–∞–π–Ω—ã
‚Ä¢ –¥–µ—Ä–∂–∞—Ç—å —Å–≤—è–∑—å
‚Ä¢ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—Ç—å –∑–∞—Ä–∞–Ω–µ–µ
‚Ä¢ –¥–µ–ª–∞—Ç—å —á–∏—Å—Ç–æ, –∞–∫–∫—É—Ä–∞—Ç–Ω–æ
‚Ä¢ —Å–ª–µ–¥–æ–≤–∞—Ç—å –¢–ó
‚Ä¢ –≤–µ—Å—Ç–∏ —Å–µ–±—è —Å–ø–æ–∫–æ–π–Ω–æ –∏ —É–≤–∞–∂–∏—Ç–µ–ª—å–Ω–æ
‚Ä¢ **–ï–ñ–ï–î–ù–ï–í–ù–û –æ—Ç—á–∏—Ç—ã–≤–∞—Ç—å—Å—è –æ –ø—Ä–æ–¥–µ–ª–∞–Ω–Ω–æ–π —Ä–∞–±–æ—Ç–µ**
‚Ä¢ **–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ä–∞–±–æ—á–∏–µ –¥–µ–ø–ª–æ–∏ –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞**

---

## **2. –ö–∞–∫ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∑–∞–¥–∞—á—É**

–ö–æ–≥–¥–∞ –ù–∏–∫–∏—Ç–∞ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç –∑–∞–¥–∞—á—É ‚Äî —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –¥–µ–ª–∞–µ—Ç 3 —à–∞–≥–∞:

1. —á–∏—Ç–∞–µ—Ç –∑–∞–¥–∞—á—É –ø–æ–ª–Ω–æ—Å—Ç—å—é
2. –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–ª–æ–∂–µ–Ω–Ω–æ–µ –¢–ó
3. –ø–∏—à–µ—Ç –ù–∏–∫–∏—Ç–µ —Ñ—Ä–∞–∑—É:

**¬´–ü—Ä–∏–Ω—è–ª. –í—Å—ë –ø–æ–Ω—è—Ç–Ω–æ / –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã¬ª**

–ú–æ–ª—á–∞–Ω–∏–µ –∑–∞–ø—Ä–µ—â–µ–Ω–æ.
–ú–æ–ª—á–∞–Ω–∏–µ = –ø—Ä–æ–±–ª–µ–º—ã.

---

## **3. –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ**

–ï—Å–ª–∏ –≤ –∑–∞–¥–∞—á–µ —á—Ç–æ-—Ç–æ –Ω–µ —è—Å–Ω–æ:

‚Ä¢ **–ù–ï –î–û–î–£–ú–´–í–ê–ô** ‚Äî —Å–ø—Ä–∞—à–∏–≤–∞–π —Å—Ä–∞–∑—É
‚Ä¢ –ù–µ –∂–¥–∏, —á—Ç–æ "–ø–æ—Ç–æ–º —Ä–∞–∑–±–µ—Ä—É—Å—å"
‚Ä¢ –ü–∏—à–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –ù–∏–∫–∏—Ç–µ
‚Ä¢ –õ—É—á—à–µ –∑–∞–¥–∞—Ç—å 5 –≤–æ–ø—Ä–æ—Å–æ–≤, —á–µ–º –ø–µ—Ä–µ–¥–µ–ª—ã–≤–∞—Ç—å —á–µ—Ä–µ–∑ –Ω–µ–¥–µ–ª—é

---

## **4. –ù–û–í–û–ï –¢–†–ï–ë–û–í–ê–ù–ò–ï: –°—Å—ã–ª–∫–∞ –Ω–∞ –¥–µ–ø–ª–æ–π**

### **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏:**

–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –∑–∞–¥–∞—á–∞ –ø—Ä–∏–Ω—è—Ç–∞ –≤ —Ä–∞–±–æ—Ç—É, —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ **–û–ë–Ø–ó–ê–ù**:

1. **–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –¥–µ–ø–ª–æ–π –≤ –∫–∞—Ä—Ç–æ—á–∫—É –∑–∞–¥–∞—á–∏**
   - –≠—Ç–æ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å—Å—ã–ª–∫–∞ –Ω–∞ –†–ê–ë–û–ß–ï–ï –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ/–±–æ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
   - –°—Å—ã–ª–∫–∞ –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –∏ –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ–π –ò–≤–∞–Ω—É
   - –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ "–°—Å—ã–ª–∫–∞ –Ω–∞ –¥–µ–ø–ª–æ–π" –≤ –∑–∞–¥–∞—á–µ

2. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –¥–µ–ø–ª–æ–π –ø–æ –º–µ—Ä–µ —Ä–∞–±–æ—Ç—ã**
   - –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∑–Ω–∞—á–∏–º–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
   - –ú–∏–Ω–∏–º—É–º 1 —Ä–∞–∑ –≤ –¥–µ–Ω—å
   - –ß—Ç–æ–±—ã –ò–≤–∞–Ω –º–æ–≥ –≤ –õ–Æ–ë–û–ô –º–æ–º–µ–Ω—Ç –∑–∞–π—Ç–∏ –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

**–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:**
- –ò–≤–∞–Ω –≤–∏–¥–∏—Ç —Ä–µ–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ —Å–ª–æ–≤–∞
- –ú–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –≤—ã—è–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã
- –ù–µ—Ç —Å—é—Ä–ø—Ä–∏–∑–æ–≤ –≤ –∫–æ–Ω—Ü–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å = –¥–æ–≤–µ—Ä–∏–µ

**–ü—Ä–∏–º–µ—Ä—ã —Å—Å—ã–ª–æ–∫:**
```
https://t.me/my_test_bot
http://147.45.215.199:3000/miniapp
https://my-project.vercel.app
```

---

## **5. –ù–û–í–û–ï –¢–†–ï–ë–û–í–ê–ù–ò–ï: –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö**

### **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å:**

–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ **–†–ê–ó –í –î–ï–ù–¨** (–≤ –∫–æ–Ω—Ü–µ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è –∏–ª–∏ —É—Ç—Ä–æ–º —Å–ª–µ–¥—É—é—â–µ–≥–æ) –ø–∏—à–µ—Ç –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö –∫ –∑–∞–¥–∞—á–µ:

**–ß–¢–û –°–î–ï–õ–ê–ù–û –ó–ê –°–ï–ì–û–î–ù–Ø:**

–§–æ—Ä–º–∞—Ç –æ—Ç—á–µ—Ç–∞:
```
‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:
‚Ä¢ [–∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ 1]
‚Ä¢ [–∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ 2]
‚Ä¢ [–∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ 3]

‚è≥ –í –ø—Ä–æ—Ü–µ—Å—Å–µ:
‚Ä¢ [—á—Ç–æ —Å–µ–π—á–∞—Å –¥–µ–ª–∞—é]

üî¥ –ü—Ä–æ–±–ª–µ–º—ã/–≤–æ–ø—Ä–æ—Å—ã:
‚Ä¢ [–µ—Å–ª–∏ –µ—Å—Ç—å]

üîó –°—Å—ã–ª–∫–∞ –Ω–∞ –¥–µ–ø–ª–æ–π: [–æ–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Å—Å—ã–ª–∫–∞, –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å]
```

**–ü—Ä–∏–º–µ—Ä—ã –•–û–†–û–®–ò–• –æ—Ç—á–µ—Ç–æ–≤:**
```
‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:
‚Ä¢ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram
‚Ä¢ –î–æ–±–∞–≤–ª–µ–Ω —ç–∫—Ä–∞–Ω –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚Ä¢ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã 3 –±–∞–≥–∞ –∏–∑ —Å–ø–∏—Å–∫–∞

‚è≥ –í –ø—Ä–æ—Ü–µ—Å—Å–µ:
‚Ä¢ –î–µ–ª–∞—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å API –ø–ª–∞—Ç–µ–∂–µ–π

üîó –°—Å—ã–ª–∫–∞ –Ω–∞ –¥–µ–ø–ª–æ–π: https://t.me/test_bot_v2
```

**–ü—Ä–∏–º–µ—Ä—ã –ü–õ–û–•–ò–• –æ—Ç—á–µ—Ç–æ–≤ (—Ç–∞–∫ –¥–µ–ª–∞—Ç—å –ù–ï–õ–¨–ó–Ø):**
```
‚ùå "–†–∞–±–æ—Ç–∞–ª –Ω–∞–¥ –∑–∞–¥–∞—á–µ–π" ‚Äî –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ –∏–º–µ–Ω–Ω–æ —Å–¥–µ–ª–∞–Ω–æ
‚ùå "–ü–æ—á—Ç–∏ –≥–æ—Ç–æ–≤–æ" ‚Äî –Ω–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–∏
‚ùå "–§–∏–∫—Å–∏–ª –±–∞–≥–∏" ‚Äî –∫–∞–∫–∏–µ –±–∞–≥–∏?
‚ùå –í–æ–æ–±—â–µ –ù–ï –æ—Ç–ø–∏—Å–∞–ª—Å—è ‚Äî –ù–ï–î–û–ü–£–°–¢–ò–ú–û!
```

### **–ü—Ä–∞–≤–∏–ª–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤:**

1. **–ü–∏—à–µ–º –ö–ê–ñ–î–´–ô –¥–µ–Ω—å** ‚Äî –¥–∞–∂–µ –µ—Å–ª–∏ –º–∞–ª–æ —Å–¥–µ–ª–∞–Ω–æ
2. **–ö–æ–Ω–∫—Ä–µ—Ç–∏–∫–∞** ‚Äî –Ω–µ "—Ä–∞–±–æ—Ç–∞–ª –Ω–∞–¥ —Ñ–æ—Ä–º–æ–π", –∞ "–¥–æ–±–∞–≤–∏–ª –≤–∞–ª–∏–¥–∞—Ü–∏—é email –≤ —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏"
3. **–ß–µ—Å—Ç–Ω–æ—Å—Ç—å** ‚Äî –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ —Å–¥–µ–ª–∞–Ω–æ –∏–ª–∏ –∑–∞—Å—Ç—Ä—è–ª ‚Äî —Ç–∞–∫ –∏ –ø–∏—à–∏
4. **–ü—Ä–æ–±–ª–µ–º—ã —Å—Ä–∞–∑—É** ‚Äî –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è, –ø–∏—à–∏ –≤ –æ—Ç—á–µ—Ç–µ, –Ω–µ –∂–¥–∏ –Ω–µ–¥–µ–ª—é
5. **–§–∞–π–ª—ã/—Å–∫—Ä–∏–Ω—à–æ—Ç—ã** ‚Äî –º–æ–∂–Ω–æ –ø—Ä–∏–∫—Ä–µ–ø–ª—è—Ç—å —Å–∫—Ä–∏–Ω—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –¥–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏

### **–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:**

- –ò–≤–∞–Ω –≤—Å–µ–≥–¥–∞ –≤ –∫—É—Ä—Å–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- –ù–∏–∫–∏—Ç–∞ –º–æ–∂–µ—Ç –≤–æ–≤—Ä–µ–º—è –ø–æ–º–æ—á—å, –µ—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã
- –ù–µ —Ç–µ—Ä—è–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- –õ–µ–≥–∫–æ –≤—Å–ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ –¥–µ–ª–∞–ª –Ω–µ–¥–µ–ª—é –Ω–∞–∑–∞–¥
- –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã = –¥–æ–≤–µ—Ä–∏–µ

---

## **6. –†–∞–±–æ—Ç–∞ –≤ CRM ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ**

–ë–µ–∑ CRM –ø—Ä–æ–µ–∫—Ç —Å—á–∏—Ç–∞–µ—Ç—Å—è –Ω–µ–≤–µ–¥–æ–º—ã–º.
–ù–∏–∫–∞–∫–∏—Ö –∑–∞–¥–∞—á ¬´–≤ –ª–∏—á–∫–µ¬ª, ¬´–≤ –≥–æ–ª–æ–≤–µ¬ª –∏–ª–∏ ¬´—è –ø–æ–º–Ω—é¬ª ‚Äî –∑–∞–ø—Ä–µ—â–µ–Ω–æ.

### **–ß—Ç–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –¥–æ–ª–∂–µ–Ω –¥–µ–ª–∞—Ç—å –≤ CRM:**

#### **1) –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∑–∞–¥–∞—á–∏ 2 —Ä–∞–∑–∞ –≤ –¥–µ–Ω—å (—É—Ç—Ä–æ–º/–≤–µ—á–µ—Ä–æ–º)**

–ú–∏–Ω–∏–º—É–º 2 —Ä–∞–∑–∞ –≤ –¥–µ–Ω—å –∑–∞—Ö–æ–¥–∏ –≤ CRM –∏ —Å–º–æ—Ç—Ä–∏:
‚Ä¢ –Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏
‚Ä¢ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç –ù–∏–∫–∏—Ç—ã
‚Ä¢ –¥–µ–¥–ª–∞–π–Ω—ã
‚Ä¢ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
‚Ä¢ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞

#### **2) –û–±–Ω–æ–≤–ª—è—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏**

–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –û–ë–Ø–ó–ê–ù –æ–±–Ω–æ–≤–ª—è—Ç—å —Å—Ç–∞—Ç—É—Å—ã:

‚Ä¢ **¬´–ü—Ä–∏–Ω—è—Ç–æ –≤ —Ä–∞–±–æ—Ç—É¬ª** ‚Üí –∫–æ–≥–¥–∞ –≤–∑—è–ª—Å—è
‚Ä¢ **¬´–í –ø—Ä–æ—Ü–µ—Å—Å–µ¬ª** ‚Üí –∫–æ–≥–¥–∞ —Ä–µ–∞–ª—å–Ω–æ –¥–µ–ª–∞–µ—à—å
‚Ä¢ **¬´–ù—É–∂–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è¬ª** ‚Üí –µ—Å–ª–∏ –∂–¥—ë—à—å –¢–ó/–æ—Ç–≤–µ—Ç
‚Ä¢ **¬´–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ¬ª** ‚Üí –∫–æ–≥–¥–∞ —Å–¥–∞–ª –ù–∏–∫–∏—Ç–µ
‚Ä¢ **¬´–ì–æ—Ç–æ–≤–æ¬ª** ‚Üí –ø–æ—Å–ª–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π —Å–¥–∞—á–∏ –ò–≤–∞–Ω—É

–ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è ‚Äî –∑–Ω–∞—á–∏—Ç —Ä–∞–±–æ—Ç–∞ —Å—Ç–æ–∏—Ç.
–ù–µ–æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π —Å—Ç–∞—Ç—É—Å = –∫—Ä–∞—Å–Ω—ã–π —Ñ–ª–∞–≥.

#### **3) –î–æ–±–∞–≤–ª—è—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –¥–µ–ø–ª–æ–π**

–í –∫–∞—Ä—Ç–æ—á–∫–µ –∑–∞–¥–∞—á–∏ –µ—Å—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ "–°—Å—ã–ª–∫–∞ –Ω–∞ –¥–µ–ø–ª–æ–π":
‚Ä¢ –î–æ–±–∞–≤–ª—è–π —Ç—É–¥–∞ —Å—Å—ã–ª–∫—É –Ω–∞ —Ä–∞–±–æ—á–µ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚Ä¢ –û–±–Ω–æ–≤–ª—è–π, –µ—Å–ª–∏ —Å—Å—ã–ª–∫–∞ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å
‚Ä¢ –≠—Ç–æ –ø–æ–ª–µ –≤–∏–¥–∏—Ç –ò–≤–∞–Ω –∏ –º–æ–∂–µ—Ç –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å

#### **4) –ü–∏—Å–∞—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö**

‚Ä¢ –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ –∫–æ–Ω—Ü–µ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è (–∏–ª–∏ —É—Ç—Ä–æ–º —Å–ª–µ–¥—É—é—â–µ–≥–æ)
‚Ä¢ –ü–∏—à–∏ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö –∫ –∑–∞–¥–∞—á–µ, —á—Ç–æ —Å–¥–µ–ª–∞–Ω–æ
‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç—á–µ—Ç–∞ (—Å–º. –≤—ã—à–µ)
‚Ä¢ –ü—Ä–∏–∫—Ä–µ–ø–ª—è–π —Å–∫—Ä–∏–Ω—à–æ—Ç—ã, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

#### **5) –û—Ç–º–µ—á–∞—Ç—å –∑–∞—Ç—Ä–∞—á–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è**

–ï—Å–ª–∏ –µ—Å—Ç—å —Ç–∞–π–º–µ—Ä ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π –µ–≥–æ.
–ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –ø—Ä–æ—Å—Ç–æ —É–∫–∞–∑—ã–≤–∞–π –ø—Ä–∏–º–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è –≤ –æ—Ç—á–µ—Ç–µ.

---

## **7. –°–¥–∞—á–∞ —Ä–∞–±–æ—Ç—ã**

–ö–æ–≥–¥–∞ –∑–∞–¥–∞—á–∞ –≥–æ—Ç–æ–≤–∞:

1. **–ü—Ä–æ–≤–µ—Ä—å —Å–∞–º:**
   - –í—Å–µ –ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
   - –ù–µ—Ç –ª–∏ –æ—á–µ–≤–∏–¥–Ω—ã—Ö –±–∞–≥–æ–≤
   - –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ª–∏ –¢–ó

2. **–û–±–Ω–æ–≤–∏ –¥–µ–ø–ª–æ–π** ‚Äî —É–±–µ–¥–∏—Å—å, —á—Ç–æ –ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

3. **–ù–∞–ø–∏—à–∏ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:**
```
‚úÖ –ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞

–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:
‚Ä¢ [—Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π]

üîó –°—Å—ã–ª–∫–∞ –Ω–∞ –¥–µ–ø–ª–æ–π: [—Å—Å—ã–ª–∫–∞]

–ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–≤–µ—Ä–∫–µ
```

4. **–ü–æ—Å—Ç–∞–≤—å —Å—Ç–∞—Ç—É—Å** ‚Üí "–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ"

5. **–£–≤–µ–¥–æ–º–∏ –ù–∏–∫–∏—Ç—É** (–µ—Å–ª–∏ –æ–Ω –Ω–µ –≤ –∫—É—Ä—Å–µ)

---

## **8. –î–µ–¥–ª–∞–π–Ω—ã**

‚Ä¢ –ï—Å–ª–∏ –≤–∏–¥–∏—à—å, —á—Ç–æ –Ω–µ —É—Å–ø–µ–≤–∞–µ—à—å ‚Äî **–ø—Ä–µ–¥—É–ø—Ä–µ–¥–∏ –ó–ê 2 –î–ù–Ø –î–û –î–ï–î–õ–ê–ô–ù–ê**
‚Ä¢ –ù–µ –∂–¥–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –¥–Ω—è
‚Ä¢ –õ—É—á—à–µ –ø–µ—Ä–µ—Å—Ç—Ä–∞—Ö–æ–≤–∞—Ç—å—Å—è, —á–µ–º –ø–æ–¥–≤–µ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥—É
‚Ä¢ –ß–µ—Å—Ç–Ω–æ—Å—Ç—å > –≥–µ—Ä–æ–∏–∑–º –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–æ–º–µ–Ω—Ç

---

## **9. –ß—Ç–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—á–µ—Å–∫–∏ –ó–ê–ü–†–ï–©–ï–ù–û**

‚ùå –ú–æ–ª—á–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π
‚ùå –ù–µ –æ–±–Ω–æ–≤–ª—è—Ç—å —Å—Ç–∞—Ç—É—Å—ã –≤ CRM
‚ùå **–ù–ï –ø–∏—Å–∞—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ—Ç—á–µ—Ç—ã**
‚ùå **–ù–ï –¥–æ–±–∞–≤–ª—è—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –¥–µ–ø–ª–æ–π**
‚ùå –†–∞–±–æ—Ç–∞—Ç—å "–≤ –ª–∏—á–∫–µ" –≤ –æ–±—Ö–æ–¥ CRM
‚ùå –ì–æ–≤–æ—Ä–∏—Ç—å "–ø–æ—á—Ç–∏ –≥–æ—Ç–æ–≤–æ" –Ω–µ–¥–µ–ª—é –ø–æ–¥—Ä—è–¥
‚ùå –°–∫—Ä—ã–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ
‚ùå –°–¥–∞–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É –±–µ–∑ —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∏
‚ùå –î–æ–¥—É–º—ã–≤–∞—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Å–ø—Ä–æ—Å–∏—Ç—å

---

## **10. –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –Ω–µ—Å–æ–±–ª—é–¥–µ–Ω–∏—è**

–ï—Å–ª–∏ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç –Ω–µ —Å–æ–±–ª—é–¥–∞–µ—Ç—Å—è:

1. **–ü–µ—Ä–≤–æ–µ –Ω–∞—Ä—É—à–µ–Ω–∏–µ** ‚Äî –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ—Ç –ù–∏–∫–∏—Ç—ã
2. **–ü–æ–≤—Ç–æ—Ä–Ω–æ–µ** ‚Äî —Ä–∞–∑–≥–æ–≤–æ—Ä —Å –ò–≤–∞–Ω–æ–º
3. **–°–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ** ‚Äî –ø–µ—Ä–µ—Å–º–æ—Ç—Ä —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–∞

**–û—Å–æ–±–µ–Ω–Ω–æ —Å—Ç—Ä–æ–≥–æ:**
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –¥–µ–ø–ª–æ–π
- –ú–æ–ª—á–∞–Ω–∏–µ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π

---

## **–ò–¢–û–ì–û: –ß–µ–∫-–ª–∏—Å—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞**

–ö–∞–∂–¥—ã–π –¥–µ–Ω—å:
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª CRM —É—Ç—Ä–æ–º
- [ ] –û–±–Ω–æ–≤–∏–ª —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏
- [ ] –†–∞–±–æ—Ç–∞–ª –Ω–∞–¥ –∑–∞–¥–∞—á–µ–π
- [ ] –û–±–Ω–æ–≤–∏–ª –¥–µ–ø–ª–æ–π
- [ ] –ù–∞–ø–∏—Å–∞–ª –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á–µ—Ç –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª CRM –≤–µ—á–µ—Ä–æ–º

–û–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∑–∞–¥–∞—á–∏:
- [ ] –ü—Ä–∏–Ω—è–ª –∑–∞–¥–∞—á—É –ø–∏—Å—å–º–µ–Ω–Ω–æ
- [ ] –ü—Ä–æ—á–∏—Ç–∞–ª –¢–ó
- [ ] –ó–∞–¥–∞–ª –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã
- [ ] –î–æ–±–∞–≤–∏–ª —Å—Å—ã–ª–∫—É –Ω–∞ –¥–µ–ø–ª–æ–π –≤ –∫–∞—Ä—Ç–æ—á–∫—É –∑–∞–¥–∞—á–∏

–ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏:
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª —Ä–∞–±–æ—Ç—É —Å–∞–º
- [ ] –û–±–Ω–æ–≤–∏–ª –¥–µ–ø–ª–æ–π —Å —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π
- [ ] –ù–∞–ø–∏—Å–∞–ª —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç
- [ ] –ü–æ—Å—Ç–∞–≤–∏–ª —Å—Ç–∞—Ç—É—Å "–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ"
- [ ] –£–≤–µ–¥–æ–º–∏–ª –ù–∏–∫–∏—Ç—É

---

**–ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ:**
–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å ‚Äî –∑–∞–ª–æ–≥ —É—Å–ø–µ—à–Ω–æ–π —Ä–∞–±–æ—Ç—ã.
–ò–≤–∞–Ω –¥–æ–ª–∂–µ–Ω –í–°–ï–ì–î–ê –∑–Ω–∞—Ç—å, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å –µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞–º–∏.
"""


def upgrade():
    """–û–±–Ω–æ–≤–∏—Ç—å —Ä–µ–≥–ª–∞–º–µ–Ω—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤"""
    print("üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤...")

    with engine.connect() as conn:
        try:
            # –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–∞ #7
            conn.execute(text("""
                UPDATE timlead_regulations
                SET content = :content,
                    updated_at = CURRENT_TIMESTAMP
                WHERE regulation_number = 7
            """), {"content": UPDATED_CONTENT})

            conn.commit()
            print("‚úÖ –†–µ–≥–ª–∞–º–µ–Ω—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω!")

        except Exception as e:
            print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–∞: {e}")
            conn.rollback()
            raise


if __name__ == "__main__":
    print("=" * 60)
    print("–û–ë–ù–û–í–õ–ï–ù–ò–ï –†–ï–ì–õ–ê–ú–ï–ù–¢–ê –î–õ–Ø –†–ê–ó–†–ê–ë–û–¢–ß–ò–ö–û–í")
    print("=" * 60)

    try:
        upgrade()
        print("\n‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ!")
        print("\n–ù–æ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:")
        print("‚Ä¢ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö –∫ –∑–∞–¥–∞—á–∞–º")
        print("‚Ä¢ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –¥–µ–ø–ª–æ–π –≤ –∫–∞—Ä—Ç–æ—á–∫–µ –∑–∞–¥–∞—á–∏")
        print("‚Ä¢ –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–µ–ø–ª–æ—è")
        print("‚Ä¢ –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Ä–∞–±–æ—Ç—ã")
    except Exception as e:
        print(f"\n‚ùå –û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: {e}")
        sys.exit(1)
