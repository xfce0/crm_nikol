(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var O0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function uM(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Qb={exports:{}},lh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G5;function hM(){if(G5)return lh;G5=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(a,n,i){var o=null;if(i!==void 0&&(o=""+i),n.key!==void 0&&(o=""+n.key),"key"in n){i={};for(var c in n)c!=="key"&&(i[c]=n[c])}else i=n;return n=i.ref,{$$typeof:s,type:a,key:o,ref:n!==void 0?n:null,props:i}}return lh.Fragment=t,lh.jsx=r,lh.jsxs=r,lh}var K5;function mM(){return K5||(K5=1,Qb.exports=hM()),Qb.exports}var e=mM(),Jb={exports:{}},at={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X5;function xM(){if(X5)return at;X5=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),p=Symbol.iterator;function v(K){return K===null||typeof K!="object"?null:(K=p&&K[p]||K["@@iterator"],typeof K=="function"?K:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,w={};function N(K,$,ie){this.props=K,this.context=$,this.refs=w,this.updater=ie||g}N.prototype.isReactComponent={},N.prototype.setState=function(K,$){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,$,"setState")},N.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function k(){}k.prototype=N.prototype;function S(K,$,ie){this.props=K,this.context=$,this.refs=w,this.updater=ie||g}var _=S.prototype=new k;_.constructor=S,y(_,N.prototype),_.isPureReactComponent=!0;var T=Array.isArray;function E(){}var z={H:null,A:null,T:null,S:null},O=Object.prototype.hasOwnProperty;function C(K,$,ie){var ne=ie.ref;return{$$typeof:s,type:K,key:$,ref:ne!==void 0?ne:null,props:ie}}function A(K,$){return C(K.type,$,K.props)}function X(K){return typeof K=="object"&&K!==null&&K.$$typeof===s}function I(K){var $={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(ie){return $[ie]})}var V=/\/+/g;function R(K,$){return typeof K=="object"&&K!==null&&K.key!=null?I(""+K.key):$.toString(36)}function H(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(E,E):(K.status="pending",K.then(function($){K.status==="pending"&&(K.status="fulfilled",K.value=$)},function($){K.status==="pending"&&(K.status="rejected",K.reason=$)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function ee(K,$,ie,ne,oe){var ce=typeof K;(ce==="undefined"||ce==="boolean")&&(K=null);var U=!1;if(K===null)U=!0;else switch(ce){case"bigint":case"string":case"number":U=!0;break;case"object":switch(K.$$typeof){case s:case t:U=!0;break;case m:return U=K._init,ee(U(K._payload),$,ie,ne,oe)}}if(U)return oe=oe(K),U=ne===""?"."+R(K,0):ne,T(oe)?(ie="",U!=null&&(ie=U.replace(V,"$&/")+"/"),ee(oe,$,ie,"",function(q){return q})):oe!=null&&(X(oe)&&(oe=A(oe,ie+(oe.key==null||K&&K.key===oe.key?"":(""+oe.key).replace(V,"$&/")+"/")+U)),$.push(oe)),1;U=0;var F=ne===""?".":ne+":";if(T(K))for(var Z=0;Z<K.length;Z++)ne=K[Z],ce=F+R(ne,Z),U+=ee(ne,$,ie,ce,oe);else if(Z=v(K),typeof Z=="function")for(K=Z.call(K),Z=0;!(ne=K.next()).done;)ne=ne.value,ce=F+R(ne,Z++),U+=ee(ne,$,ie,ce,oe);else if(ce==="object"){if(typeof K.then=="function")return ee(H(K),$,ie,ne,oe);throw $=String(K),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return U}function se(K,$,ie){if(K==null)return K;var ne=[],oe=0;return ee(K,ne,"","",function(ce){return $.call(ie,ce,oe++)}),ne}function W(K){if(K._status===-1){var $=K._result;$=$(),$.then(function(ie){(K._status===0||K._status===-1)&&(K._status=1,K._result=ie)},function(ie){(K._status===0||K._status===-1)&&(K._status=2,K._result=ie)}),K._status===-1&&(K._status=0,K._result=$)}if(K._status===1)return K._result.default;throw K._result}var te=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)},J={map:se,forEach:function(K,$,ie){se(K,function(){$.apply(this,arguments)},ie)},count:function(K){var $=0;return se(K,function(){$++}),$},toArray:function(K){return se(K,function($){return $})||[]},only:function(K){if(!X(K))throw Error("React.Children.only expected to receive a single React element child.");return K}};return at.Activity=f,at.Children=J,at.Component=N,at.Fragment=r,at.Profiler=n,at.PureComponent=S,at.StrictMode=a,at.Suspense=u,at.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,at.__COMPILER_RUNTIME={__proto__:null,c:function(K){return z.H.useMemoCache(K)}},at.cache=function(K){return function(){return K.apply(null,arguments)}},at.cacheSignal=function(){return null},at.cloneElement=function(K,$,ie){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var ne=y({},K.props),oe=K.key;if($!=null)for(ce in $.key!==void 0&&(oe=""+$.key),$)!O.call($,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&$.ref===void 0||(ne[ce]=$[ce]);var ce=arguments.length-2;if(ce===1)ne.children=ie;else if(1<ce){for(var U=Array(ce),F=0;F<ce;F++)U[F]=arguments[F+2];ne.children=U}return C(K.type,oe,ne)},at.createContext=function(K){return K={$$typeof:o,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:i,_context:K},K},at.createElement=function(K,$,ie){var ne,oe={},ce=null;if($!=null)for(ne in $.key!==void 0&&(ce=""+$.key),$)O.call($,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(oe[ne]=$[ne]);var U=arguments.length-2;if(U===1)oe.children=ie;else if(1<U){for(var F=Array(U),Z=0;Z<U;Z++)F[Z]=arguments[Z+2];oe.children=F}if(K&&K.defaultProps)for(ne in U=K.defaultProps,U)oe[ne]===void 0&&(oe[ne]=U[ne]);return C(K,ce,oe)},at.createRef=function(){return{current:null}},at.forwardRef=function(K){return{$$typeof:c,render:K}},at.isValidElement=X,at.lazy=function(K){return{$$typeof:m,_payload:{_status:-1,_result:K},_init:W}},at.memo=function(K,$){return{$$typeof:h,type:K,compare:$===void 0?null:$}},at.startTransition=function(K){var $=z.T,ie={};z.T=ie;try{var ne=K(),oe=z.S;oe!==null&&oe(ie,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(E,te)}catch(ce){te(ce)}finally{$!==null&&ie.types!==null&&($.types=ie.types),z.T=$}},at.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},at.use=function(K){return z.H.use(K)},at.useActionState=function(K,$,ie){return z.H.useActionState(K,$,ie)},at.useCallback=function(K,$){return z.H.useCallback(K,$)},at.useContext=function(K){return z.H.useContext(K)},at.useDebugValue=function(){},at.useDeferredValue=function(K,$){return z.H.useDeferredValue(K,$)},at.useEffect=function(K,$){return z.H.useEffect(K,$)},at.useEffectEvent=function(K){return z.H.useEffectEvent(K)},at.useId=function(){return z.H.useId()},at.useImperativeHandle=function(K,$,ie){return z.H.useImperativeHandle(K,$,ie)},at.useInsertionEffect=function(K,$){return z.H.useInsertionEffect(K,$)},at.useLayoutEffect=function(K,$){return z.H.useLayoutEffect(K,$)},at.useMemo=function(K,$){return z.H.useMemo(K,$)},at.useOptimistic=function(K,$){return z.H.useOptimistic(K,$)},at.useReducer=function(K,$,ie){return z.H.useReducer(K,$,ie)},at.useRef=function(K){return z.H.useRef(K)},at.useState=function(K){return z.H.useState(K)},at.useSyncExternalStore=function(K,$,ie){return z.H.useSyncExternalStore(K,$,ie)},at.useTransition=function(){return z.H.useTransition()},at.version="19.2.0",at}var Z5;function Jw(){return Z5||(Z5=1,Jb.exports=xM()),Jb.exports}var j=Jw();const fl=uM(j);var ey={exports:{}},oh={},ty={exports:{}},sy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q5;function fM(){return Q5||(Q5=1,(function(s){function t(ee,se){var W=ee.length;ee.push(se);e:for(;0<W;){var te=W-1>>>1,J=ee[te];if(0<n(J,se))ee[te]=se,ee[W]=J,W=te;else break e}}function r(ee){return ee.length===0?null:ee[0]}function a(ee){if(ee.length===0)return null;var se=ee[0],W=ee.pop();if(W!==se){ee[0]=W;e:for(var te=0,J=ee.length,K=J>>>1;te<K;){var $=2*(te+1)-1,ie=ee[$],ne=$+1,oe=ee[ne];if(0>n(ie,W))ne<J&&0>n(oe,ie)?(ee[te]=oe,ee[ne]=W,te=ne):(ee[te]=ie,ee[$]=W,te=$);else if(ne<J&&0>n(oe,W))ee[te]=oe,ee[ne]=W,te=ne;else break e}}return se}function n(ee,se){var W=ee.sortIndex-se.sortIndex;return W!==0?W:ee.id-se.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;s.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();s.unstable_now=function(){return o.now()-c}}var u=[],h=[],m=1,f=null,p=3,v=!1,g=!1,y=!1,w=!1,N=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function _(ee){for(var se=r(h);se!==null;){if(se.callback===null)a(h);else if(se.startTime<=ee)a(h),se.sortIndex=se.expirationTime,t(u,se);else break;se=r(h)}}function T(ee){if(y=!1,_(ee),!g)if(r(u)!==null)g=!0,E||(E=!0,I());else{var se=r(h);se!==null&&H(T,se.startTime-ee)}}var E=!1,z=-1,O=5,C=-1;function A(){return w?!0:!(s.unstable_now()-C<O)}function X(){if(w=!1,E){var ee=s.unstable_now();C=ee;var se=!0;try{e:{g=!1,y&&(y=!1,k(z),z=-1),v=!0;var W=p;try{t:{for(_(ee),f=r(u);f!==null&&!(f.expirationTime>ee&&A());){var te=f.callback;if(typeof te=="function"){f.callback=null,p=f.priorityLevel;var J=te(f.expirationTime<=ee);if(ee=s.unstable_now(),typeof J=="function"){f.callback=J,_(ee),se=!0;break t}f===r(u)&&a(u),_(ee)}else a(u);f=r(u)}if(f!==null)se=!0;else{var K=r(h);K!==null&&H(T,K.startTime-ee),se=!1}}break e}finally{f=null,p=W,v=!1}se=void 0}}finally{se?I():E=!1}}}var I;if(typeof S=="function")I=function(){S(X)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,R=V.port2;V.port1.onmessage=X,I=function(){R.postMessage(null)}}else I=function(){N(X,0)};function H(ee,se){z=N(function(){ee(s.unstable_now())},se)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(ee){ee.callback=null},s.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<ee?Math.floor(1e3/ee):5},s.unstable_getCurrentPriorityLevel=function(){return p},s.unstable_next=function(ee){switch(p){case 1:case 2:case 3:var se=3;break;default:se=p}var W=p;p=se;try{return ee()}finally{p=W}},s.unstable_requestPaint=function(){w=!0},s.unstable_runWithPriority=function(ee,se){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var W=p;p=ee;try{return se()}finally{p=W}},s.unstable_scheduleCallback=function(ee,se,W){var te=s.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?te+W:te):W=te,ee){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=W+J,ee={id:m++,callback:se,priorityLevel:ee,startTime:W,expirationTime:J,sortIndex:-1},W>te?(ee.sortIndex=W,t(h,ee),r(u)===null&&ee===r(h)&&(y?(k(z),z=-1):y=!0,H(T,W-te))):(ee.sortIndex=J,t(u,ee),g||v||(g=!0,E||(E=!0,I()))),ee},s.unstable_shouldYield=A,s.unstable_wrapCallback=function(ee){var se=p;return function(){var W=p;p=se;try{return ee.apply(this,arguments)}finally{p=W}}}})(sy)),sy}var J5;function pM(){return J5||(J5=1,ty.exports=fM()),ty.exports}var ry={exports:{}},nr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e4;function gM(){if(e4)return nr;e4=1;var s=Jw();function t(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var a={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},n=Symbol.for("react.portal");function i(u,h,m){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:f==null?null:""+f,children:u,containerInfo:h,implementation:m}}var o=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return nr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,nr.createPortal=function(u,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return i(u,h,null,m)},nr.flushSync=function(u){var h=o.T,m=a.p;try{if(o.T=null,a.p=2,u)return u()}finally{o.T=h,a.p=m,a.d.f()}},nr.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,a.d.C(u,h))},nr.prefetchDNS=function(u){typeof u=="string"&&a.d.D(u)},nr.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var m=h.as,f=c(m,h.crossOrigin),p=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?a.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:f,integrity:p,fetchPriority:v}):m==="script"&&a.d.X(u,{crossOrigin:f,integrity:p,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},nr.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=c(h.as,h.crossOrigin);a.d.M(u,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&a.d.M(u)},nr.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,f=c(m,h.crossOrigin);a.d.L(u,m,{crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},nr.preloadModule=function(u,h){if(typeof u=="string")if(h){var m=c(h.as,h.crossOrigin);a.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else a.d.m(u)},nr.requestFormReset=function(u){a.d.r(u)},nr.unstable_batchedUpdates=function(u,h){return u(h)},nr.useFormState=function(u,h,m){return o.H.useFormState(u,h,m)},nr.useFormStatus=function(){return o.H.useHostTransitionStatus()},nr.version="19.2.0",nr}var t4;function bM(){if(t4)return ry.exports;t4=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),ry.exports=gM(),ry.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s4;function yM(){if(s4)return oh;s4=1;var s=pM(),t=Jw(),r=bM();function a(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)d+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function i(l){var d=l,x=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(x=d.return),l=d.return;while(l)}return d.tag===3?x:null}function o(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function c(l){if(l.tag===31){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function u(l){if(i(l)!==l)throw Error(a(188))}function h(l){var d=l.alternate;if(!d){if(d=i(l),d===null)throw Error(a(188));return d!==l?null:l}for(var x=l,b=d;;){var D=x.return;if(D===null)break;var P=D.alternate;if(P===null){if(b=D.return,b!==null){x=b;continue}break}if(D.child===P.child){for(P=D.child;P;){if(P===x)return u(D),l;if(P===b)return u(D),d;P=P.sibling}throw Error(a(188))}if(x.return!==b.return)x=D,b=P;else{for(var re=!1,de=D.child;de;){if(de===x){re=!0,x=D,b=P;break}if(de===b){re=!0,b=D,x=P;break}de=de.sibling}if(!re){for(de=P.child;de;){if(de===x){re=!0,x=P,b=D;break}if(de===b){re=!0,b=P,x=D;break}de=de.sibling}if(!re)throw Error(a(189))}}if(x.alternate!==b)throw Error(a(190))}if(x.tag!==3)throw Error(a(188));return x.stateNode.current===x?l:d}function m(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=m(l),d!==null)return d;l=l.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),S=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),A=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function I(l){return l===null||typeof l!="object"?null:(l=X&&l[X]||l["@@iterator"],typeof l=="function"?l:null)}var V=Symbol.for("react.client.reference");function R(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===V?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case y:return"Fragment";case N:return"Profiler";case w:return"StrictMode";case T:return"Suspense";case E:return"SuspenseList";case C:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case g:return"Portal";case S:return l.displayName||"Context";case k:return(l._context.displayName||"Context")+".Consumer";case _:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case z:return d=l.displayName||null,d!==null?d:R(l.type)||"Memo";case O:d=l._payload,l=l._init;try{return R(l(d))}catch{}}return null}var H=Array.isArray,ee=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},te=[],J=-1;function K(l){return{current:l}}function $(l){0>J||(l.current=te[J],te[J]=null,J--)}function ie(l,d){J++,te[J]=l.current,l.current=d}var ne=K(null),oe=K(null),ce=K(null),U=K(null);function F(l,d){switch(ie(ce,d),ie(oe,l),ie(ne,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?g5(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=g5(d),l=b5(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}$(ne),ie(ne,l)}function Z(){$(ne),$(oe),$(ce)}function q(l){l.memoizedState!==null&&ie(U,l);var d=ne.current,x=b5(d,l.type);d!==x&&(ie(oe,l),ie(ne,x))}function Q(l){oe.current===l&&($(ne),$(oe)),U.current===l&&($(U),rh._currentValue=W)}var le,me;function G(l){if(le===void 0)try{throw Error()}catch(x){var d=x.stack.trim().match(/\n( *(at )?)/);le=d&&d[1]||"",me=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+le+l+me}var ue=!1;function Y(l,d){if(!l||ue)return"";ue=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(d){var Me=function(){throw Error()};if(Object.defineProperty(Me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Me,[])}catch(Ce){var ke=Ce}Reflect.construct(l,[],Me)}else{try{Me.call()}catch(Ce){ke=Ce}l.call(Me.prototype)}}else{try{throw Error()}catch(Ce){ke=Ce}(Me=l())&&typeof Me.catch=="function"&&Me.catch(function(){})}}catch(Ce){if(Ce&&ke&&typeof Ce.stack=="string")return[Ce.stack,ke.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var D=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");D&&D.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var P=b.DetermineComponentFrameRoot(),re=P[0],de=P[1];if(re&&de){var pe=re.split(`
`),we=de.split(`
`);for(D=b=0;b<pe.length&&!pe[b].includes("DetermineComponentFrameRoot");)b++;for(;D<we.length&&!we[D].includes("DetermineComponentFrameRoot");)D++;if(b===pe.length||D===we.length)for(b=pe.length-1,D=we.length-1;1<=b&&0<=D&&pe[b]!==we[D];)D--;for(;1<=b&&0<=D;b--,D--)if(pe[b]!==we[D]){if(b!==1||D!==1)do if(b--,D--,0>D||pe[b]!==we[D]){var Ae=`
`+pe[b].replace(" at new "," at ");return l.displayName&&Ae.includes("<anonymous>")&&(Ae=Ae.replace("<anonymous>",l.displayName)),Ae}while(1<=b&&0<=D);break}}}finally{ue=!1,Error.prepareStackTrace=x}return(x=l?l.displayName||l.name:"")?G(x):""}function L(l,d){switch(l.tag){case 26:case 27:case 5:return G(l.type);case 16:return G("Lazy");case 13:return l.child!==d&&d!==null?G("Suspense Fallback"):G("Suspense");case 19:return G("SuspenseList");case 0:case 15:return Y(l.type,!1);case 11:return Y(l.type.render,!1);case 1:return Y(l.type,!0);case 31:return G("Activity");default:return""}}function M(l){try{var d="",x=null;do d+=L(l,x),x=l,l=l.return;while(l);return d}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}var B=Object.prototype.hasOwnProperty,ae=s.unstable_scheduleCallback,he=s.unstable_cancelCallback,xe=s.unstable_shouldYield,_e=s.unstable_requestPaint,Te=s.unstable_now,Ee=s.unstable_getCurrentPriorityLevel,ze=s.unstable_ImmediatePriority,Ie=s.unstable_UserBlockingPriority,Ye=s.unstable_NormalPriority,xs=s.unstable_LowPriority,pr=s.unstable_IdlePriority,Vs=s.log,be=s.unstable_setDisableYieldValue,Le=null,He=null;function Ze(l){if(typeof Vs=="function"&&be(l),He&&typeof He.setStrictMode=="function")try{He.setStrictMode(Le,l)}catch{}}var et=Math.clz32?Math.clz32:Ja,bt=Math.log,Yr=Math.LN2;function Ja(l){return l>>>=0,l===0?32:31-(bt(l)/Yr|0)|0}var Nr=256,_r=262144,oa=4194304;function gr(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Fl(l,d,x){var b=l.pendingLanes;if(b===0)return 0;var D=0,P=l.suspendedLanes,re=l.pingedLanes;l=l.warmLanes;var de=b&134217727;return de!==0?(b=de&~P,b!==0?D=gr(b):(re&=de,re!==0?D=gr(re):x||(x=de&~l,x!==0&&(D=gr(x))))):(de=b&~P,de!==0?D=gr(de):re!==0?D=gr(re):x||(x=b&~l,x!==0&&(D=gr(x)))),D===0?0:d!==0&&d!==D&&(d&P)===0&&(P=D&-D,x=d&-d,P>=x||P===32&&(x&4194048)!==0)?d:D}function ar(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function Ai(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ym(){var l=oa;return oa<<=1,(oa&62914560)===0&&(oa=4194304),l}function $d(l){for(var d=[],x=0;31>x;x++)d.push(l);return d}function Yt(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function Ud(l,d,x,b,D,P){var re=l.pendingLanes;l.pendingLanes=x,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=x,l.entangledLanes&=x,l.errorRecoveryDisabledLanes&=x,l.shellSuspendCounter=0;var de=l.entanglements,pe=l.expirationTimes,we=l.hiddenUpdates;for(x=re&~x;0<x;){var Ae=31-et(x),Me=1<<Ae;de[Ae]=0,pe[Ae]=-1;var ke=we[Ae];if(ke!==null)for(we[Ae]=null,Ae=0;Ae<ke.length;Ae++){var Ce=ke[Ae];Ce!==null&&(Ce.lane&=-536870913)}x&=~Me}b!==0&&Gm(l,b,0),P!==0&&D===0&&l.tag!==0&&(l.suspendedLanes|=P&~(re&~d))}function Gm(l,d,x){l.pendingLanes|=d,l.suspendedLanes&=~d;var b=31-et(d);l.entangledLanes|=d,l.entanglements[b]=l.entanglements[b]|1073741824|x&261930}function Vd(l,d){var x=l.entangledLanes|=d;for(l=l.entanglements;x;){var b=31-et(x),D=1<<b;D&d|l[b]&d&&(l[b]|=d),x&=~D}}function Km(l,d){var x=d&-d;return x=(x&42)!==0?1:zl(x),(x&(l.suspendedLanes|d))!==0?0:x}function zl(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Hd(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function qd(){var l=se.p;return l!==0?l:(l=window.event,l===void 0?32:$5(l.type))}function ec(l,d){var x=se.p;try{return se.p=l,d()}finally{se.p=x}}var en=Math.random().toString(36).slice(2),Ps="__reactFiber$"+en,Ws="__reactProps$"+en,Rn="__reactContainer$"+en,Wd="__reactEvents$"+en,Wp="__reactListeners$"+en,Xm="__reactHandles$"+en,Zm="__reactResources$"+en,Mn="__reactMarker$"+en;function Yd(l){delete l[Ps],delete l[Ws],delete l[Wd],delete l[Wp],delete l[Xm]}function On(l){var d=l[Ps];if(d)return d;for(var x=l.parentNode;x;){if(d=x[Rn]||x[Ps]){if(x=d.alternate,d.child!==null||x!==null&&x.child!==null)for(l=k5(l);l!==null;){if(x=l[Ps])return x;l=k5(l)}return d}l=x,x=l.parentNode}return null}function Ln(l){if(l=l[Ps]||l[Rn]){var d=l.tag;if(d===5||d===6||d===13||d===31||d===26||d===27||d===3)return l}return null}function Il(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(a(33))}function Di(l){var d=l[Zm];return d||(d=l[Zm]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function fs(l){l[Mn]=!0}var Gd=new Set,Qm={};function Pn(l,d){Bn(l,d),Bn(l+"Capture",d)}function Bn(l,d){for(Qm[l]=d,l=0;l<d.length;l++)Gd.add(d[l])}var Jm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ex={},tx={};function sx(l){return B.call(tx,l)?!0:B.call(ex,l)?!1:Jm.test(l)?tx[l]=!0:(ex[l]=!0,!1)}function $l(l,d,x){if(sx(d))if(x===null)l.removeAttribute(d);else{switch(typeof x){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var b=d.toLowerCase().slice(0,5);if(b!=="data-"&&b!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+x)}}function tc(l,d,x){if(x===null)l.removeAttribute(d);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+x)}}function La(l,d,x,b){if(b===null)l.removeAttribute(x);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(x);return}l.setAttributeNS(d,x,""+b)}}function br(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Kd(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function Yp(l,d,x){var b=Object.getOwnPropertyDescriptor(l.constructor.prototype,d);if(!l.hasOwnProperty(d)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var D=b.get,P=b.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return D.call(this)},set:function(re){x=""+re,P.call(this,re)}}),Object.defineProperty(l,d,{enumerable:b.enumerable}),{getValue:function(){return x},setValue:function(re){x=""+re},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function Xd(l){if(!l._valueTracker){var d=Kd(l)?"checked":"value";l._valueTracker=Yp(l,d,""+l[d])}}function Zd(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var x=d.getValue(),b="";return l&&(b=Kd(l)?l.checked?"true":"false":l.value),l=b,l!==x?(d.setValue(l),!0):!1}function Ul(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Gp=/[\n"\\]/g;function kr(l){return l.replace(Gp,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function sc(l,d,x,b,D,P,re,de){l.name="",re!=null&&typeof re!="function"&&typeof re!="symbol"&&typeof re!="boolean"?l.type=re:l.removeAttribute("type"),d!=null?re==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+br(d)):l.value!==""+br(d)&&(l.value=""+br(d)):re!=="submit"&&re!=="reset"||l.removeAttribute("value"),d!=null?Jd(l,re,br(d)):x!=null?Jd(l,re,br(x)):b!=null&&l.removeAttribute("value"),D==null&&P!=null&&(l.defaultChecked=!!P),D!=null&&(l.checked=D&&typeof D!="function"&&typeof D!="symbol"),de!=null&&typeof de!="function"&&typeof de!="symbol"&&typeof de!="boolean"?l.name=""+br(de):l.removeAttribute("name")}function Qd(l,d,x,b,D,P,re,de){if(P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(l.type=P),d!=null||x!=null){if(!(P!=="submit"&&P!=="reset"||d!=null)){Xd(l);return}x=x!=null?""+br(x):"",d=d!=null?""+br(d):x,de||d===l.value||(l.value=d),l.defaultValue=d}b=b??D,b=typeof b!="function"&&typeof b!="symbol"&&!!b,l.checked=de?l.checked:!!b,l.defaultChecked=!!b,re!=null&&typeof re!="function"&&typeof re!="symbol"&&typeof re!="boolean"&&(l.name=re),Xd(l)}function Jd(l,d,x){d==="number"&&Ul(l.ownerDocument)===l||l.defaultValue===""+x||(l.defaultValue=""+x)}function Ri(l,d,x,b){if(l=l.options,d){d={};for(var D=0;D<x.length;D++)d["$"+x[D]]=!0;for(x=0;x<l.length;x++)D=d.hasOwnProperty("$"+l[x].value),l[x].selected!==D&&(l[x].selected=D),D&&b&&(l[x].defaultSelected=!0)}else{for(x=""+br(x),d=null,D=0;D<l.length;D++){if(l[D].value===x){l[D].selected=!0,b&&(l[D].defaultSelected=!0);return}d!==null||l[D].disabled||(d=l[D])}d!==null&&(d.selected=!0)}}function eu(l,d,x){if(d!=null&&(d=""+br(d),d!==l.value&&(l.value=d),x==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=x!=null?""+br(x):""}function tu(l,d,x,b){if(d==null){if(b!=null){if(x!=null)throw Error(a(92));if(H(b)){if(1<b.length)throw Error(a(93));b=b[0]}x=b}x==null&&(x=""),d=x}x=br(d),l.defaultValue=x,b=l.textContent,b===x&&b!==""&&b!==null&&(l.value=b),Xd(l)}function Mi(l,d){if(d){var x=l.firstChild;if(x&&x===l.lastChild&&x.nodeType===3){x.nodeValue=d;return}}l.textContent=d}var Kp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function su(l,d,x){var b=d.indexOf("--")===0;x==null||typeof x=="boolean"||x===""?b?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":b?l.setProperty(d,x):typeof x!="number"||x===0||Kp.has(d)?d==="float"?l.cssFloat=x:l[d]=(""+x).trim():l[d]=x+"px"}function ru(l,d,x){if(d!=null&&typeof d!="object")throw Error(a(62));if(l=l.style,x!=null){for(var b in x)!x.hasOwnProperty(b)||d!=null&&d.hasOwnProperty(b)||(b.indexOf("--")===0?l.setProperty(b,""):b==="float"?l.cssFloat="":l[b]="");for(var D in d)b=d[D],d.hasOwnProperty(D)&&x[D]!==b&&su(l,D,b)}else for(var P in d)d.hasOwnProperty(P)&&su(l,P,d[P])}function au(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),rx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Vl(l){return rx.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function Pa(){}var nu=null;function rc(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Fn=null,Oi=null;function ax(l){var d=Ln(l);if(d&&(l=d.stateNode)){var x=l[Ws]||null;e:switch(l=d.stateNode,d.type){case"input":if(sc(l,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name),d=x.name,x.type==="radio"&&d!=null){for(x=l;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll('input[name="'+kr(""+d)+'"][type="radio"]'),d=0;d<x.length;d++){var b=x[d];if(b!==l&&b.form===l.form){var D=b[Ws]||null;if(!D)throw Error(a(90));sc(b,D.value,D.defaultValue,D.defaultValue,D.checked,D.defaultChecked,D.type,D.name)}}for(d=0;d<x.length;d++)b=x[d],b.form===l.form&&Zd(b)}break e;case"textarea":eu(l,x.value,x.defaultValue);break e;case"select":d=x.value,d!=null&&Ri(l,!!x.multiple,d,!1)}}}var ac=!1;function iu(l,d,x){if(ac)return l(d,x);ac=!0;try{var b=l(d);return b}finally{if(ac=!1,(Fn!==null||Oi!==null)&&(h0(),Fn&&(d=Fn,l=Oi,Oi=Fn=null,ax(d),l)))for(d=0;d<l.length;d++)ax(l[d])}}function Hl(l,d){var x=l.stateNode;if(x===null)return null;var b=x[Ws]||null;if(b===null)return null;x=b[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(l=l.type,b=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!b;break e;default:l=!1}if(l)return null;if(x&&typeof x!="function")throw Error(a(231,d,typeof x));return x}var Ba=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nc=!1;if(Ba)try{var Li={};Object.defineProperty(Li,"passive",{get:function(){nc=!0}}),window.addEventListener("test",Li,Li),window.removeEventListener("test",Li,Li)}catch{nc=!1}var tn=null,lu=null,ql=null;function ou(){if(ql)return ql;var l,d=lu,x=d.length,b,D="value"in tn?tn.value:tn.textContent,P=D.length;for(l=0;l<x&&d[l]===D[l];l++);var re=x-l;for(b=1;b<=re&&d[x-b]===D[P-b];b++);return ql=D.slice(l,1<b?1-b:void 0)}function ic(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function lc(){return!0}function cu(){return!1}function Ys(l){function d(x,b,D,P,re){this._reactName=x,this._targetInst=D,this.type=b,this.nativeEvent=P,this.target=re,this.currentTarget=null;for(var de in l)l.hasOwnProperty(de)&&(x=l[de],this[de]=x?x(P):P[de]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?lc:cu,this.isPropagationStopped=cu,this}return f(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=lc)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=lc)},persist:function(){},isPersistent:lc}),d}var zn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oc=Ys(zn),Pi=f({},zn,{view:0,detail:0}),nx=Ys(Pi),du,uu,Bi,Wl=f({},Pi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cc,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Bi&&(Bi&&l.type==="mousemove"?(du=l.screenX-Bi.screenX,uu=l.screenY-Bi.screenY):uu=du=0,Bi=l),du)},movementY:function(l){return"movementY"in l?l.movementY:uu}}),ix=Ys(Wl),Zp=f({},Wl,{dataTransfer:0}),lx=Ys(Zp),ox=f({},Pi,{relatedTarget:0}),hu=Ys(ox),Qp=f({},zn,{animationName:0,elapsedTime:0,pseudoElement:0}),cx=Ys(Qp),dx=f({},zn,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Jp=Ys(dx),eg=f({},zn,{data:0}),mu=Ys(eg),ux={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hx(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=sg[l])?!!d[l]:!1}function cc(){return hx}var rg=f({},Pi,{key:function(l){if(l.key){var d=ux[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=ic(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?tg[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cc,charCode:function(l){return l.type==="keypress"?ic(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?ic(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),ag=Ys(rg),mx=f({},Wl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xu=Ys(mx),ng=f({},Pi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cc}),ig=Ys(ng),xx=f({},zn,{propertyName:0,elapsedTime:0,pseudoElement:0}),fx=Ys(xx),lg=f({},Wl,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),og=Ys(lg),px=f({},zn,{newState:0,oldState:0}),gx=Ys(px),cg=[9,13,27,32],fu=Ba&&"CompositionEvent"in window,Fi=null;Ba&&"documentMode"in document&&(Fi=document.documentMode);var bx=Ba&&"TextEvent"in window&&!Fi,yx=Ba&&(!fu||Fi&&8<Fi&&11>=Fi),vx=" ",pu=!1;function gu(l,d){switch(l){case"keyup":return cg.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jx(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var zi=!1;function wx(l,d){switch(l){case"compositionend":return jx(d);case"keypress":return d.which!==32?null:(pu=!0,vx);case"textInput":return l=d.data,l===vx&&pu?null:l;default:return null}}function Nx(l,d){if(zi)return l==="compositionend"||!fu&&gu(l,d)?(l=ou(),ql=lu=tn=null,zi=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return yx&&d.locale!=="ko"?null:d.data;default:return null}}var dg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _x(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!dg[l.type]:d==="textarea"}function bu(l,d,x,b){Fn?Oi?Oi.push(b):Oi=[b]:Fn=b,d=y0(d,"onChange"),0<d.length&&(x=new oc("onChange","change",null,x,b),l.push({event:x,listeners:d}))}var Ii=null,Yl=null;function ug(l){u5(l,0)}function Gl(l){var d=Il(l);if(Zd(d))return l}function ts(l,d){if(l==="change")return d}var kx=!1;if(Ba){var Bs;if(Ba){var Fa="oninput"in document;if(!Fa){var $i=document.createElement("div");$i.setAttribute("oninput","return;"),Fa=typeof $i.oninput=="function"}Bs=Fa}else Bs=!1;kx=Bs&&(!document.documentMode||9<document.documentMode)}function yu(){Ii&&(Ii.detachEvent("onpropertychange",Ui),Yl=Ii=null)}function Ui(l){if(l.propertyName==="value"&&Gl(Yl)){var d=[];bu(d,Yl,l,rc(l)),iu(ug,d)}}function Sx(l,d,x){l==="focusin"?(yu(),Ii=d,Yl=x,Ii.attachEvent("onpropertychange",Ui)):l==="focusout"&&yu()}function Kl(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Gl(Yl)}function Cx(l,d){if(l==="click")return Gl(d)}function sn(l,d){if(l==="input"||l==="change")return Gl(d)}function Tx(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var Bt=typeof Object.is=="function"?Object.is:Tx;function Xl(l,d){if(Bt(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var x=Object.keys(l),b=Object.keys(d);if(x.length!==b.length)return!1;for(b=0;b<x.length;b++){var D=x[b];if(!B.call(d,D)||!Bt(l[D],d[D]))return!1}return!0}function Ex(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function vu(l,d){var x=Ex(l);l=0;for(var b;x;){if(x.nodeType===3){if(b=l+x.textContent.length,l<=d&&b>=d)return{node:x,offset:d-l};l=b}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=Ex(x)}}function ju(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?ju(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function wu(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=Ul(l.document);d instanceof l.HTMLIFrameElement;){try{var x=typeof d.contentWindow.location.href=="string"}catch{x=!1}if(x)l=d.contentWindow;else break;d=Ul(l.document)}return d}function dc(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var Nu=Ba&&"documentMode"in document&&11>=document.documentMode,In=null,uc=null,Vi=null,_u=!1;function ku(l,d,x){var b=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;_u||In==null||In!==Ul(b)||(b=In,"selectionStart"in b&&dc(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),Vi&&Xl(Vi,b)||(Vi=b,b=y0(uc,"onSelect"),0<b.length&&(d=new oc("onSelect","select",null,d,x),l.push({event:d,listeners:b}),d.target=In)))}function $n(l,d){var x={};return x[l.toLowerCase()]=d.toLowerCase(),x["Webkit"+l]="webkit"+d,x["Moz"+l]="moz"+d,x}var Hi={animationend:$n("Animation","AnimationEnd"),animationiteration:$n("Animation","AnimationIteration"),animationstart:$n("Animation","AnimationStart"),transitionrun:$n("Transition","TransitionRun"),transitionstart:$n("Transition","TransitionStart"),transitioncancel:$n("Transition","TransitionCancel"),transitionend:$n("Transition","TransitionEnd")},Su={},Ax={};Ba&&(Ax=document.createElement("div").style,"AnimationEvent"in window||(delete Hi.animationend.animation,delete Hi.animationiteration.animation,delete Hi.animationstart.animation),"TransitionEvent"in window||delete Hi.transitionend.transition);function Un(l){if(Su[l])return Su[l];if(!Hi[l])return l;var d=Hi[l],x;for(x in d)if(d.hasOwnProperty(x)&&x in Ax)return Su[l]=d[x];return l}var Cu=Un("animationend"),hc=Un("animationiteration"),Dx=Un("animationstart"),hg=Un("transitionrun"),Tu=Un("transitionstart"),q1=Un("transitioncancel"),Rx=Un("transitionend"),Mx=new Map,ve="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ve.push("scrollEnd");function Fe(l,d){Mx.set(l,d),Pn(d,[l])}var Xe=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},Ft=[],ks=0,rn=0;function Zl(){for(var l=ks,d=rn=ks=0;d<l;){var x=Ft[d];Ft[d++]=null;var b=Ft[d];Ft[d++]=null;var D=Ft[d];Ft[d++]=null;var P=Ft[d];if(Ft[d++]=null,b!==null&&D!==null){var re=b.pending;re===null?D.next=D:(D.next=re.next,re.next=D),b.pending=D}P!==0&&W1(x,D,P)}}function Ox(l,d,x,b){Ft[ks++]=l,Ft[ks++]=d,Ft[ks++]=x,Ft[ks++]=b,rn|=b,l.lanes|=b,l=l.alternate,l!==null&&(l.lanes|=b)}function mg(l,d,x,b){return Ox(l,d,x,b),Lx(l)}function Ql(l,d){return Ox(l,null,null,d),Lx(l)}function W1(l,d,x){l.lanes|=x;var b=l.alternate;b!==null&&(b.lanes|=x);for(var D=!1,P=l.return;P!==null;)P.childLanes|=x,b=P.alternate,b!==null&&(b.childLanes|=x),P.tag===22&&(l=P.stateNode,l===null||l._visibility&1||(D=!0)),l=P,P=P.return;return l.tag===3?(P=l.stateNode,D&&d!==null&&(D=31-et(x),l=P.hiddenUpdates,b=l[D],b===null?l[D]=[d]:b.push(d),d.lane=x|536870912),P):null}function Lx(l){if(50<Xu)throw Xu=0,wb=null,Error(a(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var mc={};function G8(l,d,x,b){this.tag=l,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gr(l,d,x,b){return new G8(l,d,x,b)}function xg(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Vn(l,d){var x=l.alternate;return x===null?(x=Gr(l.tag,d,l.key,l.mode),x.elementType=l.elementType,x.type=l.type,x.stateNode=l.stateNode,x.alternate=l,l.alternate=x):(x.pendingProps=d,x.type=l.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=l.flags&65011712,x.childLanes=l.childLanes,x.lanes=l.lanes,x.child=l.child,x.memoizedProps=l.memoizedProps,x.memoizedState=l.memoizedState,x.updateQueue=l.updateQueue,d=l.dependencies,x.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},x.sibling=l.sibling,x.index=l.index,x.ref=l.ref,x.refCleanup=l.refCleanup,x}function Y1(l,d){l.flags&=65011714;var x=l.alternate;return x===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=x.childLanes,l.lanes=x.lanes,l.child=x.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=x.memoizedProps,l.memoizedState=x.memoizedState,l.updateQueue=x.updateQueue,l.type=x.type,d=x.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function Px(l,d,x,b,D,P){var re=0;if(b=l,typeof l=="function")xg(l)&&(re=1);else if(typeof l=="string")re=JR(l,x,ne.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case C:return l=Gr(31,x,d,D),l.elementType=C,l.lanes=P,l;case y:return Jl(x.children,D,P,d);case w:re=8,D|=24;break;case N:return l=Gr(12,x,d,D|2),l.elementType=N,l.lanes=P,l;case T:return l=Gr(13,x,d,D),l.elementType=T,l.lanes=P,l;case E:return l=Gr(19,x,d,D),l.elementType=E,l.lanes=P,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case S:re=10;break e;case k:re=9;break e;case _:re=11;break e;case z:re=14;break e;case O:re=16,b=null;break e}re=29,x=Error(a(130,l===null?"null":typeof l,"")),b=null}return d=Gr(re,x,d,D),d.elementType=l,d.type=b,d.lanes=P,d}function Jl(l,d,x,b){return l=Gr(7,l,b,d),l.lanes=x,l}function fg(l,d,x){return l=Gr(6,l,null,d),l.lanes=x,l}function G1(l){var d=Gr(18,null,null,0);return d.stateNode=l,d}function pg(l,d,x){return d=Gr(4,l.children!==null?l.children:[],l.key,d),d.lanes=x,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var K1=new WeakMap;function ca(l,d){if(typeof l=="object"&&l!==null){var x=K1.get(l);return x!==void 0?x:(d={value:l,source:d,stack:M(d)},K1.set(l,d),d)}return{value:l,source:d,stack:M(d)}}var xc=[],fc=0,Bx=null,Eu=0,da=[],ua=0,qi=null,an=1,nn="";function Hn(l,d){xc[fc++]=Eu,xc[fc++]=Bx,Bx=l,Eu=d}function X1(l,d,x){da[ua++]=an,da[ua++]=nn,da[ua++]=qi,qi=l;var b=an;l=nn;var D=32-et(b)-1;b&=~(1<<D),x+=1;var P=32-et(d)+D;if(30<P){var re=D-D%5;P=(b&(1<<re)-1).toString(32),b>>=re,D-=re,an=1<<32-et(d)+D|x<<D|b,nn=P+l}else an=1<<P|x<<D|b,nn=l}function gg(l){l.return!==null&&(Hn(l,1),X1(l,1,0))}function bg(l){for(;l===Bx;)Bx=xc[--fc],xc[fc]=null,Eu=xc[--fc],xc[fc]=null;for(;l===qi;)qi=da[--ua],da[ua]=null,nn=da[--ua],da[ua]=null,an=da[--ua],da[ua]=null}function Z1(l,d){da[ua++]=an,da[ua++]=nn,da[ua++]=qi,an=d.id,nn=d.overflow,qi=l}var Gs=null,Gt=null,Nt=!1,Wi=null,ha=!1,yg=Error(a(519));function Yi(l){var d=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Au(ca(d,l)),yg}function Q1(l){var d=l.stateNode,x=l.type,b=l.memoizedProps;switch(d[Ps]=l,d[Ws]=b,x){case"dialog":pt("cancel",d),pt("close",d);break;case"iframe":case"object":case"embed":pt("load",d);break;case"video":case"audio":for(x=0;x<Qu.length;x++)pt(Qu[x],d);break;case"source":pt("error",d);break;case"img":case"image":case"link":pt("error",d),pt("load",d);break;case"details":pt("toggle",d);break;case"input":pt("invalid",d),Qd(d,b.value,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name,!0);break;case"select":pt("invalid",d);break;case"textarea":pt("invalid",d),tu(d,b.value,b.defaultValue,b.children)}x=b.children,typeof x!="string"&&typeof x!="number"&&typeof x!="bigint"||d.textContent===""+x||b.suppressHydrationWarning===!0||f5(d.textContent,x)?(b.popover!=null&&(pt("beforetoggle",d),pt("toggle",d)),b.onScroll!=null&&pt("scroll",d),b.onScrollEnd!=null&&pt("scrollend",d),b.onClick!=null&&(d.onclick=Pa),d=!0):d=!1,d||Yi(l,!0)}function J1(l){for(Gs=l.return;Gs;)switch(Gs.tag){case 5:case 31:case 13:ha=!1;return;case 27:case 3:ha=!0;return;default:Gs=Gs.return}}function pc(l){if(l!==Gs)return!1;if(!Nt)return J1(l),Nt=!0,!1;var d=l.tag,x;if((x=d!==3&&d!==27)&&((x=d===5)&&(x=l.type,x=!(x!=="form"&&x!=="button")||Bb(l.type,l.memoizedProps)),x=!x),x&&Gt&&Yi(l),J1(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(a(317));Gt=_5(l)}else if(d===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(a(317));Gt=_5(l)}else d===27?(d=Gt,ll(l.type)?(l=Ub,Ub=null,Gt=l):Gt=d):Gt=Gs?xa(l.stateNode.nextSibling):null;return!0}function eo(){Gt=Gs=null,Nt=!1}function vg(){var l=Wi;return l!==null&&(Er===null?Er=l:Er.push.apply(Er,l),Wi=null),l}function Au(l){Wi===null?Wi=[l]:Wi.push(l)}var jg=K(null),to=null,qn=null;function Gi(l,d,x){ie(jg,d._currentValue),d._currentValue=x}function Wn(l){l._currentValue=jg.current,$(jg)}function wg(l,d,x){for(;l!==null;){var b=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,b!==null&&(b.childLanes|=d)):b!==null&&(b.childLanes&d)!==d&&(b.childLanes|=d),l===x)break;l=l.return}}function Ng(l,d,x,b){var D=l.child;for(D!==null&&(D.return=l);D!==null;){var P=D.dependencies;if(P!==null){var re=D.child;P=P.firstContext;e:for(;P!==null;){var de=P;P=D;for(var pe=0;pe<d.length;pe++)if(de.context===d[pe]){P.lanes|=x,de=P.alternate,de!==null&&(de.lanes|=x),wg(P.return,x,l),b||(re=null);break e}P=de.next}}else if(D.tag===18){if(re=D.return,re===null)throw Error(a(341));re.lanes|=x,P=re.alternate,P!==null&&(P.lanes|=x),wg(re,x,l),re=null}else re=D.child;if(re!==null)re.return=D;else for(re=D;re!==null;){if(re===l){re=null;break}if(D=re.sibling,D!==null){D.return=re.return,re=D;break}re=re.return}D=re}}function gc(l,d,x,b){l=null;for(var D=d,P=!1;D!==null;){if(!P){if((D.flags&524288)!==0)P=!0;else if((D.flags&262144)!==0)break}if(D.tag===10){var re=D.alternate;if(re===null)throw Error(a(387));if(re=re.memoizedProps,re!==null){var de=D.type;Bt(D.pendingProps.value,re.value)||(l!==null?l.push(de):l=[de])}}else if(D===U.current){if(re=D.alternate,re===null)throw Error(a(387));re.memoizedState.memoizedState!==D.memoizedState.memoizedState&&(l!==null?l.push(rh):l=[rh])}D=D.return}l!==null&&Ng(d,l,x,b),d.flags|=262144}function Fx(l){for(l=l.firstContext;l!==null;){if(!Bt(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function so(l){to=l,qn=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Ks(l){return e2(to,l)}function zx(l,d){return to===null&&so(l),e2(l,d)}function e2(l,d){var x=d._currentValue;if(d={context:d,memoizedValue:x,next:null},qn===null){if(l===null)throw Error(a(308));qn=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else qn=qn.next=d;return x}var K8=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(x,b){l.push(b)}};this.abort=function(){d.aborted=!0,l.forEach(function(x){return x()})}},X8=s.unstable_scheduleCallback,Z8=s.unstable_NormalPriority,Ss={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _g(){return{controller:new K8,data:new Map,refCount:0}}function Du(l){l.refCount--,l.refCount===0&&X8(Z8,function(){l.controller.abort()})}var Ru=null,kg=0,bc=0,yc=null;function Q8(l,d){if(Ru===null){var x=Ru=[];kg=0,bc=Tb(),yc={status:"pending",value:void 0,then:function(b){x.push(b)}}}return kg++,d.then(t2,t2),d}function t2(){if(--kg===0&&Ru!==null){yc!==null&&(yc.status="fulfilled");var l=Ru;Ru=null,bc=0,yc=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function J8(l,d){var x=[],b={status:"pending",value:null,reason:null,then:function(D){x.push(D)}};return l.then(function(){b.status="fulfilled",b.value=d;for(var D=0;D<x.length;D++)(0,x[D])(d)},function(D){for(b.status="rejected",b.reason=D,D=0;D<x.length;D++)(0,x[D])(void 0)}),b}var s2=ee.S;ee.S=function(l,d){z_=Te(),typeof d=="object"&&d!==null&&typeof d.then=="function"&&Q8(l,d),s2!==null&&s2(l,d)};var ro=K(null);function Sg(){var l=ro.current;return l!==null?l:Ht.pooledCache}function Ix(l,d){d===null?ie(ro,ro.current):ie(ro,d.pool)}function r2(){var l=Sg();return l===null?null:{parent:Ss._currentValue,pool:l}}var vc=Error(a(460)),Cg=Error(a(474)),$x=Error(a(542)),Ux={then:function(){}};function a2(l){return l=l.status,l==="fulfilled"||l==="rejected"}function n2(l,d,x){switch(x=l[x],x===void 0?l.push(d):x!==d&&(d.then(Pa,Pa),d=x),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,l2(l),l;default:if(typeof d.status=="string")d.then(Pa,Pa);else{if(l=Ht,l!==null&&100<l.shellSuspendCounter)throw Error(a(482));l=d,l.status="pending",l.then(function(b){if(d.status==="pending"){var D=d;D.status="fulfilled",D.value=b}},function(b){if(d.status==="pending"){var D=d;D.status="rejected",D.reason=b}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,l2(l),l}throw no=d,vc}}function ao(l){try{var d=l._init;return d(l._payload)}catch(x){throw x!==null&&typeof x=="object"&&typeof x.then=="function"?(no=x,vc):x}}var no=null;function i2(){if(no===null)throw Error(a(459));var l=no;return no=null,l}function l2(l){if(l===vc||l===$x)throw Error(a(483))}var jc=null,Mu=0;function Vx(l){var d=Mu;return Mu+=1,jc===null&&(jc=[]),n2(jc,l,d)}function Ou(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function Hx(l,d){throw d.$$typeof===p?Error(a(525)):(l=Object.prototype.toString.call(d),Error(a(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function o2(l){function d(ye,ge){if(l){var je=ye.deletions;je===null?(ye.deletions=[ge],ye.flags|=16):je.push(ge)}}function x(ye,ge){if(!l)return null;for(;ge!==null;)d(ye,ge),ge=ge.sibling;return null}function b(ye){for(var ge=new Map;ye!==null;)ye.key!==null?ge.set(ye.key,ye):ge.set(ye.index,ye),ye=ye.sibling;return ge}function D(ye,ge){return ye=Vn(ye,ge),ye.index=0,ye.sibling=null,ye}function P(ye,ge,je){return ye.index=je,l?(je=ye.alternate,je!==null?(je=je.index,je<ge?(ye.flags|=67108866,ge):je):(ye.flags|=67108866,ge)):(ye.flags|=1048576,ge)}function re(ye){return l&&ye.alternate===null&&(ye.flags|=67108866),ye}function de(ye,ge,je,Re){return ge===null||ge.tag!==6?(ge=fg(je,ye.mode,Re),ge.return=ye,ge):(ge=D(ge,je),ge.return=ye,ge)}function pe(ye,ge,je,Re){var Ke=je.type;return Ke===y?Ae(ye,ge,je.props.children,Re,je.key):ge!==null&&(ge.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===O&&ao(Ke)===ge.type)?(ge=D(ge,je.props),Ou(ge,je),ge.return=ye,ge):(ge=Px(je.type,je.key,je.props,null,ye.mode,Re),Ou(ge,je),ge.return=ye,ge)}function we(ye,ge,je,Re){return ge===null||ge.tag!==4||ge.stateNode.containerInfo!==je.containerInfo||ge.stateNode.implementation!==je.implementation?(ge=pg(je,ye.mode,Re),ge.return=ye,ge):(ge=D(ge,je.children||[]),ge.return=ye,ge)}function Ae(ye,ge,je,Re,Ke){return ge===null||ge.tag!==7?(ge=Jl(je,ye.mode,Re,Ke),ge.return=ye,ge):(ge=D(ge,je),ge.return=ye,ge)}function Me(ye,ge,je){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return ge=fg(""+ge,ye.mode,je),ge.return=ye,ge;if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case v:return je=Px(ge.type,ge.key,ge.props,null,ye.mode,je),Ou(je,ge),je.return=ye,je;case g:return ge=pg(ge,ye.mode,je),ge.return=ye,ge;case O:return ge=ao(ge),Me(ye,ge,je)}if(H(ge)||I(ge))return ge=Jl(ge,ye.mode,je,null),ge.return=ye,ge;if(typeof ge.then=="function")return Me(ye,Vx(ge),je);if(ge.$$typeof===S)return Me(ye,zx(ye,ge),je);Hx(ye,ge)}return null}function ke(ye,ge,je,Re){var Ke=ge!==null?ge.key:null;if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return Ke!==null?null:de(ye,ge,""+je,Re);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case v:return je.key===Ke?pe(ye,ge,je,Re):null;case g:return je.key===Ke?we(ye,ge,je,Re):null;case O:return je=ao(je),ke(ye,ge,je,Re)}if(H(je)||I(je))return Ke!==null?null:Ae(ye,ge,je,Re,null);if(typeof je.then=="function")return ke(ye,ge,Vx(je),Re);if(je.$$typeof===S)return ke(ye,ge,zx(ye,je),Re);Hx(ye,je)}return null}function Ce(ye,ge,je,Re,Ke){if(typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint")return ye=ye.get(je)||null,de(ge,ye,""+Re,Ke);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case v:return ye=ye.get(Re.key===null?je:Re.key)||null,pe(ge,ye,Re,Ke);case g:return ye=ye.get(Re.key===null?je:Re.key)||null,we(ge,ye,Re,Ke);case O:return Re=ao(Re),Ce(ye,ge,je,Re,Ke)}if(H(Re)||I(Re))return ye=ye.get(je)||null,Ae(ge,ye,Re,Ke,null);if(typeof Re.then=="function")return Ce(ye,ge,je,Vx(Re),Ke);if(Re.$$typeof===S)return Ce(ye,ge,je,zx(ge,Re),Ke);Hx(ge,Re)}return null}function $e(ye,ge,je,Re){for(var Ke=null,St=null,qe=ge,dt=ge=0,vt=null;qe!==null&&dt<je.length;dt++){qe.index>dt?(vt=qe,qe=null):vt=qe.sibling;var Ct=ke(ye,qe,je[dt],Re);if(Ct===null){qe===null&&(qe=vt);break}l&&qe&&Ct.alternate===null&&d(ye,qe),ge=P(Ct,ge,dt),St===null?Ke=Ct:St.sibling=Ct,St=Ct,qe=vt}if(dt===je.length)return x(ye,qe),Nt&&Hn(ye,dt),Ke;if(qe===null){for(;dt<je.length;dt++)qe=Me(ye,je[dt],Re),qe!==null&&(ge=P(qe,ge,dt),St===null?Ke=qe:St.sibling=qe,St=qe);return Nt&&Hn(ye,dt),Ke}for(qe=b(qe);dt<je.length;dt++)vt=Ce(qe,ye,dt,je[dt],Re),vt!==null&&(l&&vt.alternate!==null&&qe.delete(vt.key===null?dt:vt.key),ge=P(vt,ge,dt),St===null?Ke=vt:St.sibling=vt,St=vt);return l&&qe.forEach(function(hl){return d(ye,hl)}),Nt&&Hn(ye,dt),Ke}function Je(ye,ge,je,Re){if(je==null)throw Error(a(151));for(var Ke=null,St=null,qe=ge,dt=ge=0,vt=null,Ct=je.next();qe!==null&&!Ct.done;dt++,Ct=je.next()){qe.index>dt?(vt=qe,qe=null):vt=qe.sibling;var hl=ke(ye,qe,Ct.value,Re);if(hl===null){qe===null&&(qe=vt);break}l&&qe&&hl.alternate===null&&d(ye,qe),ge=P(hl,ge,dt),St===null?Ke=hl:St.sibling=hl,St=hl,qe=vt}if(Ct.done)return x(ye,qe),Nt&&Hn(ye,dt),Ke;if(qe===null){for(;!Ct.done;dt++,Ct=je.next())Ct=Me(ye,Ct.value,Re),Ct!==null&&(ge=P(Ct,ge,dt),St===null?Ke=Ct:St.sibling=Ct,St=Ct);return Nt&&Hn(ye,dt),Ke}for(qe=b(qe);!Ct.done;dt++,Ct=je.next())Ct=Ce(qe,ye,dt,Ct.value,Re),Ct!==null&&(l&&Ct.alternate!==null&&qe.delete(Ct.key===null?dt:Ct.key),ge=P(Ct,ge,dt),St===null?Ke=Ct:St.sibling=Ct,St=Ct);return l&&qe.forEach(function(dM){return d(ye,dM)}),Nt&&Hn(ye,dt),Ke}function $t(ye,ge,je,Re){if(typeof je=="object"&&je!==null&&je.type===y&&je.key===null&&(je=je.props.children),typeof je=="object"&&je!==null){switch(je.$$typeof){case v:e:{for(var Ke=je.key;ge!==null;){if(ge.key===Ke){if(Ke=je.type,Ke===y){if(ge.tag===7){x(ye,ge.sibling),Re=D(ge,je.props.children),Re.return=ye,ye=Re;break e}}else if(ge.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===O&&ao(Ke)===ge.type){x(ye,ge.sibling),Re=D(ge,je.props),Ou(Re,je),Re.return=ye,ye=Re;break e}x(ye,ge);break}else d(ye,ge);ge=ge.sibling}je.type===y?(Re=Jl(je.props.children,ye.mode,Re,je.key),Re.return=ye,ye=Re):(Re=Px(je.type,je.key,je.props,null,ye.mode,Re),Ou(Re,je),Re.return=ye,ye=Re)}return re(ye);case g:e:{for(Ke=je.key;ge!==null;){if(ge.key===Ke)if(ge.tag===4&&ge.stateNode.containerInfo===je.containerInfo&&ge.stateNode.implementation===je.implementation){x(ye,ge.sibling),Re=D(ge,je.children||[]),Re.return=ye,ye=Re;break e}else{x(ye,ge);break}else d(ye,ge);ge=ge.sibling}Re=pg(je,ye.mode,Re),Re.return=ye,ye=Re}return re(ye);case O:return je=ao(je),$t(ye,ge,je,Re)}if(H(je))return $e(ye,ge,je,Re);if(I(je)){if(Ke=I(je),typeof Ke!="function")throw Error(a(150));return je=Ke.call(je),Je(ye,ge,je,Re)}if(typeof je.then=="function")return $t(ye,ge,Vx(je),Re);if(je.$$typeof===S)return $t(ye,ge,zx(ye,je),Re);Hx(ye,je)}return typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint"?(je=""+je,ge!==null&&ge.tag===6?(x(ye,ge.sibling),Re=D(ge,je),Re.return=ye,ye=Re):(x(ye,ge),Re=fg(je,ye.mode,Re),Re.return=ye,ye=Re),re(ye)):x(ye,ge)}return function(ye,ge,je,Re){try{Mu=0;var Ke=$t(ye,ge,je,Re);return jc=null,Ke}catch(qe){if(qe===vc||qe===$x)throw qe;var St=Gr(29,qe,null,ye.mode);return St.lanes=Re,St.return=ye,St}finally{}}}var io=o2(!0),c2=o2(!1),Ki=!1;function Tg(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Eg(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Xi(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Zi(l,d,x){var b=l.updateQueue;if(b===null)return null;if(b=b.shared,(Et&2)!==0){var D=b.pending;return D===null?d.next=d:(d.next=D.next,D.next=d),b.pending=d,d=Lx(l),W1(l,null,x),d}return Ox(l,b,d,x),Lx(l)}function Lu(l,d,x){if(d=d.updateQueue,d!==null&&(d=d.shared,(x&4194048)!==0)){var b=d.lanes;b&=l.pendingLanes,x|=b,d.lanes=x,Vd(l,x)}}function Ag(l,d){var x=l.updateQueue,b=l.alternate;if(b!==null&&(b=b.updateQueue,x===b)){var D=null,P=null;if(x=x.firstBaseUpdate,x!==null){do{var re={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};P===null?D=P=re:P=P.next=re,x=x.next}while(x!==null);P===null?D=P=d:P=P.next=d}else D=P=d;x={baseState:b.baseState,firstBaseUpdate:D,lastBaseUpdate:P,shared:b.shared,callbacks:b.callbacks},l.updateQueue=x;return}l=x.lastBaseUpdate,l===null?x.firstBaseUpdate=d:l.next=d,x.lastBaseUpdate=d}var Dg=!1;function Pu(){if(Dg){var l=yc;if(l!==null)throw l}}function Bu(l,d,x,b){Dg=!1;var D=l.updateQueue;Ki=!1;var P=D.firstBaseUpdate,re=D.lastBaseUpdate,de=D.shared.pending;if(de!==null){D.shared.pending=null;var pe=de,we=pe.next;pe.next=null,re===null?P=we:re.next=we,re=pe;var Ae=l.alternate;Ae!==null&&(Ae=Ae.updateQueue,de=Ae.lastBaseUpdate,de!==re&&(de===null?Ae.firstBaseUpdate=we:de.next=we,Ae.lastBaseUpdate=pe))}if(P!==null){var Me=D.baseState;re=0,Ae=we=pe=null,de=P;do{var ke=de.lane&-536870913,Ce=ke!==de.lane;if(Ce?(yt&ke)===ke:(b&ke)===ke){ke!==0&&ke===bc&&(Dg=!0),Ae!==null&&(Ae=Ae.next={lane:0,tag:de.tag,payload:de.payload,callback:null,next:null});e:{var $e=l,Je=de;ke=d;var $t=x;switch(Je.tag){case 1:if($e=Je.payload,typeof $e=="function"){Me=$e.call($t,Me,ke);break e}Me=$e;break e;case 3:$e.flags=$e.flags&-65537|128;case 0:if($e=Je.payload,ke=typeof $e=="function"?$e.call($t,Me,ke):$e,ke==null)break e;Me=f({},Me,ke);break e;case 2:Ki=!0}}ke=de.callback,ke!==null&&(l.flags|=64,Ce&&(l.flags|=8192),Ce=D.callbacks,Ce===null?D.callbacks=[ke]:Ce.push(ke))}else Ce={lane:ke,tag:de.tag,payload:de.payload,callback:de.callback,next:null},Ae===null?(we=Ae=Ce,pe=Me):Ae=Ae.next=Ce,re|=ke;if(de=de.next,de===null){if(de=D.shared.pending,de===null)break;Ce=de,de=Ce.next,Ce.next=null,D.lastBaseUpdate=Ce,D.shared.pending=null}}while(!0);Ae===null&&(pe=Me),D.baseState=pe,D.firstBaseUpdate=we,D.lastBaseUpdate=Ae,P===null&&(D.shared.lanes=0),sl|=re,l.lanes=re,l.memoizedState=Me}}function d2(l,d){if(typeof l!="function")throw Error(a(191,l));l.call(d)}function u2(l,d){var x=l.callbacks;if(x!==null)for(l.callbacks=null,l=0;l<x.length;l++)d2(x[l],d)}var wc=K(null),qx=K(0);function h2(l,d){l=ti,ie(qx,l),ie(wc,d),ti=l|d.baseLanes}function Rg(){ie(qx,ti),ie(wc,wc.current)}function Mg(){ti=qx.current,$(wc),$(qx)}var Kr=K(null),ma=null;function Qi(l){var d=l.alternate;ie(ps,ps.current&1),ie(Kr,l),ma===null&&(d===null||wc.current!==null||d.memoizedState!==null)&&(ma=l)}function Og(l){ie(ps,ps.current),ie(Kr,l),ma===null&&(ma=l)}function m2(l){l.tag===22?(ie(ps,ps.current),ie(Kr,l),ma===null&&(ma=l)):Ji()}function Ji(){ie(ps,ps.current),ie(Kr,Kr.current)}function Xr(l){$(Kr),ma===l&&(ma=null),$(ps)}var ps=K(0);function Wx(l){for(var d=l;d!==null;){if(d.tag===13){var x=d.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||Ib(x)||$b(x)))return d}else if(d.tag===19&&(d.memoizedProps.revealOrder==="forwards"||d.memoizedProps.revealOrder==="backwards"||d.memoizedProps.revealOrder==="unstable_legacy-backwards"||d.memoizedProps.revealOrder==="together")){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Yn=0,ot=null,zt=null,Cs=null,Yx=!1,Nc=!1,lo=!1,Gx=0,Fu=0,_c=null,eR=0;function os(){throw Error(a(321))}function Lg(l,d){if(d===null)return!1;for(var x=0;x<d.length&&x<l.length;x++)if(!Bt(l[x],d[x]))return!1;return!0}function Pg(l,d,x,b,D,P){return Yn=P,ot=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,ee.H=l===null||l.memoizedState===null?X2:Zg,lo=!1,P=x(b,D),lo=!1,Nc&&(P=f2(d,x,b,D)),x2(l),P}function x2(l){ee.H=$u;var d=zt!==null&&zt.next!==null;if(Yn=0,Cs=zt=ot=null,Yx=!1,Fu=0,_c=null,d)throw Error(a(300));l===null||Ts||(l=l.dependencies,l!==null&&Fx(l)&&(Ts=!0))}function f2(l,d,x,b){ot=l;var D=0;do{if(Nc&&(_c=null),Fu=0,Nc=!1,25<=D)throw Error(a(301));if(D+=1,Cs=zt=null,l.updateQueue!=null){var P=l.updateQueue;P.lastEffect=null,P.events=null,P.stores=null,P.memoCache!=null&&(P.memoCache.index=0)}ee.H=Z2,P=d(x,b)}while(Nc);return P}function tR(){var l=ee.H,d=l.useState()[0];return d=typeof d.then=="function"?zu(d):d,l=l.useState()[0],(zt!==null?zt.memoizedState:null)!==l&&(ot.flags|=1024),d}function Bg(){var l=Gx!==0;return Gx=0,l}function Fg(l,d,x){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~x}function zg(l){if(Yx){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}Yx=!1}Yn=0,Cs=zt=ot=null,Nc=!1,Fu=Gx=0,_c=null}function yr(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cs===null?ot.memoizedState=Cs=l:Cs=Cs.next=l,Cs}function gs(){if(zt===null){var l=ot.alternate;l=l!==null?l.memoizedState:null}else l=zt.next;var d=Cs===null?ot.memoizedState:Cs.next;if(d!==null)Cs=d,zt=l;else{if(l===null)throw ot.alternate===null?Error(a(467)):Error(a(310));zt=l,l={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},Cs===null?ot.memoizedState=Cs=l:Cs=Cs.next=l}return Cs}function Kx(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zu(l){var d=Fu;return Fu+=1,_c===null&&(_c=[]),l=n2(_c,l,d),d=ot,(Cs===null?d.memoizedState:Cs.next)===null&&(d=d.alternate,ee.H=d===null||d.memoizedState===null?X2:Zg),l}function Xx(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return zu(l);if(l.$$typeof===S)return Ks(l)}throw Error(a(438,String(l)))}function Ig(l){var d=null,x=ot.updateQueue;if(x!==null&&(d=x.memoCache),d==null){var b=ot.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(d={data:b.data.map(function(D){return D.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),x===null&&(x=Kx(),ot.updateQueue=x),x.memoCache=d,x=d.data[d.index],x===void 0)for(x=d.data[d.index]=Array(l),b=0;b<l;b++)x[b]=A;return d.index++,x}function Gn(l,d){return typeof d=="function"?d(l):d}function Zx(l){var d=gs();return $g(d,zt,l)}function $g(l,d,x){var b=l.queue;if(b===null)throw Error(a(311));b.lastRenderedReducer=x;var D=l.baseQueue,P=b.pending;if(P!==null){if(D!==null){var re=D.next;D.next=P.next,P.next=re}d.baseQueue=D=P,b.pending=null}if(P=l.baseState,D===null)l.memoizedState=P;else{d=D.next;var de=re=null,pe=null,we=d,Ae=!1;do{var Me=we.lane&-536870913;if(Me!==we.lane?(yt&Me)===Me:(Yn&Me)===Me){var ke=we.revertLane;if(ke===0)pe!==null&&(pe=pe.next={lane:0,revertLane:0,gesture:null,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null}),Me===bc&&(Ae=!0);else if((Yn&ke)===ke){we=we.next,ke===bc&&(Ae=!0);continue}else Me={lane:0,revertLane:we.revertLane,gesture:null,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null},pe===null?(de=pe=Me,re=P):pe=pe.next=Me,ot.lanes|=ke,sl|=ke;Me=we.action,lo&&x(P,Me),P=we.hasEagerState?we.eagerState:x(P,Me)}else ke={lane:Me,revertLane:we.revertLane,gesture:we.gesture,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null},pe===null?(de=pe=ke,re=P):pe=pe.next=ke,ot.lanes|=Me,sl|=Me;we=we.next}while(we!==null&&we!==d);if(pe===null?re=P:pe.next=de,!Bt(P,l.memoizedState)&&(Ts=!0,Ae&&(x=yc,x!==null)))throw x;l.memoizedState=P,l.baseState=re,l.baseQueue=pe,b.lastRenderedState=P}return D===null&&(b.lanes=0),[l.memoizedState,b.dispatch]}function Ug(l){var d=gs(),x=d.queue;if(x===null)throw Error(a(311));x.lastRenderedReducer=l;var b=x.dispatch,D=x.pending,P=d.memoizedState;if(D!==null){x.pending=null;var re=D=D.next;do P=l(P,re.action),re=re.next;while(re!==D);Bt(P,d.memoizedState)||(Ts=!0),d.memoizedState=P,d.baseQueue===null&&(d.baseState=P),x.lastRenderedState=P}return[P,b]}function p2(l,d,x){var b=ot,D=gs(),P=Nt;if(P){if(x===void 0)throw Error(a(407));x=x()}else x=d();var re=!Bt((zt||D).memoizedState,x);if(re&&(D.memoizedState=x,Ts=!0),D=D.queue,qg(y2.bind(null,b,D,l),[l]),D.getSnapshot!==d||re||Cs!==null&&Cs.memoizedState.tag&1){if(b.flags|=2048,kc(9,{destroy:void 0},b2.bind(null,b,D,x,d),null),Ht===null)throw Error(a(349));P||(Yn&127)!==0||g2(b,d,x)}return x}function g2(l,d,x){l.flags|=16384,l={getSnapshot:d,value:x},d=ot.updateQueue,d===null?(d=Kx(),ot.updateQueue=d,d.stores=[l]):(x=d.stores,x===null?d.stores=[l]:x.push(l))}function b2(l,d,x,b){d.value=x,d.getSnapshot=b,v2(d)&&j2(l)}function y2(l,d,x){return x(function(){v2(d)&&j2(l)})}function v2(l){var d=l.getSnapshot;l=l.value;try{var x=d();return!Bt(l,x)}catch{return!0}}function j2(l){var d=Ql(l,2);d!==null&&Ar(d,l,2)}function Vg(l){var d=yr();if(typeof l=="function"){var x=l;if(l=x(),lo){Ze(!0);try{x()}finally{Ze(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gn,lastRenderedState:l},d}function w2(l,d,x,b){return l.baseState=x,$g(l,zt,typeof b=="function"?b:Gn)}function sR(l,d,x,b,D){if(e0(l))throw Error(a(485));if(l=d.action,l!==null){var P={payload:D,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(re){P.listeners.push(re)}};ee.T!==null?x(!0):P.isTransition=!1,b(P),x=d.pending,x===null?(P.next=d.pending=P,N2(d,P)):(P.next=x.next,d.pending=x.next=P)}}function N2(l,d){var x=d.action,b=d.payload,D=l.state;if(d.isTransition){var P=ee.T,re={};ee.T=re;try{var de=x(D,b),pe=ee.S;pe!==null&&pe(re,de),_2(l,d,de)}catch(we){Hg(l,d,we)}finally{P!==null&&re.types!==null&&(P.types=re.types),ee.T=P}}else try{P=x(D,b),_2(l,d,P)}catch(we){Hg(l,d,we)}}function _2(l,d,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(b){k2(l,d,b)},function(b){return Hg(l,d,b)}):k2(l,d,x)}function k2(l,d,x){d.status="fulfilled",d.value=x,S2(d),l.state=x,d=l.pending,d!==null&&(x=d.next,x===d?l.pending=null:(x=x.next,d.next=x,N2(l,x)))}function Hg(l,d,x){var b=l.pending;if(l.pending=null,b!==null){b=b.next;do d.status="rejected",d.reason=x,S2(d),d=d.next;while(d!==b)}l.action=null}function S2(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function C2(l,d){return d}function T2(l,d){if(Nt){var x=Ht.formState;if(x!==null){e:{var b=ot;if(Nt){if(Gt){t:{for(var D=Gt,P=ha;D.nodeType!==8;){if(!P){D=null;break t}if(D=xa(D.nextSibling),D===null){D=null;break t}}P=D.data,D=P==="F!"||P==="F"?D:null}if(D){Gt=xa(D.nextSibling),b=D.data==="F!";break e}}Yi(b)}b=!1}b&&(d=x[0])}}return x=yr(),x.memoizedState=x.baseState=d,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:C2,lastRenderedState:d},x.queue=b,x=Y2.bind(null,ot,b),b.dispatch=x,b=Vg(!1),P=Xg.bind(null,ot,!1,b.queue),b=yr(),D={state:d,dispatch:null,action:l,pending:null},b.queue=D,x=sR.bind(null,ot,D,P,x),D.dispatch=x,b.memoizedState=l,[d,x,!1]}function E2(l){var d=gs();return A2(d,zt,l)}function A2(l,d,x){if(d=$g(l,d,C2)[0],l=Zx(Gn)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var b=zu(d)}catch(re){throw re===vc?$x:re}else b=d;d=gs();var D=d.queue,P=D.dispatch;return x!==d.memoizedState&&(ot.flags|=2048,kc(9,{destroy:void 0},rR.bind(null,D,x),null)),[b,P,l]}function rR(l,d){l.action=d}function D2(l){var d=gs(),x=zt;if(x!==null)return A2(d,x,l);gs(),d=d.memoizedState,x=gs();var b=x.queue.dispatch;return x.memoizedState=l,[d,b,!1]}function kc(l,d,x,b){return l={tag:l,create:x,deps:b,inst:d,next:null},d=ot.updateQueue,d===null&&(d=Kx(),ot.updateQueue=d),x=d.lastEffect,x===null?d.lastEffect=l.next=l:(b=x.next,x.next=l,l.next=b,d.lastEffect=l),l}function R2(){return gs().memoizedState}function Qx(l,d,x,b){var D=yr();ot.flags|=l,D.memoizedState=kc(1|d,{destroy:void 0},x,b===void 0?null:b)}function Jx(l,d,x,b){var D=gs();b=b===void 0?null:b;var P=D.memoizedState.inst;zt!==null&&b!==null&&Lg(b,zt.memoizedState.deps)?D.memoizedState=kc(d,P,x,b):(ot.flags|=l,D.memoizedState=kc(1|d,P,x,b))}function M2(l,d){Qx(8390656,8,l,d)}function qg(l,d){Jx(2048,8,l,d)}function aR(l){ot.flags|=4;var d=ot.updateQueue;if(d===null)d=Kx(),ot.updateQueue=d,d.events=[l];else{var x=d.events;x===null?d.events=[l]:x.push(l)}}function O2(l){var d=gs().memoizedState;return aR({ref:d,nextImpl:l}),function(){if((Et&2)!==0)throw Error(a(440));return d.impl.apply(void 0,arguments)}}function L2(l,d){return Jx(4,2,l,d)}function P2(l,d){return Jx(4,4,l,d)}function B2(l,d){if(typeof d=="function"){l=l();var x=d(l);return function(){typeof x=="function"?x():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function F2(l,d,x){x=x!=null?x.concat([l]):null,Jx(4,4,B2.bind(null,d,l),x)}function Wg(){}function z2(l,d){var x=gs();d=d===void 0?null:d;var b=x.memoizedState;return d!==null&&Lg(d,b[1])?b[0]:(x.memoizedState=[l,d],l)}function I2(l,d){var x=gs();d=d===void 0?null:d;var b=x.memoizedState;if(d!==null&&Lg(d,b[1]))return b[0];if(b=l(),lo){Ze(!0);try{l()}finally{Ze(!1)}}return x.memoizedState=[b,d],b}function Yg(l,d,x){return x===void 0||(Yn&1073741824)!==0&&(yt&261930)===0?l.memoizedState=d:(l.memoizedState=x,l=$_(),ot.lanes|=l,sl|=l,x)}function $2(l,d,x,b){return Bt(x,d)?x:wc.current!==null?(l=Yg(l,x,b),Bt(l,d)||(Ts=!0),l):(Yn&42)===0||(Yn&1073741824)!==0&&(yt&261930)===0?(Ts=!0,l.memoizedState=x):(l=$_(),ot.lanes|=l,sl|=l,d)}function U2(l,d,x,b,D){var P=se.p;se.p=P!==0&&8>P?P:8;var re=ee.T,de={};ee.T=de,Xg(l,!1,d,x);try{var pe=D(),we=ee.S;if(we!==null&&we(de,pe),pe!==null&&typeof pe=="object"&&typeof pe.then=="function"){var Ae=J8(pe,b);Iu(l,d,Ae,Jr(l))}else Iu(l,d,b,Jr(l))}catch(Me){Iu(l,d,{then:function(){},status:"rejected",reason:Me},Jr())}finally{se.p=P,re!==null&&de.types!==null&&(re.types=de.types),ee.T=re}}function nR(){}function Gg(l,d,x,b){if(l.tag!==5)throw Error(a(476));var D=V2(l).queue;U2(l,D,d,W,x===null?nR:function(){return H2(l),x(b)})}function V2(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gn,lastRenderedState:W},next:null};var x={};return d.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gn,lastRenderedState:x},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function H2(l){var d=V2(l);d.next===null&&(d=l.alternate.memoizedState),Iu(l,d.next.queue,{},Jr())}function Kg(){return Ks(rh)}function q2(){return gs().memoizedState}function W2(){return gs().memoizedState}function iR(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var x=Jr();l=Xi(x);var b=Zi(d,l,x);b!==null&&(Ar(b,d,x),Lu(b,d,x)),d={cache:_g()},l.payload=d;return}d=d.return}}function lR(l,d,x){var b=Jr();x={lane:b,revertLane:0,gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},e0(l)?G2(d,x):(x=mg(l,d,x,b),x!==null&&(Ar(x,l,b),K2(x,d,b)))}function Y2(l,d,x){var b=Jr();Iu(l,d,x,b)}function Iu(l,d,x,b){var D={lane:b,revertLane:0,gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null};if(e0(l))G2(d,D);else{var P=l.alternate;if(l.lanes===0&&(P===null||P.lanes===0)&&(P=d.lastRenderedReducer,P!==null))try{var re=d.lastRenderedState,de=P(re,x);if(D.hasEagerState=!0,D.eagerState=de,Bt(de,re))return Ox(l,d,D,0),Ht===null&&Zl(),!1}catch{}finally{}if(x=mg(l,d,D,b),x!==null)return Ar(x,l,b),K2(x,d,b),!0}return!1}function Xg(l,d,x,b){if(b={lane:2,revertLane:Tb(),gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null},e0(l)){if(d)throw Error(a(479))}else d=mg(l,x,b,2),d!==null&&Ar(d,l,2)}function e0(l){var d=l.alternate;return l===ot||d!==null&&d===ot}function G2(l,d){Nc=Yx=!0;var x=l.pending;x===null?d.next=d:(d.next=x.next,x.next=d),l.pending=d}function K2(l,d,x){if((x&4194048)!==0){var b=d.lanes;b&=l.pendingLanes,x|=b,d.lanes=x,Vd(l,x)}}var $u={readContext:Ks,use:Xx,useCallback:os,useContext:os,useEffect:os,useImperativeHandle:os,useLayoutEffect:os,useInsertionEffect:os,useMemo:os,useReducer:os,useRef:os,useState:os,useDebugValue:os,useDeferredValue:os,useTransition:os,useSyncExternalStore:os,useId:os,useHostTransitionStatus:os,useFormState:os,useActionState:os,useOptimistic:os,useMemoCache:os,useCacheRefresh:os};$u.useEffectEvent=os;var X2={readContext:Ks,use:Xx,useCallback:function(l,d){return yr().memoizedState=[l,d===void 0?null:d],l},useContext:Ks,useEffect:M2,useImperativeHandle:function(l,d,x){x=x!=null?x.concat([l]):null,Qx(4194308,4,B2.bind(null,d,l),x)},useLayoutEffect:function(l,d){return Qx(4194308,4,l,d)},useInsertionEffect:function(l,d){Qx(4,2,l,d)},useMemo:function(l,d){var x=yr();d=d===void 0?null:d;var b=l();if(lo){Ze(!0);try{l()}finally{Ze(!1)}}return x.memoizedState=[b,d],b},useReducer:function(l,d,x){var b=yr();if(x!==void 0){var D=x(d);if(lo){Ze(!0);try{x(d)}finally{Ze(!1)}}}else D=d;return b.memoizedState=b.baseState=D,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:D},b.queue=l,l=l.dispatch=lR.bind(null,ot,l),[b.memoizedState,l]},useRef:function(l){var d=yr();return l={current:l},d.memoizedState=l},useState:function(l){l=Vg(l);var d=l.queue,x=Y2.bind(null,ot,d);return d.dispatch=x,[l.memoizedState,x]},useDebugValue:Wg,useDeferredValue:function(l,d){var x=yr();return Yg(x,l,d)},useTransition:function(){var l=Vg(!1);return l=U2.bind(null,ot,l.queue,!0,!1),yr().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,x){var b=ot,D=yr();if(Nt){if(x===void 0)throw Error(a(407));x=x()}else{if(x=d(),Ht===null)throw Error(a(349));(yt&127)!==0||g2(b,d,x)}D.memoizedState=x;var P={value:x,getSnapshot:d};return D.queue=P,M2(y2.bind(null,b,P,l),[l]),b.flags|=2048,kc(9,{destroy:void 0},b2.bind(null,b,P,x,d),null),x},useId:function(){var l=yr(),d=Ht.identifierPrefix;if(Nt){var x=nn,b=an;x=(b&~(1<<32-et(b)-1)).toString(32)+x,d="_"+d+"R_"+x,x=Gx++,0<x&&(d+="H"+x.toString(32)),d+="_"}else x=eR++,d="_"+d+"r_"+x.toString(32)+"_";return l.memoizedState=d},useHostTransitionStatus:Kg,useFormState:T2,useActionState:T2,useOptimistic:function(l){var d=yr();d.memoizedState=d.baseState=l;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=x,d=Xg.bind(null,ot,!0,x),x.dispatch=d,[l,d]},useMemoCache:Ig,useCacheRefresh:function(){return yr().memoizedState=iR.bind(null,ot)},useEffectEvent:function(l){var d=yr(),x={impl:l};return d.memoizedState=x,function(){if((Et&2)!==0)throw Error(a(440));return x.impl.apply(void 0,arguments)}}},Zg={readContext:Ks,use:Xx,useCallback:z2,useContext:Ks,useEffect:qg,useImperativeHandle:F2,useInsertionEffect:L2,useLayoutEffect:P2,useMemo:I2,useReducer:Zx,useRef:R2,useState:function(){return Zx(Gn)},useDebugValue:Wg,useDeferredValue:function(l,d){var x=gs();return $2(x,zt.memoizedState,l,d)},useTransition:function(){var l=Zx(Gn)[0],d=gs().memoizedState;return[typeof l=="boolean"?l:zu(l),d]},useSyncExternalStore:p2,useId:q2,useHostTransitionStatus:Kg,useFormState:E2,useActionState:E2,useOptimistic:function(l,d){var x=gs();return w2(x,zt,l,d)},useMemoCache:Ig,useCacheRefresh:W2};Zg.useEffectEvent=O2;var Z2={readContext:Ks,use:Xx,useCallback:z2,useContext:Ks,useEffect:qg,useImperativeHandle:F2,useInsertionEffect:L2,useLayoutEffect:P2,useMemo:I2,useReducer:Ug,useRef:R2,useState:function(){return Ug(Gn)},useDebugValue:Wg,useDeferredValue:function(l,d){var x=gs();return zt===null?Yg(x,l,d):$2(x,zt.memoizedState,l,d)},useTransition:function(){var l=Ug(Gn)[0],d=gs().memoizedState;return[typeof l=="boolean"?l:zu(l),d]},useSyncExternalStore:p2,useId:q2,useHostTransitionStatus:Kg,useFormState:D2,useActionState:D2,useOptimistic:function(l,d){var x=gs();return zt!==null?w2(x,zt,l,d):(x.baseState=l,[l,x.queue.dispatch])},useMemoCache:Ig,useCacheRefresh:W2};Z2.useEffectEvent=O2;function Qg(l,d,x,b){d=l.memoizedState,x=x(b,d),x=x==null?d:f({},d,x),l.memoizedState=x,l.lanes===0&&(l.updateQueue.baseState=x)}var Jg={enqueueSetState:function(l,d,x){l=l._reactInternals;var b=Jr(),D=Xi(b);D.payload=d,x!=null&&(D.callback=x),d=Zi(l,D,b),d!==null&&(Ar(d,l,b),Lu(d,l,b))},enqueueReplaceState:function(l,d,x){l=l._reactInternals;var b=Jr(),D=Xi(b);D.tag=1,D.payload=d,x!=null&&(D.callback=x),d=Zi(l,D,b),d!==null&&(Ar(d,l,b),Lu(d,l,b))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var x=Jr(),b=Xi(x);b.tag=2,d!=null&&(b.callback=d),d=Zi(l,b,x),d!==null&&(Ar(d,l,x),Lu(d,l,x))}};function Q2(l,d,x,b,D,P,re){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(b,P,re):d.prototype&&d.prototype.isPureReactComponent?!Xl(x,b)||!Xl(D,P):!0}function J2(l,d,x,b){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(x,b),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(x,b),d.state!==l&&Jg.enqueueReplaceState(d,d.state,null)}function oo(l,d){var x=d;if("ref"in d){x={};for(var b in d)b!=="ref"&&(x[b]=d[b])}if(l=l.defaultProps){x===d&&(x=f({},x));for(var D in l)x[D]===void 0&&(x[D]=l[D])}return x}function e_(l){Xe(l)}function t_(l){console.error(l)}function s_(l){Xe(l)}function t0(l,d){try{var x=l.onUncaughtError;x(d.value,{componentStack:d.stack})}catch(b){setTimeout(function(){throw b})}}function r_(l,d,x){try{var b=l.onCaughtError;b(x.value,{componentStack:x.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(D){setTimeout(function(){throw D})}}function eb(l,d,x){return x=Xi(x),x.tag=3,x.payload={element:null},x.callback=function(){t0(l,d)},x}function a_(l){return l=Xi(l),l.tag=3,l}function n_(l,d,x,b){var D=x.type.getDerivedStateFromError;if(typeof D=="function"){var P=b.value;l.payload=function(){return D(P)},l.callback=function(){r_(d,x,b)}}var re=x.stateNode;re!==null&&typeof re.componentDidCatch=="function"&&(l.callback=function(){r_(d,x,b),typeof D!="function"&&(rl===null?rl=new Set([this]):rl.add(this));var de=b.stack;this.componentDidCatch(b.value,{componentStack:de!==null?de:""})})}function oR(l,d,x,b,D){if(x.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(d=x.alternate,d!==null&&gc(d,x,D,!0),x=Kr.current,x!==null){switch(x.tag){case 31:case 13:return ma===null?m0():x.alternate===null&&cs===0&&(cs=3),x.flags&=-257,x.flags|=65536,x.lanes=D,b===Ux?x.flags|=16384:(d=x.updateQueue,d===null?x.updateQueue=new Set([b]):d.add(b),kb(l,b,D)),!1;case 22:return x.flags|=65536,b===Ux?x.flags|=16384:(d=x.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([b])},x.updateQueue=d):(x=d.retryQueue,x===null?d.retryQueue=new Set([b]):x.add(b)),kb(l,b,D)),!1}throw Error(a(435,x.tag))}return kb(l,b,D),m0(),!1}if(Nt)return d=Kr.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=D,b!==yg&&(l=Error(a(422),{cause:b}),Au(ca(l,x)))):(b!==yg&&(d=Error(a(423),{cause:b}),Au(ca(d,x))),l=l.current.alternate,l.flags|=65536,D&=-D,l.lanes|=D,b=ca(b,x),D=eb(l.stateNode,b,D),Ag(l,D),cs!==4&&(cs=2)),!1;var P=Error(a(520),{cause:b});if(P=ca(P,x),Ku===null?Ku=[P]:Ku.push(P),cs!==4&&(cs=2),d===null)return!0;b=ca(b,x),x=d;do{switch(x.tag){case 3:return x.flags|=65536,l=D&-D,x.lanes|=l,l=eb(x.stateNode,b,l),Ag(x,l),!1;case 1:if(d=x.type,P=x.stateNode,(x.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(rl===null||!rl.has(P))))return x.flags|=65536,D&=-D,x.lanes|=D,D=a_(D),n_(D,l,x,b),Ag(x,D),!1}x=x.return}while(x!==null);return!1}var tb=Error(a(461)),Ts=!1;function Xs(l,d,x,b){d.child=l===null?c2(d,null,x,b):io(d,l.child,x,b)}function i_(l,d,x,b,D){x=x.render;var P=d.ref;if("ref"in b){var re={};for(var de in b)de!=="ref"&&(re[de]=b[de])}else re=b;return so(d),b=Pg(l,d,x,re,P,D),de=Bg(),l!==null&&!Ts?(Fg(l,d,D),Kn(l,d,D)):(Nt&&de&&gg(d),d.flags|=1,Xs(l,d,b,D),d.child)}function l_(l,d,x,b,D){if(l===null){var P=x.type;return typeof P=="function"&&!xg(P)&&P.defaultProps===void 0&&x.compare===null?(d.tag=15,d.type=P,o_(l,d,P,b,D)):(l=Px(x.type,null,b,d,d.mode,D),l.ref=d.ref,l.return=d,d.child=l)}if(P=l.child,!cb(l,D)){var re=P.memoizedProps;if(x=x.compare,x=x!==null?x:Xl,x(re,b)&&l.ref===d.ref)return Kn(l,d,D)}return d.flags|=1,l=Vn(P,b),l.ref=d.ref,l.return=d,d.child=l}function o_(l,d,x,b,D){if(l!==null){var P=l.memoizedProps;if(Xl(P,b)&&l.ref===d.ref)if(Ts=!1,d.pendingProps=b=P,cb(l,D))(l.flags&131072)!==0&&(Ts=!0);else return d.lanes=l.lanes,Kn(l,d,D)}return sb(l,d,x,b,D)}function c_(l,d,x,b){var D=b.children,P=l!==null?l.memoizedState:null;if(l===null&&d.stateNode===null&&(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),b.mode==="hidden"){if((d.flags&128)!==0){if(P=P!==null?P.baseLanes|x:x,l!==null){for(b=d.child=l.child,D=0;b!==null;)D=D|b.lanes|b.childLanes,b=b.sibling;b=D&~P}else b=0,d.child=null;return d_(l,d,P,x,b)}if((x&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&Ix(d,P!==null?P.cachePool:null),P!==null?h2(d,P):Rg(),m2(d);else return b=d.lanes=536870912,d_(l,d,P!==null?P.baseLanes|x:x,x,b)}else P!==null?(Ix(d,P.cachePool),h2(d,P),Ji(),d.memoizedState=null):(l!==null&&Ix(d,null),Rg(),Ji());return Xs(l,d,D,x),d.child}function Uu(l,d){return l!==null&&l.tag===22||d.stateNode!==null||(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.sibling}function d_(l,d,x,b,D){var P=Sg();return P=P===null?null:{parent:Ss._currentValue,pool:P},d.memoizedState={baseLanes:x,cachePool:P},l!==null&&Ix(d,null),Rg(),m2(d),l!==null&&gc(l,d,b,!0),d.childLanes=D,null}function s0(l,d){return d=a0({mode:d.mode,children:d.children},l.mode),d.ref=l.ref,l.child=d,d.return=l,d}function u_(l,d,x){return io(d,l.child,null,x),l=s0(d,d.pendingProps),l.flags|=2,Xr(d),d.memoizedState=null,l}function cR(l,d,x){var b=d.pendingProps,D=(d.flags&128)!==0;if(d.flags&=-129,l===null){if(Nt){if(b.mode==="hidden")return l=s0(d,b),d.lanes=536870912,Uu(null,l);if(Og(d),(l=Gt)?(l=N5(l,ha),l=l!==null&&l.data==="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:qi!==null?{id:an,overflow:nn}:null,retryLane:536870912,hydrationErrors:null},x=G1(l),x.return=d,d.child=x,Gs=d,Gt=null)):l=null,l===null)throw Yi(d);return d.lanes=536870912,null}return s0(d,b)}var P=l.memoizedState;if(P!==null){var re=P.dehydrated;if(Og(d),D)if(d.flags&256)d.flags&=-257,d=u_(l,d,x);else if(d.memoizedState!==null)d.child=l.child,d.flags|=128,d=null;else throw Error(a(558));else if(Ts||gc(l,d,x,!1),D=(x&l.childLanes)!==0,Ts||D){if(b=Ht,b!==null&&(re=Km(b,x),re!==0&&re!==P.retryLane))throw P.retryLane=re,Ql(l,re),Ar(b,l,re),tb;m0(),d=u_(l,d,x)}else l=P.treeContext,Gt=xa(re.nextSibling),Gs=d,Nt=!0,Wi=null,ha=!1,l!==null&&Z1(d,l),d=s0(d,b),d.flags|=4096;return d}return l=Vn(l.child,{mode:b.mode,children:b.children}),l.ref=d.ref,d.child=l,l.return=d,l}function r0(l,d){var x=d.ref;if(x===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof x!="function"&&typeof x!="object")throw Error(a(284));(l===null||l.ref!==x)&&(d.flags|=4194816)}}function sb(l,d,x,b,D){return so(d),x=Pg(l,d,x,b,void 0,D),b=Bg(),l!==null&&!Ts?(Fg(l,d,D),Kn(l,d,D)):(Nt&&b&&gg(d),d.flags|=1,Xs(l,d,x,D),d.child)}function h_(l,d,x,b,D,P){return so(d),d.updateQueue=null,x=f2(d,b,x,D),x2(l),b=Bg(),l!==null&&!Ts?(Fg(l,d,P),Kn(l,d,P)):(Nt&&b&&gg(d),d.flags|=1,Xs(l,d,x,P),d.child)}function m_(l,d,x,b,D){if(so(d),d.stateNode===null){var P=mc,re=x.contextType;typeof re=="object"&&re!==null&&(P=Ks(re)),P=new x(b,P),d.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,P.updater=Jg,d.stateNode=P,P._reactInternals=d,P=d.stateNode,P.props=b,P.state=d.memoizedState,P.refs={},Tg(d),re=x.contextType,P.context=typeof re=="object"&&re!==null?Ks(re):mc,P.state=d.memoizedState,re=x.getDerivedStateFromProps,typeof re=="function"&&(Qg(d,x,re,b),P.state=d.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(re=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),re!==P.state&&Jg.enqueueReplaceState(P,P.state,null),Bu(d,b,P,D),Pu(),P.state=d.memoizedState),typeof P.componentDidMount=="function"&&(d.flags|=4194308),b=!0}else if(l===null){P=d.stateNode;var de=d.memoizedProps,pe=oo(x,de);P.props=pe;var we=P.context,Ae=x.contextType;re=mc,typeof Ae=="object"&&Ae!==null&&(re=Ks(Ae));var Me=x.getDerivedStateFromProps;Ae=typeof Me=="function"||typeof P.getSnapshotBeforeUpdate=="function",de=d.pendingProps!==de,Ae||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(de||we!==re)&&J2(d,P,b,re),Ki=!1;var ke=d.memoizedState;P.state=ke,Bu(d,b,P,D),Pu(),we=d.memoizedState,de||ke!==we||Ki?(typeof Me=="function"&&(Qg(d,x,Me,b),we=d.memoizedState),(pe=Ki||Q2(d,x,pe,b,ke,we,re))?(Ae||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(d.flags|=4194308)):(typeof P.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=b,d.memoizedState=we),P.props=b,P.state=we,P.context=re,b=pe):(typeof P.componentDidMount=="function"&&(d.flags|=4194308),b=!1)}else{P=d.stateNode,Eg(l,d),re=d.memoizedProps,Ae=oo(x,re),P.props=Ae,Me=d.pendingProps,ke=P.context,we=x.contextType,pe=mc,typeof we=="object"&&we!==null&&(pe=Ks(we)),de=x.getDerivedStateFromProps,(we=typeof de=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(re!==Me||ke!==pe)&&J2(d,P,b,pe),Ki=!1,ke=d.memoizedState,P.state=ke,Bu(d,b,P,D),Pu();var Ce=d.memoizedState;re!==Me||ke!==Ce||Ki||l!==null&&l.dependencies!==null&&Fx(l.dependencies)?(typeof de=="function"&&(Qg(d,x,de,b),Ce=d.memoizedState),(Ae=Ki||Q2(d,x,Ae,b,ke,Ce,pe)||l!==null&&l.dependencies!==null&&Fx(l.dependencies))?(we||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(b,Ce,pe),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(b,Ce,pe)),typeof P.componentDidUpdate=="function"&&(d.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof P.componentDidUpdate!="function"||re===l.memoizedProps&&ke===l.memoizedState||(d.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||re===l.memoizedProps&&ke===l.memoizedState||(d.flags|=1024),d.memoizedProps=b,d.memoizedState=Ce),P.props=b,P.state=Ce,P.context=pe,b=Ae):(typeof P.componentDidUpdate!="function"||re===l.memoizedProps&&ke===l.memoizedState||(d.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||re===l.memoizedProps&&ke===l.memoizedState||(d.flags|=1024),b=!1)}return P=b,r0(l,d),b=(d.flags&128)!==0,P||b?(P=d.stateNode,x=b&&typeof x.getDerivedStateFromError!="function"?null:P.render(),d.flags|=1,l!==null&&b?(d.child=io(d,l.child,null,D),d.child=io(d,null,x,D)):Xs(l,d,x,D),d.memoizedState=P.state,l=d.child):l=Kn(l,d,D),l}function x_(l,d,x,b){return eo(),d.flags|=256,Xs(l,d,x,b),d.child}var rb={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ab(l){return{baseLanes:l,cachePool:r2()}}function nb(l,d,x){return l=l!==null?l.childLanes&~x:0,d&&(l|=Qr),l}function f_(l,d,x){var b=d.pendingProps,D=!1,P=(d.flags&128)!==0,re;if((re=P)||(re=l!==null&&l.memoizedState===null?!1:(ps.current&2)!==0),re&&(D=!0,d.flags&=-129),re=(d.flags&32)!==0,d.flags&=-33,l===null){if(Nt){if(D?Qi(d):Ji(),(l=Gt)?(l=N5(l,ha),l=l!==null&&l.data!=="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:qi!==null?{id:an,overflow:nn}:null,retryLane:536870912,hydrationErrors:null},x=G1(l),x.return=d,d.child=x,Gs=d,Gt=null)):l=null,l===null)throw Yi(d);return $b(l)?d.lanes=32:d.lanes=536870912,null}var de=b.children;return b=b.fallback,D?(Ji(),D=d.mode,de=a0({mode:"hidden",children:de},D),b=Jl(b,D,x,null),de.return=d,b.return=d,de.sibling=b,d.child=de,b=d.child,b.memoizedState=ab(x),b.childLanes=nb(l,re,x),d.memoizedState=rb,Uu(null,b)):(Qi(d),ib(d,de))}var pe=l.memoizedState;if(pe!==null&&(de=pe.dehydrated,de!==null)){if(P)d.flags&256?(Qi(d),d.flags&=-257,d=lb(l,d,x)):d.memoizedState!==null?(Ji(),d.child=l.child,d.flags|=128,d=null):(Ji(),de=b.fallback,D=d.mode,b=a0({mode:"visible",children:b.children},D),de=Jl(de,D,x,null),de.flags|=2,b.return=d,de.return=d,b.sibling=de,d.child=b,io(d,l.child,null,x),b=d.child,b.memoizedState=ab(x),b.childLanes=nb(l,re,x),d.memoizedState=rb,d=Uu(null,b));else if(Qi(d),$b(de)){if(re=de.nextSibling&&de.nextSibling.dataset,re)var we=re.dgst;re=we,b=Error(a(419)),b.stack="",b.digest=re,Au({value:b,source:null,stack:null}),d=lb(l,d,x)}else if(Ts||gc(l,d,x,!1),re=(x&l.childLanes)!==0,Ts||re){if(re=Ht,re!==null&&(b=Km(re,x),b!==0&&b!==pe.retryLane))throw pe.retryLane=b,Ql(l,b),Ar(re,l,b),tb;Ib(de)||m0(),d=lb(l,d,x)}else Ib(de)?(d.flags|=192,d.child=l.child,d=null):(l=pe.treeContext,Gt=xa(de.nextSibling),Gs=d,Nt=!0,Wi=null,ha=!1,l!==null&&Z1(d,l),d=ib(d,b.children),d.flags|=4096);return d}return D?(Ji(),de=b.fallback,D=d.mode,pe=l.child,we=pe.sibling,b=Vn(pe,{mode:"hidden",children:b.children}),b.subtreeFlags=pe.subtreeFlags&65011712,we!==null?de=Vn(we,de):(de=Jl(de,D,x,null),de.flags|=2),de.return=d,b.return=d,b.sibling=de,d.child=b,Uu(null,b),b=d.child,de=l.child.memoizedState,de===null?de=ab(x):(D=de.cachePool,D!==null?(pe=Ss._currentValue,D=D.parent!==pe?{parent:pe,pool:pe}:D):D=r2(),de={baseLanes:de.baseLanes|x,cachePool:D}),b.memoizedState=de,b.childLanes=nb(l,re,x),d.memoizedState=rb,Uu(l.child,b)):(Qi(d),x=l.child,l=x.sibling,x=Vn(x,{mode:"visible",children:b.children}),x.return=d,x.sibling=null,l!==null&&(re=d.deletions,re===null?(d.deletions=[l],d.flags|=16):re.push(l)),d.child=x,d.memoizedState=null,x)}function ib(l,d){return d=a0({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function a0(l,d){return l=Gr(22,l,null,d),l.lanes=0,l}function lb(l,d,x){return io(d,l.child,null,x),l=ib(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function p_(l,d,x){l.lanes|=d;var b=l.alternate;b!==null&&(b.lanes|=d),wg(l.return,d,x)}function ob(l,d,x,b,D,P){var re=l.memoizedState;re===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:b,tail:x,tailMode:D,treeForkCount:P}:(re.isBackwards=d,re.rendering=null,re.renderingStartTime=0,re.last=b,re.tail=x,re.tailMode=D,re.treeForkCount=P)}function g_(l,d,x){var b=d.pendingProps,D=b.revealOrder,P=b.tail;b=b.children;var re=ps.current,de=(re&2)!==0;if(de?(re=re&1|2,d.flags|=128):re&=1,ie(ps,re),Xs(l,d,b,x),b=Nt?Eu:0,!de&&l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&p_(l,x,d);else if(l.tag===19)p_(l,x,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(D){case"forwards":for(x=d.child,D=null;x!==null;)l=x.alternate,l!==null&&Wx(l)===null&&(D=x),x=x.sibling;x=D,x===null?(D=d.child,d.child=null):(D=x.sibling,x.sibling=null),ob(d,!1,D,x,P,b);break;case"backwards":case"unstable_legacy-backwards":for(x=null,D=d.child,d.child=null;D!==null;){if(l=D.alternate,l!==null&&Wx(l)===null){d.child=D;break}l=D.sibling,D.sibling=x,x=D,D=l}ob(d,!0,x,null,P,b);break;case"together":ob(d,!1,null,null,void 0,b);break;default:d.memoizedState=null}return d.child}function Kn(l,d,x){if(l!==null&&(d.dependencies=l.dependencies),sl|=d.lanes,(x&d.childLanes)===0)if(l!==null){if(gc(l,d,x,!1),(x&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(a(153));if(d.child!==null){for(l=d.child,x=Vn(l,l.pendingProps),d.child=x,x.return=d;l.sibling!==null;)l=l.sibling,x=x.sibling=Vn(l,l.pendingProps),x.return=d;x.sibling=null}return d.child}function cb(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&Fx(l)))}function dR(l,d,x){switch(d.tag){case 3:F(d,d.stateNode.containerInfo),Gi(d,Ss,l.memoizedState.cache),eo();break;case 27:case 5:q(d);break;case 4:F(d,d.stateNode.containerInfo);break;case 10:Gi(d,d.type,d.memoizedProps.value);break;case 31:if(d.memoizedState!==null)return d.flags|=128,Og(d),null;break;case 13:var b=d.memoizedState;if(b!==null)return b.dehydrated!==null?(Qi(d),d.flags|=128,null):(x&d.child.childLanes)!==0?f_(l,d,x):(Qi(d),l=Kn(l,d,x),l!==null?l.sibling:null);Qi(d);break;case 19:var D=(l.flags&128)!==0;if(b=(x&d.childLanes)!==0,b||(gc(l,d,x,!1),b=(x&d.childLanes)!==0),D){if(b)return g_(l,d,x);d.flags|=128}if(D=d.memoizedState,D!==null&&(D.rendering=null,D.tail=null,D.lastEffect=null),ie(ps,ps.current),b)break;return null;case 22:return d.lanes=0,c_(l,d,x,d.pendingProps);case 24:Gi(d,Ss,l.memoizedState.cache)}return Kn(l,d,x)}function b_(l,d,x){if(l!==null)if(l.memoizedProps!==d.pendingProps)Ts=!0;else{if(!cb(l,x)&&(d.flags&128)===0)return Ts=!1,dR(l,d,x);Ts=(l.flags&131072)!==0}else Ts=!1,Nt&&(d.flags&1048576)!==0&&X1(d,Eu,d.index);switch(d.lanes=0,d.tag){case 16:e:{var b=d.pendingProps;if(l=ao(d.elementType),d.type=l,typeof l=="function")xg(l)?(b=oo(l,b),d.tag=1,d=m_(null,d,l,b,x)):(d.tag=0,d=sb(null,d,l,b,x));else{if(l!=null){var D=l.$$typeof;if(D===_){d.tag=11,d=i_(null,d,l,b,x);break e}else if(D===z){d.tag=14,d=l_(null,d,l,b,x);break e}}throw d=R(l)||l,Error(a(306,d,""))}}return d;case 0:return sb(l,d,d.type,d.pendingProps,x);case 1:return b=d.type,D=oo(b,d.pendingProps),m_(l,d,b,D,x);case 3:e:{if(F(d,d.stateNode.containerInfo),l===null)throw Error(a(387));b=d.pendingProps;var P=d.memoizedState;D=P.element,Eg(l,d),Bu(d,b,null,x);var re=d.memoizedState;if(b=re.cache,Gi(d,Ss,b),b!==P.cache&&Ng(d,[Ss],x,!0),Pu(),b=re.element,P.isDehydrated)if(P={element:b,isDehydrated:!1,cache:re.cache},d.updateQueue.baseState=P,d.memoizedState=P,d.flags&256){d=x_(l,d,b,x);break e}else if(b!==D){D=ca(Error(a(424)),d),Au(D),d=x_(l,d,b,x);break e}else{switch(l=d.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Gt=xa(l.firstChild),Gs=d,Nt=!0,Wi=null,ha=!0,x=c2(d,null,b,x),d.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling}else{if(eo(),b===D){d=Kn(l,d,x);break e}Xs(l,d,b,x)}d=d.child}return d;case 26:return r0(l,d),l===null?(x=E5(d.type,null,d.pendingProps,null))?d.memoizedState=x:Nt||(x=d.type,l=d.pendingProps,b=v0(ce.current).createElement(x),b[Ps]=d,b[Ws]=l,Zs(b,x,l),fs(b),d.stateNode=b):d.memoizedState=E5(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return q(d),l===null&&Nt&&(b=d.stateNode=S5(d.type,d.pendingProps,ce.current),Gs=d,ha=!0,D=Gt,ll(d.type)?(Ub=D,Gt=xa(b.firstChild)):Gt=D),Xs(l,d,d.pendingProps.children,x),r0(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&Nt&&((D=b=Gt)&&(b=IR(b,d.type,d.pendingProps,ha),b!==null?(d.stateNode=b,Gs=d,Gt=xa(b.firstChild),ha=!1,D=!0):D=!1),D||Yi(d)),q(d),D=d.type,P=d.pendingProps,re=l!==null?l.memoizedProps:null,b=P.children,Bb(D,P)?b=null:re!==null&&Bb(D,re)&&(d.flags|=32),d.memoizedState!==null&&(D=Pg(l,d,tR,null,null,x),rh._currentValue=D),r0(l,d),Xs(l,d,b,x),d.child;case 6:return l===null&&Nt&&((l=x=Gt)&&(x=$R(x,d.pendingProps,ha),x!==null?(d.stateNode=x,Gs=d,Gt=null,l=!0):l=!1),l||Yi(d)),null;case 13:return f_(l,d,x);case 4:return F(d,d.stateNode.containerInfo),b=d.pendingProps,l===null?d.child=io(d,null,b,x):Xs(l,d,b,x),d.child;case 11:return i_(l,d,d.type,d.pendingProps,x);case 7:return Xs(l,d,d.pendingProps,x),d.child;case 8:return Xs(l,d,d.pendingProps.children,x),d.child;case 12:return Xs(l,d,d.pendingProps.children,x),d.child;case 10:return b=d.pendingProps,Gi(d,d.type,b.value),Xs(l,d,b.children,x),d.child;case 9:return D=d.type._context,b=d.pendingProps.children,so(d),D=Ks(D),b=b(D),d.flags|=1,Xs(l,d,b,x),d.child;case 14:return l_(l,d,d.type,d.pendingProps,x);case 15:return o_(l,d,d.type,d.pendingProps,x);case 19:return g_(l,d,x);case 31:return cR(l,d,x);case 22:return c_(l,d,x,d.pendingProps);case 24:return so(d),b=Ks(Ss),l===null?(D=Sg(),D===null&&(D=Ht,P=_g(),D.pooledCache=P,P.refCount++,P!==null&&(D.pooledCacheLanes|=x),D=P),d.memoizedState={parent:b,cache:D},Tg(d),Gi(d,Ss,D)):((l.lanes&x)!==0&&(Eg(l,d),Bu(d,null,null,x),Pu()),D=l.memoizedState,P=d.memoizedState,D.parent!==b?(D={parent:b,cache:b},d.memoizedState=D,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=D),Gi(d,Ss,b)):(b=P.cache,Gi(d,Ss,b),b!==D.cache&&Ng(d,[Ss],x,!0))),Xs(l,d,d.pendingProps.children,x),d.child;case 29:throw d.pendingProps}throw Error(a(156,d.tag))}function Xn(l){l.flags|=4}function db(l,d,x,b,D){if((d=(l.mode&32)!==0)&&(d=!1),d){if(l.flags|=16777216,(D&335544128)===D)if(l.stateNode.complete)l.flags|=8192;else if(q_())l.flags|=8192;else throw no=Ux,Cg}else l.flags&=-16777217}function y_(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!O5(d))if(q_())l.flags|=8192;else throw no=Ux,Cg}function n0(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?Ym():536870912,l.lanes|=d,Ec|=d)}function Vu(l,d){if(!Nt)switch(l.tailMode){case"hidden":d=l.tail;for(var x=null;d!==null;)d.alternate!==null&&(x=d),d=d.sibling;x===null?l.tail=null:x.sibling=null;break;case"collapsed":x=l.tail;for(var b=null;x!==null;)x.alternate!==null&&(b=x),x=x.sibling;b===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:b.sibling=null}}function Kt(l){var d=l.alternate!==null&&l.alternate.child===l.child,x=0,b=0;if(d)for(var D=l.child;D!==null;)x|=D.lanes|D.childLanes,b|=D.subtreeFlags&65011712,b|=D.flags&65011712,D.return=l,D=D.sibling;else for(D=l.child;D!==null;)x|=D.lanes|D.childLanes,b|=D.subtreeFlags,b|=D.flags,D.return=l,D=D.sibling;return l.subtreeFlags|=b,l.childLanes=x,d}function uR(l,d,x){var b=d.pendingProps;switch(bg(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(d),null;case 1:return Kt(d),null;case 3:return x=d.stateNode,b=null,l!==null&&(b=l.memoizedState.cache),d.memoizedState.cache!==b&&(d.flags|=2048),Wn(Ss),Z(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(l===null||l.child===null)&&(pc(d)?Xn(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,vg())),Kt(d),null;case 26:var D=d.type,P=d.memoizedState;return l===null?(Xn(d),P!==null?(Kt(d),y_(d,P)):(Kt(d),db(d,D,null,b,x))):P?P!==l.memoizedState?(Xn(d),Kt(d),y_(d,P)):(Kt(d),d.flags&=-16777217):(l=l.memoizedProps,l!==b&&Xn(d),Kt(d),db(d,D,l,b,x)),null;case 27:if(Q(d),x=ce.current,D=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==b&&Xn(d);else{if(!b){if(d.stateNode===null)throw Error(a(166));return Kt(d),null}l=ne.current,pc(d)?Q1(d):(l=S5(D,b,x),d.stateNode=l,Xn(d))}return Kt(d),null;case 5:if(Q(d),D=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==b&&Xn(d);else{if(!b){if(d.stateNode===null)throw Error(a(166));return Kt(d),null}if(P=ne.current,pc(d))Q1(d);else{var re=v0(ce.current);switch(P){case 1:P=re.createElementNS("http://www.w3.org/2000/svg",D);break;case 2:P=re.createElementNS("http://www.w3.org/1998/Math/MathML",D);break;default:switch(D){case"svg":P=re.createElementNS("http://www.w3.org/2000/svg",D);break;case"math":P=re.createElementNS("http://www.w3.org/1998/Math/MathML",D);break;case"script":P=re.createElement("div"),P.innerHTML="<script><\/script>",P=P.removeChild(P.firstChild);break;case"select":P=typeof b.is=="string"?re.createElement("select",{is:b.is}):re.createElement("select"),b.multiple?P.multiple=!0:b.size&&(P.size=b.size);break;default:P=typeof b.is=="string"?re.createElement(D,{is:b.is}):re.createElement(D)}}P[Ps]=d,P[Ws]=b;e:for(re=d.child;re!==null;){if(re.tag===5||re.tag===6)P.appendChild(re.stateNode);else if(re.tag!==4&&re.tag!==27&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===d)break e;for(;re.sibling===null;){if(re.return===null||re.return===d)break e;re=re.return}re.sibling.return=re.return,re=re.sibling}d.stateNode=P;e:switch(Zs(P,D,b),D){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}b&&Xn(d)}}return Kt(d),db(d,d.type,l===null?null:l.memoizedProps,d.pendingProps,x),null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==b&&Xn(d);else{if(typeof b!="string"&&d.stateNode===null)throw Error(a(166));if(l=ce.current,pc(d)){if(l=d.stateNode,x=d.memoizedProps,b=null,D=Gs,D!==null)switch(D.tag){case 27:case 5:b=D.memoizedProps}l[Ps]=d,l=!!(l.nodeValue===x||b!==null&&b.suppressHydrationWarning===!0||f5(l.nodeValue,x)),l||Yi(d,!0)}else l=v0(l).createTextNode(b),l[Ps]=d,d.stateNode=l}return Kt(d),null;case 31:if(x=d.memoizedState,l===null||l.memoizedState!==null){if(b=pc(d),x!==null){if(l===null){if(!b)throw Error(a(318));if(l=d.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(a(557));l[Ps]=d}else eo(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Kt(d),l=!1}else x=vg(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=x),l=!0;if(!l)return d.flags&256?(Xr(d),d):(Xr(d),null);if((d.flags&128)!==0)throw Error(a(558))}return Kt(d),null;case 13:if(b=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(D=pc(d),b!==null&&b.dehydrated!==null){if(l===null){if(!D)throw Error(a(318));if(D=d.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(a(317));D[Ps]=d}else eo(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Kt(d),D=!1}else D=vg(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=D),D=!0;if(!D)return d.flags&256?(Xr(d),d):(Xr(d),null)}return Xr(d),(d.flags&128)!==0?(d.lanes=x,d):(x=b!==null,l=l!==null&&l.memoizedState!==null,x&&(b=d.child,D=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(D=b.alternate.memoizedState.cachePool.pool),P=null,b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(P=b.memoizedState.cachePool.pool),P!==D&&(b.flags|=2048)),x!==l&&x&&(d.child.flags|=8192),n0(d,d.updateQueue),Kt(d),null);case 4:return Z(),l===null&&Rb(d.stateNode.containerInfo),Kt(d),null;case 10:return Wn(d.type),Kt(d),null;case 19:if($(ps),b=d.memoizedState,b===null)return Kt(d),null;if(D=(d.flags&128)!==0,P=b.rendering,P===null)if(D)Vu(b,!1);else{if(cs!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(P=Wx(l),P!==null){for(d.flags|=128,Vu(b,!1),l=P.updateQueue,d.updateQueue=l,n0(d,l),d.subtreeFlags=0,l=x,x=d.child;x!==null;)Y1(x,l),x=x.sibling;return ie(ps,ps.current&1|2),Nt&&Hn(d,b.treeForkCount),d.child}l=l.sibling}b.tail!==null&&Te()>d0&&(d.flags|=128,D=!0,Vu(b,!1),d.lanes=4194304)}else{if(!D)if(l=Wx(P),l!==null){if(d.flags|=128,D=!0,l=l.updateQueue,d.updateQueue=l,n0(d,l),Vu(b,!0),b.tail===null&&b.tailMode==="hidden"&&!P.alternate&&!Nt)return Kt(d),null}else 2*Te()-b.renderingStartTime>d0&&x!==536870912&&(d.flags|=128,D=!0,Vu(b,!1),d.lanes=4194304);b.isBackwards?(P.sibling=d.child,d.child=P):(l=b.last,l!==null?l.sibling=P:d.child=P,b.last=P)}return b.tail!==null?(l=b.tail,b.rendering=l,b.tail=l.sibling,b.renderingStartTime=Te(),l.sibling=null,x=ps.current,ie(ps,D?x&1|2:x&1),Nt&&Hn(d,b.treeForkCount),l):(Kt(d),null);case 22:case 23:return Xr(d),Mg(),b=d.memoizedState!==null,l!==null?l.memoizedState!==null!==b&&(d.flags|=8192):b&&(d.flags|=8192),b?(x&536870912)!==0&&(d.flags&128)===0&&(Kt(d),d.subtreeFlags&6&&(d.flags|=8192)):Kt(d),x=d.updateQueue,x!==null&&n0(d,x.retryQueue),x=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(x=l.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==x&&(d.flags|=2048),l!==null&&$(ro),null;case 24:return x=null,l!==null&&(x=l.memoizedState.cache),d.memoizedState.cache!==x&&(d.flags|=2048),Wn(Ss),Kt(d),null;case 25:return null;case 30:return null}throw Error(a(156,d.tag))}function hR(l,d){switch(bg(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return Wn(Ss),Z(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return Q(d),null;case 31:if(d.memoizedState!==null){if(Xr(d),d.alternate===null)throw Error(a(340));eo()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 13:if(Xr(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(a(340));eo()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return $(ps),null;case 4:return Z(),null;case 10:return Wn(d.type),null;case 22:case 23:return Xr(d),Mg(),l!==null&&$(ro),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return Wn(Ss),null;case 25:return null;default:return null}}function v_(l,d){switch(bg(d),d.tag){case 3:Wn(Ss),Z();break;case 26:case 27:case 5:Q(d);break;case 4:Z();break;case 31:d.memoizedState!==null&&Xr(d);break;case 13:Xr(d);break;case 19:$(ps);break;case 10:Wn(d.type);break;case 22:case 23:Xr(d),Mg(),l!==null&&$(ro);break;case 24:Wn(Ss)}}function Hu(l,d){try{var x=d.updateQueue,b=x!==null?x.lastEffect:null;if(b!==null){var D=b.next;x=D;do{if((x.tag&l)===l){b=void 0;var P=x.create,re=x.inst;b=P(),re.destroy=b}x=x.next}while(x!==D)}}catch(de){Mt(d,d.return,de)}}function el(l,d,x){try{var b=d.updateQueue,D=b!==null?b.lastEffect:null;if(D!==null){var P=D.next;b=P;do{if((b.tag&l)===l){var re=b.inst,de=re.destroy;if(de!==void 0){re.destroy=void 0,D=d;var pe=x,we=de;try{we()}catch(Ae){Mt(D,pe,Ae)}}}b=b.next}while(b!==P)}}catch(Ae){Mt(d,d.return,Ae)}}function j_(l){var d=l.updateQueue;if(d!==null){var x=l.stateNode;try{u2(d,x)}catch(b){Mt(l,l.return,b)}}}function w_(l,d,x){x.props=oo(l.type,l.memoizedProps),x.state=l.memoizedState;try{x.componentWillUnmount()}catch(b){Mt(l,d,b)}}function qu(l,d){try{var x=l.ref;if(x!==null){switch(l.tag){case 26:case 27:case 5:var b=l.stateNode;break;case 30:b=l.stateNode;break;default:b=l.stateNode}typeof x=="function"?l.refCleanup=x(b):x.current=b}}catch(D){Mt(l,d,D)}}function ln(l,d){var x=l.ref,b=l.refCleanup;if(x!==null)if(typeof b=="function")try{b()}catch(D){Mt(l,d,D)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(D){Mt(l,d,D)}else x.current=null}function N_(l){var d=l.type,x=l.memoizedProps,b=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":x.autoFocus&&b.focus();break e;case"img":x.src?b.src=x.src:x.srcSet&&(b.srcset=x.srcSet)}}catch(D){Mt(l,l.return,D)}}function ub(l,d,x){try{var b=l.stateNode;OR(b,l.type,x,d),b[Ws]=d}catch(D){Mt(l,l.return,D)}}function __(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&ll(l.type)||l.tag===4}function hb(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||__(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&ll(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function mb(l,d,x){var b=l.tag;if(b===5||b===6)l=l.stateNode,d?(x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x).insertBefore(l,d):(d=x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x,d.appendChild(l),x=x._reactRootContainer,x!=null||d.onclick!==null||(d.onclick=Pa));else if(b!==4&&(b===27&&ll(l.type)&&(x=l.stateNode,d=null),l=l.child,l!==null))for(mb(l,d,x),l=l.sibling;l!==null;)mb(l,d,x),l=l.sibling}function i0(l,d,x){var b=l.tag;if(b===5||b===6)l=l.stateNode,d?x.insertBefore(l,d):x.appendChild(l);else if(b!==4&&(b===27&&ll(l.type)&&(x=l.stateNode),l=l.child,l!==null))for(i0(l,d,x),l=l.sibling;l!==null;)i0(l,d,x),l=l.sibling}function k_(l){var d=l.stateNode,x=l.memoizedProps;try{for(var b=l.type,D=d.attributes;D.length;)d.removeAttributeNode(D[0]);Zs(d,b,x),d[Ps]=l,d[Ws]=x}catch(P){Mt(l,l.return,P)}}var Zn=!1,Es=!1,xb=!1,S_=typeof WeakSet=="function"?WeakSet:Set,Hs=null;function mR(l,d){if(l=l.containerInfo,Lb=C0,l=wu(l),dc(l)){if("selectionStart"in l)var x={start:l.selectionStart,end:l.selectionEnd};else e:{x=(x=l.ownerDocument)&&x.defaultView||window;var b=x.getSelection&&x.getSelection();if(b&&b.rangeCount!==0){x=b.anchorNode;var D=b.anchorOffset,P=b.focusNode;b=b.focusOffset;try{x.nodeType,P.nodeType}catch{x=null;break e}var re=0,de=-1,pe=-1,we=0,Ae=0,Me=l,ke=null;t:for(;;){for(var Ce;Me!==x||D!==0&&Me.nodeType!==3||(de=re+D),Me!==P||b!==0&&Me.nodeType!==3||(pe=re+b),Me.nodeType===3&&(re+=Me.nodeValue.length),(Ce=Me.firstChild)!==null;)ke=Me,Me=Ce;for(;;){if(Me===l)break t;if(ke===x&&++we===D&&(de=re),ke===P&&++Ae===b&&(pe=re),(Ce=Me.nextSibling)!==null)break;Me=ke,ke=Me.parentNode}Me=Ce}x=de===-1||pe===-1?null:{start:de,end:pe}}else x=null}x=x||{start:0,end:0}}else x=null;for(Pb={focusedElem:l,selectionRange:x},C0=!1,Hs=d;Hs!==null;)if(d=Hs,l=d.child,(d.subtreeFlags&1028)!==0&&l!==null)l.return=d,Hs=l;else for(;Hs!==null;){switch(d=Hs,P=d.alternate,l=d.flags,d.tag){case 0:if((l&4)!==0&&(l=d.updateQueue,l=l!==null?l.events:null,l!==null))for(x=0;x<l.length;x++)D=l[x],D.ref.impl=D.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&P!==null){l=void 0,x=d,D=P.memoizedProps,P=P.memoizedState,b=x.stateNode;try{var $e=oo(x.type,D);l=b.getSnapshotBeforeUpdate($e,P),b.__reactInternalSnapshotBeforeUpdate=l}catch(Je){Mt(x,x.return,Je)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,x=l.nodeType,x===9)zb(l);else if(x===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":zb(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(a(163))}if(l=d.sibling,l!==null){l.return=d.return,Hs=l;break}Hs=d.return}}function C_(l,d,x){var b=x.flags;switch(x.tag){case 0:case 11:case 15:Jn(l,x),b&4&&Hu(5,x);break;case 1:if(Jn(l,x),b&4)if(l=x.stateNode,d===null)try{l.componentDidMount()}catch(re){Mt(x,x.return,re)}else{var D=oo(x.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(D,d,l.__reactInternalSnapshotBeforeUpdate)}catch(re){Mt(x,x.return,re)}}b&64&&j_(x),b&512&&qu(x,x.return);break;case 3:if(Jn(l,x),b&64&&(l=x.updateQueue,l!==null)){if(d=null,x.child!==null)switch(x.child.tag){case 27:case 5:d=x.child.stateNode;break;case 1:d=x.child.stateNode}try{u2(l,d)}catch(re){Mt(x,x.return,re)}}break;case 27:d===null&&b&4&&k_(x);case 26:case 5:Jn(l,x),d===null&&b&4&&N_(x),b&512&&qu(x,x.return);break;case 12:Jn(l,x);break;case 31:Jn(l,x),b&4&&A_(l,x);break;case 13:Jn(l,x),b&4&&D_(l,x),b&64&&(l=x.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(x=wR.bind(null,x),UR(l,x))));break;case 22:if(b=x.memoizedState!==null||Zn,!b){d=d!==null&&d.memoizedState!==null||Es,D=Zn;var P=Es;Zn=b,(Es=d)&&!P?ei(l,x,(x.subtreeFlags&8772)!==0):Jn(l,x),Zn=D,Es=P}break;case 30:break;default:Jn(l,x)}}function T_(l){var d=l.alternate;d!==null&&(l.alternate=null,T_(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&Yd(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Zt=null,Sr=!1;function Qn(l,d,x){for(x=x.child;x!==null;)E_(l,d,x),x=x.sibling}function E_(l,d,x){if(He&&typeof He.onCommitFiberUnmount=="function")try{He.onCommitFiberUnmount(Le,x)}catch{}switch(x.tag){case 26:Es||ln(x,d),Qn(l,d,x),x.memoizedState?x.memoizedState.count--:x.stateNode&&(x=x.stateNode,x.parentNode.removeChild(x));break;case 27:Es||ln(x,d);var b=Zt,D=Sr;ll(x.type)&&(Zt=x.stateNode,Sr=!1),Qn(l,d,x),eh(x.stateNode),Zt=b,Sr=D;break;case 5:Es||ln(x,d);case 6:if(b=Zt,D=Sr,Zt=null,Qn(l,d,x),Zt=b,Sr=D,Zt!==null)if(Sr)try{(Zt.nodeType===9?Zt.body:Zt.nodeName==="HTML"?Zt.ownerDocument.body:Zt).removeChild(x.stateNode)}catch(P){Mt(x,d,P)}else try{Zt.removeChild(x.stateNode)}catch(P){Mt(x,d,P)}break;case 18:Zt!==null&&(Sr?(l=Zt,j5(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,x.stateNode),Bc(l)):j5(Zt,x.stateNode));break;case 4:b=Zt,D=Sr,Zt=x.stateNode.containerInfo,Sr=!0,Qn(l,d,x),Zt=b,Sr=D;break;case 0:case 11:case 14:case 15:el(2,x,d),Es||el(4,x,d),Qn(l,d,x);break;case 1:Es||(ln(x,d),b=x.stateNode,typeof b.componentWillUnmount=="function"&&w_(x,d,b)),Qn(l,d,x);break;case 21:Qn(l,d,x);break;case 22:Es=(b=Es)||x.memoizedState!==null,Qn(l,d,x),Es=b;break;default:Qn(l,d,x)}}function A_(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{Bc(l)}catch(x){Mt(d,d.return,x)}}}function D_(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Bc(l)}catch(x){Mt(d,d.return,x)}}function xR(l){switch(l.tag){case 31:case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new S_),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new S_),d;default:throw Error(a(435,l.tag))}}function l0(l,d){var x=xR(l);d.forEach(function(b){if(!x.has(b)){x.add(b);var D=NR.bind(null,l,b);b.then(D,D)}})}function Cr(l,d){var x=d.deletions;if(x!==null)for(var b=0;b<x.length;b++){var D=x[b],P=l,re=d,de=re;e:for(;de!==null;){switch(de.tag){case 27:if(ll(de.type)){Zt=de.stateNode,Sr=!1;break e}break;case 5:Zt=de.stateNode,Sr=!1;break e;case 3:case 4:Zt=de.stateNode.containerInfo,Sr=!0;break e}de=de.return}if(Zt===null)throw Error(a(160));E_(P,re,D),Zt=null,Sr=!1,P=D.alternate,P!==null&&(P.return=null),D.return=null}if(d.subtreeFlags&13886)for(d=d.child;d!==null;)R_(d,l),d=d.sibling}var za=null;function R_(l,d){var x=l.alternate,b=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Cr(d,l),Tr(l),b&4&&(el(3,l,l.return),Hu(3,l),el(5,l,l.return));break;case 1:Cr(d,l),Tr(l),b&512&&(Es||x===null||ln(x,x.return)),b&64&&Zn&&(l=l.updateQueue,l!==null&&(b=l.callbacks,b!==null&&(x=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=x===null?b:x.concat(b))));break;case 26:var D=za;if(Cr(d,l),Tr(l),b&512&&(Es||x===null||ln(x,x.return)),b&4){var P=x!==null?x.memoizedState:null;if(b=l.memoizedState,x===null)if(b===null)if(l.stateNode===null){e:{b=l.type,x=l.memoizedProps,D=D.ownerDocument||D;t:switch(b){case"title":P=D.getElementsByTagName("title")[0],(!P||P[Mn]||P[Ps]||P.namespaceURI==="http://www.w3.org/2000/svg"||P.hasAttribute("itemprop"))&&(P=D.createElement(b),D.head.insertBefore(P,D.querySelector("head > title"))),Zs(P,b,x),P[Ps]=l,fs(P),b=P;break e;case"link":var re=R5("link","href",D).get(b+(x.href||""));if(re){for(var de=0;de<re.length;de++)if(P=re[de],P.getAttribute("href")===(x.href==null||x.href===""?null:x.href)&&P.getAttribute("rel")===(x.rel==null?null:x.rel)&&P.getAttribute("title")===(x.title==null?null:x.title)&&P.getAttribute("crossorigin")===(x.crossOrigin==null?null:x.crossOrigin)){re.splice(de,1);break t}}P=D.createElement(b),Zs(P,b,x),D.head.appendChild(P);break;case"meta":if(re=R5("meta","content",D).get(b+(x.content||""))){for(de=0;de<re.length;de++)if(P=re[de],P.getAttribute("content")===(x.content==null?null:""+x.content)&&P.getAttribute("name")===(x.name==null?null:x.name)&&P.getAttribute("property")===(x.property==null?null:x.property)&&P.getAttribute("http-equiv")===(x.httpEquiv==null?null:x.httpEquiv)&&P.getAttribute("charset")===(x.charSet==null?null:x.charSet)){re.splice(de,1);break t}}P=D.createElement(b),Zs(P,b,x),D.head.appendChild(P);break;default:throw Error(a(468,b))}P[Ps]=l,fs(P),b=P}l.stateNode=b}else M5(D,l.type,l.stateNode);else l.stateNode=D5(D,b,l.memoizedProps);else P!==b?(P===null?x.stateNode!==null&&(x=x.stateNode,x.parentNode.removeChild(x)):P.count--,b===null?M5(D,l.type,l.stateNode):D5(D,b,l.memoizedProps)):b===null&&l.stateNode!==null&&ub(l,l.memoizedProps,x.memoizedProps)}break;case 27:Cr(d,l),Tr(l),b&512&&(Es||x===null||ln(x,x.return)),x!==null&&b&4&&ub(l,l.memoizedProps,x.memoizedProps);break;case 5:if(Cr(d,l),Tr(l),b&512&&(Es||x===null||ln(x,x.return)),l.flags&32){D=l.stateNode;try{Mi(D,"")}catch($e){Mt(l,l.return,$e)}}b&4&&l.stateNode!=null&&(D=l.memoizedProps,ub(l,D,x!==null?x.memoizedProps:D)),b&1024&&(xb=!0);break;case 6:if(Cr(d,l),Tr(l),b&4){if(l.stateNode===null)throw Error(a(162));b=l.memoizedProps,x=l.stateNode;try{x.nodeValue=b}catch($e){Mt(l,l.return,$e)}}break;case 3:if(N0=null,D=za,za=j0(d.containerInfo),Cr(d,l),za=D,Tr(l),b&4&&x!==null&&x.memoizedState.isDehydrated)try{Bc(d.containerInfo)}catch($e){Mt(l,l.return,$e)}xb&&(xb=!1,M_(l));break;case 4:b=za,za=j0(l.stateNode.containerInfo),Cr(d,l),Tr(l),za=b;break;case 12:Cr(d,l),Tr(l);break;case 31:Cr(d,l),Tr(l),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,l0(l,b)));break;case 13:Cr(d,l),Tr(l),l.child.flags&8192&&l.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(c0=Te()),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,l0(l,b)));break;case 22:D=l.memoizedState!==null;var pe=x!==null&&x.memoizedState!==null,we=Zn,Ae=Es;if(Zn=we||D,Es=Ae||pe,Cr(d,l),Es=Ae,Zn=we,Tr(l),b&8192)e:for(d=l.stateNode,d._visibility=D?d._visibility&-2:d._visibility|1,D&&(x===null||pe||Zn||Es||co(l)),x=null,d=l;;){if(d.tag===5||d.tag===26){if(x===null){pe=x=d;try{if(P=pe.stateNode,D)re=P.style,typeof re.setProperty=="function"?re.setProperty("display","none","important"):re.display="none";else{de=pe.stateNode;var Me=pe.memoizedProps.style,ke=Me!=null&&Me.hasOwnProperty("display")?Me.display:null;de.style.display=ke==null||typeof ke=="boolean"?"":(""+ke).trim()}}catch($e){Mt(pe,pe.return,$e)}}}else if(d.tag===6){if(x===null){pe=d;try{pe.stateNode.nodeValue=D?"":pe.memoizedProps}catch($e){Mt(pe,pe.return,$e)}}}else if(d.tag===18){if(x===null){pe=d;try{var Ce=pe.stateNode;D?w5(Ce,!0):w5(pe.stateNode,!1)}catch($e){Mt(pe,pe.return,$e)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;x===d&&(x=null),d=d.return}x===d&&(x=null),d.sibling.return=d.return,d=d.sibling}b&4&&(b=l.updateQueue,b!==null&&(x=b.retryQueue,x!==null&&(b.retryQueue=null,l0(l,x))));break;case 19:Cr(d,l),Tr(l),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,l0(l,b)));break;case 30:break;case 21:break;default:Cr(d,l),Tr(l)}}function Tr(l){var d=l.flags;if(d&2){try{for(var x,b=l.return;b!==null;){if(__(b)){x=b;break}b=b.return}if(x==null)throw Error(a(160));switch(x.tag){case 27:var D=x.stateNode,P=hb(l);i0(l,P,D);break;case 5:var re=x.stateNode;x.flags&32&&(Mi(re,""),x.flags&=-33);var de=hb(l);i0(l,de,re);break;case 3:case 4:var pe=x.stateNode.containerInfo,we=hb(l);mb(l,we,pe);break;default:throw Error(a(161))}}catch(Ae){Mt(l,l.return,Ae)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function M_(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;M_(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function Jn(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)C_(l,d.alternate,d),d=d.sibling}function co(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:el(4,d,d.return),co(d);break;case 1:ln(d,d.return);var x=d.stateNode;typeof x.componentWillUnmount=="function"&&w_(d,d.return,x),co(d);break;case 27:eh(d.stateNode);case 26:case 5:ln(d,d.return),co(d);break;case 22:d.memoizedState===null&&co(d);break;case 30:co(d);break;default:co(d)}l=l.sibling}}function ei(l,d,x){for(x=x&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var b=d.alternate,D=l,P=d,re=P.flags;switch(P.tag){case 0:case 11:case 15:ei(D,P,x),Hu(4,P);break;case 1:if(ei(D,P,x),b=P,D=b.stateNode,typeof D.componentDidMount=="function")try{D.componentDidMount()}catch(we){Mt(b,b.return,we)}if(b=P,D=b.updateQueue,D!==null){var de=b.stateNode;try{var pe=D.shared.hiddenCallbacks;if(pe!==null)for(D.shared.hiddenCallbacks=null,D=0;D<pe.length;D++)d2(pe[D],de)}catch(we){Mt(b,b.return,we)}}x&&re&64&&j_(P),qu(P,P.return);break;case 27:k_(P);case 26:case 5:ei(D,P,x),x&&b===null&&re&4&&N_(P),qu(P,P.return);break;case 12:ei(D,P,x);break;case 31:ei(D,P,x),x&&re&4&&A_(D,P);break;case 13:ei(D,P,x),x&&re&4&&D_(D,P);break;case 22:P.memoizedState===null&&ei(D,P,x),qu(P,P.return);break;case 30:break;default:ei(D,P,x)}d=d.sibling}}function fb(l,d){var x=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(x=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==x&&(l!=null&&l.refCount++,x!=null&&Du(x))}function pb(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&Du(l))}function Ia(l,d,x,b){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)O_(l,d,x,b),d=d.sibling}function O_(l,d,x,b){var D=d.flags;switch(d.tag){case 0:case 11:case 15:Ia(l,d,x,b),D&2048&&Hu(9,d);break;case 1:Ia(l,d,x,b);break;case 3:Ia(l,d,x,b),D&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&Du(l)));break;case 12:if(D&2048){Ia(l,d,x,b),l=d.stateNode;try{var P=d.memoizedProps,re=P.id,de=P.onPostCommit;typeof de=="function"&&de(re,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(pe){Mt(d,d.return,pe)}}else Ia(l,d,x,b);break;case 31:Ia(l,d,x,b);break;case 13:Ia(l,d,x,b);break;case 23:break;case 22:P=d.stateNode,re=d.alternate,d.memoizedState!==null?P._visibility&2?Ia(l,d,x,b):Wu(l,d):P._visibility&2?Ia(l,d,x,b):(P._visibility|=2,Sc(l,d,x,b,(d.subtreeFlags&10256)!==0||!1)),D&2048&&fb(re,d);break;case 24:Ia(l,d,x,b),D&2048&&pb(d.alternate,d);break;default:Ia(l,d,x,b)}}function Sc(l,d,x,b,D){for(D=D&&((d.subtreeFlags&10256)!==0||!1),d=d.child;d!==null;){var P=l,re=d,de=x,pe=b,we=re.flags;switch(re.tag){case 0:case 11:case 15:Sc(P,re,de,pe,D),Hu(8,re);break;case 23:break;case 22:var Ae=re.stateNode;re.memoizedState!==null?Ae._visibility&2?Sc(P,re,de,pe,D):Wu(P,re):(Ae._visibility|=2,Sc(P,re,de,pe,D)),D&&we&2048&&fb(re.alternate,re);break;case 24:Sc(P,re,de,pe,D),D&&we&2048&&pb(re.alternate,re);break;default:Sc(P,re,de,pe,D)}d=d.sibling}}function Wu(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var x=l,b=d,D=b.flags;switch(b.tag){case 22:Wu(x,b),D&2048&&fb(b.alternate,b);break;case 24:Wu(x,b),D&2048&&pb(b.alternate,b);break;default:Wu(x,b)}d=d.sibling}}var Yu=8192;function Cc(l,d,x){if(l.subtreeFlags&Yu)for(l=l.child;l!==null;)L_(l,d,x),l=l.sibling}function L_(l,d,x){switch(l.tag){case 26:Cc(l,d,x),l.flags&Yu&&l.memoizedState!==null&&eM(x,za,l.memoizedState,l.memoizedProps);break;case 5:Cc(l,d,x);break;case 3:case 4:var b=za;za=j0(l.stateNode.containerInfo),Cc(l,d,x),za=b;break;case 22:l.memoizedState===null&&(b=l.alternate,b!==null&&b.memoizedState!==null?(b=Yu,Yu=16777216,Cc(l,d,x),Yu=b):Cc(l,d,x));break;default:Cc(l,d,x)}}function P_(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function Gu(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var x=0;x<d.length;x++){var b=d[x];Hs=b,F_(b,l)}P_(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)B_(l),l=l.sibling}function B_(l){switch(l.tag){case 0:case 11:case 15:Gu(l),l.flags&2048&&el(9,l,l.return);break;case 3:Gu(l);break;case 12:Gu(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,o0(l)):Gu(l);break;default:Gu(l)}}function o0(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var x=0;x<d.length;x++){var b=d[x];Hs=b,F_(b,l)}P_(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:el(8,d,d.return),o0(d);break;case 22:x=d.stateNode,x._visibility&2&&(x._visibility&=-3,o0(d));break;default:o0(d)}l=l.sibling}}function F_(l,d){for(;Hs!==null;){var x=Hs;switch(x.tag){case 0:case 11:case 15:el(8,x,d);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var b=x.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:Du(x.memoizedState.cache)}if(b=x.child,b!==null)b.return=x,Hs=b;else e:for(x=l;Hs!==null;){b=Hs;var D=b.sibling,P=b.return;if(T_(b),b===x){Hs=null;break e}if(D!==null){D.return=P,Hs=D;break e}Hs=P}}}var fR={getCacheForType:function(l){var d=Ks(Ss),x=d.data.get(l);return x===void 0&&(x=l(),d.data.set(l,x)),x},cacheSignal:function(){return Ks(Ss).controller.signal}},pR=typeof WeakMap=="function"?WeakMap:Map,Et=0,Ht=null,ft=null,yt=0,Rt=0,Zr=null,tl=!1,Tc=!1,gb=!1,ti=0,cs=0,sl=0,uo=0,bb=0,Qr=0,Ec=0,Ku=null,Er=null,yb=!1,c0=0,z_=0,d0=1/0,u0=null,rl=null,Fs=0,al=null,Ac=null,si=0,vb=0,jb=null,I_=null,Xu=0,wb=null;function Jr(){return(Et&2)!==0&&yt!==0?yt&-yt:ee.T!==null?Tb():qd()}function $_(){if(Qr===0)if((yt&536870912)===0||Nt){var l=_r;_r<<=1,(_r&3932160)===0&&(_r=262144),Qr=l}else Qr=536870912;return l=Kr.current,l!==null&&(l.flags|=32),Qr}function Ar(l,d,x){(l===Ht&&(Rt===2||Rt===9)||l.cancelPendingCommit!==null)&&(Dc(l,0),nl(l,yt,Qr,!1)),Yt(l,x),((Et&2)===0||l!==Ht)&&(l===Ht&&((Et&2)===0&&(uo|=x),cs===4&&nl(l,yt,Qr,!1)),on(l))}function U_(l,d,x){if((Et&6)!==0)throw Error(a(327));var b=!x&&(d&127)===0&&(d&l.expiredLanes)===0||ar(l,d),D=b?yR(l,d):_b(l,d,!0),P=b;do{if(D===0){Tc&&!b&&nl(l,d,0,!1);break}else{if(x=l.current.alternate,P&&!gR(x)){D=_b(l,d,!1),P=!1;continue}if(D===2){if(P=d,l.errorRecoveryDisabledLanes&P)var re=0;else re=l.pendingLanes&-536870913,re=re!==0?re:re&536870912?536870912:0;if(re!==0){d=re;e:{var de=l;D=Ku;var pe=de.current.memoizedState.isDehydrated;if(pe&&(Dc(de,re).flags|=256),re=_b(de,re,!1),re!==2){if(gb&&!pe){de.errorRecoveryDisabledLanes|=P,uo|=P,D=4;break e}P=Er,Er=D,P!==null&&(Er===null?Er=P:Er.push.apply(Er,P))}D=re}if(P=!1,D!==2)continue}}if(D===1){Dc(l,0),nl(l,d,0,!0);break}e:{switch(b=l,P=D,P){case 0:case 1:throw Error(a(345));case 4:if((d&4194048)!==d)break;case 6:nl(b,d,Qr,!tl);break e;case 2:Er=null;break;case 3:case 5:break;default:throw Error(a(329))}if((d&62914560)===d&&(D=c0+300-Te(),10<D)){if(nl(b,d,Qr,!tl),Fl(b,0,!0)!==0)break e;si=d,b.timeoutHandle=y5(V_.bind(null,b,x,Er,u0,yb,d,Qr,uo,Ec,tl,P,"Throttled",-0,0),D);break e}V_(b,x,Er,u0,yb,d,Qr,uo,Ec,tl,P,null,-0,0)}}break}while(!0);on(l)}function V_(l,d,x,b,D,P,re,de,pe,we,Ae,Me,ke,Ce){if(l.timeoutHandle=-1,Me=d.subtreeFlags,Me&8192||(Me&16785408)===16785408){Me={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pa},L_(d,P,Me);var $e=(P&62914560)===P?c0-Te():(P&4194048)===P?z_-Te():0;if($e=tM(Me,$e),$e!==null){si=P,l.cancelPendingCommit=$e(Z_.bind(null,l,d,P,x,b,D,re,de,pe,Ae,Me,null,ke,Ce)),nl(l,P,re,!we);return}}Z_(l,d,P,x,b,D,re,de,pe)}function gR(l){for(var d=l;;){var x=d.tag;if((x===0||x===11||x===15)&&d.flags&16384&&(x=d.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var b=0;b<x.length;b++){var D=x[b],P=D.getSnapshot;D=D.value;try{if(!Bt(P(),D))return!1}catch{return!1}}if(x=d.child,d.subtreeFlags&16384&&x!==null)x.return=d,d=x;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function nl(l,d,x,b){d&=~bb,d&=~uo,l.suspendedLanes|=d,l.pingedLanes&=~d,b&&(l.warmLanes|=d),b=l.expirationTimes;for(var D=d;0<D;){var P=31-et(D),re=1<<P;b[P]=-1,D&=~re}x!==0&&Gm(l,x,d)}function h0(){return(Et&6)===0?(Zu(0),!1):!0}function Nb(){if(ft!==null){if(Rt===0)var l=ft.return;else l=ft,qn=to=null,zg(l),jc=null,Mu=0,l=ft;for(;l!==null;)v_(l.alternate,l),l=l.return;ft=null}}function Dc(l,d){var x=l.timeoutHandle;x!==-1&&(l.timeoutHandle=-1,BR(x)),x=l.cancelPendingCommit,x!==null&&(l.cancelPendingCommit=null,x()),si=0,Nb(),Ht=l,ft=x=Vn(l.current,null),yt=d,Rt=0,Zr=null,tl=!1,Tc=ar(l,d),gb=!1,Ec=Qr=bb=uo=sl=cs=0,Er=Ku=null,yb=!1,(d&8)!==0&&(d|=d&32);var b=l.entangledLanes;if(b!==0)for(l=l.entanglements,b&=d;0<b;){var D=31-et(b),P=1<<D;d|=l[D],b&=~P}return ti=d,Zl(),x}function H_(l,d){ot=null,ee.H=$u,d===vc||d===$x?(d=i2(),Rt=3):d===Cg?(d=i2(),Rt=4):Rt=d===tb?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,Zr=d,ft===null&&(cs=1,t0(l,ca(d,l.current)))}function q_(){var l=Kr.current;return l===null?!0:(yt&4194048)===yt?ma===null:(yt&62914560)===yt||(yt&536870912)!==0?l===ma:!1}function W_(){var l=ee.H;return ee.H=$u,l===null?$u:l}function Y_(){var l=ee.A;return ee.A=fR,l}function m0(){cs=4,tl||(yt&4194048)!==yt&&Kr.current!==null||(Tc=!0),(sl&134217727)===0&&(uo&134217727)===0||Ht===null||nl(Ht,yt,Qr,!1)}function _b(l,d,x){var b=Et;Et|=2;var D=W_(),P=Y_();(Ht!==l||yt!==d)&&(u0=null,Dc(l,d)),d=!1;var re=cs;e:do try{if(Rt!==0&&ft!==null){var de=ft,pe=Zr;switch(Rt){case 8:Nb(),re=6;break e;case 3:case 2:case 9:case 6:Kr.current===null&&(d=!0);var we=Rt;if(Rt=0,Zr=null,Rc(l,de,pe,we),x&&Tc){re=0;break e}break;default:we=Rt,Rt=0,Zr=null,Rc(l,de,pe,we)}}bR(),re=cs;break}catch(Ae){H_(l,Ae)}while(!0);return d&&l.shellSuspendCounter++,qn=to=null,Et=b,ee.H=D,ee.A=P,ft===null&&(Ht=null,yt=0,Zl()),re}function bR(){for(;ft!==null;)G_(ft)}function yR(l,d){var x=Et;Et|=2;var b=W_(),D=Y_();Ht!==l||yt!==d?(u0=null,d0=Te()+500,Dc(l,d)):Tc=ar(l,d);e:do try{if(Rt!==0&&ft!==null){d=ft;var P=Zr;t:switch(Rt){case 1:Rt=0,Zr=null,Rc(l,d,P,1);break;case 2:case 9:if(a2(P)){Rt=0,Zr=null,K_(d);break}d=function(){Rt!==2&&Rt!==9||Ht!==l||(Rt=7),on(l)},P.then(d,d);break e;case 3:Rt=7;break e;case 4:Rt=5;break e;case 7:a2(P)?(Rt=0,Zr=null,K_(d)):(Rt=0,Zr=null,Rc(l,d,P,7));break;case 5:var re=null;switch(ft.tag){case 26:re=ft.memoizedState;case 5:case 27:var de=ft;if(re?O5(re):de.stateNode.complete){Rt=0,Zr=null;var pe=de.sibling;if(pe!==null)ft=pe;else{var we=de.return;we!==null?(ft=we,x0(we)):ft=null}break t}}Rt=0,Zr=null,Rc(l,d,P,5);break;case 6:Rt=0,Zr=null,Rc(l,d,P,6);break;case 8:Nb(),cs=6;break e;default:throw Error(a(462))}}vR();break}catch(Ae){H_(l,Ae)}while(!0);return qn=to=null,ee.H=b,ee.A=D,Et=x,ft!==null?0:(Ht=null,yt=0,Zl(),cs)}function vR(){for(;ft!==null&&!xe();)G_(ft)}function G_(l){var d=b_(l.alternate,l,ti);l.memoizedProps=l.pendingProps,d===null?x0(l):ft=d}function K_(l){var d=l,x=d.alternate;switch(d.tag){case 15:case 0:d=h_(x,d,d.pendingProps,d.type,void 0,yt);break;case 11:d=h_(x,d,d.pendingProps,d.type.render,d.ref,yt);break;case 5:zg(d);default:v_(x,d),d=ft=Y1(d,ti),d=b_(x,d,ti)}l.memoizedProps=l.pendingProps,d===null?x0(l):ft=d}function Rc(l,d,x,b){qn=to=null,zg(d),jc=null,Mu=0;var D=d.return;try{if(oR(l,D,d,x,yt)){cs=1,t0(l,ca(x,l.current)),ft=null;return}}catch(P){if(D!==null)throw ft=D,P;cs=1,t0(l,ca(x,l.current)),ft=null;return}d.flags&32768?(Nt||b===1?l=!0:Tc||(yt&536870912)!==0?l=!1:(tl=l=!0,(b===2||b===9||b===3||b===6)&&(b=Kr.current,b!==null&&b.tag===13&&(b.flags|=16384))),X_(d,l)):x0(d)}function x0(l){var d=l;do{if((d.flags&32768)!==0){X_(d,tl);return}l=d.return;var x=uR(d.alternate,d,ti);if(x!==null){ft=x;return}if(d=d.sibling,d!==null){ft=d;return}ft=d=l}while(d!==null);cs===0&&(cs=5)}function X_(l,d){do{var x=hR(l.alternate,l);if(x!==null){x.flags&=32767,ft=x;return}if(x=l.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!d&&(l=l.sibling,l!==null)){ft=l;return}ft=l=x}while(l!==null);cs=6,ft=null}function Z_(l,d,x,b,D,P,re,de,pe){l.cancelPendingCommit=null;do f0();while(Fs!==0);if((Et&6)!==0)throw Error(a(327));if(d!==null){if(d===l.current)throw Error(a(177));if(P=d.lanes|d.childLanes,P|=rn,Ud(l,x,P,re,de,pe),l===Ht&&(ft=Ht=null,yt=0),Ac=d,al=l,si=x,vb=P,jb=D,I_=b,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,_R(Ye,function(){return s5(),null})):(l.callbackNode=null,l.callbackPriority=0),b=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||b){b=ee.T,ee.T=null,D=se.p,se.p=2,re=Et,Et|=4;try{mR(l,d,x)}finally{Et=re,se.p=D,ee.T=b}}Fs=1,Q_(),J_(),e5()}}function Q_(){if(Fs===1){Fs=0;var l=al,d=Ac,x=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||x){x=ee.T,ee.T=null;var b=se.p;se.p=2;var D=Et;Et|=4;try{R_(d,l);var P=Pb,re=wu(l.containerInfo),de=P.focusedElem,pe=P.selectionRange;if(re!==de&&de&&de.ownerDocument&&ju(de.ownerDocument.documentElement,de)){if(pe!==null&&dc(de)){var we=pe.start,Ae=pe.end;if(Ae===void 0&&(Ae=we),"selectionStart"in de)de.selectionStart=we,de.selectionEnd=Math.min(Ae,de.value.length);else{var Me=de.ownerDocument||document,ke=Me&&Me.defaultView||window;if(ke.getSelection){var Ce=ke.getSelection(),$e=de.textContent.length,Je=Math.min(pe.start,$e),$t=pe.end===void 0?Je:Math.min(pe.end,$e);!Ce.extend&&Je>$t&&(re=$t,$t=Je,Je=re);var ye=vu(de,Je),ge=vu(de,$t);if(ye&&ge&&(Ce.rangeCount!==1||Ce.anchorNode!==ye.node||Ce.anchorOffset!==ye.offset||Ce.focusNode!==ge.node||Ce.focusOffset!==ge.offset)){var je=Me.createRange();je.setStart(ye.node,ye.offset),Ce.removeAllRanges(),Je>$t?(Ce.addRange(je),Ce.extend(ge.node,ge.offset)):(je.setEnd(ge.node,ge.offset),Ce.addRange(je))}}}}for(Me=[],Ce=de;Ce=Ce.parentNode;)Ce.nodeType===1&&Me.push({element:Ce,left:Ce.scrollLeft,top:Ce.scrollTop});for(typeof de.focus=="function"&&de.focus(),de=0;de<Me.length;de++){var Re=Me[de];Re.element.scrollLeft=Re.left,Re.element.scrollTop=Re.top}}C0=!!Lb,Pb=Lb=null}finally{Et=D,se.p=b,ee.T=x}}l.current=d,Fs=2}}function J_(){if(Fs===2){Fs=0;var l=al,d=Ac,x=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||x){x=ee.T,ee.T=null;var b=se.p;se.p=2;var D=Et;Et|=4;try{C_(l,d.alternate,d)}finally{Et=D,se.p=b,ee.T=x}}Fs=3}}function e5(){if(Fs===4||Fs===3){Fs=0,_e();var l=al,d=Ac,x=si,b=I_;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?Fs=5:(Fs=0,Ac=al=null,t5(l,l.pendingLanes));var D=l.pendingLanes;if(D===0&&(rl=null),Hd(x),d=d.stateNode,He&&typeof He.onCommitFiberRoot=="function")try{He.onCommitFiberRoot(Le,d,void 0,(d.current.flags&128)===128)}catch{}if(b!==null){d=ee.T,D=se.p,se.p=2,ee.T=null;try{for(var P=l.onRecoverableError,re=0;re<b.length;re++){var de=b[re];P(de.value,{componentStack:de.stack})}}finally{ee.T=d,se.p=D}}(si&3)!==0&&f0(),on(l),D=l.pendingLanes,(x&261930)!==0&&(D&42)!==0?l===wb?Xu++:(Xu=0,wb=l):Xu=0,Zu(0)}}function t5(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,Du(d)))}function f0(){return Q_(),J_(),e5(),s5()}function s5(){if(Fs!==5)return!1;var l=al,d=vb;vb=0;var x=Hd(si),b=ee.T,D=se.p;try{se.p=32>x?32:x,ee.T=null,x=jb,jb=null;var P=al,re=si;if(Fs=0,Ac=al=null,si=0,(Et&6)!==0)throw Error(a(331));var de=Et;if(Et|=4,B_(P.current),O_(P,P.current,re,x),Et=de,Zu(0,!1),He&&typeof He.onPostCommitFiberRoot=="function")try{He.onPostCommitFiberRoot(Le,P)}catch{}return!0}finally{se.p=D,ee.T=b,t5(l,d)}}function r5(l,d,x){d=ca(x,d),d=eb(l.stateNode,d,2),l=Zi(l,d,2),l!==null&&(Yt(l,2),on(l))}function Mt(l,d,x){if(l.tag===3)r5(l,l,x);else for(;d!==null;){if(d.tag===3){r5(d,l,x);break}else if(d.tag===1){var b=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(rl===null||!rl.has(b))){l=ca(x,l),x=a_(2),b=Zi(d,x,2),b!==null&&(n_(x,b,d,l),Yt(b,2),on(b));break}}d=d.return}}function kb(l,d,x){var b=l.pingCache;if(b===null){b=l.pingCache=new pR;var D=new Set;b.set(d,D)}else D=b.get(d),D===void 0&&(D=new Set,b.set(d,D));D.has(x)||(gb=!0,D.add(x),l=jR.bind(null,l,d,x),d.then(l,l))}function jR(l,d,x){var b=l.pingCache;b!==null&&b.delete(d),l.pingedLanes|=l.suspendedLanes&x,l.warmLanes&=~x,Ht===l&&(yt&x)===x&&(cs===4||cs===3&&(yt&62914560)===yt&&300>Te()-c0?(Et&2)===0&&Dc(l,0):bb|=x,Ec===yt&&(Ec=0)),on(l)}function a5(l,d){d===0&&(d=Ym()),l=Ql(l,d),l!==null&&(Yt(l,d),on(l))}function wR(l){var d=l.memoizedState,x=0;d!==null&&(x=d.retryLane),a5(l,x)}function NR(l,d){var x=0;switch(l.tag){case 31:case 13:var b=l.stateNode,D=l.memoizedState;D!==null&&(x=D.retryLane);break;case 19:b=l.stateNode;break;case 22:b=l.stateNode._retryCache;break;default:throw Error(a(314))}b!==null&&b.delete(d),a5(l,x)}function _R(l,d){return ae(l,d)}var p0=null,Mc=null,Sb=!1,g0=!1,Cb=!1,il=0;function on(l){l!==Mc&&l.next===null&&(Mc===null?p0=Mc=l:Mc=Mc.next=l),g0=!0,Sb||(Sb=!0,SR())}function Zu(l,d){if(!Cb&&g0){Cb=!0;do for(var x=!1,b=p0;b!==null;){if(l!==0){var D=b.pendingLanes;if(D===0)var P=0;else{var re=b.suspendedLanes,de=b.pingedLanes;P=(1<<31-et(42|l)+1)-1,P&=D&~(re&~de),P=P&201326741?P&201326741|1:P?P|2:0}P!==0&&(x=!0,o5(b,P))}else P=yt,P=Fl(b,b===Ht?P:0,b.cancelPendingCommit!==null||b.timeoutHandle!==-1),(P&3)===0||ar(b,P)||(x=!0,o5(b,P));b=b.next}while(x);Cb=!1}}function kR(){n5()}function n5(){g0=Sb=!1;var l=0;il!==0&&PR()&&(l=il);for(var d=Te(),x=null,b=p0;b!==null;){var D=b.next,P=i5(b,d);P===0?(b.next=null,x===null?p0=D:x.next=D,D===null&&(Mc=x)):(x=b,(l!==0||(P&3)!==0)&&(g0=!0)),b=D}Fs!==0&&Fs!==5||Zu(l),il!==0&&(il=0)}function i5(l,d){for(var x=l.suspendedLanes,b=l.pingedLanes,D=l.expirationTimes,P=l.pendingLanes&-62914561;0<P;){var re=31-et(P),de=1<<re,pe=D[re];pe===-1?((de&x)===0||(de&b)!==0)&&(D[re]=Ai(de,d)):pe<=d&&(l.expiredLanes|=de),P&=~de}if(d=Ht,x=yt,x=Fl(l,l===d?x:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b=l.callbackNode,x===0||l===d&&(Rt===2||Rt===9)||l.cancelPendingCommit!==null)return b!==null&&b!==null&&he(b),l.callbackNode=null,l.callbackPriority=0;if((x&3)===0||ar(l,x)){if(d=x&-x,d===l.callbackPriority)return d;switch(b!==null&&he(b),Hd(x)){case 2:case 8:x=Ie;break;case 32:x=Ye;break;case 268435456:x=pr;break;default:x=Ye}return b=l5.bind(null,l),x=ae(x,b),l.callbackPriority=d,l.callbackNode=x,d}return b!==null&&b!==null&&he(b),l.callbackPriority=2,l.callbackNode=null,2}function l5(l,d){if(Fs!==0&&Fs!==5)return l.callbackNode=null,l.callbackPriority=0,null;var x=l.callbackNode;if(f0()&&l.callbackNode!==x)return null;var b=yt;return b=Fl(l,l===Ht?b:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b===0?null:(U_(l,b,d),i5(l,Te()),l.callbackNode!=null&&l.callbackNode===x?l5.bind(null,l):null)}function o5(l,d){if(f0())return null;U_(l,d,!0)}function SR(){FR(function(){(Et&6)!==0?ae(ze,kR):n5()})}function Tb(){if(il===0){var l=bc;l===0&&(l=Nr,Nr<<=1,(Nr&261888)===0&&(Nr=256)),il=l}return il}function c5(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Vl(""+l)}function d5(l,d){var x=d.ownerDocument.createElement("input");return x.name=d.name,x.value=d.value,l.id&&x.setAttribute("form",l.id),d.parentNode.insertBefore(x,d),l=new FormData(l),x.parentNode.removeChild(x),l}function CR(l,d,x,b,D){if(d==="submit"&&x&&x.stateNode===D){var P=c5((D[Ws]||null).action),re=b.submitter;re&&(d=(d=re[Ws]||null)?c5(d.formAction):re.getAttribute("formAction"),d!==null&&(P=d,re=null));var de=new oc("action","action",null,b,D);l.push({event:de,listeners:[{instance:null,listener:function(){if(b.defaultPrevented){if(il!==0){var pe=re?d5(D,re):new FormData(D);Gg(x,{pending:!0,data:pe,method:D.method,action:P},null,pe)}}else typeof P=="function"&&(de.preventDefault(),pe=re?d5(D,re):new FormData(D),Gg(x,{pending:!0,data:pe,method:D.method,action:P},P,pe))},currentTarget:D}]})}}for(var Eb=0;Eb<ve.length;Eb++){var Ab=ve[Eb],TR=Ab.toLowerCase(),ER=Ab[0].toUpperCase()+Ab.slice(1);Fe(TR,"on"+ER)}Fe(Cu,"onAnimationEnd"),Fe(hc,"onAnimationIteration"),Fe(Dx,"onAnimationStart"),Fe("dblclick","onDoubleClick"),Fe("focusin","onFocus"),Fe("focusout","onBlur"),Fe(hg,"onTransitionRun"),Fe(Tu,"onTransitionStart"),Fe(q1,"onTransitionCancel"),Fe(Rx,"onTransitionEnd"),Bn("onMouseEnter",["mouseout","mouseover"]),Bn("onMouseLeave",["mouseout","mouseover"]),Bn("onPointerEnter",["pointerout","pointerover"]),Bn("onPointerLeave",["pointerout","pointerover"]),Pn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Pn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Pn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Pn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Pn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Pn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qu));function u5(l,d){d=(d&4)!==0;for(var x=0;x<l.length;x++){var b=l[x],D=b.event;b=b.listeners;e:{var P=void 0;if(d)for(var re=b.length-1;0<=re;re--){var de=b[re],pe=de.instance,we=de.currentTarget;if(de=de.listener,pe!==P&&D.isPropagationStopped())break e;P=de,D.currentTarget=we;try{P(D)}catch(Ae){Xe(Ae)}D.currentTarget=null,P=pe}else for(re=0;re<b.length;re++){if(de=b[re],pe=de.instance,we=de.currentTarget,de=de.listener,pe!==P&&D.isPropagationStopped())break e;P=de,D.currentTarget=we;try{P(D)}catch(Ae){Xe(Ae)}D.currentTarget=null,P=pe}}}}function pt(l,d){var x=d[Wd];x===void 0&&(x=d[Wd]=new Set);var b=l+"__bubble";x.has(b)||(h5(d,l,2,!1),x.add(b))}function Db(l,d,x){var b=0;d&&(b|=4),h5(x,l,b,d)}var b0="_reactListening"+Math.random().toString(36).slice(2);function Rb(l){if(!l[b0]){l[b0]=!0,Gd.forEach(function(x){x!=="selectionchange"&&(AR.has(x)||Db(x,!1,l),Db(x,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[b0]||(d[b0]=!0,Db("selectionchange",!1,d))}}function h5(l,d,x,b){switch($5(d)){case 2:var D=aM;break;case 8:D=nM;break;default:D=Yb}x=D.bind(null,d,x,l),D=void 0,!nc||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(D=!0),b?D!==void 0?l.addEventListener(d,x,{capture:!0,passive:D}):l.addEventListener(d,x,!0):D!==void 0?l.addEventListener(d,x,{passive:D}):l.addEventListener(d,x,!1)}function Mb(l,d,x,b,D){var P=b;if((d&1)===0&&(d&2)===0&&b!==null)e:for(;;){if(b===null)return;var re=b.tag;if(re===3||re===4){var de=b.stateNode.containerInfo;if(de===D)break;if(re===4)for(re=b.return;re!==null;){var pe=re.tag;if((pe===3||pe===4)&&re.stateNode.containerInfo===D)return;re=re.return}for(;de!==null;){if(re=On(de),re===null)return;if(pe=re.tag,pe===5||pe===6||pe===26||pe===27){b=P=re;continue e}de=de.parentNode}}b=b.return}iu(function(){var we=P,Ae=rc(x),Me=[];e:{var ke=Mx.get(l);if(ke!==void 0){var Ce=oc,$e=l;switch(l){case"keypress":if(ic(x)===0)break e;case"keydown":case"keyup":Ce=ag;break;case"focusin":$e="focus",Ce=hu;break;case"focusout":$e="blur",Ce=hu;break;case"beforeblur":case"afterblur":Ce=hu;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ce=ix;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ce=lx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ce=ig;break;case Cu:case hc:case Dx:Ce=cx;break;case Rx:Ce=fx;break;case"scroll":case"scrollend":Ce=nx;break;case"wheel":Ce=og;break;case"copy":case"cut":case"paste":Ce=Jp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ce=xu;break;case"toggle":case"beforetoggle":Ce=gx}var Je=(d&4)!==0,$t=!Je&&(l==="scroll"||l==="scrollend"),ye=Je?ke!==null?ke+"Capture":null:ke;Je=[];for(var ge=we,je;ge!==null;){var Re=ge;if(je=Re.stateNode,Re=Re.tag,Re!==5&&Re!==26&&Re!==27||je===null||ye===null||(Re=Hl(ge,ye),Re!=null&&Je.push(Ju(ge,Re,je))),$t)break;ge=ge.return}0<Je.length&&(ke=new Ce(ke,$e,null,x,Ae),Me.push({event:ke,listeners:Je}))}}if((d&7)===0){e:{if(ke=l==="mouseover"||l==="pointerover",Ce=l==="mouseout"||l==="pointerout",ke&&x!==nu&&($e=x.relatedTarget||x.fromElement)&&(On($e)||$e[Rn]))break e;if((Ce||ke)&&(ke=Ae.window===Ae?Ae:(ke=Ae.ownerDocument)?ke.defaultView||ke.parentWindow:window,Ce?($e=x.relatedTarget||x.toElement,Ce=we,$e=$e?On($e):null,$e!==null&&($t=i($e),Je=$e.tag,$e!==$t||Je!==5&&Je!==27&&Je!==6)&&($e=null)):(Ce=null,$e=we),Ce!==$e)){if(Je=ix,Re="onMouseLeave",ye="onMouseEnter",ge="mouse",(l==="pointerout"||l==="pointerover")&&(Je=xu,Re="onPointerLeave",ye="onPointerEnter",ge="pointer"),$t=Ce==null?ke:Il(Ce),je=$e==null?ke:Il($e),ke=new Je(Re,ge+"leave",Ce,x,Ae),ke.target=$t,ke.relatedTarget=je,Re=null,On(Ae)===we&&(Je=new Je(ye,ge+"enter",$e,x,Ae),Je.target=je,Je.relatedTarget=$t,Re=Je),$t=Re,Ce&&$e)t:{for(Je=DR,ye=Ce,ge=$e,je=0,Re=ye;Re;Re=Je(Re))je++;Re=0;for(var Ke=ge;Ke;Ke=Je(Ke))Re++;for(;0<je-Re;)ye=Je(ye),je--;for(;0<Re-je;)ge=Je(ge),Re--;for(;je--;){if(ye===ge||ge!==null&&ye===ge.alternate){Je=ye;break t}ye=Je(ye),ge=Je(ge)}Je=null}else Je=null;Ce!==null&&m5(Me,ke,Ce,Je,!1),$e!==null&&$t!==null&&m5(Me,$t,$e,Je,!0)}}e:{if(ke=we?Il(we):window,Ce=ke.nodeName&&ke.nodeName.toLowerCase(),Ce==="select"||Ce==="input"&&ke.type==="file")var St=ts;else if(_x(ke))if(kx)St=sn;else{St=Kl;var qe=Sx}else Ce=ke.nodeName,!Ce||Ce.toLowerCase()!=="input"||ke.type!=="checkbox"&&ke.type!=="radio"?we&&au(we.elementType)&&(St=ts):St=Cx;if(St&&(St=St(l,we))){bu(Me,St,x,Ae);break e}qe&&qe(l,ke,we),l==="focusout"&&we&&ke.type==="number"&&we.memoizedProps.value!=null&&Jd(ke,"number",ke.value)}switch(qe=we?Il(we):window,l){case"focusin":(_x(qe)||qe.contentEditable==="true")&&(In=qe,uc=we,Vi=null);break;case"focusout":Vi=uc=In=null;break;case"mousedown":_u=!0;break;case"contextmenu":case"mouseup":case"dragend":_u=!1,ku(Me,x,Ae);break;case"selectionchange":if(Nu)break;case"keydown":case"keyup":ku(Me,x,Ae)}var dt;if(fu)e:{switch(l){case"compositionstart":var vt="onCompositionStart";break e;case"compositionend":vt="onCompositionEnd";break e;case"compositionupdate":vt="onCompositionUpdate";break e}vt=void 0}else zi?gu(l,x)&&(vt="onCompositionEnd"):l==="keydown"&&x.keyCode===229&&(vt="onCompositionStart");vt&&(yx&&x.locale!=="ko"&&(zi||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&zi&&(dt=ou()):(tn=Ae,lu="value"in tn?tn.value:tn.textContent,zi=!0)),qe=y0(we,vt),0<qe.length&&(vt=new mu(vt,l,null,x,Ae),Me.push({event:vt,listeners:qe}),dt?vt.data=dt:(dt=jx(x),dt!==null&&(vt.data=dt)))),(dt=bx?wx(l,x):Nx(l,x))&&(vt=y0(we,"onBeforeInput"),0<vt.length&&(qe=new mu("onBeforeInput","beforeinput",null,x,Ae),Me.push({event:qe,listeners:vt}),qe.data=dt)),CR(Me,l,we,x,Ae)}u5(Me,d)})}function Ju(l,d,x){return{instance:l,listener:d,currentTarget:x}}function y0(l,d){for(var x=d+"Capture",b=[];l!==null;){var D=l,P=D.stateNode;if(D=D.tag,D!==5&&D!==26&&D!==27||P===null||(D=Hl(l,x),D!=null&&b.unshift(Ju(l,D,P)),D=Hl(l,d),D!=null&&b.push(Ju(l,D,P))),l.tag===3)return b;l=l.return}return[]}function DR(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function m5(l,d,x,b,D){for(var P=d._reactName,re=[];x!==null&&x!==b;){var de=x,pe=de.alternate,we=de.stateNode;if(de=de.tag,pe!==null&&pe===b)break;de!==5&&de!==26&&de!==27||we===null||(pe=we,D?(we=Hl(x,P),we!=null&&re.unshift(Ju(x,we,pe))):D||(we=Hl(x,P),we!=null&&re.push(Ju(x,we,pe)))),x=x.return}re.length!==0&&l.push({event:d,listeners:re})}var RR=/\r\n?/g,MR=/\u0000|\uFFFD/g;function x5(l){return(typeof l=="string"?l:""+l).replace(RR,`
`).replace(MR,"")}function f5(l,d){return d=x5(d),x5(l)===d}function It(l,d,x,b,D,P){switch(x){case"children":typeof b=="string"?d==="body"||d==="textarea"&&b===""||Mi(l,b):(typeof b=="number"||typeof b=="bigint")&&d!=="body"&&Mi(l,""+b);break;case"className":tc(l,"class",b);break;case"tabIndex":tc(l,"tabindex",b);break;case"dir":case"role":case"viewBox":case"width":case"height":tc(l,x,b);break;case"style":ru(l,b,P);break;case"data":if(d!=="object"){tc(l,"data",b);break}case"src":case"href":if(b===""&&(d!=="a"||x!=="href")){l.removeAttribute(x);break}if(b==null||typeof b=="function"||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(x);break}b=Vl(""+b),l.setAttribute(x,b);break;case"action":case"formAction":if(typeof b=="function"){l.setAttribute(x,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof P=="function"&&(x==="formAction"?(d!=="input"&&It(l,d,"name",D.name,D,null),It(l,d,"formEncType",D.formEncType,D,null),It(l,d,"formMethod",D.formMethod,D,null),It(l,d,"formTarget",D.formTarget,D,null)):(It(l,d,"encType",D.encType,D,null),It(l,d,"method",D.method,D,null),It(l,d,"target",D.target,D,null)));if(b==null||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(x);break}b=Vl(""+b),l.setAttribute(x,b);break;case"onClick":b!=null&&(l.onclick=Pa);break;case"onScroll":b!=null&&pt("scroll",l);break;case"onScrollEnd":b!=null&&pt("scrollend",l);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(a(61));if(x=b.__html,x!=null){if(D.children!=null)throw Error(a(60));l.innerHTML=x}}break;case"multiple":l.multiple=b&&typeof b!="function"&&typeof b!="symbol";break;case"muted":l.muted=b&&typeof b!="function"&&typeof b!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(b==null||typeof b=="function"||typeof b=="boolean"||typeof b=="symbol"){l.removeAttribute("xlink:href");break}x=Vl(""+b),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",x);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(x,""+b):l.removeAttribute(x);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":b&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(x,""):l.removeAttribute(x);break;case"capture":case"download":b===!0?l.setAttribute(x,""):b!==!1&&b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(x,b):l.removeAttribute(x);break;case"cols":case"rows":case"size":case"span":b!=null&&typeof b!="function"&&typeof b!="symbol"&&!isNaN(b)&&1<=b?l.setAttribute(x,b):l.removeAttribute(x);break;case"rowSpan":case"start":b==null||typeof b=="function"||typeof b=="symbol"||isNaN(b)?l.removeAttribute(x):l.setAttribute(x,b);break;case"popover":pt("beforetoggle",l),pt("toggle",l),$l(l,"popover",b);break;case"xlinkActuate":La(l,"http://www.w3.org/1999/xlink","xlink:actuate",b);break;case"xlinkArcrole":La(l,"http://www.w3.org/1999/xlink","xlink:arcrole",b);break;case"xlinkRole":La(l,"http://www.w3.org/1999/xlink","xlink:role",b);break;case"xlinkShow":La(l,"http://www.w3.org/1999/xlink","xlink:show",b);break;case"xlinkTitle":La(l,"http://www.w3.org/1999/xlink","xlink:title",b);break;case"xlinkType":La(l,"http://www.w3.org/1999/xlink","xlink:type",b);break;case"xmlBase":La(l,"http://www.w3.org/XML/1998/namespace","xml:base",b);break;case"xmlLang":La(l,"http://www.w3.org/XML/1998/namespace","xml:lang",b);break;case"xmlSpace":La(l,"http://www.w3.org/XML/1998/namespace","xml:space",b);break;case"is":$l(l,"is",b);break;case"innerText":case"textContent":break;default:(!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(x=Xp.get(x)||x,$l(l,x,b))}}function Ob(l,d,x,b,D,P){switch(x){case"style":ru(l,b,P);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(a(61));if(x=b.__html,x!=null){if(D.children!=null)throw Error(a(60));l.innerHTML=x}}break;case"children":typeof b=="string"?Mi(l,b):(typeof b=="number"||typeof b=="bigint")&&Mi(l,""+b);break;case"onScroll":b!=null&&pt("scroll",l);break;case"onScrollEnd":b!=null&&pt("scrollend",l);break;case"onClick":b!=null&&(l.onclick=Pa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qm.hasOwnProperty(x))e:{if(x[0]==="o"&&x[1]==="n"&&(D=x.endsWith("Capture"),d=x.slice(2,D?x.length-7:void 0),P=l[Ws]||null,P=P!=null?P[x]:null,typeof P=="function"&&l.removeEventListener(d,P,D),typeof b=="function")){typeof P!="function"&&P!==null&&(x in l?l[x]=null:l.hasAttribute(x)&&l.removeAttribute(x)),l.addEventListener(d,b,D);break e}x in l?l[x]=b:b===!0?l.setAttribute(x,""):$l(l,x,b)}}}function Zs(l,d,x){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pt("error",l),pt("load",l);var b=!1,D=!1,P;for(P in x)if(x.hasOwnProperty(P)){var re=x[P];if(re!=null)switch(P){case"src":b=!0;break;case"srcSet":D=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,d));default:It(l,d,P,re,x,null)}}D&&It(l,d,"srcSet",x.srcSet,x,null),b&&It(l,d,"src",x.src,x,null);return;case"input":pt("invalid",l);var de=P=re=D=null,pe=null,we=null;for(b in x)if(x.hasOwnProperty(b)){var Ae=x[b];if(Ae!=null)switch(b){case"name":D=Ae;break;case"type":re=Ae;break;case"checked":pe=Ae;break;case"defaultChecked":we=Ae;break;case"value":P=Ae;break;case"defaultValue":de=Ae;break;case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(a(137,d));break;default:It(l,d,b,Ae,x,null)}}Qd(l,P,de,pe,we,re,D,!1);return;case"select":pt("invalid",l),b=re=P=null;for(D in x)if(x.hasOwnProperty(D)&&(de=x[D],de!=null))switch(D){case"value":P=de;break;case"defaultValue":re=de;break;case"multiple":b=de;default:It(l,d,D,de,x,null)}d=P,x=re,l.multiple=!!b,d!=null?Ri(l,!!b,d,!1):x!=null&&Ri(l,!!b,x,!0);return;case"textarea":pt("invalid",l),P=D=b=null;for(re in x)if(x.hasOwnProperty(re)&&(de=x[re],de!=null))switch(re){case"value":b=de;break;case"defaultValue":D=de;break;case"children":P=de;break;case"dangerouslySetInnerHTML":if(de!=null)throw Error(a(91));break;default:It(l,d,re,de,x,null)}tu(l,b,D,P);return;case"option":for(pe in x)if(x.hasOwnProperty(pe)&&(b=x[pe],b!=null))switch(pe){case"selected":l.selected=b&&typeof b!="function"&&typeof b!="symbol";break;default:It(l,d,pe,b,x,null)}return;case"dialog":pt("beforetoggle",l),pt("toggle",l),pt("cancel",l),pt("close",l);break;case"iframe":case"object":pt("load",l);break;case"video":case"audio":for(b=0;b<Qu.length;b++)pt(Qu[b],l);break;case"image":pt("error",l),pt("load",l);break;case"details":pt("toggle",l);break;case"embed":case"source":case"link":pt("error",l),pt("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(we in x)if(x.hasOwnProperty(we)&&(b=x[we],b!=null))switch(we){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,d));default:It(l,d,we,b,x,null)}return;default:if(au(d)){for(Ae in x)x.hasOwnProperty(Ae)&&(b=x[Ae],b!==void 0&&Ob(l,d,Ae,b,x,void 0));return}}for(de in x)x.hasOwnProperty(de)&&(b=x[de],b!=null&&It(l,d,de,b,x,null))}function OR(l,d,x,b){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var D=null,P=null,re=null,de=null,pe=null,we=null,Ae=null;for(Ce in x){var Me=x[Ce];if(x.hasOwnProperty(Ce)&&Me!=null)switch(Ce){case"checked":break;case"value":break;case"defaultValue":pe=Me;default:b.hasOwnProperty(Ce)||It(l,d,Ce,null,b,Me)}}for(var ke in b){var Ce=b[ke];if(Me=x[ke],b.hasOwnProperty(ke)&&(Ce!=null||Me!=null))switch(ke){case"type":P=Ce;break;case"name":D=Ce;break;case"checked":we=Ce;break;case"defaultChecked":Ae=Ce;break;case"value":re=Ce;break;case"defaultValue":de=Ce;break;case"children":case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(a(137,d));break;default:Ce!==Me&&It(l,d,ke,Ce,b,Me)}}sc(l,re,de,pe,we,Ae,P,D);return;case"select":Ce=re=de=ke=null;for(P in x)if(pe=x[P],x.hasOwnProperty(P)&&pe!=null)switch(P){case"value":break;case"multiple":Ce=pe;default:b.hasOwnProperty(P)||It(l,d,P,null,b,pe)}for(D in b)if(P=b[D],pe=x[D],b.hasOwnProperty(D)&&(P!=null||pe!=null))switch(D){case"value":ke=P;break;case"defaultValue":de=P;break;case"multiple":re=P;default:P!==pe&&It(l,d,D,P,b,pe)}d=de,x=re,b=Ce,ke!=null?Ri(l,!!x,ke,!1):!!b!=!!x&&(d!=null?Ri(l,!!x,d,!0):Ri(l,!!x,x?[]:"",!1));return;case"textarea":Ce=ke=null;for(de in x)if(D=x[de],x.hasOwnProperty(de)&&D!=null&&!b.hasOwnProperty(de))switch(de){case"value":break;case"children":break;default:It(l,d,de,null,b,D)}for(re in b)if(D=b[re],P=x[re],b.hasOwnProperty(re)&&(D!=null||P!=null))switch(re){case"value":ke=D;break;case"defaultValue":Ce=D;break;case"children":break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(a(91));break;default:D!==P&&It(l,d,re,D,b,P)}eu(l,ke,Ce);return;case"option":for(var $e in x)if(ke=x[$e],x.hasOwnProperty($e)&&ke!=null&&!b.hasOwnProperty($e))switch($e){case"selected":l.selected=!1;break;default:It(l,d,$e,null,b,ke)}for(pe in b)if(ke=b[pe],Ce=x[pe],b.hasOwnProperty(pe)&&ke!==Ce&&(ke!=null||Ce!=null))switch(pe){case"selected":l.selected=ke&&typeof ke!="function"&&typeof ke!="symbol";break;default:It(l,d,pe,ke,b,Ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Je in x)ke=x[Je],x.hasOwnProperty(Je)&&ke!=null&&!b.hasOwnProperty(Je)&&It(l,d,Je,null,b,ke);for(we in b)if(ke=b[we],Ce=x[we],b.hasOwnProperty(we)&&ke!==Ce&&(ke!=null||Ce!=null))switch(we){case"children":case"dangerouslySetInnerHTML":if(ke!=null)throw Error(a(137,d));break;default:It(l,d,we,ke,b,Ce)}return;default:if(au(d)){for(var $t in x)ke=x[$t],x.hasOwnProperty($t)&&ke!==void 0&&!b.hasOwnProperty($t)&&Ob(l,d,$t,void 0,b,ke);for(Ae in b)ke=b[Ae],Ce=x[Ae],!b.hasOwnProperty(Ae)||ke===Ce||ke===void 0&&Ce===void 0||Ob(l,d,Ae,ke,b,Ce);return}}for(var ye in x)ke=x[ye],x.hasOwnProperty(ye)&&ke!=null&&!b.hasOwnProperty(ye)&&It(l,d,ye,null,b,ke);for(Me in b)ke=b[Me],Ce=x[Me],!b.hasOwnProperty(Me)||ke===Ce||ke==null&&Ce==null||It(l,d,Me,ke,b,Ce)}function p5(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function LR(){if(typeof performance.getEntriesByType=="function"){for(var l=0,d=0,x=performance.getEntriesByType("resource"),b=0;b<x.length;b++){var D=x[b],P=D.transferSize,re=D.initiatorType,de=D.duration;if(P&&de&&p5(re)){for(re=0,de=D.responseEnd,b+=1;b<x.length;b++){var pe=x[b],we=pe.startTime;if(we>de)break;var Ae=pe.transferSize,Me=pe.initiatorType;Ae&&p5(Me)&&(pe=pe.responseEnd,re+=Ae*(pe<de?1:(de-we)/(pe-we)))}if(--b,d+=8*(P+re)/(D.duration/1e3),l++,10<l)break}}if(0<l)return d/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var Lb=null,Pb=null;function v0(l){return l.nodeType===9?l:l.ownerDocument}function g5(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function b5(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function Bb(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Fb=null;function PR(){var l=window.event;return l&&l.type==="popstate"?l===Fb?!1:(Fb=l,!0):(Fb=null,!1)}var y5=typeof setTimeout=="function"?setTimeout:void 0,BR=typeof clearTimeout=="function"?clearTimeout:void 0,v5=typeof Promise=="function"?Promise:void 0,FR=typeof queueMicrotask=="function"?queueMicrotask:typeof v5<"u"?function(l){return v5.resolve(null).then(l).catch(zR)}:y5;function zR(l){setTimeout(function(){throw l})}function ll(l){return l==="head"}function j5(l,d){var x=d,b=0;do{var D=x.nextSibling;if(l.removeChild(x),D&&D.nodeType===8)if(x=D.data,x==="/$"||x==="/&"){if(b===0){l.removeChild(D),Bc(d);return}b--}else if(x==="$"||x==="$?"||x==="$~"||x==="$!"||x==="&")b++;else if(x==="html")eh(l.ownerDocument.documentElement);else if(x==="head"){x=l.ownerDocument.head,eh(x);for(var P=x.firstChild;P;){var re=P.nextSibling,de=P.nodeName;P[Mn]||de==="SCRIPT"||de==="STYLE"||de==="LINK"&&P.rel.toLowerCase()==="stylesheet"||x.removeChild(P),P=re}}else x==="body"&&eh(l.ownerDocument.body);x=D}while(x);Bc(d)}function w5(l,d){var x=l;l=0;do{var b=x.nextSibling;if(x.nodeType===1?d?(x._stashedDisplay=x.style.display,x.style.display="none"):(x.style.display=x._stashedDisplay||"",x.getAttribute("style")===""&&x.removeAttribute("style")):x.nodeType===3&&(d?(x._stashedText=x.nodeValue,x.nodeValue=""):x.nodeValue=x._stashedText||""),b&&b.nodeType===8)if(x=b.data,x==="/$"){if(l===0)break;l--}else x!=="$"&&x!=="$?"&&x!=="$~"&&x!=="$!"||l++;x=b}while(x)}function zb(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var x=d;switch(d=d.nextSibling,x.nodeName){case"HTML":case"HEAD":case"BODY":zb(x),Yd(x);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(x.rel.toLowerCase()==="stylesheet")continue}l.removeChild(x)}}function IR(l,d,x,b){for(;l.nodeType===1;){var D=x;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!b&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(b){if(!l[Mn])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(P=l.getAttribute("rel"),P==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(P!==D.rel||l.getAttribute("href")!==(D.href==null||D.href===""?null:D.href)||l.getAttribute("crossorigin")!==(D.crossOrigin==null?null:D.crossOrigin)||l.getAttribute("title")!==(D.title==null?null:D.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(P=l.getAttribute("src"),(P!==(D.src==null?null:D.src)||l.getAttribute("type")!==(D.type==null?null:D.type)||l.getAttribute("crossorigin")!==(D.crossOrigin==null?null:D.crossOrigin))&&P&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var P=D.name==null?null:""+D.name;if(D.type==="hidden"&&l.getAttribute("name")===P)return l}else return l;if(l=xa(l.nextSibling),l===null)break}return null}function $R(l,d,x){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!x||(l=xa(l.nextSibling),l===null))return null;return l}function N5(l,d){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!d||(l=xa(l.nextSibling),l===null))return null;return l}function Ib(l){return l.data==="$?"||l.data==="$~"}function $b(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function UR(l,d){var x=l.ownerDocument;if(l.data==="$~")l._reactRetry=d;else if(l.data!=="$?"||x.readyState!=="loading")d();else{var b=function(){d(),x.removeEventListener("DOMContentLoaded",b)};x.addEventListener("DOMContentLoaded",b),l._reactRetry=b}}function xa(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"||d==="F!"||d==="F")break;if(d==="/$"||d==="/&")return null}}return l}var Ub=null;function _5(l){l=l.nextSibling;for(var d=0;l;){if(l.nodeType===8){var x=l.data;if(x==="/$"||x==="/&"){if(d===0)return xa(l.nextSibling);d--}else x!=="$"&&x!=="$!"&&x!=="$?"&&x!=="$~"&&x!=="&"||d++}l=l.nextSibling}return null}function k5(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var x=l.data;if(x==="$"||x==="$!"||x==="$?"||x==="$~"||x==="&"){if(d===0)return l;d--}else x!=="/$"&&x!=="/&"||d++}l=l.previousSibling}return null}function S5(l,d,x){switch(d=v0(x),l){case"html":if(l=d.documentElement,!l)throw Error(a(452));return l;case"head":if(l=d.head,!l)throw Error(a(453));return l;case"body":if(l=d.body,!l)throw Error(a(454));return l;default:throw Error(a(451))}}function eh(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);Yd(l)}var fa=new Map,C5=new Set;function j0(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var ri=se.d;se.d={f:VR,r:HR,D:qR,C:WR,L:YR,m:GR,X:XR,S:KR,M:ZR};function VR(){var l=ri.f(),d=h0();return l||d}function HR(l){var d=Ln(l);d!==null&&d.tag===5&&d.type==="form"?H2(d):ri.r(l)}var Oc=typeof document>"u"?null:document;function T5(l,d,x){var b=Oc;if(b&&typeof d=="string"&&d){var D=kr(d);D='link[rel="'+l+'"][href="'+D+'"]',typeof x=="string"&&(D+='[crossorigin="'+x+'"]'),C5.has(D)||(C5.add(D),l={rel:l,crossOrigin:x,href:d},b.querySelector(D)===null&&(d=b.createElement("link"),Zs(d,"link",l),fs(d),b.head.appendChild(d)))}}function qR(l){ri.D(l),T5("dns-prefetch",l,null)}function WR(l,d){ri.C(l,d),T5("preconnect",l,d)}function YR(l,d,x){ri.L(l,d,x);var b=Oc;if(b&&l&&d){var D='link[rel="preload"][as="'+kr(d)+'"]';d==="image"&&x&&x.imageSrcSet?(D+='[imagesrcset="'+kr(x.imageSrcSet)+'"]',typeof x.imageSizes=="string"&&(D+='[imagesizes="'+kr(x.imageSizes)+'"]')):D+='[href="'+kr(l)+'"]';var P=D;switch(d){case"style":P=Lc(l);break;case"script":P=Pc(l)}fa.has(P)||(l=f({rel:"preload",href:d==="image"&&x&&x.imageSrcSet?void 0:l,as:d},x),fa.set(P,l),b.querySelector(D)!==null||d==="style"&&b.querySelector(th(P))||d==="script"&&b.querySelector(sh(P))||(d=b.createElement("link"),Zs(d,"link",l),fs(d),b.head.appendChild(d)))}}function GR(l,d){ri.m(l,d);var x=Oc;if(x&&l){var b=d&&typeof d.as=="string"?d.as:"script",D='link[rel="modulepreload"][as="'+kr(b)+'"][href="'+kr(l)+'"]',P=D;switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":P=Pc(l)}if(!fa.has(P)&&(l=f({rel:"modulepreload",href:l},d),fa.set(P,l),x.querySelector(D)===null)){switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(x.querySelector(sh(P)))return}b=x.createElement("link"),Zs(b,"link",l),fs(b),x.head.appendChild(b)}}}function KR(l,d,x){ri.S(l,d,x);var b=Oc;if(b&&l){var D=Di(b).hoistableStyles,P=Lc(l);d=d||"default";var re=D.get(P);if(!re){var de={loading:0,preload:null};if(re=b.querySelector(th(P)))de.loading=5;else{l=f({rel:"stylesheet",href:l,"data-precedence":d},x),(x=fa.get(P))&&Vb(l,x);var pe=re=b.createElement("link");fs(pe),Zs(pe,"link",l),pe._p=new Promise(function(we,Ae){pe.onload=we,pe.onerror=Ae}),pe.addEventListener("load",function(){de.loading|=1}),pe.addEventListener("error",function(){de.loading|=2}),de.loading|=4,w0(re,d,b)}re={type:"stylesheet",instance:re,count:1,state:de},D.set(P,re)}}}function XR(l,d){ri.X(l,d);var x=Oc;if(x&&l){var b=Di(x).hoistableScripts,D=Pc(l),P=b.get(D);P||(P=x.querySelector(sh(D)),P||(l=f({src:l,async:!0},d),(d=fa.get(D))&&Hb(l,d),P=x.createElement("script"),fs(P),Zs(P,"link",l),x.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},b.set(D,P))}}function ZR(l,d){ri.M(l,d);var x=Oc;if(x&&l){var b=Di(x).hoistableScripts,D=Pc(l),P=b.get(D);P||(P=x.querySelector(sh(D)),P||(l=f({src:l,async:!0,type:"module"},d),(d=fa.get(D))&&Hb(l,d),P=x.createElement("script"),fs(P),Zs(P,"link",l),x.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},b.set(D,P))}}function E5(l,d,x,b){var D=(D=ce.current)?j0(D):null;if(!D)throw Error(a(446));switch(l){case"meta":case"title":return null;case"style":return typeof x.precedence=="string"&&typeof x.href=="string"?(d=Lc(x.href),x=Di(D).hoistableStyles,b=x.get(d),b||(b={type:"style",instance:null,count:0,state:null},x.set(d,b)),b):{type:"void",instance:null,count:0,state:null};case"link":if(x.rel==="stylesheet"&&typeof x.href=="string"&&typeof x.precedence=="string"){l=Lc(x.href);var P=Di(D).hoistableStyles,re=P.get(l);if(re||(D=D.ownerDocument||D,re={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},P.set(l,re),(P=D.querySelector(th(l)))&&!P._p&&(re.instance=P,re.state.loading=5),fa.has(l)||(x={rel:"preload",as:"style",href:x.href,crossOrigin:x.crossOrigin,integrity:x.integrity,media:x.media,hrefLang:x.hrefLang,referrerPolicy:x.referrerPolicy},fa.set(l,x),P||QR(D,l,x,re.state))),d&&b===null)throw Error(a(528,""));return re}if(d&&b!==null)throw Error(a(529,""));return null;case"script":return d=x.async,x=x.src,typeof x=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=Pc(x),x=Di(D).hoistableScripts,b=x.get(d),b||(b={type:"script",instance:null,count:0,state:null},x.set(d,b)),b):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,l))}}function Lc(l){return'href="'+kr(l)+'"'}function th(l){return'link[rel="stylesheet"]['+l+"]"}function A5(l){return f({},l,{"data-precedence":l.precedence,precedence:null})}function QR(l,d,x,b){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?b.loading=1:(d=l.createElement("link"),b.preload=d,d.addEventListener("load",function(){return b.loading|=1}),d.addEventListener("error",function(){return b.loading|=2}),Zs(d,"link",x),fs(d),l.head.appendChild(d))}function Pc(l){return'[src="'+kr(l)+'"]'}function sh(l){return"script[async]"+l}function D5(l,d,x){if(d.count++,d.instance===null)switch(d.type){case"style":var b=l.querySelector('style[data-href~="'+kr(x.href)+'"]');if(b)return d.instance=b,fs(b),b;var D=f({},x,{"data-href":x.href,"data-precedence":x.precedence,href:null,precedence:null});return b=(l.ownerDocument||l).createElement("style"),fs(b),Zs(b,"style",D),w0(b,x.precedence,l),d.instance=b;case"stylesheet":D=Lc(x.href);var P=l.querySelector(th(D));if(P)return d.state.loading|=4,d.instance=P,fs(P),P;b=A5(x),(D=fa.get(D))&&Vb(b,D),P=(l.ownerDocument||l).createElement("link"),fs(P);var re=P;return re._p=new Promise(function(de,pe){re.onload=de,re.onerror=pe}),Zs(P,"link",b),d.state.loading|=4,w0(P,x.precedence,l),d.instance=P;case"script":return P=Pc(x.src),(D=l.querySelector(sh(P)))?(d.instance=D,fs(D),D):(b=x,(D=fa.get(P))&&(b=f({},x),Hb(b,D)),l=l.ownerDocument||l,D=l.createElement("script"),fs(D),Zs(D,"link",b),l.head.appendChild(D),d.instance=D);case"void":return null;default:throw Error(a(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(b=d.instance,d.state.loading|=4,w0(b,x.precedence,l));return d.instance}function w0(l,d,x){for(var b=x.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),D=b.length?b[b.length-1]:null,P=D,re=0;re<b.length;re++){var de=b[re];if(de.dataset.precedence===d)P=de;else if(P!==D)break}P?P.parentNode.insertBefore(l,P.nextSibling):(d=x.nodeType===9?x.head:x,d.insertBefore(l,d.firstChild))}function Vb(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function Hb(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var N0=null;function R5(l,d,x){if(N0===null){var b=new Map,D=N0=new Map;D.set(x,b)}else D=N0,b=D.get(x),b||(b=new Map,D.set(x,b));if(b.has(l))return b;for(b.set(l,null),x=x.getElementsByTagName(l),D=0;D<x.length;D++){var P=x[D];if(!(P[Mn]||P[Ps]||l==="link"&&P.getAttribute("rel")==="stylesheet")&&P.namespaceURI!=="http://www.w3.org/2000/svg"){var re=P.getAttribute(d)||"";re=l+re;var de=b.get(re);de?de.push(P):b.set(re,[P])}}return b}function M5(l,d,x){l=l.ownerDocument||l,l.head.insertBefore(x,d==="title"?l.querySelector("head > title"):null)}function JR(l,d,x){if(x===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return l=d.disabled,typeof d.precedence=="string"&&l==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function O5(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function eM(l,d,x,b){if(x.type==="stylesheet"&&(typeof b.media!="string"||matchMedia(b.media).matches!==!1)&&(x.state.loading&4)===0){if(x.instance===null){var D=Lc(b.href),P=d.querySelector(th(D));if(P){d=P._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(l.count++,l=_0.bind(l),d.then(l,l)),x.state.loading|=4,x.instance=P,fs(P);return}P=d.ownerDocument||d,b=A5(b),(D=fa.get(D))&&Vb(b,D),P=P.createElement("link"),fs(P);var re=P;re._p=new Promise(function(de,pe){re.onload=de,re.onerror=pe}),Zs(P,"link",b),x.instance=P}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(x,d),(d=x.state.preload)&&(x.state.loading&3)===0&&(l.count++,x=_0.bind(l),d.addEventListener("load",x),d.addEventListener("error",x))}}var qb=0;function tM(l,d){return l.stylesheets&&l.count===0&&S0(l,l.stylesheets),0<l.count||0<l.imgCount?function(x){var b=setTimeout(function(){if(l.stylesheets&&S0(l,l.stylesheets),l.unsuspend){var P=l.unsuspend;l.unsuspend=null,P()}},6e4+d);0<l.imgBytes&&qb===0&&(qb=62500*LR());var D=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&S0(l,l.stylesheets),l.unsuspend)){var P=l.unsuspend;l.unsuspend=null,P()}},(l.imgBytes>qb?50:800)+d);return l.unsuspend=x,function(){l.unsuspend=null,clearTimeout(b),clearTimeout(D)}}:null}function _0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)S0(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var k0=null;function S0(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,k0=new Map,d.forEach(sM,l),k0=null,_0.call(l))}function sM(l,d){if(!(d.state.loading&4)){var x=k0.get(l);if(x)var b=x.get(null);else{x=new Map,k0.set(l,x);for(var D=l.querySelectorAll("link[data-precedence],style[data-precedence]"),P=0;P<D.length;P++){var re=D[P];(re.nodeName==="LINK"||re.getAttribute("media")!=="not all")&&(x.set(re.dataset.precedence,re),b=re)}b&&x.set(null,b)}D=d.instance,re=D.getAttribute("data-precedence"),P=x.get(re)||b,P===b&&x.set(null,D),x.set(re,D),this.count++,b=_0.bind(this),D.addEventListener("load",b),D.addEventListener("error",b),P?P.parentNode.insertBefore(D,P.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(D,l.firstChild)),d.state.loading|=4}}var rh={$$typeof:S,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function rM(l,d,x,b,D,P,re,de,pe){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$d(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$d(0),this.hiddenUpdates=$d(null),this.identifierPrefix=b,this.onUncaughtError=D,this.onCaughtError=P,this.onRecoverableError=re,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=pe,this.incompleteTransitions=new Map}function L5(l,d,x,b,D,P,re,de,pe,we,Ae,Me){return l=new rM(l,d,x,re,pe,we,Ae,Me,de),d=1,P===!0&&(d|=24),P=Gr(3,null,null,d),l.current=P,P.stateNode=l,d=_g(),d.refCount++,l.pooledCache=d,d.refCount++,P.memoizedState={element:b,isDehydrated:x,cache:d},Tg(P),l}function P5(l){return l?(l=mc,l):mc}function B5(l,d,x,b,D,P){D=P5(D),b.context===null?b.context=D:b.pendingContext=D,b=Xi(d),b.payload={element:x},P=P===void 0?null:P,P!==null&&(b.callback=P),x=Zi(l,b,d),x!==null&&(Ar(x,l,d),Lu(x,l,d))}function F5(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var x=l.retryLane;l.retryLane=x!==0&&x<d?x:d}}function Wb(l,d){F5(l,d),(l=l.alternate)&&F5(l,d)}function z5(l){if(l.tag===13||l.tag===31){var d=Ql(l,67108864);d!==null&&Ar(d,l,67108864),Wb(l,67108864)}}function I5(l){if(l.tag===13||l.tag===31){var d=Jr();d=zl(d);var x=Ql(l,d);x!==null&&Ar(x,l,d),Wb(l,d)}}var C0=!0;function aM(l,d,x,b){var D=ee.T;ee.T=null;var P=se.p;try{se.p=2,Yb(l,d,x,b)}finally{se.p=P,ee.T=D}}function nM(l,d,x,b){var D=ee.T;ee.T=null;var P=se.p;try{se.p=8,Yb(l,d,x,b)}finally{se.p=P,ee.T=D}}function Yb(l,d,x,b){if(C0){var D=Gb(b);if(D===null)Mb(l,d,b,T0,x),U5(l,b);else if(lM(D,l,d,x,b))b.stopPropagation();else if(U5(l,b),d&4&&-1<iM.indexOf(l)){for(;D!==null;){var P=Ln(D);if(P!==null)switch(P.tag){case 3:if(P=P.stateNode,P.current.memoizedState.isDehydrated){var re=gr(P.pendingLanes);if(re!==0){var de=P;for(de.pendingLanes|=2,de.entangledLanes|=2;re;){var pe=1<<31-et(re);de.entanglements[1]|=pe,re&=~pe}on(P),(Et&6)===0&&(d0=Te()+500,Zu(0))}}break;case 31:case 13:de=Ql(P,2),de!==null&&Ar(de,P,2),h0(),Wb(P,2)}if(P=Gb(b),P===null&&Mb(l,d,b,T0,x),P===D)break;D=P}D!==null&&b.stopPropagation()}else Mb(l,d,b,null,x)}}function Gb(l){return l=rc(l),Kb(l)}var T0=null;function Kb(l){if(T0=null,l=On(l),l!==null){var d=i(l);if(d===null)l=null;else{var x=d.tag;if(x===13){if(l=o(d),l!==null)return l;l=null}else if(x===31){if(l=c(d),l!==null)return l;l=null}else if(x===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return T0=l,null}function $5(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ee()){case ze:return 2;case Ie:return 8;case Ye:case xs:return 32;case pr:return 268435456;default:return 32}default:return 32}}var Xb=!1,ol=null,cl=null,dl=null,ah=new Map,nh=new Map,ul=[],iM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function U5(l,d){switch(l){case"focusin":case"focusout":ol=null;break;case"dragenter":case"dragleave":cl=null;break;case"mouseover":case"mouseout":dl=null;break;case"pointerover":case"pointerout":ah.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":nh.delete(d.pointerId)}}function ih(l,d,x,b,D,P){return l===null||l.nativeEvent!==P?(l={blockedOn:d,domEventName:x,eventSystemFlags:b,nativeEvent:P,targetContainers:[D]},d!==null&&(d=Ln(d),d!==null&&z5(d)),l):(l.eventSystemFlags|=b,d=l.targetContainers,D!==null&&d.indexOf(D)===-1&&d.push(D),l)}function lM(l,d,x,b,D){switch(d){case"focusin":return ol=ih(ol,l,d,x,b,D),!0;case"dragenter":return cl=ih(cl,l,d,x,b,D),!0;case"mouseover":return dl=ih(dl,l,d,x,b,D),!0;case"pointerover":var P=D.pointerId;return ah.set(P,ih(ah.get(P)||null,l,d,x,b,D)),!0;case"gotpointercapture":return P=D.pointerId,nh.set(P,ih(nh.get(P)||null,l,d,x,b,D)),!0}return!1}function V5(l){var d=On(l.target);if(d!==null){var x=i(d);if(x!==null){if(d=x.tag,d===13){if(d=o(x),d!==null){l.blockedOn=d,ec(l.priority,function(){I5(x)});return}}else if(d===31){if(d=c(x),d!==null){l.blockedOn=d,ec(l.priority,function(){I5(x)});return}}else if(d===3&&x.stateNode.current.memoizedState.isDehydrated){l.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}l.blockedOn=null}function E0(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var x=Gb(l.nativeEvent);if(x===null){x=l.nativeEvent;var b=new x.constructor(x.type,x);nu=b,x.target.dispatchEvent(b),nu=null}else return d=Ln(x),d!==null&&z5(d),l.blockedOn=x,!1;d.shift()}return!0}function H5(l,d,x){E0(l)&&x.delete(d)}function oM(){Xb=!1,ol!==null&&E0(ol)&&(ol=null),cl!==null&&E0(cl)&&(cl=null),dl!==null&&E0(dl)&&(dl=null),ah.forEach(H5),nh.forEach(H5)}function A0(l,d){l.blockedOn===d&&(l.blockedOn=null,Xb||(Xb=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,oM)))}var D0=null;function q5(l){D0!==l&&(D0=l,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){D0===l&&(D0=null);for(var d=0;d<l.length;d+=3){var x=l[d],b=l[d+1],D=l[d+2];if(typeof b!="function"){if(Kb(b||x)===null)continue;break}var P=Ln(x);P!==null&&(l.splice(d,3),d-=3,Gg(P,{pending:!0,data:D,method:x.method,action:b},b,D))}}))}function Bc(l){function d(pe){return A0(pe,l)}ol!==null&&A0(ol,l),cl!==null&&A0(cl,l),dl!==null&&A0(dl,l),ah.forEach(d),nh.forEach(d);for(var x=0;x<ul.length;x++){var b=ul[x];b.blockedOn===l&&(b.blockedOn=null)}for(;0<ul.length&&(x=ul[0],x.blockedOn===null);)V5(x),x.blockedOn===null&&ul.shift();if(x=(l.ownerDocument||l).$$reactFormReplay,x!=null)for(b=0;b<x.length;b+=3){var D=x[b],P=x[b+1],re=D[Ws]||null;if(typeof P=="function")re||q5(x);else if(re){var de=null;if(P&&P.hasAttribute("formAction")){if(D=P,re=P[Ws]||null)de=re.formAction;else if(Kb(D)!==null)continue}else de=re.action;typeof de=="function"?x[b+1]=de:(x.splice(b,3),b-=3),q5(x)}}}function W5(){function l(P){P.canIntercept&&P.info==="react-transition"&&P.intercept({handler:function(){return new Promise(function(re){return D=re})},focusReset:"manual",scroll:"manual"})}function d(){D!==null&&(D(),D=null),b||setTimeout(x,20)}function x(){if(!b&&!navigation.transition){var P=navigation.currentEntry;P&&P.url!=null&&navigation.navigate(P.url,{state:P.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var b=!1,D=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",d),navigation.addEventListener("navigateerror",d),setTimeout(x,100),function(){b=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",d),navigation.removeEventListener("navigateerror",d),D!==null&&(D(),D=null)}}}function Zb(l){this._internalRoot=l}R0.prototype.render=Zb.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(a(409));var x=d.current,b=Jr();B5(x,b,l,d,null,null)},R0.prototype.unmount=Zb.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;B5(l.current,2,null,l,null,null),h0(),d[Rn]=null}};function R0(l){this._internalRoot=l}R0.prototype.unstable_scheduleHydration=function(l){if(l){var d=qd();l={blockedOn:null,target:l,priority:d};for(var x=0;x<ul.length&&d!==0&&d<ul[x].priority;x++);ul.splice(x,0,l),x===0&&V5(l)}};var Y5=t.version;if(Y5!=="19.2.0")throw Error(a(527,Y5,"19.2.0"));se.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(a(188)):(l=Object.keys(l).join(","),Error(a(268,l)));return l=h(d),l=l!==null?m(l):null,l=l===null?null:l.stateNode,l};var cM={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var M0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!M0.isDisabled&&M0.supportsFiber)try{Le=M0.inject(cM),He=M0}catch{}}return oh.createRoot=function(l,d){if(!n(l))throw Error(a(299));var x=!1,b="",D=e_,P=t_,re=s_;return d!=null&&(d.unstable_strictMode===!0&&(x=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onUncaughtError!==void 0&&(D=d.onUncaughtError),d.onCaughtError!==void 0&&(P=d.onCaughtError),d.onRecoverableError!==void 0&&(re=d.onRecoverableError)),d=L5(l,1,!1,null,null,x,b,null,D,P,re,W5),l[Rn]=d.current,Rb(l),new Zb(d)},oh.hydrateRoot=function(l,d,x){if(!n(l))throw Error(a(299));var b=!1,D="",P=e_,re=t_,de=s_,pe=null;return x!=null&&(x.unstable_strictMode===!0&&(b=!0),x.identifierPrefix!==void 0&&(D=x.identifierPrefix),x.onUncaughtError!==void 0&&(P=x.onUncaughtError),x.onCaughtError!==void 0&&(re=x.onCaughtError),x.onRecoverableError!==void 0&&(de=x.onRecoverableError),x.formState!==void 0&&(pe=x.formState)),d=L5(l,1,!0,d,x??null,b,D,pe,P,re,de,W5),d.context=P5(null),x=d.current,b=Jr(),b=zl(b),D=Xi(b),D.callback=null,Zi(x,D,b),x=b,d.current.lanes=x,Yt(d,x),on(d),l[Rn]=d.current,Rb(l),new R0(d)},oh.version="19.2.0",oh}var r4;function vM(){if(r4)return ey.exports;r4=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),ey.exports=yM(),ey.exports}var jM=vM();/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var a4="popstate";function wM(s={}){function t(a,n){let{pathname:i,search:o,hash:c}=a.location;return Uj("",{pathname:i,search:o,hash:c},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(a,n){return typeof n=="string"?n:em(n)}return _M(t,r,null,s)}function es(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function Ka(s,t){if(!s){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function NM(){return Math.random().toString(36).substring(2,10)}function n4(s,t){return{usr:s.state,key:s.key,idx:t}}function Uj(s,t,r=null,a){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof t=="string"?Dd(t):t,state:r,key:t&&t.key||a||NM()}}function em({pathname:s="/",search:t="",hash:r=""}){return t&&t!=="?"&&(s+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(s+=r.charAt(0)==="#"?r:"#"+r),s}function Dd(s){let t={};if(s){let r=s.indexOf("#");r>=0&&(t.hash=s.substring(r),s=s.substring(0,r));let a=s.indexOf("?");a>=0&&(t.search=s.substring(a),s=s.substring(0,a)),s&&(t.pathname=s)}return t}function _M(s,t,r,a={}){let{window:n=document.defaultView,v5Compat:i=!1}=a,o=n.history,c="POP",u=null,h=m();h==null&&(h=0,o.replaceState({...o.state,idx:h},""));function m(){return(o.state||{idx:null}).idx}function f(){c="POP";let w=m(),N=w==null?null:w-h;h=w,u&&u({action:c,location:y.location,delta:N})}function p(w,N){c="PUSH";let k=Uj(y.location,w,N);h=m()+1;let S=n4(k,h),_=y.createHref(k);try{o.pushState(S,"",_)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;n.location.assign(_)}i&&u&&u({action:c,location:y.location,delta:1})}function v(w,N){c="REPLACE";let k=Uj(y.location,w,N);h=m();let S=n4(k,h),_=y.createHref(k);o.replaceState(S,"",_),i&&u&&u({action:c,location:y.location,delta:0})}function g(w){return kM(w)}let y={get action(){return c},get location(){return s(n,o)},listen(w){if(u)throw new Error("A history only accepts one active listener");return n.addEventListener(a4,f),u=w,()=>{n.removeEventListener(a4,f),u=null}},createHref(w){return t(n,w)},createURL:g,encodeLocation(w){let N=g(w);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:p,replace:v,go(w){return o.go(w)}};return y}function kM(s,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),es(r,"No window.location.(origin|href) available to create URL");let a=typeof s=="string"?s:em(s);return a=a.replace(/ $/,"%20"),!t&&a.startsWith("//")&&(a=r+a),new URL(a,r)}function uT(s,t,r="/"){return SM(s,t,r,!1)}function SM(s,t,r,a){let n=typeof t=="string"?Dd(t):t,i=yi(n.pathname||"/",r);if(i==null)return null;let o=hT(s);CM(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let h=FM(i);c=PM(o[u],h,a)}return c}function hT(s,t=[],r=[],a="",n=!1){let i=(o,c,u=n,h)=>{let m={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(a)&&u)return;es(m.relativePath.startsWith(a),`Absolute route path "${m.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(a.length)}let f=gi([a,m.relativePath]),p=r.concat(m);o.children&&o.children.length>0&&(es(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),hT(o.children,t,p,f,u)),!(o.path==null&&!o.index)&&t.push({path:f,score:OM(f,o.index),routesMeta:p})};return s.forEach((o,c)=>{if(o.path===""||!o.path?.includes("?"))i(o,c);else for(let u of mT(o.path))i(o,c,!0,u)}),t}function mT(s){let t=s.split("/");if(t.length===0)return[];let[r,...a]=t,n=r.endsWith("?"),i=r.replace(/\?$/,"");if(a.length===0)return n?[i,""]:[i];let o=mT(a.join("/")),c=[];return c.push(...o.map(u=>u===""?i:[i,u].join("/"))),n&&c.push(...o),c.map(u=>s.startsWith("/")&&u===""?"/":u)}function CM(s){s.sort((t,r)=>t.score!==r.score?r.score-t.score:LM(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}var TM=/^:[\w-]+$/,EM=3,AM=2,DM=1,RM=10,MM=-2,i4=s=>s==="*";function OM(s,t){let r=s.split("/"),a=r.length;return r.some(i4)&&(a+=MM),t&&(a+=AM),r.filter(n=>!i4(n)).reduce((n,i)=>n+(TM.test(i)?EM:i===""?DM:RM),a)}function LM(s,t){return s.length===t.length&&s.slice(0,-1).every((a,n)=>a===t[n])?s[s.length-1]-t[t.length-1]:0}function PM(s,t,r=!1){let{routesMeta:a}=s,n={},i="/",o=[];for(let c=0;c<a.length;++c){let u=a[c],h=c===a.length-1,m=i==="/"?t:t.slice(i.length)||"/",f=Uf({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},m),p=u.route;if(!f&&h&&r&&!a[a.length-1].route.index&&(f=Uf({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},m)),!f)return null;Object.assign(n,f.params),o.push({params:n,pathname:gi([i,f.pathname]),pathnameBase:UM(gi([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=gi([i,f.pathnameBase]))}return o}function Uf(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[r,a]=BM(s.path,s.caseSensitive,s.end),n=t.match(r);if(!n)return null;let i=n[0],o=i.replace(/(.)\/+$/,"$1"),c=n.slice(1);return{params:a.reduce((h,{paramName:m,isOptional:f},p)=>{if(m==="*"){let g=c[p]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const v=c[p];return f&&!v?h[m]=void 0:h[m]=(v||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:o,pattern:s}}function BM(s,t=!1,r=!0){Ka(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let a=[],n="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(a.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(a.push({paramName:"*"}),n+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":s!==""&&s!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),a]}function FM(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ka(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),s}}function yi(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=s.charAt(r);return a&&a!=="/"?null:s.slice(r)||"/"}function zM(s,t="/"){let{pathname:r,search:a="",hash:n=""}=typeof s=="string"?Dd(s):s;return{pathname:r?r.startsWith("/")?r:IM(r,t):t,search:VM(a),hash:HM(n)}}function IM(s,t){let r=t.replace(/\/+$/,"").split("/");return s.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function ay(s,t,r,a){return`Cannot include a '${s}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function $M(s){return s.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function eN(s){let t=$M(s);return t.map((r,a)=>a===t.length-1?r.pathname:r.pathnameBase)}function tN(s,t,r,a=!1){let n;typeof s=="string"?n=Dd(s):(n={...s},es(!n.pathname||!n.pathname.includes("?"),ay("?","pathname","search",n)),es(!n.pathname||!n.pathname.includes("#"),ay("#","pathname","hash",n)),es(!n.search||!n.search.includes("#"),ay("#","search","hash",n)));let i=s===""||n.pathname==="",o=i?"/":n.pathname,c;if(o==null)c=r;else{let f=t.length-1;if(!a&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;n.pathname=p.join("/")}c=f>=0?t[f]:"/"}let u=zM(n,c),h=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(h||m)&&(u.pathname+="/"),u}var gi=s=>s.join("/").replace(/\/\/+/g,"/"),UM=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),VM=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,HM=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function qM(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var xT=["POST","PUT","PATCH","DELETE"];new Set(xT);var WM=["GET",...xT];new Set(WM);var Rd=j.createContext(null);Rd.displayName="DataRouter";var mp=j.createContext(null);mp.displayName="DataRouterState";j.createContext(!1);var fT=j.createContext({isTransitioning:!1});fT.displayName="ViewTransition";var YM=j.createContext(new Map);YM.displayName="Fetchers";var GM=j.createContext(null);GM.displayName="Await";var Za=j.createContext(null);Za.displayName="Navigation";var km=j.createContext(null);km.displayName="Location";var Ma=j.createContext({outlet:null,matches:[],isDataRoute:!1});Ma.displayName="Route";var sN=j.createContext(null);sN.displayName="RouteError";function KM(s,{relative:t}={}){es(Md(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:a}=j.useContext(Za),{hash:n,pathname:i,search:o}=Sm(s,{relative:t}),c=i;return r!=="/"&&(c=i==="/"?r:gi([r,i])),a.createHref({pathname:c,search:o,hash:n})}function Md(){return j.useContext(km)!=null}function Si(){return es(Md(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(km).location}var pT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function gT(s){j.useContext(Za).static||j.useLayoutEffect(s)}function Oa(){let{isDataRoute:s}=j.useContext(Ma);return s?c9():XM()}function XM(){es(Md(),"useNavigate() may be used only in the context of a <Router> component.");let s=j.useContext(Rd),{basename:t,navigator:r}=j.useContext(Za),{matches:a}=j.useContext(Ma),{pathname:n}=Si(),i=JSON.stringify(eN(a)),o=j.useRef(!1);return gT(()=>{o.current=!0}),j.useCallback((u,h={})=>{if(Ka(o.current,pT),!o.current)return;if(typeof u=="number"){r.go(u);return}let m=tN(u,JSON.parse(i),n,h.relative==="path");s==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:gi([t,m.pathname])),(h.replace?r.replace:r.push)(m,h.state,h)},[t,r,i,n,s])}var bT=j.createContext(null);function Ko(){return j.useContext(bT)}function ZM(s){let t=j.useContext(Ma).outlet;return j.useMemo(()=>t&&j.createElement(bT.Provider,{value:s},t),[t,s])}function yT(){let{matches:s}=j.useContext(Ma),t=s[s.length-1];return t?t.params:{}}function Sm(s,{relative:t}={}){let{matches:r}=j.useContext(Ma),{pathname:a}=Si(),n=JSON.stringify(eN(r));return j.useMemo(()=>tN(s,JSON.parse(n),a,t==="path"),[s,n,a,t])}function QM(s,t){return vT(s,t)}function vT(s,t,r,a,n){es(Md(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=j.useContext(Za),{matches:o}=j.useContext(Ma),c=o[o.length-1],u=c?c.params:{},h=c?c.pathname:"/",m=c?c.pathnameBase:"/",f=c&&c.route;{let k=f&&f.path||"";jT(h,!f||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let p=Si(),v;if(t){let k=typeof t=="string"?Dd(t):t;es(m==="/"||k.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${k.pathname}" was given in the \`location\` prop.`),v=k}else v=p;let g=v.pathname||"/",y=g;if(m!=="/"){let k=m.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(k.length).join("/")}let w=uT(s,{pathname:y});Ka(f||w!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Ka(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=r9(w&&w.map(k=>Object.assign({},k,{params:Object.assign({},u,k.params),pathname:gi([m,i.encodeLocation?i.encodeLocation(k.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?m:gi([m,i.encodeLocation?i.encodeLocation(k.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathnameBase])})),o,r,a,n);return t&&N?j.createElement(km.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},N):N}function JM(){let s=o9(),t=qM(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),r=s instanceof Error?s.stack:null,a="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:a},i={padding:"2px 4px",backgroundColor:a},o=null;return console.error("Error handled by React Router default ErrorBoundary:",s),o=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:i},"ErrorBoundary")," or"," ",j.createElement("code",{style:i},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),r?j.createElement("pre",{style:n},r):null,o)}var e9=j.createElement(JM,null),t9=class extends j.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,t){return t.location!==s.location||t.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:t.error,location:t.location,revalidation:s.revalidation||t.revalidation}}componentDidCatch(s,t){this.props.unstable_onError?this.props.unstable_onError(s,t):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?j.createElement(Ma.Provider,{value:this.props.routeContext},j.createElement(sN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function s9({routeContext:s,match:t,children:r}){let a=j.useContext(Rd);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),j.createElement(Ma.Provider,{value:s},r)}function r9(s,t=[],r=null,a=null,n=null){if(s==null){if(!r)return null;if(r.errors)s=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)s=r.matches;else return null}let i=s,o=r?.errors;if(o!=null){let h=i.findIndex(m=>m.route.id&&o?.[m.route.id]!==void 0);es(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,h+1))}let c=!1,u=-1;if(r)for(let h=0;h<i.length;h++){let m=i[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=h),m.route.id){let{loaderData:f,errors:p}=r,v=m.route.loader&&!f.hasOwnProperty(m.route.id)&&(!p||p[m.route.id]===void 0);if(m.route.lazy||v){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((h,m,f)=>{let p,v=!1,g=null,y=null;r&&(p=o&&m.route.id?o[m.route.id]:void 0,g=m.route.errorElement||e9,c&&(u<0&&f===0?(jT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,y=null):u===f&&(v=!0,y=m.route.hydrateFallbackElement||null)));let w=t.concat(i.slice(0,f+1)),N=()=>{let k;return p?k=g:v?k=y:m.route.Component?k=j.createElement(m.route.Component,null):m.route.element?k=m.route.element:k=h,j.createElement(s9,{match:m,routeContext:{outlet:h,matches:w,isDataRoute:r!=null},children:k})};return r&&(m.route.ErrorBoundary||m.route.errorElement||f===0)?j.createElement(t9,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:N(),routeContext:{outlet:null,matches:w,isDataRoute:!0},unstable_onError:a}):N()},null)}function rN(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function a9(s){let t=j.useContext(Rd);return es(t,rN(s)),t}function n9(s){let t=j.useContext(mp);return es(t,rN(s)),t}function i9(s){let t=j.useContext(Ma);return es(t,rN(s)),t}function aN(s){let t=i9(s),r=t.matches[t.matches.length-1];return es(r.route.id,`${s} can only be used on routes that contain a unique "id"`),r.route.id}function l9(){return aN("useRouteId")}function o9(){let s=j.useContext(sN),t=n9("useRouteError"),r=aN("useRouteError");return s!==void 0?s:t.errors?.[r]}function c9(){let{router:s}=a9("useNavigate"),t=aN("useNavigate"),r=j.useRef(!1);return gT(()=>{r.current=!0}),j.useCallback(async(n,i={})=>{Ka(r.current,pT),r.current&&(typeof n=="number"?s.navigate(n):await s.navigate(n,{fromRouteId:t,...i}))},[s,t])}var l4={};function jT(s,t,r){!t&&!l4[s]&&(l4[s]=!0,Ka(!1,r))}j.memo(d9);function d9({routes:s,future:t,state:r,unstable_onError:a}){return vT(s,void 0,r,a,t)}function wT({to:s,replace:t,state:r,relative:a}){es(Md(),"<Navigate> may be used only in the context of a <Router> component.");let{static:n}=j.useContext(Za);Ka(!n,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=j.useContext(Ma),{pathname:o}=Si(),c=Oa(),u=tN(s,eN(i),o,a==="path"),h=JSON.stringify(u);return j.useEffect(()=>{c(JSON.parse(h),{replace:t,state:r,relative:a})},[c,h,a,t,r]),null}function nN(s){return ZM(s.context)}function nt(s){es(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function u9({basename:s="/",children:t=null,location:r,navigationType:a="POP",navigator:n,static:i=!1}){es(!Md(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=s.replace(/^\/*/,"/"),c=j.useMemo(()=>({basename:o,navigator:n,static:i,future:{}}),[o,n,i]);typeof r=="string"&&(r=Dd(r));let{pathname:u="/",search:h="",hash:m="",state:f=null,key:p="default"}=r,v=j.useMemo(()=>{let g=yi(u,o);return g==null?null:{location:{pathname:g,search:h,hash:m,state:f,key:p},navigationType:a}},[o,u,h,m,f,p,a]);return Ka(v!=null,`<Router basename="${o}"> is not able to match the URL "${u}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:j.createElement(Za.Provider,{value:c},j.createElement(km.Provider,{children:t,value:v}))}function h9({children:s,location:t}){return QM(Vj(s),t)}function Vj(s,t=[]){let r=[];return j.Children.forEach(s,(a,n)=>{if(!j.isValidElement(a))return;let i=[...t,n];if(a.type===j.Fragment){r.push.apply(r,Vj(a.props.children,i));return}es(a.type===nt,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),es(!a.props.index||!a.props.children,"An index route cannot have child routes.");let o={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=Vj(a.props.children,i)),r.push(o)}),r}var Nf="get",_f="application/x-www-form-urlencoded";function xp(s){return s!=null&&typeof s.tagName=="string"}function m9(s){return xp(s)&&s.tagName.toLowerCase()==="button"}function x9(s){return xp(s)&&s.tagName.toLowerCase()==="form"}function f9(s){return xp(s)&&s.tagName.toLowerCase()==="input"}function p9(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function g9(s,t){return s.button===0&&(!t||t==="_self")&&!p9(s)}var L0=null;function b9(){if(L0===null)try{new FormData(document.createElement("form"),0),L0=!1}catch{L0=!0}return L0}var y9=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ny(s){return s!=null&&!y9.has(s)?(Ka(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_f}"`),null):s}function v9(s,t){let r,a,n,i,o;if(x9(s)){let c=s.getAttribute("action");a=c?yi(c,t):null,r=s.getAttribute("method")||Nf,n=ny(s.getAttribute("enctype"))||_f,i=new FormData(s)}else if(m9(s)||f9(s)&&(s.type==="submit"||s.type==="image")){let c=s.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=s.getAttribute("formaction")||c.getAttribute("action");if(a=u?yi(u,t):null,r=s.getAttribute("formmethod")||c.getAttribute("method")||Nf,n=ny(s.getAttribute("formenctype"))||ny(c.getAttribute("enctype"))||_f,i=new FormData(c,s),!b9()){let{name:h,type:m,value:f}=s;if(m==="image"){let p=h?`${h}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else h&&i.append(h,f)}}else{if(xp(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Nf,a=null,n=_f,o=s}return i&&n==="text/plain"&&(o=i,i=void 0),{action:a,method:r.toLowerCase(),encType:n,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function iN(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function j9(s,t,r){let a=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return a.pathname==="/"?a.pathname=`_root.${r}`:t&&yi(a.pathname,t)==="/"?a.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${r}`,a}async function w9(s,t){if(s.id in t)return t[s.id];try{let r=await import(s.module);return t[s.id]=r,r}catch(r){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function N9(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function _9(s,t,r){let a=await Promise.all(s.map(async n=>{let i=t.routes[n.route.id];if(i){let o=await w9(i,r);return o.links?o.links():[]}return[]}));return T9(a.flat(1).filter(N9).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function o4(s,t,r,a,n,i){let o=(u,h)=>r[h]?u.route.id!==r[h].route.id:!0,c=(u,h)=>r[h].pathname!==u.pathname||r[h].route.path?.endsWith("*")&&r[h].params["*"]!==u.params["*"];return i==="assets"?t.filter((u,h)=>o(u,h)||c(u,h)):i==="data"?t.filter((u,h)=>{let m=a.routes[u.route.id];if(!m||!m.hasLoader)return!1;if(o(u,h)||c(u,h))return!0;if(u.route.shouldRevalidate){let f=u.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function k9(s,t,{includeHydrateFallback:r}={}){return S9(s.map(a=>{let n=t.routes[a.route.id];if(!n)return[];let i=[n.module];return n.clientActionModule&&(i=i.concat(n.clientActionModule)),n.clientLoaderModule&&(i=i.concat(n.clientLoaderModule)),r&&n.hydrateFallbackModule&&(i=i.concat(n.hydrateFallbackModule)),n.imports&&(i=i.concat(n.imports)),i}).flat(1))}function S9(s){return[...new Set(s)]}function C9(s){let t={},r=Object.keys(s).sort();for(let a of r)t[a]=s[a];return t}function T9(s,t){let r=new Set;return new Set(t),s.reduce((a,n)=>{let i=JSON.stringify(C9(n));return r.has(i)||(r.add(i),a.push({key:i,link:n})),a},[])}function NT(){let s=j.useContext(Rd);return iN(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function E9(){let s=j.useContext(mp);return iN(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var lN=j.createContext(void 0);lN.displayName="FrameworkContext";function _T(){let s=j.useContext(lN);return iN(s,"You must render this element inside a <HydratedRouter> element"),s}function A9(s,t){let r=j.useContext(lN),[a,n]=j.useState(!1),[i,o]=j.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:h,onMouseLeave:m,onTouchStart:f}=t,p=j.useRef(null);j.useEffect(()=>{if(s==="render"&&o(!0),s==="viewport"){let y=N=>{N.forEach(k=>{o(k.isIntersecting)})},w=new IntersectionObserver(y,{threshold:.5});return p.current&&w.observe(p.current),()=>{w.disconnect()}}},[s]),j.useEffect(()=>{if(a){let y=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(y)}}},[a]);let v=()=>{n(!0)},g=()=>{n(!1),o(!1)};return r?s!=="intent"?[i,p,{}]:[i,p,{onFocus:ch(c,v),onBlur:ch(u,g),onMouseEnter:ch(h,v),onMouseLeave:ch(m,g),onTouchStart:ch(f,v)}]:[!1,p,{}]}function ch(s,t){return r=>{s&&s(r),r.defaultPrevented||t(r)}}function D9({page:s,...t}){let{router:r}=NT(),a=j.useMemo(()=>uT(r.routes,s,r.basename),[r.routes,s,r.basename]);return a?j.createElement(M9,{page:s,matches:a,...t}):null}function R9(s){let{manifest:t,routeModules:r}=_T(),[a,n]=j.useState([]);return j.useEffect(()=>{let i=!1;return _9(s,t,r).then(o=>{i||n(o)}),()=>{i=!0}},[s,t,r]),a}function M9({page:s,matches:t,...r}){let a=Si(),{manifest:n,routeModules:i}=_T(),{basename:o}=NT(),{loaderData:c,matches:u}=E9(),h=j.useMemo(()=>o4(s,t,u,n,a,"data"),[s,t,u,n,a]),m=j.useMemo(()=>o4(s,t,u,n,a,"assets"),[s,t,u,n,a]),f=j.useMemo(()=>{if(s===a.pathname+a.search+a.hash)return[];let g=new Set,y=!1;if(t.forEach(N=>{let k=n.routes[N.route.id];!k||!k.hasLoader||(!h.some(S=>S.route.id===N.route.id)&&N.route.id in c&&i[N.route.id]?.shouldRevalidate||k.hasClientLoader?y=!0:g.add(N.route.id))}),g.size===0)return[];let w=j9(s,o,"data");return y&&g.size>0&&w.searchParams.set("_routes",t.filter(N=>g.has(N.route.id)).map(N=>N.route.id).join(",")),[w.pathname+w.search]},[o,c,a,n,h,t,s,i]),p=j.useMemo(()=>k9(m,n),[m,n]),v=R9(m);return j.createElement(j.Fragment,null,f.map(g=>j.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...r})),p.map(g=>j.createElement("link",{key:g,rel:"modulepreload",href:g,...r})),v.map(({key:g,link:y})=>j.createElement("link",{key:g,nonce:r.nonce,...y})))}function O9(...s){return t=>{s.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var kT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{kT&&(window.__reactRouterVersion="7.9.5")}catch{}function L9({basename:s,children:t,window:r}){let a=j.useRef();a.current==null&&(a.current=wM({window:r,v5Compat:!0}));let n=a.current,[i,o]=j.useState({action:n.action,location:n.location}),c=j.useCallback(u=>{j.startTransition(()=>o(u))},[o]);return j.useLayoutEffect(()=>n.listen(c),[n,c]),j.createElement(u9,{basename:s,children:t,location:i.location,navigationType:i.action,navigator:n})}var ST=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oN=j.forwardRef(function({onClick:t,discover:r="render",prefetch:a="none",relative:n,reloadDocument:i,replace:o,state:c,target:u,to:h,preventScrollReset:m,viewTransition:f,...p},v){let{basename:g}=j.useContext(Za),y=typeof h=="string"&&ST.test(h),w,N=!1;if(typeof h=="string"&&y&&(w=h,kT))try{let C=new URL(window.location.href),A=h.startsWith("//")?new URL(C.protocol+h):new URL(h),X=yi(A.pathname,g);A.origin===C.origin&&X!=null?h=X+A.search+A.hash:N=!0}catch{Ka(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=KM(h,{relative:n}),[S,_,T]=A9(a,p),E=F9(h,{replace:o,state:c,target:u,preventScrollReset:m,relative:n,viewTransition:f});function z(C){t&&t(C),C.defaultPrevented||E(C)}let O=j.createElement("a",{...p,...T,href:w||k,onClick:N||i?t:z,ref:O9(v,_),target:u,"data-discover":!y&&r==="render"?"true":void 0});return S&&!y?j.createElement(j.Fragment,null,O,j.createElement(D9,{page:k})):O});oN.displayName="Link";var CT=j.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:a="",end:n=!1,style:i,to:o,viewTransition:c,children:u,...h},m){let f=Sm(o,{relative:h.relative}),p=Si(),v=j.useContext(mp),{navigator:g,basename:y}=j.useContext(Za),w=v!=null&&V9(f)&&c===!0,N=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,k=p.pathname,S=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;r||(k=k.toLowerCase(),S=S?S.toLowerCase():null,N=N.toLowerCase()),S&&y&&(S=yi(S,y)||S);const _=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let T=k===N||!n&&k.startsWith(N)&&k.charAt(_)==="/",E=S!=null&&(S===N||!n&&S.startsWith(N)&&S.charAt(N.length)==="/"),z={isActive:T,isPending:E,isTransitioning:w},O=T?t:void 0,C;typeof a=="function"?C=a(z):C=[a,T?"active":null,E?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let A=typeof i=="function"?i(z):i;return j.createElement(oN,{...h,"aria-current":O,className:C,ref:m,style:A,to:o,viewTransition:c},typeof u=="function"?u(z):u)});CT.displayName="NavLink";var P9=j.forwardRef(({discover:s="render",fetcherKey:t,navigate:r,reloadDocument:a,replace:n,state:i,method:o=Nf,action:c,onSubmit:u,relative:h,preventScrollReset:m,viewTransition:f,...p},v)=>{let g=$9(),y=U9(c,{relative:h}),w=o.toLowerCase()==="get"?"get":"post",N=typeof c=="string"&&ST.test(c),k=S=>{if(u&&u(S),S.defaultPrevented)return;S.preventDefault();let _=S.nativeEvent.submitter,T=_?.getAttribute("formmethod")||o;g(_||S.currentTarget,{fetcherKey:t,method:T,navigate:r,replace:n,state:i,relative:h,preventScrollReset:m,viewTransition:f})};return j.createElement("form",{ref:v,method:w,action:y,onSubmit:a?u:k,...p,"data-discover":!N&&s==="render"?"true":void 0})});P9.displayName="Form";function B9(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function TT(s){let t=j.useContext(Rd);return es(t,B9(s)),t}function F9(s,{target:t,replace:r,state:a,preventScrollReset:n,relative:i,viewTransition:o}={}){let c=Oa(),u=Si(),h=Sm(s,{relative:i});return j.useCallback(m=>{if(g9(m,t)){m.preventDefault();let f=r!==void 0?r:em(u)===em(h);c(s,{replace:f,state:a,preventScrollReset:n,relative:i,viewTransition:o})}},[u,c,h,r,a,t,s,n,i,o])}var z9=0,I9=()=>`__${String(++z9)}__`;function $9(){let{router:s}=TT("useSubmit"),{basename:t}=j.useContext(Za),r=l9();return j.useCallback(async(a,n={})=>{let{action:i,method:o,encType:c,formData:u,body:h}=v9(a,t);if(n.navigate===!1){let m=n.fetcherKey||I9();await s.fetch(m,r,n.action||i,{preventScrollReset:n.preventScrollReset,formData:u,body:h,formMethod:n.method||o,formEncType:n.encType||c,flushSync:n.flushSync})}else await s.navigate(n.action||i,{preventScrollReset:n.preventScrollReset,formData:u,body:h,formMethod:n.method||o,formEncType:n.encType||c,replace:n.replace,state:n.state,fromRouteId:r,flushSync:n.flushSync,viewTransition:n.viewTransition})},[s,t,r])}function U9(s,{relative:t}={}){let{basename:r}=j.useContext(Za),a=j.useContext(Ma);es(a,"useFormAction must be used inside a RouteContext");let[n]=a.matches.slice(-1),i={...Sm(s||".",{relative:t})},o=Si();if(s==null){i.search=o.search;let c=new URLSearchParams(i.search),u=c.getAll("index");if(u.some(m=>m==="")){c.delete("index"),u.filter(f=>f).forEach(f=>c.append("index",f));let m=c.toString();i.search=m?`?${m}`:""}}return(!s||s===".")&&n.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:gi([r,i.pathname])),em(i)}function V9(s,{relative:t}={}){let r=j.useContext(fT);es(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=TT("useViewTransitionState"),n=Sm(s,{relative:t});if(!r.isTransitioning)return!1;let i=yi(r.currentLocation.pathname,a)||r.currentLocation.pathname,o=yi(r.nextLocation.pathname,a)||r.nextLocation.pathname;return Uf(n.pathname,o)!=null||Uf(n.pathname,i)!=null}const ET=j.createContext(void 0),H9=s=>{switch(s){case"colorful":return{text:"text-gray-900",card:"bg-white",border:"border-gray-200",input:"bg-white",primary:"bg-blue-600",hover:"hover:bg-gray-50"};case"monochrome":return{text:"text-gray-900",card:"bg-white",border:"border-gray-300",input:"bg-gray-50",primary:"bg-gray-700",hover:"hover:bg-gray-100"};case"dark":return{text:"text-gray-100",card:"bg-gray-800",border:"border-gray-700",input:"bg-gray-700",primary:"bg-gray-600",hover:"hover:bg-gray-700"};case"blue":return{text:"text-gray-900",card:"bg-white",border:"border-blue-200",input:"bg-blue-50",primary:"bg-blue-600",hover:"hover:bg-blue-50"};case"green":return{text:"text-gray-900",card:"bg-white",border:"border-green-200",input:"bg-green-50",primary:"bg-green-600",hover:"hover:bg-green-50"}}},Cm=()=>{const s=j.useContext(ET);if(!s)throw new Error("useTheme must be used within ThemeProvider");return s},q9=({children:s})=>{const[t,r]=j.useState(()=>localStorage.getItem("admin-theme")||"colorful"),a=H9(t);j.useEffect(()=>{document.body.className=`theme-${t}`,localStorage.setItem("admin-theme",t)},[t]);const n=i=>{r(i)};return e.jsx(ET.Provider,{value:{theme:t,setTheme:n,currentTheme:a},children:s})},W9={colorful:{name:"",description:"     ",primary:"#3b82f6",secondary:"#6366f1",accent:"#8b5cf6"},monochrome:{name:"-",description:"  ",primary:"#374151",secondary:"#6b7280",accent:"#9ca3af"},dark:{name:"",description:"      ",primary:"#1f2937",secondary:"#374151",accent:"#4b5563"},blue:{name:"",description:"  ",primary:"#0ea5e9",secondary:"#0284c7",accent:"#0369a1"},green:{name:"",description:"  ",primary:"#10b981",secondary:"#059669",accent:"#047857"}},c4=[{name:"Inter",value:"Inter",description:"  ",category:"normal"},{name:"Roboto",value:"Roboto",description:"  ",category:"normal"},{name:"Open Sans",value:"Open Sans",description:"  ",category:"normal"},{name:"Poppins",value:"Poppins",description:" ",category:"normal"},{name:"Montserrat",value:"Montserrat",description:" ",category:"normal"},{name:"Nunito",value:"Nunito",description:" ",category:"normal"},{name:"IBM Plex Sans",value:"IBM Plex Sans",description:" ",category:"normal"},{name:"Manrope",value:"Manrope",description:" ",category:"normal"},{name:"Space Grotesk",value:"Space Grotesk",description:" ",category:"normal"},{name:"Red Hat Display",value:"Red Hat Display",description:" Tech",category:"normal"},{name:"Archivo",value:"Archivo",description:" ",category:"normal"},{name:"Public Sans",value:"Public Sans",description:" ",category:"normal"},{name:"Rubik",value:"Rubik",description:" ",category:"normal"},{name:"Quicksand",value:"Quicksand",description:" ",category:"normal"},{name:"Raleway",value:"Raleway",description:" ",category:"normal"},{name:"Source Sans 3",value:"Source Sans 3",description:" Adobe Systems",category:"normal"},{name:"Jost",value:"Jost",description:" Futura-style",category:"normal"},{name:"Karla",value:"Karla",description:" ",category:"normal"},{name:"PT Sans",value:"PT Sans",description:" ",category:"normal"},{name:"Fira Sans",value:"Fira Sans",description:" ",category:"normal"},{name:"Ubuntu",value:"Ubuntu",description:" Ubuntu",category:"normal"},{name:"Exo 2",value:"Exo 2",description:" ",category:"normal"},{name:"Press Start 2P",value:"Press Start 2P",description:"8-  ",category:"strange"},{name:"Comfortaa",value:"Comfortaa",description:" ",category:"strange"},{name:"Philosopher",value:"Philosopher",description:" ",category:"strange"},{name:"Play",value:"Play",description:" ",category:"strange"},{name:"Podkova",value:"Podkova",description:"  ",category:"strange"},{name:"Cuprum",value:"Cuprum",description:" ",category:"strange"},{name:"Bad Script",value:"Bad Script",description:" ",category:"strange"},{name:"Lobster",value:"Lobster",description:" ",category:"strange"},{name:"Pacifico",value:"Pacifico",description:" ",category:"strange"},{name:"Stalinist One",value:"Stalinist One",description:" ",category:"strange"},{name:"Underdog",value:"Underdog",description:" ",category:"strange"},{name:"Yeseva One",value:"Yeseva One",description:" ",category:"strange"},{name:"Marck Script",value:"Marck Script",description:" ",category:"strange"},{name:"Kelly Slab",value:"Kelly Slab",description:" ",category:"strange"},{name:"Ruslan Display",value:"Ruslan Display",description:" ",category:"strange"}],AT=j.createContext(void 0),Y9=({children:s})=>{const[t,r]=j.useState(()=>localStorage.getItem("selectedFont")||"IBM Plex Sans");j.useEffect(()=>{document.body.style.fontFamily=`'${t}', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif`,localStorage.setItem("selectedFont",t)},[t]);const a=n=>{r(n)};return e.jsx(AT.Provider,{value:{currentFont:t,setFont:a},children:s})},G9=()=>{const s=j.useContext(AT);if(!s)throw new Error("useFont must be used within FontProvider");return s};function DT(s,t){return function(){return s.apply(t,arguments)}}const{toString:K9}=Object.prototype,{getPrototypeOf:cN}=Object,{iterator:fp,toStringTag:RT}=Symbol,pp=(s=>t=>{const r=K9.call(t);return s[r]||(s[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Qa=s=>(s=s.toLowerCase(),t=>pp(t)===s),gp=s=>t=>typeof t===s,{isArray:Od}=Array,md=gp("undefined");function Tm(s){return s!==null&&!md(s)&&s.constructor!==null&&!md(s.constructor)&&Br(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const MT=Qa("ArrayBuffer");function X9(s){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(s):t=s&&s.buffer&&MT(s.buffer),t}const Z9=gp("string"),Br=gp("function"),OT=gp("number"),Em=s=>s!==null&&typeof s=="object",Q9=s=>s===!0||s===!1,kf=s=>{if(pp(s)!=="object")return!1;const t=cN(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(RT in s)&&!(fp in s)},J9=s=>{if(!Em(s)||Tm(s))return!1;try{return Object.keys(s).length===0&&Object.getPrototypeOf(s)===Object.prototype}catch{return!1}},eO=Qa("Date"),tO=Qa("File"),sO=Qa("Blob"),rO=Qa("FileList"),aO=s=>Em(s)&&Br(s.pipe),nO=s=>{let t;return s&&(typeof FormData=="function"&&s instanceof FormData||Br(s.append)&&((t=pp(s))==="formdata"||t==="object"&&Br(s.toString)&&s.toString()==="[object FormData]"))},iO=Qa("URLSearchParams"),[lO,oO,cO,dO]=["ReadableStream","Request","Response","Headers"].map(Qa),uO=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Am(s,t,{allOwnKeys:r=!1}={}){if(s===null||typeof s>"u")return;let a,n;if(typeof s!="object"&&(s=[s]),Od(s))for(a=0,n=s.length;a<n;a++)t.call(null,s[a],a,s);else{if(Tm(s))return;const i=r?Object.getOwnPropertyNames(s):Object.keys(s),o=i.length;let c;for(a=0;a<o;a++)c=i[a],t.call(null,s[c],c,s)}}function LT(s,t){if(Tm(s))return null;t=t.toLowerCase();const r=Object.keys(s);let a=r.length,n;for(;a-- >0;)if(n=r[a],t===n.toLowerCase())return n;return null}const To=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,PT=s=>!md(s)&&s!==To;function Hj(){const{caseless:s,skipUndefined:t}=PT(this)&&this||{},r={},a=(n,i)=>{const o=s&&LT(r,i)||i;kf(r[o])&&kf(n)?r[o]=Hj(r[o],n):kf(n)?r[o]=Hj({},n):Od(n)?r[o]=n.slice():(!t||!md(n))&&(r[o]=n)};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&Am(arguments[n],a);return r}const hO=(s,t,r,{allOwnKeys:a}={})=>(Am(t,(n,i)=>{r&&Br(n)?s[i]=DT(n,r):s[i]=n},{allOwnKeys:a}),s),mO=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),xO=(s,t,r,a)=>{s.prototype=Object.create(t.prototype,a),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:t.prototype}),r&&Object.assign(s.prototype,r)},fO=(s,t,r,a)=>{let n,i,o;const c={};if(t=t||{},s==null)return t;do{for(n=Object.getOwnPropertyNames(s),i=n.length;i-- >0;)o=n[i],(!a||a(o,s,t))&&!c[o]&&(t[o]=s[o],c[o]=!0);s=r!==!1&&cN(s)}while(s&&(!r||r(s,t))&&s!==Object.prototype);return t},pO=(s,t,r)=>{s=String(s),(r===void 0||r>s.length)&&(r=s.length),r-=t.length;const a=s.indexOf(t,r);return a!==-1&&a===r},gO=s=>{if(!s)return null;if(Od(s))return s;let t=s.length;if(!OT(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=s[t];return r},bO=(s=>t=>s&&t instanceof s)(typeof Uint8Array<"u"&&cN(Uint8Array)),yO=(s,t)=>{const a=(s&&s[fp]).call(s);let n;for(;(n=a.next())&&!n.done;){const i=n.value;t.call(s,i[0],i[1])}},vO=(s,t)=>{let r;const a=[];for(;(r=s.exec(t))!==null;)a.push(r);return a},jO=Qa("HTMLFormElement"),wO=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,a,n){return a.toUpperCase()+n}),d4=(({hasOwnProperty:s})=>(t,r)=>s.call(t,r))(Object.prototype),NO=Qa("RegExp"),BT=(s,t)=>{const r=Object.getOwnPropertyDescriptors(s),a={};Am(r,(n,i)=>{let o;(o=t(n,i,s))!==!1&&(a[i]=o||n)}),Object.defineProperties(s,a)},_O=s=>{BT(s,(t,r)=>{if(Br(s)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const a=s[r];if(Br(a)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},kO=(s,t)=>{const r={},a=n=>{n.forEach(i=>{r[i]=!0})};return Od(s)?a(s):a(String(s).split(t)),r},SO=()=>{},CO=(s,t)=>s!=null&&Number.isFinite(s=+s)?s:t;function TO(s){return!!(s&&Br(s.append)&&s[RT]==="FormData"&&s[fp])}const EO=s=>{const t=new Array(10),r=(a,n)=>{if(Em(a)){if(t.indexOf(a)>=0)return;if(Tm(a))return a;if(!("toJSON"in a)){t[n]=a;const i=Od(a)?[]:{};return Am(a,(o,c)=>{const u=r(o,n+1);!md(u)&&(i[c]=u)}),t[n]=void 0,i}}return a};return r(s,0)},AO=Qa("AsyncFunction"),DO=s=>s&&(Em(s)||Br(s))&&Br(s.then)&&Br(s.catch),FT=((s,t)=>s?setImmediate:t?((r,a)=>(To.addEventListener("message",({source:n,data:i})=>{n===To&&i===r&&a.length&&a.shift()()},!1),n=>{a.push(n),To.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Br(To.postMessage)),RO=typeof queueMicrotask<"u"?queueMicrotask.bind(To):typeof process<"u"&&process.nextTick||FT,MO=s=>s!=null&&Br(s[fp]),Se={isArray:Od,isArrayBuffer:MT,isBuffer:Tm,isFormData:nO,isArrayBufferView:X9,isString:Z9,isNumber:OT,isBoolean:Q9,isObject:Em,isPlainObject:kf,isEmptyObject:J9,isReadableStream:lO,isRequest:oO,isResponse:cO,isHeaders:dO,isUndefined:md,isDate:eO,isFile:tO,isBlob:sO,isRegExp:NO,isFunction:Br,isStream:aO,isURLSearchParams:iO,isTypedArray:bO,isFileList:rO,forEach:Am,merge:Hj,extend:hO,trim:uO,stripBOM:mO,inherits:xO,toFlatObject:fO,kindOf:pp,kindOfTest:Qa,endsWith:pO,toArray:gO,forEachEntry:yO,matchAll:vO,isHTMLForm:jO,hasOwnProperty:d4,hasOwnProp:d4,reduceDescriptors:BT,freezeMethods:_O,toObjectSet:kO,toCamelCase:wO,noop:SO,toFiniteNumber:CO,findKey:LT,global:To,isContextDefined:PT,isSpecCompliantForm:TO,toJSONObject:EO,isAsyncFn:AO,isThenable:DO,setImmediate:FT,asap:RO,isIterable:MO};function ct(s,t,r,a,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),a&&(this.request=a),n&&(this.response=n,this.status=n.status?n.status:null)}Se.inherits(ct,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Se.toJSONObject(this.config),code:this.code,status:this.status}}});const zT=ct.prototype,IT={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{IT[s]={value:s}});Object.defineProperties(ct,IT);Object.defineProperty(zT,"isAxiosError",{value:!0});ct.from=(s,t,r,a,n,i)=>{const o=Object.create(zT);Se.toFlatObject(s,o,function(m){return m!==Error.prototype},h=>h!=="isAxiosError");const c=s&&s.message?s.message:"Error",u=t==null&&s?s.code:t;return ct.call(o,c,u,r,a,n),s&&o.cause==null&&Object.defineProperty(o,"cause",{value:s,configurable:!0}),o.name=s&&s.name||"Error",i&&Object.assign(o,i),o};const OO=null;function qj(s){return Se.isPlainObject(s)||Se.isArray(s)}function $T(s){return Se.endsWith(s,"[]")?s.slice(0,-2):s}function u4(s,t,r){return s?s.concat(t).map(function(n,i){return n=$T(n),!r&&i?"["+n+"]":n}).join(r?".":""):t}function LO(s){return Se.isArray(s)&&!s.some(qj)}const PO=Se.toFlatObject(Se,{},null,function(t){return/^is[A-Z]/.test(t)});function bp(s,t,r){if(!Se.isObject(s))throw new TypeError("target must be an object");t=t||new FormData,r=Se.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,w){return!Se.isUndefined(w[y])});const a=r.metaTokens,n=r.visitor||m,i=r.dots,o=r.indexes,u=(r.Blob||typeof Blob<"u"&&Blob)&&Se.isSpecCompliantForm(t);if(!Se.isFunction(n))throw new TypeError("visitor must be a function");function h(g){if(g===null)return"";if(Se.isDate(g))return g.toISOString();if(Se.isBoolean(g))return g.toString();if(!u&&Se.isBlob(g))throw new ct("Blob is not supported. Use a Buffer instead.");return Se.isArrayBuffer(g)||Se.isTypedArray(g)?u&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function m(g,y,w){let N=g;if(g&&!w&&typeof g=="object"){if(Se.endsWith(y,"{}"))y=a?y:y.slice(0,-2),g=JSON.stringify(g);else if(Se.isArray(g)&&LO(g)||(Se.isFileList(g)||Se.endsWith(y,"[]"))&&(N=Se.toArray(g)))return y=$T(y),N.forEach(function(S,_){!(Se.isUndefined(S)||S===null)&&t.append(o===!0?u4([y],_,i):o===null?y:y+"[]",h(S))}),!1}return qj(g)?!0:(t.append(u4(w,y,i),h(g)),!1)}const f=[],p=Object.assign(PO,{defaultVisitor:m,convertValue:h,isVisitable:qj});function v(g,y){if(!Se.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+y.join("."));f.push(g),Se.forEach(g,function(N,k){(!(Se.isUndefined(N)||N===null)&&n.call(t,N,Se.isString(k)?k.trim():k,y,p))===!0&&v(N,y?y.concat(k):[k])}),f.pop()}}if(!Se.isObject(s))throw new TypeError("data must be an object");return v(s),t}function h4(s){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(a){return t[a]})}function dN(s,t){this._pairs=[],s&&bp(s,this,t)}const UT=dN.prototype;UT.append=function(t,r){this._pairs.push([t,r])};UT.toString=function(t){const r=t?function(a){return t.call(this,a,h4)}:h4;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function BO(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function VT(s,t,r){if(!t)return s;const a=r&&r.encode||BO;Se.isFunction(r)&&(r={serialize:r});const n=r&&r.serialize;let i;if(n?i=n(t,r):i=Se.isURLSearchParams(t)?t.toString():new dN(t,r).toString(a),i){const o=s.indexOf("#");o!==-1&&(s=s.slice(0,o)),s+=(s.indexOf("?")===-1?"?":"&")+i}return s}class m4{constructor(){this.handlers=[]}use(t,r,a){return this.handlers.push({fulfilled:t,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Se.forEach(this.handlers,function(a){a!==null&&t(a)})}}const HT={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},FO=typeof URLSearchParams<"u"?URLSearchParams:dN,zO=typeof FormData<"u"?FormData:null,IO=typeof Blob<"u"?Blob:null,$O={isBrowser:!0,classes:{URLSearchParams:FO,FormData:zO,Blob:IO},protocols:["http","https","file","blob","url","data"]},uN=typeof window<"u"&&typeof document<"u",Wj=typeof navigator=="object"&&navigator||void 0,UO=uN&&(!Wj||["ReactNative","NativeScript","NS"].indexOf(Wj.product)<0),VO=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",HO=uN&&window.location.href||"http://localhost",qO=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:uN,hasStandardBrowserEnv:UO,hasStandardBrowserWebWorkerEnv:VO,navigator:Wj,origin:HO},Symbol.toStringTag,{value:"Module"})),or={...qO,...$O};function WO(s,t){return bp(s,new or.classes.URLSearchParams,{visitor:function(r,a,n,i){return or.isNode&&Se.isBuffer(r)?(this.append(a,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function YO(s){return Se.matchAll(/\w+|\[(\w*)]/g,s).map(t=>t[0]==="[]"?"":t[1]||t[0])}function GO(s){const t={},r=Object.keys(s);let a;const n=r.length;let i;for(a=0;a<n;a++)i=r[a],t[i]=s[i];return t}function qT(s){function t(r,a,n,i){let o=r[i++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),u=i>=r.length;return o=!o&&Se.isArray(n)?n.length:o,u?(Se.hasOwnProp(n,o)?n[o]=[n[o],a]:n[o]=a,!c):((!n[o]||!Se.isObject(n[o]))&&(n[o]=[]),t(r,a,n[o],i)&&Se.isArray(n[o])&&(n[o]=GO(n[o])),!c)}if(Se.isFormData(s)&&Se.isFunction(s.entries)){const r={};return Se.forEachEntry(s,(a,n)=>{t(YO(a),n,r,0)}),r}return null}function KO(s,t,r){if(Se.isString(s))try{return(t||JSON.parse)(s),Se.trim(s)}catch(a){if(a.name!=="SyntaxError")throw a}return(r||JSON.stringify)(s)}const Dm={transitional:HT,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const a=r.getContentType()||"",n=a.indexOf("application/json")>-1,i=Se.isObject(t);if(i&&Se.isHTMLForm(t)&&(t=new FormData(t)),Se.isFormData(t))return n?JSON.stringify(qT(t)):t;if(Se.isArrayBuffer(t)||Se.isBuffer(t)||Se.isStream(t)||Se.isFile(t)||Se.isBlob(t)||Se.isReadableStream(t))return t;if(Se.isArrayBufferView(t))return t.buffer;if(Se.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(i){if(a.indexOf("application/x-www-form-urlencoded")>-1)return WO(t,this.formSerializer).toString();if((c=Se.isFileList(t))||a.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return bp(c?{"files[]":t}:t,u&&new u,this.formSerializer)}}return i||n?(r.setContentType("application/json",!1),KO(t)):t}],transformResponse:[function(t){const r=this.transitional||Dm.transitional,a=r&&r.forcedJSONParsing,n=this.responseType==="json";if(Se.isResponse(t)||Se.isReadableStream(t))return t;if(t&&Se.isString(t)&&(a&&!this.responseType||n)){const o=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(t,this.parseReviver)}catch(c){if(o)throw c.name==="SyntaxError"?ct.from(c,ct.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:or.classes.FormData,Blob:or.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Se.forEach(["delete","get","head","post","put","patch"],s=>{Dm.headers[s]={}});const XO=Se.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ZO=s=>{const t={};let r,a,n;return s&&s.split(`
`).forEach(function(o){n=o.indexOf(":"),r=o.substring(0,n).trim().toLowerCase(),a=o.substring(n+1).trim(),!(!r||t[r]&&XO[r])&&(r==="set-cookie"?t[r]?t[r].push(a):t[r]=[a]:t[r]=t[r]?t[r]+", "+a:a)}),t},x4=Symbol("internals");function dh(s){return s&&String(s).trim().toLowerCase()}function Sf(s){return s===!1||s==null?s:Se.isArray(s)?s.map(Sf):String(s)}function QO(s){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=r.exec(s);)t[a[1]]=a[2];return t}const JO=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function iy(s,t,r,a,n){if(Se.isFunction(a))return a.call(this,t,r);if(n&&(t=r),!!Se.isString(t)){if(Se.isString(a))return t.indexOf(a)!==-1;if(Se.isRegExp(a))return a.test(t)}}function eL(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,a)=>r.toUpperCase()+a)}function tL(s,t){const r=Se.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(s,a+r,{value:function(n,i,o){return this[a].call(this,t,n,i,o)},configurable:!0})})}let Fr=class{constructor(t){t&&this.set(t)}set(t,r,a){const n=this;function i(c,u,h){const m=dh(u);if(!m)throw new Error("header name must be a non-empty string");const f=Se.findKey(n,m);(!f||n[f]===void 0||h===!0||h===void 0&&n[f]!==!1)&&(n[f||u]=Sf(c))}const o=(c,u)=>Se.forEach(c,(h,m)=>i(h,m,u));if(Se.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(Se.isString(t)&&(t=t.trim())&&!JO(t))o(ZO(t),r);else if(Se.isObject(t)&&Se.isIterable(t)){let c={},u,h;for(const m of t){if(!Se.isArray(m))throw TypeError("Object iterator must return a key-value pair");c[h=m[0]]=(u=c[h])?Se.isArray(u)?[...u,m[1]]:[u,m[1]]:m[1]}o(c,r)}else t!=null&&i(r,t,a);return this}get(t,r){if(t=dh(t),t){const a=Se.findKey(this,t);if(a){const n=this[a];if(!r)return n;if(r===!0)return QO(n);if(Se.isFunction(r))return r.call(this,n,a);if(Se.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=dh(t),t){const a=Se.findKey(this,t);return!!(a&&this[a]!==void 0&&(!r||iy(this,this[a],a,r)))}return!1}delete(t,r){const a=this;let n=!1;function i(o){if(o=dh(o),o){const c=Se.findKey(a,o);c&&(!r||iy(a,a[c],c,r))&&(delete a[c],n=!0)}}return Se.isArray(t)?t.forEach(i):i(t),n}clear(t){const r=Object.keys(this);let a=r.length,n=!1;for(;a--;){const i=r[a];(!t||iy(this,this[i],i,t,!0))&&(delete this[i],n=!0)}return n}normalize(t){const r=this,a={};return Se.forEach(this,(n,i)=>{const o=Se.findKey(a,i);if(o){r[o]=Sf(n),delete r[i];return}const c=t?eL(i):String(i).trim();c!==i&&delete r[i],r[c]=Sf(n),a[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return Se.forEach(this,(a,n)=>{a!=null&&a!==!1&&(r[n]=t&&Se.isArray(a)?a.join(", "):a)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const a=new this(t);return r.forEach(n=>a.set(n)),a}static accessor(t){const a=(this[x4]=this[x4]={accessors:{}}).accessors,n=this.prototype;function i(o){const c=dh(o);a[c]||(tL(n,o),a[c]=!0)}return Se.isArray(t)?t.forEach(i):i(t),this}};Fr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Se.reduceDescriptors(Fr.prototype,({value:s},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>s,set(a){this[r]=a}}});Se.freezeMethods(Fr);function ly(s,t){const r=this||Dm,a=t||r,n=Fr.from(a.headers);let i=a.data;return Se.forEach(s,function(c){i=c.call(r,i,n.normalize(),t?t.status:void 0)}),n.normalize(),i}function WT(s){return!!(s&&s.__CANCEL__)}function Ld(s,t,r){ct.call(this,s??"canceled",ct.ERR_CANCELED,t,r),this.name="CanceledError"}Se.inherits(Ld,ct,{__CANCEL__:!0});function YT(s,t,r){const a=r.config.validateStatus;!r.status||!a||a(r.status)?s(r):t(new ct("Request failed with status code "+r.status,[ct.ERR_BAD_REQUEST,ct.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function sL(s){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return t&&t[1]||""}function rL(s,t){s=s||10;const r=new Array(s),a=new Array(s);let n=0,i=0,o;return t=t!==void 0?t:1e3,function(u){const h=Date.now(),m=a[i];o||(o=h),r[n]=u,a[n]=h;let f=i,p=0;for(;f!==n;)p+=r[f++],f=f%s;if(n=(n+1)%s,n===i&&(i=(i+1)%s),h-o<t)return;const v=m&&h-m;return v?Math.round(p*1e3/v):void 0}}function aL(s,t){let r=0,a=1e3/t,n,i;const o=(h,m=Date.now())=>{r=m,n=null,i&&(clearTimeout(i),i=null),s(...h)};return[(...h)=>{const m=Date.now(),f=m-r;f>=a?o(h,m):(n=h,i||(i=setTimeout(()=>{i=null,o(n)},a-f)))},()=>n&&o(n)]}const Vf=(s,t,r=3)=>{let a=0;const n=rL(50,250);return aL(i=>{const o=i.loaded,c=i.lengthComputable?i.total:void 0,u=o-a,h=n(u),m=o<=c;a=o;const f={loaded:o,total:c,progress:c?o/c:void 0,bytes:u,rate:h||void 0,estimated:h&&c&&m?(c-o)/h:void 0,event:i,lengthComputable:c!=null,[t?"download":"upload"]:!0};s(f)},r)},f4=(s,t)=>{const r=s!=null;return[a=>t[0]({lengthComputable:r,total:s,loaded:a}),t[1]]},p4=s=>(...t)=>Se.asap(()=>s(...t)),nL=or.hasStandardBrowserEnv?((s,t)=>r=>(r=new URL(r,or.origin),s.protocol===r.protocol&&s.host===r.host&&(t||s.port===r.port)))(new URL(or.origin),or.navigator&&/(msie|trident)/i.test(or.navigator.userAgent)):()=>!0,iL=or.hasStandardBrowserEnv?{write(s,t,r,a,n,i,o){if(typeof document>"u")return;const c=[`${s}=${encodeURIComponent(t)}`];Se.isNumber(r)&&c.push(`expires=${new Date(r).toUTCString()}`),Se.isString(a)&&c.push(`path=${a}`),Se.isString(n)&&c.push(`domain=${n}`),i===!0&&c.push("secure"),Se.isString(o)&&c.push(`SameSite=${o}`),document.cookie=c.join("; ")},read(s){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+s+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(s){this.write(s,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function lL(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function oL(s,t){return t?s.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):s}function GT(s,t,r){let a=!lL(t);return s&&(a||r==!1)?oL(s,t):t}const g4=s=>s instanceof Fr?{...s}:s;function Vo(s,t){t=t||{};const r={};function a(h,m,f,p){return Se.isPlainObject(h)&&Se.isPlainObject(m)?Se.merge.call({caseless:p},h,m):Se.isPlainObject(m)?Se.merge({},m):Se.isArray(m)?m.slice():m}function n(h,m,f,p){if(Se.isUndefined(m)){if(!Se.isUndefined(h))return a(void 0,h,f,p)}else return a(h,m,f,p)}function i(h,m){if(!Se.isUndefined(m))return a(void 0,m)}function o(h,m){if(Se.isUndefined(m)){if(!Se.isUndefined(h))return a(void 0,h)}else return a(void 0,m)}function c(h,m,f){if(f in t)return a(h,m);if(f in s)return a(void 0,h)}const u={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(h,m,f)=>n(g4(h),g4(m),f,!0)};return Se.forEach(Object.keys({...s,...t}),function(m){const f=u[m]||n,p=f(s[m],t[m],m);Se.isUndefined(p)&&f!==c||(r[m]=p)}),r}const KT=s=>{const t=Vo({},s);let{data:r,withXSRFToken:a,xsrfHeaderName:n,xsrfCookieName:i,headers:o,auth:c}=t;if(t.headers=o=Fr.from(o),t.url=VT(GT(t.baseURL,t.url,t.allowAbsoluteUrls),s.params,s.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),Se.isFormData(r)){if(or.hasStandardBrowserEnv||or.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(Se.isFunction(r.getHeaders)){const u=r.getHeaders(),h=["content-type","content-length"];Object.entries(u).forEach(([m,f])=>{h.includes(m.toLowerCase())&&o.set(m,f)})}}if(or.hasStandardBrowserEnv&&(a&&Se.isFunction(a)&&(a=a(t)),a||a!==!1&&nL(t.url))){const u=n&&i&&iL.read(i);u&&o.set(n,u)}return t},cL=typeof XMLHttpRequest<"u",dL=cL&&function(s){return new Promise(function(r,a){const n=KT(s);let i=n.data;const o=Fr.from(n.headers).normalize();let{responseType:c,onUploadProgress:u,onDownloadProgress:h}=n,m,f,p,v,g;function y(){v&&v(),g&&g(),n.cancelToken&&n.cancelToken.unsubscribe(m),n.signal&&n.signal.removeEventListener("abort",m)}let w=new XMLHttpRequest;w.open(n.method.toUpperCase(),n.url,!0),w.timeout=n.timeout;function N(){if(!w)return;const S=Fr.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),T={data:!c||c==="text"||c==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:S,config:s,request:w};YT(function(z){r(z),y()},function(z){a(z),y()},T),w=null}"onloadend"in w?w.onloadend=N:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(N)},w.onabort=function(){w&&(a(new ct("Request aborted",ct.ECONNABORTED,s,w)),w=null)},w.onerror=function(_){const T=_&&_.message?_.message:"Network Error",E=new ct(T,ct.ERR_NETWORK,s,w);E.event=_||null,a(E),w=null},w.ontimeout=function(){let _=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const T=n.transitional||HT;n.timeoutErrorMessage&&(_=n.timeoutErrorMessage),a(new ct(_,T.clarifyTimeoutError?ct.ETIMEDOUT:ct.ECONNABORTED,s,w)),w=null},i===void 0&&o.setContentType(null),"setRequestHeader"in w&&Se.forEach(o.toJSON(),function(_,T){w.setRequestHeader(T,_)}),Se.isUndefined(n.withCredentials)||(w.withCredentials=!!n.withCredentials),c&&c!=="json"&&(w.responseType=n.responseType),h&&([p,g]=Vf(h,!0),w.addEventListener("progress",p)),u&&w.upload&&([f,v]=Vf(u),w.upload.addEventListener("progress",f),w.upload.addEventListener("loadend",v)),(n.cancelToken||n.signal)&&(m=S=>{w&&(a(!S||S.type?new Ld(null,s,w):S),w.abort(),w=null)},n.cancelToken&&n.cancelToken.subscribe(m),n.signal&&(n.signal.aborted?m():n.signal.addEventListener("abort",m)));const k=sL(n.url);if(k&&or.protocols.indexOf(k)===-1){a(new ct("Unsupported protocol "+k+":",ct.ERR_BAD_REQUEST,s));return}w.send(i||null)})},uL=(s,t)=>{const{length:r}=s=s?s.filter(Boolean):[];if(t||r){let a=new AbortController,n;const i=function(h){if(!n){n=!0,c();const m=h instanceof Error?h:this.reason;a.abort(m instanceof ct?m:new Ld(m instanceof Error?m.message:m))}};let o=t&&setTimeout(()=>{o=null,i(new ct(`timeout ${t} of ms exceeded`,ct.ETIMEDOUT))},t);const c=()=>{s&&(o&&clearTimeout(o),o=null,s.forEach(h=>{h.unsubscribe?h.unsubscribe(i):h.removeEventListener("abort",i)}),s=null)};s.forEach(h=>h.addEventListener("abort",i));const{signal:u}=a;return u.unsubscribe=()=>Se.asap(c),u}},hL=function*(s,t){let r=s.byteLength;if(r<t){yield s;return}let a=0,n;for(;a<r;)n=a+t,yield s.slice(a,n),a=n},mL=async function*(s,t){for await(const r of xL(s))yield*hL(r,t)},xL=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const t=s.getReader();try{for(;;){const{done:r,value:a}=await t.read();if(r)break;yield a}}finally{await t.cancel()}},b4=(s,t,r,a)=>{const n=mL(s,t);let i=0,o,c=u=>{o||(o=!0,a&&a(u))};return new ReadableStream({async pull(u){try{const{done:h,value:m}=await n.next();if(h){c(),u.close();return}let f=m.byteLength;if(r){let p=i+=f;r(p)}u.enqueue(new Uint8Array(m))}catch(h){throw c(h),h}},cancel(u){return c(u),n.return()}},{highWaterMark:2})},y4=64*1024,{isFunction:P0}=Se,fL=(({Request:s,Response:t})=>({Request:s,Response:t}))(Se.global),{ReadableStream:v4,TextEncoder:j4}=Se.global,w4=(s,...t)=>{try{return!!s(...t)}catch{return!1}},pL=s=>{s=Se.merge.call({skipUndefined:!0},fL,s);const{fetch:t,Request:r,Response:a}=s,n=t?P0(t):typeof fetch=="function",i=P0(r),o=P0(a);if(!n)return!1;const c=n&&P0(v4),u=n&&(typeof j4=="function"?(g=>y=>g.encode(y))(new j4):async g=>new Uint8Array(await new r(g).arrayBuffer())),h=i&&c&&w4(()=>{let g=!1;const y=new r(or.origin,{body:new v4,method:"POST",get duplex(){return g=!0,"half"}}).headers.has("Content-Type");return g&&!y}),m=o&&c&&w4(()=>Se.isReadableStream(new a("").body)),f={stream:m&&(g=>g.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(g=>{!f[g]&&(f[g]=(y,w)=>{let N=y&&y[g];if(N)return N.call(y);throw new ct(`Response type '${g}' is not supported`,ct.ERR_NOT_SUPPORT,w)})});const p=async g=>{if(g==null)return 0;if(Se.isBlob(g))return g.size;if(Se.isSpecCompliantForm(g))return(await new r(or.origin,{method:"POST",body:g}).arrayBuffer()).byteLength;if(Se.isArrayBufferView(g)||Se.isArrayBuffer(g))return g.byteLength;if(Se.isURLSearchParams(g)&&(g=g+""),Se.isString(g))return(await u(g)).byteLength},v=async(g,y)=>{const w=Se.toFiniteNumber(g.getContentLength());return w??p(y)};return async g=>{let{url:y,method:w,data:N,signal:k,cancelToken:S,timeout:_,onDownloadProgress:T,onUploadProgress:E,responseType:z,headers:O,withCredentials:C="same-origin",fetchOptions:A}=KT(g),X=t||fetch;z=z?(z+"").toLowerCase():"text";let I=uL([k,S&&S.toAbortSignal()],_),V=null;const R=I&&I.unsubscribe&&(()=>{I.unsubscribe()});let H;try{if(E&&h&&w!=="get"&&w!=="head"&&(H=await v(O,N))!==0){let K=new r(y,{method:"POST",body:N,duplex:"half"}),$;if(Se.isFormData(N)&&($=K.headers.get("content-type"))&&O.setContentType($),K.body){const[ie,ne]=f4(H,Vf(p4(E)));N=b4(K.body,y4,ie,ne)}}Se.isString(C)||(C=C?"include":"omit");const ee=i&&"credentials"in r.prototype,se={...A,signal:I,method:w.toUpperCase(),headers:O.normalize().toJSON(),body:N,duplex:"half",credentials:ee?C:void 0};V=i&&new r(y,se);let W=await(i?X(V,A):X(y,se));const te=m&&(z==="stream"||z==="response");if(m&&(T||te&&R)){const K={};["status","statusText","headers"].forEach(oe=>{K[oe]=W[oe]});const $=Se.toFiniteNumber(W.headers.get("content-length")),[ie,ne]=T&&f4($,Vf(p4(T),!0))||[];W=new a(b4(W.body,y4,ie,()=>{ne&&ne(),R&&R()}),K)}z=z||"text";let J=await f[Se.findKey(f,z)||"text"](W,g);return!te&&R&&R(),await new Promise((K,$)=>{YT(K,$,{data:J,headers:Fr.from(W.headers),status:W.status,statusText:W.statusText,config:g,request:V})})}catch(ee){throw R&&R(),ee&&ee.name==="TypeError"&&/Load failed|fetch/i.test(ee.message)?Object.assign(new ct("Network Error",ct.ERR_NETWORK,g,V),{cause:ee.cause||ee}):ct.from(ee,ee&&ee.code,g,V)}}},gL=new Map,XT=s=>{let t=s&&s.env||{};const{fetch:r,Request:a,Response:n}=t,i=[a,n,r];let o=i.length,c=o,u,h,m=gL;for(;c--;)u=i[c],h=m.get(u),h===void 0&&m.set(u,h=c?new Map:pL(t)),m=h;return h};XT();const hN={http:OO,xhr:dL,fetch:{get:XT}};Se.forEach(hN,(s,t)=>{if(s){try{Object.defineProperty(s,"name",{value:t})}catch{}Object.defineProperty(s,"adapterName",{value:t})}});const N4=s=>`- ${s}`,bL=s=>Se.isFunction(s)||s===null||s===!1;function yL(s,t){s=Se.isArray(s)?s:[s];const{length:r}=s;let a,n;const i={};for(let o=0;o<r;o++){a=s[o];let c;if(n=a,!bL(a)&&(n=hN[(c=String(a)).toLowerCase()],n===void 0))throw new ct(`Unknown adapter '${c}'`);if(n&&(Se.isFunction(n)||(n=n.get(t))))break;i[c||"#"+o]=n}if(!n){const o=Object.entries(i).map(([u,h])=>`adapter ${u} `+(h===!1?"is not supported by the environment":"is not available in the build"));let c=r?o.length>1?`since :
`+o.map(N4).join(`
`):" "+N4(o[0]):"as no adapter specified";throw new ct("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return n}const ZT={getAdapter:yL,adapters:hN};function oy(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new Ld(null,s)}function _4(s){return oy(s),s.headers=Fr.from(s.headers),s.data=ly.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),ZT.getAdapter(s.adapter||Dm.adapter,s)(s).then(function(a){return oy(s),a.data=ly.call(s,s.transformResponse,a),a.headers=Fr.from(a.headers),a},function(a){return WT(a)||(oy(s),a&&a.response&&(a.response.data=ly.call(s,s.transformResponse,a.response),a.response.headers=Fr.from(a.response.headers))),Promise.reject(a)})}const QT="1.13.1",yp={};["object","boolean","number","function","string","symbol"].forEach((s,t)=>{yp[s]=function(a){return typeof a===s||"a"+(t<1?"n ":" ")+s}});const k4={};yp.transitional=function(t,r,a){function n(i,o){return"[Axios v"+QT+"] Transitional option '"+i+"'"+o+(a?". "+a:"")}return(i,o,c)=>{if(t===!1)throw new ct(n(o," has been removed"+(r?" in "+r:"")),ct.ERR_DEPRECATED);return r&&!k4[o]&&(k4[o]=!0,console.warn(n(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,o,c):!0}};yp.spelling=function(t){return(r,a)=>(console.warn(`${a} is likely a misspelling of ${t}`),!0)};function vL(s,t,r){if(typeof s!="object")throw new ct("options must be an object",ct.ERR_BAD_OPTION_VALUE);const a=Object.keys(s);let n=a.length;for(;n-- >0;){const i=a[n],o=t[i];if(o){const c=s[i],u=c===void 0||o(c,i,s);if(u!==!0)throw new ct("option "+i+" must be "+u,ct.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ct("Unknown option "+i,ct.ERR_BAD_OPTION)}}const Cf={assertOptions:vL,validators:yp},cn=Cf.validators;let Lo=class{constructor(t){this.defaults=t||{},this.interceptors={request:new m4,response:new m4}}async request(t,r){try{return await this._request(t,r)}catch(a){if(a instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{a.stack?i&&!String(a.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+i):a.stack=i}catch{}}throw a}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Vo(this.defaults,r);const{transitional:a,paramsSerializer:n,headers:i}=r;a!==void 0&&Cf.assertOptions(a,{silentJSONParsing:cn.transitional(cn.boolean),forcedJSONParsing:cn.transitional(cn.boolean),clarifyTimeoutError:cn.transitional(cn.boolean)},!1),n!=null&&(Se.isFunction(n)?r.paramsSerializer={serialize:n}:Cf.assertOptions(n,{encode:cn.function,serialize:cn.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Cf.assertOptions(r,{baseUrl:cn.spelling("baseURL"),withXsrfToken:cn.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&Se.merge(i.common,i[r.method]);i&&Se.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),r.headers=Fr.concat(o,i);const c=[];let u=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(r)===!1||(u=u&&y.synchronous,c.unshift(y.fulfilled,y.rejected))});const h=[];this.interceptors.response.forEach(function(y){h.push(y.fulfilled,y.rejected)});let m,f=0,p;if(!u){const g=[_4.bind(this),void 0];for(g.unshift(...c),g.push(...h),p=g.length,m=Promise.resolve(r);f<p;)m=m.then(g[f++],g[f++]);return m}p=c.length;let v=r;for(;f<p;){const g=c[f++],y=c[f++];try{v=g(v)}catch(w){y.call(this,w);break}}try{m=_4.call(this,v)}catch(g){return Promise.reject(g)}for(f=0,p=h.length;f<p;)m=m.then(h[f++],h[f++]);return m}getUri(t){t=Vo(this.defaults,t);const r=GT(t.baseURL,t.url,t.allowAbsoluteUrls);return VT(r,t.params,t.paramsSerializer)}};Se.forEach(["delete","get","head","options"],function(t){Lo.prototype[t]=function(r,a){return this.request(Vo(a||{},{method:t,url:r,data:(a||{}).data}))}});Se.forEach(["post","put","patch"],function(t){function r(a){return function(i,o,c){return this.request(Vo(c||{},{method:t,headers:a?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Lo.prototype[t]=r(),Lo.prototype[t+"Form"]=r(!0)});let jL=class JT{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const a=this;this.promise.then(n=>{if(!a._listeners)return;let i=a._listeners.length;for(;i-- >0;)a._listeners[i](n);a._listeners=null}),this.promise.then=n=>{let i;const o=new Promise(c=>{a.subscribe(c),i=c}).then(n);return o.cancel=function(){a.unsubscribe(i)},o},t(function(i,o,c){a.reason||(a.reason=new Ld(i,o,c),r(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=a=>{t.abort(a)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new JT(function(n){t=n}),cancel:t}}};function wL(s){return function(r){return s.apply(null,r)}}function NL(s){return Se.isObject(s)&&s.isAxiosError===!0}const Yj={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Yj).forEach(([s,t])=>{Yj[t]=s});function eE(s){const t=new Lo(s),r=DT(Lo.prototype.request,t);return Se.extend(r,Lo.prototype,t,{allOwnKeys:!0}),Se.extend(r,t,null,{allOwnKeys:!0}),r.create=function(n){return eE(Vo(s,n))},r}const ws=eE(Dm);ws.Axios=Lo;ws.CanceledError=Ld;ws.CancelToken=jL;ws.isCancel=WT;ws.VERSION=QT;ws.toFormData=bp;ws.AxiosError=ct;ws.Cancel=ws.CanceledError;ws.all=function(t){return Promise.all(t)};ws.spread=wL;ws.isAxiosError=NL;ws.mergeConfig=Vo;ws.AxiosHeaders=Fr;ws.formToJSON=s=>qT(Se.isHTMLForm(s)?new FormData(s):s);ws.getAdapter=ZT.getAdapter;ws.HttpStatusCode=Yj;ws.default=ws;const{Axios:hae,AxiosError:mae,CanceledError:xae,isCancel:fae,CancelToken:pae,VERSION:gae,all:bae,Cancel:yae,isAxiosError:vae,spread:jae,toFormData:wae,AxiosHeaders:Nae,HttpStatusCode:_ae,formToJSON:kae,getAdapter:Sae,mergeConfig:Cae}=ws,S4={baseURL:"",timeout:1e4},fe=ws.create({baseURL:S4.baseURL,timeout:S4.timeout,headers:{"Content-Type":"application/json"}});fe.interceptors.request.use(s=>{const t=localStorage.getItem("auth");if(t)try{const{username:r,password:a}=JSON.parse(t),n=`Basic ${btoa(`${r}:${a}`)}`;s.headers.Authorization=n,console.log(" Auth added for:",r)}catch(r){console.error(" Error parsing auth from localStorage:",r)}else console.log(" No auth in localStorage - request will be unauthorized");return s},s=>(console.error(" Axios interceptor error:",s),Promise.reject(s)));fe.interceptors.response.use(s=>s,s=>{if(s.response?.status===401&&(console.error(" 401 Unauthorized - redirecting to login"),localStorage.removeItem("auth"),!window.location.pathname.includes("/login"))){const t="/admin/login";window.location.href=t}return Promise.reject(s)});const vs={async getDashboardMetrics(){return(await fe.get("/admin/reports/dashboard-metrics")).data},async getFinanceCategories(s){return(await fe.get(`/admin/finance/categories?type=${s}`)).data},async createTransaction(s){return(await fe.post("/admin/finance/transactions",s)).data},async sendDailyReport(){return(await fe.post("/admin/api/reports/daily")).data},async clearCache(){return(await fe.post("/admin/api/cache/clear")).data},async getProjects(s=!1){return(await fe.get(`/admin/api/projects/?show_archived=${s}`)).data},async getProjectStatistics(s=!1){return(await fe.get(`/admin/api/projects/statistics?show_archived=${s}`)).data},async getProject(s){return(await fe.get(`/admin/api/projects/${s}`)).data},async createProject(s){const t=new FormData;return Object.keys(s).forEach(a=>{s[a]!==null&&s[a]!==void 0&&s[a]!==""&&t.append(a,s[a])}),(await fe.post("/admin/api/projects/create",t,{headers:{"Content-Type":"multipart/form-data"}})).data},async updateProject(s,t){return(await fe.put(`/admin/api/projects/${s}`,t)).data},async deleteProject(s){return(await fe.delete(`/admin/api/projects/${s}`)).data},async archiveProject(s){return(await fe.post(`/admin/api/projects/${s}/archive`)).data},async completeProject(s){return(await fe.post(`/admin/api/projects/${s}/complete`)).data},async updateProjectStatus(s,t,r){return(await fe.put(`/admin/api/projects/${s}/status`,{status:t,comment:r})).data},async getProjectFiles(s){return(await fe.get(`/admin/api/projects/${s}/files`)).data},async uploadProjectFile(s,t){const r=new FormData;return r.append("file",t),(await fe.post(`/admin/api/projects/${s}/files`,r,{headers:{"Content-Type":"multipart/form-data"}})).data},async downloadProjectFile(s,t){return(await fe.get(`/admin/api/projects/${s}/files/${t}`,{responseType:"blob"})).data},async deleteProjectFile(s,t){return(await fe.delete(`/admin/api/projects/${s}/files/${t}`)).data},async exportProjects(){return(await fe.get("/admin/api/export/projects")).data},async getRecentProjects(){return(await fe.get("/admin/projects/recent")).data},async getExecutors(){return(await fe.get("/admin/api/users/executors")).data},async getClients(){return(await fe.get("/admin/api/clients/simple")).data},async getRecentUsers(){return(await fe.get("/admin/users/recent")).data},async sendMessageToClient(s,t){return(await fe.post("/admin/api/send-message",{telegram_id:s,message:t})).data},async getStatistics(){return(await fe.get("/admin/reports/statistics")).data},async getProjectsChartData(){return(await fe.get("/admin/reports/projects-chart")).data},async getStatusChartData(){return(await fe.get("/admin/reports/status-chart")).data}},tE=j.createContext(void 0),_L=({children:s})=>{const[t,r]=j.useState(null),[a,n]=j.useState(!0);j.useEffect(()=>{(()=>{try{const g=localStorage.getItem("auth");if(g){const y=JSON.parse(g);r({username:y.username,role:y.role,email:y.email,firstName:y.firstName,lastName:y.lastName})}}catch(g){console.error("Error loading user from localStorage:",g),localStorage.removeItem("auth")}finally{n(!1)}})()},[]);const p={user:t,isAuthenticated:!!t,isLoading:a,login:async(v,g)=>{try{const y=await fe.post("/admin/api/auth/login",{username:v,password:g});if(y.status===200&&y.data.success){const{user:w}=y.data,N=w.role?.toUpperCase()||"EXECUTOR",k={username:v,password:g,role:N,firstName:w.first_name,lastName:w.last_name,email:w.email};localStorage.setItem("auth",JSON.stringify(k)),r({id:w.id,username:v,role:N,email:w.email,firstName:w.first_name,lastName:w.last_name,telegramId:w.telegram_id})}else throw new Error("Login failed")}catch(y){throw console.error("Login error:",y),y}},logout:()=>{localStorage.removeItem("auth"),r(null)},isOwner:()=>t?.role==="OWNER",isTeamlead:()=>t?.role==="TEAMLEAD",isExecutor:()=>t?.role==="EXECUTOR",isClient:()=>t?.role==="CLIENT",hasRole:v=>t?Array.isArray(v)?v.includes(t.role):t.role===v:!1};return e.jsx(tE.Provider,{value:p,children:s})},Rm=()=>{const s=j.useContext(tE);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),SL=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,a)=>a?a.toUpperCase():r.toLowerCase()),C4=s=>{const t=SL(s);return t.charAt(0).toUpperCase()+t.slice(1)},sE=(...s)=>s.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim(),CL=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var TL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=j.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:n="",children:i,iconNode:o,...c},u)=>j.createElement("svg",{ref:u,...TL,width:t,height:t,stroke:s,strokeWidth:a?Number(r)*24/Number(t):r,className:sE("lucide",n),...!i&&!CL(c)&&{"aria-hidden":"true"},...c},[...o.map(([h,m])=>j.createElement(h,m)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=(s,t)=>{const r=j.forwardRef(({className:a,...n},i)=>j.createElement(EL,{ref:i,iconNode:t,className:sE(`lucide-${kL(C4(s))}`,`lucide-${s}`,a),...n}));return r.displayName=C4(s),r};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Ya=Ne("activity",AL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Cl=Ne("archive",DL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],T4=Ne("arrow-down",RL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],rE=Ne("arrow-left",ML);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],LL=Ne("arrow-right",OL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],E4=Ne("arrow-up",PL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Hf=Ne("award",BL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],zL=Ne("banknote",FL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],sa=Ne("bell",IL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],UL=Ne("book-marked",$L);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],A4=Ne("book-open",VL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],qL=Ne("book",HL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Tf=Ne("bot",WL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YL=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],kn=Ne("briefcase",YL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],B0=Ne("bug",GL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],D4=Ne("building-2",KL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],ZL=Ne("calendar-check",XL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],wt=Ne("calendar",QL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Vr=Ne("chart-column",JL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eP=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]],tP=Ne("chart-no-axes-column-increasing",eP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sP=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],Ph=Ne("chart-no-axes-column",sP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rP=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],vp=Ne("chart-pie",rP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],is=Ne("check",aP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nP=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ci=Ne("chevron-down",nP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],aE=Ne("chevron-left",iP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Sn=Ne("chevron-right",lP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],jp=Ne("chevron-up",oP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],dP=Ne("circle-arrow-down",cP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ge=Ne("circle-alert",uP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}],["path",{d:"M8 12h8",key:"1wcyev"}]],Gj=Ne("circle-arrow-right",hP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],xP=Ne("circle-arrow-up",mP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fP=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ut=Ne("circle-check-big",fP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Hr=Ne("circle-check",pP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gP=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],bP=Ne("circle-play",gP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],vP=Ne("circle-question-mark",yP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]],wP=Ne("circle-stop",jP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],nE=Ne("circle",NP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Tl=Ne("circle-x",_P);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kP=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],SP=Ne("clipboard-check",kP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CP=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ve=Ne("clock",CP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TP=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],EP=Ne("cloud",TP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AP=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],iE=Ne("code",AP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]],RP=Ne("columns-2",DP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],er=Ne("copy",MP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OP=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],lE=Ne("credit-card",OP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],PP=Ne("crown",LP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BP=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Qe=Ne("dollar-sign",BP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FP=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Tt=Ne("download",FP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zP=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Gc=Ne("external-link",zP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IP=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Ho=Ne("eye-off",IP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Vt=Ne("eye",$P);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UP=[["path",{d:"M13.659 22H18a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v11.5",key:"4pqfef"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 12v-1",key:"1ej8lb"}],["path",{d:"M8 18v-2",key:"qcmpov"}],["path",{d:"M8 7V6",key:"1nbb54"}],["circle",{cx:"8",cy:"20",r:"2",key:"ckkr5m"}]],R4=Ne("file-archive",UP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VP=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]],HP=Ne("file-code",VP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qP=[["path",{d:"M4 6.835V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2h-.343",key:"1vfytu"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M2 19a2 2 0 0 1 4 0v1a2 2 0 0 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 0 1-4 0v-1a2 2 0 0 1 4 0",key:"1etmh7"}]],M4=Ne("file-headphone",qP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WP=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],YP=Ne("file-image",WP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GP=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M15.033 13.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56v-4.704a.645.645 0 0 1 .967-.56z",key:"1tzo1f"}]],Ef=Ne("file-play",GP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KP=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],O4=Ne("file-spreadsheet",KP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XP=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ue=Ne("file-text",XP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZP=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],Mr=Ne("file",ZP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QP=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],Af=Ne("flag",QP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JP=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],eB=Ne("flame",JP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tB=[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]],qa=Ne("folder-kanban",tB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sB=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],cy=Ne("folder-open",sB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rB=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Kj=Ne("folder",rB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aB=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],wr=Ne("funnel",aB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nB=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],L4=Ne("git-branch",nB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iB=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],P4=Ne("git-compare",iB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lB=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],oE=Ne("github",lB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],tm=Ne("globe",oB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cB=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],cE=Ne("grid-3x3",cB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dB=[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]],B4=Ne("handshake",dB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uB=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],hB=Ne("hash",uB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mB=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],F4=Ne("heart",mB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xB=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],fB=Ne("history",xB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pB=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],dE=Ne("house",pB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gB=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],sm=Ne("image",gB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],uE=Ne("info",bB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yB=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Xj=Ne("key",yB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vB=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],jB=Ne("keyboard",vB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wB=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],NB=Ne("layers",wB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _B=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],mN=Ne("layout-grid",_B);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kB=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Zj=Ne("lightbulb",kB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SB=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Nl=Ne("link",SB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CB=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]],dy=Ne("list-checks",CB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TB=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]],Qj=Ne("list-todo",TB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EB=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Mm=Ne("list",EB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AB=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Pt=Ne("loader-circle",AB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DB=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Kc=Ne("loader",DB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RB=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],MB=Ne("lock-open",RB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OB=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],qf=Ne("lock",OB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LB=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],hE=Ne("log-out",LB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PB=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],z4=Ne("log-in",PB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BB=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],vi=Ne("mail",BB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FB=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],zB=Ne("maximize-2",FB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IB=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],mE=Ne("menu",IB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $B=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Xa=Ne("message-circle",$B);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UB=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Os=Ne("message-square",UB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VB=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],xE=Ne("mic-off",VB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HB=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],rm=Ne("mic",HB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qB=[["path",{d:"M5 12h14",key:"1ays0h"}]],I4=Ne("minus",qB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WB=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],YB=Ne("mouse-pointer",WB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GB=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],Bh=Ne("network",GB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KB=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],fE=Ne("package",KB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XB=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],$4=Ne("palette",XB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZB=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],QB=Ne("panels-top-left",ZB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JB=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],rd=Ne("paperclip",JB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],am=Ne("pause",eF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],sr=Ne("pen",tF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=[["path",{d:"M10.1 13.9a14 14 0 0 0 3.732 2.668 1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2 18 18 0 0 1-12.728-5.272",key:"1wngk7"}],["path",{d:"M22 2 2 22",key:"y4kqgn"}],["path",{d:"M4.76 13.582A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 .244.473",key:"10hv5p"}]],pE=Ne("phone-off",sF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],bi=Ne("phone",rF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],U4=Ne("pin",aF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],ji=Ne("play",nF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iF=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]],V4=Ne("plug",iF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lF=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],We=Ne("plus",lF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ls=Ne("refresh-cw",oF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],dF=Ne("repeat",cF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uF=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Cn=Ne("rotate-ccw",uF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],mF=Ne("rotate-cw",hF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Aa=Ne("save",xF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fF=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Us=Ne("search",fF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],rr=Ne("send",pF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gF=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],bn=Ne("server",gF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ta=Ne("settings",bF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],xN=Ne("share-2",yF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vF=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Or=Ne("shield",vF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],Jj=Ne("sliders-vertical",jF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ds=Ne("square-check-big",wF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],An=Ne("square-pen",NF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],ew=Ne("square",_F);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kF=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Is=Ne("star",kF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],CF=Ne("table",SF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],mi=Ne("tag",TF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Lr=Ne("target",EF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],DF=Ne("test-tube",AF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RF=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],H4=Ne("thumbs-down",RF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],Fh=Ne("thumbs-up",MF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],gE=Ne("toggle-left",OF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LF=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],PF=Ne("toggle-right",LF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BF=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],tt=Ne("trash-2",BF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["rect",{width:"3",height:"9",x:"7",y:"7",key:"14n3xi"}],["rect",{width:"3",height:"5",x:"14",y:"7",key:"s4azjd"}]],zF=Ne("trello",FF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Da=Ne("trending-down",IF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $F=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],xt=Ne("trending-up",$F);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],dr=Ne("triangle-alert",UF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],HF=Ne("trophy",VF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qF=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Wf=Ne("type",qF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WF=[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]],q4=Ne("unlink",WF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YF=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],jn=Ne("upload",YF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GF=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],KF=Ne("user-check",GF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],fN=Ne("user-plus",XF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],QF=Ne("user-x",ZF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JF=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],lt=Ne("user",JF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ez=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],it=Ne("users",ez);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tz=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],F0=Ne("video",tz);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sz=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],pN=Ne("wallet",sz);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rz=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],De=Ne("x",rz);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const az=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],nz=Ne("zoom-in",az);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iz=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ga=Ne("zap",iz);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lz=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],oz=Ne("zoom-out",lz);function di(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function bE(s,t){s.prototype=Object.create(t.prototype),s.prototype.constructor=s,s.__proto__=t}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var na={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},xd={duration:.5,overwrite:!1,delay:0},gN,tr,Qt,Na=1e8,Wt=1/Na,tw=Math.PI*2,cz=tw/4,dz=0,yE=Math.sqrt,uz=Math.cos,hz=Math.sin,qs=function(t){return typeof t=="string"},ms=function(t){return typeof t=="function"},wi=function(t){return typeof t=="number"},bN=function(t){return typeof t>"u"},Tn=function(t){return typeof t=="object"},zr=function(t){return t!==!1},yN=function(){return typeof window<"u"},z0=function(t){return ms(t)||qs(t)},vE=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},xr=Array.isArray,sw=/(?:-?\.?\d|\.)+/gi,jE=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Xc=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,uy=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,wE=/[+-]=-?[.\d]+/,NE=/[^,'"\[\]\s]+/gi,mz=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,ss,xn,rw,vN,ia={},Yf={},_E,kE=function(t){return(Yf=fd(t,ia))&&qr},jN=function(t,r){return console.warn("Invalid property",t,"set to",r,"Missing plugin? gsap.registerPlugin()")},nm=function(t,r){return!r&&console.warn(t)},SE=function(t,r){return t&&(ia[t]=r)&&Yf&&(Yf[t]=r)||ia},im=function(){return 0},xz={suppressEvents:!0,isStart:!0,kill:!1},Df={suppressEvents:!0,kill:!1},fz={suppressEvents:!0},wN={},_l=[],aw={},CE,ea={},hy={},W4=30,Rf=[],NN="",_N=function(t){var r=t[0],a,n;if(Tn(r)||ms(r)||(t=[t]),!(a=(r._gsap||{}).harness)){for(n=Rf.length;n--&&!Rf[n].targetTest(r););a=Rf[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new ZE(t[n],a)))||t.splice(n,1);return t},Po=function(t){return t._gsap||_N(_a(t))[0]._gsap},TE=function(t,r,a){return(a=t[r])&&ms(a)?t[r]():bN(a)&&t.getAttribute&&t.getAttribute(r)||a},Ir=function(t,r){return(t=t.split(",")).forEach(r)||t},ys=function(t){return Math.round(t*1e5)/1e5||0},Ms=function(t){return Math.round(t*1e7)/1e7||0},ad=function(t,r){var a=r.charAt(0),n=parseFloat(r.substr(2));return t=parseFloat(t),a==="+"?t+n:a==="-"?t-n:a==="*"?t*n:t/n},pz=function(t,r){for(var a=r.length,n=0;t.indexOf(r[n])<0&&++n<a;);return n<a},Gf=function(){var t=_l.length,r=_l.slice(0),a,n;for(aw={},_l.length=0,a=0;a<t;a++)n=r[a],n&&n._lazy&&(n.render(n._lazy[0],n._lazy[1],!0)._lazy=0)},kN=function(t){return!!(t._initted||t._startAt||t.add)},EE=function(t,r,a,n){_l.length&&!tr&&Gf(),t.render(r,a,!!(tr&&r<0&&kN(t))),_l.length&&!tr&&Gf()},AE=function(t){var r=parseFloat(t);return(r||r===0)&&(t+"").match(NE).length<2?r:qs(t)?t.trim():t},DE=function(t){return t},la=function(t,r){for(var a in r)a in t||(t[a]=r[a]);return t},gz=function(t){return function(r,a){for(var n in a)n in r||n==="duration"&&t||n==="ease"||(r[n]=a[n])}},fd=function(t,r){for(var a in r)t[a]=r[a];return t},Y4=function s(t,r){for(var a in r)a!=="__proto__"&&a!=="constructor"&&a!=="prototype"&&(t[a]=Tn(r[a])?s(t[a]||(t[a]={}),r[a]):r[a]);return t},Kf=function(t,r){var a={},n;for(n in t)n in r||(a[n]=t[n]);return a},zh=function(t){var r=t.parent||ss,a=t.keyframes?gz(xr(t.keyframes)):la;if(zr(t.inherit))for(;r;)a(t,r.vars.defaults),r=r.parent||r._dp;return t},bz=function(t,r){for(var a=t.length,n=a===r.length;n&&a--&&t[a]===r[a];);return a<0},RE=function(t,r,a,n,i){var o=t[n],c;if(i)for(c=r[i];o&&o[i]>c;)o=o._prev;return o?(r._next=o._next,o._next=r):(r._next=t[a],t[a]=r),r._next?r._next._prev=r:t[n]=r,r._prev=o,r.parent=r._dp=t,r},wp=function(t,r,a,n){a===void 0&&(a="_first"),n===void 0&&(n="_last");var i=r._prev,o=r._next;i?i._next=o:t[a]===r&&(t[a]=o),o?o._prev=i:t[n]===r&&(t[n]=i),r._next=r._prev=r.parent=null},El=function(t,r){t.parent&&(!r||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},Bo=function(t,r){if(t&&(!r||r._end>t._dur||r._start<0))for(var a=t;a;)a._dirty=1,a=a.parent;return t},yz=function(t){for(var r=t.parent;r&&r.parent;)r._dirty=1,r.totalDuration(),r=r.parent;return t},nw=function(t,r,a,n){return t._startAt&&(tr?t._startAt.revert(Df):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(r,!0,n))},vz=function s(t){return!t||t._ts&&s(t.parent)},G4=function(t){return t._repeat?pd(t._tTime,t=t.duration()+t._rDelay)*t:0},pd=function(t,r){var a=Math.floor(t=Ms(t/r));return t&&a===t?a-1:a},Xf=function(t,r){return(t-r._start)*r._ts+(r._ts>=0?0:r._dirty?r.totalDuration():r._tDur)},Np=function(t){return t._end=Ms(t._start+(t._tDur/Math.abs(t._ts||t._rts||Wt)||0))},_p=function(t,r){var a=t._dp;return a&&a.smoothChildTiming&&t._ts&&(t._start=Ms(a._time-(t._ts>0?r/t._ts:((t._dirty?t.totalDuration():t._tDur)-r)/-t._ts)),Np(t),a._dirty||Bo(a,t)),t},ME=function(t,r){var a;if((r._time||!r._dur&&r._initted||r._start<t._time&&(r._dur||!r.add))&&(a=Xf(t.rawTime(),r),(!r._dur||Om(0,r.totalDuration(),a)-r._tTime>Wt)&&r.render(a,!0)),Bo(t,r)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(a=t;a._dp;)a.rawTime()>=0&&a.totalTime(a._tTime),a=a._dp;t._zTime=-Wt}},gn=function(t,r,a,n){return r.parent&&El(r),r._start=Ms((wi(a)?a:a||t!==ss?va(t,a,r):t._time)+r._delay),r._end=Ms(r._start+(r.totalDuration()/Math.abs(r.timeScale())||0)),RE(t,r,"_first","_last",t._sort?"_start":0),iw(r)||(t._recent=r),n||ME(t,r),t._ts<0&&_p(t,t._tTime),t},OE=function(t,r){return(ia.ScrollTrigger||jN("scrollTrigger",r))&&ia.ScrollTrigger.create(r,t)},LE=function(t,r,a,n,i){if(CN(t,r,i),!t._initted)return 1;if(!a&&t._pt&&!tr&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&CE!==ra.frame)return _l.push(t),t._lazy=[i,n],1},jz=function s(t){var r=t.parent;return r&&r._ts&&r._initted&&!r._lock&&(r.rawTime()<0||s(r))},iw=function(t){var r=t.data;return r==="isFromStart"||r==="isStart"},wz=function(t,r,a,n){var i=t.ratio,o=r<0||!r&&(!t._start&&jz(t)&&!(!t._initted&&iw(t))||(t._ts<0||t._dp._ts<0)&&!iw(t))?0:1,c=t._rDelay,u=0,h,m,f;if(c&&t._repeat&&(u=Om(0,t._tDur,r),m=pd(u,c),t._yoyo&&m&1&&(o=1-o),m!==pd(t._tTime,c)&&(i=1-o,t.vars.repeatRefresh&&t._initted&&t.invalidate())),o!==i||tr||n||t._zTime===Wt||!r&&t._zTime){if(!t._initted&&LE(t,r,n,a,u))return;for(f=t._zTime,t._zTime=r||(a?Wt:0),a||(a=r&&!f),t.ratio=o,t._from&&(o=1-o),t._time=0,t._tTime=u,h=t._pt;h;)h.r(o,h.d),h=h._next;r<0&&nw(t,r,a,!0),t._onUpdate&&!a&&aa(t,"onUpdate"),u&&t._repeat&&!a&&t.parent&&aa(t,"onRepeat"),(r>=t._tDur||r<0)&&t.ratio===o&&(o&&El(t,1),!a&&!tr&&(aa(t,o?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=r)},Nz=function(t,r,a){var n;if(a>r)for(n=t._first;n&&n._start<=a;){if(n.data==="isPause"&&n._start>r)return n;n=n._next}else for(n=t._last;n&&n._start>=a;){if(n.data==="isPause"&&n._start<r)return n;n=n._prev}},gd=function(t,r,a,n){var i=t._repeat,o=Ms(r)||0,c=t._tTime/t._tDur;return c&&!n&&(t._time*=o/t._dur),t._dur=o,t._tDur=i?i<0?1e10:Ms(o*(i+1)+t._rDelay*i):o,c>0&&!n&&_p(t,t._tTime=t._tDur*c),t.parent&&Np(t),a||Bo(t.parent,t),t},K4=function(t){return t instanceof vr?Bo(t):gd(t,t._dur)},_z={_start:0,endTime:im,totalDuration:im},va=function s(t,r,a){var n=t.labels,i=t._recent||_z,o=t.duration()>=Na?i.endTime(!1):t._dur,c,u,h;return qs(r)&&(isNaN(r)||r in n)?(u=r.charAt(0),h=r.substr(-1)==="%",c=r.indexOf("="),u==="<"||u===">"?(c>=0&&(r=r.replace(/=/,"")),(u==="<"?i._start:i.endTime(i._repeat>=0))+(parseFloat(r.substr(1))||0)*(h?(c<0?i:a).totalDuration()/100:1)):c<0?(r in n||(n[r]=o),n[r]):(u=parseFloat(r.charAt(c-1)+r.substr(c+1)),h&&a&&(u=u/100*(xr(a)?a[0]:a).totalDuration()),c>1?s(t,r.substr(0,c-1),a)+u:o+u)):r==null?o:+r},Ih=function(t,r,a){var n=wi(r[1]),i=(n?2:1)+(t<2?0:1),o=r[i],c,u;if(n&&(o.duration=r[1]),o.parent=a,t){for(c=o,u=a;u&&!("immediateRender"in c);)c=u.vars.defaults||{},u=zr(u.vars.inherit)&&u.parent;o.immediateRender=zr(c.immediateRender),t<2?o.runBackwards=1:o.startAt=r[i-1]}return new Rs(r[0],o,r[i+1])},Ol=function(t,r){return t||t===0?r(t):r},Om=function(t,r,a){return a<t?t:a>r?r:a},cr=function(t,r){return!qs(t)||!(r=mz.exec(t))?"":r[1]},kz=function(t,r,a){return Ol(a,function(n){return Om(t,r,n)})},lw=[].slice,PE=function(t,r){return t&&Tn(t)&&"length"in t&&(!r&&!t.length||t.length-1 in t&&Tn(t[0]))&&!t.nodeType&&t!==xn},Sz=function(t,r,a){return a===void 0&&(a=[]),t.forEach(function(n){var i;return qs(n)&&!r||PE(n,1)?(i=a).push.apply(i,_a(n)):a.push(n)})||a},_a=function(t,r,a){return Qt&&!r&&Qt.selector?Qt.selector(t):qs(t)&&!a&&(rw||!bd())?lw.call((r||vN).querySelectorAll(t),0):xr(t)?Sz(t,a):PE(t)?lw.call(t,0):t?[t]:[]},ow=function(t){return t=_a(t)[0]||nm("Invalid scope")||{},function(r){var a=t.current||t.nativeElement||t;return _a(r,a.querySelectorAll?a:a===t?nm("Invalid scope")||vN.createElement("div"):t)}},BE=function(t){return t.sort(function(){return .5-Math.random()})},FE=function(t){if(ms(t))return t;var r=Tn(t)?t:{each:t},a=Fo(r.ease),n=r.from||0,i=parseFloat(r.base)||0,o={},c=n>0&&n<1,u=isNaN(n)||c,h=r.axis,m=n,f=n;return qs(n)?m=f={center:.5,edges:.5,end:1}[n]||0:!c&&u&&(m=n[0],f=n[1]),function(p,v,g){var y=(g||r).length,w=o[y],N,k,S,_,T,E,z,O,C;if(!w){if(C=r.grid==="auto"?0:(r.grid||[1,Na])[1],!C){for(z=-Na;z<(z=g[C++].getBoundingClientRect().left)&&C<y;);C<y&&C--}for(w=o[y]=[],N=u?Math.min(C,y)*m-.5:n%C,k=C===Na?0:u?y*f/C-.5:n/C|0,z=0,O=Na,E=0;E<y;E++)S=E%C-N,_=k-(E/C|0),w[E]=T=h?Math.abs(h==="y"?_:S):yE(S*S+_*_),T>z&&(z=T),T<O&&(O=T);n==="random"&&BE(w),w.max=z-O,w.min=O,w.v=y=(parseFloat(r.amount)||parseFloat(r.each)*(C>y?y-1:h?h==="y"?y/C:C:Math.max(C,y/C))||0)*(n==="edges"?-1:1),w.b=y<0?i-y:i,w.u=cr(r.amount||r.each)||0,a=a&&y<0?GE(a):a}return y=(w[p]-w.min)/w.max||0,Ms(w.b+(a?a(y):y)*w.v)+w.u}},cw=function(t){var r=Math.pow(10,((t+"").split(".")[1]||"").length);return function(a){var n=Ms(Math.round(parseFloat(a)/t)*t*r);return(n-n%1)/r+(wi(a)?0:cr(a))}},zE=function(t,r){var a=xr(t),n,i;return!a&&Tn(t)&&(n=a=t.radius||Na,t.values?(t=_a(t.values),(i=!wi(t[0]))&&(n*=n)):t=cw(t.increment)),Ol(r,a?ms(t)?function(o){return i=t(o),Math.abs(i-o)<=n?i:o}:function(o){for(var c=parseFloat(i?o.x:o),u=parseFloat(i?o.y:0),h=Na,m=0,f=t.length,p,v;f--;)i?(p=t[f].x-c,v=t[f].y-u,p=p*p+v*v):p=Math.abs(t[f]-c),p<h&&(h=p,m=f);return m=!n||h<=n?t[m]:o,i||m===o||wi(o)?m:m+cr(o)}:cw(t))},IE=function(t,r,a,n){return Ol(xr(t)?!r:a===!0?!!(a=0):!n,function(){return xr(t)?t[~~(Math.random()*t.length)]:(a=a||1e-5)&&(n=a<1?Math.pow(10,(a+"").length-2):1)&&Math.floor(Math.round((t-a/2+Math.random()*(r-t+a*.99))/a)*a*n)/n})},Cz=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return function(n){return r.reduce(function(i,o){return o(i)},n)}},Tz=function(t,r){return function(a){return t(parseFloat(a))+(r||cr(a))}},Ez=function(t,r,a){return UE(t,r,0,1,a)},$E=function(t,r,a){return Ol(a,function(n){return t[~~r(n)]})},Az=function s(t,r,a){var n=r-t;return xr(t)?$E(t,s(0,t.length),r):Ol(a,function(i){return(n+(i-t)%n)%n+t})},Dz=function s(t,r,a){var n=r-t,i=n*2;return xr(t)?$E(t,s(0,t.length-1),r):Ol(a,function(o){return o=(i+(o-t)%i)%i||0,t+(o>n?i-o:o)})},lm=function(t){for(var r=0,a="",n,i,o,c;~(n=t.indexOf("random(",r));)o=t.indexOf(")",n),c=t.charAt(n+7)==="[",i=t.substr(n+7,o-n-7).match(c?NE:sw),a+=t.substr(r,n-r)+IE(c?i:+i[0],c?0:+i[1],+i[2]||1e-5),r=o+1;return a+t.substr(r,t.length-r)},UE=function(t,r,a,n,i){var o=r-t,c=n-a;return Ol(i,function(u){return a+((u-t)/o*c||0)})},Rz=function s(t,r,a,n){var i=isNaN(t+r)?0:function(v){return(1-v)*t+v*r};if(!i){var o=qs(t),c={},u,h,m,f,p;if(a===!0&&(n=1)&&(a=null),o)t={p:t},r={p:r};else if(xr(t)&&!xr(r)){for(m=[],f=t.length,p=f-2,h=1;h<f;h++)m.push(s(t[h-1],t[h]));f--,i=function(g){g*=f;var y=Math.min(p,~~g);return m[y](g-y)},a=r}else n||(t=fd(xr(t)?[]:{},t));if(!m){for(u in r)SN.call(c,t,u,"get",r[u]);i=function(g){return AN(g,c)||(o?t.p:t)}}}return Ol(a,i)},X4=function(t,r,a){var n=t.labels,i=Na,o,c,u;for(o in n)c=n[o]-r,c<0==!!a&&c&&i>(c=Math.abs(c))&&(u=o,i=c);return u},aa=function(t,r,a){var n=t.vars,i=n[r],o=Qt,c=t._ctx,u,h,m;if(i)return u=n[r+"Params"],h=n.callbackScope||t,a&&_l.length&&Gf(),c&&(Qt=c),m=u?i.apply(h,u):i.call(h),Qt=o,m},Ah=function(t){return El(t),t.scrollTrigger&&t.scrollTrigger.kill(!!tr),t.progress()<1&&aa(t,"onInterrupt"),t},Zc,VE=[],HE=function(t){if(t)if(t=!t.name&&t.default||t,yN()||t.headless){var r=t.name,a=ms(t),n=r&&!a&&t.init?function(){this._props=[]}:t,i={init:im,render:AN,add:SN,kill:Gz,modifier:Yz,rawVars:0},o={targetTest:0,get:0,getSetter:EN,aliases:{},register:0};if(bd(),t!==n){if(ea[r])return;la(n,la(Kf(t,i),o)),fd(n.prototype,fd(i,Kf(t,o))),ea[n.prop=r]=n,t.targetTest&&(Rf.push(n),wN[r]=1),r=(r==="css"?"CSS":r.charAt(0).toUpperCase()+r.substr(1))+"Plugin"}SE(r,n),t.register&&t.register(qr,n,$r)}else VE.push(t)},qt=255,Dh={aqua:[0,qt,qt],lime:[0,qt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,qt],navy:[0,0,128],white:[qt,qt,qt],olive:[128,128,0],yellow:[qt,qt,0],orange:[qt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[qt,0,0],pink:[qt,192,203],cyan:[0,qt,qt],transparent:[qt,qt,qt,0]},my=function(t,r,a){return t+=t<0?1:t>1?-1:0,(t*6<1?r+(a-r)*t*6:t<.5?a:t*3<2?r+(a-r)*(2/3-t)*6:r)*qt+.5|0},qE=function(t,r,a){var n=t?wi(t)?[t>>16,t>>8&qt,t&qt]:0:Dh.black,i,o,c,u,h,m,f,p,v,g;if(!n){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),Dh[t])n=Dh[t];else if(t.charAt(0)==="#"){if(t.length<6&&(i=t.charAt(1),o=t.charAt(2),c=t.charAt(3),t="#"+i+i+o+o+c+c+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return n=parseInt(t.substr(1,6),16),[n>>16,n>>8&qt,n&qt,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),n=[t>>16,t>>8&qt,t&qt]}else if(t.substr(0,3)==="hsl"){if(n=g=t.match(sw),!r)u=+n[0]%360/360,h=+n[1]/100,m=+n[2]/100,o=m<=.5?m*(h+1):m+h-m*h,i=m*2-o,n.length>3&&(n[3]*=1),n[0]=my(u+1/3,i,o),n[1]=my(u,i,o),n[2]=my(u-1/3,i,o);else if(~t.indexOf("="))return n=t.match(jE),a&&n.length<4&&(n[3]=1),n}else n=t.match(sw)||Dh.transparent;n=n.map(Number)}return r&&!g&&(i=n[0]/qt,o=n[1]/qt,c=n[2]/qt,f=Math.max(i,o,c),p=Math.min(i,o,c),m=(f+p)/2,f===p?u=h=0:(v=f-p,h=m>.5?v/(2-f-p):v/(f+p),u=f===i?(o-c)/v+(o<c?6:0):f===o?(c-i)/v+2:(i-o)/v+4,u*=60),n[0]=~~(u+.5),n[1]=~~(h*100+.5),n[2]=~~(m*100+.5)),a&&n.length<4&&(n[3]=1),n},WE=function(t){var r=[],a=[],n=-1;return t.split(kl).forEach(function(i){var o=i.match(Xc)||[];r.push.apply(r,o),a.push(n+=o.length+1)}),r.c=a,r},Z4=function(t,r,a){var n="",i=(t+n).match(kl),o=r?"hsla(":"rgba(",c=0,u,h,m,f;if(!i)return t;if(i=i.map(function(p){return(p=qE(p,r,1))&&o+(r?p[0]+","+p[1]+"%,"+p[2]+"%,"+p[3]:p.join(","))+")"}),a&&(m=WE(t),u=a.c,u.join(n)!==m.c.join(n)))for(h=t.replace(kl,"1").split(Xc),f=h.length-1;c<f;c++)n+=h[c]+(~u.indexOf(c)?i.shift()||o+"0,0,0,0)":(m.length?m:i.length?i:a).shift());if(!h)for(h=t.split(kl),f=h.length-1;c<f;c++)n+=h[c]+i[c];return n+h[f]},kl=(function(){var s="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in Dh)s+="|"+t+"\\b";return new RegExp(s+")","gi")})(),Mz=/hsl[a]?\(/,YE=function(t){var r=t.join(" "),a;if(kl.lastIndex=0,kl.test(r))return a=Mz.test(r),t[1]=Z4(t[1],a),t[0]=Z4(t[0],a,WE(t[1])),!0},om,ra=(function(){var s=Date.now,t=500,r=33,a=s(),n=a,i=1e3/240,o=i,c=[],u,h,m,f,p,v,g=function y(w){var N=s()-n,k=w===!0,S,_,T,E;if((N>t||N<0)&&(a+=N-r),n+=N,T=n-a,S=T-o,(S>0||k)&&(E=++f.frame,p=T-f.time*1e3,f.time=T=T/1e3,o+=S+(S>=i?4:i-S),_=1),k||(u=h(y)),_)for(v=0;v<c.length;v++)c[v](T,p,E,w)};return f={time:0,frame:0,tick:function(){g(!0)},deltaRatio:function(w){return p/(1e3/(w||60))},wake:function(){_E&&(!rw&&yN()&&(xn=rw=window,vN=xn.document||{},ia.gsap=qr,(xn.gsapVersions||(xn.gsapVersions=[])).push(qr.version),kE(Yf||xn.GreenSockGlobals||!xn.gsap&&xn||{}),VE.forEach(HE)),m=typeof requestAnimationFrame<"u"&&requestAnimationFrame,u&&f.sleep(),h=m||function(w){return setTimeout(w,o-f.time*1e3+1|0)},om=1,g(2))},sleep:function(){(m?cancelAnimationFrame:clearTimeout)(u),om=0,h=im},lagSmoothing:function(w,N){t=w||1/0,r=Math.min(N||33,t)},fps:function(w){i=1e3/(w||240),o=f.time*1e3+i},add:function(w,N,k){var S=N?function(_,T,E,z){w(_,T,E,z),f.remove(S)}:w;return f.remove(w),c[k?"unshift":"push"](S),bd(),S},remove:function(w,N){~(N=c.indexOf(w))&&c.splice(N,1)&&v>=N&&v--},_listeners:c},f})(),bd=function(){return!om&&ra.wake()},_t={},Oz=/^[\d.\-M][\d.\-,\s]/,Lz=/["']/g,Pz=function(t){for(var r={},a=t.substr(1,t.length-3).split(":"),n=a[0],i=1,o=a.length,c,u,h;i<o;i++)u=a[i],c=i!==o-1?u.lastIndexOf(","):u.length,h=u.substr(0,c),r[n]=isNaN(h)?h.replace(Lz,"").trim():+h,n=u.substr(c+1).trim();return r},Bz=function(t){var r=t.indexOf("(")+1,a=t.indexOf(")"),n=t.indexOf("(",r);return t.substring(r,~n&&n<a?t.indexOf(")",a+1):a)},Fz=function(t){var r=(t+"").split("("),a=_t[r[0]];return a&&r.length>1&&a.config?a.config.apply(null,~t.indexOf("{")?[Pz(r[1])]:Bz(t).split(",").map(AE)):_t._CE&&Oz.test(t)?_t._CE("",t):a},GE=function(t){return function(r){return 1-t(1-r)}},KE=function s(t,r){for(var a=t._first,n;a;)a instanceof vr?s(a,r):a.vars.yoyoEase&&(!a._yoyo||!a._repeat)&&a._yoyo!==r&&(a.timeline?s(a.timeline,r):(n=a._ease,a._ease=a._yEase,a._yEase=n,a._yoyo=r)),a=a._next},Fo=function(t,r){return t&&(ms(t)?t:_t[t]||Fz(t))||r},Xo=function(t,r,a,n){a===void 0&&(a=function(u){return 1-r(1-u)}),n===void 0&&(n=function(u){return u<.5?r(u*2)/2:1-r((1-u)*2)/2});var i={easeIn:r,easeOut:a,easeInOut:n},o;return Ir(t,function(c){_t[c]=ia[c]=i,_t[o=c.toLowerCase()]=a;for(var u in i)_t[o+(u==="easeIn"?".in":u==="easeOut"?".out":".inOut")]=_t[c+"."+u]=i[u]}),i},XE=function(t){return function(r){return r<.5?(1-t(1-r*2))/2:.5+t((r-.5)*2)/2}},xy=function s(t,r,a){var n=r>=1?r:1,i=(a||(t?.3:.45))/(r<1?r:1),o=i/tw*(Math.asin(1/n)||0),c=function(m){return m===1?1:n*Math.pow(2,-10*m)*hz((m-o)*i)+1},u=t==="out"?c:t==="in"?function(h){return 1-c(1-h)}:XE(c);return i=tw/i,u.config=function(h,m){return s(t,h,m)},u},fy=function s(t,r){r===void 0&&(r=1.70158);var a=function(o){return o?--o*o*((r+1)*o+r)+1:0},n=t==="out"?a:t==="in"?function(i){return 1-a(1-i)}:XE(a);return n.config=function(i){return s(t,i)},n};Ir("Linear,Quad,Cubic,Quart,Quint,Strong",function(s,t){var r=t<5?t+1:t;Xo(s+",Power"+(r-1),t?function(a){return Math.pow(a,r)}:function(a){return a},function(a){return 1-Math.pow(1-a,r)},function(a){return a<.5?Math.pow(a*2,r)/2:1-Math.pow((1-a)*2,r)/2})});_t.Linear.easeNone=_t.none=_t.Linear.easeIn;Xo("Elastic",xy("in"),xy("out"),xy());(function(s,t){var r=1/t,a=2*r,n=2.5*r,i=function(c){return c<r?s*c*c:c<a?s*Math.pow(c-1.5/t,2)+.75:c<n?s*(c-=2.25/t)*c+.9375:s*Math.pow(c-2.625/t,2)+.984375};Xo("Bounce",function(o){return 1-i(1-o)},i)})(7.5625,2.75);Xo("Expo",function(s){return Math.pow(2,10*(s-1))*s+s*s*s*s*s*s*(1-s)});Xo("Circ",function(s){return-(yE(1-s*s)-1)});Xo("Sine",function(s){return s===1?1:-uz(s*cz)+1});Xo("Back",fy("in"),fy("out"),fy());_t.SteppedEase=_t.steps=ia.SteppedEase={config:function(t,r){t===void 0&&(t=1);var a=1/t,n=t+(r?0:1),i=r?1:0,o=1-Wt;return function(c){return((n*Om(0,o,c)|0)+i)*a}}};xd.ease=_t["quad.out"];Ir("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(s){return NN+=s+","+s+"Params,"});var ZE=function(t,r){this.id=dz++,t._gsap=this,this.target=t,this.harness=r,this.get=r?r.get:TE,this.set=r?r.getSetter:EN},cm=(function(){function s(r){this.vars=r,this._delay=+r.delay||0,(this._repeat=r.repeat===1/0?-2:r.repeat||0)&&(this._rDelay=r.repeatDelay||0,this._yoyo=!!r.yoyo||!!r.yoyoEase),this._ts=1,gd(this,+r.duration,1,1),this.data=r.data,Qt&&(this._ctx=Qt,Qt.data.push(this)),om||ra.wake()}var t=s.prototype;return t.delay=function(a){return a||a===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+a-this._delay),this._delay=a,this):this._delay},t.duration=function(a){return arguments.length?this.totalDuration(this._repeat>0?a+(a+this._rDelay)*this._repeat:a):this.totalDuration()&&this._dur},t.totalDuration=function(a){return arguments.length?(this._dirty=0,gd(this,this._repeat<0?a:(a-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(a,n){if(bd(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(_p(this,a),!i._dp||i.parent||ME(i,this);i&&i.parent;)i.parent._time!==i._start+(i._ts>=0?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&a<this._tDur||this._ts<0&&a>0||!this._tDur&&!a)&&gn(this._dp,this,this._start-this._delay)}return(this._tTime!==a||!this._dur&&!n||this._initted&&Math.abs(this._zTime)===Wt||!a&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=a),EE(this,a,n)),this},t.time=function(a,n){return arguments.length?this.totalTime(Math.min(this.totalDuration(),a+G4(this))%(this._dur+this._rDelay)||(a?this._dur:0),n):this._time},t.totalProgress=function(a,n){return arguments.length?this.totalTime(this.totalDuration()*a,n):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(a,n){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-a:a)+G4(this),n):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(a,n){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(a-1)*i,n):this._repeat?pd(this._tTime,i)+1:1},t.timeScale=function(a,n){if(!arguments.length)return this._rts===-Wt?0:this._rts;if(this._rts===a)return this;var i=this.parent&&this._ts?Xf(this.parent._time,this):this._tTime;return this._rts=+a||0,this._ts=this._ps||a===-Wt?0:this._rts,this.totalTime(Om(-Math.abs(this._delay),this.totalDuration(),i),n!==!1),Np(this),yz(this)},t.paused=function(a){return arguments.length?(this._ps!==a&&(this._ps=a,a?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(bd(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Wt&&(this._tTime-=Wt)))),this):this._ps},t.startTime=function(a){if(arguments.length){this._start=a;var n=this.parent||this._dp;return n&&(n._sort||!this.parent)&&gn(n,this,a-this._delay),this}return this._start},t.endTime=function(a){return this._start+(zr(a)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(a){var n=this.parent||this._dp;return n?a&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Xf(n.rawTime(a),this):this._tTime:this._tTime},t.revert=function(a){a===void 0&&(a=fz);var n=tr;return tr=a,kN(this)&&(this.timeline&&this.timeline.revert(a),this.totalTime(-.01,a.suppressEvents)),this.data!=="nested"&&a.kill!==!1&&this.kill(),tr=n,this},t.globalTime=function(a){for(var n=this,i=arguments.length?a:n.rawTime();n;)i=n._start+i/(Math.abs(n._ts)||1),n=n._dp;return!this.parent&&this._sat?this._sat.globalTime(a):i},t.repeat=function(a){return arguments.length?(this._repeat=a===1/0?-2:a,K4(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(a){if(arguments.length){var n=this._time;return this._rDelay=a,K4(this),n?this.time(n):this}return this._rDelay},t.yoyo=function(a){return arguments.length?(this._yoyo=a,this):this._yoyo},t.seek=function(a,n){return this.totalTime(va(this,a),zr(n))},t.restart=function(a,n){return this.play().totalTime(a?-this._delay:0,zr(n)),this._dur||(this._zTime=-Wt),this},t.play=function(a,n){return a!=null&&this.seek(a,n),this.reversed(!1).paused(!1)},t.reverse=function(a,n){return a!=null&&this.seek(a||this.totalDuration(),n),this.reversed(!0).paused(!1)},t.pause=function(a,n){return a!=null&&this.seek(a,n),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(a){return arguments.length?(!!a!==this.reversed()&&this.timeScale(-this._rts||(a?-Wt:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-Wt,this},t.isActive=function(){var a=this.parent||this._dp,n=this._start,i;return!!(!a||this._ts&&this._initted&&a.isActive()&&(i=a.rawTime(!0))>=n&&i<this.endTime(!0)-Wt)},t.eventCallback=function(a,n,i){var o=this.vars;return arguments.length>1?(n?(o[a]=n,i&&(o[a+"Params"]=i),a==="onUpdate"&&(this._onUpdate=n)):delete o[a],this):o[a]},t.then=function(a){var n=this;return new Promise(function(i){var o=ms(a)?a:DE,c=function(){var h=n.then;n.then=null,ms(o)&&(o=o(n))&&(o.then||o===n)&&(n.then=h),i(o),n.then=h};n._initted&&n.totalProgress()===1&&n._ts>=0||!n._tTime&&n._ts<0?c():n._prom=c})},t.kill=function(){Ah(this)},s})();la(cm.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Wt,_prom:0,_ps:!1,_rts:1});var vr=(function(s){bE(t,s);function t(a,n){var i;return a===void 0&&(a={}),i=s.call(this,a)||this,i.labels={},i.smoothChildTiming=!!a.smoothChildTiming,i.autoRemoveChildren=!!a.autoRemoveChildren,i._sort=zr(a.sortChildren),ss&&gn(a.parent||ss,di(i),n),a.reversed&&i.reverse(),a.paused&&i.paused(!0),a.scrollTrigger&&OE(di(i),a.scrollTrigger),i}var r=t.prototype;return r.to=function(n,i,o){return Ih(0,arguments,this),this},r.from=function(n,i,o){return Ih(1,arguments,this),this},r.fromTo=function(n,i,o,c){return Ih(2,arguments,this),this},r.set=function(n,i,o){return i.duration=0,i.parent=this,zh(i).repeatDelay||(i.repeat=0),i.immediateRender=!!i.immediateRender,new Rs(n,i,va(this,o),1),this},r.call=function(n,i,o){return gn(this,Rs.delayedCall(0,n,i),o)},r.staggerTo=function(n,i,o,c,u,h,m){return o.duration=i,o.stagger=o.stagger||c,o.onComplete=h,o.onCompleteParams=m,o.parent=this,new Rs(n,o,va(this,u)),this},r.staggerFrom=function(n,i,o,c,u,h,m){return o.runBackwards=1,zh(o).immediateRender=zr(o.immediateRender),this.staggerTo(n,i,o,c,u,h,m)},r.staggerFromTo=function(n,i,o,c,u,h,m,f){return c.startAt=o,zh(c).immediateRender=zr(c.immediateRender),this.staggerTo(n,i,c,u,h,m,f)},r.render=function(n,i,o){var c=this._time,u=this._dirty?this.totalDuration():this._tDur,h=this._dur,m=n<=0?0:Ms(n),f=this._zTime<0!=n<0&&(this._initted||!h),p,v,g,y,w,N,k,S,_,T,E,z;if(this!==ss&&m>u&&n>=0&&(m=u),m!==this._tTime||o||f){if(c!==this._time&&h&&(m+=this._time-c,n+=this._time-c),p=m,_=this._start,S=this._ts,N=!S,f&&(h||(c=this._zTime),(n||!i)&&(this._zTime=n)),this._repeat){if(E=this._yoyo,w=h+this._rDelay,this._repeat<-1&&n<0)return this.totalTime(w*100+n,i,o);if(p=Ms(m%w),m===u?(y=this._repeat,p=h):(T=Ms(m/w),y=~~T,y&&y===T&&(p=h,y--),p>h&&(p=h)),T=pd(this._tTime,w),!c&&this._tTime&&T!==y&&this._tTime-T*w-this._dur<=0&&(T=y),E&&y&1&&(p=h-p,z=1),y!==T&&!this._lock){var O=E&&T&1,C=O===(E&&y&1);if(y<T&&(O=!O),c=O?0:m%h?h:m,this._lock=1,this.render(c||(z?0:Ms(y*w)),i,!h)._lock=0,this._tTime=m,!i&&this.parent&&aa(this,"onRepeat"),this.vars.repeatRefresh&&!z&&(this.invalidate()._lock=1),c&&c!==this._time||N!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(h=this._dur,u=this._tDur,C&&(this._lock=2,c=O?h:-1e-4,this.render(c,!0),this.vars.repeatRefresh&&!z&&this.invalidate()),this._lock=0,!this._ts&&!N)return this;KE(this,z)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(k=Nz(this,Ms(c),Ms(p)),k&&(m-=p-(p=k._start))),this._tTime=m,this._time=p,this._act=!S,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=n,c=0),!c&&m&&!i&&!T&&(aa(this,"onStart"),this._tTime!==m))return this;if(p>=c&&n>=0)for(v=this._first;v;){if(g=v._next,(v._act||p>=v._start)&&v._ts&&k!==v){if(v.parent!==this)return this.render(n,i,o);if(v.render(v._ts>0?(p-v._start)*v._ts:(v._dirty?v.totalDuration():v._tDur)+(p-v._start)*v._ts,i,o),p!==this._time||!this._ts&&!N){k=0,g&&(m+=this._zTime=-Wt);break}}v=g}else{v=this._last;for(var A=n<0?n:p;v;){if(g=v._prev,(v._act||A<=v._end)&&v._ts&&k!==v){if(v.parent!==this)return this.render(n,i,o);if(v.render(v._ts>0?(A-v._start)*v._ts:(v._dirty?v.totalDuration():v._tDur)+(A-v._start)*v._ts,i,o||tr&&kN(v)),p!==this._time||!this._ts&&!N){k=0,g&&(m+=this._zTime=A?-Wt:Wt);break}}v=g}}if(k&&!i&&(this.pause(),k.render(p>=c?0:-Wt)._zTime=p>=c?1:-1,this._ts))return this._start=_,Np(this),this.render(n,i,o);this._onUpdate&&!i&&aa(this,"onUpdate",!0),(m===u&&this._tTime>=this.totalDuration()||!m&&c)&&(_===this._start||Math.abs(S)!==Math.abs(this._ts))&&(this._lock||((n||!h)&&(m===u&&this._ts>0||!m&&this._ts<0)&&El(this,1),!i&&!(n<0&&!c)&&(m||c||!u)&&(aa(this,m===u&&n>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(m<u&&this.timeScale()>0)&&this._prom())))}return this},r.add=function(n,i){var o=this;if(wi(i)||(i=va(this,i,n)),!(n instanceof cm)){if(xr(n))return n.forEach(function(c){return o.add(c,i)}),this;if(qs(n))return this.addLabel(n,i);if(ms(n))n=Rs.delayedCall(0,n);else return this}return this!==n?gn(this,n,i):this},r.getChildren=function(n,i,o,c){n===void 0&&(n=!0),i===void 0&&(i=!0),o===void 0&&(o=!0),c===void 0&&(c=-Na);for(var u=[],h=this._first;h;)h._start>=c&&(h instanceof Rs?i&&u.push(h):(o&&u.push(h),n&&u.push.apply(u,h.getChildren(!0,i,o)))),h=h._next;return u},r.getById=function(n){for(var i=this.getChildren(1,1,1),o=i.length;o--;)if(i[o].vars.id===n)return i[o]},r.remove=function(n){return qs(n)?this.removeLabel(n):ms(n)?this.killTweensOf(n):(n.parent===this&&wp(this,n),n===this._recent&&(this._recent=this._last),Bo(this))},r.totalTime=function(n,i){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Ms(ra.time-(this._ts>0?n/this._ts:(this.totalDuration()-n)/-this._ts))),s.prototype.totalTime.call(this,n,i),this._forcing=0,this):this._tTime},r.addLabel=function(n,i){return this.labels[n]=va(this,i),this},r.removeLabel=function(n){return delete this.labels[n],this},r.addPause=function(n,i,o){var c=Rs.delayedCall(0,i||im,o);return c.data="isPause",this._hasPause=1,gn(this,c,va(this,n))},r.removePause=function(n){var i=this._first;for(n=va(this,n);i;)i._start===n&&i.data==="isPause"&&El(i),i=i._next},r.killTweensOf=function(n,i,o){for(var c=this.getTweensOf(n,o),u=c.length;u--;)pl!==c[u]&&c[u].kill(n,i);return this},r.getTweensOf=function(n,i){for(var o=[],c=_a(n),u=this._first,h=wi(i),m;u;)u instanceof Rs?pz(u._targets,c)&&(h?(!pl||u._initted&&u._ts)&&u.globalTime(0)<=i&&u.globalTime(u.totalDuration())>i:!i||u.isActive())&&o.push(u):(m=u.getTweensOf(c,i)).length&&o.push.apply(o,m),u=u._next;return o},r.tweenTo=function(n,i){i=i||{};var o=this,c=va(o,n),u=i,h=u.startAt,m=u.onStart,f=u.onStartParams,p=u.immediateRender,v,g=Rs.to(o,la({ease:i.ease||"none",lazy:!1,immediateRender:!1,time:c,overwrite:"auto",duration:i.duration||Math.abs((c-(h&&"time"in h?h.time:o._time))/o.timeScale())||Wt,onStart:function(){if(o.pause(),!v){var w=i.duration||Math.abs((c-(h&&"time"in h?h.time:o._time))/o.timeScale());g._dur!==w&&gd(g,w,0,1).render(g._time,!0,!0),v=1}m&&m.apply(g,f||[])}},i));return p?g.render(0):g},r.tweenFromTo=function(n,i,o){return this.tweenTo(i,la({startAt:{time:va(this,n)}},o))},r.recent=function(){return this._recent},r.nextLabel=function(n){return n===void 0&&(n=this._time),X4(this,va(this,n))},r.previousLabel=function(n){return n===void 0&&(n=this._time),X4(this,va(this,n),1)},r.currentLabel=function(n){return arguments.length?this.seek(n,!0):this.previousLabel(this._time+Wt)},r.shiftChildren=function(n,i,o){o===void 0&&(o=0);for(var c=this._first,u=this.labels,h;c;)c._start>=o&&(c._start+=n,c._end+=n),c=c._next;if(i)for(h in u)u[h]>=o&&(u[h]+=n);return Bo(this)},r.invalidate=function(n){var i=this._first;for(this._lock=0;i;)i.invalidate(n),i=i._next;return s.prototype.invalidate.call(this,n)},r.clear=function(n){n===void 0&&(n=!0);for(var i=this._first,o;i;)o=i._next,this.remove(i),i=o;return this._dp&&(this._time=this._tTime=this._pTime=0),n&&(this.labels={}),Bo(this)},r.totalDuration=function(n){var i=0,o=this,c=o._last,u=Na,h,m,f;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-n:n));if(o._dirty){for(f=o.parent;c;)h=c._prev,c._dirty&&c.totalDuration(),m=c._start,m>u&&o._sort&&c._ts&&!o._lock?(o._lock=1,gn(o,c,m-c._delay,1)._lock=0):u=m,m<0&&c._ts&&(i-=m,(!f&&!o._dp||f&&f.smoothChildTiming)&&(o._start+=m/o._ts,o._time-=m,o._tTime-=m),o.shiftChildren(-m,!1,-1/0),u=0),c._end>i&&c._ts&&(i=c._end),c=h;gd(o,o===ss&&o._time>i?o._time:i,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(n){if(ss._ts&&(EE(ss,Xf(n,ss)),CE=ra.frame),ra.frame>=W4){W4+=na.autoSleep||120;var i=ss._first;if((!i||!i._ts)&&na.autoSleep&&ra._listeners.length<2){for(;i&&!i._ts;)i=i._next;i||ra.sleep()}}},t})(cm);la(vr.prototype,{_lock:0,_hasPause:0,_forcing:0});var zz=function(t,r,a,n,i,o,c){var u=new $r(this._pt,t,r,0,1,rA,null,i),h=0,m=0,f,p,v,g,y,w,N,k;for(u.b=a,u.e=n,a+="",n+="",(N=~n.indexOf("random("))&&(n=lm(n)),o&&(k=[a,n],o(k,t,r),a=k[0],n=k[1]),p=a.match(uy)||[];f=uy.exec(n);)g=f[0],y=n.substring(h,f.index),v?v=(v+1)%5:y.substr(-5)==="rgba("&&(v=1),g!==p[m++]&&(w=parseFloat(p[m-1])||0,u._pt={_next:u._pt,p:y||m===1?y:",",s:w,c:g.charAt(1)==="="?ad(w,g)-w:parseFloat(g)-w,m:v&&v<4?Math.round:0},h=uy.lastIndex);return u.c=h<n.length?n.substring(h,n.length):"",u.fp=c,(wE.test(n)||N)&&(u.e=0),this._pt=u,u},SN=function(t,r,a,n,i,o,c,u,h,m){ms(n)&&(n=n(i||0,t,o));var f=t[r],p=a!=="get"?a:ms(f)?h?t[r.indexOf("set")||!ms(t["get"+r.substr(3)])?r:"get"+r.substr(3)](h):t[r]():f,v=ms(f)?h?Hz:tA:TN,g;if(qs(n)&&(~n.indexOf("random(")&&(n=lm(n)),n.charAt(1)==="="&&(g=ad(p,n)+(cr(p)||0),(g||g===0)&&(n=g))),!m||p!==n||dw)return!isNaN(p*n)&&n!==""?(g=new $r(this._pt,t,r,+p||0,n-(p||0),typeof f=="boolean"?Wz:sA,0,v),h&&(g.fp=h),c&&g.modifier(c,this,t),this._pt=g):(!f&&!(r in t)&&jN(r,n),zz.call(this,t,r,p,n,v,u||na.stringFilter,h))},Iz=function(t,r,a,n,i){if(ms(t)&&(t=$h(t,i,r,a,n)),!Tn(t)||t.style&&t.nodeType||xr(t)||vE(t))return qs(t)?$h(t,i,r,a,n):t;var o={},c;for(c in t)o[c]=$h(t[c],i,r,a,n);return o},QE=function(t,r,a,n,i,o){var c,u,h,m;if(ea[t]&&(c=new ea[t]).init(i,c.rawVars?r[t]:Iz(r[t],n,i,o,a),a,n,o)!==!1&&(a._pt=u=new $r(a._pt,i,t,0,1,c.render,c,0,c.priority),a!==Zc))for(h=a._ptLookup[a._targets.indexOf(i)],m=c._props.length;m--;)h[c._props[m]]=u;return c},pl,dw,CN=function s(t,r,a){var n=t.vars,i=n.ease,o=n.startAt,c=n.immediateRender,u=n.lazy,h=n.onUpdate,m=n.runBackwards,f=n.yoyoEase,p=n.keyframes,v=n.autoRevert,g=t._dur,y=t._startAt,w=t._targets,N=t.parent,k=N&&N.data==="nested"?N.vars.targets:w,S=t._overwrite==="auto"&&!gN,_=t.timeline,T,E,z,O,C,A,X,I,V,R,H,ee,se;if(_&&(!p||!i)&&(i="none"),t._ease=Fo(i,xd.ease),t._yEase=f?GE(Fo(f===!0?i:f,xd.ease)):0,f&&t._yoyo&&!t._repeat&&(f=t._yEase,t._yEase=t._ease,t._ease=f),t._from=!_&&!!n.runBackwards,!_||p&&!n.stagger){if(I=w[0]?Po(w[0]).harness:0,ee=I&&n[I.prop],T=Kf(n,wN),y&&(y._zTime<0&&y.progress(1),r<0&&m&&c&&!v?y.render(-1,!0):y.revert(m&&g?Df:xz),y._lazy=0),o){if(El(t._startAt=Rs.set(w,la({data:"isStart",overwrite:!1,parent:N,immediateRender:!0,lazy:!y&&zr(u),startAt:null,delay:0,onUpdate:h&&function(){return aa(t,"onUpdate")},stagger:0},o))),t._startAt._dp=0,t._startAt._sat=t,r<0&&(tr||!c&&!v)&&t._startAt.revert(Df),c&&g&&r<=0&&a<=0){r&&(t._zTime=r);return}}else if(m&&g&&!y){if(r&&(c=!1),z=la({overwrite:!1,data:"isFromStart",lazy:c&&!y&&zr(u),immediateRender:c,stagger:0,parent:N},T),ee&&(z[I.prop]=ee),El(t._startAt=Rs.set(w,z)),t._startAt._dp=0,t._startAt._sat=t,r<0&&(tr?t._startAt.revert(Df):t._startAt.render(-1,!0)),t._zTime=r,!c)s(t._startAt,Wt,Wt);else if(!r)return}for(t._pt=t._ptCache=0,u=g&&zr(u)||u&&!g,E=0;E<w.length;E++){if(C=w[E],X=C._gsap||_N(w)[E]._gsap,t._ptLookup[E]=R={},aw[X.id]&&_l.length&&Gf(),H=k===w?E:k.indexOf(C),I&&(V=new I).init(C,ee||T,t,H,k)!==!1&&(t._pt=O=new $r(t._pt,C,V.name,0,1,V.render,V,0,V.priority),V._props.forEach(function(W){R[W]=O}),V.priority&&(A=1)),!I||ee)for(z in T)ea[z]&&(V=QE(z,T,t,H,C,k))?V.priority&&(A=1):R[z]=O=SN.call(t,C,z,"get",T[z],H,k,0,n.stringFilter);t._op&&t._op[E]&&t.kill(C,t._op[E]),S&&t._pt&&(pl=t,ss.killTweensOf(C,R,t.globalTime(r)),se=!t.parent,pl=0),t._pt&&u&&(aw[X.id]=1)}A&&aA(t),t._onInit&&t._onInit(t)}t._onUpdate=h,t._initted=(!t._op||t._pt)&&!se,p&&r<=0&&_.render(Na,!0,!0)},$z=function(t,r,a,n,i,o,c,u){var h=(t._pt&&t._ptCache||(t._ptCache={}))[r],m,f,p,v;if(!h)for(h=t._ptCache[r]=[],p=t._ptLookup,v=t._targets.length;v--;){if(m=p[v][r],m&&m.d&&m.d._pt)for(m=m.d._pt;m&&m.p!==r&&m.fp!==r;)m=m._next;if(!m)return dw=1,t.vars[r]="+=0",CN(t,c),dw=0,u?nm(r+" not eligible for reset"):1;h.push(m)}for(v=h.length;v--;)f=h[v],m=f._pt||f,m.s=(n||n===0)&&!i?n:m.s+(n||0)+o*m.c,m.c=a-m.s,f.e&&(f.e=ys(a)+cr(f.e)),f.b&&(f.b=m.s+cr(f.b))},Uz=function(t,r){var a=t[0]?Po(t[0]).harness:0,n=a&&a.aliases,i,o,c,u;if(!n)return r;i=fd({},r);for(o in n)if(o in i)for(u=n[o].split(","),c=u.length;c--;)i[u[c]]=i[o];return i},Vz=function(t,r,a,n){var i=r.ease||n||"power1.inOut",o,c;if(xr(r))c=a[t]||(a[t]=[]),r.forEach(function(u,h){return c.push({t:h/(r.length-1)*100,v:u,e:i})});else for(o in r)c=a[o]||(a[o]=[]),o==="ease"||c.push({t:parseFloat(t),v:r[o],e:i})},$h=function(t,r,a,n,i){return ms(t)?t.call(r,a,n,i):qs(t)&&~t.indexOf("random(")?lm(t):t},JE=NN+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",eA={};Ir(JE+",id,stagger,delay,duration,paused,scrollTrigger",function(s){return eA[s]=1});var Rs=(function(s){bE(t,s);function t(a,n,i,o){var c;typeof n=="number"&&(i.duration=n,n=i,i=null),c=s.call(this,o?n:zh(n))||this;var u=c.vars,h=u.duration,m=u.delay,f=u.immediateRender,p=u.stagger,v=u.overwrite,g=u.keyframes,y=u.defaults,w=u.scrollTrigger,N=u.yoyoEase,k=n.parent||ss,S=(xr(a)||vE(a)?wi(a[0]):"length"in n)?[a]:_a(a),_,T,E,z,O,C,A,X;if(c._targets=S.length?_N(S):nm("GSAP target "+a+" not found. https://gsap.com",!na.nullTargetWarn)||[],c._ptLookup=[],c._overwrite=v,g||p||z0(h)||z0(m)){if(n=c.vars,_=c.timeline=new vr({data:"nested",defaults:y||{},targets:k&&k.data==="nested"?k.vars.targets:S}),_.kill(),_.parent=_._dp=di(c),_._start=0,p||z0(h)||z0(m)){if(z=S.length,A=p&&FE(p),Tn(p))for(O in p)~JE.indexOf(O)&&(X||(X={}),X[O]=p[O]);for(T=0;T<z;T++)E=Kf(n,eA),E.stagger=0,N&&(E.yoyoEase=N),X&&fd(E,X),C=S[T],E.duration=+$h(h,di(c),T,C,S),E.delay=(+$h(m,di(c),T,C,S)||0)-c._delay,!p&&z===1&&E.delay&&(c._delay=m=E.delay,c._start+=m,E.delay=0),_.to(C,E,A?A(T,C,S):0),_._ease=_t.none;_.duration()?h=m=0:c.timeline=0}else if(g){zh(la(_.vars.defaults,{ease:"none"})),_._ease=Fo(g.ease||n.ease||"none");var I=0,V,R,H;if(xr(g))g.forEach(function(ee){return _.to(S,ee,">")}),_.duration();else{E={};for(O in g)O==="ease"||O==="easeEach"||Vz(O,g[O],E,g.easeEach);for(O in E)for(V=E[O].sort(function(ee,se){return ee.t-se.t}),I=0,T=0;T<V.length;T++)R=V[T],H={ease:R.e,duration:(R.t-(T?V[T-1].t:0))/100*h},H[O]=R.v,_.to(S,H,I),I+=H.duration;_.duration()<h&&_.to({},{duration:h-_.duration()})}}h||c.duration(h=_.duration())}else c.timeline=0;return v===!0&&!gN&&(pl=di(c),ss.killTweensOf(S),pl=0),gn(k,di(c),i),n.reversed&&c.reverse(),n.paused&&c.paused(!0),(f||!h&&!g&&c._start===Ms(k._time)&&zr(f)&&vz(di(c))&&k.data!=="nested")&&(c._tTime=-Wt,c.render(Math.max(0,-m)||0)),w&&OE(di(c),w),c}var r=t.prototype;return r.render=function(n,i,o){var c=this._time,u=this._tDur,h=this._dur,m=n<0,f=n>u-Wt&&!m?u:n<Wt?0:n,p,v,g,y,w,N,k,S,_;if(!h)wz(this,n,i,o);else if(f!==this._tTime||!n||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==m||this._lazy){if(p=f,S=this.timeline,this._repeat){if(y=h+this._rDelay,this._repeat<-1&&m)return this.totalTime(y*100+n,i,o);if(p=Ms(f%y),f===u?(g=this._repeat,p=h):(w=Ms(f/y),g=~~w,g&&g===w?(p=h,g--):p>h&&(p=h)),N=this._yoyo&&g&1,N&&(_=this._yEase,p=h-p),w=pd(this._tTime,y),p===c&&!o&&this._initted&&g===w)return this._tTime=f,this;g!==w&&(S&&this._yEase&&KE(S,N),this.vars.repeatRefresh&&!N&&!this._lock&&p!==y&&this._initted&&(this._lock=o=1,this.render(Ms(y*g),!0).invalidate()._lock=0))}if(!this._initted){if(LE(this,m?n:p,o,i,f))return this._tTime=0,this;if(c!==this._time&&!(o&&this.vars.repeatRefresh&&g!==w))return this;if(h!==this._dur)return this.render(n,i,o)}if(this._tTime=f,this._time=p,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=k=(_||this._ease)(p/h),this._from&&(this.ratio=k=1-k),!c&&f&&!i&&!w&&(aa(this,"onStart"),this._tTime!==f))return this;for(v=this._pt;v;)v.r(k,v.d),v=v._next;S&&S.render(n<0?n:S._dur*S._ease(p/this._dur),i,o)||this._startAt&&(this._zTime=n),this._onUpdate&&!i&&(m&&nw(this,n,i,o),aa(this,"onUpdate")),this._repeat&&g!==w&&this.vars.onRepeat&&!i&&this.parent&&aa(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(m&&!this._onUpdate&&nw(this,n,!0,!0),(n||!h)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&El(this,1),!i&&!(m&&!c)&&(f||c||N)&&(aa(this,f===u?"onComplete":"onReverseComplete",!0),this._prom&&!(f<u&&this.timeScale()>0)&&this._prom()))}return this},r.targets=function(){return this._targets},r.invalidate=function(n){return(!n||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(n),s.prototype.invalidate.call(this,n)},r.resetTo=function(n,i,o,c,u){om||ra.wake(),this._ts||this.play();var h=Math.min(this._dur,(this._dp._time-this._start)*this._ts),m;return this._initted||CN(this,h),m=this._ease(h/this._dur),$z(this,n,i,o,c,m,h,u)?this.resetTo(n,i,o,c,1):(_p(this,0),this.parent||RE(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},r.kill=function(n,i){if(i===void 0&&(i="all"),!n&&(!i||i==="all"))return this._lazy=this._pt=0,this.parent?Ah(this):this.scrollTrigger&&this.scrollTrigger.kill(!!tr),this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(n,i,pl&&pl.vars.overwrite!==!0)._first||Ah(this),this.parent&&o!==this.timeline.totalDuration()&&gd(this,this._dur*this.timeline._tDur/o,0,1),this}var c=this._targets,u=n?_a(n):c,h=this._ptLookup,m=this._pt,f,p,v,g,y,w,N;if((!i||i==="all")&&bz(c,u))return i==="all"&&(this._pt=0),Ah(this);for(f=this._op=this._op||[],i!=="all"&&(qs(i)&&(y={},Ir(i,function(k){return y[k]=1}),i=y),i=Uz(c,i)),N=c.length;N--;)if(~u.indexOf(c[N])){p=h[N],i==="all"?(f[N]=i,g=p,v={}):(v=f[N]=f[N]||{},g=i);for(y in g)w=p&&p[y],w&&((!("kill"in w.d)||w.d.kill(y)===!0)&&wp(this,w,"_pt"),delete p[y]),v!=="all"&&(v[y]=1)}return this._initted&&!this._pt&&m&&Ah(this),this},t.to=function(n,i){return new t(n,i,arguments[2])},t.from=function(n,i){return Ih(1,arguments)},t.delayedCall=function(n,i,o,c){return new t(i,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:n,onComplete:i,onReverseComplete:i,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:c})},t.fromTo=function(n,i,o){return Ih(2,arguments)},t.set=function(n,i){return i.duration=0,i.repeatDelay||(i.repeat=0),new t(n,i)},t.killTweensOf=function(n,i,o){return ss.killTweensOf(n,i,o)},t})(cm);la(Rs.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Ir("staggerTo,staggerFrom,staggerFromTo",function(s){Rs[s]=function(){var t=new vr,r=lw.call(arguments,0);return r.splice(s==="staggerFromTo"?5:4,0,0),t[s].apply(t,r)}});var TN=function(t,r,a){return t[r]=a},tA=function(t,r,a){return t[r](a)},Hz=function(t,r,a,n){return t[r](n.fp,a)},qz=function(t,r,a){return t.setAttribute(r,a)},EN=function(t,r){return ms(t[r])?tA:bN(t[r])&&t.setAttribute?qz:TN},sA=function(t,r){return r.set(r.t,r.p,Math.round((r.s+r.c*t)*1e6)/1e6,r)},Wz=function(t,r){return r.set(r.t,r.p,!!(r.s+r.c*t),r)},rA=function(t,r){var a=r._pt,n="";if(!t&&r.b)n=r.b;else if(t===1&&r.e)n=r.e;else{for(;a;)n=a.p+(a.m?a.m(a.s+a.c*t):Math.round((a.s+a.c*t)*1e4)/1e4)+n,a=a._next;n+=r.c}r.set(r.t,r.p,n,r)},AN=function(t,r){for(var a=r._pt;a;)a.r(t,a.d),a=a._next},Yz=function(t,r,a,n){for(var i=this._pt,o;i;)o=i._next,i.p===n&&i.modifier(t,r,a),i=o},Gz=function(t){for(var r=this._pt,a,n;r;)n=r._next,r.p===t&&!r.op||r.op===t?wp(this,r,"_pt"):r.dep||(a=1),r=n;return!a},Kz=function(t,r,a,n){n.mSet(t,r,n.m.call(n.tween,a,n.mt),n)},aA=function(t){for(var r=t._pt,a,n,i,o;r;){for(a=r._next,n=i;n&&n.pr>r.pr;)n=n._next;(r._prev=n?n._prev:o)?r._prev._next=r:i=r,(r._next=n)?n._prev=r:o=r,r=a}t._pt=i},$r=(function(){function s(r,a,n,i,o,c,u,h,m){this.t=a,this.s=i,this.c=o,this.p=n,this.r=c||sA,this.d=u||this,this.set=h||TN,this.pr=m||0,this._next=r,r&&(r._prev=this)}var t=s.prototype;return t.modifier=function(a,n,i){this.mSet=this.mSet||this.set,this.set=Kz,this.m=a,this.mt=i,this.tween=n},s})();Ir(NN+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(s){return wN[s]=1});ia.TweenMax=ia.TweenLite=Rs;ia.TimelineLite=ia.TimelineMax=vr;ss=new vr({sortChildren:!1,defaults:xd,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});na.stringFilter=YE;var zo=[],Mf={},Xz=[],Q4=0,Zz=0,py=function(t){return(Mf[t]||Xz).map(function(r){return r()})},uw=function(){var t=Date.now(),r=[];t-Q4>2&&(py("matchMediaInit"),zo.forEach(function(a){var n=a.queries,i=a.conditions,o,c,u,h;for(c in n)o=xn.matchMedia(n[c]).matches,o&&(u=1),o!==i[c]&&(i[c]=o,h=1);h&&(a.revert(),u&&r.push(a))}),py("matchMediaRevert"),r.forEach(function(a){return a.onMatch(a,function(n){return a.add(null,n)})}),Q4=t,py("matchMedia"))},nA=(function(){function s(r,a){this.selector=a&&ow(a),this.data=[],this._r=[],this.isReverted=!1,this.id=Zz++,r&&this.add(r)}var t=s.prototype;return t.add=function(a,n,i){ms(a)&&(i=n,n=a,a=ms);var o=this,c=function(){var h=Qt,m=o.selector,f;return h&&h!==o&&h.data.push(o),i&&(o.selector=ow(i)),Qt=o,f=n.apply(o,arguments),ms(f)&&o._r.push(f),Qt=h,o.selector=m,o.isReverted=!1,f};return o.last=c,a===ms?c(o,function(u){return o.add(null,u)}):a?o[a]=c:c},t.ignore=function(a){var n=Qt;Qt=null,a(this),Qt=n},t.getTweens=function(){var a=[];return this.data.forEach(function(n){return n instanceof s?a.push.apply(a,n.getTweens()):n instanceof Rs&&!(n.parent&&n.parent.data==="nested")&&a.push(n)}),a},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(a,n){var i=this;if(a?(function(){for(var c=i.getTweens(),u=i.data.length,h;u--;)h=i.data[u],h.data==="isFlip"&&(h.revert(),h.getChildren(!0,!0,!1).forEach(function(m){return c.splice(c.indexOf(m),1)}));for(c.map(function(m){return{g:m._dur||m._delay||m._sat&&!m._sat.vars.immediateRender?m.globalTime(0):-1/0,t:m}}).sort(function(m,f){return f.g-m.g||-1/0}).forEach(function(m){return m.t.revert(a)}),u=i.data.length;u--;)h=i.data[u],h instanceof vr?h.data!=="nested"&&(h.scrollTrigger&&h.scrollTrigger.revert(),h.kill()):!(h instanceof Rs)&&h.revert&&h.revert(a);i._r.forEach(function(m){return m(a,i)}),i.isReverted=!0})():this.data.forEach(function(c){return c.kill&&c.kill()}),this.clear(),n)for(var o=zo.length;o--;)zo[o].id===this.id&&zo.splice(o,1)},t.revert=function(a){this.kill(a||{})},s})(),Qz=(function(){function s(r){this.contexts=[],this.scope=r,Qt&&Qt.data.push(this)}var t=s.prototype;return t.add=function(a,n,i){Tn(a)||(a={matches:a});var o=new nA(0,i||this.scope),c=o.conditions={},u,h,m;Qt&&!o.selector&&(o.selector=Qt.selector),this.contexts.push(o),n=o.add("onMatch",n),o.queries=a;for(h in a)h==="all"?m=1:(u=xn.matchMedia(a[h]),u&&(zo.indexOf(o)<0&&zo.push(o),(c[h]=u.matches)&&(m=1),u.addListener?u.addListener(uw):u.addEventListener("change",uw)));return m&&n(o,function(f){return o.add(null,f)}),this},t.revert=function(a){this.kill(a||{})},t.kill=function(a){this.contexts.forEach(function(n){return n.kill(a,!0)})},s})(),Zf={registerPlugin:function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];r.forEach(function(n){return HE(n)})},timeline:function(t){return new vr(t)},getTweensOf:function(t,r){return ss.getTweensOf(t,r)},getProperty:function(t,r,a,n){qs(t)&&(t=_a(t)[0]);var i=Po(t||{}).get,o=a?DE:AE;return a==="native"&&(a=""),t&&(r?o((ea[r]&&ea[r].get||i)(t,r,a,n)):function(c,u,h){return o((ea[c]&&ea[c].get||i)(t,c,u,h))})},quickSetter:function(t,r,a){if(t=_a(t),t.length>1){var n=t.map(function(m){return qr.quickSetter(m,r,a)}),i=n.length;return function(m){for(var f=i;f--;)n[f](m)}}t=t[0]||{};var o=ea[r],c=Po(t),u=c.harness&&(c.harness.aliases||{})[r]||r,h=o?function(m){var f=new o;Zc._pt=0,f.init(t,a?m+a:m,Zc,0,[t]),f.render(1,f),Zc._pt&&AN(1,Zc)}:c.set(t,u);return o?h:function(m){return h(t,u,a?m+a:m,c,1)}},quickTo:function(t,r,a){var n,i=qr.to(t,la((n={},n[r]="+=0.1",n.paused=!0,n.stagger=0,n),a||{})),o=function(u,h,m){return i.resetTo(r,u,h,m)};return o.tween=i,o},isTweening:function(t){return ss.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Fo(t.ease,xd.ease)),Y4(xd,t||{})},config:function(t){return Y4(na,t||{})},registerEffect:function(t){var r=t.name,a=t.effect,n=t.plugins,i=t.defaults,o=t.extendTimeline;(n||"").split(",").forEach(function(c){return c&&!ea[c]&&!ia[c]&&nm(r+" effect requires "+c+" plugin.")}),hy[r]=function(c,u,h){return a(_a(c),la(u||{},i),h)},o&&(vr.prototype[r]=function(c,u,h){return this.add(hy[r](c,Tn(u)?u:(h=u)&&{},this),h)})},registerEase:function(t,r){_t[t]=Fo(r)},parseEase:function(t,r){return arguments.length?Fo(t,r):_t},getById:function(t){return ss.getById(t)},exportRoot:function(t,r){t===void 0&&(t={});var a=new vr(t),n,i;for(a.smoothChildTiming=zr(t.smoothChildTiming),ss.remove(a),a._dp=0,a._time=a._tTime=ss._time,n=ss._first;n;)i=n._next,(r||!(!n._dur&&n instanceof Rs&&n.vars.onComplete===n._targets[0]))&&gn(a,n,n._start-n._delay),n=i;return gn(ss,a,0),a},context:function(t,r){return t?new nA(t,r):Qt},matchMedia:function(t){return new Qz(t)},matchMediaRefresh:function(){return zo.forEach(function(t){var r=t.conditions,a,n;for(n in r)r[n]&&(r[n]=!1,a=1);a&&t.revert()})||uw()},addEventListener:function(t,r){var a=Mf[t]||(Mf[t]=[]);~a.indexOf(r)||a.push(r)},removeEventListener:function(t,r){var a=Mf[t],n=a&&a.indexOf(r);n>=0&&a.splice(n,1)},utils:{wrap:Az,wrapYoyo:Dz,distribute:FE,random:IE,snap:zE,normalize:Ez,getUnit:cr,clamp:kz,splitColor:qE,toArray:_a,selector:ow,mapRange:UE,pipe:Cz,unitize:Tz,interpolate:Rz,shuffle:BE},install:kE,effects:hy,ticker:ra,updateRoot:vr.updateRoot,plugins:ea,globalTimeline:ss,core:{PropTween:$r,globals:SE,Tween:Rs,Timeline:vr,Animation:cm,getCache:Po,_removeLinkedListItem:wp,reverting:function(){return tr},context:function(t){return t&&Qt&&(Qt.data.push(t),t._ctx=Qt),Qt},suppressOverwrites:function(t){return gN=t}}};Ir("to,from,fromTo,delayedCall,set,killTweensOf",function(s){return Zf[s]=Rs[s]});ra.add(vr.updateRoot);Zc=Zf.to({},{duration:0});var Jz=function(t,r){for(var a=t._pt;a&&a.p!==r&&a.op!==r&&a.fp!==r;)a=a._next;return a},eI=function(t,r){var a=t._targets,n,i,o;for(n in r)for(i=a.length;i--;)o=t._ptLookup[i][n],o&&(o=o.d)&&(o._pt&&(o=Jz(o,n)),o&&o.modifier&&o.modifier(r[n],t,a[i],n))},gy=function(t,r){return{name:t,headless:1,rawVars:1,init:function(n,i,o){o._onInit=function(c){var u,h;if(qs(i)&&(u={},Ir(i,function(m){return u[m]=1}),i=u),r){u={};for(h in i)u[h]=r(i[h]);i=u}eI(c,i)}}}},qr=Zf.registerPlugin({name:"attr",init:function(t,r,a,n,i){var o,c,u;this.tween=a;for(o in r)u=t.getAttribute(o)||"",c=this.add(t,"setAttribute",(u||0)+"",r[o],n,i,0,0,o),c.op=o,c.b=u,this._props.push(o)},render:function(t,r){for(var a=r._pt;a;)tr?a.set(a.t,a.p,a.b,a):a.r(t,a.d),a=a._next}},{name:"endArray",headless:1,init:function(t,r){for(var a=r.length;a--;)this.add(t,a,t[a]||0,r[a],0,0,0,0,0,1)}},gy("roundProps",cw),gy("modifiers"),gy("snap",zE))||Zf;Rs.version=vr.version=qr.version="3.13.0";_E=1;yN()&&bd();_t.Power0;_t.Power1;_t.Power2;_t.Power3;_t.Power4;_t.Linear;_t.Quad;_t.Cubic;_t.Quart;_t.Quint;_t.Strong;_t.Elastic;_t.Back;_t.SteppedEase;_t.Bounce;_t.Sine;_t.Expo;_t.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var J4,gl,nd,DN,Eo,e6,RN,tI=function(){return typeof window<"u"},Ni={},_o=180/Math.PI,id=Math.PI/180,Fc=Math.atan2,t6=1e8,MN=/([A-Z])/g,sI=/(left|right|width|margin|padding|x)/i,rI=/[\s,\(]\S/,yn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},hw=function(t,r){return r.set(r.t,r.p,Math.round((r.s+r.c*t)*1e4)/1e4+r.u,r)},aI=function(t,r){return r.set(r.t,r.p,t===1?r.e:Math.round((r.s+r.c*t)*1e4)/1e4+r.u,r)},nI=function(t,r){return r.set(r.t,r.p,t?Math.round((r.s+r.c*t)*1e4)/1e4+r.u:r.b,r)},iI=function(t,r){var a=r.s+r.c*t;r.set(r.t,r.p,~~(a+(a<0?-.5:.5))+r.u,r)},iA=function(t,r){return r.set(r.t,r.p,t?r.e:r.b,r)},lA=function(t,r){return r.set(r.t,r.p,t!==1?r.b:r.e,r)},lI=function(t,r,a){return t.style[r]=a},oI=function(t,r,a){return t.style.setProperty(r,a)},cI=function(t,r,a){return t._gsap[r]=a},dI=function(t,r,a){return t._gsap.scaleX=t._gsap.scaleY=a},uI=function(t,r,a,n,i){var o=t._gsap;o.scaleX=o.scaleY=a,o.renderTransform(i,o)},hI=function(t,r,a,n,i){var o=t._gsap;o[r]=a,o.renderTransform(i,o)},rs="transform",Ur=rs+"Origin",mI=function s(t,r){var a=this,n=this.target,i=n.style,o=n._gsap;if(t in Ni&&i){if(this.tfm=this.tfm||{},t!=="transform")t=yn[t]||t,~t.indexOf(",")?t.split(",").forEach(function(c){return a.tfm[c]=ui(n,c)}):this.tfm[t]=o.x?o[t]:ui(n,t),t===Ur&&(this.tfm.zOrigin=o.zOrigin);else return yn.transform.split(",").forEach(function(c){return s.call(a,c,r)});if(this.props.indexOf(rs)>=0)return;o.svg&&(this.svgo=n.getAttribute("data-svg-origin"),this.props.push(Ur,r,"")),t=rs}(i||r)&&this.props.push(t,r,i[t])},oA=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},xI=function(){var t=this.props,r=this.target,a=r.style,n=r._gsap,i,o;for(i=0;i<t.length;i+=3)t[i+1]?t[i+1]===2?r[t[i]](t[i+2]):r[t[i]]=t[i+2]:t[i+2]?a[t[i]]=t[i+2]:a.removeProperty(t[i].substr(0,2)==="--"?t[i]:t[i].replace(MN,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)n[o]=this.tfm[o];n.svg&&(n.renderTransform(),r.setAttribute("data-svg-origin",this.svgo||"")),i=RN(),(!i||!i.isStart)&&!a[rs]&&(oA(a),n.zOrigin&&a[Ur]&&(a[Ur]+=" "+n.zOrigin+"px",n.zOrigin=0,n.renderTransform()),n.uncache=1)}},cA=function(t,r){var a={target:t,props:[],revert:xI,save:mI};return t._gsap||qr.core.getCache(t),r&&t.style&&t.nodeType&&r.split(",").forEach(function(n){return a.save(n)}),a},dA,mw=function(t,r){var a=gl.createElementNS?gl.createElementNS((r||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):gl.createElement(t);return a&&a.style?a:gl.createElement(t)},ka=function s(t,r,a){var n=getComputedStyle(t);return n[r]||n.getPropertyValue(r.replace(MN,"-$1").toLowerCase())||n.getPropertyValue(r)||!a&&s(t,yd(r)||r,1)||""},s6="O,Moz,ms,Ms,Webkit".split(","),yd=function(t,r,a){var n=r||Eo,i=n.style,o=5;if(t in i&&!a)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);o--&&!(s6[o]+t in i););return o<0?null:(o===3?"ms":o>=0?s6[o]:"")+t},xw=function(){tI()&&window.document&&(J4=window,gl=J4.document,nd=gl.documentElement,Eo=mw("div")||{style:{}},mw("div"),rs=yd(rs),Ur=rs+"Origin",Eo.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",dA=!!yd("perspective"),RN=qr.core.reverting,DN=1)},r6=function(t){var r=t.ownerSVGElement,a=mw("svg",r&&r.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=t.cloneNode(!0),i;n.style.display="block",a.appendChild(n),nd.appendChild(a);try{i=n.getBBox()}catch{}return a.removeChild(n),nd.removeChild(a),i},a6=function(t,r){for(var a=r.length;a--;)if(t.hasAttribute(r[a]))return t.getAttribute(r[a])},uA=function(t){var r,a;try{r=t.getBBox()}catch{r=r6(t),a=1}return r&&(r.width||r.height)||a||(r=r6(t)),r&&!r.width&&!r.x&&!r.y?{x:+a6(t,["x","cx","x1"])||0,y:+a6(t,["y","cy","y1"])||0,width:0,height:0}:r},hA=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&uA(t))},qo=function(t,r){if(r){var a=t.style,n;r in Ni&&r!==Ur&&(r=rs),a.removeProperty?(n=r.substr(0,2),(n==="ms"||r.substr(0,6)==="webkit")&&(r="-"+r),a.removeProperty(n==="--"?r:r.replace(MN,"-$1").toLowerCase())):a.removeAttribute(r)}},bl=function(t,r,a,n,i,o){var c=new $r(t._pt,r,a,0,1,o?lA:iA);return t._pt=c,c.b=n,c.e=i,t._props.push(a),c},n6={deg:1,rad:1,turn:1},fI={grid:1,flex:1},Al=function s(t,r,a,n){var i=parseFloat(a)||0,o=(a+"").trim().substr((i+"").length)||"px",c=Eo.style,u=sI.test(r),h=t.tagName.toLowerCase()==="svg",m=(h?"client":"offset")+(u?"Width":"Height"),f=100,p=n==="px",v=n==="%",g,y,w,N;if(n===o||!i||n6[n]||n6[o])return i;if(o!=="px"&&!p&&(i=s(t,r,a,"px")),N=t.getCTM&&hA(t),(v||o==="%")&&(Ni[r]||~r.indexOf("adius")))return g=N?t.getBBox()[u?"width":"height"]:t[m],ys(v?i/g*f:i/100*g);if(c[u?"width":"height"]=f+(p?o:n),y=n!=="rem"&&~r.indexOf("adius")||n==="em"&&t.appendChild&&!h?t:t.parentNode,N&&(y=(t.ownerSVGElement||{}).parentNode),(!y||y===gl||!y.appendChild)&&(y=gl.body),w=y._gsap,w&&v&&w.width&&u&&w.time===ra.time&&!w.uncache)return ys(i/w.width*f);if(v&&(r==="height"||r==="width")){var k=t.style[r];t.style[r]=f+n,g=t[m],k?t.style[r]=k:qo(t,r)}else(v||o==="%")&&!fI[ka(y,"display")]&&(c.position=ka(t,"position")),y===t&&(c.position="static"),y.appendChild(Eo),g=Eo[m],y.removeChild(Eo),c.position="absolute";return u&&v&&(w=Po(y),w.time=ra.time,w.width=y[m]),ys(p?g*i/f:g&&i?f/g*i:0)},ui=function(t,r,a,n){var i;return DN||xw(),r in yn&&r!=="transform"&&(r=yn[r],~r.indexOf(",")&&(r=r.split(",")[0])),Ni[r]&&r!=="transform"?(i=um(t,n),i=r!=="transformOrigin"?i[r]:i.svg?i.origin:Jf(ka(t,Ur))+" "+i.zOrigin+"px"):(i=t.style[r],(!i||i==="auto"||n||~(i+"").indexOf("calc("))&&(i=Qf[r]&&Qf[r](t,r,a)||ka(t,r)||TE(t,r)||(r==="opacity"?1:0))),a&&!~(i+"").trim().indexOf(" ")?Al(t,r,i,a)+a:i},pI=function(t,r,a,n){if(!a||a==="none"){var i=yd(r,t,1),o=i&&ka(t,i,1);o&&o!==a?(r=i,a=o):r==="borderColor"&&(a=ka(t,"borderTopColor"))}var c=new $r(this._pt,t.style,r,0,1,rA),u=0,h=0,m,f,p,v,g,y,w,N,k,S,_,T;if(c.b=a,c.e=n,a+="",n+="",n.substring(0,6)==="var(--"&&(n=ka(t,n.substring(4,n.indexOf(")")))),n==="auto"&&(y=t.style[r],t.style[r]=n,n=ka(t,r)||n,y?t.style[r]=y:qo(t,r)),m=[a,n],YE(m),a=m[0],n=m[1],p=a.match(Xc)||[],T=n.match(Xc)||[],T.length){for(;f=Xc.exec(n);)w=f[0],k=n.substring(u,f.index),g?g=(g+1)%5:(k.substr(-5)==="rgba("||k.substr(-5)==="hsla(")&&(g=1),w!==(y=p[h++]||"")&&(v=parseFloat(y)||0,_=y.substr((v+"").length),w.charAt(1)==="="&&(w=ad(v,w)+_),N=parseFloat(w),S=w.substr((N+"").length),u=Xc.lastIndex-S.length,S||(S=S||na.units[r]||_,u===n.length&&(n+=S,c.e+=S)),_!==S&&(v=Al(t,r,y,S)||0),c._pt={_next:c._pt,p:k||h===1?k:",",s:v,c:N-v,m:g&&g<4||r==="zIndex"?Math.round:0});c.c=u<n.length?n.substring(u,n.length):""}else c.r=r==="display"&&n==="none"?lA:iA;return wE.test(n)&&(c.e=0),this._pt=c,c},i6={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},gI=function(t){var r=t.split(" "),a=r[0],n=r[1]||"50%";return(a==="top"||a==="bottom"||n==="left"||n==="right")&&(t=a,a=n,n=t),r[0]=i6[a]||a,r[1]=i6[n]||n,r.join(" ")},bI=function(t,r){if(r.tween&&r.tween._time===r.tween._dur){var a=r.t,n=a.style,i=r.u,o=a._gsap,c,u,h;if(i==="all"||i===!0)n.cssText="",u=1;else for(i=i.split(","),h=i.length;--h>-1;)c=i[h],Ni[c]&&(u=1,c=c==="transformOrigin"?Ur:rs),qo(a,c);u&&(qo(a,rs),o&&(o.svg&&a.removeAttribute("transform"),n.scale=n.rotate=n.translate="none",um(a,1),o.uncache=1,oA(n)))}},Qf={clearProps:function(t,r,a,n,i){if(i.data!=="isFromStart"){var o=t._pt=new $r(t._pt,r,a,0,0,bI);return o.u=n,o.pr=-10,o.tween=i,t._props.push(a),1}}},dm=[1,0,0,1,0,0],mA={},xA=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},l6=function(t){var r=ka(t,rs);return xA(r)?dm:r.substr(7).match(jE).map(ys)},ON=function(t,r){var a=t._gsap||Po(t),n=t.style,i=l6(t),o,c,u,h;return a.svg&&t.getAttribute("transform")?(u=t.transform.baseVal.consolidate().matrix,i=[u.a,u.b,u.c,u.d,u.e,u.f],i.join(",")==="1,0,0,1,0,0"?dm:i):(i===dm&&!t.offsetParent&&t!==nd&&!a.svg&&(u=n.display,n.display="block",o=t.parentNode,(!o||!t.offsetParent&&!t.getBoundingClientRect().width)&&(h=1,c=t.nextElementSibling,nd.appendChild(t)),i=l6(t),u?n.display=u:qo(t,"display"),h&&(c?o.insertBefore(t,c):o?o.appendChild(t):nd.removeChild(t))),r&&i.length>6?[i[0],i[1],i[4],i[5],i[12],i[13]]:i)},fw=function(t,r,a,n,i,o){var c=t._gsap,u=i||ON(t,!0),h=c.xOrigin||0,m=c.yOrigin||0,f=c.xOffset||0,p=c.yOffset||0,v=u[0],g=u[1],y=u[2],w=u[3],N=u[4],k=u[5],S=r.split(" "),_=parseFloat(S[0])||0,T=parseFloat(S[1])||0,E,z,O,C;a?u!==dm&&(z=v*w-g*y)&&(O=_*(w/z)+T*(-y/z)+(y*k-w*N)/z,C=_*(-g/z)+T*(v/z)-(v*k-g*N)/z,_=O,T=C):(E=uA(t),_=E.x+(~S[0].indexOf("%")?_/100*E.width:_),T=E.y+(~(S[1]||S[0]).indexOf("%")?T/100*E.height:T)),n||n!==!1&&c.smooth?(N=_-h,k=T-m,c.xOffset=f+(N*v+k*y)-N,c.yOffset=p+(N*g+k*w)-k):c.xOffset=c.yOffset=0,c.xOrigin=_,c.yOrigin=T,c.smooth=!!n,c.origin=r,c.originIsAbsolute=!!a,t.style[Ur]="0px 0px",o&&(bl(o,c,"xOrigin",h,_),bl(o,c,"yOrigin",m,T),bl(o,c,"xOffset",f,c.xOffset),bl(o,c,"yOffset",p,c.yOffset)),t.setAttribute("data-svg-origin",_+" "+T)},um=function(t,r){var a=t._gsap||new ZE(t);if("x"in a&&!r&&!a.uncache)return a;var n=t.style,i=a.scaleX<0,o="px",c="deg",u=getComputedStyle(t),h=ka(t,Ur)||"0",m,f,p,v,g,y,w,N,k,S,_,T,E,z,O,C,A,X,I,V,R,H,ee,se,W,te,J,K,$,ie,ne,oe;return m=f=p=y=w=N=k=S=_=0,v=g=1,a.svg=!!(t.getCTM&&hA(t)),u.translate&&((u.translate!=="none"||u.scale!=="none"||u.rotate!=="none")&&(n[rs]=(u.translate!=="none"?"translate3d("+(u.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(u.rotate!=="none"?"rotate("+u.rotate+") ":"")+(u.scale!=="none"?"scale("+u.scale.split(" ").join(",")+") ":"")+(u[rs]!=="none"?u[rs]:"")),n.scale=n.rotate=n.translate="none"),z=ON(t,a.svg),a.svg&&(a.uncache?(W=t.getBBox(),h=a.xOrigin-W.x+"px "+(a.yOrigin-W.y)+"px",se=""):se=!r&&t.getAttribute("data-svg-origin"),fw(t,se||h,!!se||a.originIsAbsolute,a.smooth!==!1,z)),T=a.xOrigin||0,E=a.yOrigin||0,z!==dm&&(X=z[0],I=z[1],V=z[2],R=z[3],m=H=z[4],f=ee=z[5],z.length===6?(v=Math.sqrt(X*X+I*I),g=Math.sqrt(R*R+V*V),y=X||I?Fc(I,X)*_o:0,k=V||R?Fc(V,R)*_o+y:0,k&&(g*=Math.abs(Math.cos(k*id))),a.svg&&(m-=T-(T*X+E*V),f-=E-(T*I+E*R))):(oe=z[6],ie=z[7],J=z[8],K=z[9],$=z[10],ne=z[11],m=z[12],f=z[13],p=z[14],O=Fc(oe,$),w=O*_o,O&&(C=Math.cos(-O),A=Math.sin(-O),se=H*C+J*A,W=ee*C+K*A,te=oe*C+$*A,J=H*-A+J*C,K=ee*-A+K*C,$=oe*-A+$*C,ne=ie*-A+ne*C,H=se,ee=W,oe=te),O=Fc(-V,$),N=O*_o,O&&(C=Math.cos(-O),A=Math.sin(-O),se=X*C-J*A,W=I*C-K*A,te=V*C-$*A,ne=R*A+ne*C,X=se,I=W,V=te),O=Fc(I,X),y=O*_o,O&&(C=Math.cos(O),A=Math.sin(O),se=X*C+I*A,W=H*C+ee*A,I=I*C-X*A,ee=ee*C-H*A,X=se,H=W),w&&Math.abs(w)+Math.abs(y)>359.9&&(w=y=0,N=180-N),v=ys(Math.sqrt(X*X+I*I+V*V)),g=ys(Math.sqrt(ee*ee+oe*oe)),O=Fc(H,ee),k=Math.abs(O)>2e-4?O*_o:0,_=ne?1/(ne<0?-ne:ne):0),a.svg&&(se=t.getAttribute("transform"),a.forceCSS=t.setAttribute("transform","")||!xA(ka(t,rs)),se&&t.setAttribute("transform",se))),Math.abs(k)>90&&Math.abs(k)<270&&(i?(v*=-1,k+=y<=0?180:-180,y+=y<=0?180:-180):(g*=-1,k+=k<=0?180:-180)),r=r||a.uncache,a.x=m-((a.xPercent=m&&(!r&&a.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-m)?-50:0)))?t.offsetWidth*a.xPercent/100:0)+o,a.y=f-((a.yPercent=f&&(!r&&a.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-f)?-50:0)))?t.offsetHeight*a.yPercent/100:0)+o,a.z=p+o,a.scaleX=ys(v),a.scaleY=ys(g),a.rotation=ys(y)+c,a.rotationX=ys(w)+c,a.rotationY=ys(N)+c,a.skewX=k+c,a.skewY=S+c,a.transformPerspective=_+o,(a.zOrigin=parseFloat(h.split(" ")[2])||!r&&a.zOrigin||0)&&(n[Ur]=Jf(h)),a.xOffset=a.yOffset=0,a.force3D=na.force3D,a.renderTransform=a.svg?vI:dA?fA:yI,a.uncache=0,a},Jf=function(t){return(t=t.split(" "))[0]+" "+t[1]},by=function(t,r,a){var n=cr(r);return ys(parseFloat(r)+parseFloat(Al(t,"x",a+"px",n)))+n},yI=function(t,r){r.z="0px",r.rotationY=r.rotationX="0deg",r.force3D=0,fA(t,r)},ho="0deg",uh="0px",mo=") ",fA=function(t,r){var a=r||this,n=a.xPercent,i=a.yPercent,o=a.x,c=a.y,u=a.z,h=a.rotation,m=a.rotationY,f=a.rotationX,p=a.skewX,v=a.skewY,g=a.scaleX,y=a.scaleY,w=a.transformPerspective,N=a.force3D,k=a.target,S=a.zOrigin,_="",T=N==="auto"&&t&&t!==1||N===!0;if(S&&(f!==ho||m!==ho)){var E=parseFloat(m)*id,z=Math.sin(E),O=Math.cos(E),C;E=parseFloat(f)*id,C=Math.cos(E),o=by(k,o,z*C*-S),c=by(k,c,-Math.sin(E)*-S),u=by(k,u,O*C*-S+S)}w!==uh&&(_+="perspective("+w+mo),(n||i)&&(_+="translate("+n+"%, "+i+"%) "),(T||o!==uh||c!==uh||u!==uh)&&(_+=u!==uh||T?"translate3d("+o+", "+c+", "+u+") ":"translate("+o+", "+c+mo),h!==ho&&(_+="rotate("+h+mo),m!==ho&&(_+="rotateY("+m+mo),f!==ho&&(_+="rotateX("+f+mo),(p!==ho||v!==ho)&&(_+="skew("+p+", "+v+mo),(g!==1||y!==1)&&(_+="scale("+g+", "+y+mo),k.style[rs]=_||"translate(0, 0)"},vI=function(t,r){var a=r||this,n=a.xPercent,i=a.yPercent,o=a.x,c=a.y,u=a.rotation,h=a.skewX,m=a.skewY,f=a.scaleX,p=a.scaleY,v=a.target,g=a.xOrigin,y=a.yOrigin,w=a.xOffset,N=a.yOffset,k=a.forceCSS,S=parseFloat(o),_=parseFloat(c),T,E,z,O,C;u=parseFloat(u),h=parseFloat(h),m=parseFloat(m),m&&(m=parseFloat(m),h+=m,u+=m),u||h?(u*=id,h*=id,T=Math.cos(u)*f,E=Math.sin(u)*f,z=Math.sin(u-h)*-p,O=Math.cos(u-h)*p,h&&(m*=id,C=Math.tan(h-m),C=Math.sqrt(1+C*C),z*=C,O*=C,m&&(C=Math.tan(m),C=Math.sqrt(1+C*C),T*=C,E*=C)),T=ys(T),E=ys(E),z=ys(z),O=ys(O)):(T=f,O=p,E=z=0),(S&&!~(o+"").indexOf("px")||_&&!~(c+"").indexOf("px"))&&(S=Al(v,"x",o,"px"),_=Al(v,"y",c,"px")),(g||y||w||N)&&(S=ys(S+g-(g*T+y*z)+w),_=ys(_+y-(g*E+y*O)+N)),(n||i)&&(C=v.getBBox(),S=ys(S+n/100*C.width),_=ys(_+i/100*C.height)),C="matrix("+T+","+E+","+z+","+O+","+S+","+_+")",v.setAttribute("transform",C),k&&(v.style[rs]=C)},jI=function(t,r,a,n,i){var o=360,c=qs(i),u=parseFloat(i)*(c&&~i.indexOf("rad")?_o:1),h=u-n,m=n+h+"deg",f,p;return c&&(f=i.split("_")[1],f==="short"&&(h%=o,h!==h%(o/2)&&(h+=h<0?o:-o)),f==="cw"&&h<0?h=(h+o*t6)%o-~~(h/o)*o:f==="ccw"&&h>0&&(h=(h-o*t6)%o-~~(h/o)*o)),t._pt=p=new $r(t._pt,r,a,n,h,aI),p.e=m,p.u="deg",t._props.push(a),p},o6=function(t,r){for(var a in r)t[a]=r[a];return t},wI=function(t,r,a){var n=o6({},a._gsap),i="perspective,force3D,transformOrigin,svgOrigin",o=a.style,c,u,h,m,f,p,v,g;n.svg?(h=a.getAttribute("transform"),a.setAttribute("transform",""),o[rs]=r,c=um(a,1),qo(a,rs),a.setAttribute("transform",h)):(h=getComputedStyle(a)[rs],o[rs]=r,c=um(a,1),o[rs]=h);for(u in Ni)h=n[u],m=c[u],h!==m&&i.indexOf(u)<0&&(v=cr(h),g=cr(m),f=v!==g?Al(a,u,h,g):parseFloat(h),p=parseFloat(m),t._pt=new $r(t._pt,c,u,f,p-f,hw),t._pt.u=g||0,t._props.push(u));o6(c,n)};Ir("padding,margin,Width,Radius",function(s,t){var r="Top",a="Right",n="Bottom",i="Left",o=(t<3?[r,a,n,i]:[r+i,r+a,n+a,n+i]).map(function(c){return t<2?s+c:"border"+c+s});Qf[t>1?"border"+s:s]=function(c,u,h,m,f){var p,v;if(arguments.length<4)return p=o.map(function(g){return ui(c,g,h)}),v=p.join(" "),v.split(p[0]).length===5?p[0]:v;p=(m+"").split(" "),v={},o.forEach(function(g,y){return v[g]=p[y]=p[y]||p[(y-1)/2|0]}),c.init(u,v,f)}});var pA={name:"css",register:xw,targetTest:function(t){return t.style&&t.nodeType},init:function(t,r,a,n,i){var o=this._props,c=t.style,u=a.vars.startAt,h,m,f,p,v,g,y,w,N,k,S,_,T,E,z,O;DN||xw(),this.styles=this.styles||cA(t),O=this.styles.props,this.tween=a;for(y in r)if(y!=="autoRound"&&(m=r[y],!(ea[y]&&QE(y,r,a,n,t,i)))){if(v=typeof m,g=Qf[y],v==="function"&&(m=m.call(a,n,t,i),v=typeof m),v==="string"&&~m.indexOf("random(")&&(m=lm(m)),g)g(this,t,y,m,a)&&(z=1);else if(y.substr(0,2)==="--")h=(getComputedStyle(t).getPropertyValue(y)+"").trim(),m+="",kl.lastIndex=0,kl.test(h)||(w=cr(h),N=cr(m)),N?w!==N&&(h=Al(t,y,h,N)+N):w&&(m+=w),this.add(c,"setProperty",h,m,n,i,0,0,y),o.push(y),O.push(y,0,c[y]);else if(v!=="undefined"){if(u&&y in u?(h=typeof u[y]=="function"?u[y].call(a,n,t,i):u[y],qs(h)&&~h.indexOf("random(")&&(h=lm(h)),cr(h+"")||h==="auto"||(h+=na.units[y]||cr(ui(t,y))||""),(h+"").charAt(1)==="="&&(h=ui(t,y))):h=ui(t,y),p=parseFloat(h),k=v==="string"&&m.charAt(1)==="="&&m.substr(0,2),k&&(m=m.substr(2)),f=parseFloat(m),y in yn&&(y==="autoAlpha"&&(p===1&&ui(t,"visibility")==="hidden"&&f&&(p=0),O.push("visibility",0,c.visibility),bl(this,c,"visibility",p?"inherit":"hidden",f?"inherit":"hidden",!f)),y!=="scale"&&y!=="transform"&&(y=yn[y],~y.indexOf(",")&&(y=y.split(",")[0]))),S=y in Ni,S){if(this.styles.save(y),v==="string"&&m.substring(0,6)==="var(--"&&(m=ka(t,m.substring(4,m.indexOf(")"))),f=parseFloat(m)),_||(T=t._gsap,T.renderTransform&&!r.parseTransform||um(t,r.parseTransform),E=r.smoothOrigin!==!1&&T.smooth,_=this._pt=new $r(this._pt,c,rs,0,1,T.renderTransform,T,0,-1),_.dep=1),y==="scale")this._pt=new $r(this._pt,T,"scaleY",T.scaleY,(k?ad(T.scaleY,k+f):f)-T.scaleY||0,hw),this._pt.u=0,o.push("scaleY",y),y+="X";else if(y==="transformOrigin"){O.push(Ur,0,c[Ur]),m=gI(m),T.svg?fw(t,m,0,E,0,this):(N=parseFloat(m.split(" ")[2])||0,N!==T.zOrigin&&bl(this,T,"zOrigin",T.zOrigin,N),bl(this,c,y,Jf(h),Jf(m)));continue}else if(y==="svgOrigin"){fw(t,m,1,E,0,this);continue}else if(y in mA){jI(this,T,y,p,k?ad(p,k+m):m);continue}else if(y==="smoothOrigin"){bl(this,T,"smooth",T.smooth,m);continue}else if(y==="force3D"){T[y]=m;continue}else if(y==="transform"){wI(this,m,t);continue}}else y in c||(y=yd(y)||y);if(S||(f||f===0)&&(p||p===0)&&!rI.test(m)&&y in c)w=(h+"").substr((p+"").length),f||(f=0),N=cr(m)||(y in na.units?na.units[y]:w),w!==N&&(p=Al(t,y,h,N)),this._pt=new $r(this._pt,S?T:c,y,p,(k?ad(p,k+f):f)-p,!S&&(N==="px"||y==="zIndex")&&r.autoRound!==!1?iI:hw),this._pt.u=N||0,w!==N&&N!=="%"&&(this._pt.b=h,this._pt.r=nI);else if(y in c)pI.call(this,t,y,h,k?k+m:m);else if(y in t)this.add(t,y,h||t[y],k?k+m:m,n,i);else if(y!=="parseTransform"){jN(y,m);continue}S||(y in c?O.push(y,0,c[y]):typeof t[y]=="function"?O.push(y,2,t[y]()):O.push(y,1,h||t[y])),o.push(y)}}z&&aA(this)},render:function(t,r){if(r.tween._time||!RN())for(var a=r._pt;a;)a.r(t,a.d),a=a._next;else r.styles.revert()},get:ui,aliases:yn,getSetter:function(t,r,a){var n=yn[r];return n&&n.indexOf(",")<0&&(r=n),r in Ni&&r!==Ur&&(t._gsap.x||ui(t,"x"))?a&&e6===a?r==="scale"?dI:cI:(e6=a||{})&&(r==="scale"?uI:hI):t.style&&!bN(t.style[r])?lI:~r.indexOf("-")?oI:EN(t,r)},core:{_removeProperty:qo,_getMatrix:ON}};qr.utils.checkPrefix=yd;qr.core.getStyleSaver=cA;(function(s,t,r,a){var n=Ir(s+","+t+","+r,function(i){Ni[i]=1});Ir(t,function(i){na.units[i]="deg",mA[i]=1}),yn[n[13]]=s+","+t,Ir(a,function(i){var o=i.split(":");yn[o[1]]=n[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Ir("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(s){na.units[s]="px"});qr.registerPlugin(pA);var Js=qr.registerPlugin(pA)||qr;Js.core.Tween;const NI=({items:s=[]})=>e.jsx("div",{className:"menu-wrap",children:e.jsx("nav",{className:"menu",children:s.map((t,r)=>e.jsx(_I,{...t},r))})}),_I=({path:s,text:t,image:r,onClick:a})=>{const n=Oa(),i=fl.useRef(null),o=fl.useRef(null),c=fl.useRef(null),u={duration:.6,ease:"expo"},h=(y,w,N,k)=>{const S=y-N,_=w-k;return S*S+_*_},m=(y,w,N,k)=>{const S=h(y,w,N/2,0),_=h(y,w,N/2,k);return S<_?"top":"bottom"},f=y=>{if(!i.current||!o.current||!c.current)return;const w=i.current.getBoundingClientRect(),N=y.clientX-w.left,k=y.clientY-w.top,S=m(N,k,w.width,w.height);Js.timeline({defaults:u}).set(o.current,{y:S==="top"?"-101%":"101%"},0).set(c.current,{y:S==="top"?"101%":"-101%"},0).to([o.current,c.current],{y:"0%"},0)},p=y=>{if(!i.current||!o.current||!c.current)return;const w=i.current.getBoundingClientRect(),N=y.clientX-w.left,k=y.clientY-w.top,S=m(N,k,w.width,w.height);Js.timeline({defaults:u}).to(o.current,{y:S==="top"?"-101%":"101%"},0).to(c.current,{y:S==="top"?"101%":"-101%"},0)},v=()=>{n(s),a?.()},g=fl.useMemo(()=>Array.from({length:4}).map((y,w)=>e.jsxs(fl.Fragment,{children:[e.jsx("span",{children:t}),e.jsx("div",{className:"marquee__img",style:{backgroundImage:`url(${r})`}})]},w)),[t,r]);return e.jsxs("div",{className:"menu__item",ref:i,children:[e.jsx("div",{className:"menu__item-link",onClick:v,onMouseEnter:f,onMouseLeave:p,children:t}),e.jsx("div",{className:"marquee",ref:o,children:e.jsx("div",{className:"marquee__inner-wrap",ref:c,children:e.jsx("div",{className:"marquee__inner","aria-hidden":"true",children:g})})})]})},kI=[{path:"/",text:"",image:"https://picsum.photos/600/400?random=1",roles:["OWNER","TEAMLEAD"]},{path:"/projects",text:"",image:"https://picsum.photos/600/400?random=2",roles:["OWNER","TEAMLEAD"]},{path:"/project-files",text:" ",image:"https://picsum.photos/600/400?random=3",roles:["OWNER"]},{path:"/tasks",text:"",image:"https://picsum.photos/600/400?random=4",roles:["OWNER","TEAMLEAD"]},{path:"/tasks-archive",text:" ",image:"https://picsum.photos/600/400?random=5",roles:["OWNER"]},{path:"/my-tasks",text:" ",image:"https://picsum.photos/600/400?random=6",roles:["OWNER","EXECUTOR"]},{path:"/revisions",text:"",image:"https://picsum.photos/600/400?random=7",roles:["OWNER"]},{path:"/clients",text:"",image:"https://picsum.photos/600/400?random=8",roles:["OWNER","TEAMLEAD"]},{path:"/leads",text:"",image:"https://picsum.photos/600/400?random=9",roles:["OWNER","TEAMLEAD"]},{path:"/deals",text:"",image:"https://picsum.photos/600/400?random=10",roles:["OWNER","TEAMLEAD"]},{path:"/contractors",text:"",image:"https://picsum.photos/600/400?random=11",roles:["OWNER","TEAMLEAD"],readOnly:!0},{path:"/chats",text:"",image:"https://picsum.photos/600/400?random=12",roles:["OWNER","TEAMLEAD","EXECUTOR"]},{path:"/avito",text:"Avito",image:"https://picsum.photos/600/400?random=13",roles:["OWNER"]},{path:"/documents",text:"",image:"https://picsum.photos/600/400?random=14",roles:["OWNER","TEAMLEAD"],readOnly:!0},{path:"/transcription",text:"",image:"https://picsum.photos/600/400?random=27",roles:["OWNER","TEAMLEAD"]},{path:"/ai-calls",text:"AI ",image:"https://picsum.photos/600/400?random=29",roles:["OWNER","TEAMLEAD"]},{path:"/portfolio",text:"",image:"https://picsum.photos/600/400?random=15",roles:["OWNER"]},{path:"/finance",text:"",image:"https://picsum.photos/600/400?random=16",roles:["OWNER"]},{path:"/services",text:"",image:"https://picsum.photos/600/400?random=17",roles:["OWNER"]},{path:"/analytics",text:"",image:"https://picsum.photos/600/400?random=18",roles:["OWNER"]},{path:"/reports",text:"",image:"https://picsum.photos/600/400?random=19",roles:["OWNER"]},{path:"/notifications",text:"",image:"https://picsum.photos/600/400?random=20",roles:["OWNER"]},{path:"/automation",text:"",image:"https://picsum.photos/600/400?random=21",roles:["OWNER"]},{path:"/hosting",text:"",image:"https://picsum.photos/600/400?random=23",roles:["OWNER"]},{path:"/permissions",text:" ",image:"https://picsum.photos/600/400?random=24",roles:["OWNER"]},{path:"/timlead-regulations",text:"",image:"https://picsum.photos/600/400?random=28",roles:["OWNER"]},{path:"/users",text:"",image:"https://picsum.photos/600/400?random=25",roles:["OWNER"]},{path:"/settings",text:"",image:"https://picsum.photos/600/400?random=26",roles:["OWNER","TEAMLEAD","EXECUTOR"]}],SI=s=>s?s==="CLIENT"?[]:kI.filter(t=>t.roles.includes(s)):[],CI=({isOpen:s,onClose:t})=>{const{user:r,logout:a}=Rm(),n=j.useMemo(()=>SI(r?.role).map(h=>({path:h.path,text:h.text,image:h.image,onClick:t})),[r?.role,t]);j.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[s]);const i=()=>{a(),t()},o=()=>r?.firstName&&r?.lastName?`${r.firstName.charAt(0)}${r.lastName.charAt(0)}`.toUpperCase():r?.username?r.username.charAt(0).toUpperCase():"?",c=()=>r?.firstName&&r?.lastName?`${r.firstName} ${r.lastName}`:r?.username||"",u=()=>{switch(r?.role){case"OWNER":return"";case"TEAMLEAD":return"";case"EXECUTOR":return"";case"CLIENT":return"";default:return""}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`fixed inset-0 bg-black/60 backdrop-blur-sm z-40 transition-opacity duration-300 ${s?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:t}),e.jsxs("aside",{className:`fixed left-0 top-0 w-80 bg-gradient-to-b from-[#1a1d2e] via-[#1a1d2e] to-[#14161f] h-screen flex flex-col shadow-2xl overflow-hidden z-50 transition-transform duration-300 ${s?"translate-x-0":"-translate-x-full"}`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-purple-600/10 to-pink-600/10 rounded-full blur-3xl -mr-32 -mt-32"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-gradient-to-tr from-blue-600/10 to-cyan-600/10 rounded-full blur-3xl -ml-32 -mb-32"}),e.jsxs("div",{className:"relative px-6 py-6 border-b border-white/5 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 group cursor-pointer",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-purple-500 via-pink-500 to-red-500 flex items-center justify-center font-bold text-white text-xl shadow-lg group-hover:shadow-purple-500/50 transition-all duration-300 group-hover:scale-110",children:e.jsx(Ga,{className:"w-6 h-6"})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-[#1a1d2e] animate-pulse"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-xl font-bold text-white group-hover:text-purple-300 transition-colors",children:"CRM System"}),e.jsx("p",{className:"text-xs text-gray-400 group-hover:text-gray-300 transition-colors",children:"Nikolaev Studio"})]})]}),e.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-lg transition-all",title:" ",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-1 relative overflow-y-auto overflow-x-hidden scrollbar-hide",style:{height:"600px"},children:n.length>0?e.jsx(NI,{items:n}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-gray-400 text-sm",children:"  "})})}),e.jsxs("div",{className:"relative px-4 py-6 border-t border-white/5",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-500/10 to-pink-500/10 rounded-2xl p-4 backdrop-blur-sm border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold shadow-lg",children:o()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-white truncate",children:c()}),e.jsx("p",{className:"text-xs text-gray-400 truncate",children:r?.email||u()})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1 text-green-400",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{children:""})]}),e.jsxs("button",{onClick:i,className:"flex items-center gap-1 px-2 py-1 text-gray-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-all",title:"",children:[e.jsx(hE,{className:"w-3 h-3"}),e.jsx("span",{children:""})]})]})]}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:" 2025 CRM System"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"v2.0.0"})]})]})]})]})},TI=()=>{const{currentFont:s,setFont:t}=G9(),[r,a]=j.useState(!1),n=i=>{t(i),a(!1)};return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>a(!r),className:"flex items-center gap-2 px-4 py-2 bg-[#0a0a1a] border border-[#392e4e] rounded-lg hover:border-purple-500 transition-all",title:" ",children:[e.jsx(Wf,{className:"w-5 h-5 text-white"}),e.jsx("span",{className:"text-sm text-white hidden md:inline",children:s})]}),r&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)}),e.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-[#0a0a1a] border border-[#392e4e] rounded-xl shadow-2xl z-50 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-[#392e4e]",children:[e.jsxs("h3",{className:"text-white font-semibold flex items-center gap-2",children:[e.jsx(Wf,{className:"w-5 h-5"})," "]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"    "})]}),e.jsxs("div",{className:"max-h-96 overflow-y-auto",children:[e.jsx("div",{className:"px-3 py-2 bg-[#392e4e]/30 sticky top-0 z-10",children:e.jsx("h4",{className:"text-xs font-semibold text-purple-400 uppercase tracking-wider",children:" "})}),c4.filter(i=>i.category==="normal").map(i=>e.jsx("button",{onClick:()=>n(i.value),className:`w-full text-left px-4 py-3 hover:bg-[#392e4e]/20 transition-all border-b border-[#392e4e]/50 ${s===i.value?"bg-purple-500/10 border-l-4 border-l-purple-500":""}`,style:{fontFamily:`'${i.value}', sans-serif`},children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-white font-medium mb-1",children:i.name}),e.jsx("div",{className:"text-xs text-gray-400",children:i.description}),e.jsx("div",{className:"text-sm text-gray-300 mt-2",children:"   123"})]}),s===i.value&&e.jsx("div",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-purple-500 mt-1"})]})},i.value)),e.jsx("div",{className:"px-3 py-2 bg-[#392e4e]/30 sticky top-0 z-10 mt-2",children:e.jsxs("h4",{className:"text-xs font-semibold text-red-400 uppercase tracking-wider flex items-center gap-2",children:[e.jsx("span",{children:""}),"  "]})}),c4.filter(i=>i.category==="strange").map(i=>e.jsx("button",{onClick:()=>n(i.value),className:`w-full text-left px-4 py-3 hover:bg-red-500/10 transition-all border-b border-[#392e4e]/50 ${s===i.value?"bg-red-500/10 border-l-4 border-l-red-500":""}`,style:{fontFamily:`'${i.value}', sans-serif`},children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-white font-medium mb-1",children:i.name}),e.jsx("div",{className:"text-xs text-gray-400",children:i.description}),e.jsx("div",{className:"text-sm text-gray-300 mt-2",children:"   123"})]}),s===i.value&&e.jsx("div",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-red-500 mt-1"})]})},i.value))]})]})]})]})},EI=()=>{const s=Si(),t=Oa(),[r,a]=j.useState(!1),[n,i]=j.useState(null),{theme:o,setTheme:c}=Cm(),u=()=>{c(o==="monochrome"?"colorful":"monochrome")};j.useEffect(()=>{a(!1)},[s]),j.useEffect(()=>{const m=localStorage.getItem("auth");if(m)try{const f=JSON.parse(m);i(f)}catch(f){console.error("Error parsing auth:",f)}},[]);const h=()=>{localStorage.removeItem("auth"),t("/login")};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:[e.jsx(CI,{isOpen:r,onClose:()=>a(!1)}),e.jsxs("main",{className:"w-full",children:[e.jsx("div",{className:"sticky top-0 z-40 bg-white/80 backdrop-blur-md border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>a(!0),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:" ",children:e.jsx(mE,{className:"w-6 h-6 text-gray-700"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-purple-500 via-pink-500 to-red-500 flex items-center justify-center font-bold text-white text-sm shadow-lg",children:"N"}),e.jsx("h1",{className:"text-sm font-bold text-gray-900",children:"Nikolaev Code Studio CRM"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:u,className:"theme-toggle-btn relative p-2 rounded-lg border border-gray-200 hover:border-gray-300 bg-white hover:bg-gray-50 transition-all duration-200 group",title:o==="monochrome"?"  ":"  ",children:o==="monochrome"?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-gradient-to-br from-purple-500 via-pink-500 to-orange-500 shadow-sm"}),e.jsx("span",{className:"text-xs font-medium text-gray-600 hidden sm:inline",children:""})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-gradient-to-br from-gray-800 to-gray-400 shadow-sm"}),e.jsx("span",{className:"text-xs font-medium text-gray-600 hidden sm:inline",children:""})]})}),e.jsx(TI,{}),n&&e.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:e.jsx(lt,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:n.firstName||n.username}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:n.role==="owner"?"":n.role==="timlead"?"":""})]})]}),e.jsx("button",{onClick:h,className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors group",title:"",children:e.jsx(hE,{className:"w-4 h-4 text-gray-600 dark:text-gray-400 group-hover:text-red-600 dark:group-hover:text-red-400"})})]})]})]})}),e.jsx(nN,{})]})]})},AI=()=>{const{isAuthenticated:s,isLoading:t}=Rm();return t?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"..."})]})}):s?e.jsx(nN,{}):e.jsx(wT,{to:"/login",replace:!0})},DI=()=>{const s=Oa(),{login:t,isAuthenticated:r}=Rm(),[a,n]=j.useState(""),[i,o]=j.useState(""),[c,u]=j.useState(""),[h,m]=j.useState(!1),f=async p=>{p.preventDefault(),u(""),m(!0);try{await t(a,i),s("/",{replace:!0})}catch(v){console.error("Login error:",v),v.response?.status===401?u("   "):u("  .  .")}finally{m(!1)}};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 px-4",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-purple-300 dark:bg-purple-900 rounded-full mix-blend-multiply dark:mix-blend-soft-light filter blur-xl opacity-20 animate-blob"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-300 dark:bg-blue-900 rounded-full mix-blend-multiply dark:mix-blend-soft-light filter blur-xl opacity-20 animate-blob animation-delay-2000"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 w-80 h-80 bg-pink-300 dark:bg-pink-900 rounded-full mix-blend-multiply dark:mix-blend-soft-light filter blur-xl opacity-20 animate-blob animation-delay-4000"})]}),e.jsxs("div",{className:"w-full max-w-md relative z-10",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl mb-4 shadow-lg",children:e.jsx(z4,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:" "}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"  CRM "})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 border border-gray-200 dark:border-gray-700",children:[e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:" "}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(lt,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:a,onChange:p=>n(p.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"admin",required:!0,autoFocus:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(qf,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"password",value:i,onChange:p=>o(p.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"",required:!0})]})]}),c&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[e.jsx(Ge,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:c})]}),e.jsx("button",{type:"submit",disabled:h,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-medium rounded-lg hover:from-blue-600 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-[1.02] active:scale-[0.98] shadow-lg",children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"..."]}):e.jsxs(e.Fragment,{children:[e.jsx(z4,{className:"w-5 h-5"}),""]})})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:"     "})})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"CRM   2025"})})]}),e.jsx("style",{children:`
        @keyframes blob {
          0% {
            transform: translate(0px, 0px) scale(1);
          }
          33% {
            transform: translate(30px, -50px) scale(1.1);
          }
          66% {
            transform: translate(-20px, 20px) scale(0.9);
          }
          100% {
            transform: translate(0px, 0px) scale(1);
          }
        }
        .animate-blob {
          animation: blob 7s infinite;
        }
        .animation-delay-2000 {
          animation-delay: 2s;
        }
        .animation-delay-4000 {
          animation-delay: 4s;
        }
      `})]})},gA=12,bA=300,kp="132, 0, 255",RI=768,MI=(s,t,r=kp)=>{const a=document.createElement("div");return a.className="particle",a.style.cssText=`
    position: absolute;
    width: 4px;
    height: 4px;
    border-radius: 50%;
    background: rgba(${r}, 1);
    box-shadow: 0 0 6px rgba(${r}, 0.6);
    pointer-events: none;
    z-index: 100;
    left: ${s}px;
    top: ${t}px;
  `,a},OI=s=>({proximity:s*.5,fadeDistance:s*.75}),LI=(s,t,r,a,n)=>{const i=s.getBoundingClientRect(),o=(t-i.left)/i.width*100,c=(r-i.top)/i.height*100;s.style.setProperty("--glow-x",`${o}%`),s.style.setProperty("--glow-y",`${c}%`),s.style.setProperty("--glow-intensity",a.toString()),s.style.setProperty("--glow-radius",`${n}px`)},PI=({children:s,className:t="",disableAnimations:r=!1,style:a,particleCount:n=gA,glowColor:i=kp,enableTilt:o=!0,clickEffect:c=!1,enableMagnetism:u=!1})=>{const h=j.useRef(null),m=j.useRef([]),f=j.useRef([]),p=j.useRef(!1),v=j.useRef([]),g=j.useRef(!1),y=j.useRef(null),w=j.useCallback(()=>{if(g.current||!h.current)return;const{width:S,height:_}=h.current.getBoundingClientRect();v.current=Array.from({length:n},()=>MI(Math.random()*S,Math.random()*_,i)),g.current=!0},[n,i]),N=j.useCallback(()=>{f.current.forEach(clearTimeout),f.current=[],y.current?.kill(),m.current.forEach(S=>{Js.to(S,{scale:0,opacity:0,duration:.3,ease:"back.in(1.7)",onComplete:()=>{S.parentNode?.removeChild(S)}})}),m.current=[]},[]),k=j.useCallback(()=>{!h.current||!p.current||(g.current||w(),v.current.forEach((S,_)=>{const T=setTimeout(()=>{if(!p.current||!h.current)return;const E=S.cloneNode(!0);h.current.appendChild(E),m.current.push(E),Js.fromTo(E,{scale:0,opacity:0},{scale:1,opacity:1,duration:.3,ease:"back.out(1.7)"}),Js.to(E,{x:(Math.random()-.5)*100,y:(Math.random()-.5)*100,rotation:Math.random()*360,duration:2+Math.random()*2,ease:"none",repeat:-1,yoyo:!0}),Js.to(E,{opacity:.3,duration:1.5,ease:"power2.inOut",repeat:-1,yoyo:!0})},_*100);f.current.push(T)}))},[w]);return j.useEffect(()=>{if(r||!h.current)return;const S=h.current,_=()=>{p.current=!0,k(),o&&Js.to(S,{rotateX:5,rotateY:5,duration:.3,ease:"power2.out",transformPerspective:1e3})},T=()=>{p.current=!1,N(),o&&Js.to(S,{rotateX:0,rotateY:0,duration:.3,ease:"power2.out"}),u&&Js.to(S,{x:0,y:0,duration:.3,ease:"power2.out"})},E=O=>{if(!o&&!u)return;const C=S.getBoundingClientRect(),A=O.clientX-C.left,X=O.clientY-C.top,I=C.width/2,V=C.height/2;if(o){const R=(X-V)/V*-10,H=(A-I)/I*10;Js.to(S,{rotateX:R,rotateY:H,duration:.1,ease:"power2.out",transformPerspective:1e3})}if(u){const R=(A-I)*.05,H=(X-V)*.05;y.current=Js.to(S,{x:R,y:H,duration:.3,ease:"power2.out"})}},z=O=>{if(!c)return;const C=S.getBoundingClientRect(),A=O.clientX-C.left,X=O.clientY-C.top,I=Math.max(Math.hypot(A,X),Math.hypot(A-C.width,X),Math.hypot(A,X-C.height),Math.hypot(A-C.width,X-C.height)),V=document.createElement("div");V.style.cssText=`
        position: absolute;
        width: ${I*2}px;
        height: ${I*2}px;
        border-radius: 50%;
        background: radial-gradient(circle, rgba(${i}, 0.4) 0%, rgba(${i}, 0.2) 30%, transparent 70%);
        left: ${A-I}px;
        top: ${X-I}px;
        pointer-events: none;
        z-index: 1000;
      `,S.appendChild(V),Js.fromTo(V,{scale:0,opacity:1},{scale:1,opacity:0,duration:.8,ease:"power2.out",onComplete:()=>V.remove()})};return S.addEventListener("mouseenter",_),S.addEventListener("mouseleave",T),S.addEventListener("mousemove",E),S.addEventListener("click",z),()=>{p.current=!1,S.removeEventListener("mouseenter",_),S.removeEventListener("mouseleave",T),S.removeEventListener("mousemove",E),S.removeEventListener("click",z),N()}},[k,N,r,o,u,c,i]),e.jsx("div",{ref:h,className:`${t} particle-container`,style:{...a,position:"relative",overflow:"hidden"},children:s})},BI=({gridRef:s,disableAnimations:t=!1,enabled:r=!0,spotlightRadius:a=bA,glowColor:n=kp})=>{const i=j.useRef(null),o=j.useRef(!1);return j.useEffect(()=>{if(t||!s?.current||!r)return;const c=document.createElement("div");c.className="global-spotlight",c.style.cssText=`
      position: fixed;
      width: 800px;
      height: 800px;
      border-radius: 50%;
      pointer-events: none;
      background: radial-gradient(circle,
        rgba(${n}, 0.15) 0%,
        rgba(${n}, 0.08) 15%,
        rgba(${n}, 0.04) 25%,
        rgba(${n}, 0.02) 40%,
        rgba(${n}, 0.01) 65%,
        transparent 70%
      );
      z-index: 200;
      opacity: 0;
      transform: translate(-50%, -50%);
      mix-blend-mode: screen;
    `,document.body.appendChild(c),i.current=c;const u=m=>{if(!i.current||!s.current)return;const p=s.current.closest(".bento-section")?.getBoundingClientRect(),v=p&&m.clientX>=p.left&&m.clientX<=p.right&&m.clientY>=p.top&&m.clientY<=p.bottom;o.current=v||!1;const g=s.current.querySelectorAll(".magic-bento-card");if(!v){Js.to(i.current,{opacity:0,duration:.3,ease:"power2.out"}),g.forEach(S=>{S.style.setProperty("--glow-intensity","0")});return}const{proximity:y,fadeDistance:w}=OI(a);let N=1/0;g.forEach(S=>{const _=S,T=_.getBoundingClientRect(),E=T.left+T.width/2,z=T.top+T.height/2,O=Math.hypot(m.clientX-E,m.clientY-z)-Math.max(T.width,T.height)/2,C=Math.max(0,O);N=Math.min(N,C);let A=0;C<=y?A=1:C<=w&&(A=(w-C)/(w-y)),LI(_,m.clientX,m.clientY,A,a)}),Js.to(i.current,{left:m.clientX,top:m.clientY,duration:.1,ease:"power2.out"});const k=N<=y?.8:N<=w?(w-N)/(w-y)*.8:0;Js.to(i.current,{opacity:k,duration:k>0?.2:.5,ease:"power2.out"})},h=()=>{o.current=!1,s.current?.querySelectorAll(".magic-bento-card").forEach(m=>{m.style.setProperty("--glow-intensity","0")}),i.current&&Js.to(i.current,{opacity:0,duration:.3,ease:"power2.out"})};return document.addEventListener("mousemove",u),document.addEventListener("mouseleave",h),()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseleave",h),i.current?.parentNode?.removeChild(i.current)}},[s,t,r,a,n]),null},FI=({children:s,gridRef:t})=>e.jsx("div",{className:"card-grid bento-section",ref:t,children:s}),zI=()=>{const[s,t]=j.useState(!1);return j.useEffect(()=>{const r=()=>t(window.innerWidth<=RI);return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),s},II=({textAutoHide:s=!0,enableStars:t=!0,enableSpotlight:r=!0,enableBorderGlow:a=!0,disableAnimations:n=!1,spotlightRadius:i=bA,particleCount:o=gA,enableTilt:c=!1,glowColor:u=kp,clickEffect:h=!0,enableMagnetism:m=!0,cards:f})=>{const p=j.useRef(null),v=zI(),g=n||v;return e.jsxs(e.Fragment,{children:[r&&e.jsx(BI,{gridRef:p,disableAnimations:g,enabled:r,spotlightRadius:i,glowColor:u}),e.jsx(FI,{gridRef:p,children:f.map((y,w)=>{const k={className:`magic-bento-card ${s?"magic-bento-card--text-autohide":""} ${a?"magic-bento-card--border-glow":""}`,style:{backgroundColor:y.color,"--glow-color":u}};return t?e.jsx(PI,{...k,disableAnimations:g,particleCount:o,glowColor:u,enableTilt:c,clickEffect:h,enableMagnetism:m,children:e.jsxs("div",{className:"magic-bento-card__clickable",onClick:y.onClick,style:{cursor:y.onClick?"pointer":"default"},children:[e.jsx("div",{className:"magic-bento-card__header",children:e.jsxs("div",{className:"magic-bento-card__label",children:[y.icon&&e.jsx("span",{className:"magic-bento-card__icon",children:y.icon}),y.label]})}),e.jsxs("div",{className:"magic-bento-card__content",children:[e.jsx("h2",{className:"magic-bento-card__title",children:y.title}),e.jsx("p",{className:"magic-bento-card__description",children:y.description})]})]})},w):e.jsx("div",{...k,children:e.jsxs("div",{className:"magic-bento-card__clickable",onClick:y.onClick,style:{cursor:y.onClick?"pointer":"default"},children:[e.jsx("div",{className:"magic-bento-card__header",children:e.jsxs("div",{className:"magic-bento-card__label",children:[y.icon&&e.jsx("span",{className:"magic-bento-card__icon",children:y.icon}),y.label]})}),e.jsxs("div",{className:"magic-bento-card__content",children:[e.jsx("h2",{className:"magic-bento-card__title",children:y.title}),e.jsx("p",{className:"magic-bento-card__description",children:y.description})]})]})},w)})})]})},yA=j.createContext({});function $I(s){const t=j.useRef(null);return t.current===null&&(t.current=s()),t.current}const LN=typeof window<"u",UI=LN?j.useLayoutEffect:j.useEffect,PN=j.createContext(null);function BN(s,t){s.indexOf(t)===-1&&s.push(t)}function FN(s,t){const r=s.indexOf(t);r>-1&&s.splice(r,1)}const _i=(s,t,r)=>r>t?t:r<s?s:r;let zN=()=>{};const ki={},vA=s=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(s);function jA(s){return typeof s=="object"&&s!==null}const wA=s=>/^0[^.\s]+$/u.test(s);function IN(s){let t;return()=>(t===void 0&&(t=s()),t)}const Ea=s=>s,VI=(s,t)=>r=>t(s(r)),Lm=(...s)=>s.reduce(VI),hm=(s,t,r)=>{const a=t-s;return a===0?1:(r-s)/a};class $N{constructor(){this.subscriptions=[]}add(t){return BN(this.subscriptions,t),()=>FN(this.subscriptions,t)}notify(t,r,a){const n=this.subscriptions.length;if(n)if(n===1)this.subscriptions[0](t,r,a);else for(let i=0;i<n;i++){const o=this.subscriptions[i];o&&o(t,r,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const wn=s=>s*1e3,Sa=s=>s/1e3;function NA(s,t){return t?s*(1e3/t):0}const _A=(s,t,r)=>(((1-3*r+3*t)*s+(3*r-6*t))*s+3*t)*s,HI=1e-7,qI=12;function WI(s,t,r,a,n){let i,o,c=0;do o=t+(r-t)/2,i=_A(o,a,n)-s,i>0?r=o:t=o;while(Math.abs(i)>HI&&++c<qI);return o}function Pm(s,t,r,a){if(s===t&&r===a)return Ea;const n=i=>WI(i,0,1,s,r);return i=>i===0||i===1?i:_A(n(i),t,a)}const kA=s=>t=>t<=.5?s(2*t)/2:(2-s(2*(1-t)))/2,SA=s=>t=>1-s(1-t),CA=Pm(.33,1.53,.69,.99),UN=SA(CA),TA=kA(UN),EA=s=>(s*=2)<1?.5*UN(s):.5*(2-Math.pow(2,-10*(s-1))),VN=s=>1-Math.sin(Math.acos(s)),AA=SA(VN),DA=kA(VN),YI=Pm(.42,0,1,1),GI=Pm(0,0,.58,1),RA=Pm(.42,0,.58,1),KI=s=>Array.isArray(s)&&typeof s[0]!="number",MA=s=>Array.isArray(s)&&typeof s[0]=="number",XI={linear:Ea,easeIn:YI,easeInOut:RA,easeOut:GI,circIn:VN,circInOut:DA,circOut:AA,backIn:UN,backInOut:TA,backOut:CA,anticipate:EA},ZI=s=>typeof s=="string",c6=s=>{if(MA(s)){zN(s.length===4);const[t,r,a,n]=s;return Pm(t,r,a,n)}else if(ZI(s))return XI[s];return s},I0=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function QI(s,t){let r=new Set,a=new Set,n=!1,i=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function u(m){o.has(m)&&(h.schedule(m),s()),m(c)}const h={schedule:(m,f=!1,p=!1)=>{const g=p&&n?r:a;return f&&o.add(m),g.has(m)||g.add(m),m},cancel:m=>{a.delete(m),o.delete(m)},process:m=>{if(c=m,n){i=!0;return}n=!0,[r,a]=[a,r],r.forEach(u),r.clear(),n=!1,i&&(i=!1,h.process(m))}};return h}const JI=40;function OA(s,t){let r=!1,a=!0;const n={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,o=I0.reduce((S,_)=>(S[_]=QI(i),S),{}),{setup:c,read:u,resolveKeyframes:h,preUpdate:m,update:f,preRender:p,render:v,postRender:g}=o,y=()=>{const S=ki.useManualTiming?n.timestamp:performance.now();r=!1,ki.useManualTiming||(n.delta=a?1e3/60:Math.max(Math.min(S-n.timestamp,JI),1)),n.timestamp=S,n.isProcessing=!0,c.process(n),u.process(n),h.process(n),m.process(n),f.process(n),p.process(n),v.process(n),g.process(n),n.isProcessing=!1,r&&t&&(a=!1,s(y))},w=()=>{r=!0,a=!0,n.isProcessing||s(y)};return{schedule:I0.reduce((S,_)=>{const T=o[_];return S[_]=(E,z=!1,O=!1)=>(r||w(),T.schedule(E,z,O)),S},{}),cancel:S=>{for(let _=0;_<I0.length;_++)o[I0[_]].cancel(S)},state:n,steps:o}}const{schedule:Jt,cancel:Dl,state:Qs,steps:yy}=OA(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ea,!0);let Of;function e$(){Of=void 0}const Pr={now:()=>(Of===void 0&&Pr.set(Qs.isProcessing||ki.useManualTiming?Qs.timestamp:performance.now()),Of),set:s=>{Of=s,queueMicrotask(e$)}},LA=s=>t=>typeof t=="string"&&t.startsWith(s),HN=LA("--"),t$=LA("var(--"),qN=s=>t$(s)?s$.test(s.split("/*")[0].trim()):!1,s$=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Pd={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},mm={...Pd,transform:s=>_i(0,1,s)},$0={...Pd,default:1},Uh=s=>Math.round(s*1e5)/1e5,WN=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function r$(s){return s==null}const a$=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,YN=(s,t)=>r=>!!(typeof r=="string"&&a$.test(r)&&r.startsWith(s)||t&&!r$(r)&&Object.prototype.hasOwnProperty.call(r,t)),PA=(s,t,r)=>a=>{if(typeof a!="string")return a;const[n,i,o,c]=a.match(WN);return{[s]:parseFloat(n),[t]:parseFloat(i),[r]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},n$=s=>_i(0,255,s),vy={...Pd,transform:s=>Math.round(n$(s))},Ao={test:YN("rgb","red"),parse:PA("red","green","blue"),transform:({red:s,green:t,blue:r,alpha:a=1})=>"rgba("+vy.transform(s)+", "+vy.transform(t)+", "+vy.transform(r)+", "+Uh(mm.transform(a))+")"};function i$(s){let t="",r="",a="",n="";return s.length>5?(t=s.substring(1,3),r=s.substring(3,5),a=s.substring(5,7),n=s.substring(7,9)):(t=s.substring(1,2),r=s.substring(2,3),a=s.substring(3,4),n=s.substring(4,5),t+=t,r+=r,a+=a,n+=n),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(a,16),alpha:n?parseInt(n,16)/255:1}}const pw={test:YN("#"),parse:i$,transform:Ao.transform},Bm=s=>({test:t=>typeof t=="string"&&t.endsWith(s)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${s}`}),xl=Bm("deg"),Nn=Bm("%"),st=Bm("px"),l$=Bm("vh"),o$=Bm("vw"),d6={...Nn,parse:s=>Nn.parse(s)/100,transform:s=>Nn.transform(s*100)},Qc={test:YN("hsl","hue"),parse:PA("hue","saturation","lightness"),transform:({hue:s,saturation:t,lightness:r,alpha:a=1})=>"hsla("+Math.round(s)+", "+Nn.transform(Uh(t))+", "+Nn.transform(Uh(r))+", "+Uh(mm.transform(a))+")"},As={test:s=>Ao.test(s)||pw.test(s)||Qc.test(s),parse:s=>Ao.test(s)?Ao.parse(s):Qc.test(s)?Qc.parse(s):pw.parse(s),transform:s=>typeof s=="string"?s:s.hasOwnProperty("red")?Ao.transform(s):Qc.transform(s),getAnimatableNone:s=>{const t=As.parse(s);return t.alpha=0,As.transform(t)}},c$=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function d$(s){return isNaN(s)&&typeof s=="string"&&(s.match(WN)?.length||0)+(s.match(c$)?.length||0)>0}const BA="number",FA="color",u$="var",h$="var(",u6="${}",m$=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function xm(s){const t=s.toString(),r=[],a={color:[],number:[],var:[]},n=[];let i=0;const c=t.replace(m$,u=>(As.test(u)?(a.color.push(i),n.push(FA),r.push(As.parse(u))):u.startsWith(h$)?(a.var.push(i),n.push(u$),r.push(u)):(a.number.push(i),n.push(BA),r.push(parseFloat(u))),++i,u6)).split(u6);return{values:r,split:c,indexes:a,types:n}}function zA(s){return xm(s).values}function IA(s){const{split:t,types:r}=xm(s),a=t.length;return n=>{let i="";for(let o=0;o<a;o++)if(i+=t[o],n[o]!==void 0){const c=r[o];c===BA?i+=Uh(n[o]):c===FA?i+=As.transform(n[o]):i+=n[o]}return i}}const x$=s=>typeof s=="number"?0:As.test(s)?As.getAnimatableNone(s):s;function f$(s){const t=zA(s);return IA(s)(t.map(x$))}const Rl={test:d$,parse:zA,createTransformer:IA,getAnimatableNone:f$};function jy(s,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?s+(t-s)*6*r:r<1/2?t:r<2/3?s+(t-s)*(2/3-r)*6:s}function p$({hue:s,saturation:t,lightness:r,alpha:a}){s/=360,t/=100,r/=100;let n=0,i=0,o=0;if(!t)n=i=o=r;else{const c=r<.5?r*(1+t):r+t-r*t,u=2*r-c;n=jy(u,c,s+1/3),i=jy(u,c,s),o=jy(u,c,s-1/3)}return{red:Math.round(n*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:a}}function ep(s,t){return r=>r>0?t:s}const as=(s,t,r)=>s+(t-s)*r,wy=(s,t,r)=>{const a=s*s,n=r*(t*t-a)+a;return n<0?0:Math.sqrt(n)},g$=[pw,Ao,Qc],b$=s=>g$.find(t=>t.test(s));function h6(s){const t=b$(s);if(!t)return!1;let r=t.parse(s);return t===Qc&&(r=p$(r)),r}const m6=(s,t)=>{const r=h6(s),a=h6(t);if(!r||!a)return ep(s,t);const n={...r};return i=>(n.red=wy(r.red,a.red,i),n.green=wy(r.green,a.green,i),n.blue=wy(r.blue,a.blue,i),n.alpha=as(r.alpha,a.alpha,i),Ao.transform(n))},gw=new Set(["none","hidden"]);function y$(s,t){return gw.has(s)?r=>r<=0?s:t:r=>r>=1?t:s}function v$(s,t){return r=>as(s,t,r)}function GN(s){return typeof s=="number"?v$:typeof s=="string"?qN(s)?ep:As.test(s)?m6:N$:Array.isArray(s)?$A:typeof s=="object"?As.test(s)?m6:j$:ep}function $A(s,t){const r=[...s],a=r.length,n=s.map((i,o)=>GN(i)(i,t[o]));return i=>{for(let o=0;o<a;o++)r[o]=n[o](i);return r}}function j$(s,t){const r={...s,...t},a={};for(const n in r)s[n]!==void 0&&t[n]!==void 0&&(a[n]=GN(s[n])(s[n],t[n]));return n=>{for(const i in a)r[i]=a[i](n);return r}}function w$(s,t){const r=[],a={color:0,var:0,number:0};for(let n=0;n<t.values.length;n++){const i=t.types[n],o=s.indexes[i][a[i]],c=s.values[o]??0;r[n]=c,a[i]++}return r}const N$=(s,t)=>{const r=Rl.createTransformer(t),a=xm(s),n=xm(t);return a.indexes.var.length===n.indexes.var.length&&a.indexes.color.length===n.indexes.color.length&&a.indexes.number.length>=n.indexes.number.length?gw.has(s)&&!n.values.length||gw.has(t)&&!a.values.length?y$(s,t):Lm($A(w$(a,n),n.values),r):ep(s,t)};function UA(s,t,r){return typeof s=="number"&&typeof t=="number"&&typeof r=="number"?as(s,t,r):GN(s)(s,t)}const _$=s=>{const t=({timestamp:r})=>s(r);return{start:(r=!0)=>Jt.update(t,r),stop:()=>Dl(t),now:()=>Qs.isProcessing?Qs.timestamp:Pr.now()}},VA=(s,t,r=10)=>{let a="";const n=Math.max(Math.round(t/r),2);for(let i=0;i<n;i++)a+=Math.round(s(i/(n-1))*1e4)/1e4+", ";return`linear(${a.substring(0,a.length-2)})`},tp=2e4;function KN(s){let t=0;const r=50;let a=s.next(t);for(;!a.done&&t<tp;)t+=r,a=s.next(t);return t>=tp?1/0:t}function k$(s,t=100,r){const a=r({...s,keyframes:[0,t]}),n=Math.min(KN(a),tp);return{type:"keyframes",ease:i=>a.next(n*i).value/t,duration:Sa(n)}}const S$=5;function HA(s,t,r){const a=Math.max(t-S$,0);return NA(r-s(a),t-a)}const hs={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ny=.001;function C$({duration:s=hs.duration,bounce:t=hs.bounce,velocity:r=hs.velocity,mass:a=hs.mass}){let n,i,o=1-t;o=_i(hs.minDamping,hs.maxDamping,o),s=_i(hs.minDuration,hs.maxDuration,Sa(s)),o<1?(n=h=>{const m=h*o,f=m*s,p=m-r,v=bw(h,o),g=Math.exp(-f);return Ny-p/v*g},i=h=>{const f=h*o*s,p=f*r+r,v=Math.pow(o,2)*Math.pow(h,2)*s,g=Math.exp(-f),y=bw(Math.pow(h,2),o);return(-n(h)+Ny>0?-1:1)*((p-v)*g)/y}):(n=h=>{const m=Math.exp(-h*s),f=(h-r)*s+1;return-Ny+m*f},i=h=>{const m=Math.exp(-h*s),f=(r-h)*(s*s);return m*f});const c=5/s,u=E$(n,i,c);if(s=wn(s),isNaN(u))return{stiffness:hs.stiffness,damping:hs.damping,duration:s};{const h=Math.pow(u,2)*a;return{stiffness:h,damping:o*2*Math.sqrt(a*h),duration:s}}}const T$=12;function E$(s,t,r){let a=r;for(let n=1;n<T$;n++)a=a-s(a)/t(a);return a}function bw(s,t){return s*Math.sqrt(1-t*t)}const A$=["duration","bounce"],D$=["stiffness","damping","mass"];function x6(s,t){return t.some(r=>s[r]!==void 0)}function R$(s){let t={velocity:hs.velocity,stiffness:hs.stiffness,damping:hs.damping,mass:hs.mass,isResolvedFromDuration:!1,...s};if(!x6(s,D$)&&x6(s,A$))if(s.visualDuration){const r=s.visualDuration,a=2*Math.PI/(r*1.2),n=a*a,i=2*_i(.05,1,1-(s.bounce||0))*Math.sqrt(n);t={...t,mass:hs.mass,stiffness:n,damping:i}}else{const r=C$(s);t={...t,...r,mass:hs.mass},t.isResolvedFromDuration=!0}return t}function sp(s=hs.visualDuration,t=hs.bounce){const r=typeof s!="object"?{visualDuration:s,keyframes:[0,1],bounce:t}:s;let{restSpeed:a,restDelta:n}=r;const i=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],c={done:!1,value:i},{stiffness:u,damping:h,mass:m,duration:f,velocity:p,isResolvedFromDuration:v}=R$({...r,velocity:-Sa(r.velocity||0)}),g=p||0,y=h/(2*Math.sqrt(u*m)),w=o-i,N=Sa(Math.sqrt(u/m)),k=Math.abs(w)<5;a||(a=k?hs.restSpeed.granular:hs.restSpeed.default),n||(n=k?hs.restDelta.granular:hs.restDelta.default);let S;if(y<1){const T=bw(N,y);S=E=>{const z=Math.exp(-y*N*E);return o-z*((g+y*N*w)/T*Math.sin(T*E)+w*Math.cos(T*E))}}else if(y===1)S=T=>o-Math.exp(-N*T)*(w+(g+N*w)*T);else{const T=N*Math.sqrt(y*y-1);S=E=>{const z=Math.exp(-y*N*E),O=Math.min(T*E,300);return o-z*((g+y*N*w)*Math.sinh(O)+T*w*Math.cosh(O))/T}}const _={calculatedDuration:v&&f||null,next:T=>{const E=S(T);if(v)c.done=T>=f;else{let z=T===0?g:0;y<1&&(z=T===0?wn(g):HA(S,T,E));const O=Math.abs(z)<=a,C=Math.abs(o-E)<=n;c.done=O&&C}return c.value=c.done?o:E,c},toString:()=>{const T=Math.min(KN(_),tp),E=VA(z=>_.next(T*z).value,T,30);return T+"ms "+E},toTransition:()=>{}};return _}sp.applyToOptions=s=>{const t=k$(s,100,sp);return s.ease=t.ease,s.duration=wn(t.duration),s.type="keyframes",s};function yw({keyframes:s,velocity:t=0,power:r=.8,timeConstant:a=325,bounceDamping:n=10,bounceStiffness:i=500,modifyTarget:o,min:c,max:u,restDelta:h=.5,restSpeed:m}){const f=s[0],p={done:!1,value:f},v=O=>c!==void 0&&O<c||u!==void 0&&O>u,g=O=>c===void 0?u:u===void 0||Math.abs(c-O)<Math.abs(u-O)?c:u;let y=r*t;const w=f+y,N=o===void 0?w:o(w);N!==w&&(y=N-f);const k=O=>-y*Math.exp(-O/a),S=O=>N+k(O),_=O=>{const C=k(O),A=S(O);p.done=Math.abs(C)<=h,p.value=p.done?N:A};let T,E;const z=O=>{v(p.value)&&(T=O,E=sp({keyframes:[p.value,g(p.value)],velocity:HA(S,O,p.value),damping:n,stiffness:i,restDelta:h,restSpeed:m}))};return z(0),{calculatedDuration:null,next:O=>{let C=!1;return!E&&T===void 0&&(C=!0,_(O),z(O)),T!==void 0&&O>=T?E.next(O-T):(!C&&_(O),p)}}}function M$(s,t,r){const a=[],n=r||ki.mix||UA,i=s.length-1;for(let o=0;o<i;o++){let c=n(s[o],s[o+1]);if(t){const u=Array.isArray(t)?t[o]||Ea:t;c=Lm(u,c)}a.push(c)}return a}function O$(s,t,{clamp:r=!0,ease:a,mixer:n}={}){const i=s.length;if(zN(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=s[0]===s[1];s[0]>s[i-1]&&(s=[...s].reverse(),t=[...t].reverse());const c=M$(t,a,n),u=c.length,h=m=>{if(o&&m<s[0])return t[0];let f=0;if(u>1)for(;f<s.length-2&&!(m<s[f+1]);f++);const p=hm(s[f],s[f+1],m);return c[f](p)};return r?m=>h(_i(s[0],s[i-1],m)):h}function L$(s,t){const r=s[s.length-1];for(let a=1;a<=t;a++){const n=hm(0,t,a);s.push(as(r,1,n))}}function P$(s){const t=[0];return L$(t,s.length-1),t}function B$(s,t){return s.map(r=>r*t)}function F$(s,t){return s.map(()=>t||RA).splice(0,s.length-1)}function Vh({duration:s=300,keyframes:t,times:r,ease:a="easeInOut"}){const n=KI(a)?a.map(c6):c6(a),i={done:!1,value:t[0]},o=B$(r&&r.length===t.length?r:P$(t),s),c=O$(o,t,{ease:Array.isArray(n)?n:F$(t,n)});return{calculatedDuration:s,next:u=>(i.value=c(u),i.done=u>=s,i)}}const z$=s=>s!==null;function XN(s,{repeat:t,repeatType:r="loop"},a,n=1){const i=s.filter(z$),c=n<0||t&&r!=="loop"&&t%2===1?0:i.length-1;return!c||a===void 0?i[c]:a}const I$={decay:yw,inertia:yw,tween:Vh,keyframes:Vh,spring:sp};function qA(s){typeof s.type=="string"&&(s.type=I$[s.type])}class ZN{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const $$=s=>s/100;class QN extends ZN{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:r}=this.options;r&&r.updatedAt!==Pr.now()&&this.tick(Pr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;qA(t);const{type:r=Vh,repeat:a=0,repeatDelay:n=0,repeatType:i,velocity:o=0}=t;let{keyframes:c}=t;const u=r||Vh;u!==Vh&&typeof c[0]!="number"&&(this.mixKeyframes=Lm($$,UA(c[0],c[1])),c=[0,100]);const h=u({...t,keyframes:c});i==="mirror"&&(this.mirroredGenerator=u({...t,keyframes:[...c].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=KN(h));const{calculatedDuration:m}=h;this.calculatedDuration=m,this.resolvedDuration=m+n,this.totalDuration=this.resolvedDuration*(a+1)-n,this.generator=h}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:a,totalDuration:n,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:u}=this;if(this.startTime===null)return a.next(0);const{delay:h=0,keyframes:m,repeat:f,repeatType:p,repeatDelay:v,type:g,onUpdate:y,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-n/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const N=this.currentTime-h*(this.playbackSpeed>=0?1:-1),k=this.playbackSpeed>=0?N<0:N>n;this.currentTime=Math.max(N,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=n);let S=this.currentTime,_=a;if(f){const O=Math.min(this.currentTime,n)/c;let C=Math.floor(O),A=O%1;!A&&O>=1&&(A=1),A===1&&C--,C=Math.min(C,f+1),!!(C%2)&&(p==="reverse"?(A=1-A,v&&(A-=v/c)):p==="mirror"&&(_=o)),S=_i(0,1,A)*c}const T=k?{done:!1,value:m[0]}:_.next(S);i&&(T.value=i(T.value));let{done:E}=T;!k&&u!==null&&(E=this.playbackSpeed>=0?this.currentTime>=n:this.currentTime<=0);const z=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&E);return z&&g!==yw&&(T.value=XN(m,this.options,w,this.speed)),y&&y(T.value),z&&this.finish(),T}then(t,r){return this.finished.then(t,r)}get duration(){return Sa(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Sa(t)}get time(){return Sa(this.currentTime)}set time(t){t=wn(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Pr.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=Sa(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=_$,startTime:r}=this.options;this.driver||(this.driver=t(n=>this.tick(n))),this.options.onPlay?.();const a=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=a):this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime||(this.startTime=r??a),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Pr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function U$(s){for(let t=1;t<s.length;t++)s[t]??(s[t]=s[t-1])}const Do=s=>s*180/Math.PI,vw=s=>{const t=Do(Math.atan2(s[1],s[0]));return jw(t)},V$={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:s=>(Math.abs(s[0])+Math.abs(s[3]))/2,rotate:vw,rotateZ:vw,skewX:s=>Do(Math.atan(s[1])),skewY:s=>Do(Math.atan(s[2])),skew:s=>(Math.abs(s[1])+Math.abs(s[2]))/2},jw=s=>(s=s%360,s<0&&(s+=360),s),f6=vw,p6=s=>Math.sqrt(s[0]*s[0]+s[1]*s[1]),g6=s=>Math.sqrt(s[4]*s[4]+s[5]*s[5]),H$={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:p6,scaleY:g6,scale:s=>(p6(s)+g6(s))/2,rotateX:s=>jw(Do(Math.atan2(s[6],s[5]))),rotateY:s=>jw(Do(Math.atan2(-s[2],s[0]))),rotateZ:f6,rotate:f6,skewX:s=>Do(Math.atan(s[4])),skewY:s=>Do(Math.atan(s[1])),skew:s=>(Math.abs(s[1])+Math.abs(s[4]))/2};function ww(s){return s.includes("scale")?1:0}function Nw(s,t){if(!s||s==="none")return ww(t);const r=s.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let a,n;if(r)a=H$,n=r;else{const c=s.match(/^matrix\(([-\d.e\s,]+)\)$/u);a=V$,n=c}if(!n)return ww(t);const i=a[t],o=n[1].split(",").map(W$);return typeof i=="function"?i(o):o[i]}const q$=(s,t)=>{const{transform:r="none"}=getComputedStyle(s);return Nw(r,t)};function W$(s){return parseFloat(s.trim())}const Bd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Fd=new Set(Bd),b6=s=>s===Pd||s===st,Y$=new Set(["x","y","z"]),G$=Bd.filter(s=>!Y$.has(s));function K$(s){const t=[];return G$.forEach(r=>{const a=s.getValue(r);a!==void 0&&(t.push([r,a.get()]),a.set(r.startsWith("scale")?1:0))}),t}const Io={width:({x:s},{paddingLeft:t="0",paddingRight:r="0"})=>s.max-s.min-parseFloat(t)-parseFloat(r),height:({y:s},{paddingTop:t="0",paddingBottom:r="0"})=>s.max-s.min-parseFloat(t)-parseFloat(r),top:(s,{top:t})=>parseFloat(t),left:(s,{left:t})=>parseFloat(t),bottom:({y:s},{top:t})=>parseFloat(t)+(s.max-s.min),right:({x:s},{left:t})=>parseFloat(t)+(s.max-s.min),x:(s,{transform:t})=>Nw(t,"x"),y:(s,{transform:t})=>Nw(t,"y")};Io.translateX=Io.x;Io.translateY=Io.y;const $o=new Set;let _w=!1,kw=!1,Sw=!1;function WA(){if(kw){const s=Array.from($o).filter(a=>a.needsMeasurement),t=new Set(s.map(a=>a.element)),r=new Map;t.forEach(a=>{const n=K$(a);n.length&&(r.set(a,n),a.render())}),s.forEach(a=>a.measureInitialState()),t.forEach(a=>{a.render();const n=r.get(a);n&&n.forEach(([i,o])=>{a.getValue(i)?.set(o)})}),s.forEach(a=>a.measureEndState()),s.forEach(a=>{a.suspendedScrollY!==void 0&&window.scrollTo(0,a.suspendedScrollY)})}kw=!1,_w=!1,$o.forEach(s=>s.complete(Sw)),$o.clear()}function YA(){$o.forEach(s=>{s.readKeyframes(),s.needsMeasurement&&(kw=!0)})}function X$(){Sw=!0,YA(),WA(),Sw=!1}class JN{constructor(t,r,a,n,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=a,this.motionValue=n,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?($o.add(this),_w||(_w=!0,Jt.read(YA),Jt.resolveKeyframes(WA))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:a,motionValue:n}=this;if(t[0]===null){const i=n?.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(a&&r){const c=a.readValue(r,o);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=o),n&&i===void 0&&n.set(t[0])}U$(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),$o.delete(this)}cancel(){this.state==="scheduled"&&($o.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Z$=s=>s.startsWith("--");function Q$(s,t,r){Z$(t)?s.style.setProperty(t,r):s.style[t]=r}const J$=IN(()=>window.ScrollTimeline!==void 0),eU={};function tU(s,t){const r=IN(s);return()=>eU[t]??r()}const GA=tU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Rh=([s,t,r,a])=>`cubic-bezier(${s}, ${t}, ${r}, ${a})`,y6={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Rh([0,.65,.55,1]),circOut:Rh([.55,0,1,.45]),backIn:Rh([.31,.01,.66,-.59]),backOut:Rh([.33,1.53,.69,.99])};function KA(s,t){if(s)return typeof s=="function"?GA()?VA(s,t):"ease-out":MA(s)?Rh(s):Array.isArray(s)?s.map(r=>KA(r,t)||y6.easeOut):y6[s]}function sU(s,t,r,{delay:a=0,duration:n=300,repeat:i=0,repeatType:o="loop",ease:c="easeOut",times:u}={},h=void 0){const m={[t]:r};u&&(m.offset=u);const f=KA(c,n);Array.isArray(f)&&(m.easing=f);const p={delay:a,duration:n,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return h&&(p.pseudoElement=h),s.animate(m,p)}function XA(s){return typeof s=="function"&&"applyToOptions"in s}function rU({type:s,...t}){return XA(s)&&GA()?s.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class aU extends ZN{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:a,keyframes:n,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:c,onComplete:u}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,zN(typeof t.type!="string");const h=rU(t);this.animation=sU(r,a,n,h,i),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const m=XN(n,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(m):Q$(r,a,m),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Sa(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Sa(t)}get time(){return Sa(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=wn(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&J$()?(this.animation.timeline=t,Ea):r(this)}}const ZA={anticipate:EA,backInOut:TA,circInOut:DA};function nU(s){return s in ZA}function iU(s){typeof s.ease=="string"&&nU(s.ease)&&(s.ease=ZA[s.ease])}const v6=10;class lU extends aU{constructor(t){iU(t),qA(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:a,onComplete:n,element:i,...o}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const c=new QN({...o,autoplay:!1}),u=wn(this.finishedTime??this.time);r.setWithVelocity(c.sample(u-v6).value,c.sample(u).value,v6),c.stop()}}const j6=(s,t)=>t==="zIndex"?!1:!!(typeof s=="number"||Array.isArray(s)||typeof s=="string"&&(Rl.test(s)||s==="0")&&!s.startsWith("url("));function oU(s){const t=s[0];if(s.length===1)return!0;for(let r=0;r<s.length;r++)if(s[r]!==t)return!0}function cU(s,t,r,a){const n=s[0];if(n===null)return!1;if(t==="display"||t==="visibility")return!0;const i=s[s.length-1],o=j6(n,t),c=j6(i,t);return!o||!c?!1:oU(s)||(r==="spring"||XA(r))&&a}function Cw(s){s.duration=0,s.type="keyframes"}const dU=new Set(["opacity","clipPath","filter","transform"]),uU=IN(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function hU(s){const{motionValue:t,name:r,repeatDelay:a,repeatType:n,damping:i,type:o}=s;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:h}=t.owner.getProps();return uU()&&r&&dU.has(r)&&(r!=="transform"||!h)&&!u&&!a&&n!=="mirror"&&i!==0&&o!=="inertia"}const mU=40;class xU extends ZN{constructor({autoplay:t=!0,delay:r=0,type:a="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:o="loop",keyframes:c,name:u,motionValue:h,element:m,...f}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Pr.now();const p={autoplay:t,delay:r,type:a,repeat:n,repeatDelay:i,repeatType:o,name:u,motionValue:h,element:m,...f},v=m?.KeyframeResolver||JN;this.keyframeResolver=new v(c,(g,y,w)=>this.onKeyframesResolved(g,y,p,!w),u,h,m),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,r,a,n){this.keyframeResolver=void 0;const{name:i,type:o,velocity:c,delay:u,isHandoff:h,onUpdate:m}=a;this.resolvedAt=Pr.now(),cU(t,i,o,c)||((ki.instantAnimations||!u)&&m?.(XN(t,a,r)),t[0]=t[t.length-1],Cw(a),a.repeat=0);const p={startTime:n?this.resolvedAt?this.resolvedAt-this.createdAt>mU?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...a,keyframes:t},v=!h&&hU(p)?new lU({...p,element:p.motionValue.owner.current}):new QN(p);v.finished.then(()=>this.notifyFinished()).catch(Ea),this.pendingTimeline&&(this.stopTimeline=v.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=v}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),X$()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const fU=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function pU(s){const t=fU.exec(s);if(!t)return[,];const[,r,a,n]=t;return[`--${r??a}`,n]}function QA(s,t,r=1){const[a,n]=pU(s);if(!a)return;const i=window.getComputedStyle(t).getPropertyValue(a);if(i){const o=i.trim();return vA(o)?parseFloat(o):o}return qN(n)?QA(n,t,r+1):n}function e1(s,t){return s?.[t]??s?.default??s}const JA=new Set(["width","height","top","left","right","bottom",...Bd]),gU={test:s=>s==="auto",parse:s=>s},e7=s=>t=>t.test(s),t7=[Pd,st,Nn,xl,o$,l$,gU],w6=s=>t7.find(e7(s));function bU(s){return typeof s=="number"?s===0:s!==null?s==="none"||s==="0"||wA(s):!0}const yU=new Set(["brightness","contrast","saturate","opacity"]);function vU(s){const[t,r]=s.slice(0,-1).split("(");if(t==="drop-shadow")return s;const[a]=r.match(WN)||[];if(!a)return s;const n=r.replace(a,"");let i=yU.has(t)?1:0;return a!==r&&(i*=100),t+"("+i+n+")"}const jU=/\b([a-z-]*)\(.*?\)/gu,Tw={...Rl,getAnimatableNone:s=>{const t=s.match(jU);return t?t.map(vU).join(" "):s}},N6={...Pd,transform:Math.round},wU={rotate:xl,rotateX:xl,rotateY:xl,rotateZ:xl,scale:$0,scaleX:$0,scaleY:$0,scaleZ:$0,skew:xl,skewX:xl,skewY:xl,distance:st,translateX:st,translateY:st,translateZ:st,x:st,y:st,z:st,perspective:st,transformPerspective:st,opacity:mm,originX:d6,originY:d6,originZ:st},t1={borderWidth:st,borderTopWidth:st,borderRightWidth:st,borderBottomWidth:st,borderLeftWidth:st,borderRadius:st,radius:st,borderTopLeftRadius:st,borderTopRightRadius:st,borderBottomRightRadius:st,borderBottomLeftRadius:st,width:st,maxWidth:st,height:st,maxHeight:st,top:st,right:st,bottom:st,left:st,padding:st,paddingTop:st,paddingRight:st,paddingBottom:st,paddingLeft:st,margin:st,marginTop:st,marginRight:st,marginBottom:st,marginLeft:st,backgroundPositionX:st,backgroundPositionY:st,...wU,zIndex:N6,fillOpacity:mm,strokeOpacity:mm,numOctaves:N6},NU={...t1,color:As,backgroundColor:As,outlineColor:As,fill:As,stroke:As,borderColor:As,borderTopColor:As,borderRightColor:As,borderBottomColor:As,borderLeftColor:As,filter:Tw,WebkitFilter:Tw},s7=s=>NU[s];function r7(s,t){let r=s7(s);return r!==Tw&&(r=Rl),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const _U=new Set(["auto","none","0"]);function kU(s,t,r){let a=0,n;for(;a<s.length&&!n;){const i=s[a];typeof i=="string"&&!_U.has(i)&&xm(i).values.length&&(n=s[a]),a++}if(n&&r)for(const i of t)s[i]=r7(r,n)}class SU extends JN{constructor(t,r,a,n,i){super(t,r,a,n,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:a}=this;if(!r||!r.current)return;super.readKeyframes();for(let u=0;u<t.length;u++){let h=t[u];if(typeof h=="string"&&(h=h.trim(),qN(h))){const m=QA(h,r.current);m!==void 0&&(t[u]=m),u===t.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!JA.has(a)||t.length!==2)return;const[n,i]=t,o=w6(n),c=w6(i);if(o!==c)if(b6(o)&&b6(c))for(let u=0;u<t.length;u++){const h=t[u];typeof h=="string"&&(t[u]=parseFloat(h))}else Io[a]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,a=[];for(let n=0;n<t.length;n++)(t[n]===null||bU(t[n]))&&a.push(n);a.length&&kU(t,a,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:a}=this;if(!t||!t.current)return;a==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Io[a](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const n=r[r.length-1];n!==void 0&&t.getValue(a,n).jump(n,!1)}measureEndState(){const{element:t,name:r,unresolvedKeyframes:a}=this;if(!t||!t.current)return;const n=t.getValue(r);n&&n.jump(this.measuredOrigin,!1);const i=a.length-1,o=a[i];a[i]=Io[r](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,u])=>{t.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function CU(s,t,r){if(s instanceof EventTarget)return[s];if(typeof s=="string"){let a=document;const n=r?.[s]??a.querySelectorAll(s);return n?Array.from(n):[]}return Array.from(s)}const a7=(s,t)=>t&&typeof s=="number"?t.transform(s):s;function TU(s){return jA(s)&&"offsetHeight"in s}const _6=30,EU=s=>!isNaN(parseFloat(s));class AU{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=a=>{const n=Pr.now();if(this.updatedAt!==n&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=Pr.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=EU(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new $N);const a=this.events[t].add(r);return t==="change"?()=>{a(),Jt.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,a){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-a}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Pr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>_6)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,_6);return NA(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function vd(s,t){return new AU(s,t)}const{schedule:s1}=OA(queueMicrotask,!1),Ha={x:!1,y:!1};function n7(){return Ha.x||Ha.y}function DU(s){return s==="x"||s==="y"?Ha[s]?null:(Ha[s]=!0,()=>{Ha[s]=!1}):Ha.x||Ha.y?null:(Ha.x=Ha.y=!0,()=>{Ha.x=Ha.y=!1})}function i7(s,t){const r=CU(s),a=new AbortController,n={passive:!0,...t,signal:a.signal};return[r,n,()=>a.abort()]}function k6(s){return!(s.pointerType==="touch"||n7())}function RU(s,t,r={}){const[a,n,i]=i7(s,r),o=c=>{if(!k6(c))return;const{target:u}=c,h=t(u,c);if(typeof h!="function"||!u)return;const m=f=>{k6(f)&&(h(f),u.removeEventListener("pointerleave",m))};u.addEventListener("pointerleave",m,n)};return a.forEach(c=>{c.addEventListener("pointerenter",o,n)}),i}const l7=(s,t)=>t?s===t?!0:l7(s,t.parentElement):!1,r1=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1,MU=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function OU(s){return MU.has(s.tagName)||s.tabIndex!==-1}const Lf=new WeakSet;function S6(s){return t=>{t.key==="Enter"&&s(t)}}function _y(s,t){s.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const LU=(s,t)=>{const r=s.currentTarget;if(!r)return;const a=S6(()=>{if(Lf.has(r))return;_y(r,"down");const n=S6(()=>{_y(r,"up")}),i=()=>_y(r,"cancel");r.addEventListener("keyup",n,t),r.addEventListener("blur",i,t)});r.addEventListener("keydown",a,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",a),t)};function C6(s){return r1(s)&&!n7()}function PU(s,t,r={}){const[a,n,i]=i7(s,r),o=c=>{const u=c.currentTarget;if(!C6(c))return;Lf.add(u);const h=t(u,c),m=(v,g)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",p),Lf.has(u)&&Lf.delete(u),C6(v)&&typeof h=="function"&&h(v,{success:g})},f=v=>{m(v,u===window||u===document||r.useGlobalTarget||l7(u,v.target))},p=v=>{m(v,!1)};window.addEventListener("pointerup",f,n),window.addEventListener("pointercancel",p,n)};return a.forEach(c=>{(r.useGlobalTarget?window:c).addEventListener("pointerdown",o,n),TU(c)&&(c.addEventListener("focus",h=>LU(h,n)),!OU(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),i}function o7(s){return jA(s)&&"ownerSVGElement"in s}function BU(s){return o7(s)&&s.tagName==="svg"}const ur=s=>!!(s&&s.getVelocity),FU=[...t7,As,Rl],zU=s=>FU.find(e7(s)),c7=j.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"});function IU(s=!0){const t=j.useContext(PN);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:a,register:n}=t,i=j.useId();j.useEffect(()=>{if(s)return n(i)},[s]);const o=j.useCallback(()=>s&&a&&a(i),[i,a,s]);return!r&&a?[!1,o]:[!0]}const d7=j.createContext({strict:!1}),T6={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},jd={};for(const s in T6)jd[s]={isEnabled:t=>T6[s].some(r=>!!t[r])};function $U(s){for(const t in s)jd[t]={...jd[t],...s[t]}}const UU=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function rp(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||UU.has(s)}let u7=s=>!rp(s);function VU(s){typeof s=="function"&&(u7=t=>t.startsWith("on")?!rp(t):s(t))}try{VU(require("@emotion/is-prop-valid").default)}catch{}function HU(s,t,r){const a={};for(const n in s)n==="values"&&typeof s.values=="object"||(u7(n)||r===!0&&rp(n)||!t&&!rp(n)||s.draggable&&n.startsWith("onDrag"))&&(a[n]=s[n]);return a}const Sp=j.createContext({});function Cp(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}function fm(s){return typeof s=="string"||Array.isArray(s)}const a1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],n1=["initial",...a1];function Tp(s){return Cp(s.animate)||n1.some(t=>fm(s[t]))}function h7(s){return!!(Tp(s)||s.variants)}function qU(s,t){if(Tp(s)){const{initial:r,animate:a}=s;return{initial:r===!1||fm(r)?r:void 0,animate:fm(a)?a:void 0}}return s.inherit!==!1?t:{}}function WU(s){const{initial:t,animate:r}=qU(s,j.useContext(Sp));return j.useMemo(()=>({initial:t,animate:r}),[E6(t),E6(r)])}function E6(s){return Array.isArray(s)?s.join(" "):s}const pm={};function YU(s){for(const t in s)pm[t]=s[t],HN(t)&&(pm[t].isCSSVariable=!0)}function m7(s,{layout:t,layoutId:r}){return Fd.has(s)||s.startsWith("origin")||(t||r!==void 0)&&(!!pm[s]||s==="opacity")}const GU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},KU=Bd.length;function XU(s,t,r){let a="",n=!0;for(let i=0;i<KU;i++){const o=Bd[i],c=s[o];if(c===void 0)continue;let u=!0;if(typeof c=="number"?u=c===(o.startsWith("scale")?1:0):u=parseFloat(c)===0,!u||r){const h=a7(c,t1[o]);if(!u){n=!1;const m=GU[o]||o;a+=`${m}(${h}) `}r&&(t[o]=h)}}return a=a.trim(),r?a=r(t,n?"":a):n&&(a="none"),a}function i1(s,t,r){const{style:a,vars:n,transformOrigin:i}=s;let o=!1,c=!1;for(const u in t){const h=t[u];if(Fd.has(u)){o=!0;continue}else if(HN(u)){n[u]=h;continue}else{const m=a7(h,t1[u]);u.startsWith("origin")?(c=!0,i[u]=m):a[u]=m}}if(t.transform||(o||r?a.transform=XU(t,s.transform,r):a.transform&&(a.transform="none")),c){const{originX:u="50%",originY:h="50%",originZ:m=0}=i;a.transformOrigin=`${u} ${h} ${m}`}}const l1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function x7(s,t,r){for(const a in t)!ur(t[a])&&!m7(a,r)&&(s[a]=t[a])}function ZU({transformTemplate:s},t){return j.useMemo(()=>{const r=l1();return i1(r,t,s),Object.assign({},r.vars,r.style)},[t])}function QU(s,t){const r=s.style||{},a={};return x7(a,r,s),Object.assign(a,ZU(s,t)),a}function JU(s,t){const r={},a=QU(s,t);return s.drag&&s.dragListener!==!1&&(r.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(r.tabIndex=0),r.style=a,r}const eV={offset:"stroke-dashoffset",array:"stroke-dasharray"},tV={offset:"strokeDashoffset",array:"strokeDasharray"};function sV(s,t,r=1,a=0,n=!0){s.pathLength=1;const i=n?eV:tV;s[i.offset]=st.transform(-a);const o=st.transform(t),c=st.transform(r);s[i.array]=`${o} ${c}`}function f7(s,{attrX:t,attrY:r,attrScale:a,pathLength:n,pathSpacing:i=1,pathOffset:o=0,...c},u,h,m){if(i1(s,c,h),u){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:f,style:p}=s;f.transform&&(p.transform=f.transform,delete f.transform),(p.transform||f.transformOrigin)&&(p.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),p.transform&&(p.transformBox=m?.transformBox??"fill-box",delete f.transformBox),t!==void 0&&(f.x=t),r!==void 0&&(f.y=r),a!==void 0&&(f.scale=a),n!==void 0&&sV(f,n,i,o,!1)}const p7=()=>({...l1(),attrs:{}}),g7=s=>typeof s=="string"&&s.toLowerCase()==="svg";function rV(s,t,r,a){const n=j.useMemo(()=>{const i=p7();return f7(i,t,g7(a),s.transformTemplate,s.style),{...i.attrs,style:{...i.style}}},[t]);if(s.style){const i={};x7(i,s.style,s),n.style={...i,...n.style}}return n}const aV=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function o1(s){return typeof s!="string"||s.includes("-")?!1:!!(aV.indexOf(s)>-1||/[A-Z]/u.test(s))}function nV(s,t,r,{latestValues:a},n,i=!1){const c=(o1(s)?rV:JU)(t,a,n,s),u=HU(t,typeof s=="string",i),h=s!==j.Fragment?{...u,...c,ref:r}:{},{children:m}=t,f=j.useMemo(()=>ur(m)?m.get():m,[m]);return j.createElement(s,{...h,children:f})}function A6(s){const t=[{},{}];return s?.values.forEach((r,a)=>{t[0][a]=r.get(),t[1][a]=r.getVelocity()}),t}function c1(s,t,r,a){if(typeof t=="function"){const[n,i]=A6(a);t=t(r!==void 0?r:s.custom,n,i)}if(typeof t=="string"&&(t=s.variants&&s.variants[t]),typeof t=="function"){const[n,i]=A6(a);t=t(r!==void 0?r:s.custom,n,i)}return t}function Pf(s){return ur(s)?s.get():s}function iV({scrapeMotionValuesFromProps:s,createRenderState:t},r,a,n){return{latestValues:lV(r,a,n,s),renderState:t()}}function lV(s,t,r,a){const n={},i=a(s,{});for(const p in i)n[p]=Pf(i[p]);let{initial:o,animate:c}=s;const u=Tp(s),h=h7(s);t&&h&&!u&&s.inherit!==!1&&(o===void 0&&(o=t.initial),c===void 0&&(c=t.animate));let m=r?r.initial===!1:!1;m=m||o===!1;const f=m?c:o;if(f&&typeof f!="boolean"&&!Cp(f)){const p=Array.isArray(f)?f:[f];for(let v=0;v<p.length;v++){const g=c1(s,p[v]);if(g){const{transitionEnd:y,transition:w,...N}=g;for(const k in N){let S=N[k];if(Array.isArray(S)){const _=m?S.length-1:0;S=S[_]}S!==null&&(n[k]=S)}for(const k in y)n[k]=y[k]}}}return n}const b7=s=>(t,r)=>{const a=j.useContext(Sp),n=j.useContext(PN),i=()=>iV(s,t,a,n);return r?i():$I(i)};function d1(s,t,r){const{style:a}=s,n={};for(const i in a)(ur(a[i])||t.style&&ur(t.style[i])||m7(i,s)||r?.getValue(i)?.liveStyle!==void 0)&&(n[i]=a[i]);return n}const oV=b7({scrapeMotionValuesFromProps:d1,createRenderState:l1});function y7(s,t,r){const a=d1(s,t,r);for(const n in s)if(ur(s[n])||ur(t[n])){const i=Bd.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;a[i]=s[n]}return a}const cV=b7({scrapeMotionValuesFromProps:y7,createRenderState:p7}),dV=Symbol.for("motionComponentSymbol");function Jc(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function uV(s,t,r){return j.useCallback(a=>{a&&s.onMount&&s.onMount(a),t&&(a?t.mount(a):t.unmount()),r&&(typeof r=="function"?r(a):Jc(r)&&(r.current=a))},[t])}const u1=s=>s.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),hV="framerAppearId",v7="data-"+u1(hV),j7=j.createContext({});function mV(s,t,r,a,n){const{visualElement:i}=j.useContext(Sp),o=j.useContext(d7),c=j.useContext(PN),u=j.useContext(c7).reducedMotion,h=j.useRef(null);a=a||o.renderer,!h.current&&a&&(h.current=a(s,{visualState:t,parent:i,props:r,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const m=h.current,f=j.useContext(j7);m&&!m.projection&&n&&(m.type==="html"||m.type==="svg")&&xV(h.current,r,n,f);const p=j.useRef(!1);j.useInsertionEffect(()=>{m&&p.current&&m.update(r,c)});const v=r[v7],g=j.useRef(!!v&&!window.MotionHandoffIsComplete?.(v)&&window.MotionHasOptimisedAnimation?.(v));return UI(()=>{m&&(p.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),g.current&&m.animationState&&m.animationState.animateChanges())}),j.useEffect(()=>{m&&(!g.current&&m.animationState&&m.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(v)}),g.current=!1),m.enteringChildren=void 0)}),m}function xV(s,t,r,a){const{layoutId:n,layout:i,drag:o,dragConstraints:c,layoutScroll:u,layoutRoot:h,layoutCrossfade:m}=t;s.projection=new r(s.latestValues,t["data-framer-portal-id"]?void 0:w7(s.parent)),s.projection.setOptions({layoutId:n,layout:i,alwaysMeasureLayout:!!o||c&&Jc(c),visualElement:s,animationType:typeof i=="string"?i:"both",initialPromotionConfig:a,crossfade:m,layoutScroll:u,layoutRoot:h})}function w7(s){if(s)return s.options.allowProjection!==!1?s.projection:w7(s.parent)}function ky(s,{forwardMotionProps:t=!1}={},r,a){r&&$U(r);const n=o1(s)?cV:oV;function i(c,u){let h;const m={...j.useContext(c7),...c,layoutId:fV(c)},{isStatic:f}=m,p=WU(c),v=n(c,f);if(!f&&LN){pV();const g=gV(m);h=g.MeasureLayout,p.visualElement=mV(s,v,m,a,g.ProjectionNode)}return e.jsxs(Sp.Provider,{value:p,children:[h&&p.visualElement?e.jsx(h,{visualElement:p.visualElement,...m}):null,nV(s,c,uV(v,p.visualElement,u),v,f,t)]})}i.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const o=j.forwardRef(i);return o[dV]=s,o}function fV({layoutId:s}){const t=j.useContext(yA).id;return t&&s!==void 0?t+"-"+s:s}function pV(s,t){j.useContext(d7).strict}function gV(s){const{drag:t,layout:r}=jd;if(!t&&!r)return{};const a={...t,...r};return{MeasureLayout:t?.isEnabled(s)||r?.isEnabled(s)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}function bV(s,t){if(typeof Proxy>"u")return ky;const r=new Map,a=(i,o)=>ky(i,o,s,t),n=(i,o)=>a(i,o);return new Proxy(n,{get:(i,o)=>o==="create"?a:(r.has(o)||r.set(o,ky(o,void 0,s,t)),r.get(o))})}function N7({top:s,left:t,right:r,bottom:a}){return{x:{min:t,max:r},y:{min:s,max:a}}}function yV({x:s,y:t}){return{top:t.min,right:s.max,bottom:t.max,left:s.min}}function vV(s,t){if(!t)return s;const r=t({x:s.left,y:s.top}),a=t({x:s.right,y:s.bottom});return{top:r.y,left:r.x,bottom:a.y,right:a.x}}function Sy(s){return s===void 0||s===1}function Ew({scale:s,scaleX:t,scaleY:r}){return!Sy(s)||!Sy(t)||!Sy(r)}function ko(s){return Ew(s)||_7(s)||s.z||s.rotate||s.rotateX||s.rotateY||s.skewX||s.skewY}function _7(s){return D6(s.x)||D6(s.y)}function D6(s){return s&&s!=="0%"}function ap(s,t,r){const a=s-r,n=t*a;return r+n}function R6(s,t,r,a,n){return n!==void 0&&(s=ap(s,n,a)),ap(s,r,a)+t}function Aw(s,t=0,r=1,a,n){s.min=R6(s.min,t,r,a,n),s.max=R6(s.max,t,r,a,n)}function k7(s,{x:t,y:r}){Aw(s.x,t.translate,t.scale,t.originPoint),Aw(s.y,r.translate,r.scale,r.originPoint)}const M6=.999999999999,O6=1.0000000000001;function jV(s,t,r,a=!1){const n=r.length;if(!n)return;t.x=t.y=1;let i,o;for(let c=0;c<n;c++){i=r[c],o=i.projectionDelta;const{visualElement:u}=i.options;u&&u.props.style&&u.props.style.display==="contents"||(a&&i.options.layoutScroll&&i.scroll&&i!==i.root&&td(s,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,k7(s,o)),a&&ko(i.latestValues)&&td(s,i.latestValues))}t.x<O6&&t.x>M6&&(t.x=1),t.y<O6&&t.y>M6&&(t.y=1)}function ed(s,t){s.min=s.min+t,s.max=s.max+t}function L6(s,t,r,a,n=.5){const i=as(s.min,s.max,n);Aw(s,t,r,i,a)}function td(s,t){L6(s.x,t.x,t.scaleX,t.scale,t.originX),L6(s.y,t.y,t.scaleY,t.scale,t.originY)}function S7(s,t){return N7(vV(s.getBoundingClientRect(),t))}function wV(s,t,r){const a=S7(s,r),{scroll:n}=t;return n&&(ed(a.x,n.offset.x),ed(a.y,n.offset.y)),a}const P6=()=>({translate:0,scale:1,origin:0,originPoint:0}),sd=()=>({x:P6(),y:P6()}),B6=()=>({min:0,max:0}),bs=()=>({x:B6(),y:B6()}),Dw={current:null},C7={current:!1};function NV(){if(C7.current=!0,!!LN)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),t=()=>Dw.current=s.matches;s.addEventListener("change",t),t()}else Dw.current=!1}const _V=new WeakMap;function kV(s,t,r){for(const a in t){const n=t[a],i=r[a];if(ur(n))s.addValue(a,n);else if(ur(i))s.addValue(a,vd(n,{owner:s}));else if(i!==n)if(s.hasValue(a)){const o=s.getValue(a);o.liveStyle===!0?o.jump(n):o.hasAnimated||o.set(n)}else{const o=s.getStaticValue(a);s.addValue(a,vd(o!==void 0?o:n,{owner:s}))}}for(const a in r)t[a]===void 0&&s.removeValue(a);return t}const F6=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class SV{scrapeMotionValuesFromProps(t,r,a){return{}}constructor({parent:t,props:r,presenceContext:a,reducedMotionConfig:n,blockInitialAnimation:i,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=JN,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Pr.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Jt.render(this.render,!1,!0))};const{latestValues:u,renderState:h}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=r.initial?{...u}:{},this.renderState=h,this.parent=t,this.props=r,this.presenceContext=a,this.depth=t?t.depth+1:0,this.reducedMotionConfig=n,this.options=c,this.blockInitialAnimation=!!i,this.isControllingVariants=Tp(r),this.isVariantNode=h7(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:m,...f}=this.scrapeMotionValuesFromProps(r,{},this);for(const p in f){const v=f[p];u[p]!==void 0&&ur(v)&&v.set(u[p])}}mount(t){this.current=t,_V.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,a)=>this.bindToMotionValue(a,r)),C7.current||NV(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Dw.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Dl(this.notifyUpdate),Dl(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const a=Fd.has(t);a&&this.onBindTransform&&this.onBindTransform();const n=r.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Jt.preRender(this.notifyUpdate),a&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{n(),i&&i(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in jd){const r=jd[t];if(!r)continue;const{isEnabled:a,Feature:n}=r;if(!this.features[t]&&n&&a(this.props)&&(this.features[t]=new n(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):bs()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let a=0;a<F6.length;a++){const n=F6[a];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);const i="on"+n,o=t[i];o&&(this.propEventSubscriptions[n]=this.on(n,o))}this.prevMotionValues=kV(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const a=this.values.get(t);r!==a&&(a&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let a=this.values.get(t);return a===void 0&&r!==void 0&&(a=vd(r===null?void 0:r,{owner:this}),this.addValue(t,a)),a}readValue(t,r){let a=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return a!=null&&(typeof a=="string"&&(vA(a)||wA(a))?a=parseFloat(a):!zU(a)&&Rl.test(r)&&(a=r7(t,r)),this.setBaseTarget(t,ur(a)?a.get():a)),ur(a)?a.get():a}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){const{initial:r}=this.props;let a;if(typeof r=="string"||typeof r=="object"){const i=c1(this.props,r,this.presenceContext?.custom);i&&(a=i[t])}if(r&&a!==void 0)return a;const n=this.getBaseTargetFromProps(this.props,t);return n!==void 0&&!ur(n)?n:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new $N),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){s1.render(this.render)}}class T7 extends SV{constructor(){super(...arguments),this.KeyframeResolver=SU}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:a}){delete r[t],delete a[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ur(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function E7(s,{style:t,vars:r},a,n){const i=s.style;let o;for(o in t)i[o]=t[o];n?.applyProjectionStyles(i,a);for(o in r)i.setProperty(o,r[o])}function CV(s){return window.getComputedStyle(s)}class TV extends T7{constructor(){super(...arguments),this.type="html",this.renderInstance=E7}readValueFromInstance(t,r){if(Fd.has(r))return this.projection?.isProjecting?ww(r):q$(t,r);{const a=CV(t),n=(HN(r)?a.getPropertyValue(r):a[r])||0;return typeof n=="string"?n.trim():n}}measureInstanceViewportBox(t,{transformPagePoint:r}){return S7(t,r)}build(t,r,a){i1(t,r,a.transformTemplate)}scrapeMotionValuesFromProps(t,r,a){return d1(t,r,a)}}const A7=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function EV(s,t,r,a){E7(s,t,void 0,a);for(const n in t.attrs)s.setAttribute(A7.has(n)?n:u1(n),t.attrs[n])}class AV extends T7{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=bs}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Fd.has(r)){const a=s7(r);return a&&a.default||0}return r=A7.has(r)?r:u1(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,a){return y7(t,r,a)}build(t,r,a){f7(t,r,this.isSVGTag,a.transformTemplate,a.style)}renderInstance(t,r,a,n){EV(t,r,a,n)}mount(t){this.isSVGTag=g7(t.tagName),super.mount(t)}}const DV=(s,t)=>o1(s)?new AV(t):new TV(t,{allowProjection:s!==j.Fragment});function ld(s,t,r){const a=s.getProps();return c1(a,t,r!==void 0?r:a.custom,s)}const Rw=s=>Array.isArray(s);function RV(s,t,r){s.hasValue(t)?s.getValue(t).set(r):s.addValue(t,vd(r))}function MV(s){return Rw(s)?s[s.length-1]||0:s}function OV(s,t){const r=ld(s,t);let{transitionEnd:a={},transition:n={},...i}=r||{};i={...i,...a};for(const o in i){const c=MV(i[o]);RV(s,o,c)}}function LV(s){return!!(ur(s)&&s.add)}function Mw(s,t){const r=s.getValue("willChange");if(LV(r))return r.add(t);if(!r&&ki.WillChange){const a=new ki.WillChange("auto");s.addValue("willChange",a),a.add(t)}}function D7(s){return s.props[v7]}const PV=s=>s!==null;function BV(s,{repeat:t,repeatType:r="loop"},a){const n=s.filter(PV),i=t&&r!=="loop"&&t%2===1?0:n.length-1;return n[i]}const FV={type:"spring",stiffness:500,damping:25,restSpeed:10},zV=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),IV={type:"keyframes",duration:.8},$V={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},UV=(s,{keyframes:t})=>t.length>2?IV:Fd.has(s)?s.startsWith("scale")?zV(t[1]):FV:$V;function VV({when:s,delay:t,delayChildren:r,staggerChildren:a,staggerDirection:n,repeat:i,repeatType:o,repeatDelay:c,from:u,elapsed:h,...m}){return!!Object.keys(m).length}const h1=(s,t,r,a={},n,i)=>o=>{const c=e1(a,s)||{},u=c.delay||a.delay||0;let{elapsed:h=0}=a;h=h-wn(u);const m={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-h,onUpdate:p=>{t.set(p),c.onUpdate&&c.onUpdate(p)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:s,motionValue:t,element:i?void 0:n};VV(c)||Object.assign(m,UV(s,m)),m.duration&&(m.duration=wn(m.duration)),m.repeatDelay&&(m.repeatDelay=wn(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let f=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(Cw(m),m.delay===0&&(f=!0)),(ki.instantAnimations||ki.skipAnimations)&&(f=!0,Cw(m),m.delay=0),m.allowFlatten=!c.type&&!c.ease,f&&!i&&t.get()!==void 0){const p=BV(m.keyframes,c);if(p!==void 0){Jt.update(()=>{m.onUpdate(p),m.onComplete()});return}}return c.isSync?new QN(m):new xU(m)};function HV({protectedKeys:s,needsAnimating:t},r){const a=s.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,a}function R7(s,t,{delay:r=0,transitionOverride:a,type:n}={}){let{transition:i=s.getDefaultTransition(),transitionEnd:o,...c}=t;a&&(i=a);const u=[],h=n&&s.animationState&&s.animationState.getState()[n];for(const m in c){const f=s.getValue(m,s.latestValues[m]??null),p=c[m];if(p===void 0||h&&HV(h,m))continue;const v={delay:r,...e1(i||{},m)},g=f.get();if(g!==void 0&&!f.isAnimating&&!Array.isArray(p)&&p===g&&!v.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const N=D7(s);if(N){const k=window.MotionHandoffAnimation(N,m,Jt);k!==null&&(v.startTime=k,y=!0)}}Mw(s,m),f.start(h1(m,f,p,s.shouldReduceMotion&&JA.has(m)?{type:!1}:v,s,y));const w=f.animation;w&&u.push(w)}return o&&Promise.all(u).then(()=>{Jt.update(()=>{o&&OV(s,o)})}),u}function M7(s,t,r,a=0,n=1){const i=Array.from(s).sort((h,m)=>h.sortNodePosition(m)).indexOf(t),o=s.size,c=(o-1)*a;return typeof r=="function"?r(i,o):n===1?i*a:c-i*a}function Ow(s,t,r={}){const a=ld(s,t,r.type==="exit"?s.presenceContext?.custom:void 0);let{transition:n=s.getDefaultTransition()||{}}=a||{};r.transitionOverride&&(n=r.transitionOverride);const i=a?()=>Promise.all(R7(s,a,r)):()=>Promise.resolve(),o=s.variantChildren&&s.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:m,staggerDirection:f}=n;return qV(s,t,u,h,m,f,r)}:()=>Promise.resolve(),{when:c}=n;if(c){const[u,h]=c==="beforeChildren"?[i,o]:[o,i];return u().then(()=>h())}else return Promise.all([i(),o(r.delay)])}function qV(s,t,r=0,a=0,n=0,i=1,o){const c=[];for(const u of s.variantChildren)u.notify("AnimationStart",t),c.push(Ow(u,t,{...o,delay:r+(typeof a=="function"?0:a)+M7(s.variantChildren,u,a,n,i)}).then(()=>u.notify("AnimationComplete",t)));return Promise.all(c)}function WV(s,t,r={}){s.notify("AnimationStart",t);let a;if(Array.isArray(t)){const n=t.map(i=>Ow(s,i,r));a=Promise.all(n)}else if(typeof t=="string")a=Ow(s,t,r);else{const n=typeof t=="function"?ld(s,t,r.custom):t;a=Promise.all(R7(s,n,r))}return a.then(()=>{s.notify("AnimationComplete",t)})}function O7(s,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==s.length)return!1;for(let a=0;a<r;a++)if(t[a]!==s[a])return!1;return!0}const YV=n1.length;function L7(s){if(!s)return;if(!s.isControllingVariants){const r=s.parent?L7(s.parent)||{}:{};return s.props.initial!==void 0&&(r.initial=s.props.initial),r}const t={};for(let r=0;r<YV;r++){const a=n1[r],n=s.props[a];(fm(n)||n===!1)&&(t[a]=n)}return t}const GV=[...a1].reverse(),KV=a1.length;function XV(s){return t=>Promise.all(t.map(({animation:r,options:a})=>WV(s,r,a)))}function ZV(s){let t=XV(s),r=z6(),a=!0;const n=u=>(h,m)=>{const f=ld(s,m,u==="exit"?s.presenceContext?.custom:void 0);if(f){const{transition:p,transitionEnd:v,...g}=f;h={...h,...g,...v}}return h};function i(u){t=u(s)}function o(u){const{props:h}=s,m=L7(s.parent)||{},f=[],p=new Set;let v={},g=1/0;for(let w=0;w<KV;w++){const N=GV[w],k=r[N],S=h[N]!==void 0?h[N]:m[N],_=fm(S),T=N===u?k.isActive:null;T===!1&&(g=w);let E=S===m[N]&&S!==h[N]&&_;if(E&&a&&s.manuallyAnimateOnMount&&(E=!1),k.protectedKeys={...v},!k.isActive&&T===null||!S&&!k.prevProp||Cp(S)||typeof S=="boolean")continue;const z=QV(k.prevProp,S);let O=z||N===u&&k.isActive&&!E&&_||w>g&&_,C=!1;const A=Array.isArray(S)?S:[S];let X=A.reduce(n(N),{});T===!1&&(X={});const{prevResolvedValues:I={}}=k,V={...I,...X},R=se=>{O=!0,p.has(se)&&(C=!0,p.delete(se)),k.needsAnimating[se]=!0;const W=s.getValue(se);W&&(W.liveStyle=!1)};for(const se in V){const W=X[se],te=I[se];if(v.hasOwnProperty(se))continue;let J=!1;Rw(W)&&Rw(te)?J=!O7(W,te):J=W!==te,J?W!=null?R(se):p.add(se):W!==void 0&&p.has(se)?R(se):k.protectedKeys[se]=!0}k.prevProp=S,k.prevResolvedValues=X,k.isActive&&(v={...v,...X}),a&&s.blockInitialAnimation&&(O=!1);const H=E&&z;O&&(!H||C)&&f.push(...A.map(se=>{const W={type:N};if(typeof se=="string"&&a&&!H&&s.manuallyAnimateOnMount&&s.parent){const{parent:te}=s,J=ld(te,se);if(te.enteringChildren&&J){const{delayChildren:K}=J.transition||{};W.delay=M7(te.enteringChildren,s,K)}}return{animation:se,options:W}}))}if(p.size){const w={};if(typeof h.initial!="boolean"){const N=ld(s,Array.isArray(h.initial)?h.initial[0]:h.initial);N&&N.transition&&(w.transition=N.transition)}p.forEach(N=>{const k=s.getBaseTarget(N),S=s.getValue(N);S&&(S.liveStyle=!0),w[N]=k??null}),f.push({animation:w})}let y=!!f.length;return a&&(h.initial===!1||h.initial===h.animate)&&!s.manuallyAnimateOnMount&&(y=!1),a=!1,y?t(f):Promise.resolve()}function c(u,h){if(r[u].isActive===h)return Promise.resolve();s.variantChildren?.forEach(f=>f.animationState?.setActive(u,h)),r[u].isActive=h;const m=o(u);for(const f in r)r[f].protectedKeys={};return m}return{animateChanges:o,setActive:c,setAnimateFunction:i,getState:()=>r,reset:()=>{r=z6()}}}function QV(s,t){return typeof t=="string"?t!==s:Array.isArray(t)?!O7(t,s):!1}function xo(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function z6(){return{animate:xo(!0),whileInView:xo(),whileHover:xo(),whileTap:xo(),whileDrag:xo(),whileFocus:xo(),exit:xo()}}class Ll{constructor(t){this.isMounted=!1,this.node=t}update(){}}class JV extends Ll{constructor(t){super(t),t.animationState||(t.animationState=ZV(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Cp(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let eH=0;class tH extends Ll{constructor(){super(...arguments),this.id=eH++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===a)return;const n=this.node.animationState.setActive("exit",!t);r&&!t&&n.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const sH={animation:{Feature:JV},exit:{Feature:tH}};function gm(s,t,r,a={passive:!0}){return s.addEventListener(t,r,a),()=>s.removeEventListener(t,r)}function Fm(s){return{point:{x:s.pageX,y:s.pageY}}}const rH=s=>t=>r1(t)&&s(t,Fm(t));function Hh(s,t,r,a){return gm(s,t,rH(r),a)}const P7=1e-4,aH=1-P7,nH=1+P7,B7=.01,iH=0-B7,lH=0+B7;function jr(s){return s.max-s.min}function oH(s,t,r){return Math.abs(s-t)<=r}function I6(s,t,r,a=.5){s.origin=a,s.originPoint=as(t.min,t.max,s.origin),s.scale=jr(r)/jr(t),s.translate=as(r.min,r.max,s.origin)-s.originPoint,(s.scale>=aH&&s.scale<=nH||isNaN(s.scale))&&(s.scale=1),(s.translate>=iH&&s.translate<=lH||isNaN(s.translate))&&(s.translate=0)}function qh(s,t,r,a){I6(s.x,t.x,r.x,a?a.originX:void 0),I6(s.y,t.y,r.y,a?a.originY:void 0)}function $6(s,t,r){s.min=r.min+t.min,s.max=s.min+jr(t)}function cH(s,t,r){$6(s.x,t.x,r.x),$6(s.y,t.y,r.y)}function U6(s,t,r){s.min=t.min-r.min,s.max=s.min+jr(t)}function Wh(s,t,r){U6(s.x,t.x,r.x),U6(s.y,t.y,r.y)}function ja(s){return[s("x"),s("y")]}const F7=({current:s})=>s?s.ownerDocument.defaultView:null,V6=(s,t)=>Math.abs(s-t);function dH(s,t){const r=V6(s.x,t.x),a=V6(s.y,t.y);return Math.sqrt(r**2+a**2)}class z7{constructor(t,r,{transformPagePoint:a,contextWindow:n=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=Ty(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,g=dH(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!v&&!g)return;const{point:y}=p,{timestamp:w}=Qs;this.history.push({...y,timestamp:w});const{onStart:N,onMove:k}=this.handlers;v||(N&&N(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,p)},this.handlePointerMove=(p,v)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=Cy(v,this.transformPagePoint),Jt.update(this.updatePoint,!0)},this.handlePointerUp=(p,v)=>{this.end();const{onEnd:g,onSessionEnd:y,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=Ty(p.type==="pointercancel"?this.lastMoveEventInfo:Cy(v,this.transformPagePoint),this.history);this.startEvent&&g&&g(p,N),y&&y(p,N)},!r1(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=a,this.distanceThreshold=o,this.contextWindow=n||window;const c=Fm(t),u=Cy(c,this.transformPagePoint),{point:h}=u,{timestamp:m}=Qs;this.history=[{...h,timestamp:m}];const{onSessionStart:f}=r;f&&f(t,Ty(u,this.history)),this.removeListeners=Lm(Hh(this.contextWindow,"pointermove",this.handlePointerMove),Hh(this.contextWindow,"pointerup",this.handlePointerUp),Hh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Dl(this.updatePoint)}}function Cy(s,t){return t?{point:t(s.point)}:s}function H6(s,t){return{x:s.x-t.x,y:s.y-t.y}}function Ty({point:s},t){return{point:s,delta:H6(s,I7(t)),offset:H6(s,uH(t)),velocity:hH(t,.1)}}function uH(s){return s[0]}function I7(s){return s[s.length-1]}function hH(s,t){if(s.length<2)return{x:0,y:0};let r=s.length-1,a=null;const n=I7(s);for(;r>=0&&(a=s[r],!(n.timestamp-a.timestamp>wn(t)));)r--;if(!a)return{x:0,y:0};const i=Sa(n.timestamp-a.timestamp);if(i===0)return{x:0,y:0};const o={x:(n.x-a.x)/i,y:(n.y-a.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function mH(s,{min:t,max:r},a){return t!==void 0&&s<t?s=a?as(t,s,a.min):Math.max(s,t):r!==void 0&&s>r&&(s=a?as(r,s,a.max):Math.min(s,r)),s}function q6(s,t,r){return{min:t!==void 0?s.min+t:void 0,max:r!==void 0?s.max+r-(s.max-s.min):void 0}}function xH(s,{top:t,left:r,bottom:a,right:n}){return{x:q6(s.x,r,n),y:q6(s.y,t,a)}}function W6(s,t){let r=t.min-s.min,a=t.max-s.max;return t.max-t.min<s.max-s.min&&([r,a]=[a,r]),{min:r,max:a}}function fH(s,t){return{x:W6(s.x,t.x),y:W6(s.y,t.y)}}function pH(s,t){let r=.5;const a=jr(s),n=jr(t);return n>a?r=hm(t.min,t.max-a,s.min):a>n&&(r=hm(s.min,s.max-n,t.min)),_i(0,1,r)}function gH(s,t){const r={};return t.min!==void 0&&(r.min=t.min-s.min),t.max!==void 0&&(r.max=t.max-s.min),r}const Lw=.35;function bH(s=Lw){return s===!1?s=0:s===!0&&(s=Lw),{x:Y6(s,"left","right"),y:Y6(s,"top","bottom")}}function Y6(s,t,r){return{min:G6(s,t),max:G6(s,r)}}function G6(s,t){return typeof s=="number"?s:s[t]||0}const yH=new WeakMap;class vH{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=bs(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:a}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Fm(f).point)},o=(f,p)=>{const{drag:v,dragPropagation:g,onDragStart:y}=this.getProps();if(v&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=DU(v),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ja(N=>{let k=this.getAxisMotionValue(N).get()||0;if(Nn.test(k)){const{projection:S}=this.visualElement;if(S&&S.layout){const _=S.layout.layoutBox[N];_&&(k=jr(_)*(parseFloat(k)/100))}}this.originPoint[N]=k}),y&&Jt.postRender(()=>y(f,p)),Mw(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},c=(f,p)=>{this.latestPointerEvent=f,this.latestPanInfo=p;const{dragPropagation:v,dragDirectionLock:g,onDirectionLock:y,onDrag:w}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:N}=p;if(g&&this.currentDirection===null){this.currentDirection=jH(N),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",p.point,N),this.updateAxis("y",p.point,N),this.visualElement.render(),w&&w(f,p)},u=(f,p)=>{this.latestPointerEvent=f,this.latestPanInfo=p,this.stop(f,p),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>ja(f=>this.getAnimationState(f)==="paused"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:m}=this.getProps();this.panSession=new z7(t,{onSessionStart:i,onStart:o,onMove:c,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:a,contextWindow:F7(this.visualElement)})}stop(t,r){const a=t||this.latestPointerEvent,n=r||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!n||!a)return;const{velocity:o}=n;this.startAnimation(o);const{onDragEnd:c}=this.getProps();c&&Jt.postRender(()=>c(a,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:a}=this.getProps();!a&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,a){const{drag:n}=this.getProps();if(!a||!U0(t,n,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+a[t];this.constraints&&this.constraints[t]&&(o=mH(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){const{dragConstraints:t,dragElastic:r}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,n=this.constraints;t&&Jc(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&a?this.constraints=xH(a.layoutBox,t):this.constraints=!1,this.elastic=bH(r),n!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&ja(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=gH(a.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Jc(t))return!1;const a=t.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const i=wV(a,n.root,this.visualElement.getTransformPagePoint());let o=fH(n.layout.layoutBox,i);if(r){const c=r(yV(o));this.hasMutatedConstraints=!!c,c&&(o=N7(c))}return o}startAnimation(t){const{drag:r,dragMomentum:a,dragElastic:n,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},h=ja(m=>{if(!U0(m,r,this.currentDirection))return;let f=u&&u[m]||{};o&&(f={min:0,max:0});const p=n?200:1e6,v=n?40:1e7,g={type:"inertia",velocity:a?t[m]:0,bounceStiffness:p,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(m,g)});return Promise.all(h).then(c)}startAxisValueAnimation(t,r){const a=this.getAxisMotionValue(t);return Mw(this.visualElement,t),a.start(h1(t,a,0,r,this.visualElement,!1))}stopAnimation(){ja(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ja(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,a=this.visualElement.getProps(),n=a[r];return n||this.visualElement.getValue(t,(a.initial?a.initial[t]:void 0)||0)}snapToCursor(t){ja(r=>{const{drag:a}=this.getProps();if(!U0(r,a,this.currentDirection))return;const{projection:n}=this.visualElement,i=this.getAxisMotionValue(r);if(n&&n.layout){const{min:o,max:c}=n.layout.layoutBox[r];i.set(t[r]-as(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:a}=this.visualElement;if(!Jc(r)||!a||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};ja(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const u=c.get();n[o]=pH({min:u,max:u},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),ja(o=>{if(!U0(o,t,null))return;const c=this.getAxisMotionValue(o),{min:u,max:h}=this.constraints[o];c.set(as(u,h,n[o]))})}addListeners(){if(!this.visualElement.current)return;yH.set(this.visualElement,this);const t=this.visualElement.current,r=Hh(t,"pointerdown",u=>{const{drag:h,dragListener:m=!0}=this.getProps();h&&m&&this.start(u)}),a=()=>{const{dragConstraints:u}=this.getProps();Jc(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,i=n.addEventListener("measure",a);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),Jt.read(a);const o=gm(window,"resize",()=>this.scalePositionWithinConstraints()),c=n.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:h})=>{this.isDragging&&h&&(ja(m=>{const f=this.getAxisMotionValue(m);f&&(this.originPoint[m]+=u[m].translate,f.set(f.get()+u[m].translate))}),this.visualElement.render())}));return()=>{o(),r(),i(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:a=!1,dragPropagation:n=!1,dragConstraints:i=!1,dragElastic:o=Lw,dragMomentum:c=!0}=t;return{...t,drag:r,dragDirectionLock:a,dragPropagation:n,dragConstraints:i,dragElastic:o,dragMomentum:c}}}function U0(s,t,r){return(t===!0||t===s)&&(r===null||r===s)}function jH(s,t=10){let r=null;return Math.abs(s.y)>t?r="y":Math.abs(s.x)>t&&(r="x"),r}class wH extends Ll{constructor(t){super(t),this.removeGroupControls=Ea,this.removeListeners=Ea,this.controls=new vH(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ea}unmount(){this.removeGroupControls(),this.removeListeners()}}const K6=s=>(t,r)=>{s&&Jt.postRender(()=>s(t,r))};class NH extends Ll{constructor(){super(...arguments),this.removePointerDownListener=Ea}onPointerDown(t){this.session=new z7(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:F7(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:a,onPanEnd:n}=this.node.getProps();return{onSessionStart:K6(t),onStart:K6(r),onMove:a,onEnd:(i,o)=>{delete this.session,n&&Jt.postRender(()=>n(i,o))}}}mount(){this.removePointerDownListener=Hh(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Bf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function X6(s,t){return t.max===t.min?0:s/(t.max-t.min)*100}const hh={correct:(s,t)=>{if(!t.target)return s;if(typeof s=="string")if(st.test(s))s=parseFloat(s);else return s;const r=X6(s,t.target.x),a=X6(s,t.target.y);return`${r}% ${a}%`}},_H={correct:(s,{treeScale:t,projectionDelta:r})=>{const a=s,n=Rl.parse(s);if(n.length>5)return a;const i=Rl.createTransformer(s),o=typeof n[0]!="number"?1:0,c=r.x.scale*t.x,u=r.y.scale*t.y;n[0+o]/=c,n[1+o]/=u;const h=as(c,u,.5);return typeof n[2+o]=="number"&&(n[2+o]/=h),typeof n[3+o]=="number"&&(n[3+o]/=h),i(n)}};let Ey=!1;class kH extends j.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:a,layoutId:n}=this.props,{projection:i}=t;YU(SH),i&&(r.group&&r.group.add(i),a&&a.register&&n&&a.register(i),Ey&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Bf.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:a,drag:n,isPresent:i}=this.props,{projection:o}=a;return o&&(o.isPresent=i,Ey=!0,n||t.layoutDependency!==r||r===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||Jt.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),s1.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:a}=this.props,{projection:n}=t;Ey=!0,n&&(n.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(n),a&&a.deregister&&a.deregister(n))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function $7(s){const[t,r]=IU(),a=j.useContext(yA);return e.jsx(kH,{...s,layoutGroup:a,switchLayoutGroup:j.useContext(j7),isPresent:t,safeToRemove:r})}const SH={borderRadius:{...hh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:hh,borderTopRightRadius:hh,borderBottomLeftRadius:hh,borderBottomRightRadius:hh,boxShadow:_H};function CH(s,t,r){const a=ur(s)?s:vd(s);return a.start(h1("",a,t,r)),a.animation}const TH=(s,t)=>s.depth-t.depth;class EH{constructor(){this.children=[],this.isDirty=!1}add(t){BN(this.children,t),this.isDirty=!0}remove(t){FN(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(TH),this.isDirty=!1,this.children.forEach(t)}}function AH(s,t){const r=Pr.now(),a=({timestamp:n})=>{const i=n-r;i>=t&&(Dl(a),s(i-t))};return Jt.setup(a,!0),()=>Dl(a)}const U7=["TopLeft","TopRight","BottomLeft","BottomRight"],DH=U7.length,Z6=s=>typeof s=="string"?parseFloat(s):s,Q6=s=>typeof s=="number"||st.test(s);function RH(s,t,r,a,n,i){n?(s.opacity=as(0,r.opacity??1,MH(a)),s.opacityExit=as(t.opacity??1,0,OH(a))):i&&(s.opacity=as(t.opacity??1,r.opacity??1,a));for(let o=0;o<DH;o++){const c=`border${U7[o]}Radius`;let u=J6(t,c),h=J6(r,c);if(u===void 0&&h===void 0)continue;u||(u=0),h||(h=0),u===0||h===0||Q6(u)===Q6(h)?(s[c]=Math.max(as(Z6(u),Z6(h),a),0),(Nn.test(h)||Nn.test(u))&&(s[c]+="%")):s[c]=h}(t.rotate||r.rotate)&&(s.rotate=as(t.rotate||0,r.rotate||0,a))}function J6(s,t){return s[t]!==void 0?s[t]:s.borderRadius}const MH=V7(0,.5,AA),OH=V7(.5,.95,Ea);function V7(s,t,r){return a=>a<s?0:a>t?1:r(hm(s,t,a))}function ek(s,t){s.min=t.min,s.max=t.max}function pa(s,t){ek(s.x,t.x),ek(s.y,t.y)}function tk(s,t){s.translate=t.translate,s.scale=t.scale,s.originPoint=t.originPoint,s.origin=t.origin}function sk(s,t,r,a,n){return s-=t,s=ap(s,1/r,a),n!==void 0&&(s=ap(s,1/n,a)),s}function LH(s,t=0,r=1,a=.5,n,i=s,o=s){if(Nn.test(t)&&(t=parseFloat(t),t=as(o.min,o.max,t/100)-o.min),typeof t!="number")return;let c=as(i.min,i.max,a);s===i&&(c-=t),s.min=sk(s.min,t,r,c,n),s.max=sk(s.max,t,r,c,n)}function rk(s,t,[r,a,n],i,o){LH(s,t[r],t[a],t[n],t.scale,i,o)}const PH=["x","scaleX","originX"],BH=["y","scaleY","originY"];function ak(s,t,r,a){rk(s.x,t,PH,r?r.x:void 0,a?a.x:void 0),rk(s.y,t,BH,r?r.y:void 0,a?a.y:void 0)}function nk(s){return s.translate===0&&s.scale===1}function H7(s){return nk(s.x)&&nk(s.y)}function ik(s,t){return s.min===t.min&&s.max===t.max}function FH(s,t){return ik(s.x,t.x)&&ik(s.y,t.y)}function lk(s,t){return Math.round(s.min)===Math.round(t.min)&&Math.round(s.max)===Math.round(t.max)}function q7(s,t){return lk(s.x,t.x)&&lk(s.y,t.y)}function ok(s){return jr(s.x)/jr(s.y)}function ck(s,t){return s.translate===t.translate&&s.scale===t.scale&&s.originPoint===t.originPoint}class zH{constructor(){this.members=[]}add(t){BN(this.members,t),t.scheduleRender()}remove(t){if(FN(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(n=>t===n);if(r===0)return!1;let a;for(let n=r;n>=0;n--){const i=this.members[n];if(i.isPresent!==!1){a=i;break}}return a?(this.promote(a),!0):!1}promote(t,r){const a=this.lead;if(t!==a&&(this.prevLead=a,this.lead=t,t.show(),a)){a.instance&&a.scheduleRender(),t.scheduleRender(),t.resumeFrom=a,r&&(t.resumeFrom.preserveOpacity=!0),a.snapshot&&(t.snapshot=a.snapshot,t.snapshot.latestValues=a.animationValues||a.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:n}=t.options;n===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:a}=t;r.onExitComplete&&r.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function IH(s,t,r){let a="";const n=s.x.translate/t.x,i=s.y.translate/t.y,o=r?.z||0;if((n||i||o)&&(a=`translate3d(${n}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(a+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:h,rotate:m,rotateX:f,rotateY:p,skewX:v,skewY:g}=r;h&&(a=`perspective(${h}px) ${a}`),m&&(a+=`rotate(${m}deg) `),f&&(a+=`rotateX(${f}deg) `),p&&(a+=`rotateY(${p}deg) `),v&&(a+=`skewX(${v}deg) `),g&&(a+=`skewY(${g}deg) `)}const c=s.x.scale*t.x,u=s.y.scale*t.y;return(c!==1||u!==1)&&(a+=`scale(${c}, ${u})`),a||"none"}const Ay=["","X","Y","Z"],$H=1e3;let UH=0;function Dy(s,t,r,a){const{latestValues:n}=t;n[s]&&(r[s]=n[s],t.setStaticValue(s,0),a&&(a[s]=0))}function W7(s){if(s.hasCheckedOptimisedAppear=!0,s.root===s)return;const{visualElement:t}=s.options;if(!t)return;const r=D7(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:n,layoutId:i}=s.options;window.MotionCancelOptimisedAnimation(r,"transform",Jt,!(n||i))}const{parent:a}=s;a&&!a.hasCheckedOptimisedAppear&&W7(a)}function Y7({attachResizeListener:s,defaultParent:t,measureScroll:r,checkIsScrollRoot:a,resetTransform:n}){return class{constructor(o={},c=t?.()){this.id=UH++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(qH),this.nodes.forEach(KH),this.nodes.forEach(XH),this.nodes.forEach(WH)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new EH)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new $N),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const u=this.eventHandlers.get(o);u&&u.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=o7(o)&&!BU(o),this.instance=o;const{layoutId:c,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||c)&&(this.isLayoutDirty=!0),s){let m,f=0;const p=()=>this.root.updateBlockedByResize=!1;Jt.read(()=>{f=window.innerWidth}),s(o,()=>{const v=window.innerWidth;v!==f&&(f=v,this.root.updateBlockedByResize=!0,m&&m(),m=AH(p,250),Bf.hasAnimatedSinceResize&&(Bf.hasAnimatedSinceResize=!1,this.nodes.forEach(hk)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||u)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:f,hasRelativeLayoutChanged:p,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||h.getDefaultTransition()||tq,{onLayoutAnimationStart:y,onLayoutAnimationComplete:w}=h.getProps(),N=!this.targetLayout||!q7(this.targetLayout,v),k=!f&&p;if(this.options.layoutRoot||this.resumeFrom||k||f&&(N||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const S={...e1(g,"layout"),onPlay:y,onComplete:w};(h.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S),this.setAnimationOrigin(m,k)}else f||hk(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Dl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ZH),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&W7(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const f=this.path[m];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(dk);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(uk);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(GH),this.nodes.forEach(VH),this.nodes.forEach(HH)):this.nodes.forEach(uk),this.clearAllSnapshots();const c=Pr.now();Qs.delta=_i(0,1e3/60,c-Qs.timestamp),Qs.timestamp=c,Qs.isProcessing=!0,yy.update.process(Qs),yy.preRender.process(Qs),yy.render.process(Qs),Qs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,s1.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(YH),this.sharedNodes.forEach(QH)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Jt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Jt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!jr(this.snapshot.measuredBox.x)&&!jr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=bs(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const u=a(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!n)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!H7(this.projectionDelta),u=this.getTransformTemplate(),h=u?u(this.latestValues,""):void 0,m=h!==this.prevTransformTemplateValue;o&&this.instance&&(c||ko(this.latestValues)||m)&&(n(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return o&&(u=this.removeTransform(u)),sq(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return bs();const c=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(rq))){const{scroll:h}=this.root;h&&(ed(c.x,h.offset.x),ed(c.y,h.offset.y))}return c}removeElementScroll(o){const c=bs();if(pa(c,o),this.scroll?.wasRoot)return c;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:m,options:f}=h;h!==this.root&&m&&f.layoutScroll&&(m.wasRoot&&pa(c,o),ed(c.x,m.offset.x),ed(c.y,m.offset.y))}return c}applyTransform(o,c=!1){const u=bs();pa(u,o);for(let h=0;h<this.path.length;h++){const m=this.path[h];!c&&m.options.layoutScroll&&m.scroll&&m!==m.root&&td(u,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),ko(m.latestValues)&&td(u,m.latestValues)}return ko(this.latestValues)&&td(u,this.latestValues),u}removeTransform(o){const c=bs();pa(c,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];if(!h.instance||!ko(h.latestValues))continue;Ew(h.latestValues)&&h.updateSnapshot();const m=bs(),f=h.measurePageBox();pa(m,f),ak(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,m)}return ko(this.latestValues)&&ak(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Qs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:f}=this.options;if(!(!this.layout||!(m||f))){if(this.resolvedRelativeTargetAt=Qs.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=bs(),this.relativeTargetOrigin=bs(),Wh(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),pa(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=bs(),this.targetWithTransforms=bs()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),cH(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):pa(this.target,this.layout.layoutBox),k7(this.target,this.targetDelta)):pa(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=bs(),this.relativeTargetOrigin=bs(),Wh(this.relativeTargetOrigin,this.target,p.target),pa(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Ew(this.parent.latestValues)||_7(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),c=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Qs.timestamp&&(u=!1),u)return;const{layout:h,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||m))return;pa(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;jV(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=bs());const{target:v}=o;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(tk(this.prevProjectionDelta.x,this.projectionDelta.x),tk(this.prevProjectionDelta.y,this.projectionDelta.y)),qh(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!ck(this.projectionDelta.x,this.prevProjectionDelta.x)||!ck(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=sd(),this.projectionDelta=sd(),this.projectionDeltaWithTransform=sd()}setAnimationOrigin(o,c=!1){const u=this.snapshot,h=u?u.latestValues:{},m={...this.latestValues},f=sd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const p=bs(),v=u?u.source:void 0,g=this.layout?this.layout.source:void 0,y=v!==g,w=this.getStack(),N=!w||w.members.length<=1,k=!!(y&&!N&&this.options.crossfade===!0&&!this.path.some(eq));this.animationProgress=0;let S;this.mixTargetDelta=_=>{const T=_/1e3;mk(f.x,o.x,T),mk(f.y,o.y,T),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Wh(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),JH(this.relativeTarget,this.relativeTargetOrigin,p,T),S&&FH(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=bs()),pa(S,this.relativeTarget)),y&&(this.animationValues=m,RH(m,h,this.latestValues,T,k,N)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Dl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Jt.update(()=>{Bf.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=vd(0)),this.currentAnimation=CH(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta($H),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:u,layout:h,latestValues:m}=o;if(!(!c||!u||!h)){if(this!==o&&this.layout&&h&&G7(this.options.animationType,this.layout.layoutBox,h.layoutBox)){u=this.target||bs();const f=jr(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+f;const p=jr(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+p}pa(c,u),td(c,m),qh(this.projectionDeltaWithTransform,this.layoutCorrected,c,m)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new zH),this.sharedNodes.get(o).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:u}={}){const h=this.getStack();h&&h.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const h={};u.z&&Dy("z",o,h,this.animationValues);for(let m=0;m<Ay.length;m++)Dy(`rotate${Ay[m]}`,o,h,this.animationValues),Dy(`skew${Ay[m]}`,o,h,this.animationValues);o.render();for(const m in h)o.setStaticValue(m,h[m]),this.animationValues&&(this.animationValues[m]=h[m]);o.scheduleRender()}applyProjectionStyles(o,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Pf(c?.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Pf(c?.pointerEvents)||""),this.hasProjected&&!ko(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const m=h.animationValues||h.latestValues;this.applyTransformsToTarget();let f=IH(this.projectionDeltaWithTransform,this.treeScale,m);u&&(f=u(m,f)),o.transform=f;const{x:p,y:v}=this.projectionDelta;o.transformOrigin=`${p.origin*100}% ${v.origin*100}% 0`,h.animationValues?o.opacity=h===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:o.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const g in pm){if(m[g]===void 0)continue;const{correct:y,applyTo:w,isCSSVariable:N}=pm[g],k=f==="none"?m[g]:y(m[g],h);if(w){const S=w.length;for(let _=0;_<S;_++)o[w[_]]=k}else N?this.options.visualElement.renderState.vars[g]=k:o[g]=k}this.options.layoutId&&(o.pointerEvents=h===this?Pf(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(dk),this.root.sharedNodes.clear()}}}function VH(s){s.updateLayout()}function HH(s){const t=s.resumeFrom?.snapshot||s.snapshot;if(s.isLead()&&s.layout&&t&&s.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:a}=s.layout,{animationType:n}=s.options,i=t.source!==s.layout.source;n==="size"?ja(m=>{const f=i?t.measuredBox[m]:t.layoutBox[m],p=jr(f);f.min=r[m].min,f.max=f.min+p}):G7(n,t.layoutBox,r)&&ja(m=>{const f=i?t.measuredBox[m]:t.layoutBox[m],p=jr(r[m]);f.max=f.min+p,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[m].max=s.relativeTarget[m].min+p)});const o=sd();qh(o,r,t.layoutBox);const c=sd();i?qh(c,s.applyTransform(a,!0),t.measuredBox):qh(c,r,t.layoutBox);const u=!H7(o);let h=!1;if(!s.resumeFrom){const m=s.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:f,layout:p}=m;if(f&&p){const v=bs();Wh(v,t.layoutBox,f.layoutBox);const g=bs();Wh(g,r,p.layoutBox),q7(v,g)||(h=!0),m.options.layoutRoot&&(s.relativeTarget=g,s.relativeTargetOrigin=v,s.relativeParent=m)}}}s.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:c,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:h})}else if(s.isLead()){const{onExitComplete:r}=s.options;r&&r()}s.options.transition=void 0}function qH(s){s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function WH(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function YH(s){s.clearSnapshot()}function dk(s){s.clearMeasurements()}function uk(s){s.isLayoutDirty=!1}function GH(s){const{visualElement:t}=s.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),s.resetTransform()}function hk(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function KH(s){s.resolveTargetDelta()}function XH(s){s.calcProjection()}function ZH(s){s.resetSkewAndRotation()}function QH(s){s.removeLeadSnapshot()}function mk(s,t,r){s.translate=as(t.translate,0,r),s.scale=as(t.scale,1,r),s.origin=t.origin,s.originPoint=t.originPoint}function xk(s,t,r,a){s.min=as(t.min,r.min,a),s.max=as(t.max,r.max,a)}function JH(s,t,r,a){xk(s.x,t.x,r.x,a),xk(s.y,t.y,r.y,a)}function eq(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const tq={duration:.45,ease:[.4,0,.1,1]},fk=s=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(s),pk=fk("applewebkit/")&&!fk("chrome/")?Math.round:Ea;function gk(s){s.min=pk(s.min),s.max=pk(s.max)}function sq(s){gk(s.x),gk(s.y)}function G7(s,t,r){return s==="position"||s==="preserve-aspect"&&!oH(ok(t),ok(r),.2)}function rq(s){return s!==s.root&&s.scroll?.wasRoot}const aq=Y7({attachResizeListener:(s,t)=>gm(s,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ry={current:void 0},K7=Y7({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!Ry.current){const s=new aq({});s.mount(window),s.setOptions({layoutScroll:!0}),Ry.current=s}return Ry.current},resetTransform:(s,t)=>{s.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),nq={pan:{Feature:NH},drag:{Feature:wH,ProjectionNode:K7,MeasureLayout:$7}};function bk(s,t,r){const{props:a}=s;s.animationState&&a.whileHover&&s.animationState.setActive("whileHover",r==="Start");const n="onHover"+r,i=a[n];i&&Jt.postRender(()=>i(t,Fm(t)))}class iq extends Ll{mount(){const{current:t}=this.node;t&&(this.unmount=RU(t,(r,a)=>(bk(this.node,a,"Start"),n=>bk(this.node,n,"End"))))}unmount(){}}class lq extends Ll{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Lm(gm(this.node.current,"focus",()=>this.onFocus()),gm(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function yk(s,t,r){const{props:a}=s;if(s.current instanceof HTMLButtonElement&&s.current.disabled)return;s.animationState&&a.whileTap&&s.animationState.setActive("whileTap",r==="Start");const n="onTap"+(r==="End"?"":r),i=a[n];i&&Jt.postRender(()=>i(t,Fm(t)))}class oq extends Ll{mount(){const{current:t}=this.node;t&&(this.unmount=PU(t,(r,a)=>(yk(this.node,a,"Start"),(n,{success:i})=>yk(this.node,n,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Pw=new WeakMap,My=new WeakMap,cq=s=>{const t=Pw.get(s.target);t&&t(s)},dq=s=>{s.forEach(cq)};function uq({root:s,...t}){const r=s||document;My.has(r)||My.set(r,{});const a=My.get(r),n=JSON.stringify(t);return a[n]||(a[n]=new IntersectionObserver(dq,{root:s,...t})),a[n]}function hq(s,t,r){const a=uq(t);return Pw.set(s,r),a.observe(s),()=>{Pw.delete(s),a.unobserve(s)}}const mq={some:0,all:1};class xq extends Ll{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:a,amount:n="some",once:i}=t,o={root:r?r.current:void 0,rootMargin:a,threshold:typeof n=="number"?n:mq[n]},c=u=>{const{isIntersecting:h}=u;if(this.isInView===h||(this.isInView=h,i&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:m,onViewportLeave:f}=this.node.getProps(),p=h?m:f;p&&p(u)};return hq(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(fq(t,r))&&this.startObserver()}unmount(){}}function fq({viewport:s={}},{viewport:t={}}={}){return r=>s[r]!==t[r]}const pq={inView:{Feature:xq},tap:{Feature:oq},focus:{Feature:lq},hover:{Feature:iq}},gq={layout:{ProjectionNode:K7,MeasureLayout:$7}},bq={...sH,...pq,...nq,...gq},yq=bV(bq,DV),vq=(s,t)=>{const r=new Set([...Object.keys(s),...t.flatMap(n=>Object.keys(n))]),a={};return r.forEach(n=>{a[n]=[s[n],...t.map(i=>i[n])]}),a},Oy=({text:s="",delay:t=200,className:r="",animateBy:a="words",direction:n="top",threshold:i=.1,rootMargin:o="0px",animationFrom:c,animationTo:u,easing:h=p=>p,onAnimationComplete:m,stepDuration:f=.35})=>{const p=a==="words"?s.split(" "):s.split(""),[v,g]=j.useState(!1),y=j.useRef(null);j.useEffect(()=>{if(!y.current)return;const z=new IntersectionObserver(([O])=>{O.isIntersecting&&(g(!0),z.unobserve(y.current))},{threshold:i,rootMargin:o});return z.observe(y.current),()=>z.disconnect()},[i,o]);const w=j.useMemo(()=>n==="top"?{filter:"blur(10px)",opacity:0,y:-50}:{filter:"blur(10px)",opacity:0,y:50},[n]),N=j.useMemo(()=>[{filter:"blur(5px)",opacity:.5,y:n==="top"?5:-5},{filter:"blur(0px)",opacity:1,y:0}],[n]),k=c??w,S=u??N,_=S.length+1,T=f*(_-1),E=Array.from({length:_},(z,O)=>_===1?0:O/(_-1));return e.jsx("p",{ref:y,className:r,style:{display:"flex",flexWrap:"wrap"},children:p.map((z,O)=>{const C=vq(k,S),A={duration:T,times:E,delay:O*t/1e3,ease:h};return e.jsxs(yq.span,{initial:k,animate:v?C:k,transition:A,onAnimationComplete:O===p.length-1?m:void 0,style:{display:"inline-block",willChange:"transform, filter, opacity"},children:[z===" "?"":z,a==="words"&&O<p.length-1&&""]},O)})})},mh=({title:s,status:t,priority:r,deadline:a})=>{const n={pending:"bg-yellow-100 text-yellow-800 border-yellow-300",in_progress:"bg-blue-100 text-blue-800 border-blue-300",completed:"bg-green-100 text-green-800 border-green-300"},i={low:"text-gray-500",medium:"text-orange-600",high:"text-red-600"},o={pending:"",in_progress:" ",completed:""};return e.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-200 hover:border-purple-300 transition-all cursor-pointer group shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-gray-900 font-normal mb-2 group-hover:text-purple-600 transition-colors text-sm",children:s}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${n[t]}`,children:o[t]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ge,{className:`w-3 h-3 ${i[r]}`}),e.jsx("span",{className:`text-xs ${i[r]}`,children:r==="high"?"":r==="medium"?"":""})]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex items-center gap-1 text-gray-600",children:[e.jsx(Ve,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs",children:a})]})})]})})},jq=({user:s,action:t,item:r,time:a,avatar:n,color:i})=>{const o={purple:"bg-purple-100 text-purple-700 border-purple-200",pink:"bg-pink-100 text-pink-700 border-pink-200",blue:"bg-blue-100 text-blue-700 border-blue-200",green:"bg-green-100 text-green-700 border-green-200"};return e.jsxs("div",{className:"flex items-start gap-3 group",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-medium text-sm flex-shrink-0 border ${o[i]}`,children:n}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm text-gray-900 font-normal",children:[e.jsx("span",{className:"font-medium",children:s})," ",e.jsx("span",{className:"text-gray-600",children:t})]}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:r}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:a})]})]})},wq=({title:s,client:t,progress:r,status:a,deadline:n})=>{const i={in_progress:"bg-blue-100 text-blue-800 border-blue-300",completed:"bg-green-100 text-green-800 border-green-300",on_hold:"bg-orange-100 text-orange-800 border-orange-300"},o={in_progress:" ",completed:"",on_hold:""};return e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 hover:border-purple-300 transition-all cursor-pointer group shadow-sm",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"text-gray-900 font-normal mb-1 group-hover:text-purple-600 transition-colors text-sm",children:s}),e.jsx("p",{className:"text-xs text-gray-600",children:t})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-xs text-gray-600",children:""}),e.jsxs("span",{className:"text-xs text-gray-900 font-medium",children:[r,"%"]})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-purple-600 transition-all duration-300",style:{width:`${r}%`}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${i[a]}`,children:o[a]}),e.jsxs("div",{className:"flex items-center gap-1 text-gray-600",children:[e.jsx(Ve,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs",children:n})]})]})]})},Ly=({icon:s,text:t,onClick:r,color:a})=>{const n={purple:"hover:bg-purple-50 hover:border-purple-300 text-purple-700",pink:"hover:bg-pink-50 hover:border-pink-300 text-pink-700",blue:"hover:bg-blue-50 hover:border-blue-300 text-blue-700",green:"hover:bg-green-50 hover:border-green-300 text-green-700"};return e.jsxs("button",{onClick:r,className:`w-full flex items-center gap-3 p-4 rounded-xl bg-white border border-gray-200 transition-all shadow-sm ${n[a]}`,children:[e.jsx("div",{className:"flex-shrink-0",children:s}),e.jsx("span",{className:"text-sm font-normal text-gray-900",children:t})]})},vk=({label:s,value:t,max:r,color:a})=>{const n=r>0?Math.round(t/r*100):0,i={purple:"bg-gradient-to-r from-purple-500 to-purple-600",green:"bg-gradient-to-r from-green-500 to-green-600",red:"bg-gradient-to-r from-red-500 to-red-600",blue:"bg-gradient-to-r from-blue-500 to-blue-600"};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-gray-900 font-normal",children:s}),e.jsxs("span",{className:"text-xs text-gray-600",children:[t," / ",r," (",n,"%)"]})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-300 ${i[a]}`,style:{width:`${n}%`}})})]})},jk=["   ? ","  - ! ","   ! "],wk=()=>{const s=Oa(),[t,r]=j.useState(null),[a,n]=j.useState(null),[i,o]=j.useState({projects:{total:0,active:0,completed:0},tasks:{total:0,pending:0,completed:0},clients:{total:0,active:0},finance:{totalRevenue:0,pending:0,received:0}}),[c,u]=j.useState(!0),[h,m]=j.useState(0);j.useEffect(()=>{const g=setInterval(()=>{m(y=>(y+1)%jk.length)},8e3);return()=>clearInterval(g)},[]),j.useEffect(()=>{if(!localStorage.getItem("auth")){s("/login");return}p();const y=()=>{document.hidden||(console.log(" Page visible again, refreshing dashboard..."),p())},w=()=>{console.log(" Window focused, refreshing dashboard..."),p()},N=()=>{console.log(" Data update event received, refreshing dashboard..."),p()};return document.addEventListener("visibilitychange",y),window.addEventListener("focus",w),window.addEventListener("dashboardUpdate",N),()=>{document.removeEventListener("visibilitychange",y),window.removeEventListener("focus",w),window.removeEventListener("dashboardUpdate",N)}},[]);const f=async()=>{try{console.log(" Fetching daily chart data...");const g=await fe.get("/admin/api/dashboard/charts/daily?days=30");g.data.success&&g.data.data&&(console.log(" Daily chart data fetched:",g.data.data),n(g.data.data))}catch(g){console.error(" Error fetching daily chart data:",g)}},p=async()=>{try{u(!0),console.log(" Fetching dashboard stats from new API...");const g=await fe.get("/admin/api/dashboard/stats");if(g.data.success&&g.data.data){const y=g.data.data;console.log(" Dashboard data fetched:",y),r(y),f();const w=y.charts?.projects_distribution||{},N=w.in_progress||0,k=w.completed||0,S=y.charts?.tasks_by_status||{},_=(S.pending||0)+(y.summary?.overdue_tasks||0),T=S.completed||0,E={projects:{total:y.summary?.total_projects||y.projects.length,active:N||y.summary?.active_projects||0,completed:k},tasks:{total:y.summary?.total_tasks||0,pending:_,completed:T},clients:{total:y.clients.active_count+y.clients.new_leads_week,active:y.clients.active_count},finance:{totalRevenue:y.finance.month_revenue,pending:y.finance.pending,received:y.finance.paid}};console.log(" Setting stats:",E),o(E)}}catch(g){console.error(" Error fetching dashboard stats:",g)}finally{u(!1)}},v=[{color:"#ffffff",title:c?"...":`${i.projects.total}`,description:c?" ...":`: ${i.projects.active}  : ${i.projects.completed}`,label:"",icon:e.jsx(qa,{}),onClick:()=>s("/projects")},{color:"#f8fafc",title:c?"...":`${i.tasks.total}`,description:c?" ...":` : ${i.tasks.pending}  : ${i.tasks.completed}`,label:"",icon:e.jsx(Ds,{}),onClick:()=>s("/tasks")},{color:"#ffffff",title:c?"...":`${i.clients.total}`,description:c?" ...":` : ${i.clients.active}`,label:"",icon:e.jsx(it,{}),onClick:()=>s("/clients")},{color:"#ffffff",title:c?"...":`${(i.finance.totalRevenue/1e3).toFixed(0)}K `,description:c?" ...":`: ${(i.finance.received/1e3).toFixed(0)}K  : ${(i.finance.pending/1e3).toFixed(0)}K`,label:"",icon:e.jsx(Qe,{}),onClick:()=>s("/finance")},{color:"#f1f5f9",title:c?"...":`${i.projects.completed}`,description:c?" ...":`   ${i.projects.active}  `,label:"",icon:e.jsx(xt,{}),onClick:()=>s("/analytics")},{color:"#e2e8f0",title:c?"...":`${t?.summary?.overdue_tasks||0}`,description:c?" ...":"   ",label:"",icon:e.jsx(Ga,{}),onClick:()=>s("/automation")}];return c||!t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 p-6 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-pulse text-gray-400 text-2xl mb-4",children:" ..."}),e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"})]})}):t.user.role==="executor"?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 p-6",children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"bg-white backdrop-blur-xl rounded-2xl p-12 border border-gray-200 shadow-lg min-h-[200px]",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(Oy,{text:t.greeting.title,delay:80,direction:"top",animateBy:"words",className:"text-4xl text-gray-900 font-normal text-center"},t.greeting.title),t.summary&&e.jsxs("div",{className:"flex items-center justify-center gap-6 text-sm text-gray-600",children:[t.summary.total_tasks!==void 0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ds,{className:"w-4 h-4 text-purple-600"}),e.jsxs("span",{children:[" : ",e.jsx("strong",{children:t.summary.total_tasks})]})]}),t.summary.overdue_tasks!==void 0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"w-4 h-4 text-red-600"}),e.jsxs("span",{children:[": ",e.jsx("strong",{children:t.summary.overdue_tasks})]})]}),t.summary.tasks_today!==void 0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ds,{className:"w-4 h-4 text-blue-600"}),e.jsxs("span",{children:[" : ",e.jsx("strong",{children:t.summary.tasks_today})]})]})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{onClick:()=>s("/my-tasks"),className:"bg-gradient-to-br from-yellow-50 to-orange-100 backdrop-blur-xl rounded-2xl p-6 border border-yellow-200 shadow-lg hover:shadow-xl transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Ve,{className:"w-6 h-6 text-yellow-600"}),e.jsx("span",{className:"text-sm text-yellow-700 font-semibold",children:" "})]}),e.jsx("div",{className:"text-3xl font-bold text-yellow-700",children:t.tasks.overdue.length+t.tasks.upcoming.filter(g=>g.status==="pending").length}),e.jsx("div",{className:"text-xs text-gray-600 mt-2",children:t.tasks.overdue.length>0&&e.jsxs("span",{className:"text-red-600",children:[": ",t.tasks.overdue.length]})})]}),e.jsxs("div",{onClick:()=>s("/my-tasks"),className:"bg-gradient-to-br from-blue-50 to-sky-100 backdrop-blur-xl rounded-2xl p-6 border border-blue-200 shadow-lg hover:shadow-xl transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Ya,{className:"w-6 h-6 text-blue-600"}),e.jsx("span",{className:"text-sm text-blue-700 font-semibold",children:" "})]}),e.jsx("div",{className:"text-3xl font-bold text-blue-700",children:t.tasks.upcoming.filter(g=>g.status==="in_progress").length}),e.jsx("div",{className:"text-xs text-gray-600 mt-2",children:" "})]}),e.jsxs("div",{onClick:()=>s("/my-tasks"),className:"bg-gradient-to-br from-green-50 to-emerald-100 backdrop-blur-xl rounded-2xl p-6 border border-green-200 shadow-lg hover:shadow-xl transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Ds,{className:"w-6 h-6 text-green-600"}),e.jsx("span",{className:"text-sm text-green-700 font-semibold",children:""})]}),e.jsx("div",{className:"text-3xl font-bold text-green-700",children:t.charts?.tasks_by_status?.completed||0}),e.jsx("div",{className:"text-xs text-gray-600 mt-2",children:" "})]})]}),e.jsxs("div",{className:"bg-white backdrop-blur-xl rounded-2xl p-6 border border-gray-200 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ds,{className:"w-5 h-5 text-purple-600"}),e.jsx("h2",{className:"text-xl font-normal text-gray-900",children:" "})]}),e.jsx("button",{onClick:()=>s("/my-tasks"),className:"text-sm text-gray-400 hover:text-gray-900 transition-colors font-normal",children:"  "})]}),e.jsxs("div",{className:"space-y-3",children:[t.tasks.overdue.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs font-semibold text-red-600 uppercase mb-2",children:[" (",t.tasks.overdue.length,")"]}),t.tasks.overdue.slice(0,3).map(g=>e.jsx(mh,{title:g.title,status:"pending",priority:g.priority,deadline:new Date(g.deadline).toLocaleDateString("ru-RU")},g.id))]}),t.tasks.upcoming.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs font-semibold text-blue-600 uppercase mb-2",children:[" (",t.tasks.upcoming.length,")"]}),t.tasks.upcoming.slice(0,5).map(g=>e.jsx(mh,{title:g.title,status:g.status,priority:g.priority,deadline:new Date(g.deadline).toLocaleDateString("ru-RU")},g.id))]}),t.tasks.overdue.length===0&&t.tasks.upcoming.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-400",children:"  "})]})]})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 p-6",children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"bg-white backdrop-blur-xl rounded-2xl p-12 border border-gray-200 shadow-lg min-h-[200px]",children:c?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-pulse text-gray-400 text-2xl",children:"..."})}):t?e.jsxs("div",{className:"space-y-4",children:[e.jsx(Oy,{text:t.greeting.title,delay:80,direction:"top",animateBy:"words",className:"text-4xl text-gray-900 font-normal text-center"},t.greeting.title),t.summary&&e.jsxs("div",{className:"flex items-center justify-center gap-6 text-sm text-gray-600",children:[t.summary.active_projects!==void 0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qa,{className:"w-4 h-4 text-purple-600"}),e.jsxs("span",{children:[" : ",e.jsx("strong",{children:t.summary.active_projects})]})]}),t.summary.active_clients!==void 0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(it,{className:"w-4 h-4 text-blue-600"}),e.jsxs("span",{children:[" : ",e.jsx("strong",{children:t.summary.active_clients})]})]}),t.summary.month_revenue!==void 0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"w-4 h-4 text-green-600"}),e.jsxs("span",{children:["  : ",e.jsxs("strong",{children:[t.summary.month_revenue.toLocaleString("ru-RU")," "]})]})]}),t.summary.projects_in_work!==void 0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qa,{className:"w-4 h-4 text-purple-600"}),e.jsxs("span",{children:["  : ",e.jsx("strong",{children:t.summary.projects_in_work})]})]}),t.summary.overdue_tasks!==void 0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"w-4 h-4 text-red-600"}),e.jsxs("span",{children:[" : ",e.jsx("strong",{children:t.summary.overdue_tasks})]})]}),t.summary.tasks_today!==void 0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ds,{className:"w-4 h-4 text-blue-600"}),e.jsxs("span",{children:["  : ",e.jsx("strong",{children:t.summary.tasks_today})]})]})]})]}):e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(Oy,{text:jk[h],delay:80,direction:"top",animateBy:"words",className:"text-5xl text-gray-900 font-normal text-center"},h)})})}),e.jsx(II,{textAutoHide:!0,enableStars:!0,enableSpotlight:!0,enableBorderGlow:!0,enableTilt:!0,enableMagnetism:!0,clickEffect:!0,spotlightRadius:300,particleCount:12,glowColor:"132, 0, 255",cards:v}),a&&e.jsxs("div",{className:"mt-8 bg-white backdrop-blur-xl rounded-2xl p-6 border border-gray-200 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(xt,{className:"w-5 h-5 text-purple-600"}),e.jsx("h2",{className:"text-xl font-normal text-gray-900",children:"   "})]}),e.jsxs("span",{className:"text-xs text-gray-500",children:[a.period.days," "]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(qa,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-xs text-gray-600",children:" "})]}),e.jsx("span",{className:"text-2xl font-bold text-blue-700",children:a.daily.reduce((g,y)=>g+y.projects_count,0)})]}),e.jsxs("div",{className:"bg-green-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Qe,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-xs text-gray-600",children:" "})]}),e.jsxs("span",{className:"text-2xl font-bold text-green-700",children:[Math.round(a.daily.reduce((g,y)=>g+y.projects_sum,0)).toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Qe,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-xs text-gray-600",children:" "})]}),e.jsxs("span",{className:"text-2xl font-bold text-purple-700",children:[Math.round(a.daily.reduce((g,y)=>g+y.payments_sum,0)).toLocaleString("ru-RU")," "]})]})]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:a.daily.slice().reverse().map((g,y)=>{const w=Math.max(...a.daily.map(_=>_.projects_sum)),N=Math.max(...a.daily.map(_=>_.payments_sum)),k=w>0?g.projects_sum/w*100:0,S=N>0?g.payments_sum/N*100:0;return e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs text-gray-600 font-medium",children:new Date(g.date).toLocaleDateString("ru-RU",{day:"numeric",month:"short"})}),e.jsx("div",{className:"flex items-center gap-4 text-xs",children:g.projects_count>0&&e.jsxs("span",{className:"text-blue-600",children:[e.jsx(qa,{className:"w-3 h-3 inline mr-1"}),g.projects_count]})})]}),e.jsxs("div",{className:"space-y-1",children:[g.projects_sum>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-gray-500",children:":"}),e.jsxs("span",{className:"text-xs font-medium text-gray-900",children:[Math.round(g.projects_sum).toLocaleString("ru-RU")," "]})]}),e.jsx("div",{className:"h-1.5 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-400 to-blue-600",style:{width:`${k}%`}})})]}),g.payments_sum>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-gray-500",children:":"}),e.jsxs("span",{className:"text-xs font-medium text-gray-900",children:[Math.round(g.payments_sum).toLocaleString("ru-RU")," "]})]}),e.jsx("div",{className:"h-1.5 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-green-600",style:{width:`${S}%`}})})]})]})]},y)})})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{onClick:()=>s("/finance"),className:"bg-gradient-to-br from-green-50 to-emerald-100 backdrop-blur-xl rounded-2xl p-6 border border-green-200 shadow-lg hover:shadow-xl transition-all cursor-pointer lg:col-span-2",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Qe,{className:"w-6 h-6 text-green-600"}),e.jsx("span",{className:"text-sm text-green-700 font-semibold",children:""})]}),t?e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"  :"}),e.jsxs("span",{className:"text-lg font-bold text-green-700",children:[t.finance.paid.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-yellow-600",children:":"}),e.jsxs("span",{className:"text-sm font-medium text-yellow-700",children:[t.finance.pending.toLocaleString("ru-RU")," "]})]}),t.finance.overdue>0&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-red-600",children:":"}),e.jsxs("span",{className:"text-sm font-medium text-red-700",children:[t.finance.overdue.toLocaleString("ru-RU")," "]})]})]}),e.jsxs("div",{className:"space-y-2",children:[t.finance.total_active_projects_sum!==void 0&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"  :"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[t.finance.total_active_projects_sum.toLocaleString("ru-RU")," "]})]}),t.finance.total_paid_to_executors!==void 0&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-gray-600",children:" :"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[t.finance.total_paid_to_executors.toLocaleString("ru-RU")," "]})]}),t.finance.net_profit!==void 0&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-gray-600",children:" :"}),e.jsxs("span",{className:`text-lg font-bold ${t.finance.net_profit>=0?"text-green-700":"text-red-700"}`,children:[t.finance.net_profit.toLocaleString("ru-RU")," "]})]})]})]}):e.jsx("p",{className:"text-xl font-normal text-gray-900",children:"..."})]}),e.jsxs("div",{onClick:()=>s("/clients"),className:"bg-gradient-to-br from-blue-50 to-sky-100 backdrop-blur-xl rounded-2xl p-6 border border-blue-200 shadow-lg hover:shadow-xl transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(it,{className:"w-6 h-6 text-blue-600"}),e.jsx("span",{className:"text-sm text-blue-700 font-semibold",children:""})]}),t?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-gray-600",children:":"}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:t.clients.active_count})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-blue-600",children:" :"}),e.jsx("span",{className:"text-sm font-medium text-blue-700",children:t.clients.new_leads_week})]}),t.clients.recent.length>0&&e.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:[": ",t.clients.recent[0].name]})]}):e.jsx("p",{className:"text-xl font-normal text-gray-900",children:"..."})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-100 backdrop-blur-xl rounded-2xl p-6 border border-orange-200 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(Ge,{className:"w-6 h-6 text-orange-600"}),e.jsx("span",{className:"text-sm text-orange-700 font-semibold",children:" "})]}),t&&t.alerts.length>0?e.jsxs("div",{className:"space-y-2",children:[t.alerts.slice(0,3).map((g,y)=>e.jsxs("div",{className:"text-xs text-gray-700 flex items-start gap-2",children:[e.jsx("span",{className:`w-2 h-2 rounded-full mt-1 flex-shrink-0 ${g.level==="error"?"bg-red-500":g.level==="warning"?"bg-yellow-500":"bg-blue-500"}`}),e.jsx("span",{className:"line-clamp-2",children:g.message})]},y)),t.alerts.length>3&&e.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["+",t.alerts.length-3," "]})]}):e.jsx("p",{className:"text-sm text-gray-500",children:"   "})]}),e.jsxs("div",{onClick:()=>s("/documents"),className:"bg-gradient-to-br from-purple-50 to-pink-100 backdrop-blur-xl rounded-2xl p-6 border border-purple-200 shadow-lg hover:shadow-xl transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(Ue,{className:"w-6 h-6 text-purple-600"}),e.jsx("span",{className:"text-sm text-purple-700 font-semibold",children:""})]}),t&&t.documents.length>0?e.jsxs("div",{className:"space-y-2",children:[t.documents.slice(0,3).map(g=>e.jsxs("div",{className:"text-xs text-gray-700",children:[e.jsx("div",{className:"font-medium truncate",children:g.filename}),e.jsx("div",{className:"text-gray-500",children:g.project_title?`${g.project_title}`:" "})]},g.id)),t.documents.length>3&&e.jsxs("div",{className:"text-xs text-gray-500",children:["+",t.documents.length-3," "]})]}):e.jsx("p",{className:"text-sm text-gray-500",children:" "})]})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white backdrop-blur-xl rounded-2xl p-6 border border-gray-200 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ds,{className:"w-5 h-5 text-purple-600"}),e.jsx("h2",{className:"text-xl font-normal text-gray-900",children:""})]}),e.jsx("button",{onClick:()=>s("/tasks"),className:"text-sm text-gray-400 hover:text-gray-900 transition-colors font-normal",children:"  "})]}),e.jsx("div",{className:"space-y-3",children:c?e.jsx("div",{className:"text-center py-8 text-gray-400",children:"..."}):t?e.jsxs(e.Fragment,{children:[t.tasks.overdue.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs font-semibold text-red-600 uppercase mb-2",children:[" (",t.tasks.overdue.length,")"]}),t.tasks.overdue.slice(0,2).map(g=>e.jsx(mh,{title:g.title,status:"pending",priority:g.priority,deadline:new Date(g.deadline).toLocaleDateString("ru-RU")},g.id))]}),t.tasks.upcoming.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs font-semibold text-blue-600 uppercase mb-2",children:[" (",t.tasks.upcoming.length,")"]}),t.tasks.upcoming.slice(0,3).map(g=>e.jsx(mh,{title:g.title,status:"in_progress",priority:g.priority,deadline:new Date(g.deadline).toLocaleDateString("ru-RU")},g.id))]}),t.tasks.new.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs font-semibold text-green-600 uppercase mb-2",children:["  (",t.tasks.new.length,")"]}),t.tasks.new.slice(0,1).map(g=>e.jsx(mh,{title:g.title,status:"pending",priority:g.priority,deadline:new Date(g.created_at).toLocaleDateString("ru-RU")},g.id))]}),t.tasks.overdue.length===0&&t.tasks.upcoming.length===0&&t.tasks.new.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-400",children:" "})]}):e.jsx("div",{className:"text-center py-8 text-gray-400",children:" "})})]}),e.jsxs("div",{className:"bg-white backdrop-blur-xl rounded-2xl p-6 border border-gray-200 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Ya,{className:"w-5 h-5 text-purple-600"}),e.jsx("h2",{className:"text-xl font-normal text-gray-900",children:" "})]}),e.jsx("div",{className:"space-y-4",children:c?e.jsx("div",{className:"text-center py-8 text-gray-400",children:"..."}):t&&t.activity.length>0?t.activity.map((g,y)=>{const w=["purple","pink","blue","green"],N=w[y%w.length],k=g.user.charAt(0).toUpperCase();return e.jsx(jq,{user:g.user,action:g.action,item:g.target,time:g.timestamp,avatar:k,color:N},y)}):e.jsx("div",{className:"text-center py-8 text-gray-400",children:" "})})]}),e.jsxs("div",{className:"lg:col-span-2 bg-white backdrop-blur-xl rounded-2xl p-6 border border-gray-200 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(qa,{className:"w-5 h-5 text-purple-600"}),e.jsx("h2",{className:"text-xl font-normal text-gray-900",children:" "})]}),e.jsx("button",{onClick:()=>s("/projects"),className:"text-sm text-gray-400 hover:text-gray-900 transition-colors font-normal",children:"  "})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c?e.jsx("div",{className:"col-span-2 text-center py-8 text-gray-400",children:"..."}):t&&t.projects.length>0?t.projects.map(g=>e.jsx(wq,{title:g.title,client:g.client_name||" ",progress:g.progress,status:g.status,deadline:g.deadline?new Date(g.deadline).toLocaleDateString("ru-RU"):" "},g.id)):e.jsx("div",{className:"col-span-2 text-center py-8 text-gray-400",children:" "})})]}),e.jsxs("div",{className:"bg-white backdrop-blur-xl rounded-2xl p-6 border border-gray-200 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Ga,{className:"w-5 h-5 text-purple-600"}),e.jsx("h2",{className:"text-xl font-normal text-gray-900",children:" "})]}),e.jsx("div",{className:"space-y-3",children:c?e.jsx("div",{className:"text-center py-8 text-gray-400",children:"..."}):t&&t.quick_actions.length>0?t.quick_actions.map((g,y)=>{const w=["purple","pink","blue","green"],N=w[y%w.length],S={tasks:e.jsx(Ds,{className:"w-5 h-5"}),projects:e.jsx(qa,{className:"w-5 h-5"}),clients:e.jsx(it,{className:"w-5 h-5"}),documents:e.jsx(Ue,{className:"w-5 h-5"})}[g.icon]||e.jsx(Ga,{className:"w-5 h-5"});return e.jsx(Ly,{icon:S,text:g.label,onClick:()=>s(g.link),color:N},y)}):e.jsxs(e.Fragment,{children:[e.jsx(Ly,{icon:e.jsx(Ds,{className:"w-5 h-5"}),text:" ",onClick:()=>s("/tasks"),color:"purple"}),e.jsx(Ly,{icon:e.jsx(qa,{className:"w-5 h-5"}),text:" ",onClick:()=>s("/projects"),color:"pink"})]})})]})]}),t&&t.user.role==="owner"&&t.charts&&e.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white backdrop-blur-xl rounded-2xl p-6 border border-gray-200 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Ya,{className:"w-5 h-5 text-purple-600"}),e.jsx("h2",{className:"text-xl font-normal text-gray-900",children:" "})]}),e.jsx("div",{className:"space-y-4",children:Object.entries(t.charts.tasks_by_status).map(([g,y],w)=>{const N=["purple","green","red","blue"],k=N[w%N.length],_={pending:"",in_progress:" ",completed:"",overdue:""}[g]||g;return e.jsx(vk,{label:_,value:y,max:i.tasks.total,color:k},g)})})]}),e.jsxs("div",{className:"bg-white backdrop-blur-xl rounded-2xl p-6 border border-gray-200 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(xt,{className:"w-5 h-5 text-purple-600"}),e.jsx("h2",{className:"text-xl font-normal text-gray-900",children:" "})]}),e.jsx("div",{className:"space-y-4",children:Object.entries(t.charts.projects_distribution).map(([g,y],w)=>{const N=["blue","green","red","purple"],k=N[w%N.length],_={in_progress:" ",completed:"",on_hold:" ",planning:""}[g]||g;return e.jsx(vk,{label:_,value:y,max:i.projects.total,color:k},g)})})]})]})]})};class Nq{width;height;ctx;x;y;color;speed;size;sizeStep;minSize;maxSizeInteger;maxSize;delay;counter;counterStep;isIdle;isReverse;isShimmer;constructor(t,r,a,n,i,o,c){this.width=t.width,this.height=t.height,this.ctx=r,this.x=a,this.y=n,this.color=i,this.speed=this.getRandomValue(.1,.9)*o,this.size=0,this.sizeStep=Math.random()*.4,this.minSize=.5,this.maxSizeInteger=2,this.maxSize=this.getRandomValue(this.minSize,this.maxSizeInteger),this.delay=c,this.counter=0,this.counterStep=Math.random()*4+(this.width+this.height)*.01,this.isIdle=!1,this.isReverse=!1,this.isShimmer=!1}getRandomValue(t,r){return Math.random()*(r-t)+t}draw(){const t=this.maxSizeInteger*.5-this.size*.5;this.ctx.fillStyle=this.color,this.ctx.fillRect(this.x+t,this.y+t,this.size,this.size)}appear(){if(this.isIdle=!1,this.counter<=this.delay){this.counter+=this.counterStep;return}this.size>=this.maxSize&&(this.isShimmer=!0),this.isShimmer?this.shimmer():this.size+=this.sizeStep,this.draw()}disappear(){if(this.isShimmer=!1,this.counter=0,this.size<=0){this.isIdle=!0;return}else this.size-=.1;this.draw()}shimmer(){this.size>=this.maxSize?this.isReverse=!0:this.size<=this.minSize&&(this.isReverse=!1),this.isReverse?this.size-=this.speed:this.size+=this.speed}}function _q(s,t){return s<=0||t?0:s>=100?100*.001:s*.001}const Nk={default:{activeColor:null,gap:5,speed:35,colors:"#f8fafc,#f1f5f9,#cbd5e1",noFocus:!1},blue:{activeColor:"#e0f2fe",gap:10,speed:25,colors:"#e0f2fe,#7dd3fc,#0ea5e9",noFocus:!1},yellow:{activeColor:"#fef08a",gap:3,speed:20,colors:"#fef08a,#fde047,#eab308",noFocus:!1},pink:{activeColor:"#fecdd3",gap:6,speed:80,colors:"#fecdd3,#fda4af,#e11d48",noFocus:!0},green:{activeColor:"#bbf7d0",gap:6,speed:30,colors:"#bbf7d0,#86efac,#22c55e",noFocus:!1},purple:{activeColor:"#e9d5ff",gap:5,speed:40,colors:"#e9d5ff,#d8b4fe,#a855f7",noFocus:!1}};function kq({variant:s="default",gap:t,speed:r,colors:a,noFocus:n,className:i="",children:o}){const c=j.useRef(null),u=j.useRef(null),h=j.useRef([]),m=j.useRef(null),f=j.useRef(performance.now()),p=j.useRef(window.matchMedia("(prefers-reduced-motion: reduce)").matches).current,v=Nk[s]||Nk.default,g=t??v.gap,y=r??v.speed,w=a??v.colors,N=n??v.noFocus,k=()=>{if(!c.current||!u.current)return;const C=c.current.getBoundingClientRect(),A=Math.floor(C.width),X=Math.floor(C.height),I=u.current.getContext("2d");u.current.width=A,u.current.height=X,u.current.style.width=`${A}px`,u.current.style.height=`${X}px`;const V=w.split(","),R=[];for(let H=0;H<A;H+=parseInt(g.toString(),10))for(let ee=0;ee<X;ee+=parseInt(g.toString(),10)){const se=V[Math.floor(Math.random()*V.length)],W=H-A/2,te=ee-X/2,J=Math.sqrt(W*W+te*te),K=p?0:J;if(!I)return;R.push(new Nq(u.current,I,H,ee,se,_q(y,p),K))}h.current=R},S=C=>{m.current=requestAnimationFrame(()=>S(C));const A=performance.now(),X=A-f.current,I=1e3/60;if(X<I)return;f.current=A-X%I;const V=u.current?.getContext("2d");if(!V||!u.current)return;V.clearRect(0,0,u.current.width,u.current.height);let R=!0;for(let H=0;H<h.current.length;H++){const ee=h.current[H];ee[C](),ee.isIdle||(R=!1)}R&&m.current!==null&&cancelAnimationFrame(m.current)},_=C=>{m.current!==null&&cancelAnimationFrame(m.current),m.current=requestAnimationFrame(()=>S(C))},T=()=>_("appear"),E=()=>_("disappear"),z=C=>{C.currentTarget.contains(C.relatedTarget)||_("appear")},O=C=>{C.currentTarget.contains(C.relatedTarget)||_("disappear")};return j.useEffect(()=>{k();const C=new ResizeObserver(()=>{k()});return c.current&&C.observe(c.current),()=>{C.disconnect(),m.current!==null&&cancelAnimationFrame(m.current)}},[g,y,w,N]),e.jsxs("div",{ref:c,className:`pixel-card ${i}`,onMouseEnter:T,onMouseLeave:E,onFocus:N?void 0:z,onBlur:N?void 0:O,tabIndex:N?-1:0,children:[e.jsx("canvas",{className:"pixel-canvas",ref:u}),o]})}const Sq=s=>({new:"from-blue-400 to-blue-600",review:"from-orange-400 to-orange-600",accepted:"from-purple-400 to-purple-600",in_progress:"from-yellow-400 to-yellow-600",testing:"from-green-400 to-green-600",completed:"from-green-500 to-green-700",cancelled:"from-red-400 to-red-600",on_hold:"from-gray-400 to-gray-600"})[s]||"from-gray-400 to-gray-600",Cq=s=>({new:" ",review:" ",accepted:" ",in_progress:"  ",testing:" ",completed:" ",cancelled:" ",on_hold:" "})[s]||s,Tq=s=>({new:10,review:25,accepted:40,in_progress:60,testing:80,completed:100,cancelled:0,on_hold:0})[s]||0,_k=s=>s.split(" ").map(t=>t[0]).join("").toUpperCase().slice(0,2),Eq=s=>({new:"blue",review:"yellow",accepted:"purple",in_progress:"yellow",testing:"green",completed:"green",cancelled:"pink",on_hold:"default"})[s]||"default",Aq=({project:s,onView:t,onEdit:r,onDelete:a,onArchive:n,onContact:i,onAddPayment:o,onComplete:c,onViewFiles:u,onAssignExecutor:h,onExecutorPayment:m})=>{const f=Tq(s.status),p=Sq(s.status),v=Cq(s.status),g=Eq(s.status);return e.jsxs(kq,{variant:g,className:"bg-white rounded-2xl shadow-lg border-l-4 overflow-hidden hover:shadow-2xl transition-all duration-300 hover:-translate-y-1",style:{borderLeftColor:s.status==="new"?"#2196F3":s.status==="review"?"#FF9800":s.status==="accepted"?"#9C27B0":s.status==="in_progress"?"#FFC107":s.status==="testing"?"#4CAF50":s.status==="completed"?"#66BB6A":s.status==="cancelled"?"#f44336":"#9E9E9E"},children:[e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-5 py-4 flex items-center justify-between border-b border-gray-200",children:[e.jsx("div",{className:`px-4 py-2 rounded-xl bg-gradient-to-r ${p} text-white text-sm font-semibold shadow-md`,children:v}),e.jsxs("div",{className:"bg-gray-700 text-white px-3 py-1 rounded-lg text-xs font-bold",children:["#",s.id]})]}),e.jsxs("div",{className:"px-5 py-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1 line-clamp-2",children:s.title}),e.jsx("span",{className:"inline-block px-3 py-1 bg-gray-100 text-gray-700 rounded-lg text-xs font-semibold",children:s.project_type||" "})]}),e.jsxs("div",{className:"px-5 py-3 bg-gray-50 border-y border-gray-200 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-400 to-pink-600 flex items-center justify-center text-white font-bold text-sm shadow-md",children:_k(s.user?.first_name||"U")}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-semibold text-gray-900 text-sm truncate",children:s.user?.first_name||""}),e.jsxs("div",{className:"text-xs text-gray-500 truncate",children:["@",s.user?.username||""]})]})]}),s.assigned_to?e.jsxs("div",{className:"px-5 py-3 bg-amber-50 border-b border-amber-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-orange-400 to-red-600 flex items-center justify-center text-white font-bold text-xs shadow-md",children:_k(s.assigned_to.username||"E")}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs text-amber-700 font-semibold uppercase",children:""}),e.jsx("div",{className:"font-semibold text-gray-900 text-sm truncate",children:s.assigned_to.username})]})]}),s.executor_cost&&e.jsxs("div",{className:"mt-3 p-2 bg-white rounded-lg border border-amber-300",children:[e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:"text-amber-700 font-medium",children:":"}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-orange-600 font-bold",children:[s.executor_paid_total?.toLocaleString()||0,""]}),e.jsxs("span",{className:"text-gray-500",children:[" / ",s.executor_cost?.toLocaleString()||0,""]})]})]}),s.executor_cost&&s.executor_paid_total&&s.executor_cost>s.executor_paid_total&&e.jsxs("div",{className:"text-xs text-amber-700 mt-1",children:[": ",e.jsxs("strong",{children:[(s.executor_cost-s.executor_paid_total).toLocaleString(),""]})]})]}),m&&e.jsxs("button",{onClick:()=>m(s.id),className:"w-full mt-3 px-3 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg transition-all text-xs font-semibold flex items-center justify-center gap-2",children:[e.jsx(zL,{className:"w-3 h-3"})," "]})]}):e.jsx("div",{className:"px-5 py-3 border-b border-gray-200",children:e.jsxs("button",{onClick:()=>h?.(s.id),className:"w-full px-3 py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-purple-500 hover:text-purple-600 transition-all text-sm font-semibold flex items-center justify-center gap-2",children:[e.jsx(fN,{className:"w-4 h-4"})," "]})}),e.jsxs("div",{className:"px-5 py-4 grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:""}),e.jsx("div",{className:"text-sm font-bold text-gray-900",children:s.complexity==="simple"?" ":s.complexity==="medium"?" ":s.complexity==="complex"?" ":s.complexity==="premium"?" ":s.complexity})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:""}),e.jsxs("div",{className:"text-lg font-bold text-purple-600",children:[s.estimated_cost?.toLocaleString()||0,""]})]})]}),e.jsxs("div",{className:"px-5 py-3 bg-gray-50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-600 uppercase",children:""}),e.jsxs("span",{className:"text-xs font-bold text-purple-600",children:[f,"%"]})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full bg-gradient-to-r ${p} transition-all duration-500 rounded-full`,style:{width:`${f}%`}})})]}),e.jsxs("div",{className:"px-5 py-3 bg-yellow-50 border-t border-yellow-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-xs font-semibold text-yellow-700 uppercase",children:""}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"font-bold text-green-600",children:[s.client_paid_total?.toLocaleString()||0,""]}),e.jsxs("span",{className:"text-gray-500",children:[" / ",s.estimated_cost?.toLocaleString()||0,""]})]})]}),s.payments&&s.payments.length>0&&e.jsx("div",{className:"space-y-1 mb-2",children:s.payments.slice(-3).map((y,w)=>e.jsxs("div",{className:"flex justify-between text-xs bg-white p-2 rounded border border-yellow-300",children:[e.jsx("span",{className:"text-gray-600",children:y.payment_type||""}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-green-600 font-bold",children:["+",y.amount?.toLocaleString(),""]}),e.jsx("span",{className:"text-gray-400 ml-2",children:y.payment_date?.slice(0,10)})]})]},w))}),e.jsxs("button",{onClick:()=>o(s.id),className:"w-full px-3 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg transition-all text-xs font-semibold flex items-center justify-center gap-2",children:[e.jsx(Qe,{className:"w-3 h-3"})," "]})]}),s.deadline&&e.jsxs("div",{className:"px-5 py-2 bg-orange-50 border-t border-orange-200 flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-orange-700",children:" :"}),e.jsx("span",{className:"text-xs font-bold text-orange-900",children:s.deadline.slice(0,10)})]}),e.jsxs("div",{className:"px-5 py-4 bg-gray-50 border-t border-gray-200 flex gap-2 flex-wrap",children:[e.jsxs("button",{onClick:()=>t(s.id),className:"flex-1 min-w-[80px] px-3 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-all text-xs font-semibold flex items-center justify-center gap-1",children:[e.jsx(Vt,{className:"w-3 h-3"}),""]}),e.jsxs("button",{onClick:()=>r(s.id),className:"flex-1 min-w-[80px] px-3 py-2 bg-cyan-100 text-cyan-700 rounded-lg hover:bg-cyan-200 transition-all text-xs font-semibold flex items-center justify-center gap-1",children:[e.jsx(An,{className:"w-3 h-3"}),""]}),(s.status==="testing"||s.status==="in_progress")&&c&&e.jsxs("button",{onClick:()=>c(s.id),className:"flex-1 min-w-[80px] px-3 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-all text-xs font-semibold flex items-center justify-center gap-1",children:[e.jsx(ut,{className:"w-3 h-3"}),""]}),s.chat&&e.jsxs("button",{className:"flex-1 min-w-[80px] px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-all text-xs font-semibold flex items-center justify-center gap-1",children:[e.jsx(Xa,{className:"w-3 h-3"}),""]}),s.user?.telegram_id&&e.jsxs("button",{onClick:()=>i(s.user.telegram_id),className:"flex-1 min-w-[80px] px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-all text-xs font-semibold flex items-center justify-center gap-1",children:[e.jsx(Xa,{className:"w-3 h-3"}),""]}),u&&e.jsxs("button",{onClick:()=>u(s.id),className:"flex-1 min-w-[80px] px-3 py-2 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition-all text-xs font-semibold flex items-center justify-center gap-1",children:[e.jsx(Mr,{className:"w-3 h-3"}),""]}),e.jsxs("button",{onClick:()=>n(s.id),className:"flex-1 min-w-[80px] px-3 py-2 bg-amber-100 text-amber-700 rounded-lg hover:bg-amber-200 transition-all text-xs font-semibold flex items-center justify-center gap-1",children:[e.jsx(Cl,{className:"w-3 h-3"}),s.is_archived?"":""]}),e.jsxs("button",{onClick:()=>a(s.id),className:"flex-1 min-w-[80px] px-3 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-all text-xs font-semibold flex items-center justify-center gap-1",children:[e.jsx(tt,{className:"w-3 h-3"}),""]})]}),e.jsxs("div",{className:"px-5 py-2 bg-gray-100 border-t border-gray-200 flex items-center gap-2 text-xs text-gray-500",children:[e.jsx("span",{children:" :"}),e.jsx("span",{className:"font-medium",children:s.created_at?.slice(0,10)})]})]})},Dq=({isOpen:s,onClose:t,onSuccess:r})=>{const[a,n]=j.useState(""),[i,o]=j.useState("website"),[c,u]=j.useState(""),[h,m]=j.useState(""),[f,p]=j.useState("medium"),[v,g]=j.useState("medium"),[y,w]=j.useState(""),[N,k]=j.useState(""),[S,_]=j.useState(""),[T,E]=j.useState(""),[z,O]=j.useState(""),[C,A]=j.useState(""),[X,I]=j.useState(""),[V,R]=j.useState(""),[H,ee]=j.useState(!1),[se,W]=j.useState(""),[te,J]=j.useState(""),[K,$]=j.useState(""),[ie,ne]=j.useState(""),[oe,ce]=j.useState([]),[U,F]=j.useState([]),[Z,q]=j.useState(!1),[Q,le]=j.useState(!1),me=j.useRef(null);j.useEffect(()=>{s&&G()},[s]),j.useEffect(()=>{if(s){const B=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${B}px`,document.body.style.width="100%",document.body.style.overflow="hidden",me.current&&(me.current.scrollTop=0)}else{const B=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(B||"0")*-1)}return()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow=""}},[s]);const G=async()=>{try{q(!0);const[B,ae]=await Promise.all([vs.getClients(),vs.getExecutors()]);ce(B.clients||[]),F(ae.executors||[])}catch(B){console.error("Error loading data:",B)}finally{q(!1)}},ue=B=>{m(B),ee(B==="new")},Y=()=>{n(""),o("website"),u(""),m(""),p("medium"),g("medium"),w(""),k(""),_(""),E(""),O(""),A(""),I(""),R(""),ee(!1),W(""),J(""),$(""),ne("")},L=async B=>{if(B.preventDefault(),!a||!h&&!H){alert(",    ");return}try{le(!0);const ae={title:a,project_type:i,description:c,complexity:f,priority:v,estimated_cost:y?Number(y):0,executor_cost:N?Number(N):0,estimated_hours:S?Number(S):0,prepayment_amount:T?Number(T):0,assigned_executor_id:z?Number(z):null,deadline:C||null,technical_requirements:X,additional_requirements:V};H?(ae.client_name=se,ae.client_phone=te,ae.client_telegram_id=ie||null):ae.user_id=Number(h),await vs.createProject(ae),alert("  !"),Y(),r(),window.dispatchEvent(new Event("dashboardUpdate")),t()}catch(ae){console.error("Error creating project:",ae),alert("   ")}finally{le(!1)}},M=()=>{Y(),t()};return s?e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        .modal-content-scrollable {
          scrollbar-width: none !important;
          -ms-overflow-style: none !important;
        }
        .modal-content-scrollable::-webkit-scrollbar {
          display: none !important;
          width: 0 !important;
          height: 0 !important;
        }
      `}),e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-2",style:{overflow:"hidden"},children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[95vh] flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 py-3 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"  "}),e.jsx("p",{className:"text-purple-100 text-xs mt-0.5",children:"   "})]}),e.jsx("button",{onClick:M,className:"p-1.5 hover:bg-white/20 rounded-full transition-all flex-shrink-0",disabled:Q,type:"button",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:L,className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("div",{ref:me,className:"modal-content-scrollable px-4 py-3 overflow-y-auto flex-1",children:Z?e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"text-gray-600",children:"..."})}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1.5",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a,onChange:B=>n(B.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",placeholder:":   ",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1.5",children:" "}),e.jsxs("select",{value:i,onChange:B=>o(B.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"website",children:"-"}),e.jsx("option",{value:"bot",children:"Telegram-"}),e.jsx("option",{value:"telegram_mini_app",children:"Telegram Mini App"}),e.jsx("option",{value:"app",children:" "}),e.jsx("option",{value:"other",children:""})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:c,onChange:B=>u(B.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500",rows:3,placeholder:",    ...",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:h,onChange:B=>ue(B.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500",required:!H,children:[e.jsx("option",{value:"",children:" ..."}),e.jsx("option",{value:"new",children:"+   "}),oe.map(B=>e.jsxs("option",{value:B.id,children:[B.first_name," ",B.username?`(@${B.username})`:""]},B.id))]})]}),H&&e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border-2 border-blue-200 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(lt,{className:"w-5 h-5 text-blue-600"}),e.jsx("h4",{className:"font-semibold text-blue-900",children:"  "})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:se,onChange:B=>W(B.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:" ",required:H})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"text",value:te,onChange:B=>J(B.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"+7 900 000 00 00"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Telegram Username ( )"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 font-semibold",children:"@"}),e.jsx("input",{type:"text",value:K,onChange:B=>$(B.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"username"})]}),e.jsx("small",{className:"text-gray-500 mt-1 block",children:"    /start"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Telegram ID  ()"}),e.jsx("input",{type:"text",value:ie,onChange:B=>ne(B.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"123456789"}),e.jsx("small",{className:"text-gray-500 mt-1 block",children:"  username "})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:f,onChange:B=>p(B.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"simple",children:" "}),e.jsx("option",{value:"medium",children:" "}),e.jsx("option",{value:"complex",children:" "}),e.jsx("option",{value:"premium",children:" "})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:v,onChange:B=>g(B.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"medium",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"urgent",children:""})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" ()"}),e.jsx("input",{type:"number",value:y,onChange:B=>w(B.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500",min:"0",step:"1000",placeholder:"50000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"   ()"}),e.jsx("input",{type:"number",value:N,onChange:B=>k(B.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500",min:"0",step:"500",placeholder:"30000"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" ()"}),e.jsx("input",{type:"number",value:S,onChange:B=>_(B.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500",min:"1",step:"1",placeholder:"40"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" ()"}),e.jsx("input",{type:"number",value:T,onChange:B=>E(B.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500",min:"0",step:"1000",placeholder:"0"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsxs("select",{value:z,onChange:B=>O(B.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"",children:" "}),U.map(B=>e.jsx("option",{value:B.id,children:B.username},B.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"date",value:C,onChange:B=>A(B.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("textarea",{value:X,onChange:B=>I(B.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500",rows:3,placeholder:"  ..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("textarea",{value:V,onChange:B=>R(B.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500",rows:2,placeholder:"   ..."})]})]})}),e.jsxs("div",{className:"flex gap-2 px-4 py-2.5 border-t border-gray-200 bg-white flex-shrink-0",children:[e.jsx("button",{type:"button",onClick:M,className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-semibold hover:bg-gray-200 transition-all text-sm",disabled:Q,children:""}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg font-semibold hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm",disabled:Q,children:Q?e.jsx(e.Fragment,{children:"..."}):e.jsxs(e.Fragment,{children:[e.jsx(We,{className:"w-4 h-4"}),""]})})]})]})]})})]}):null},Rq=({projectId:s,isOpen:t,onClose:r,onSuccess:a})=>{const[n,i]=j.useState(""),[o,c]=j.useState("website"),[u,h]=j.useState(""),[m,f]=j.useState("new"),[p,v]=j.useState("medium"),[g,y]=j.useState("medium"),[w,N]=j.useState(""),[k,S]=j.useState(""),[_,T]=j.useState(""),[E,z]=j.useState(""),[O,C]=j.useState(""),[A,X]=j.useState(""),[I,V]=j.useState(""),[R,H]=j.useState(""),[ee,se]=j.useState(""),[W,te]=j.useState(""),[J,K]=j.useState([]),[$,ie]=j.useState(!1),[ne,oe]=j.useState(!1),ce=j.useRef(null);j.useEffect(()=>{t&&s&&U()},[t,s]),j.useEffect(()=>(t?(document.body.style.overflow="hidden",ce.current&&(ce.current.scrollTop=0)):document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]);const U=async()=>{if(s)try{ie(!0);const[Q,le]=await Promise.all([vs.getProject(s),vs.getExecutors()]),me=Q.project;i(me.title||""),c(me.project_type||"website"),h(me.description||""),f(me.status||"new"),v(me.complexity||"medium"),y(me.priority||"medium"),N(me.estimated_cost?.toString()||""),S(me.executor_cost?.toString()||""),T(me.final_cost?.toString()||""),z(me.estimated_hours?.toString()||""),C(me.prepayment_amount?.toString()||""),X(me.client_paid_total?.toString()||""),V(me.executor_paid_total?.toString()||""),H(me.assigned_executor_id?.toString()||""),se(me.deadline?me.deadline.slice(0,16):""),te(me.project_metadata?.test_link||""),K(le.executors||[])}catch(Q){console.error("Error loading project data:",Q),r()}finally{ie(!1)}},F=()=>{i(""),c("website"),h(""),f("new"),v("medium"),y("medium"),N(""),S(""),T(""),z(""),C(""),X(""),V(""),H(""),se(""),te("")},Z=async Q=>{if(Q.preventDefault(),!(!n||!s))try{oe(!0);const le={title:n,project_type:o,description:u,status:m,complexity:p,priority:g,estimated_cost:w?Number(w):0,executor_cost:k?Number(k):0,final_cost:_?Number(_):0,estimated_hours:E?Number(E):0,prepayment_amount:O?Number(O):0,client_paid_total:A?Number(A):0,executor_paid_total:I?Number(I):0,assigned_executor_id:R?Number(R):null,deadline:ee||null,project_metadata:{test_link:W||null}};await vs.updateProject(s,le),F(),a(),r()}catch(le){console.error("Error updating project:",le)}finally{oe(!1)}},q=()=>{F(),r()};return t?e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        .modal-content-scrollable {
          scrollbar-width: none !important;
          -ms-overflow-style: none !important;
        }
        .modal-content-scrollable::-webkit-scrollbar {
          display: none !important;
          width: 0 !important;
          height: 0 !important;
        }
      `}),e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-2",style:{overflow:"hidden"},children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[95vh] flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-cyan-600 to-blue-600 text-white px-4 py-3 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold",children:["  #",s]}),e.jsx("p",{className:"text-cyan-100 text-xs mt-0.5",children:"   "})]}),e.jsx("button",{onClick:q,className:"p-1.5 hover:bg-white/20 rounded-full transition-all flex-shrink-0",disabled:ne,type:"button",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:Z,className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("div",{ref:ce,className:"modal-content-scrollable px-4 py-3 overflow-y-auto flex-1",children:$?e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"text-gray-600",children:"..."})}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:n,onChange:Q=>i(Q.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsxs("select",{value:o,onChange:Q=>c(Q.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[e.jsx("option",{value:"website",children:"-"}),e.jsx("option",{value:"bot",children:"Telegram-"}),e.jsx("option",{value:"app",children:" "}),e.jsx("option",{value:"other",children:""})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("textarea",{value:u,onChange:Q=>h(Q.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:m,onChange:Q=>f(Q.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[e.jsx("option",{value:"new",children:" "}),e.jsx("option",{value:"review",children:"  "}),e.jsx("option",{value:"accepted",children:" "}),e.jsx("option",{value:"in_progress",children:"  "}),e.jsx("option",{value:"testing",children:" "}),e.jsx("option",{value:"completed",children:" "}),e.jsx("option",{value:"cancelled",children:" "})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:p,onChange:Q=>v(Q.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[e.jsx("option",{value:"simple",children:" "}),e.jsx("option",{value:"medium",children:" "}),e.jsx("option",{value:"complex",children:" "}),e.jsx("option",{value:"premium",children:" "})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:g,onChange:Q=>y(Q.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"normal",children:""}),e.jsx("option",{value:"medium",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"urgent",children:""})]})]})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-xl border-2 border-orange-200",children:[e.jsx("h4",{className:"font-semibold text-orange-900 mb-3",children:" "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  ()"}),e.jsx("input",{type:"number",value:w,onChange:Q=>N(Q.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500",min:"0",step:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"   ()"}),e.jsx("input",{type:"number",value:k,onChange:Q=>S(Q.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500",min:"0",step:"100"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" ()"}),e.jsx("input",{type:"number",value:O,onChange:Q=>C(Q.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500",min:"0",step:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  ()"}),e.jsx("input",{type:"number",value:A,onChange:Q=>X(Q.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500",min:"0",step:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  ()"}),e.jsx("input",{type:"number",value:I,onChange:Q=>V(Q.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500",min:"0",step:"100"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  ()"}),e.jsx("input",{type:"number",value:_,onChange:Q=>T(Q.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500",min:"0",step:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  ()"}),e.jsx("input",{type:"number",value:E,onChange:Q=>z(Q.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500",min:"1"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsxs("select",{value:R,onChange:Q=>H(Q.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[e.jsx("option",{value:"",children:" "}),J.map(Q=>e.jsx("option",{value:Q.id,children:Q.username},Q.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"datetime-local",value:ee,onChange:Q=>se(Q.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["    "," ",e.jsx("small",{className:"text-gray-500",children:"()"})]}),e.jsx("input",{type:"text",value:W,onChange:Q=>te(Q.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"https://t.me/your_bot  @your_bot"}),e.jsx("small",{className:"text-gray-500 mt-1 block",children:"   username  (: https://t.me/test_bot  @test_bot)"})]})]})}),e.jsxs("div",{className:"flex gap-2 px-4 py-2.5 border-t border-gray-200 bg-white flex-shrink-0",children:[e.jsx("button",{type:"button",onClick:q,className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-semibold hover:bg-gray-200 transition-all text-sm",disabled:ne,children:""}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-gradient-to-r from-cyan-600 to-blue-600 text-white rounded-lg font-semibold hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm",disabled:ne,children:ne?e.jsx(e.Fragment,{children:"..."}):e.jsxs(e.Fragment,{children:[e.jsx(Aa,{className:"w-4 h-4"}),""]})})]})]})]})})]}):null},Mq=s=>({new:" ",review:" ",accepted:" ",in_progress:"  ",testing:" ",completed:" ",cancelled:" ",on_hold:" "})[s]||s,Oq=s=>({new:"from-blue-400 to-blue-600",review:"from-orange-400 to-orange-600",accepted:"from-purple-400 to-purple-600",in_progress:"from-yellow-400 to-yellow-600",testing:"from-green-400 to-green-600",completed:"from-green-500 to-green-700",cancelled:"from-red-400 to-red-600",on_hold:"from-gray-400 to-gray-600"})[s]||"from-gray-400 to-gray-600",Lq=s=>({new:10,review:25,accepted:40,in_progress:60,testing:80,completed:100,cancelled:0,on_hold:0})[s]||0,Pq=s=>({simple:" ",medium:" ",complex:" ",premium:" "})[s]||s,Bq=s=>({low:" ",medium:" ",high:" ",urgent:" "})[s]||s,kk=s=>s.split(" ").map(t=>t[0]).join("").toUpperCase().slice(0,2),zc=async(s,t)=>{try{await navigator.clipboard.writeText(s),alert(`${t}    `)}catch{alert(" ")}},Fq=({isOpen:s,onClose:t,onEdit:r,onContact:a,project:n})=>{const[i,o]=j.useState(!1),c=j.useRef(null);if(j.useEffect(()=>{if(s){const p=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${p}px`,document.body.style.width="100%",document.body.style.overflow="hidden",c.current&&(c.current.scrollTop=0)}else{const p=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(p||"0")*-1)}return()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow=""}},[s]),!s||!n)return null;const u=Lq(n.status),h=Oq(n.status),m=Mq(n.status),f=()=>{const p=[];return n.description&&p.push(n.description),n.technical_requirements&&p.push(`** :**
`+n.technical_requirements),n.additional_requirements&&p.push(`** :**
`+n.additional_requirements),p.join(`

`)||" "};return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        .modal-content-scrollable {
          scrollbar-width: none !important;
          -ms-overflow-style: none !important;
        }
        .modal-content-scrollable::-webkit-scrollbar {
          display: none !important;
          width: 0 !important;
          height: 0 !important;
        }
      `}),e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-2",style:{overflow:"hidden"},children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-5xl w-full max-h-[95vh] flex flex-col overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 py-3 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:n.title}),e.jsxs("p",{className:"text-purple-100 text-xs mt-0.5",children:[" #",n.id,"  ",m]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-1.5 transition-colors flex-shrink-0",children:e.jsx(De,{className:"w-5 h-5"})})]})}),e.jsx("div",{ref:c,className:"modal-content-scrollable px-4 py-3 overflow-y-auto flex-1",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-3",children:[e.jsxs("div",{className:"bg-white border-l-4 border-blue-500 rounded-lg shadow-md overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 flex items-center justify-between border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"w-5 h-5 text-blue-600"}),e.jsx("strong",{className:"text-gray-800",children:" "})]}),e.jsx("button",{type:"button",onClick:()=>o(!i),className:"text-blue-600 hover:text-blue-700 flex items-center gap-1 text-sm font-semibold",children:i?e.jsxs(e.Fragment,{children:[e.jsx(jp,{className:"w-4 h-4"}),""]}):e.jsxs(e.Fragment,{children:[e.jsx(Ci,{className:"w-4 h-4"}),""]})})]}),e.jsx("div",{className:`px-4 py-3 bg-white transition-all duration-300 ${i?"max-h-none":"max-h-[200px] overflow-hidden"}`,children:e.jsx("div",{className:"prose prose-sm max-w-none text-gray-700 whitespace-pre-wrap",children:f()})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ut,{className:"w-4 h-4 text-gray-500"}),e.jsx("div",{className:"text-xs text-gray-500 font-semibold uppercase",children:""})]}),e.jsx("div",{className:`px-3 py-1.5 rounded-lg bg-gradient-to-r ${h} text-white text-sm font-bold inline-block`,children:m})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(NB,{className:"w-4 h-4 text-gray-500"}),e.jsx("div",{className:"text-xs text-gray-500 font-semibold uppercase",children:""})]}),e.jsx("div",{className:"text-sm font-bold text-gray-900",children:Pq(n.complexity)})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Vr,{className:"w-4 h-4 text-gray-500"}),e.jsx("div",{className:"text-xs text-gray-500 font-semibold uppercase",children:""})]}),e.jsx("div",{className:"text-sm font-bold text-gray-900",children:Bq(n.priority)})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Qe,{className:"w-4 h-4 text-gray-500"}),e.jsx("div",{className:"text-xs text-gray-500 font-semibold uppercase",children:""})]}),e.jsxs("div",{className:"text-lg font-bold text-purple-600",children:[n.estimated_cost?.toLocaleString()||0,""]})]}),n.final_cost&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Qe,{className:"w-4 h-4 text-gray-500"}),e.jsx("div",{className:"text-xs text-gray-500 font-semibold uppercase",children:" "})]}),e.jsxs("div",{className:"text-lg font-bold text-green-600",children:[n.final_cost.toLocaleString(),""]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(wt,{className:"w-4 h-4 text-gray-500"}),e.jsx("div",{className:"text-xs text-gray-500 font-semibold uppercase",children:" "})]}),e.jsx("div",{className:"text-sm font-bold text-gray-900",children:n.created_at?.slice(0,10)})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ue,{className:"w-4 h-4 text-gray-500"}),e.jsx("div",{className:"text-xs text-gray-500 font-semibold uppercase",children:" "})]}),e.jsx("div",{className:"text-sm font-bold text-gray-900",children:n.project_type||" "})]}),n.deadline&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 border border-orange-200 bg-orange-50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(wt,{className:"w-4 h-4 text-orange-600"}),e.jsx("div",{className:"text-xs text-orange-700 font-semibold uppercase",children:""})]}),e.jsx("div",{className:"text-sm font-bold text-orange-900",children:n.deadline.slice(0,10)})]}),n.estimated_hours&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ve,{className:"w-4 h-4 text-gray-500"}),e.jsx("div",{className:"text-xs text-gray-500 font-semibold uppercase",children:" "})]}),e.jsxs("div",{className:"text-sm font-bold text-gray-900",children:[n.estimated_hours,""]})]}),n.actual_hours&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ve,{className:"w-4 h-4 text-gray-500"}),e.jsx("div",{className:"text-xs text-gray-500 font-semibold uppercase",children:" "})]}),e.jsxs("div",{className:"text-sm font-bold text-gray-900",children:[n.actual_hours,""]})]})]}),n.assigned_to&&e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-lg shadow-md p-5 border border-orange-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(lt,{className:"w-5 h-5 text-orange-600"}),e.jsx("h4",{className:"text-sm font-bold text-gray-800 uppercase",children:""})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-orange-400 to-red-600 flex items-center justify-center text-white font-bold text-sm shadow-md",children:kk(n.assigned_to.username||"E")}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-900",children:n.assigned_to.username}),e.jsxs("div",{className:"text-xs text-gray-600",children:["ID: ",n.assigned_to.id]})]})]}),n.executor_cost&&e.jsxs("div",{className:"mt-3 p-3 bg-white rounded-lg border border-orange-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm text-orange-700 font-semibold",children:" :"}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-orange-600 font-bold",children:[n.executor_paid_total?.toLocaleString()||0,""]}),e.jsxs("span",{className:"text-gray-500",children:[" / ",n.executor_cost?.toLocaleString()||0,""]})]})]}),n.executor_cost>(n.executor_paid_total||0)&&e.jsxs("div",{className:"text-sm text-amber-700",children:[": ",e.jsxs("strong",{children:[(n.executor_cost-(n.executor_paid_total||0)).toLocaleString(),""]})]})]})]}),n.user&&e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg shadow-md p-5 border border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(lt,{className:"w-5 h-5 text-purple-600"}),e.jsx("h4",{className:"text-sm font-bold text-gray-800 uppercase",children:""})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-purple-400 to-pink-600 flex items-center justify-center text-white font-bold text-sm shadow-md",children:kk(n.user.first_name||"U")}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-900",children:n.user.first_name||""}),e.jsxs("div",{className:"text-sm text-gray-600",children:["@",n.user.username||""]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Telegram ID: ",n.user.telegram_id]})]})]}),n.user.telegram_id&&e.jsxs("button",{onClick:()=>a(n.user.telegram_id),className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-all text-sm font-semibold flex items-center gap-2",children:[e.jsx(Xa,{className:"w-4 h-4"}),""]})]})]}),n.project_metadata&&e.jsxs("div",{className:"bg-gray-50 rounded-lg shadow-md p-5 border border-gray-300",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-800 uppercase mb-3",children:" "}),e.jsxs("div",{className:"space-y-2",children:[n.project_metadata.bot_token&&e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 font-semibold",children:"Bot Token"}),e.jsxs("div",{className:"text-sm font-mono text-gray-900",children:[n.project_metadata.bot_token.slice(0,20),"..."]})]}),e.jsx("button",{onClick:()=>zc(n.project_metadata.bot_token,"Bot Token"),className:"text-blue-600 hover:text-blue-700 p-2",children:e.jsx(er,{className:"w-4 h-4"})})]}),n.project_metadata.bot_username&&e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 font-semibold",children:"Bot Username"}),e.jsxs("div",{className:"text-sm font-mono text-gray-900",children:["@",n.project_metadata.bot_username]})]}),e.jsx("button",{onClick:()=>zc(n.project_metadata.bot_username,"Bot Username"),className:"text-blue-600 hover:text-blue-700 p-2",children:e.jsx(er,{className:"w-4 h-4"})})]}),n.project_metadata.telegram_channel_id&&e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 font-semibold",children:"Telegram Channel ID"}),e.jsx("div",{className:"text-sm font-mono text-gray-900",children:n.project_metadata.telegram_channel_id})]}),e.jsx("button",{onClick:()=>zc(n.project_metadata.telegram_channel_id,"Channel ID"),className:"text-blue-600 hover:text-blue-700 p-2",children:e.jsx(er,{className:"w-4 h-4"})})]}),n.project_metadata.timeweb_login&&e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 font-semibold",children:"Timeweb Login"}),e.jsx("div",{className:"text-sm font-mono text-gray-900",children:n.project_metadata.timeweb_login})]}),e.jsx("button",{onClick:()=>zc(n.project_metadata.timeweb_login,"Timeweb Login"),className:"text-blue-600 hover:text-blue-700 p-2",children:e.jsx(er,{className:"w-4 h-4"})})]}),n.project_metadata.timeweb_password&&e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 font-semibold",children:"Timeweb Password"}),e.jsx("div",{className:"text-sm font-mono text-gray-900",children:""})]}),e.jsx("button",{onClick:()=>zc(n.project_metadata.timeweb_password,"Timeweb Password"),className:"text-blue-600 hover:text-blue-700 p-2",children:e.jsx(er,{className:"w-4 h-4"})})]}),n.project_metadata.test_link&&e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-gray-500 font-semibold",children:" "}),e.jsx("a",{href:n.project_metadata.test_link,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline break-all",children:n.project_metadata.test_link})]}),e.jsx("button",{onClick:()=>zc(n.project_metadata.test_link," "),className:"text-blue-600 hover:text-blue-700 p-2",children:e.jsx(er,{className:"w-4 h-4"})})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-5 border border-gray-200",children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-800 uppercase mb-4 flex items-center gap-2",children:[e.jsx(Vr,{className:"w-5 h-5 text-purple-600"})," "]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-600",children:""}),e.jsxs("span",{className:"text-2xl font-bold text-purple-600",children:[u,"%"]})]}),e.jsx("div",{className:"h-4 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full bg-gradient-to-r ${h} transition-all duration-500 rounded-full`,style:{width:`${u}%`}})}),e.jsx("div",{className:`px-4 py-2 rounded-lg bg-gradient-to-r ${h} text-white text-center font-bold text-sm`,children:m})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 rounded-lg shadow-md p-5 border border-yellow-200",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-800 uppercase mb-3",children:""}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:" :"}),e.jsxs("span",{className:"text-lg font-bold text-purple-600",children:[n.estimated_cost?.toLocaleString()||0,""]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:" :"}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:[n.client_paid_total?.toLocaleString()||0,""]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-yellow-300",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"  :"}),e.jsxs("span",{className:"text-lg font-bold text-orange-600",children:[((n.estimated_cost||0)-(n.client_paid_total||0)).toLocaleString(),""]})]})]})]}),n.payments&&n.payments.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-5 border border-gray-200",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-800 uppercase mb-3",children:" "}),e.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:n.payments.map((p,v)=>e.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-3 rounded-lg border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:p.payment_type||""}),e.jsx("div",{className:"text-xs text-gray-500",children:p.payment_date?.slice(0,10)})]}),e.jsxs("div",{className:"text-lg font-bold text-green-600",children:["+",p.amount?.toLocaleString(),""]})]},v))})]})]})]})}),e.jsxs("div",{className:"px-4 py-2.5 bg-gray-50 border-t border-gray-200 flex gap-2 flex-shrink-0",children:[e.jsxs("button",{type:"button",onClick:()=>r(n.id),className:"flex-1 px-4 py-2 bg-gradient-to-r from-cyan-600 to-blue-600 text-white rounded-lg hover:from-cyan-700 hover:to-blue-700 transition-all font-semibold flex items-center justify-center gap-2 text-sm",children:[e.jsx(An,{className:"w-4 h-4"}),""]}),e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold text-sm",children:""})]})]})})]})},zq=s=>{const t=s.toLowerCase();return t.includes("image")||t.includes("jpg")||t.includes("png")||t.includes("gif")?e.jsx(sm,{className:"w-5 h-5 text-blue-600"}):t.includes("pdf")||t.includes("doc")||t.includes("txt")?e.jsx(Ue,{className:"w-5 h-5 text-red-600"}):t.includes("zip")||t.includes("rar")||t.includes("7z")?e.jsx(Cl,{className:"w-5 h-5 text-orange-600"}):e.jsx(Mr,{className:"w-5 h-5 text-gray-600"})},Iq=s=>{if(s===0)return"0 Bytes";const t=1024,r=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(s)/Math.log(t));return Math.round(s/Math.pow(t,a)*100)/100+" "+r[a]},$q=s=>new Date(s).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),Uq=({isOpen:s,onClose:t,projectId:r})=>{const[a,n]=j.useState([]),[i,o]=j.useState(!1),[c,u]=j.useState(!1),h=j.useRef(null),m=j.useRef(null);j.useEffect(()=>{if(s){const w=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${w}px`,document.body.style.width="100%",document.body.style.overflow="hidden",h.current&&(h.current.scrollTop=0),f()}else{const w=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(w||"0")*-1)}return()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow=""}},[s,r]);const f=async()=>{if(r)try{o(!0);const w=await vs.getProjectFiles(r);n(w||[])}catch(w){console.error("Error loading files:",w),alert("   ")}finally{o(!1)}},p=()=>{m.current?.click()},v=async w=>{const N=w.target.files?.[0];if(!(!N||!r))try{u(!0),await vs.uploadProjectFile(r,N),alert("  !"),await f()}catch(k){console.error("Error uploading file:",k),alert("   ")}finally{u(!1),m.current&&(m.current.value="")}},g=async w=>{if(r)try{const N=await vs.downloadProjectFile(r,w.id),k=window.URL.createObjectURL(N),S=document.createElement("a");S.href=k,S.download=w.filename,document.body.appendChild(S),S.click(),document.body.removeChild(S),window.URL.revokeObjectURL(k)}catch(N){console.error("Error downloading file:",N),alert("   ")}},y=async(w,N)=>{if(!(!r||!window.confirm(` ,     "${N}"?`)))try{await vs.deleteProjectFile(r,w),alert("  !"),await f()}catch(S){console.error("Error deleting file:",S),alert("   ")}};return!s||!r?null:e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        .modal-content-scrollable {
          scrollbar-width: none !important;
          -ms-overflow-style: none !important;
        }
        .modal-content-scrollable::-webkit-scrollbar {
          display: none !important;
          width: 0 !important;
          height: 0 !important;
        }
      `}),e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-2",style:{overflow:"hidden"},children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] flex flex-col overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-4 py-3 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsxs("p",{className:"text-indigo-100 text-xs mt-0.5",children:[" #",r]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-1.5 transition-colors flex-shrink-0",children:e.jsx(De,{className:"w-5 h-5"})})]})}),e.jsxs("div",{ref:h,className:"modal-content-scrollable px-4 py-3 overflow-y-auto flex-1",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{ref:m,type:"file",onChange:v,className:"hidden"}),e.jsxs("button",{onClick:p,disabled:c,className:"w-full px-4 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all font-semibold flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(jn,{className:"w-5 h-5"}),c?"...":" "]})]}),i?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:" ..."})]})}):a.length===0?e.jsxs("div",{className:"bg-gray-50 rounded-lg p-12 text-center",children:[e.jsx(Mr,{className:"w-16 h-16 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"  "}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"     "})]}):e.jsx("div",{className:"space-y-2",children:a.map(w=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:border-indigo-300 hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:zq(w.file_type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-semibold text-gray-900 truncate",children:w.filename}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Mr,{className:"w-3 h-3"}),Iq(w.file_size)]}),e.jsx("span",{children:""}),e.jsx("span",{children:$q(w.uploaded_at)})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsxs("button",{onClick:()=>g(w),className:"px-3 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-all text-sm font-semibold flex items-center gap-1",title:"",children:[e.jsx(Tt,{className:"w-4 h-4"}),""]}),e.jsxs("button",{onClick:()=>y(w.id,w.filename),className:"px-3 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-all text-sm font-semibold flex items-center gap-1",title:"",children:[e.jsx(tt,{className:"w-4 h-4"}),""]})]})]})},w.id))})]}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 border-t border-gray-200 flex gap-2 flex-shrink-0",children:e.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold text-sm",children:""})})]})})]})},Sk=[{value:"new",label:" ",color:"bg-blue-100 text-blue-800"},{value:"review",label:"  ",color:"bg-yellow-100 text-yellow-800"},{value:"accepted",label:" ",color:"bg-green-100 text-green-800"},{value:"in_progress",label:"  ",color:"bg-purple-100 text-purple-800"},{value:"testing",label:" ",color:"bg-orange-100 text-orange-800"},{value:"completed",label:" ",color:"bg-emerald-100 text-emerald-800"},{value:"cancelled",label:" ",color:"bg-red-100 text-red-800"},{value:"on_hold",label:" ",color:"bg-gray-100 text-gray-800"}],Vq=({isOpen:s,onClose:t,projectId:r,currentStatus:a,onStatusChanged:n})=>{const[i,o]=j.useState(""),[c,u]=j.useState(""),[h,m]=j.useState(!1),[f,p]=j.useState("");if(j.useEffect(()=>{s&&(o(""),u(""),p(""))},[s]),j.useEffect(()=>{s?document.body.style.overflow="hidden":document.body.style.overflow=""},[s]),!s||!r)return null;const v=Sk.find(w=>w.value===a),g=Sk.filter(w=>w.value!==a),y=async()=>{if(!i){p(",   ");return}m(!0),p("");try{const w=await fetch(`http://localhost:8001/admin/api/projects/${r}/status`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({status:i,comment:c||void 0})}),N=await w.json();w.ok?(n(),t()):p(N.message||"  ")}catch{p("   ")}finally{m(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"  "}),e.jsxs("p",{className:"text-purple-100 text-sm mt-1",children:[" #",r]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("div",{className:"flex items-center gap-2",children:v&&e.jsx("span",{className:`px-4 py-2 rounded-lg font-semibold text-sm ${v.color}`,children:v.label})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:g.map(w=>e.jsx("button",{type:"button",onClick:()=>o(w.value),className:`px-4 py-3 rounded-lg font-semibold text-sm transition-all border-2 ${i===w.value?"border-purple-500 ring-2 ring-purple-200 "+w.color:"border-gray-200 hover:border-purple-300 "+w.color}`,children:w.label},w.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:c,onChange:w=>u(w.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-purple-500 focus:ring-2 focus:ring-purple-200 outline-none transition-all resize-none",rows:4,placeholder:"     ()"})]}),f&&e.jsxs("div",{className:"flex items-start gap-2 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg",children:[e.jsx(Ge,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-800",children:f})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex gap-3",children:[e.jsx("button",{type:"button",onClick:y,disabled:h||!i,className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:h?"...":" "}),e.jsx("button",{type:"button",onClick:t,disabled:h,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold disabled:opacity-50",children:""})]})]})})},Hq=({isOpen:s,onClose:t,projectId:r,currentExecutor:a,currentCost:n=0,onAssigned:i})=>{const[o,c]=j.useState([]),[u,h]=j.useState(null),[m,f]=j.useState(0),[p,v]=j.useState(!1),[g,y]=j.useState(!1),[w,N]=j.useState("");j.useEffect(()=>{s&&(h(a?.id||null),f(n||0),N(""),k())},[s,a,n]),j.useEffect(()=>{s?document.body.style.overflow="hidden":document.body.style.overflow=""},[s]);const k=async()=>{y(!0);try{const _=await vs.getExecutors(),T=_.executors||_.users||[];c(T)}catch{N("  ")}finally{y(!1)}},S=async()=>{if(!u){N(",  ");return}if(!r){N("  ID ");return}v(!0),N("");try{const _=await vs.updateProject(r,{assigned_executor_id:u,executor_cost:m||0});_.success?(i(),t()):N(_.message||"  ")}catch(_){console.error("Error assigning executor:",_),N(_.response?.data?.detail||"   ")}finally{v(!1)}};return!s||!r?null:e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-xl w-full overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(it,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsxs("p",{className:"text-indigo-100 text-sm mt-1",children:[" #",r]})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[a&&e.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-500 rounded-lg p-4",children:[e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("span",{className:"font-semibold",children:" :"})," ",a.first_name]}),n>0&&e.jsxs("p",{className:"text-sm text-blue-900 mt-1",children:[e.jsx("span",{className:"font-semibold",children:" :"})," ",n.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),g?e.jsx("div",{className:"px-4 py-3 border-2 border-gray-200 rounded-lg text-gray-500 text-sm",children:" ..."}):e.jsxs("select",{value:u||"",onChange:_=>h(Number(_.target.value)||null),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",children:[e.jsx("option",{value:"",children:" ..."}),o.map(_=>{const T=_.first_name||_.full_name||_.username||" ",E=_.role||"";return e.jsxs("option",{value:_.id,children:[T," (",E,")"]},_.id)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"   ()"}),e.jsx("input",{type:"number",value:m,onChange:_=>f(Number(_.target.value)||0),min:"0",step:"100",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",placeholder:"  "}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"      "})]}),w&&e.jsxs("div",{className:"flex items-start gap-2 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg",children:[e.jsx(Ge,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-800",children:w})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex gap-3",children:[e.jsx("button",{type:"button",onClick:S,disabled:p||!u,className:"flex-1 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:p?"...":" "}),e.jsx("button",{type:"button",onClick:t,disabled:p,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold disabled:opacity-50",children:""})]})]})})},qq=({isOpen:s,onClose:t,projectId:r,projectCost:a=0,paidTotal:n=0,onPaymentAdded:i})=>{const[o,c]=j.useState("prepayment"),[u,h]=j.useState(0),[m,f]=j.useState(""),[p,v]=j.useState(""),[g,y]=j.useState(!1),[w,N]=j.useState("");j.useEffect(()=>{if(s){const _=new Date().toISOString().split("T")[0];f(_),c("prepayment"),h(0),v(""),N("")}},[s]),j.useEffect(()=>{s?document.body.style.overflow="hidden":document.body.style.overflow=""},[s]);const k=async()=>{if(!u||u<=0){N(",   ");return}if(!r){N("  ID ");return}y(!0),N("");try{const T=await fetch(`/admin/api/projects/${r}/payments`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({payment_type:o,amount:u,payment_date:m,comment:p||void 0})}),E=await T.json();T.ok?(i(),t()):N(E.message||"  ")}catch{N("   ")}finally{y(!1)}};if(!s||!r)return null;const S=a-n;return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-xl w-full overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-600 text-white px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(lE,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsxs("p",{className:"text-emerald-100 text-sm mt-1",children:[" #",r]})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-500 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-blue-600 font-semibold mb-1",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:[a.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"bg-green-50 border-l-4 border-green-500 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-green-600 font-semibold mb-1",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-green-900",children:[n.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"bg-orange-50 border-l-4 border-orange-500 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-orange-600 font-semibold mb-1",children:""}),e.jsxs("p",{className:"text-2xl font-bold text-orange-900",children:[S.toLocaleString("ru-RU")," "]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:o,onChange:_=>c(_.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none transition-all",children:[e.jsx("option",{value:"prepayment",children:""}),e.jsx("option",{value:"partial",children:" "}),e.jsx("option",{value:"full",children:" "}),e.jsx("option",{value:"final",children:" "})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  () ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:u||"",onChange:_=>h(Number(_.target.value)||0),min:"0",step:"100",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none transition-all",placeholder:" "})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:m,onChange:_=>f(_.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:p,onChange:_=>v(_.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none transition-all resize-none",rows:3,placeholder:"    ()"})]}),w&&e.jsxs("div",{className:"flex items-start gap-2 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg",children:[e.jsx(Ge,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-800",children:w})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex gap-3",children:[e.jsx("button",{type:"button",onClick:k,disabled:g||!u||u<=0,className:"flex-1 px-6 py-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-lg hover:from-emerald-700 hover:to-teal-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:g?"...":" "}),e.jsx("button",{type:"button",onClick:t,disabled:g,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold disabled:opacity-50",children:""})]})]})})},Wq=({message:s,type:t,onClose:r,duration:a=3e3})=>{j.useEffect(()=>{const o=setTimeout(()=>{r()},a);return()=>clearTimeout(o)},[a,r]);const n=()=>{switch(t){case"success":return e.jsx(ut,{className:"w-5 h-5"});case"error":return e.jsx(Ge,{className:"w-5 h-5"});case"warning":return e.jsx(Ge,{className:"w-5 h-5"});default:return e.jsx(uE,{className:"w-5 h-5"})}},i=()=>{switch(t){case"success":return"bg-green-50 border-green-500 text-green-800";case"error":return"bg-red-50 border-red-500 text-red-800";case"warning":return"bg-yellow-50 border-yellow-500 text-yellow-800";default:return"bg-blue-50 border-blue-500 text-blue-800"}};return e.jsxs("div",{className:`flex items-start gap-3 p-4 rounded-lg shadow-lg border-l-4 ${i()} animate-slide-in-right min-w-[300px] max-w-md`,children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:n()}),e.jsx("p",{className:"flex-1 text-sm font-medium",children:s}),e.jsx("button",{onClick:r,className:"flex-shrink-0 hover:opacity-70 transition-opacity",children:e.jsx(De,{className:"w-4 h-4"})})]})},m1=({toasts:s,onRemove:t})=>e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        @keyframes slide-in-right {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
        .animate-slide-in-right {
          animation: slide-in-right 0.3s ease-out;
        }
      `}),e.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2",children:s.map(r=>e.jsx(Wq,{message:r.message,type:r.type,onClose:()=>t(r.id)},r.id))})]}),Yq=window.location.hostname==="localhost"?"http://localhost:8000/admin":"/admin",V0=window.location.hostname==="localhost"?"http://localhost:8000":window.location.origin,Gq=({isOpen:s,onClose:t,projectId:r,executorCost:a=0,executorPaidTotal:n=0,executorName:i="",onPaymentAdded:o})=>{const[c,u]=j.useState("stage"),[h,m]=j.useState(0),[f,p]=j.useState(""),[v,g]=j.useState(""),[y,w]=j.useState(!1),[N,k]=j.useState("");j.useEffect(()=>{if(s){const T=new Date().toISOString().split("T")[0];u("stage"),p(T),m(0),g(""),k("")}},[s]),j.useEffect(()=>{s?document.body.style.overflow="hidden":document.body.style.overflow=""},[s]);const S=async()=>{if(!h||h<=0){k(",   ");return}if(!r){k("  ID ");return}w(!0),k("");try{const T=await fetch(`${Yq}/api/projects/${r}/executor-payments`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({payment_type:c,amount:h,payment_date:f,comment:v||void 0})}),E=await T.json();T.ok?(o(),t()):k(E.message||"  ")}catch{k("   ")}finally{w(!1)}};if(!s||!r)return null;const _=a-n;return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-600 to-red-600 text-white px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pN,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-orange-100 text-sm mt-1",children:i})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto flex-1",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-500 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-blue-600 font-semibold mb-1",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:[a.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"bg-green-50 border-l-4 border-green-500 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-green-600 font-semibold mb-1",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-green-900",children:[n.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"bg-orange-50 border-l-4 border-orange-500 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-orange-600 font-semibold mb-1",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-orange-900",children:[_.toLocaleString("ru-RU")," "]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:c,onChange:T=>u(T.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200 outline-none transition-all",children:[e.jsx("option",{value:"prepayment",children:""}),e.jsx("option",{value:"stage",children:" "}),e.jsx("option",{value:"final",children:" "}),e.jsx("option",{value:"bonus",children:""}),e.jsx("option",{value:"other",children:""})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  () ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:h||"",onChange:T=>m(Number(T.target.value)||0),min:"0",step:"100",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200 outline-none transition-all",placeholder:" "})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:f,onChange:T=>p(T.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200 outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:v,onChange:T=>g(T.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200 outline-none transition-all resize-none",rows:3,placeholder:"    ()"})]}),N&&e.jsxs("div",{className:"flex items-start gap-2 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg",children:[e.jsx(Ge,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-800",children:N})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex flex-col-reverse sm:flex-row gap-3 flex-shrink-0",children:[e.jsx("button",{type:"button",onClick:t,disabled:y,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold disabled:opacity-50",children:""}),e.jsx("button",{type:"button",onClick:S,disabled:y||!h||h<=0,className:"flex-1 px-6 py-3 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-lg hover:from-orange-700 hover:to-red-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:y?"...":" "})]})]})})},Kq=({filters:s,onChange:t,onClear:r,executors:a=[],clients:n=[]})=>{const i=()=>{t({executorId:null,clientId:null,colorFilter:"",dateFrom:"",dateTo:"",hasPayment:"",hasOverdue:!1,noExecutor:!1,priceFrom:"",priceTo:""}),r?.()},o=s.executorId||s.clientId||s.colorFilter||s.dateFrom||s.dateTo||s.hasPayment||s.hasOverdue||s.noExecutor||s.priceFrom||s.priceTo;return e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{className:`px-4 py-2 rounded-xl font-medium transition-all flex items-center gap-2 ${o?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700"}`,children:[e.jsx(wr,{className:"w-4 h-4"}),"",o&&e.jsx("span",{className:"bg-white text-purple-600 dark:bg-gray-700 dark:text-purple-400 px-2 py-0.5 rounded-full text-xs font-bold",children:[s.executorId,s.clientId,s.colorFilter,s.dateFrom,s.hasPayment,s.hasOverdue,s.noExecutor,s.priceFrom].filter(Boolean).length})]}),e.jsxs("div",{className:"hidden group-hover:block absolute right-0 mt-2 w-96 bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 z-50",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:" "}),e.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:" ",children:e.jsx(De,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-4 space-y-4 max-h-[500px] overflow-y-auto",children:[a.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsxs("select",{value:s.executorId||"",onChange:c=>t({...s,executorId:c.target.value?Number(c.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"",children:" "}),a.map(c=>e.jsx("option",{value:c.id,children:c.username},c.id))]})]}),n.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsxs("select",{value:s.clientId||"",onChange:c=>t({...s,clientId:c.target.value?Number(c.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"",children:" "}),n.map(c=>e.jsxs("option",{value:c.id,children:[c.first_name," (@",c.username,")"]},c.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:" "}),e.jsxs("select",{value:s.colorFilter,onChange:c=>t({...s,colorFilter:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"default",children:" "}),e.jsx("option",{value:"green",children:" "}),e.jsx("option",{value:"yellow",children:" "}),e.jsx("option",{value:"red",children:" "})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:" "}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"date",value:s.dateFrom,onChange:c=>t({...s,dateFrom:c.target.value}),placeholder:"",className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none"}),e.jsx("input",{type:"date",value:s.dateTo,onChange:c=>t({...s,dateTo:c.target.value}),placeholder:"",className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsxs("select",{value:s.hasPayment,onChange:c=>t({...s,hasPayment:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"paid",children:" "}),e.jsx("option",{value:"unpaid",children:" "}),e.jsx("option",{value:"partially",children:" "}),e.jsx("option",{value:"fully",children:" "})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"  ()"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"number",value:s.priceFrom,onChange:c=>t({...s,priceFrom:c.target.value}),placeholder:"",min:"0",className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none"}),e.jsx("input",{type:"number",value:s.priceTo,onChange:c=>t({...s,priceTo:c.target.value}),placeholder:"",min:"0",className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300",children:" "}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.hasOverdue,onChange:c=>t({...s,hasOverdue:c.target.checked}),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:" "})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.noExecutor,onChange:c=>t({...s,noExecutor:c.target.checked}),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:" "})]})]})]})]})]})},X7=async s=>{try{if(navigator.clipboard&&window.isSecureContext)return await navigator.clipboard.writeText(s),!0;const t=document.createElement("textarea");t.value=s,t.style.position="fixed",t.style.left="-999999px",t.style.top="-999999px",document.body.appendChild(t),t.focus(),t.select();const r=document.execCommand("copy");return document.body.removeChild(t),r}catch(t){return console.error("Failed to copy:",t),!1}},Xq=s=>{const t=[` #${s.id}`,"",`: ${s.title}`,`: ${s.user?.first_name||" "} (@${s.user?.username||""})`,`: ${s.status}`,`: ${s.project_type||" "}`,`: ${s.complexity}`,"",":",`: ${s.estimated_cost?.toLocaleString("ru-RU")||0} `,` : ${s.client_paid_total?.toLocaleString("ru-RU")||0} `,`: ${((s.estimated_cost||0)-(s.client_paid_total||0)).toLocaleString("ru-RU")} `,"",` : ${s.executor_cost?.toLocaleString("ru-RU")||0} `,` : ${s.executor_paid_total?.toLocaleString("ru-RU")||0} `,"",":",`${s.description||" "}`];return s.deadline&&t.push("",`: ${s.deadline}`),s.assigned_to&&t.push(`: ${s.assigned_to.username}`),t.push("",`: ${s.created_at}`),t.join(`
`)},Zq=({isOpen:s,onClose:t,project:r,onShowToast:a})=>{const[n,i]=j.useState(!1);if(!s||!r)return null;const o=async()=>{const f=c(r);await X7(f)?a("    !","success"):a(" ","error")},c=f=>{const p=[];return p.push("="+"=".repeat(60)),p.push(`  -  #${f.id}`),p.push("="+"=".repeat(60)),p.push(""),p.push(` : ${f.title}`),p.push(` : ${f.user?.first_name||" "} (@${f.user?.username||""})`),p.push(` : ${f.project_type||" "}`),p.push(` : ${f.status}`),p.push(` : ${f.complexity}`),p.push(""),p.push("-"+"-".repeat(60)),p.push(" "),p.push("-"+"-".repeat(60)),p.push(` : ${(f.estimated_cost||0).toLocaleString("ru-RU")} `),p.push(` : ${(f.client_paid_total||0).toLocaleString("ru-RU")} `),p.push(`  : ${((f.estimated_cost||0)-(f.client_paid_total||0)).toLocaleString("ru-RU")} `),p.push(""),p.push(` : ${(f.executor_cost||0).toLocaleString("ru-RU")} `),p.push(` : ${(f.executor_paid_total||0).toLocaleString("ru-RU")} `),p.push(`: ${((f.client_paid_total||0)-(f.executor_paid_total||0)).toLocaleString("ru-RU")} `),p.push(""),f.deadline&&(p.push("-"+"-".repeat(60)),p.push(" "),p.push("-"+"-".repeat(60)),p.push(f.deadline),p.push("")),f.assigned_to&&(p.push("-"+"-".repeat(60)),p.push(" "),p.push("-"+"-".repeat(60)),p.push(f.assigned_to.username),p.push("")),p.push("-"+"-".repeat(60)),p.push("   "),p.push("-"+"-".repeat(60)),p.push(f.description||" "),p.push(""),f.project_metadata?.test_link&&(p.push("-"+"-".repeat(60)),p.push("  "),p.push("-"+"-".repeat(60)),p.push(f.project_metadata.test_link),p.push("")),p.push("-"+"-".repeat(60)),p.push(" "),p.push("-"+"-".repeat(60)),p.push(`: ${new Date(f.created_at).toLocaleString("ru-RU")}`),p.push(`: ${new Date(f.updated_at).toLocaleString("ru-RU")}`),p.push(""),p.push("="+"=".repeat(60)),p.join(`
`)},u=r.description?.split(`
`)||[],h=u.length>10,m=n||!h?r.description:u.slice(0,10).join(`
`)+`
...`;return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-blue-600 text-white px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ue,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsxs("p",{className:"text-indigo-100 text-sm mt-1",children:[" #",r.id," - ",r.title]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:o,className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors flex items-center gap-2",children:[e.jsx(er,{className:"w-4 h-4"}),""]}),e.jsx("button",{onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-500 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-blue-600 font-semibold mb-1",children:""}),e.jsx("p",{className:"text-sm font-bold text-blue-900",children:r.user?.first_name||" "}),e.jsxs("p",{className:"text-xs text-blue-700",children:["@",r.user?.username||""]})]}),e.jsxs("div",{className:"bg-purple-50 border-l-4 border-purple-500 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-purple-600 font-semibold mb-1",children:" "}),e.jsx("p",{className:"text-sm font-bold text-purple-900",children:r.project_type||" "})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 rounded-xl p-6 border border-emerald-200",children:[e.jsx("h4",{className:"font-bold text-emerald-900 mb-4 flex items-center gap-2",children:"  "}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-emerald-700 mb-1",children:""}),e.jsxs("p",{className:"text-xl font-bold text-emerald-900",children:[(r.estimated_cost||0).toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-emerald-700 mb-1",children:""}),e.jsxs("p",{className:"text-xl font-bold text-emerald-900",children:[(r.client_paid_total||0).toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-orange-700 mb-1",children:""}),e.jsxs("p",{className:"text-xl font-bold text-orange-900",children:[((r.estimated_cost||0)-(r.client_paid_total||0)).toLocaleString("ru-RU")," "]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:"   "}),e.jsx("pre",{className:"whitespace-pre-wrap font-sans text-sm text-gray-700 leading-relaxed",children:m||" "}),h&&e.jsx("button",{onClick:()=>i(!n),className:"mt-4 text-indigo-600 hover:text-indigo-700 font-semibold text-sm flex items-center gap-1",children:n?e.jsxs(e.Fragment,{children:[e.jsx(jp,{className:"w-4 h-4"}),""]}):e.jsxs(e.Fragment,{children:[e.jsx(Ci,{className:"w-4 h-4"})," "]})})]}),(r.deadline||r.assigned_to||r.project_metadata?.test_link)&&e.jsxs("div",{className:"grid gap-4",children:[r.deadline&&e.jsxs("div",{className:"bg-orange-50 border-l-4 border-orange-500 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-orange-600 font-semibold mb-1",children:" "}),e.jsx("p",{className:"text-sm font-bold text-orange-900",children:r.deadline})]}),r.assigned_to&&e.jsxs("div",{className:"bg-violet-50 border-l-4 border-violet-500 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-violet-600 font-semibold mb-1",children:" "}),e.jsx("p",{className:"text-sm font-bold text-violet-900",children:r.assigned_to.username})]}),r.project_metadata?.test_link&&e.jsxs("div",{className:"bg-cyan-50 border-l-4 border-cyan-500 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-cyan-600 font-semibold mb-1",children:"  "}),e.jsx("a",{href:r.project_metadata.test_link,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-bold text-cyan-900 hover:underline",children:r.project_metadata.test_link})]})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:[e.jsxs("span",{children:[": ",new Date(r.created_at).toLocaleString("ru-RU")]}),e.jsx("span",{className:"mx-2",children:""}),e.jsxs("span",{children:[": ",new Date(r.updated_at).toLocaleString("ru-RU")]})]}),e.jsx("button",{onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})})},Qq=({selectedIds:s,onSelectAll:t,onDeselectAll:r,onBulkArchive:a,onBulkDelete:n,onBulkStatusChange:i,onBulkExport:o,totalCount:c})=>{const u=s.length>0,h=s.length===c&&c>0;return u?e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-blue-50 border-2 border-blue-200 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:h?r:t,className:"flex items-center gap-2 px-4 py-2 bg-white hover:bg-gray-50 rounded-lg transition-colors text-sm font-semibold text-blue-700 border border-blue-300",children:[h?e.jsx(ew,{className:"w-4 h-4"}):e.jsx(Ds,{className:"w-4 h-4"}),h?" ":`  (${c})`]}),e.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[": ",e.jsx("span",{className:"font-bold",children:s.length})]})]}),e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-4 py-2 bg-teal-600 hover:bg-teal-700 text-white rounded-lg transition-colors text-sm font-semibold",children:[e.jsx(ls,{className:"w-4 h-4"})," "]}),e.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white rounded-lg transition-colors text-sm font-semibold",children:[e.jsx(Cl,{className:"w-4 h-4"})," "]}),e.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors text-sm font-semibold",children:[e.jsx(Tt,{className:"w-4 h-4"}),""]}),e.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors text-sm font-semibold",children:[e.jsx(tt,{className:"w-4 h-4"}),""]})]})]}):e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors text-sm font-medium text-gray-700",children:[e.jsx(ew,{className:"w-4 h-4"})," "]})})},Jq=({groupBy:s,onGroupByChange:t})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:":"}),e.jsxs("select",{value:s,onChange:r=>t(r.target.value),className:"px-4 py-2 bg-white border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none text-sm font-medium",children:[e.jsx("option",{value:"none",children:" "}),e.jsx("option",{value:"status",children:" "}),e.jsx("option",{value:"executor",children:" "}),e.jsx("option",{value:"client",children:" "})]})]}),Ck=[{keys:["/"],description:"  ",category:""},{keys:["R"],description:"  ",category:""},{keys:["Esc"],description:"  ",category:""},{keys:["N"],description:"  ",category:""},{keys:["Ctrl","E"],description:" ",category:""},{keys:["Ctrl","A"],description:"  ",category:""},{keys:["Ctrl","P"],description:"  ",category:""},{keys:["F"],description:"  ",category:""},{keys:["Shift","C"],description:"  ",category:""},{keys:["G"],description:" ",category:""},{keys:["A"],description:"/ ",category:""},{keys:["?"],description:"  ",category:""}],eW=({isOpen:s,onClose:t})=>{if(j.useEffect(()=>{if(s){const a=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${a}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const a=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(a||"0")*-1)}},[s]),j.useEffect(()=>{if(!s)return;const a=n=>{n.key==="Escape"&&t()};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[s,t]),!s)return null;const r=[...new Set(Ck.map(a=>a.category))];return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-slate-700 to-gray-800 text-white px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(jB,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-slate-300 text-sm mt-1",children:"   "})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6 max-h-[600px] overflow-y-auto",children:r.map(a=>e.jsxs("div",{className:"mb-6 last:mb-0",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-500 uppercase tracking-wider mb-3",children:a}),e.jsx("div",{className:"space-y-2",children:Ck.filter(n=>n.category===a).map((n,i)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"text-sm text-gray-700",children:n.description}),e.jsx("div",{className:"flex items-center gap-1",children:n.keys.map((o,c)=>e.jsxs("span",{className:"flex items-center",children:[e.jsx("kbd",{className:"px-3 py-1.5 bg-white border-2 border-gray-300 rounded-lg shadow-sm text-xs font-semibold text-gray-800 min-w-[2rem] text-center",children:o}),c<n.keys.length-1&&e.jsx("span",{className:"mx-1 text-gray-400 font-bold",children:"+"})]},c))})]},i))})]},a))}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:[" :  ",e.jsx("kbd",{className:"px-2 py-0.5 bg-white border border-gray-300 rounded text-xs",children:"?"}),"     "]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold text-sm",children:""})]})]})})},tW=({isOpen:s,onClose:t,onExport:r,projectCount:a})=>{const[n,i]=j.useState("csv"),[o,c]=j.useState("projects");j.useEffect(()=>{if(s){const m=new Date().toISOString().split("T")[0];c(`projects_${m}`),i("csv")}},[s]),j.useEffect(()=>{if(s){const m=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${m}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const m=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(m||"0")*-1)}},[s]);const u=()=>{r(n,o),t()};if(!s)return null;const h=[{value:"csv",icon:e.jsx(O4,{className:"w-6 h-6"}),name:"CSV",description:"  Excel/Google Sheets",extension:".csv"},{value:"excel",icon:e.jsx(O4,{className:"w-6 h-6"}),name:"Excel",description:" Microsoft Excel",extension:".xlsx"},{value:"json",icon:e.jsx(HP,{className:"w-6 h-6"}),name:"JSON",description:" API  ",extension:".json"},{value:"pdf",icon:e.jsx(Ue,{className:"w-6 h-6"}),name:"PDF/TXT",description:" ",extension:".txt"}];return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Tt,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsxs("p",{className:"text-blue-100 text-sm mt-1",children:["  : ",a]})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"  "}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:h.map(m=>e.jsxs("button",{type:"button",onClick:()=>i(m.value),className:`flex items-start gap-3 p-4 rounded-xl border-2 transition-all ${n===m.value?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"}`,children:[e.jsx("div",{className:`flex-shrink-0 ${n===m.value?"text-blue-600":"text-gray-400"}`,children:m.icon}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold text-gray-900",children:m.name}),e.jsx("span",{className:"text-xs text-gray-500 font-mono",children:m.extension})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:m.description})]}),n===m.value&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})})]},m.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:o,onChange:m=>c(m.target.value),className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all",placeholder:"  "}),e.jsx("span",{className:"text-sm text-gray-500 font-mono",children:h.find(m=>m.value===n)?.extension})]})]}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("span",{className:"font-semibold",children:" :"}),"     : , , , ,   ."]})})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex gap-3",children:[e.jsxs("button",{type:"button",onClick:u,disabled:!o.trim(),className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Tt,{className:"w-5 h-5"}),""]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})})},sW=[{name:"",value:"#3B82F6"},{name:"",value:"#10B981"},{name:"",value:"#F59E0B"},{name:"",value:"#EF4444"},{name:"",value:"#8B5CF6"},{name:"",value:"#EC4899"},{name:"",value:"#6366F1"},{name:"",value:"#6B7280"}],rW=({isOpen:s,onClose:t,onStatusesChanged:r})=>{const[a,n]=j.useState([]),[i,o]=j.useState(!1),[c,u]=j.useState(""),[h,m]=j.useState(null),[f,p]=j.useState({name:"",color:"#3B82F6"}),[v,g]=j.useState(!1);j.useEffect(()=>{s&&(y(),u(""),g(!1),m(null))},[s]),j.useEffect(()=>{if(s){const S=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${S}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const S=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(S||"0")*-1)}},[s]);const y=async()=>{o(!0);try{const _=await(await fetch("http://localhost:8001/admin/api/statuses",{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).json();n(_.statuses||[])}catch{u("  ")}finally{o(!1)}},w=async()=>{if(!f.name.trim()){u("  ");return}try{const S=await fetch("http://localhost:8001/admin/api/statuses",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(f)});if(S.ok)await y(),p({name:"",color:"#3B82F6"}),g(!1),r();else{const _=await S.json();u(_.message||"  ")}}catch{u("   ")}},N=async(S,_)=>{try{const T=await fetch(`http://localhost:8001/admin/api/statuses/${S}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(_)});if(T.ok)await y(),m(null),r();else{const E=await T.json();u(E.message||"  ")}}catch{u("   ")}},k=async S=>{if(confirm("  ?    ."))try{const _=await fetch(`http://localhost:8001/admin/api/statuses/${S}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(_.ok)await y(),r();else{const T=await _.json();u(T.message||"  ")}}catch{u("   ")}};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(mi,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-purple-100 text-sm mt-1",children:"    "})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 max-h-[600px] overflow-y-auto",children:[c&&e.jsxs("div",{className:"flex items-start gap-2 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg mb-4",children:[e.jsx(Ge,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-800",children:c})]}),!v&&e.jsxs("button",{type:"button",onClick:()=>g(!0),className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all font-semibold mb-4",children:[e.jsx(We,{className:"w-5 h-5"}),"  "]}),v&&e.jsxs("div",{className:"bg-purple-50 border-2 border-purple-200 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("input",{type:"text",value:f.name,onChange:S=>p({...f,name:S.target.value}),className:"flex-1 px-4 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 focus:ring-2 focus:ring-purple-200 outline-none",placeholder:" ",autoFocus:!0}),e.jsx("button",{type:"button",onClick:w,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:e.jsx(is,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",onClick:()=>{g(!1),p({name:"",color:"#3B82F6"})},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:sW.map(S=>e.jsx("button",{type:"button",onClick:()=>p({...f,color:S.value}),className:`w-8 h-8 rounded-full border-2 transition-all ${f.color===S.value?"border-gray-900 scale-110":"border-gray-300"}`,style:{backgroundColor:S.value},title:S.name},S.value))})]}),i?e.jsx("div",{className:"text-center py-8 text-gray-500",children:" ..."}):e.jsx("div",{className:"space-y-2",children:a.map(S=>e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("div",{className:"w-4 h-4 rounded-full flex-shrink-0",style:{backgroundColor:S.color}}),h===S.id?e.jsx(e.Fragment,{children:e.jsx("input",{type:"text",defaultValue:S.name,className:"flex-1 px-3 py-1 border-2 border-purple-300 rounded-lg focus:border-purple-500 outline-none",onBlur:_=>{_.target.value!==S.name?N(S.id,{name:_.target.value}):m(null)},onKeyDown:_=>{_.key==="Enter"?_.currentTarget.blur():_.key==="Escape"&&m(null)},autoFocus:!0})}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"flex-1 font-medium text-gray-900",children:S.name}),e.jsx("button",{type:"button",onClick:()=>m(S.id),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"",children:e.jsx(sr,{className:"w-4 h-4"})}),e.jsx("button",{type:"button",onClick:()=>k(S.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"",children:e.jsx(tt,{className:"w-4 h-4"})})]})]},S.id))}),!i&&a.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"  .   !"})]}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end",children:e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})})]})}):null},aW=({files:s,onCancel:t,onClear:r})=>{if(s.length===0)return null;const a=s.every(i=>i.status==="completed"),n=s.some(i=>i.status==="error");return e.jsxs("div",{className:"fixed bottom-4 right-4 z-[9998] w-96 bg-white rounded-xl shadow-2xl border-2 border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(jn,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:a?" ":" "})]}),e.jsx("button",{onClick:r,className:"hover:bg-white/20 rounded-lg p-1 transition-colors",title:"",children:e.jsx(De,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"max-h-80 overflow-y-auto p-4 space-y-3",children:s.map(i=>e.jsx("div",{className:`p-3 rounded-lg border-2 transition-all ${i.status==="completed"?"border-green-200 bg-green-50":i.status==="error"?"border-red-200 bg-red-50":"border-blue-200 bg-blue-50"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:i.status==="completed"?e.jsx(ut,{className:"w-5 h-5 text-green-600"}):i.status==="error"?e.jsx(Ge,{className:"w-5 h-5 text-red-600"}):e.jsx(Mr,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 truncate",children:i.file.name}),i.status==="uploading"&&e.jsx("button",{onClick:()=>t(i.id),className:"flex-shrink-0 text-gray-500 hover:text-gray-700",title:"",children:e.jsx(De,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[e.jsx("span",{children:nW(i.file.size)}),i.status==="completed"&&e.jsx("span",{className:"text-green-600 font-semibold",children:" "}),i.status==="error"&&e.jsx("span",{className:"text-red-600 font-semibold",children:" "}),i.status==="uploading"&&e.jsxs("span",{className:"text-blue-600 font-semibold",children:[i.progress,"%"]})]}),i.status==="uploading"&&e.jsx("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-1.5 overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-indigo-500 transition-all duration-300 ease-out",style:{width:`${i.progress}%`}})}),i.status==="error"&&i.error&&e.jsx("div",{className:"mt-1 text-xs text-red-600",children:i.error})]})]})},i.id))}),(a||n)&&e.jsxs("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200 flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-gray-600",children:[s.filter(i=>i.status==="completed").length,"  ",s.length," "]}),e.jsx("button",{onClick:r,className:"text-xs font-semibold text-blue-600 hover:text-blue-700 transition-colors",children:""})]})]})},nW=s=>{if(s===0)return"0 ";const t=1024,r=["","","",""],a=Math.floor(Math.log(s)/Math.log(t));return Math.round(s/Math.pow(t,a)*100)/100+" "+r[a]},iW=({isOpen:s,onClose:t,imageUrl:r,imageName:a="image",canDownload:n=!0})=>{const[i,o]=j.useState(1),[c,u]=j.useState(0),[h,m]=j.useState(!1);j.useEffect(()=>{if(s){o(1),u(0),m(!1);const w=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${w}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const w=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(w||"0")*-1)}},[s]),j.useEffect(()=>{if(!s)return;const w=N=>{N.key==="Escape"?t():N.key==="+"||N.key==="="?f():N.key==="-"?p():(N.key==="r"||N.key==="R")&&v()};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[s,i,c]);const f=()=>{o(w=>Math.min(w+.25,3))},p=()=>{o(w=>Math.max(w-.25,.5))},v=()=>{u(w=>(w+90)%360)},g=async()=>{try{const N=await(await fetch(r)).blob(),k=window.URL.createObjectURL(N),S=document.createElement("a");S.href=k,S.download=a,document.body.appendChild(S),S.click(),document.body.removeChild(S),window.URL.revokeObjectURL(k)}catch(w){console.error("Download failed:",w)}},y=()=>{m(!h)};return s?e.jsxs("div",{className:"fixed inset-0 bg-black/90 z-[9999] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 bg-black/50 backdrop-blur-sm",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("h3",{className:"text-white font-semibold truncate max-w-md",children:a})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:p,disabled:i<=.5,className:"p-2 text-white hover:bg-white/20 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:" ( -)",children:e.jsx(oz,{className:"w-5 h-5"})}),e.jsxs("span",{className:"text-white text-sm font-mono min-w-[3rem] text-center",children:[Math.round(i*100),"%"]}),e.jsx("button",{onClick:f,disabled:i>=3,className:"p-2 text-white hover:bg-white/20 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:" ( +)",children:e.jsx(nz,{className:"w-5 h-5"})}),e.jsx("div",{className:"w-px h-6 bg-white/20 mx-2"}),e.jsx("button",{onClick:v,className:"p-2 text-white hover:bg-white/20 rounded-lg transition-colors",title:" ( R)",children:e.jsx(mF,{className:"w-5 h-5"})}),e.jsx("button",{onClick:y,className:"p-2 text-white hover:bg-white/20 rounded-lg transition-colors",title:"  ",children:e.jsx(zB,{className:"w-5 h-5"})}),n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-px h-6 bg-white/20 mx-2"}),e.jsx("button",{onClick:g,className:"p-2 text-white hover:bg-white/20 rounded-lg transition-colors",title:"",children:e.jsx(Tt,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"w-px h-6 bg-white/20 mx-2"}),e.jsx("button",{onClick:t,className:"p-2 text-white hover:bg-white/20 rounded-lg transition-colors",title:" (Esc)",children:e.jsx(De,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:`flex-1 flex items-center justify-center overflow-auto p-4 ${h?"p-0":""}`,onClick:w=>{w.target===w.currentTarget&&t()},children:e.jsx("img",{src:r,alt:a,className:"max-w-full max-h-full object-contain transition-all duration-300 ease-out",style:{transform:`scale(${i}) rotate(${c}deg)`,cursor:i>1?"grab":"default"},draggable:!1})}),e.jsx("div",{className:"px-6 py-3 bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center justify-center gap-6 text-xs text-gray-400",children:[e.jsxs("span",{children:[e.jsx("kbd",{className:"px-2 py-1 bg-white/10 rounded",children:"Esc"})," "]}),e.jsxs("span",{children:[e.jsx("kbd",{className:"px-2 py-1 bg-white/10 rounded",children:"+/-"})," "]}),e.jsxs("span",{children:[e.jsx("kbd",{className:"px-2 py-1 bg-white/10 rounded",children:"R"})," "]})]})})]}):null},lW=({isOpen:s,onClose:t,projectId:r,projectName:a})=>{const[n,i]=j.useState([]),[o,c]=j.useState(!1),[u,h]=j.useState("");j.useEffect(()=>{s&&r&&m()},[s,r]),j.useEffect(()=>{if(s){const g=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${g}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const g=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(g||"0")*-1)}},[s]);const m=async()=>{if(r){c(!0),h("");try{const g=await fetch(`http://localhost:8001/admin/api/projects/${r}/timeline`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(g.ok){const y=await g.json();i(y.timeline||[])}else h("  ")}catch{h("   ")}finally{c(!1)}}},f=g=>{switch(g){case"created":return e.jsx(ut,{className:"w-5 h-5 text-green-600"});case"status_changed":return e.jsx(mi,{className:"w-5 h-5 text-blue-600"});case"executor_assigned":return e.jsx(lt,{className:"w-5 h-5 text-purple-600"});case"payment_added":return e.jsx(Qe,{className:"w-5 h-5 text-emerald-600"});case"executor_payment":return e.jsx(Qe,{className:"w-5 h-5 text-orange-600"});case"edited":return e.jsx(sr,{className:"w-5 h-5 text-amber-600"});case"completed":return e.jsx(ut,{className:"w-5 h-5 text-green-600"});default:return e.jsx(Ve,{className:"w-5 h-5 text-gray-600"})}},p=g=>{switch(g){case"created":return"border-green-500 bg-green-50";case"status_changed":return"border-blue-500 bg-blue-50";case"executor_assigned":return"border-purple-500 bg-purple-50";case"payment_added":return"border-emerald-500 bg-emerald-50";case"executor_payment":return"border-orange-500 bg-orange-50";case"edited":return"border-amber-500 bg-amber-50";case"completed":return"border-green-500 bg-green-50";default:return"border-gray-500 bg-gray-50"}},v=g=>{const y=new Date(g);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(y)};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-blue-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ve,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-indigo-100 text-sm mt-1",children:a})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[u&&e.jsxs("div",{className:"flex items-start gap-2 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg mb-4",children:[e.jsx(Ge,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-800",children:u})]}),o?e.jsx("div",{className:"text-center py-8 text-gray-500",children:" ..."}):n.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"   "}):e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-[29px] top-0 bottom-0 w-0.5 bg-gradient-to-b from-indigo-200 to-blue-200"}),e.jsx("div",{className:"space-y-4",children:n.map((g,y)=>e.jsxs("div",{className:"relative pl-16",children:[e.jsx("div",{className:"absolute left-0 top-0 w-14 h-14 bg-white border-4 border-indigo-200 rounded-full flex items-center justify-center",children:f(g.type)}),e.jsxs("div",{className:`border-l-4 rounded-lg p-4 ${p(g.type)}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:g.description}),e.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:v(g.created_at)})]}),g.user&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-2",children:[e.jsx(lt,{className:"w-4 h-4"}),e.jsx("span",{children:g.user.first_name||g.user.username||""})]}),g.details&&e.jsx("div",{className:"mt-2 text-sm text-gray-700 bg-white/50 rounded p-2",children:e.jsx("pre",{className:"whitespace-pre-wrap font-sans",children:JSON.stringify(g.details,null,2)})})]}),y<n.length-1&&e.jsx("div",{className:"absolute left-[29px] top-14 w-0.5 h-4 bg-indigo-200"})]},g.id))})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center flex-shrink-0",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[" : ",n.length]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})}):null},oW=({isOpen:s,onClose:t,project:r,onSaved:a})=>{const[n,i]=j.useState({name:"",status:"",project_cost:0,executor_cost:0,deadline:""}),[o,c]=j.useState(!1),[u,h]=j.useState("");j.useEffect(()=>{s&&r&&(i({name:r.name||"",status:r.status||"",project_cost:r.project_cost||0,executor_cost:r.executor_cost||0,deadline:r.deadline?r.deadline.split("T")[0]:""}),h(""))},[s,r]),j.useEffect(()=>{s?document.body.style.overflow="hidden":document.body.style.overflow=""},[s]);const m=async()=>{if(r){if(!n.name.trim()){h("  ");return}c(!0),h("");try{const f=await fetch(`http://localhost:8001/admin/api/projects/${r.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(n)});if(f.ok)a(),t();else{const p=await f.json();h(p.message||" ")}}catch{h("   ")}finally{c(!1)}}};return!s||!r?null:e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-yellow-600 to-orange-600 text-white px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ga,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsxs("p",{className:"text-yellow-100 text-sm mt-1",children:[" #",r.id]})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:n.name,onChange:f=>i({...n,name:f.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-yellow-500 focus:ring-2 focus:ring-yellow-200 outline-none transition-all",placeholder:" "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:n.status,onChange:f=>i({...n,status:f.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-yellow-500 focus:ring-2 focus:ring-yellow-200 outline-none transition-all",placeholder:" "})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  ()"}),e.jsx("input",{type:"number",value:n.project_cost,onChange:f=>i({...n,project_cost:Number(f.target.value)||0}),min:"0",step:"100",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-yellow-500 focus:ring-2 focus:ring-yellow-200 outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  ()"}),e.jsx("input",{type:"number",value:n.executor_cost,onChange:f=>i({...n,executor_cost:Number(f.target.value)||0}),min:"0",step:"100",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-yellow-500 focus:ring-2 focus:ring-yellow-200 outline-none transition-all"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"date",value:n.deadline,onChange:f=>i({...n,deadline:f.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-yellow-500 focus:ring-2 focus:ring-yellow-200 outline-none transition-all"})]}),e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:" :"}),e.jsxs("span",{className:"text-2xl font-bold text-green-600",children:[(n.project_cost-n.executor_cost).toLocaleString("ru-RU")," "]})]})}),u&&e.jsxs("div",{className:"flex items-start gap-2 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg",children:[e.jsx(Ge,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-800",children:u})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex gap-3",children:[e.jsxs("button",{type:"button",onClick:m,disabled:o||!n.name.trim(),className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-yellow-600 to-orange-600 text-white rounded-lg hover:from-yellow-700 hover:to-orange-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Aa,{className:"w-5 h-5"}),o?"...":""]}),e.jsx("button",{type:"button",onClick:t,disabled:o,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold disabled:opacity-50",children:""})]})]})})},cW=({isOpen:s,onClose:t,onConfirm:r,title:a,message:n,confirmText:i="",cancelText:o="",type:c="warning",loading:u=!1})=>{if(j.useEffect(()=>{if(s){const f=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${f}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const f=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(f||"0")*-1)}},[s]),j.useEffect(()=>{if(!s)return;const f=p=>{p.key==="Escape"&&!u?t():p.key==="Enter"&&!u&&r()};return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[s,u,t,r]),!s)return null;const m=(()=>{switch(c){case"danger":return{icon:e.jsx(Tl,{className:"w-12 h-12"}),iconColor:"text-red-600",bgColor:"from-red-600 to-red-700",buttonColor:"from-red-600 to-red-700 hover:from-red-700 hover:to-red-800"};case"warning":return{icon:e.jsx(dr,{className:"w-12 h-12"}),iconColor:"text-yellow-600",bgColor:"from-yellow-600 to-orange-600",buttonColor:"from-yellow-600 to-orange-600 hover:from-yellow-700 hover:to-orange-700"};case"info":return{icon:e.jsx(uE,{className:"w-12 h-12"}),iconColor:"text-blue-600",bgColor:"from-blue-600 to-indigo-600",buttonColor:"from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700"};case"success":return{icon:e.jsx(ut,{className:"w-12 h-12"}),iconColor:"text-green-600",bgColor:"from-green-600 to-emerald-600",buttonColor:"from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700"}}})();return e.jsxs("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden animate-scale-in",children:[e.jsx("div",{className:`bg-gradient-to-r ${m.bgColor} px-6 py-8 flex justify-center`,children:e.jsx("div",{className:"text-white",children:m.icon})}),e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:a}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:n})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex gap-3",children:[e.jsx("button",{type:"button",onClick:t,disabled:u,className:"flex-1 px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:o}),e.jsx("button",{type:"button",onClick:r,disabled:u,className:`flex-1 px-6 py-3 bg-gradient-to-r ${m.buttonColor} text-white rounded-lg transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed`,children:u?"...":i})]}),e.jsxs("div",{className:"px-6 py-2 bg-gray-100 text-xs text-center text-gray-500",children:[e.jsx("kbd",{className:"px-2 py-0.5 bg-white border border-gray-300 rounded",children:"Enter"})," "," "," ",e.jsx("kbd",{className:"px-2 py-0.5 bg-white border border-gray-300 rounded",children:"Esc"})," "]})]}),e.jsx("style",{children:`
        @keyframes scale-in {
          from {
            transform: scale(0.9);
            opacity: 0;
          }
          to {
            transform: scale(1);
            opacity: 1;
          }
        }
        .animate-scale-in {
          animation: scale-in 0.2s ease-out;
        }
      `})]})},dW=({isOpen:s,onClose:t,project:r,onDuplicated:a})=>{const[n,i]=j.useState({copyName:!0,copyDescription:!0,copyFinances:!1,copyExecutor:!1,copyDeadline:!1,copyAttachments:!1,namePrefix:" - "}),[o,c]=j.useState(!1),[u,h]=j.useState("");j.useEffect(()=>{s&&(i({copyName:!0,copyDescription:!0,copyFinances:!1,copyExecutor:!1,copyDeadline:!1,copyAttachments:!1,namePrefix:" - "}),h(""))},[s]),j.useEffect(()=>{if(s){const p=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${p}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const p=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(p||"0")*-1)}},[s]);const m=async()=>{if(r){c(!0),h("");try{const p=await fetch(`http://localhost:8001/admin/api/projects/${r.id}/duplicate`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(n)});if(p.ok)a(),t();else{const v=await p.json();h(v.message||"  ")}}catch{h("   ")}finally{c(!1)}}};if(!s||!r)return null;const f=n.copyName?`${n.namePrefix}${r.name}`:" ";return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-violet-600 to-purple-600 text-white px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(er,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsxs("p",{className:"text-violet-100 text-sm mt-1",children:[" #",r.id]})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"text",value:n.namePrefix,onChange:p=>i({...n,namePrefix:p.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 outline-none transition-all",placeholder:" - "}),e.jsx("div",{className:"mt-2 p-3 bg-violet-50 border-l-4 border-violet-500 rounded",children:e.jsxs("p",{className:"text-sm text-violet-900",children:[e.jsx("span",{className:"font-semibold",children:":"})," ",f]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:" ?"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.copyName,onChange:p=>i({...n,copyName:p.target.checked}),className:"w-5 h-5 text-violet-600 rounded focus:ring-2 focus:ring-violet-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:""}),e.jsx("div",{className:"text-xs text-gray-600",children:"   ( )"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.copyDescription,onChange:p=>i({...n,copyDescription:p.target.checked}),className:"w-5 h-5 text-violet-600 rounded focus:ring-2 focus:ring-violet-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:"  "}),e.jsx("div",{className:"text-xs text-gray-600",children:"   "})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.copyFinances,onChange:p=>i({...n,copyFinances:p.target.checked}),className:"w-5 h-5 text-violet-600 rounded focus:ring-2 focus:ring-violet-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:""}),e.jsx("div",{className:"text-xs text-gray-600",children:"    "})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.copyExecutor,onChange:p=>i({...n,copyExecutor:p.target.checked}),className:"w-5 h-5 text-violet-600 rounded focus:ring-2 focus:ring-violet-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:""}),e.jsx("div",{className:"text-xs text-gray-600",children:"   "})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.copyDeadline,onChange:p=>i({...n,copyDeadline:p.target.checked}),className:"w-5 h-5 text-violet-600 rounded focus:ring-2 focus:ring-violet-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:""}),e.jsx("div",{className:"text-xs text-gray-600",children:"  "})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.copyAttachments,onChange:p=>i({...n,copyAttachments:p.target.checked}),className:"w-5 h-5 text-violet-600 rounded focus:ring-2 focus:ring-violet-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:""}),e.jsx("div",{className:"text-xs text-gray-600",children:"  "})]})]})]})]}),u&&e.jsxs("div",{className:"flex items-start gap-2 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg",children:[e.jsx(Ge,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-800",children:u})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex gap-3",children:[e.jsxs("button",{type:"button",onClick:m,disabled:o,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-violet-600 to-purple-600 text-white rounded-lg hover:from-violet-700 hover:to-purple-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(er,{className:"w-5 h-5"}),o?"...":" "]}),e.jsx("button",{type:"button",onClick:t,disabled:o,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold disabled:opacity-50",children:""})]})]})})},uW=({items:s,showHome:t=!0})=>{const r=t?[{label:"",path:"/",icon:e.jsx(dE,{className:"w-4 h-4"})},...s]:s;return e.jsx("nav",{className:"flex items-center gap-2 text-sm",children:r.map((a,n)=>{const i=n===r.length-1;return e.jsxs("div",{className:"flex items-center gap-2",children:[a.path&&!i?e.jsxs(oN,{to:a.path,className:"flex items-center gap-1.5 text-gray-600 hover:text-blue-600 transition-colors font-medium",children:[a.icon,e.jsx("span",{children:a.label})]}):e.jsxs("div",{className:`flex items-center gap-1.5 ${i?"text-gray-900 font-semibold":"text-gray-500"}`,children:[a.icon,e.jsx("span",{children:a.label})]}),!i&&e.jsx(Sn,{className:"w-4 h-4 text-gray-400"})]},n)})})},hW=({isOpen:s,onClose:t,projectId:r,projectName:a})=>{const[n,i]=j.useState([]),[o,c]=j.useState(""),[u,h]=j.useState(null),[m,f]=j.useState(""),[p,v]=j.useState(!1),[g,y]=j.useState(!1),w=j.useRef(null),N=j.useRef(null);j.useEffect(()=>{s&&r&&S()},[s,r]),j.useEffect(()=>{if(s){const C=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${C}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const C=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(C||"0")*-1)}},[s]),j.useEffect(()=>{k()},[n]);const k=()=>{N.current?.scrollIntoView({behavior:"smooth"})},S=async()=>{if(r){v(!0);try{const C=await fetch(`http://localhost:8001/admin/api/projects/${r}/comments`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(C.ok){const A=await C.json();i(A.comments||[])}}catch(C){console.error("Error loading comments:",C)}finally{v(!1)}}},_=async()=>{if(!(!o.trim()||!r)){y(!0);try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/comments`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({text:o})})).ok&&(c(""),await S(),w.current?.focus())}catch(C){console.error("Error sending comment:",C)}finally{y(!1)}}},T=async C=>{if(m.trim())try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/comments/${C}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({text:m})})).ok&&(h(null),f(""),await S())}catch(A){console.error("Error editing comment:",A)}},E=async C=>{if(confirm(" ?"))try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/comments/${C}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&await S()}catch(A){console.error("Error deleting comment:",A)}},z=C=>{C.key==="Enter"&&(C.ctrlKey||C.metaKey)&&_()},O=C=>{const A=new Date(C);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}).format(A)};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Xa,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:""}),e.jsx("p",{className:"text-blue-100 text-sm mt-1",children:a})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4 bg-gray-50",children:[p?e.jsx("div",{className:"text-center py-8 text-gray-500",children:" ..."}):n.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"  .  !"}):n.map(C=>e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-full flex items-center justify-center text-white font-bold",children:e.jsx(lt,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:C.user.first_name||C.user.username}),e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:O(C.created_at)}),C.updated_at&&C.updated_at!==C.created_at&&e.jsx("span",{className:"text-xs text-gray-400 ml-1",children:"()"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>{h(C.id),f(C.text)},className:"p-1 text-blue-600 hover:bg-blue-100 rounded transition-colors",title:"",children:e.jsx(sr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>E(C.id),className:"p-1 text-red-600 hover:bg-red-100 rounded transition-colors",title:"",children:e.jsx(tt,{className:"w-4 h-4"})})]})]}),u===C.id?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:m,onChange:A=>f(A.target.value),className:"flex-1 px-3 py-2 border-2 border-blue-300 rounded-lg focus:border-blue-500 outline-none",autoFocus:!0}),e.jsx("button",{onClick:()=>T(C.id),className:"p-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:e.jsx(is,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{h(null),f("")},className:"p-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:e.jsx(De,{className:"w-4 h-4"})})]}):e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:C.text})]})]})},C.id)),e.jsx("div",{ref:N})]}),e.jsxs("div",{className:"px-6 py-4 bg-white border-t border-gray-200 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-end gap-3",children:[e.jsx("textarea",{ref:w,value:o,onChange:C=>c(C.target.value),onKeyDown:z,className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none resize-none transition-all",placeholder:" ... (Ctrl+Enter  )",rows:2,disabled:g}),e.jsxs("button",{onClick:_,disabled:!o.trim()||g,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 text-white rounded-lg hover:from-blue-700 hover:to-cyan-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(rr,{className:"w-5 h-5"}),g?"...":""]})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[" ",e.jsx("kbd",{className:"px-1 py-0.5 bg-gray-200 rounded",children:"Ctrl+Enter"}),"  "]})]})]})}):null},H0=["#EF4444","#F59E0B","#10B981","#3B82F6","#8B5CF6","#EC4899","#14B8A6","#6B7280"],mW=({isOpen:s,onClose:t,projectId:r,projectName:a,onTagsUpdated:n})=>{const[i,o]=j.useState([]),[c,u]=j.useState([]),[h,m]=j.useState(!1),[f,p]=j.useState(""),[v,g]=j.useState(H0[0]),[y,w]=j.useState(!1);j.useEffect(()=>{s&&r&&(N(),k())},[s,r]),j.useEffect(()=>{s?document.body.style.overflow="hidden":document.body.style.overflow=""},[s]);const N=async()=>{try{const O=await fetch("http://localhost:8001/admin/api/tags",{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(O.ok){const C=await O.json();o(C.tags||[])}}catch(O){console.error("Error loading tags:",O)}},k=async()=>{if(r){w(!0);try{const O=await fetch(`http://localhost:8001/admin/api/projects/${r}/tags`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(O.ok){const C=await O.json();u(C.tags||[])}}catch(O){console.error("Error loading project tags:",O)}finally{w(!1)}}},S=async()=>{if(f.trim())try{(await fetch("http://localhost:8001/admin/api/tags",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({name:f,color:v})})).ok&&(p(""),g(H0[0]),m(!1),await N())}catch(O){console.error("Error creating tag:",O)}},_=async O=>{if(r)try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/tags/${O}`,{method:"POST",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&(await k(),n())}catch(C){console.error("Error adding tag:",C)}},T=async O=>{if(r)try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/tags/${O}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&(await k(),n())}catch(C){console.error("Error removing tag:",C)}};if(!s)return null;const E=new Set(c.map(O=>O.id)),z=i.filter(O=>!E.has(O.id));return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-pink-600 to-rose-600 text-white px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(mi,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-pink-100 text-sm mt-1",children:a})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6 max-h-[600px] overflow-y-auto",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:" "}),y?e.jsx("div",{className:"text-sm text-gray-500",children:"..."}):c.length===0?e.jsx("div",{className:"text-sm text-gray-500 py-4 text-center border-2 border-dashed border-gray-300 rounded-lg",children:"  "}):e.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(O=>e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full text-white text-sm font-medium shadow-md",style:{backgroundColor:O.color},children:[e.jsx("span",{children:O.name}),e.jsx("button",{onClick:()=>T(O.id),className:"hover:bg-white/20 rounded-full p-0.5 transition-colors",children:e.jsx(De,{className:"w-3.5 h-3.5"})})]},O.id))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:" "}),z.length===0?e.jsx("div",{className:"text-sm text-gray-500 py-4 text-center border-2 border-dashed border-gray-300 rounded-lg",children:"   "}):e.jsx("div",{className:"flex flex-wrap gap-2",children:z.map(O=>e.jsxs("button",{onClick:()=>_(O.id),className:"flex items-center gap-2 px-3 py-1.5 rounded-full text-white text-sm font-medium shadow-md hover:opacity-80 transition-opacity",style:{backgroundColor:O.color},children:[e.jsx(We,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:O.name})]},O.id))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"  "}),h?e.jsxs("div",{className:"bg-pink-50 border-2 border-pink-200 rounded-lg p-4 space-y-3",children:[e.jsx("input",{type:"text",value:f,onChange:O=>p(O.target.value),className:"w-full px-4 py-2 border-2 border-pink-300 rounded-lg focus:border-pink-500 focus:ring-2 focus:ring-pink-200 outline-none",placeholder:" ",autoFocus:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-700 mb-2",children:":"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:H0.map(O=>e.jsx("button",{onClick:()=>g(O),className:`w-8 h-8 rounded-full border-2 transition-all ${v===O?"border-gray-900 scale-110":"border-gray-300"}`,style:{backgroundColor:O}},O))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:S,disabled:!f.trim(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-semibold",children:[e.jsx(is,{className:"w-4 h-4"}),""]}),e.jsx("button",{onClick:()=>{m(!1),p(""),g(H0[0])},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-semibold",children:""})]})]}):e.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-pink-600 to-rose-600 text-white rounded-lg hover:from-pink-700 hover:to-rose-700 transition-all font-semibold text-sm",children:[e.jsx(We,{className:"w-4 h-4"})," "]})]})]}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end",children:e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})})]})})},xW=({projects:s})=>{const t=fW(s);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(q0,{icon:e.jsx(Vr,{className:"w-6 h-6"}),label:" ",value:t.totalProjects,color:"blue"}),e.jsx(q0,{icon:e.jsx(Qe,{className:"w-6 h-6"}),label:" ",value:`${t.totalCost.toLocaleString("ru-RU")} `,color:"green"}),e.jsx(q0,{icon:e.jsx(xt,{className:"w-6 h-6"}),label:" ",value:`${t.totalProfit.toLocaleString("ru-RU")} `,color:"purple"}),e.jsx(q0,{icon:e.jsx(ut,{className:"w-6 h-6"}),label:" ",value:t.fullyPaidCount,color:"emerald"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Vr,{className:"w-5 h-5 text-indigo-600"}),"  "]}),e.jsx("div",{className:"space-y-3",children:Object.entries(t.statusDistribution).map(([r,a])=>{const n=a/t.totalProjects*100;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:r||" "}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[a," (",n.toFixed(0),"%)"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 h-2.5 rounded-full transition-all duration-500",style:{width:`${n}%`}})})]},r)})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(it,{className:"w-5 h-5 text-blue-600"})," "]}),e.jsx("div",{className:"space-y-4",children:t.executorStats.slice(0,5).map(r=>e.jsxs("div",{className:"border-l-4 border-blue-500 pl-4 py-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:r.name}),e.jsxs("span",{className:"text-sm text-gray-600",children:[r.projectCount," "]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:":"}),e.jsxs("span",{className:"ml-1 font-semibold text-blue-600",children:[r.totalCost.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:":"}),e.jsxs("span",{className:"ml-1 font-semibold text-purple-600",children:[r.totalProfit.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:":"}),e.jsxs("span",{className:"ml-1 font-semibold text-green-600",children:[Math.round(r.totalProfit/r.projectCount).toLocaleString("ru-RU")," "]})]})]})]},r.name))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Qe,{className:"w-5 h-5 text-green-600"})," "]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 rounded-lg p-4",children:[e.jsx("div",{className:"text-xs text-red-600 font-semibold mb-1",children:" "}),e.jsx("div",{className:"text-2xl font-bold text-red-900",children:t.paymentStatus.unpaid}),e.jsxs("div",{className:"text-xs text-red-600 mt-1",children:[(t.paymentStatus.unpaid/t.totalProjects*100).toFixed(0),"%"]})]}),e.jsxs("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 rounded-lg p-4",children:[e.jsx("div",{className:"text-xs text-yellow-600 font-semibold mb-1",children:" "}),e.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:t.paymentStatus.partial}),e.jsxs("div",{className:"text-xs text-yellow-600 mt-1",children:[(t.paymentStatus.partial/t.totalProjects*100).toFixed(0),"%"]})]}),e.jsxs("div",{className:"bg-green-50 border-l-4 border-green-500 rounded-lg p-4",children:[e.jsx("div",{className:"text-xs text-green-600 font-semibold mb-1",children:" "}),e.jsx("div",{className:"text-2xl font-bold text-green-900",children:t.paymentStatus.paid}),e.jsxs("div",{className:"text-xs text-green-600 mt-1",children:[(t.paymentStatus.paid/t.totalProjects*100).toFixed(0),"%"]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl shadow-lg p-6 text-white",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:" "}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-indigo-200 mb-1",children:" "}),e.jsxs("div",{className:"text-xl font-bold",children:[t.totalCost.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-indigo-200 mb-1",children:""}),e.jsxs("div",{className:"text-xl font-bold",children:[t.totalPaid.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-indigo-200 mb-1",children:""}),e.jsxs("div",{className:"text-xl font-bold",children:[t.totalExecutorCost.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-indigo-200 mb-1",children:""}),e.jsxs("div",{className:"text-xl font-bold",children:[t.totalProfit.toLocaleString("ru-RU")," "]})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-indigo-400",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"   :"}),e.jsxs("span",{className:"font-bold",children:[Math.round(t.totalProfit/t.totalProjects||0).toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm mt-2",children:[e.jsx("span",{children:" :"}),e.jsxs("span",{className:"font-bold",children:[(t.totalProfit/t.totalCost*100||0).toFixed(1),"%"]})]})]})]})]})},q0=({icon:s,label:t,value:r,color:a})=>{const n={blue:"from-blue-500 to-blue-600",green:"from-green-500 to-green-600",purple:"from-purple-500 to-purple-600",emerald:"from-emerald-500 to-emerald-600"};return e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsx("div",{className:`inline-flex p-3 rounded-lg bg-gradient-to-r ${n[a]} text-white mb-4`,children:s}),e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:t}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r})]})},fW=s=>{const t=s.length,r=s.reduce((m,f)=>m+(f.project_cost||0),0),a=s.reduce((m,f)=>m+(f.paid_total||0),0),n=s.reduce((m,f)=>m+(f.executor_cost||0),0),i=r-n,o={};s.forEach(m=>{const f=m.status||" ";o[f]=(o[f]||0)+1});const c={unpaid:0,partial:0,paid:0};s.forEach(m=>{const f=m.paid_total||0,p=m.project_cost||0;f===0?c.unpaid++:f<p?c.partial++:c.paid++});const u={};s.forEach(m=>{if(m.assigned_to){const f=m.assigned_to.username||m.assigned_to.first_name||" ";u[f]||(u[f]={name:f,projectCount:0,totalCost:0,totalProfit:0}),u[f].projectCount++,u[f].totalCost+=m.project_cost||0,u[f].totalProfit+=(m.project_cost||0)-(m.executor_cost||0)}});const h=Object.values(u).sort((m,f)=>f.totalProfit-m.totalProfit);return{totalProjects:t,totalCost:r,totalPaid:a,totalExecutorCost:n,totalProfit:i,fullyPaidCount:c.paid,statusDistribution:o,paymentStatus:c,executorStats:h}},pW=({isOpen:s,onClose:t,projects:r,onProjectClick:a})=>{const[n,i]=j.useState(new Date),[o,c]=j.useState("month"),u=j.useMemo(()=>{const k=n.getFullYear(),S=n.getMonth(),_=new Date(k,S,1),E=new Date(k,S+1,0).getDate(),z=_.getDay(),O=[];for(let C=0;C<z;C++)O.push(null);for(let C=1;C<=E;C++)O.push(new Date(k,S,C));return O},[n]),h=j.useMemo(()=>{const k=new Map;return r.forEach(S=>{if(S.deadline){const _=S.deadline.slice(0,10);k.has(_)||k.set(_,[]),k.get(_).push(S)}}),k},[r]),m=k=>{const S=k.getFullYear(),_=String(k.getMonth()+1).padStart(2,"0"),T=String(k.getDate()).padStart(2,"0");return`${S}-${_}-${T}`},f=()=>{i(new Date(n.getFullYear(),n.getMonth()-1,1))},p=()=>{i(new Date(n.getFullYear(),n.getMonth()+1,1))},v=()=>{i(new Date)},g=k=>{const S=new Date;return k.getDate()===S.getDate()&&k.getMonth()===S.getMonth()&&k.getFullYear()===S.getFullYear()},y=k=>({new:"bg-blue-500",review:"bg-orange-500",accepted:"bg-purple-500",in_progress:"bg-yellow-500",testing:"bg-green-500",completed:"bg-green-600",cancelled:"bg-red-500",on_hold:"bg-gray-500"})[k]||"bg-gray-500";if(!s)return null;const w=["","","","","","","","","","","",""],N=["","","","","","",""];return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(wt,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsxs("p",{className:"text-indigo-100 text-sm mt-1",children:[w[n.getMonth()]," ",n.getFullYear()]})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:f,className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",title:" ",children:e.jsx(aE,{className:"w-5 h-5"})}),e.jsx("button",{onClick:v,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-semibold text-sm",children:""}),e.jsx("button",{onClick:p,className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",title:" ",children:e.jsx(Sn,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>c("month"),className:`px-4 py-2 rounded-lg font-semibold text-sm transition-colors ${o==="month"?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:""}),e.jsx("button",{onClick:()=>c("week"),className:`px-4 py-2 rounded-lg font-semibold text-sm transition-colors ${o==="week"?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:""})]})]}),e.jsxs("div",{className:"flex-1 overflow-auto p-6",children:[e.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2",children:N.map(k=>e.jsx("div",{className:"text-center font-bold text-gray-600 text-sm py-2",children:k},k))}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:u.map((k,S)=>{if(!k)return e.jsx("div",{className:"aspect-square"},`empty-${S}`);const _=m(k),T=h.get(_)||[],E=g(k);return e.jsxs("div",{className:`aspect-square border-2 rounded-lg p-2 flex flex-col ${E?"border-indigo-500 bg-indigo-50":"border-gray-200 bg-white hover:bg-gray-50"} transition-colors`,children:[e.jsx("div",{className:`text-sm font-semibold mb-1 ${E?"text-indigo-600":"text-gray-900"}`,children:k.getDate()}),T.length>0&&e.jsxs("div",{className:"flex-1 overflow-hidden",children:[T.slice(0,3).map(z=>e.jsx("button",{onClick:()=>a(z.id),className:`w-full text-left px-2 py-1 mb-1 rounded text-xs font-medium truncate ${y(z.status)} text-white hover:opacity-80 transition-opacity`,title:z.title,children:z.title},z.id)),T.length>3&&e.jsxs("div",{className:"text-xs text-gray-500 text-center mt-1",children:["+",T.length-3," "]})]})]},S)})})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex flex-wrap items-center gap-4",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:":"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-blue-500"}),e.jsx("span",{className:"text-xs text-gray-600",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-yellow-500"}),e.jsx("span",{className:"text-xs text-gray-600",children:" "})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-green-500"}),e.jsx("span",{className:"text-xs text-gray-600",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-green-600"}),e.jsx("span",{className:"text-xs text-gray-600",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-red-500"}),e.jsx("span",{className:"text-xs text-gray-600",children:""})]})]})]})})},gW=({isOpen:s,onClose:t,onResultClick:r})=>{const[a,n]=j.useState(""),[i,o]=j.useState([]),[c,u]=j.useState(!1),[h,m]=j.useState({projects:!0,tasks:!0,comments:!0,files:!0}),[f,p]=j.useState({title:!0,description:!0,comments:!0,tags:!0}),v=j.useRef(null),g=j.useRef();j.useEffect(()=>{if(s){v.current?.focus();const _=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${_}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const _=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(_||"0")*-1)}return()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow=""}},[s]),j.useEffect(()=>(a.length>=2?(g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{y()},300)):o([]),()=>{g.current&&clearTimeout(g.current)}),[a,h,f]);const y=async()=>{u(!0);try{const _=await fetch("http://localhost:8001/admin/api/search",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({query:a,filters:h,searchIn:f})});if(_.ok){const T=await _.json();o(T.results||[])}}catch(_){console.error("Search error:",_),o(w(a))}finally{u(!1)}},w=_=>[{id:1,type:"project",title:" CRM ",description:" CRM    ",matchedField:"title",matchedText:" <mark>CRM</mark> ",relevance:95,metadata:{status:"in_progress",client:' ""',cost:15e4}},{id:2,type:"task",title:"  ",description:" PostgreSQL  CRM",matchedField:"description",matchedText:" PostgreSQL  <mark>CRM</mark>",relevance:80,metadata:{status:"completed"}}].filter(E=>E.title.toLowerCase().includes(_.toLowerCase())),N=_=>({__html:_}),k=_=>{switch(_){case"project":return e.jsx(Ue,{className:"w-5 h-5 text-blue-600"});case"task":return e.jsx(Ue,{className:"w-5 h-5 text-green-600"});case"comment":return e.jsx(Ue,{className:"w-5 h-5 text-purple-600"});case"file":return e.jsx(Ue,{className:"w-5 h-5 text-orange-600"});default:return e.jsx(Ue,{className:"w-5 h-5 text-gray-600"})}},S=_=>({project:"",task:"",comment:"",file:""})[_]||_;return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] flex items-start justify-center pt-20",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full mx-4 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Us,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{ref:v,type:"text",value:a,onChange:_=>n(_.target.value),placeholder:"  , , ...",className:"w-full pl-12 pr-12 py-4 bg-gray-50 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none text-lg transition-all"}),a&&e.jsx("button",{onClick:()=>n(""),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"mt-4 flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(wr,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:" :"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h.projects,onChange:_=>m({...h,projects:_.target.checked}),className:"w-4 h-4 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:""})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h.tasks,onChange:_=>m({...h,tasks:_.target.checked}),className:"w-4 h-4 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:""})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h.comments,onChange:_=>m({...h,comments:_.target.checked}),className:"w-4 h-4 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:""})]})]})]}),e.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:c?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-blue-600 border-t-transparent"}),e.jsx("p",{className:"text-gray-600 mt-4",children:"..."})]}):a.length<2?e.jsxs("div",{className:"p-12 text-center text-gray-500",children:[e.jsx(Us,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"  2   "})]}):i.length===0?e.jsxs("div",{className:"p-12 text-center text-gray-500",children:[e.jsx(Us,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsxs("p",{children:['     "',a,'"']})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:i.map(_=>e.jsx("button",{onClick:()=>{r(_.type,_.id),t()},className:"w-full p-4 hover:bg-gray-50 transition-colors text-left",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:k(_.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xs font-semibold px-2 py-0.5 bg-gray-200 text-gray-700 rounded",children:S(_.type)}),e.jsxs("span",{className:"text-xs text-gray-500",children:[": ",_.relevance,"%"]})]}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:_.title}),e.jsx("div",{className:"text-sm text-gray-600 mb-2 line-clamp-2",dangerouslySetInnerHTML:N(_.matchedText)}),_.metadata&&e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[_.metadata.client&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(lt,{className:"w-3 h-3"}),_.metadata.client]}),_.metadata.cost&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Qe,{className:"w-3 h-3"}),_.metadata.cost.toLocaleString(),""]}),_.metadata.deadline&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(wt,{className:"w-3 h-3"}),_.metadata.deadline]})]})]})]})},`${_.type}-${_.id}`))})}),e.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-xs text-gray-500",children:[e.jsx("div",{children:i.length>0&&e.jsxs("span",{children:[" : ",e.jsx("strong",{children:i.length})]})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{children:[e.jsx("kbd",{className:"px-2 py-1 bg-white border border-gray-300 rounded",children:"Esc"})," "]}),e.jsxs("span",{children:[e.jsx("kbd",{className:"px-2 py-1 bg-white border border-gray-300 rounded",children:""}),e.jsx("kbd",{className:"px-2 py-1 bg-white border border-gray-300 rounded ml-1",children:""})," ",""]})]})]})]})}):null},bW=({isOpen:s,onClose:t,projectId:r,projectName:a})=>{const[n,i]=j.useState([]),[o,c]=j.useState(!1),[u,h]=j.useState(new Set),[m,f]=j.useState("all");j.useEffect(()=>{s&&r&&p()},[s,r]),j.useEffect(()=>{if(s){const T=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${T}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const T=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(T||"0")*-1)}},[s]);const p=async()=>{if(r){c(!0);try{const T=await fetch(`http://localhost:8001/admin/api/projects/${r}/history`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(T.ok){const E=await T.json();i(E.history||[])}else i(v())}catch(T){console.error("Error loading history:",T),i(v())}finally{c(!1)}}},v=()=>[{id:1,userId:1,userName:"",action:"updated",changes:[{field:"status",oldValue:"new",newValue:"in_progress",type:"modified"},{field:"assigned_to",oldValue:null,newValue:" ",type:"added"}],timestamp:new Date(Date.now()-36e5).toISOString(),ipAddress:"192.168.1.1"},{id:2,userId:1,userName:"",action:"updated",changes:[{field:"estimated_cost",oldValue:"100000",newValue:"150000",type:"modified"},{field:"description",oldValue:"  ",newValue:"     ",type:"modified"}],timestamp:new Date(Date.now()-72e5).toISOString(),ipAddress:"192.168.1.1"},{id:3,userId:1,userName:"",action:"created",changes:[{field:"title",oldValue:null,newValue:a,type:"added"},{field:"status",oldValue:null,newValue:"new",type:"added"}],timestamp:new Date(Date.now()-864e5).toISOString(),ipAddress:"192.168.1.1"}],g=T=>{const E=new Set(u);E.has(T)?E.delete(T):E.add(T),h(E)},y=T=>{const E=new Date(T);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(E)},w=T=>{switch(T){case"created":return"bg-green-100 text-green-700";case"updated":return"bg-blue-100 text-blue-700";case"deleted":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},N=T=>({created:"",updated:"",deleted:""})[T]||T,k=T=>({title:"",description:"",status:"",assigned_to:"",estimated_cost:"",deadline:"",priority:"",complexity:""})[T]||T,S=T=>T.type==="added"?e.jsxs("div",{className:"bg-green-50 border-l-4 border-green-500 p-3 rounded",children:[e.jsx("div",{className:"text-sm font-semibold text-green-700 mb-1",children:":"}),e.jsx("div",{className:"text-sm text-green-900 font-mono bg-green-100 p-2 rounded",children:T.newValue})]}):T.type==="removed"?e.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-3 rounded",children:[e.jsx("div",{className:"text-sm font-semibold text-red-700 mb-1",children:":"}),e.jsx("div",{className:"text-sm text-red-900 font-mono bg-red-100 p-2 rounded line-through",children:T.oldValue})]}):T.type==="modified"?e.jsxs("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 p-3 rounded",children:[e.jsx("div",{className:"text-sm font-semibold text-yellow-700 mb-2",children:":"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:":"}),e.jsx("div",{className:"text-sm text-gray-900 font-mono bg-red-100 p-2 rounded",children:T.oldValue||"()"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:":"}),e.jsx("div",{className:"text-sm text-gray-900 font-mono bg-green-100 p-2 rounded",children:T.newValue||"()"})]})]})]}):null,_=m==="all"?n:n.filter(T=>T.action===m);return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fB,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-purple-100 text-sm mt-1",children:a})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:":"}),e.jsx("button",{onClick:()=>f("all"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${m==="all"?"bg-purple-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:""}),e.jsx("button",{onClick:()=>f("created"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${m==="created"?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:""}),e.jsx("button",{onClick:()=>f("updated"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${m==="updated"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:""}),e.jsx("button",{onClick:()=>f("deleted"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${m==="deleted"?"bg-red-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:""})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:o?e.jsx("div",{className:"text-center py-8 text-gray-500",children:" ..."}):_.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"  "}):e.jsx("div",{className:"space-y-4",children:_.map(T=>{const E=u.has(T.id);return e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl overflow-hidden",children:[e.jsxs("button",{onClick:()=>g(T.id),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[E?e.jsx(Ci,{className:"w-5 h-5 text-gray-400"}):e.jsx(Sn,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{className:`px-3 py-1 rounded-lg text-xs font-bold ${w(T.action)}`,children:N(T.action)}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(lt,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:T.userName})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(wt,{className:"w-4 h-4"}),e.jsx("span",{children:y(T.timestamp)})]})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[T.changes.length," "]})]}),E&&e.jsxs("div",{className:"px-4 pb-4 pt-2 bg-gray-50 border-t border-gray-200",children:[e.jsx("div",{className:"space-y-3",children:T.changes.map((z,O)=>e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:k(z.field)}),S(z)]},O))}),T.ipAddress&&e.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-300 text-xs text-gray-500",children:["IP : ",T.ipAddress]})]})]},T.id)})})}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[" : ",e.jsx("strong",{children:_.length})]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})}):null},Tk=[{value:"project.created",label:" "},{value:"project.updated",label:" "},{value:"project.deleted",label:" "},{value:"project.status_changed",label:" "},{value:"task.created",label:" "},{value:"task.completed",label:" "},{value:"payment.received",label:" "},{value:"comment.added",label:" "}],yW=({isOpen:s,onClose:t,projectId:r})=>{const[a,n]=j.useState([]),[i,o]=j.useState(!1),[c,u]=j.useState(!1),[h,m]=j.useState(null),[f,p]=j.useState(null),[v,g]=j.useState({name:"",url:"",events:[],active:!0,secret:""});j.useEffect(()=>{if(s){y();const A=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${A}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const A=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(A||"0")*-1)}},[s]);const y=async()=>{o(!0);try{const A=r?`http://localhost:8001/admin/api/projects/${r}/webhooks`:"http://localhost:8001/admin/api/webhooks",X=await fetch(A,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(X.ok){const I=await X.json();n(I.webhooks||[])}else n(w())}catch(A){console.error("Error loading webhooks:",A),n(w())}finally{o(!1)}},w=()=>[{id:1,name:"Slack ",url:"https://hooks.slack.com/services/T00000000/B00000000/XXXXXXXXXXXX",events:["project.status_changed","task.completed"],active:!0,failureCount:0,lastTriggered:new Date(Date.now()-36e5).toISOString()},{id:2,name:"Telegram ",url:"https://api.telegram.org/bot123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11",events:["payment.received","comment.added"],active:!0,failureCount:2,lastTriggered:new Date(Date.now()-72e5).toISOString()}],N=async()=>{if(!v.name||!v.url||v.events.length===0){alert("   ");return}try{const A=r?`http://localhost:8001/admin/api/projects/${r}/webhooks`:"http://localhost:8001/admin/api/webhooks";(await fetch(A,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(v)})).ok&&(await y(),E())}catch(A){console.error("Error creating webhook:",A)}},k=async A=>{try{const X=r?`http://localhost:8001/admin/api/projects/${r}/webhooks/${A}`:`http://localhost:8001/admin/api/webhooks/${A}`;(await fetch(X,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(v)})).ok&&(await y(),m(null),E())}catch(X){console.error("Error updating webhook:",X)}},S=async A=>{if(confirm(" webhook?"))try{const X=r?`http://localhost:8001/admin/api/projects/${r}/webhooks/${A}`:`http://localhost:8001/admin/api/webhooks/${A}`;(await fetch(X,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&await y()}catch(X){console.error("Error deleting webhook:",X)}},_=async A=>{p(A);try{const X=r?`http://localhost:8001/admin/api/projects/${r}/webhooks/${A}/test`:`http://localhost:8001/admin/api/webhooks/${A}/test`;(await fetch(X,{method:"POST",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok?alert(" webhook  !"):alert("  webhook")}catch(X){console.error("Error testing webhook:",X),alert("  webhook")}finally{p(null)}},T=async(A,X)=>{try{const I=r?`http://localhost:8001/admin/api/projects/${r}/webhooks/${A}/toggle`:`http://localhost:8001/admin/api/webhooks/${A}/toggle`;(await fetch(I,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({active:!X})})).ok&&await y()}catch(I){console.error("Error toggling webhook:",I)}},E=()=>{g({name:"",url:"",events:[],active:!0,secret:""}),u(!1),m(null)},z=A=>{g({name:A.name,url:A.url,events:A.events,active:A.active,secret:A.secret||""}),m(A.id),u(!0)},O=A=>{v.events.includes(A)?g({...v,events:v.events.filter(X=>X!==A)}):g({...v,events:[...v.events,A]})},C=A=>{const X=new Date(A);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}).format(X)};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-5xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-600 to-red-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ga,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" Webhooks"}),e.jsx("p",{className:"text-orange-100 text-sm mt-1",children:"   "})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[c?e.jsxs("div",{className:"bg-orange-50 border-2 border-orange-200 rounded-xl p-6 mb-6",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-900 mb-4",children:h?" webhook":"  webhook"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:v.name,onChange:A=>g({...v,name:A.target.value}),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-orange-500 outline-none",placeholder:": Slack "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"URL *"}),e.jsx("input",{type:"url",value:v.url,onChange:A=>g({...v,url:A.target.value}),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-orange-500 outline-none font-mono text-sm",placeholder:"https://hooks.example.com/webhook"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" *"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Tk.map(A=>e.jsxs("label",{className:"flex items-center gap-2 p-3 border-2 border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:v.events.includes(A.value),onChange:()=>O(A.value),className:"w-4 h-4 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:A.label})]},A.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Secret ()"}),e.jsx("input",{type:"text",value:v.secret,onChange:A=>g({...v,secret:A.target.value}),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-orange-500 outline-none font-mono text-sm",placeholder:"    "})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"active",checked:v.active,onChange:A=>g({...v,active:A.target.checked}),className:"w-4 h-4 rounded"}),e.jsx("label",{htmlFor:"active",className:"text-sm font-medium text-gray-700",children:""})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx("button",{onClick:()=>h?k(h):N(),className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-semibold",children:h?"":""}),e.jsx("button",{onClick:E,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-semibold",children:""})]})]})]}):e.jsxs("button",{onClick:()=>u(!0),className:"w-full px-4 py-3 mb-6 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-xl hover:from-orange-700 hover:to-red-700 transition-all font-semibold flex items-center justify-center gap-2",children:[e.jsx(We,{className:"w-5 h-5"})," webhook"]}),i?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"..."}):a.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Ga,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"Webhooks  "})]}):e.jsx("div",{className:"space-y-4",children:a.map(A=>e.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-900",children:A.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[A.active?e.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded text-xs font-bold flex items-center gap-1",children:[e.jsx(ut,{className:"w-3 h-3"}),""]}):e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs font-bold",children:""}),A.failureCount>0&&e.jsxs("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded text-xs font-bold flex items-center gap-1",children:[e.jsx(Ge,{className:"w-3 h-3"}),A.failureCount," "]})]})]}),e.jsx("div",{className:"text-sm text-gray-600 font-mono bg-gray-100 px-3 py-2 rounded mb-2",children:A.url}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:A.events.map(X=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs font-medium",children:Tk.find(I=>I.value===X)?.label||X},X))}),A.lastTriggered&&e.jsxs("div",{className:"text-xs text-gray-500",children:[" : ",C(A.lastTriggered)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>T(A.id,A.active),className:`p-2 rounded-lg transition-colors ${A.active?"bg-gray-100 hover:bg-gray-200 text-gray-700":"bg-green-100 hover:bg-green-200 text-green-700"}`,title:A.active?"":"",children:e.jsx(is,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>_(A.id),disabled:f===A.id,className:"p-2 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-lg transition-colors disabled:opacity-50",title:"",children:e.jsx(Ga,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>z(A),className:"p-2 bg-yellow-100 hover:bg-yellow-200 text-yellow-700 rounded-lg transition-colors",title:"",children:e.jsx(sr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>S(A.id),className:"p-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg transition-colors",title:"",children:e.jsx(tt,{className:"w-4 h-4"})})]})]})},A.id))})]}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end",children:e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})})]})}):null},Ek=[{method:"GET",path:"/admin/api/projects",description:"   ",parameters:[{name:"archived",type:"boolean",required:!1,description:"  "},{name:"status",type:"string",required:!1,description:"  "}],response:{statusCode:200,contentType:"application/json",example:JSON.stringify({projects:[{id:1,title:" 1",status:"in_progress",estimated_cost:1e5}]},null,2)},authentication:!0},{method:"GET",path:"/admin/api/projects/{id}",description:"   ",parameters:[{name:"id",type:"integer",required:!0,description:"ID "}],response:{statusCode:200,contentType:"application/json",example:JSON.stringify({id:1,title:" 1",description:" ",status:"in_progress",estimated_cost:1e5,created_at:"2024-01-01T00:00:00Z"},null,2)},authentication:!0},{method:"POST",path:"/admin/api/projects",description:"  ",requestBody:{contentType:"application/json",example:JSON.stringify({title:" ",description:" ",project_type:"",status:"new",complexity:"medium",estimated_cost:1e5},null,2)},response:{statusCode:201,contentType:"application/json",example:JSON.stringify({id:1,title:" ",status:"new",created_at:"2024-01-01T00:00:00Z"},null,2)},authentication:!0},{method:"PUT",path:"/admin/api/projects/{id}",description:" ",parameters:[{name:"id",type:"integer",required:!0,description:"ID "}],requestBody:{contentType:"application/json",example:JSON.stringify({title:" ",status:"in_progress"},null,2)},response:{statusCode:200,contentType:"application/json",example:JSON.stringify({success:!0,message:" "},null,2)},authentication:!0},{method:"DELETE",path:"/admin/api/projects/{id}",description:" ",parameters:[{name:"id",type:"integer",required:!0,description:"ID "}],response:{statusCode:204,contentType:"application/json",example:JSON.stringify({success:!0,message:" "},null,2)},authentication:!0}],vW=({isOpen:s,onClose:t})=>{const[r,a]=j.useState(new Set),[n,i]=j.useState(null),[o,c]=j.useState("all"),u=f=>{const p=new Set(r);p.has(f)?p.delete(f):p.add(f),a(p)},h=(f,p)=>{navigator.clipboard.writeText(f).then(()=>{i(p),setTimeout(()=>i(null),2e3)})},m=f=>({GET:"bg-blue-100 text-blue-700",POST:"bg-green-100 text-green-700",PUT:"bg-yellow-100 text-yellow-700",DELETE:"bg-red-100 text-red-700",PATCH:"bg-purple-100 text-purple-700"})[f]||"bg-gray-100 text-gray-700";return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-cyan-600 to-blue-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(iE,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"API "}),e.jsx("p",{className:"text-cyan-100 text-sm mt-1",children:"  REST API "})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:":"}),e.jsx("button",{onClick:()=>c("all"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${o==="all"?"bg-cyan-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:""}),e.jsx("button",{onClick:()=>c("projects"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${o==="projects"?"bg-cyan-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:""}),e.jsx("button",{onClick:()=>c("tasks"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${o==="tasks"?"bg-cyan-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:""}),e.jsx("button",{onClick:()=>c("users"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${o==="users"?"bg-cyan-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:""})]})}),e.jsx("div",{className:"px-6 py-4 bg-blue-50 border-b border-blue-200",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Base URL:"}),e.jsx("code",{className:"ml-2 px-2 py-1 bg-white border border-gray-300 rounded text-xs",children:"http://localhost:8001"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Authentication:"}),e.jsx("code",{className:"ml-2 px-2 py-1 bg-white border border-gray-300 rounded text-xs",children:"Basic Auth (admin:qwerty123)"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("div",{className:"space-y-4",children:Ek.map((f,p)=>{const v=r.has(f.path),g=n===f.path;return e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl overflow-hidden",children:[e.jsxs("button",{onClick:()=>u(f.path),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[v?e.jsx(Ci,{className:"w-5 h-5 text-gray-400"}):e.jsx(Sn,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{className:`px-3 py-1 rounded-lg text-xs font-bold ${m(f.method)}`,children:f.method}),e.jsx("code",{className:"text-sm font-mono text-gray-900",children:f.path}),f.authentication&&e.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 rounded text-xs font-medium",children:" Auth"})]}),e.jsx("div",{className:"text-sm text-gray-600",children:f.description})]}),v&&e.jsxs("div",{className:"px-4 pb-4 pt-2 bg-gray-50 border-t border-gray-200",children:[f.parameters&&f.parameters.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"text-sm font-bold text-gray-900 mb-2",children:":"}),e.jsx("div",{className:"space-y-2",children:f.parameters.map((y,w)=>e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("code",{className:"text-sm font-mono font-bold text-blue-600",children:y.name}),e.jsx("span",{className:"text-xs text-gray-500",children:y.type}),y.required&&e.jsx("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 rounded text-xs font-bold",children:"required"})]}),e.jsx("div",{className:"text-sm text-gray-600",children:y.description})]},w))})]}),f.requestBody&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h5",{className:"text-sm font-bold text-gray-900",children:"Request Body:"}),e.jsx("button",{onClick:()=>h(f.requestBody.example,f.path),className:"p-1 hover:bg-gray-200 rounded transition-colors",title:"",children:g?e.jsx(is,{className:"w-4 h-4 text-green-600"}):e.jsx(er,{className:"w-4 h-4 text-gray-600"})})]}),e.jsx("div",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto",children:e.jsx("pre",{className:"text-xs font-mono",children:f.requestBody.example})})]}),f.response&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h5",{className:"text-sm font-bold text-gray-900",children:["Response (",f.response.statusCode,"):"]}),e.jsx("button",{onClick:()=>h(f.response.example,f.path+"-response"),className:"p-1 hover:bg-gray-200 rounded transition-colors",title:"",children:n===f.path+"-response"?e.jsx(is,{className:"w-4 h-4 text-green-600"}):e.jsx(er,{className:"w-4 h-4 text-gray-600"})})]}),e.jsx("div",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto",children:e.jsx("pre",{className:"text-xs font-mono",children:f.response.example})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h5",{className:"text-sm font-bold text-gray-900",children:"cURL Example:"}),e.jsx("button",{onClick:()=>h(`curl -X ${f.method} http://localhost:8001${f.path} \\
  -H "Authorization: Basic YWRtaW46cXdlcnR5MTIz" \\
  -H "Content-Type: application/json"${f.requestBody?` \\
  -d '${f.requestBody.example.replace(/\n/g,"").replace(/\s+/g," ")}'`:""}`,f.path+"-curl"),className:"p-1 hover:bg-gray-200 rounded transition-colors",title:"",children:n===f.path+"-curl"?e.jsx(is,{className:"w-4 h-4 text-green-600"}):e.jsx(er,{className:"w-4 h-4 text-gray-600"})})]}),e.jsx("div",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto",children:e.jsx("pre",{className:"text-xs font-mono",children:`curl -X ${f.method} http://localhost:8001${f.path} \\
  -H "Authorization: Basic YWRtaW46cXdlcnR5MTIz" \\
  -H "Content-Type: application/json"${f.requestBody?` \\
  -d '${f.requestBody.example.replace(/\n/g,"").replace(/\s+/g," ")}'`:""}`})})]})]})]},p)})})}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[" : ",e.jsx("strong",{children:Ek.length})]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})}):null},W0=["-"," ","","","",""],jW=({isOpen:s,onClose:t,onSelectTemplate:r})=>{const[a,n]=j.useState([]),[i,o]=j.useState(!1),[c,u]=j.useState(!1),[h,m]=j.useState(null),[f,p]=j.useState("all"),[v,g]=j.useState(""),[y,w]=j.useState({name:"",description:"",category:W0[0],project_type:"",complexity:"medium",estimated_hours:0,estimated_cost:0,tasks:[]}),[N,k]=j.useState({title:"",description:"",estimated_hours:0});j.useEffect(()=>{if(s){S();const R=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${R}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const R=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(R||"0")*-1)}},[s]);const S=async()=>{o(!0);try{const R=await fetch("http://localhost:8001/admin/api/project-templates",{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(R.ok){const H=await R.json();n(H.templates||[])}else n(_())}catch(R){console.error("Error loading templates:",R),n(_())}finally{o(!1)}},_=()=>[{id:1,name:"- ()",description:" -  ,   ",category:"-",project_type:"-",complexity:"medium",estimated_hours:120,estimated_cost:15e4,tasks:[{title:" ",description:" ",estimated_hours:20},{title:"",description:"HTML/CSS ",estimated_hours:30},{title:"",description:"API   ",estimated_hours:40},{title:" ",description:" ",estimated_hours:20},{title:"",description:"QA ",estimated_hours:10}],isFavorite:!0,usageCount:15},{id:2,name:" ",description:"    -",category:"-",project_type:" ",complexity:"simple",estimated_hours:80,estimated_cost:1e5,tasks:[{title:"",description:" ",estimated_hours:15},{title:"",description:" ",estimated_hours:25},{title:"CMS",description:" ",estimated_hours:30},{title:"",description:"",estimated_hours:10}],isFavorite:!1,usageCount:8},{id:3,name:" ",description:"   React Native",category:" ",project_type:" ",complexity:"complex",estimated_hours:200,estimated_cost:25e4,tasks:[{title:"UX/UI ",description:" ",estimated_hours:30},{title:" iOS",description:"iOS ",estimated_hours:70},{title:" Android",description:"Android ",estimated_hours:70},{title:"Backend API",description:" ",estimated_hours:30}],isFavorite:!0,usageCount:5}],T=async()=>{if(!y.name||!y.description){alert("  ");return}try{(await fetch("http://localhost:8001/admin/api/project-templates",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(y)})).ok&&(await S(),C())}catch(R){console.error("Error creating template:",R)}},E=async R=>{try{(await fetch(`http://localhost:8001/admin/api/project-templates/${R}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(y)})).ok&&(await S(),m(null),C())}catch(H){console.error("Error updating template:",H)}},z=async R=>{if(confirm(" ?"))try{(await fetch(`http://localhost:8001/admin/api/project-templates/${R}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&await S()}catch(H){console.error("Error deleting template:",H)}},O=async R=>{try{(await fetch(`http://localhost:8001/admin/api/project-templates/${R}/favorite`,{method:"POST",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&await S()}catch(H){console.error("Error toggling favorite:",H)}},C=()=>{w({name:"",description:"",category:W0[0],project_type:"",complexity:"medium",estimated_hours:0,estimated_cost:0,tasks:[]}),u(!1),m(null)},A=R=>{w({name:R.name,description:R.description,category:R.category,project_type:R.project_type,complexity:R.complexity,estimated_hours:R.estimated_hours,estimated_cost:R.estimated_cost,tasks:[...R.tasks]}),m(R.id),u(!0)},X=()=>{N.title&&(w({...y,tasks:[...y.tasks,{...N}]}),k({title:"",description:"",estimated_hours:0}))},I=R=>{w({...y,tasks:y.tasks.filter((H,ee)=>ee!==R)})},V=a.filter(R=>f==="all"||R.category===f).filter(R=>R.name.toLowerCase().includes(v.toLowerCase()));return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-violet-600 to-purple-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ue,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-violet-100 text-sm mt-1",children:"     "})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:[e.jsx("div",{className:"flex items-center gap-4 mb-3",children:e.jsx("input",{type:"text",value:v,onChange:R=>g(R.target.value),placeholder:" ...",className:"flex-1 px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-violet-500 outline-none"})}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:":"}),e.jsx("button",{onClick:()=>p("all"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${f==="all"?"bg-violet-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:""}),W0.map(R=>e.jsx("button",{onClick:()=>p(R),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${f===R?"bg-violet-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:R},R))]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[c?e.jsxs("div",{className:"bg-violet-50 border-2 border-violet-200 rounded-xl p-6 mb-6",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-900 mb-4",children:h?" ":"  "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:y.name,onChange:R=>w({...y,name:R.target.value}),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-violet-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("select",{value:y.category,onChange:R=>w({...y,category:R.target.value}),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-violet-500 outline-none",children:W0.map(R=>e.jsx("option",{value:R,children:R},R))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" *"}),e.jsx("textarea",{value:y.description,onChange:R=>w({...y,description:R.target.value}),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-violet-500 outline-none",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"number",value:y.estimated_hours,onChange:R=>w({...y,estimated_hours:Number(R.target.value)}),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-violet-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"number",value:y.estimated_cost,onChange:R=>w({...y,estimated_cost:Number(R.target.value)}),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-violet-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:y.complexity,onChange:R=>w({...y,complexity:R.target.value}),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-violet-500 outline-none",children:[e.jsx("option",{value:"simple",children:""}),e.jsx("option",{value:"medium",children:""}),e.jsx("option",{value:"complex",children:""})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("div",{className:"space-y-2 mb-3",children:y.tasks.map((R,H)=>e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-white border border-gray-300 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm",children:R.title}),e.jsxs("div",{className:"text-xs text-gray-500",children:[R.estimated_hours," "]})]}),e.jsx("button",{onClick:()=>I(H),className:"p-1 text-red-600 hover:bg-red-100 rounded",children:e.jsx(tt,{className:"w-4 h-4"})})]},H))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:N.title,onChange:R=>k({...N,title:R.target.value}),placeholder:" ",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg"}),e.jsx("input",{type:"number",value:N.estimated_hours,onChange:R=>k({...N,estimated_hours:Number(R.target.value)}),placeholder:"",className:"w-24 px-3 py-2 border border-gray-300 rounded-lg"}),e.jsx("button",{onClick:X,className:"px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700",children:e.jsx(We,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx("button",{onClick:()=>h?E(h):T(),className:"flex-1 px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors font-semibold",children:h?"":""}),e.jsx("button",{onClick:C,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-semibold",children:""})]})]})]}):e.jsxs("button",{onClick:()=>u(!0),className:"w-full px-4 py-3 mb-6 bg-gradient-to-r from-violet-600 to-purple-600 text-white rounded-xl hover:from-violet-700 hover:to-purple-700 transition-all font-semibold flex items-center justify-center gap-2",children:[e.jsx(We,{className:"w-5 h-5"})," "]}),i?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"..."}):V.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Ue,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"  "})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:V.map(R=>e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4 hover:border-violet-300 transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-900",children:R.name}),R.isFavorite&&e.jsx(Is,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:R.description}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"px-2 py-1 bg-violet-100 text-violet-700 rounded text-xs font-medium",children:R.category}),e.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs",children:[R.estimated_hours," "]}),e.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs",children:[R.estimated_cost.toLocaleString(),""]}),e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs",children:[R.tasks.length," "]})]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("button",{onClick:()=>O(R.id),className:"p-2 hover:bg-gray-100 rounded transition-colors",title:" ",children:e.jsx(Is,{className:`w-4 h-4 ${R.isFavorite?"text-yellow-500 fill-yellow-500":"text-gray-400"}`})}),e.jsx("button",{onClick:()=>A(R),className:"p-2 hover:bg-gray-100 rounded transition-colors",title:"",children:e.jsx(sr,{className:"w-4 h-4 text-gray-600"})}),e.jsx("button",{onClick:()=>z(R.id),className:"p-2 hover:bg-gray-100 rounded transition-colors",title:"",children:e.jsx(tt,{className:"w-4 h-4 text-red-600"})})]})]}),e.jsx("div",{className:"flex gap-2 mt-4",children:e.jsxs("button",{onClick:()=>{r(R),t()},className:"flex-1 px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors font-semibold flex items-center justify-center gap-2",children:[e.jsx(er,{className:"w-4 h-4"}),""]})}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500 text-right",children:[" ",R.usageCount," "]})]},R.id))})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[" : ",e.jsx("strong",{children:V.length})]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})}):null},wW=({isOpen:s,onClose:t,onLoadDraft:r,currentFormData:a})=>{const[n,i]=j.useState([]),[o,c]=j.useState(null),[u,h]=j.useState(!0),[m,f]=j.useState(30);j.useEffect(()=>{s&&v()},[s]),j.useEffect(()=>{if(s){const E=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${E}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const E=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(E||"0")*-1)}},[s]),j.useEffect(()=>{if(!u||!a)return;const E=setInterval(()=>{p(a)&&w(a)},m*1e3);return()=>clearInterval(E)},[u,m,a]);const p=E=>E&&E.name&&E.name.trim().length>0,v=async()=>{try{const E=await fetch("http://localhost:8001/admin/api/drafts",{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(E.ok){const z=await E.json();i(z.drafts||[])}else g()}catch(E){console.error("Error loading drafts:",E),g()}},g=()=>{const E=localStorage.getItem("project_drafts");if(E)try{const z=JSON.parse(E);i(z)}catch(z){console.error("Error parsing drafts:",z)}},y=E=>{localStorage.setItem("project_drafts",JSON.stringify(E))},w=j.useCallback(async E=>{const O={id:"auto_"+Date.now(),name:E.name||" ",description:E.description||"",client_id:E.client_id||null,project_type:E.project_type||"",project_cost:E.project_cost||0,deadline:E.deadline||"",assigned_to_id:E.assigned_to_id||null,status:E.status||"planned",savedAt:new Date().toISOString(),autoSaved:!0};try{if((await fetch("http://localhost:8001/admin/api/drafts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(O)})).ok)await v();else{const A=[...n,O];i(A),y(A)}}catch(C){console.error("Error auto-saving draft:",C);const A=[...n,O];i(A),y(A)}},[n]),N=async()=>{if(!a||!p(a))return;const z={id:"manual_"+Date.now(),name:a.name||" ",description:a.description||"",client_id:a.client_id||null,project_type:a.project_type||"",project_cost:a.project_cost||0,deadline:a.deadline||"",assigned_to_id:a.assigned_to_id||null,status:a.status||"planned",savedAt:new Date().toISOString(),autoSaved:!1};try{if((await fetch("http://localhost:8001/admin/api/drafts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(z)})).ok)await v();else{const C=[...n,z];i(C),y(C)}}catch(O){console.error("Error saving draft:",O);const C=[...n,z];i(C),y(C)}},k=async E=>{if(confirm(" ?"))try{if((await fetch(`http://localhost:8001/admin/api/drafts/${E}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok)await v();else{const O=n.filter(C=>C.id!==E);i(O),y(O)}}catch(z){console.error("Error deleting draft:",z);const O=n.filter(C=>C.id!==E);i(O),y(O)}},S=E=>{r(E),t()},_=E=>{const z=new Date(E);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}).format(z)},T=E=>{const z=Date.now(),O=new Date(E).getTime(),C=z-O,A=Math.floor(C/6e4),X=Math.floor(C/36e5),I=Math.floor(C/864e5);return A<1?" ":A<60?`${A}  `:X<24?`${X}  `:`${I}  `};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Aa,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-purple-100 text-sm mt-1",children:"   "})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"px-6 py-4 bg-purple-50 border-b border-purple-200 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:u,onChange:E=>h(E.target.checked),className:"w-5 h-5 text-purple-600 rounded focus:ring-2 focus:ring-purple-500"}),e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:":"}),e.jsxs("select",{value:m,onChange:E=>f(Number(E.target.value)),className:"px-3 py-1 text-sm border-2 border-purple-300 rounded-lg focus:border-purple-500 focus:ring-2 focus:ring-purple-200 outline-none",disabled:!u,children:[e.jsx("option",{value:10,children:"10 "}),e.jsx("option",{value:30,children:"30 "}),e.jsx("option",{value:60,children:"1 "}),e.jsx("option",{value:120,children:"2 "}),e.jsx("option",{value:300,children:"5 "})]})]})]}),e.jsxs("button",{onClick:N,disabled:!a||!p(a),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all font-semibold text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Aa,{className:"w-4 h-4"})," "]})]}),u&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-purple-700",children:[e.jsx(Ge,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:["    ",m," "]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ue,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:"  "}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"    "})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(E=>e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4 hover:border-purple-400 hover:shadow-lg transition-all cursor-pointer group",onClick:()=>c(E),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-gray-900 text-lg mb-1 line-clamp-1",children:E.name}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-2",children:E.description||" "})]}),E.autoSaved&&e.jsx("span",{className:"ml-2 px-2 py-0.5 bg-purple-100 text-purple-700 text-xs font-semibold rounded-full",children:""})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:":"})," ",E.project_type||""]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:":"})," ",E.project_cost?`${E.project_cost.toLocaleString()} `:""]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:":"})," ",E.deadline?new Date(E.deadline).toLocaleDateString("ru-RU"):""]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:":"})," ",E.status||""]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx(Ve,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:T(E.savedAt)}),e.jsxs("span",{className:"text-gray-400",children:["(",_(E.savedAt),")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:z=>{z.stopPropagation(),S(E)},className:"px-3 py-1 bg-purple-600 text-white text-xs font-semibold rounded-lg hover:bg-purple-700 transition-colors",children:""}),e.jsx("button",{onClick:z=>{z.stopPropagation(),k(E.id)},className:"p-1 text-red-600 hover:bg-red-100 rounded transition-colors",title:"",children:e.jsx(tt,{className:"w-4 h-4"})})]})]})]},E.id))})}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center flex-shrink-0",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[" : ",e.jsx("span",{className:"font-bold text-purple-600",children:n.length})]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})}):null},NW=[{id:"project_created",name:" ",description:"    ",enabled:!0,icon:Ue,category:"projects"},{id:"project_status_changed",name:"  ",description:"    ",enabled:!0,icon:dr,category:"projects"},{id:"project_deadline_approaching",name:" ",description:"  3    ",enabled:!0,icon:Ve,category:"projects"},{id:"project_completed",name:" ",description:"   ",enabled:!0,icon:ut,category:"projects"},{id:"project_assigned",name:" ",description:"    ",enabled:!0,icon:it,category:"projects"},{id:"task_created",name:" ",description:"      ",enabled:!0,icon:Ue,category:"tasks"},{id:"task_assigned",name:" ",description:"    ",enabled:!0,icon:it,category:"tasks"},{id:"task_deadline_approaching",name:"  ",description:"  1    ",enabled:!0,icon:Ve,category:"tasks"},{id:"task_completed",name:" ",description:"   ",enabled:!1,icon:ut,category:"tasks"},{id:"task_comment_added",name:"   ",description:"     ",enabled:!1,icon:vi,category:"tasks"},{id:"payment_received",name:" ",description:"     ",enabled:!0,icon:ut,category:"payments"},{id:"payment_due",name:" ",description:"   ",enabled:!0,icon:Ve,category:"payments"},{id:"payment_overdue",name:" ",description:"   ",enabled:!0,icon:dr,category:"payments"},{id:"team_member_added",name:" ",description:"      ",enabled:!1,icon:it,category:"team"},{id:"team_member_removed",name:" ",description:"     ",enabled:!1,icon:it,category:"team"},{id:"team_mention",name:"  ",description:"     ",enabled:!0,icon:sa,category:"team"}],_W=({isOpen:s,onClose:t})=>{const[r,a]=j.useState(NW),[n,i]=j.useState("admin@example.com"),[o,c]=j.useState("instant"),[u,h]=j.useState(!1),[m,f]=j.useState("22:00"),[p,v]=j.useState("08:00"),[g,y]=j.useState(!1),[w,N]=j.useState(!1);j.useEffect(()=>{s&&k()},[s]),j.useEffect(()=>{if(s){const C=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${C}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const C=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(C||"0")*-1)}},[s]);const k=async()=>{try{const C=await fetch("http://localhost:8001/admin/api/notification-settings",{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(C.ok){const A=await C.json();A.settings&&a(A.settings),A.email&&i(A.email),A.frequency&&c(A.frequency),A.quietHours&&(h(A.quietHours.enabled),f(A.quietHours.start),v(A.quietHours.end))}}catch(C){console.error("Error loading settings:",C)}},S=C=>{a(A=>A.map(X=>X.id===C?{...X,enabled:!X.enabled}:X))},_=async()=>{y(!0);try{(await fetch("http://localhost:8001/admin/api/notification-settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({settings:r,email:n,frequency:o,quietHours:{enabled:u,start:m,end:p}})})).ok?alert("  !"):alert("  ")}catch(C){console.error("Error saving settings:",C),alert("  ")}finally{y(!1)}},T=async()=>{N(!0);try{(await fetch("http://localhost:8001/admin/api/test-email",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({email:n})})).ok?alert("    "+n):alert("   ")}catch(C){console.error("Error sending test email:",C),alert("   ")}finally{N(!1)}},E=C=>{a(A=>A.map(X=>X.category===C?{...X,enabled:!0}:X))},z=C=>{a(A=>A.map(X=>X.category===C?{...X,enabled:!1}:X))};if(!s)return null;const O={projects:{name:"",icon:Ue},tasks:{name:"",icon:ut},payments:{name:"",icon:dr},team:{name:"",icon:it}};return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-5xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(vi,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"Email-"}),e.jsx("p",{className:"text-blue-100 text-sm mt-1",children:",      "})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4",children:[e.jsxs("h4",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(vi,{className:"w-5 h-5 text-blue-600"})," "]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email-"}),e.jsx("input",{type:"email",value:n,onChange:C=>i(C.target.value),className:"w-full px-4 py-2 border-2 border-blue-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none",placeholder:"your@email.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsxs("select",{value:o,onChange:C=>c(C.target.value),className:"w-full px-4 py-2 border-2 border-blue-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none",children:[e.jsx("option",{value:"instant",children:""}),e.jsx("option",{value:"daily",children:" "}),e.jsx("option",{value:"weekly",children:" "})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:u,onChange:C=>h(C.target.checked),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"  (  )"})]}),u&&e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-4 pl-7",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:""}),e.jsx("input",{type:"time",value:m,onChange:C=>f(C.target.value),className:"w-full px-3 py-2 border-2 border-blue-300 rounded-lg focus:border-blue-500 outline-none text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:""}),e.jsx("input",{type:"time",value:p,onChange:C=>v(C.target.value),className:"w-full px-3 py-2 border-2 border-blue-300 rounded-lg focus:border-blue-500 outline-none text-sm"})]})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{onClick:T,disabled:w,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold text-sm disabled:opacity-50",children:[e.jsx(sa,{className:"w-4 h-4"}),w?"...":"  "]})})]}),Object.entries(O).map(([C,A])=>{const X=r.filter(V=>V.category===C),I=X.filter(V=>V.enabled).length;return e.jsxs("div",{className:"bg-gray-50 border-2 border-gray-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(A.icon,{className:"w-5 h-5 text-gray-600"}),A.name,e.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",I,"/",X.length,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>E(C),className:"text-xs px-3 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-semibold",children:" "}),e.jsx("button",{onClick:()=>z(C),className:"text-xs px-3 py-1 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-semibold",children:" "})]})]}),e.jsx("div",{className:"space-y-2",children:X.map(V=>e.jsxs("label",{className:"flex items-start gap-3 p-3 bg-white rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:V.enabled,onChange:()=>S(V.id),className:"mt-1 w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V.icon,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"font-semibold text-gray-900 text-sm",children:V.name})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:V.description})]})]},V.id))})]},C)})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center flex-shrink-0",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[":"," ",e.jsxs("span",{className:"font-bold text-blue-600",children:[r.filter(C=>C.enabled).length,"/",r.length]})," ",""]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""}),e.jsx("button",{onClick:_,disabled:g,className:"px-6 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all font-semibold disabled:opacity-50",children:g?"...":" "})]})]})]})})},kW=({isOpen:s,onClose:t,projectId:r,projectName:a})=>{const[n,i]=j.useState([]),[o,c]=j.useState([]),[u,h]=j.useState(""),[m,f]=j.useState("view"),[p,v]=j.useState("view"),[g,y]=j.useState(7),[w,N]=j.useState(""),[k,S]=j.useState(null),[_,T]=j.useState(!1),[E,z]=j.useState("links");j.useEffect(()=>{s&&r&&O()},[s,r]),j.useEffect(()=>{if(s){const te=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${te}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const te=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(te||"0")*-1)}},[s]);const O=async()=>{if(r){T(!0);try{const te=await fetch(`http://localhost:8001/admin/api/projects/${r}/sharing`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(te.ok){const J=await te.json();i(J.links||[]),c(J.users||[])}else i([{id:"1",url:"https://crm.example.com/share/abc123def456",token:"abc123def456",expiresAt:new Date(Date.now()+10080*60*1e3).toISOString(),accessLevel:"view",password:null,viewCount:15,createdAt:new Date().toISOString(),createdBy:"admin"}]),c([{id:1,email:"manager@example.com",firstName:"",lastName:"",accessLevel:"comment",addedAt:new Date().toISOString(),addedBy:"admin"}])}catch(te){console.error("Error loading sharing:",te)}finally{T(!1)}}},C=async()=>{if(r)try{const te=g?new Date(Date.now()+g*24*60*60*1e3).toISOString():null;(await fetch(`http://localhost:8001/admin/api/projects/${r}/sharing/links`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({accessLevel:p,expiresAt:te,password:w||null})})).ok&&(await O(),N(""))}catch(te){console.error("Error generating link:",te)}},A=async te=>{if(confirm(" ?     ."))try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/sharing/links/${te}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&await O()}catch(J){console.error("Error revoking link:",J)}},X=async()=>{if(!(!u.trim()||!r))try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/sharing/users`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({email:u,accessLevel:m})})).ok&&(h(""),await O())}catch(te){console.error("Error adding user:",te)}},I=async te=>{if(confirm("    ?"))try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/sharing/users/${te}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&await O()}catch(J){console.error("Error removing user:",J)}},V=async(te,J)=>{try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/sharing/users/${te}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({accessLevel:J})})).ok&&await O()}catch(K){console.error("Error changing access:",K)}},R=(te,J)=>{navigator.clipboard.writeText(te).then(()=>{S(J),setTimeout(()=>S(null),2e3)})},H=te=>{const J=new Date(te);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}).format(J)},ee=te=>{switch(te){case"view":return"bg-blue-100 text-blue-700";case"comment":return"bg-green-100 text-green-700";case"edit":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}},se=te=>{switch(te){case"view":return e.jsx(Vt,{className:"w-3.5 h-3.5"});case"comment":return e.jsx(vi,{className:"w-3.5 h-3.5"});case"edit":return e.jsx(An,{className:"w-3.5 h-3.5"});default:return e.jsx(Or,{className:"w-3.5 h-3.5"})}},W=te=>{switch(te){case"view":return"";case"comment":return"";case"edit":return"";default:return te}};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-5xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-teal-600 to-cyan-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(xN,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-teal-100 text-sm mt-1",children:a})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex border-b border-gray-200 bg-gray-50 flex-shrink-0",children:[e.jsxs("button",{onClick:()=>z("links"),className:`flex-1 px-6 py-3 font-semibold transition-colors flex items-center justify-center gap-2 ${E==="links"?"bg-white border-b-2 border-teal-600 text-teal-600":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(Nl,{className:"w-5 h-5"}),"  (",n.length,")"]}),e.jsxs("button",{onClick:()=>z("users"),className:`flex-1 px-6 py-3 font-semibold transition-colors flex items-center justify-center gap-2 ${E==="users"?"bg-white border-b-2 border-teal-600 text-teal-600":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(it,{className:"w-5 h-5"}),"  (",o.length,")"]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:E==="links"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-teal-50 border-2 border-teal-200 rounded-xl p-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-4",children:"  "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsxs("select",{value:p,onChange:te=>v(te.target.value),className:"w-full px-4 py-2 border-2 border-teal-300 rounded-lg focus:border-teal-500 focus:ring-2 focus:ring-teal-200 outline-none",children:[e.jsx("option",{value:"view",children:" "}),e.jsx("option",{value:"comment",children:"  "}),e.jsx("option",{value:"edit",children:" "})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsxs("select",{value:g||"",onChange:te=>y(te.target.value?Number(te.target.value):null),className:"w-full px-4 py-2 border-2 border-teal-300 rounded-lg focus:border-teal-500 focus:ring-2 focus:ring-teal-200 outline-none",children:[e.jsx("option",{value:"1",children:"1 "}),e.jsx("option",{value:"7",children:"7 "}),e.jsx("option",{value:"30",children:"30 "}),e.jsx("option",{value:"",children:" "})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" ()"}),e.jsx("input",{type:"text",value:w,onChange:te=>N(te.target.value),className:"w-full px-4 py-2 border-2 border-teal-300 rounded-lg focus:border-teal-500 focus:ring-2 focus:ring-teal-200 outline-none",placeholder:" "})]})]}),e.jsxs("button",{onClick:C,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-teal-600 to-cyan-600 text-white rounded-lg hover:from-teal-700 hover:to-cyan-700 transition-all font-semibold",children:[e.jsx(Nl,{className:"w-5 h-5"})," "]})]}),_?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"..."}):n.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"  .  !"}):e.jsx("div",{className:"space-y-3",children:n.map(te=>e.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4 hover:border-teal-400 transition-all",children:e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-semibold flex items-center gap-1 ${ee(te.accessLevel)}`,children:[se(te.accessLevel),W(te.accessLevel)]}),te.password&&e.jsxs("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-700 rounded-full text-xs font-semibold flex items-center gap-1",children:[e.jsx(Or,{className:"w-3.5 h-3.5"})," "]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("input",{type:"text",value:te.url,readOnly:!0,className:"flex-1 px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-sm font-mono"}),e.jsx("button",{onClick:()=>R(te.url,te.id),className:"px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors flex items-center gap-2 font-semibold",children:k===te.id?e.jsxs(e.Fragment,{children:[e.jsx(is,{className:"w-4 h-4"}),"!"]}):e.jsxs(e.Fragment,{children:[e.jsx(er,{className:"w-4 h-4"}),""]})})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Vt,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[": ",te.viewCount]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ve,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[": ",H(te.createdAt)]})]}),te.expiresAt&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ve,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[": ",H(te.expiresAt)]})]})]})]}),e.jsx("button",{onClick:()=>A(te.id),className:"ml-4 p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:" ",children:e.jsx(tt,{className:"w-5 h-5"})})]})},te.id))})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-cyan-50 border-2 border-cyan-200 rounded-xl p-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-4",children:" "}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"email",value:u,onChange:te=>h(te.target.value),className:"flex-1 px-4 py-2 border-2 border-cyan-300 rounded-lg focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none",placeholder:"Email "}),e.jsxs("select",{value:m,onChange:te=>f(te.target.value),className:"px-4 py-2 border-2 border-cyan-300 rounded-lg focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none",children:[e.jsx("option",{value:"view",children:""}),e.jsx("option",{value:"comment",children:""}),e.jsx("option",{value:"edit",children:""})]}),e.jsxs("button",{onClick:X,disabled:!u.trim(),className:"px-6 py-2 bg-gradient-to-r from-teal-600 to-cyan-600 text-white rounded-lg hover:from-teal-700 hover:to-cyan-700 transition-all font-semibold disabled:opacity-50 flex items-center gap-2",children:[e.jsx(vi,{className:"w-5 h-5"}),""]})]})]}),_?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"..."}):o.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"  "}):e.jsx("div",{className:"space-y-3",children:o.map(te=>e.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4 hover:border-cyan-400 transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-teal-500 to-cyan-500 rounded-full flex items-center justify-center text-white font-bold",children:te.firstName[0]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-gray-900",children:[te.firstName," ",te.lastName]}),e.jsx("div",{className:"text-sm text-gray-600",children:te.email}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[": ",H(te.addedAt)]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:te.accessLevel,onChange:J=>V(te.id,J.target.value),className:"px-3 py-2 border-2 border-cyan-300 rounded-lg focus:border-cyan-500 outline-none text-sm",children:[e.jsx("option",{value:"view",children:""}),e.jsx("option",{value:"comment",children:""}),e.jsx("option",{value:"edit",children:""})]}),e.jsx("button",{onClick:()=>I(te.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:" ",children:e.jsx(tt,{className:"w-5 h-5"})})]})]})},te.id))})]})}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end flex-shrink-0",children:e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})})]})}):null},Y0=["","","","","","","","",""],Ak={:"#3B82F6",:"#EC4899",:"#10B981",:"#F59E0B",:"#8B5CF6",:"#14B8A6",:"#6366F1",:"#EF4444",:"#6B7280"},SW=({isOpen:s,onClose:t,projectId:r,projectName:a,totalBudget:n})=>{const[i,o]=j.useState([]),[c,u]=j.useState(!1),[h,m]=j.useState(null),[f,p]=j.useState({category:Y0[0],description:"",plannedAmount:0,actualAmount:0,date:new Date().toISOString().slice(0,10)}),[v,g]=j.useState(!1);j.useEffect(()=>{s&&r&&y()},[s,r]),j.useEffect(()=>{if(s){const C=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${C}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const C=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(C||"0")*-1)}},[s]);const y=async()=>{if(r){g(!0);try{const C=await fetch(`http://localhost:8001/admin/api/projects/${r}/budget`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(C.ok){const A=await C.json();o(A.items||[])}else o([{id:1,category:"",description:" ",plannedAmount:15e4,actualAmount:135e3,date:"2025-01-10",createdBy:"admin"},{id:2,category:"",description:"UI/UX ",plannedAmount:8e4,actualAmount:85e3,date:"2025-01-15",createdBy:"admin"},{id:3,category:"",description:"   ",plannedAmount:3e4,actualAmount:3e4,date:"2025-01-20",createdBy:"admin"}])}catch(C){console.error("Error loading budget items:",C)}finally{g(!1)}}},w=async()=>{if(f.description.trim())try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/budget`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(f)})).ok&&(p({category:Y0[0],description:"",plannedAmount:0,actualAmount:0,date:new Date().toISOString().slice(0,10)}),u(!1),await y())}catch(C){console.error("Error adding item:",C)}},N=async C=>{if(confirm("   ?"))try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/budget/${C}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&await y()}catch(A){console.error("Error deleting item:",A)}},k=()=>{const C=i.reduce((V,R)=>V+R.plannedAmount,0),A=i.reduce((V,R)=>V+R.actualAmount,0),X=n-A,I=A-C;return{totalPlanned:C,totalActual:A,remaining:X,variance:I}},S=()=>{const C=new Map;return i.forEach(A=>{const X=C.get(A.category)||{planned:0,actual:0};C.set(A.category,{planned:X.planned+A.plannedAmount,actual:X.actual+A.actualAmount})}),Array.from(C.entries()).map(([A,X])=>({name:A,planned:X.planned,actual:X.actual,color:Ak[A]||"#6B7280"}))},_=C=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0}).format(C),T=C=>{const A=new Date(C);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"short",year:"numeric"}).format(A)};if(!s)return null;const E=k(),z=S(),O=E.totalActual/n*100;return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Qe,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-emerald-100 text-sm mt-1",children:a})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200 flex-shrink-0",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 border-2 border-blue-200",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-1",children:" "}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:_(n)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border-2 border-purple-200",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-1",children:""}),e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:_(E.totalPlanned)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border-2 border-emerald-200",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-1",children:""}),e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:_(E.totalActual)}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[O.toFixed(1),"% "]})]}),e.jsxs("div",{className:`bg-white rounded-xl p-4 border-2 ${E.remaining>=0?"border-green-200":"border-red-200"}`,children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-1",children:""}),e.jsx("div",{className:`text-2xl font-bold ${E.remaining>=0?"text-green-600":"text-red-600"}`,children:_(E.remaining)}),E.variance!==0&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[E.variance>0?e.jsx(xt,{className:"w-3.5 h-3.5 text-red-600"}):e.jsx(Da,{className:"w-3.5 h-3.5 text-green-600"}),e.jsxs("span",{className:`text-xs ${E.variance>0?"text-red-600":"text-green-600"}`,children:[Math.abs(E.variance).toLocaleString(),"   "]})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:" "}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[O.toFixed(1),"%"]})]}),e.jsx("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all ${O>100?"bg-red-500":O>80?"bg-yellow-500":"bg-emerald-500"}`,style:{width:`${Math.min(O,100)}%`}})}),O>90&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-orange-600",children:[e.jsx(Ge,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"!   "})]})]})]}),z.length>0&&e.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-emerald-50 to-teal-50 border-b border-gray-200 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(vp,{className:"w-5 h-5 text-emerald-600"}),e.jsx("h4",{className:"font-bold text-gray-900",children:"  "})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:z.map(C=>e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:C.color}}),e.jsx("span",{className:"text-xs font-semibold text-gray-700",children:C.name})]}),e.jsx("div",{className:"text-sm font-bold text-gray-900",children:_(C.actual)}),e.jsxs("div",{className:"text-xs text-gray-500",children:[": ",_(C.planned)]})]},C.name))})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[!c&&e.jsxs("button",{onClick:()=>u(!0),className:"w-full mb-4 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-lg hover:from-emerald-700 hover:to-teal-700 transition-all font-semibold",children:[e.jsx(We,{className:"w-5 h-5"})," "]}),c&&e.jsxs("div",{className:"mb-4 bg-emerald-50 border-2 border-emerald-200 rounded-xl p-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-3",children:"  "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsx("select",{value:f.category,onChange:C=>p({...f,category:C.target.value}),className:"w-full px-4 py-2 border-2 border-emerald-300 rounded-lg focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none",children:Y0.map(C=>e.jsx("option",{value:C,children:C},C))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsx("input",{type:"date",value:f.date,onChange:C=>p({...f,date:C.target.value}),className:"w-full px-4 py-2 border-2 border-emerald-300 rounded-lg focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsx("input",{type:"text",value:f.description,onChange:C=>p({...f,description:C.target.value}),className:"w-full px-4 py-2 border-2 border-emerald-300 rounded-lg focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none",placeholder:" ..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"  ()"}),e.jsx("input",{type:"number",value:f.plannedAmount,onChange:C=>p({...f,plannedAmount:Number(C.target.value)}),className:"w-full px-4 py-2 border-2 border-emerald-300 rounded-lg focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"  ()"}),e.jsx("input",{type:"number",value:f.actualAmount,onChange:C=>p({...f,actualAmount:Number(C.target.value)}),className:"w-full px-4 py-2 border-2 border-emerald-300 rounded-lg focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none",min:"0"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:w,disabled:!f.description.trim(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 font-semibold",children:[e.jsx(is,{className:"w-4 h-4"}),""]}),e.jsx("button",{onClick:()=>{u(!1),p({category:Y0[0],description:"",plannedAmount:0,actualAmount:0,date:new Date().toISOString().slice(0,10)})},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-semibold",children:""})]})]}),v?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"..."}):i.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Ue,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold",children:"  "}),e.jsx("p",{className:"text-sm mt-2",children:"   "})]}):e.jsx("div",{className:"space-y-3",children:i.map(C=>{const A=C.actualAmount-C.plannedAmount,X=(A/C.plannedAmount*100).toFixed(1);return e.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4 hover:border-emerald-400 transition-all",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Ak[C.category]}}),e.jsx("span",{className:"font-bold text-gray-900 text-lg",children:C.description}),e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 text-xs font-semibold rounded-full",children:C.category})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600",children:""}),e.jsx("div",{className:"text-sm font-bold text-purple-600",children:_(C.plannedAmount)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600",children:""}),e.jsx("div",{className:"text-sm font-bold text-emerald-600",children:_(C.actualAmount)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600",children:""}),e.jsxs("div",{className:`text-sm font-bold flex items-center gap-1 ${A>0?"text-red-600":A<0?"text-green-600":"text-gray-600"}`,children:[A>0&&e.jsx(xt,{className:"w-3.5 h-3.5"}),A<0&&e.jsx(Da,{className:"w-3.5 h-3.5"}),A!==0?`${A>0?"+":""}${X}%`:""]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600",children:""}),e.jsxs("div",{className:"text-sm font-semibold text-gray-900 flex items-center gap-1",children:[e.jsx(wt,{className:"w-3.5 h-3.5"}),T(C.date)]})]})]})]}),e.jsx("div",{className:"flex items-center gap-2 ml-4",children:e.jsx("button",{onClick:()=>N(C.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"",children:e.jsx(tt,{className:"w-4 h-4"})})})]})},C.id)})})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center flex-shrink-0",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[" : ",e.jsx("span",{className:"font-bold text-emerald-600",children:i.length})]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})})},Dk=[{name:"Slack",service:"slack",description:"    Slack-",icon:Os,color:"#4A154B"},{name:"Trello",service:"trello",description:"   Trello-",icon:zF,color:"#0079BF"},{name:"GitHub",service:"github",description:"  GitHub-",icon:oE,color:"#181717"},{name:"Google Calendar",service:"google-calendar",description:"   ",icon:wt,color:"#4285F4"},{name:"Dropbox",service:"dropbox",description:"    Dropbox",icon:EP,color:"#0061FF"},{name:"Webhook",service:"webhook",description:" webhook  ",icon:Nl,color:"#10B981"}],CW=({isOpen:s,onClose:t,projectId:r,projectName:a})=>{const[n,i]=j.useState([]),[o,c]=j.useState(null),[u,h]=j.useState(!1),[m,f]=j.useState({}),[p,v]=j.useState(!1),[g,y]=j.useState(null);j.useEffect(()=>{s&&r&&w()},[s,r]),j.useEffect(()=>{if(s){const A=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${A}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const A=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(A||"0")*-1)}},[s]);const w=async()=>{if(r){v(!0);try{const A=await fetch(`http://localhost:8001/admin/api/projects/${r}/integrations`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(A.ok){const X=await A.json();i(X.integrations||[])}else i([{id:"1",name:"Slack",service:"slack",description:"    Slack-",icon:Os,color:"#4A154B",connected:!0,webhookUrl:"https://hooks.slack.com/services/XXXXX",lastSync:new Date().toISOString(),status:"active",settings:{channel:"#projects",notifications:["status_change","deadline"]}},{id:"2",name:"GitHub",service:"github",description:"  GitHub-",icon:oE,color:"#181717",connected:!0,apiKey:"ghp_xxxxxxxxxxxxx",lastSync:new Date(Date.now()-36e5).toISOString(),status:"active",settings:{repo:"user/project",branch:"main"}}])}catch(A){console.error("Error loading integrations:",A)}finally{v(!1)}}},N=A=>{c({id:Date.now().toString(),...A,connected:!1,status:"inactive"}),f({}),h(!0)},k=async()=>{if(!(!o||!r))try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/integrations`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({service:o.service,...m})})).ok&&(h(!1),c(null),f({}),await w())}catch(A){console.error("Error saving integration:",A)}},S=async A=>{if(confirm("  ?"))try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/integrations/${A}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&await w()}catch(X){console.error("Error disconnecting integration:",X)}},_=async A=>{y(A);try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/integrations/${A}/test`,{method:"POST",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok?alert("  !"):alert("  ")}catch(X){console.error("Error testing integration:",X),alert("  ")}finally{y(null)}},T=async A=>{try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/integrations/${A}/sync`,{method:"POST",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&(await w(),alert("  !"))}catch(X){console.error("Error syncing integration:",X)}},E=()=>{if(!o)return null;switch(o.service){case"slack":return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Webhook URL"}),e.jsx("input",{type:"text",value:m.webhookUrl||"",onChange:A=>f({...m,webhookUrl:A.target.value}),className:"w-full px-4 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 outline-none",placeholder:"https://hooks.slack.com/services/..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsx("input",{type:"text",value:m.channel||"",onChange:A=>f({...m,channel:A.target.value}),className:"w-full px-4 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 outline-none",placeholder:"#projects"})]})]});case"trello":return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"API Key"}),e.jsx("input",{type:"text",value:m.apiKey||"",onChange:A=>f({...m,apiKey:A.target.value}),className:"w-full px-4 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 outline-none",placeholder:"Trello API Key"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Token"}),e.jsx("input",{type:"text",value:m.token||"",onChange:A=>f({...m,token:A.target.value}),className:"w-full px-4 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 outline-none",placeholder:"Trello Token"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Board ID"}),e.jsx("input",{type:"text",value:m.boardId||"",onChange:A=>f({...m,boardId:A.target.value}),className:"w-full px-4 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 outline-none",placeholder:"Board ID"})]})]});case"github":return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Personal Access Token"}),e.jsx("input",{type:"password",value:m.token||"",onChange:A=>f({...m,token:A.target.value}),className:"w-full px-4 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 outline-none",placeholder:"ghp_xxxxxxxxxxxx"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Repository (owner/repo)"}),e.jsx("input",{type:"text",value:m.repo||"",onChange:A=>f({...m,repo:A.target.value}),className:"w-full px-4 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 outline-none",placeholder:"username/repository"})]})]});case"google-calendar":return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Client ID"}),e.jsx("input",{type:"text",value:m.clientId||"",onChange:A=>f({...m,clientId:A.target.value}),className:"w-full px-4 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 outline-none",placeholder:"Google OAuth Client ID"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Calendar ID"}),e.jsx("input",{type:"text",value:m.calendarId||"",onChange:A=>f({...m,calendarId:A.target.value}),className:"w-full px-4 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 outline-none",placeholder:"primary"})]})]});case"webhook":return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Webhook URL"}),e.jsx("input",{type:"text",value:m.url||"",onChange:A=>f({...m,url:A.target.value}),className:"w-full px-4 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 outline-none",placeholder:"https://your-server.com/webhook"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Secret ()"}),e.jsx("input",{type:"password",value:m.secret||"",onChange:A=>f({...m,secret:A.target.value}),className:"w-full px-4 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 outline-none",placeholder:" "})]})]});default:return e.jsx("div",{className:"text-sm text-gray-600",children:"      "})}},z=A=>{const X=new Date(A);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}).format(X)};if(!s)return null;const O=n.filter(A=>A.connected),C=Dk.filter(A=>!n.some(X=>X.service===A.service&&X.connected));return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-5xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(V4,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:""}),e.jsx("p",{className:"text-purple-100 text-sm mt-1",children:a})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[O.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(is,{className:"w-5 h-5 text-green-600"}),"  (",O.length,")"]}),e.jsx("div",{className:"space-y-3",children:O.map(A=>{const X=A.icon;return e.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4 hover:border-purple-400 transition-all",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-white flex-shrink-0",style:{backgroundColor:A.color},children:e.jsx(X,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h5",{className:"font-bold text-gray-900",children:A.name}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${A.status==="active"?"bg-green-100 text-green-700":A.status==="error"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:A.status==="active"?"":A.status==="error"?"":""})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:A.description}),A.lastSync&&e.jsxs("div",{className:"text-xs text-gray-500",children:[" : ",z(A.lastSync)]}),A.settings&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:Object.entries(A.settings).map(([I,V])=>e.jsxs("span",{className:"px-2 py-1 bg-purple-50 text-purple-700 rounded text-xs font-semibold",children:[I,": ",String(V)]},I))})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx("button",{onClick:()=>T(A.id),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"",children:e.jsx(ls,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>_(A.id),disabled:g===A.id,className:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors disabled:opacity-50",title:"",children:e.jsx(Ta,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>S(A.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"",children:e.jsx(tt,{className:"w-4 h-4"})})]})]})},A.id)})})]}),!u&&C.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(tm,{className:"w-5 h-5 text-gray-600"}),"  (",C.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:C.map(A=>{const X=A.icon;return e.jsx("div",{className:"bg-gray-50 border-2 border-gray-200 rounded-xl p-4 hover:border-purple-400 hover:bg-white transition-all cursor-pointer",onClick:()=>N(A),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center text-white flex-shrink-0",style:{backgroundColor:A.color},children:e.jsx(X,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-bold text-gray-900 mb-1",children:A.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:A.description}),e.jsxs("button",{className:"text-xs font-semibold text-purple-600 hover:text-purple-700 flex items-center gap-1",children:[e.jsx(V4,{className:"w-3.5 h-3.5"}),""]})]})]})},A.service)})})]}),u&&o&&e.jsxs("div",{className:"bg-purple-50 border-2 border-purple-200 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.icon&&e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-white",style:{backgroundColor:o.color},children:e.jsx(o.icon,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-gray-900",children:[" ",o.name]}),e.jsx("p",{className:"text-sm text-gray-600",children:o.description})]})]}),E(),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsxs("button",{onClick:k,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all font-semibold",children:[e.jsx(is,{className:"w-5 h-5"}),""]}),e.jsx("button",{onClick:()=>{h(!1),c(null),f({})},className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center flex-shrink-0",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[":"," ",e.jsx("span",{className:"font-bold text-purple-600",children:O.length})," "," ",Dk.length]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})})},xh=["","","","","","","",""],TW={low:"",medium:"",high:""},EW={low:"",medium:"",high:""},Py={identified:"",analyzing:"",mitigated:"",accepted:"",resolved:""},AW=({isOpen:s,onClose:t,projectId:r,projectName:a})=>{const[n,i]=j.useState([]),[o,c]=j.useState(!1),[u,h]=j.useState(null),[m,f]=j.useState({title:"",description:"",probability:"medium",impact:"medium",category:xh[0],status:"identified",mitigationPlan:""}),[p,v]=j.useState(!1),[g,y]=j.useState("all"),[w,N]=j.useState("all");j.useEffect(()=>{s&&r&&k()},[s,r]),j.useEffect(()=>{if(s){const H=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${H}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const H=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(H||"0")*-1)}},[s]);const k=async()=>{if(r){v(!0);try{const H=await fetch(`http://localhost:8001/admin/api/projects/${r}/risks`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(H.ok){const ee=await H.json();i(ee.risks||[])}else i([{id:1,title:"  ",description:"         ",probability:"high",impact:"high",category:"",status:"analyzing",mitigationPlan:"     ",owner:"admin",createdAt:new Date().toISOString()},{id:2,title:"  ",description:"      ",probability:"medium",impact:"high",category:"",status:"mitigated",mitigationPlan:"  ,  ",owner:"admin",createdAt:new Date(Date.now()-864e5).toISOString()},{id:3,title:"   API",description:" API   ",probability:"low",impact:"medium",category:"",status:"identified",mitigationPlan:" retry mechanism  fallback ",owner:"admin",createdAt:new Date(Date.now()-1728e5).toISOString()}])}catch(H){console.error("Error loading risks:",H)}finally{v(!1)}}},S=async()=>{if(m.title.trim())try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/risks`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(m)})).ok&&(f({title:"",description:"",probability:"medium",impact:"medium",category:xh[0],status:"identified",mitigationPlan:""}),c(!1),await k())}catch(H){console.error("Error adding risk:",H)}},_=async(H,ee)=>{try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/risks/${H}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(ee)})).ok&&await k()}catch(se){console.error("Error updating risk:",se)}},T=async H=>{if(confirm("  ?"))try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/risks/${H}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&await k()}catch(ee){console.error("Error deleting risk:",ee)}},E=(H,ee)=>(H==="low"?1:H==="medium"?2:3)*(ee==="low"?1:ee==="medium"?2:3),z=H=>H>=6?"bg-red-500":H>=4?"bg-orange-500":"bg-yellow-500",O=H=>H>=6?"":H>=4?"":"",C=H=>H==="high"?"bg-red-100 text-red-700":H==="medium"?"bg-orange-100 text-orange-700":"bg-yellow-100 text-yellow-700",A=H=>H==="high"?"bg-red-100 text-red-700":H==="medium"?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700",X=H=>{switch(H){case"identified":return"bg-blue-100 text-blue-700";case"analyzing":return"bg-purple-100 text-purple-700";case"mitigated":return"bg-green-100 text-green-700";case"accepted":return"bg-yellow-100 text-yellow-700";case"resolved":return"bg-emerald-100 text-emerald-700";default:return"bg-gray-100 text-gray-700"}},I=H=>{const ee=new Date(H);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"short",year:"numeric"}).format(ee)};if(!s)return null;const V=n.filter(H=>!(g!=="all"&&H.category!==g||w!=="all"&&H.status!==w)),R={total:n.length,critical:n.filter(H=>E(H.probability,H.impact)>=6).length,active:n.filter(H=>!["resolved","accepted"].includes(H.status)).length,resolved:n.filter(H=>H.status==="resolved").length};return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-600 to-orange-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(dr,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-red-100 text-sm mt-1",children:a})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200 flex-shrink-0",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-3 border-2 border-blue-200",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-1",children:" "}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:R.total})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 border-2 border-red-200",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-1",children:""}),e.jsx("div",{className:"text-2xl font-bold text-red-600",children:R.critical})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 border-2 border-orange-200",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-1",children:""}),e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:R.active})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 border-2 border-green-200",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-1",children:""}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:R.resolved})]})]})}),e.jsx("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200 flex-shrink-0",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("select",{value:g,onChange:H=>y(H.target.value),className:"px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-red-500 outline-none text-sm",children:[e.jsx("option",{value:"all",children:" "}),xh.map(H=>e.jsx("option",{value:H,children:H},H))]}),e.jsxs("select",{value:w,onChange:H=>N(H.target.value),className:"px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-red-500 outline-none text-sm",children:[e.jsx("option",{value:"all",children:" "}),Object.entries(Py).map(([H,ee])=>e.jsx("option",{value:H,children:ee},H))]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[!o&&e.jsxs("button",{onClick:()=>c(!0),className:"w-full mb-4 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-red-600 to-orange-600 text-white rounded-lg hover:from-red-700 hover:to-orange-700 transition-all font-semibold",children:[e.jsx(We,{className:"w-5 h-5"})," "]}),o&&e.jsxs("div",{className:"mb-4 bg-red-50 border-2 border-red-200 rounded-xl p-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-3",children:" "}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" "}),e.jsx("input",{type:"text",value:m.title,onChange:H=>f({...m,title:H.target.value}),className:"w-full px-4 py-2 border-2 border-red-300 rounded-lg focus:border-red-500 outline-none",placeholder:"  "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsx("textarea",{value:m.description,onChange:H=>f({...m,description:H.target.value}),className:"w-full px-4 py-2 border-2 border-red-300 rounded-lg focus:border-red-500 outline-none resize-none",rows:3,placeholder:"  "})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsxs("select",{value:m.probability,onChange:H=>f({...m,probability:H.target.value}),className:"w-full px-4 py-2 border-2 border-red-300 rounded-lg focus:border-red-500 outline-none",children:[e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"medium",children:""}),e.jsx("option",{value:"high",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsxs("select",{value:m.impact,onChange:H=>f({...m,impact:H.target.value}),className:"w-full px-4 py-2 border-2 border-red-300 rounded-lg focus:border-red-500 outline-none",children:[e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"medium",children:""}),e.jsx("option",{value:"high",children:""})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsx("select",{value:m.category,onChange:H=>f({...m,category:H.target.value}),className:"w-full px-4 py-2 border-2 border-red-300 rounded-lg focus:border-red-500 outline-none",children:xh.map(H=>e.jsx("option",{value:H,children:H},H))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" "}),e.jsx("textarea",{value:m.mitigationPlan,onChange:H=>f({...m,mitigationPlan:H.target.value}),className:"w-full px-4 py-2 border-2 border-red-300 rounded-lg focus:border-red-500 outline-none resize-none",rows:2,placeholder:"    "})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:S,disabled:!m.title.trim(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 font-semibold",children:[e.jsx(is,{className:"w-4 h-4"}),""]}),e.jsx("button",{onClick:()=>{c(!1),f({title:"",description:"",probability:"medium",impact:"medium",category:xh[0],status:"identified",mitigationPlan:""})},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-semibold",children:""})]})]})]}),p?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"..."}):V.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Or,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold",children:n.length===0?"  ":"    "}),e.jsx("p",{className:"text-sm mt-2",children:n.length===0?"   ":" "})]}):e.jsx("div",{className:"space-y-3",children:V.map(H=>{const ee=E(H.probability,H.impact);return e.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4 hover:border-red-400 transition-all",children:e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h5",{className:"font-bold text-gray-900 text-lg",children:H.title}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold text-white ${z(ee)}`,children:O(ee)})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-3",children:H.description}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${C(H.probability)}`,children:[": ",TW[H.probability]]}),e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${A(H.impact)}`,children:[": ",EW[H.impact]]}),e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-full text-xs font-semibold",children:H.category}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${X(H.status)}`,children:Py[H.status]})]}),H.mitigationPlan&&e.jsxs("div",{className:"bg-green-50 border-l-4 border-green-500 p-3 rounded",children:[e.jsx("div",{className:"text-xs font-semibold text-green-700 mb-1",children:" :"}),e.jsx("div",{className:"text-sm text-green-900",children:H.mitigationPlan})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ve,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[": ",I(H.createdAt)]})]}),H.updatedAt&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ya,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[": ",I(H.updatedAt)]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx("select",{value:H.status,onChange:se=>_(H.id,{status:se.target.value}),className:"px-3 py-1 border-2 border-gray-300 rounded-lg text-xs focus:border-red-500 outline-none",children:Object.entries(Py).map(([se,W])=>e.jsx("option",{value:se,children:W},se))}),e.jsx("button",{onClick:()=>T(H.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"",children:e.jsx(tt,{className:"w-4 h-4"})})]})]})},H.id)})})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center flex-shrink-0",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[": ",e.jsx("span",{className:"font-bold text-red-600",children:V.length})," "," ",n.length]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})})},DW=({isOpen:s,onClose:t,projectId:r,projectName:a})=>{const[n,i]=j.useState([]),[o,c]=j.useState([]),[u,h]=j.useState([]),[m,f]=j.useState("month"),[p,v]=j.useState(!1);j.useEffect(()=>{s&&r&&g()},[s,r,m]),j.useEffect(()=>{if(s){const S=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${S}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const S=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(S||"0")*-1)}},[s]);const g=async()=>{if(r){v(!0);try{const S=await fetch(`http://localhost:8001/admin/api/projects/${r}/analytics?period=${m}`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(S.ok){const _=await S.json();i(_.metrics||[]),c(_.timeline||[]),h(_.teamPerformance||[])}else i([{name:" ",value:42,target:50,unit:"",trend:"up",trendValue:12,icon:ut,color:"#10B981"},{name:" ",value:245,target:280,unit:"",trend:"stable",trendValue:0,icon:Ve,color:"#3B82F6"},{name:"  ",value:85,target:90,unit:"%",trend:"up",trendValue:5,icon:Lr,color:"#8B5CF6"},{name:"",value:92,target:100,unit:"%",trend:"down",trendValue:-3,icon:xt,color:"#F59E0B"},{name:" ",value:8,target:10,unit:"",trend:"stable",trendValue:0,icon:it,color:"#EC4899"},{name:" ",value:67,target:100,unit:"%",trend:"up",trendValue:8,icon:Qe,color:"#14B8A6"}]),c([{date:"2025-01-20",completedTasks:8,plannedTasks:10,hoursSpent:45,hoursPlanned:50},{date:"2025-01-21",completedTasks:7,plannedTasks:8,hoursSpent:38,hoursPlanned:40},{date:"2025-01-22",completedTasks:9,plannedTasks:12,hoursSpent:52,hoursPlanned:60},{date:"2025-01-23",completedTasks:6,plannedTasks:7,hoursSpent:35,hoursPlanned:35},{date:"2025-01-24",completedTasks:12,plannedTasks:13,hoursSpent:75,hoursPlanned:65}]),h([{id:1,name:" ",tasksCompleted:15,tasksAssigned:18,hoursWorked:92,efficiency:95},{id:2,name:" ",tasksCompleted:12,tasksAssigned:14,hoursWorked:78,efficiency:88},{id:3,name:" ",tasksCompleted:10,tasksAssigned:12,hoursWorked:65,efficiency:92},{id:4,name:" ",tasksCompleted:5,tasksAssigned:6,hoursWorked:30,efficiency:78}])}catch(S){console.error("Error loading analytics:",S)}finally{v(!1)}}},y=S=>{const _=new Date(S);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"short"}).format(_)},w=(S,_)=>{const T=S/_*100;return T>=90?"bg-green-500":T>=70?"bg-yellow-500":"bg-red-500"},N=S=>S==="up"?e.jsx(xt,{className:"w-4 h-4"}):S==="down"?e.jsx(Da,{className:"w-4 h-4"}):e.jsx("span",{className:"w-4 h-4 inline-block"}),k=S=>S==="up"?"text-green-600":S==="down"?"text-red-600":"text-gray-600";return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-7xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Vr,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-blue-100 text-sm mt-1",children:a})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>f("week"),className:`px-4 py-2 rounded-lg font-semibold text-sm transition-all ${m==="week"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:""}),e.jsx("button",{onClick:()=>f("month"),className:`px-4 py-2 rounded-lg font-semibold text-sm transition-all ${m==="month"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:""}),e.jsx("button",{onClick:()=>f("quarter"),className:`px-4 py-2 rounded-lg font-semibold text-sm transition-all ${m==="quarter"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:""})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(wt,{className:"w-4 h-4"}),e.jsxs("span",{children:[": ",new Date().toLocaleDateString("ru-RU")]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:p?e.jsx("div",{className:"text-center py-12 text-gray-500",children:" ..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Lr,{className:"w-5 h-5 text-blue-600"})," "]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map((S,_)=>{const T=S.icon,E=S.value/S.target*100;return e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4 hover:border-blue-400 transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center text-white",style:{backgroundColor:S.color},children:e.jsx(T,{className:"w-5 h-5"})}),e.jsxs("div",{className:`flex items-center gap-1 ${k(S.trend)}`,children:[N(S.trend),S.trendValue!==0&&e.jsxs("span",{className:"text-xs font-bold",children:[S.trendValue>0?"+":"",S.trendValue,S.unit==="%"?"%":""]})]})]}),e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:S.name}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:[S.value," ",S.unit]}),e.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[": ",S.target," ",S.unit]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all ${w(S.value,S.target)}`,style:{width:`${Math.min(E,100)}%`}})})]},_)})})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Vr,{className:"w-5 h-5 text-purple-600"}),"  "]}),e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-6",children:[e.jsx("div",{className:"space-y-4",children:o.map((S,_)=>{const T=S.completedTasks/S.plannedTasks*100,E=S.hoursSpent/S.hoursPlanned*100;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:y(S.date)}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-600",children:[e.jsxs("span",{children:[": ",S.completedTasks,"/",S.plannedTasks]}),e.jsxs("span",{children:[": ",S.hoursSpent,"/",S.hoursPlanned]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsxs("div",{className:"h-8 bg-gray-200 rounded-lg overflow-hidden relative",children:[e.jsx("div",{className:"h-full bg-blue-500 transition-all flex items-center justify-center text-xs font-bold text-white",style:{width:`${Math.min(T,100)}%`},children:T>=30&&`${T.toFixed(0)}%`}),T<30&&e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center text-xs font-bold text-gray-600",children:[T.toFixed(0),"%"]})]})}),e.jsx("div",{children:e.jsxs("div",{className:"h-8 bg-gray-200 rounded-lg overflow-hidden relative",children:[e.jsx("div",{className:"h-full bg-purple-500 transition-all flex items-center justify-center text-xs font-bold text-white",style:{width:`${Math.min(E,100)}%`},children:E>=30&&`${E.toFixed(0)}%`}),E<30&&e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center text-xs font-bold text-gray-600",children:[E.toFixed(0),"%"]})]})})]})]},_)})}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 flex items-center gap-4 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded"}),e.jsx("span",{children:" "})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded"}),e.jsx("span",{children:" "})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(it,{className:"w-5 h-5 text-green-600"})," "]}),e.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-xl overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700",children:""}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-700",children:""}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-700",children:""}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-700",children:""}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-700",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:u.map(S=>{const _=S.tasksCompleted/S.tasksAssigned*100;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-xs",children:S.name[0]}),e.jsx("span",{className:"font-semibold text-gray-900 text-sm",children:S.name})]})}),e.jsx("td",{className:"px-4 py-3 text-center text-sm text-gray-700",children:S.tasksAssigned}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-sm font-bold text-gray-900",children:S.tasksCompleted}),e.jsxs("span",{className:`text-xs font-semibold ${_>=90?"text-green-600":_>=70?"text-yellow-600":"text-red-600"}`,children:[_.toFixed(0),"%"]})]})}),e.jsxs("td",{className:"px-4 py-3 text-center text-sm text-gray-700",children:[S.hoursWorked,""]}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"flex-1 max-w-[100px] h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${w(S.efficiency,100)} transition-all`,style:{width:`${S.efficiency}%`}})}),e.jsxs("span",{className:"text-sm font-bold text-gray-900 w-10",children:[S.efficiency,"%"]})]})})]},S.id)})})]})})]})]})}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end flex-shrink-0",children:e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})})]})}):null},RW=({isOpen:s,onClose:t,projectId:r,projectName:a,onRestore:n})=>{const[i,o]=j.useState([]),[c,u]=j.useState(new Set),[h,m]=j.useState(!1),[f,p]=j.useState({version:"",description:"",tags:[]}),[v,g]=j.useState(""),[y,w]=j.useState(!1);j.useEffect(()=>{s&&r&&N()},[s,r]),j.useEffect(()=>{if(s){const C=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${C}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const C=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(C||"0")*-1)}},[s]);const N=async()=>{if(r){w(!0);try{const C=await fetch(`http://localhost:8001/admin/api/projects/${r}/versions`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(C.ok){const A=await C.json();o(A.versions||[])}else o([{id:1,version:"v3.0.0",description:"    ",changes:["  ","    ","   ","    "],createdBy:"admin",createdAt:new Date().toISOString(),isCurrent:!0,snapshot:{name:"-  ",status:"in_progress",deadline:"2025-03-01",budget:5e5},tags:["release","major"]},{id:2,version:"v2.5.1",description:"   ",changes:["    ","    "," "],createdBy:"admin",createdAt:new Date(Date.now()-864e5*3).toISOString(),isCurrent:!1,snapshot:{name:"-  ",status:"in_progress",deadline:"2025-03-01",budget:48e4},tags:["bugfix","patch"]},{id:3,version:"v2.5.0",description:"  ",changes:["  ","   "," "],createdBy:"admin",createdAt:new Date(Date.now()-864e5*7).toISOString(),isCurrent:!1,snapshot:{name:"-  ",status:"planning",deadline:"2025-03-01",budget:45e4},tags:["feature","minor"]},{id:4,version:"v2.0.0",description:"  ",changes:["   ","  ","    ","   "],createdBy:"admin",createdAt:new Date(Date.now()-864e5*14).toISOString(),isCurrent:!1,snapshot:{name:"-  ",status:"planning",deadline:"2025-04-01",budget:4e5},tags:["release","major","redesign"]},{id:5,version:"v1.0.0",description:"  ",changes:[" "," "," "],createdBy:"admin",createdAt:new Date(Date.now()-864e5*30).toISOString(),isCurrent:!1,snapshot:{name:"-  ",status:"planning",deadline:"2025-05-01",budget:3e5},tags:["release","initial"]}])}catch(C){console.error("Error loading versions:",C)}finally{w(!1)}}},k=async()=>{if(!(!f.version.trim()||!f.description.trim()))try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/versions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(f)})).ok&&(p({version:"",description:"",tags:[]}),m(!1),await N())}catch(C){console.error("Error creating version:",C)}},S=async C=>{if(confirm("    ?    ."))try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/versions/${C}/restore`,{method:"POST",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&(await N(),n&&n(C),alert("  !"))}catch(A){console.error("Error restoring version:",A)}},_=C=>{const A=new Set(c);A.has(C)?A.delete(C):A.add(C),u(A)},T=()=>{v.trim()&&!f.tags.includes(v.trim())&&(p({...f,tags:[...f.tags,v.trim()]}),g(""))},E=C=>{p({...f,tags:f.tags.filter(A=>A!==C)})},z=C=>{const A=new Date(C);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(A)},O=C=>({release:"bg-blue-100 text-blue-700",major:"bg-red-100 text-red-700",minor:"bg-yellow-100 text-yellow-700",patch:"bg-green-100 text-green-700",bugfix:"bg-orange-100 text-orange-700",feature:"bg-purple-100 text-purple-700",redesign:"bg-pink-100 text-pink-700",initial:"bg-emerald-100 text-emerald-700"})[C]||"bg-gray-100 text-gray-700";return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-5xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(L4,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-indigo-100 text-sm mt-1",children:a})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L4,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-gray-600",children:" :"}),e.jsx("span",{className:"font-bold text-indigo-600",children:i.length})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(is,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-gray-600",children:":"}),e.jsx("span",{className:"font-bold text-green-600",children:i.find(C=>C.isCurrent)?.version||"-"})]})]}),!h&&e.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-semibold text-sm",children:[e.jsx(We,{className:"w-4 h-4"})," "]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[h&&e.jsxs("div",{className:"mb-6 bg-indigo-50 border-2 border-indigo-200 rounded-xl p-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-3",children:"  "}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" "}),e.jsx("input",{type:"text",value:f.version,onChange:C=>p({...f,version:C.target.value}),className:"w-full px-4 py-2 border-2 border-indigo-300 rounded-lg focus:border-indigo-500 outline-none",placeholder:"v1.0.0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:v,onChange:C=>g(C.target.value),onKeyPress:C=>C.key==="Enter"&&T(),className:"flex-1 px-4 py-2 border-2 border-indigo-300 rounded-lg focus:border-indigo-500 outline-none",placeholder:"release, major, etc."}),e.jsx("button",{onClick:T,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:e.jsx(We,{className:"w-4 h-4"})})]}),f.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:f.tags.map(C=>e.jsxs("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-700 rounded-full text-xs font-semibold flex items-center gap-1",children:[C,e.jsx("button",{onClick:()=>E(C),className:"hover:text-indigo-900",children:e.jsx(De,{className:"w-3 h-3"})})]},C))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" "}),e.jsx("textarea",{value:f.description,onChange:C=>p({...f,description:C.target.value}),className:"w-full px-4 py-2 border-2 border-indigo-300 rounded-lg focus:border-indigo-500 outline-none resize-none",rows:3,placeholder:"     "})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:k,disabled:!f.version.trim()||!f.description.trim(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 font-semibold",children:[e.jsx(is,{className:"w-4 h-4"}),""]}),e.jsx("button",{onClick:()=>{m(!1),p({version:"",description:"",tags:[]})},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-semibold",children:""})]})]})]}),y?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"  ..."}):i.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Ue,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold",children:"  "}),e.jsx("p",{className:"text-sm mt-2",children:"  "})]}):e.jsx("div",{className:"space-y-3",children:i.map(C=>e.jsxs("div",{className:`bg-white border-2 rounded-xl overflow-hidden transition-all ${C.isCurrent?"border-green-400 shadow-lg":"border-gray-200 hover:border-indigo-400"}`,children:[e.jsx("div",{className:`p-4 cursor-pointer ${C.isCurrent?"bg-green-50":"hover:bg-gray-50"}`,onClick:()=>_(C.id),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.has(C.id)?e.jsx(Ci,{className:"w-5 h-5 text-gray-500"}):e.jsx(Sn,{className:"w-5 h-5 text-gray-500"}),e.jsx("h5",{className:"font-bold text-gray-900 text-lg",children:C.version}),C.isCurrent&&e.jsxs("span",{className:"px-2 py-1 bg-green-500 text-white rounded-full text-xs font-bold flex items-center gap-1",children:[e.jsx(is,{className:"w-3 h-3"}),""]}),C.tags.map(A=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${O(A)}`,children:A},A))]}),e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:C.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(lt,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:C.createdBy})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ve,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:z(C.createdAt)})]})]})]}),!C.isCurrent&&e.jsxs("button",{onClick:A=>{A.stopPropagation(),S(C.id)},className:"ml-4 flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-semibold text-sm",children:[e.jsx(Cn,{className:"w-4 h-4"}),""]})]})}),c.has(C.id)&&e.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 space-y-4",children:[C.changes.length>0&&e.jsxs("div",{children:[e.jsx("h6",{className:"text-sm font-semibold text-gray-700 mb-2",children:":"}),e.jsx("ul",{className:"space-y-1",children:C.changes.map((A,X)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700",children:[e.jsx("span",{className:"text-indigo-600 mt-1",children:""}),e.jsx("span",{children:A})]},X))})]}),e.jsxs("div",{children:[e.jsx("h6",{className:"text-sm font-semibold text-gray-700 mb-2",children:" :"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(C.snapshot).map(([A,X])=>e.jsxs("div",{className:"bg-white rounded-lg p-2 border border-gray-200",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:A}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:String(X)})]},A))})]})]})]},C.id))})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Ge,{className:"w-4 h-4"}),e.jsx("span",{children:"    "})]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})}):null},Rk=[{value:"date",label:" ",icon:wt},{value:"deadline",label:" ",icon:Ve},{value:"status",label:" ",icon:ut},{value:"budget",label:"",icon:Ge},{value:"custom",label:"",icon:sa}],Mk=[{value:"once",label:" "},{value:"daily",label:""},{value:"weekly",label:""},{value:"monthly",label:""}],MW=["planned","in_progress","review","testing","completed","on_hold","cancelled"],OW=({isOpen:s,onClose:t,projectId:r,projectName:a})=>{const[n,i]=j.useState([]),[o,c]=j.useState(!1),[u,h]=j.useState(null),[m,f]=j.useState({title:"",description:"",triggerType:"date",triggerValue:"",repeatType:"once",recipients:[]}),[p,v]=j.useState(""),[g,y]=j.useState(!1);j.useEffect(()=>{s&&r&&w()},[s,r]),j.useEffect(()=>{if(s){const A=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${A}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const A=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(A||"0")*-1)}},[s]);const w=async()=>{if(r){y(!0);try{const A=await fetch(`http://localhost:8001/admin/api/projects/${r}/reminders`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(A.ok){const X=await A.json();i(X.reminders||[])}else i([{id:1,title:"  ",description:"  3    ",triggerType:"deadline",triggerValue:"3",repeatType:"once",recipients:["admin@example.com","manager@example.com"],isActive:!0,lastTriggered:new Date(Date.now()-864e5).toISOString(),createdAt:new Date(Date.now()-864e5*7).toISOString(),createdBy:"admin"},{id:2,title:" ",description:"   80% ",triggerType:"budget",triggerValue:"80",repeatType:"once",recipients:["admin@example.com"],isActive:!0,createdAt:new Date(Date.now()-864e5*14).toISOString(),createdBy:"admin"},{id:3,title:" ",description:"     ",triggerType:"date",triggerValue:"monday",repeatType:"weekly",recipients:["admin@example.com","client@example.com"],isActive:!0,lastTriggered:new Date(Date.now()-864e5*2).toISOString(),createdAt:new Date(Date.now()-864e5*21).toISOString(),createdBy:"admin"},{id:4,title:'   ""',description:"     ",triggerType:"status",triggerValue:"completed",repeatType:"once",recipients:["team@example.com"],isActive:!1,createdAt:new Date(Date.now()-864e5*5).toISOString(),createdBy:"admin"}])}catch(A){console.error("Error loading reminders:",A)}finally{y(!1)}}},N=async()=>{if(m.title.trim())try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/reminders`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(m)})).ok&&(f({title:"",description:"",triggerType:"date",triggerValue:"",repeatType:"once",recipients:[]}),c(!1),await w())}catch(A){console.error("Error adding reminder:",A)}},k=async(A,X)=>{try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/reminders/${A}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({isActive:X})})).ok&&await w()}catch(I){console.error("Error toggling reminder:",I)}},S=async A=>{if(confirm("  ?"))try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/reminders/${A}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&await w()}catch(X){console.error("Error deleting reminder:",X)}},_=()=>{p.trim()&&!m.recipients.includes(p.trim())&&(f({...m,recipients:[...m.recipients,p.trim()]}),v(""))},T=A=>{f({...m,recipients:m.recipients.filter(X=>X!==A)})},E=()=>{switch(m.triggerType){case"date":return e.jsx("input",{type:"datetime-local",value:m.triggerValue,onChange:A=>f({...m,triggerValue:A.target.value}),className:"w-full px-4 py-2 border-2 border-blue-300 rounded-lg focus:border-blue-500 outline-none"});case"deadline":return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",value:m.triggerValue,onChange:A=>f({...m,triggerValue:A.target.value}),className:"flex-1 px-4 py-2 border-2 border-blue-300 rounded-lg focus:border-blue-500 outline-none",placeholder:" ",min:"1"}),e.jsx("span",{className:"text-sm text-gray-600",children:"  "})]});case"status":return e.jsxs("select",{value:m.triggerValue,onChange:A=>f({...m,triggerValue:A.target.value}),className:"w-full px-4 py-2 border-2 border-blue-300 rounded-lg focus:border-blue-500 outline-none",children:[e.jsx("option",{value:"",children:" "}),MW.map(A=>e.jsx("option",{value:A,children:A},A))]});case"budget":return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",value:m.triggerValue,onChange:A=>f({...m,triggerValue:A.target.value}),className:"flex-1 px-4 py-2 border-2 border-blue-300 rounded-lg focus:border-blue-500 outline-none",placeholder:" ",min:"1",max:"100"}),e.jsx("span",{className:"text-sm text-gray-600",children:"%  "})]});case"custom":return e.jsx("input",{type:"text",value:m.triggerValue,onChange:A=>f({...m,triggerValue:A.target.value}),className:"w-full px-4 py-2 border-2 border-blue-300 rounded-lg focus:border-blue-500 outline-none",placeholder:" "});default:return null}},z=A=>{switch(A.triggerType){case"date":return`: ${new Date(A.triggerValue).toLocaleDateString("ru-RU")}`;case"deadline":return` ${A.triggerValue}   `;case"status":return`: ${A.triggerValue}`;case"budget":return`: ${A.triggerValue}%`;case"custom":return A.triggerValue;default:return""}},O=A=>{const X=new Date(A);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}).format(X)};if(!s)return null;const C=n.filter(A=>A.isActive).length;return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-5xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(sa,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-blue-100 text-sm mt-1",children:a})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(sa,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-gray-600",children:":"}),e.jsx("span",{className:"font-bold text-blue-600",children:n.length})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ut,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-gray-600",children:":"}),e.jsx("span",{className:"font-bold text-green-600",children:C})]})]}),!o&&e.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold text-sm",children:[e.jsx(We,{className:"w-4 h-4"})," "]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[o&&e.jsxs("div",{className:"mb-6 bg-blue-50 border-2 border-blue-200 rounded-xl p-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-4",children:" "}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsx("input",{type:"text",value:m.title,onChange:A=>f({...m,title:A.target.value}),className:"w-full px-4 py-2 border-2 border-blue-300 rounded-lg focus:border-blue-500 outline-none",placeholder:"  "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsx("textarea",{value:m.description,onChange:A=>f({...m,description:A.target.value}),className:"w-full px-4 py-2 border-2 border-blue-300 rounded-lg focus:border-blue-500 outline-none resize-none",rows:2,placeholder:" "})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" "}),e.jsx("select",{value:m.triggerType,onChange:A=>f({...m,triggerType:A.target.value}),className:"w-full px-4 py-2 border-2 border-blue-300 rounded-lg focus:border-blue-500 outline-none",children:Rk.map(A=>e.jsx("option",{value:A.value,children:A.label},A.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsx("select",{value:m.repeatType,onChange:A=>f({...m,repeatType:A.target.value}),className:"w-full px-4 py-2 border-2 border-blue-300 rounded-lg focus:border-blue-500 outline-none",children:Mk.map(A=>e.jsx("option",{value:A.value,children:A.label},A.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" "}),E()]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"email",value:p,onChange:A=>v(A.target.value),onKeyPress:A=>A.key==="Enter"&&_(),className:"flex-1 px-4 py-2 border-2 border-blue-300 rounded-lg focus:border-blue-500 outline-none",placeholder:"Email "}),e.jsx("button",{onClick:_,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:e.jsx(We,{className:"w-4 h-4"})})]}),m.recipients.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:m.recipients.map(A=>e.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-semibold flex items-center gap-2",children:[e.jsx(lt,{className:"w-3.5 h-3.5"}),A,e.jsx("button",{onClick:()=>T(A),className:"hover:text-blue-900",children:e.jsx(De,{className:"w-3.5 h-3.5"})})]},A))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:N,disabled:!m.title.trim()||m.recipients.length===0,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 font-semibold",children:[e.jsx(is,{className:"w-4 h-4"}),""]}),e.jsx("button",{onClick:()=>{c(!1),f({title:"",description:"",triggerType:"date",triggerValue:"",repeatType:"once",recipients:[]})},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-semibold",children:""})]})]})]}),g?e.jsx("div",{className:"text-center py-12 text-gray-500",children:" ..."}):n.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(sa,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold",children:" "}),e.jsx("p",{className:"text-sm mt-2",children:"   "})]}):e.jsx("div",{className:"space-y-3",children:n.map(A=>{const X=Rk.find(I=>I.value===A.triggerType)?.icon||sa;return e.jsx("div",{className:`bg-white border-2 rounded-xl p-4 transition-all ${A.isActive?"border-blue-400 hover:border-blue-500":"border-gray-200 opacity-60"}`,children:e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${A.isActive?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-400"}`,children:e.jsx(X,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-bold text-gray-900 text-lg mb-1",children:A.title}),A.description&&e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:A.description}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-semibold",children:z(A)}),e.jsxs("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-semibold flex items-center gap-1",children:[e.jsx(dF,{className:"w-3 h-3"}),Mk.find(I=>I.value===A.repeatType)?.label]}),e.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-semibold flex items-center gap-1",children:[e.jsx(lt,{className:"w-3 h-3"}),A.recipients.length," "]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ve,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[": ",O(A.createdAt)]})]}),A.lastTriggered&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(sa,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[": ",O(A.lastTriggered)]})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx("button",{onClick:()=>k(A.id,!A.isActive),className:`p-2 rounded-lg transition-colors ${A.isActive?"text-green-600 hover:bg-green-100":"text-gray-400 hover:bg-gray-100"}`,title:A.isActive?"":"",children:A.isActive?e.jsx(PF,{className:"w-5 h-5"}):e.jsx(gE,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>S(A.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"",children:e.jsx(tt,{className:"w-4 h-4"})})]})]})},A.id)})})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Ge,{className:"w-4 h-4"}),e.jsx("span",{children:"     "})]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})})},LW=({isOpen:s,onClose:t,projectId:r,projectName:a})=>{const[n,i]=j.useState([]),[o,c]=j.useState([]),[u,h]=j.useState(new Set),[m,f]=j.useState(null),[p,v]=j.useState(!1),[g,y]=j.useState({fromTask:0,toTask:0,type:"blocks"}),[w,N]=j.useState(!1);j.useEffect(()=>{s&&r&&k()},[s,r]),j.useEffect(()=>{if(s){const R=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${R}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const R=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(R||"0")*-1)}},[s]);const k=async()=>{if(r){N(!0);try{const R=await fetch(`http://localhost:8001/admin/api/projects/${r}/task-dependencies`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(R.ok){const H=await R.json();i(H.tasks||[]),c(H.dependencies||[])}else i([{id:1,title:" ",status:"completed",assignee:"",deadline:"2025-02-01",dependencies:[],blockedBy:[]},{id:2,title:" ",status:"completed",assignee:"",deadline:"2025-02-05",dependencies:[],blockedBy:[]},{id:3,title:" ",status:"in_progress",assignee:"",deadline:"2025-02-15",dependencies:[1],blockedBy:[]},{id:4,title:" ",status:"in_progress",assignee:"",deadline:"2025-02-20",dependencies:[2],blockedBy:[]},{id:5,title:"   ",status:"pending",assignee:"",deadline:"2025-02-25",dependencies:[3,4],blockedBy:[]},{id:6,title:"",status:"pending",assignee:"",deadline:"2025-03-01",dependencies:[5],blockedBy:[]},{id:7,title:" ",status:"pending",deadline:"2025-03-05",dependencies:[6],blockedBy:[]},{id:8,title:"",status:"pending",assignee:"",deadline:"2025-03-10",dependencies:[7],blockedBy:[]}]),c([{fromTask:1,toTask:3,type:"blocks"},{fromTask:2,toTask:4,type:"blocks"},{fromTask:3,toTask:5,type:"blocks"},{fromTask:4,toTask:5,type:"blocks"},{fromTask:5,toTask:6,type:"blocks"},{fromTask:6,toTask:7,type:"blocks"},{fromTask:7,toTask:8,type:"blocks"}])}catch(R){console.error("Error loading dependencies:",R)}finally{N(!1)}}},S=async()=>{if(!(!g.fromTask||!g.toTask)){if(g.fromTask===g.toTask){alert("      ");return}if(T(g.fromTask,g.toTask)){alert("   !");return}try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/task-dependencies`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(g)})).ok&&(y({fromTask:0,toTask:0,type:"blocks"}),v(!1),await k())}catch(R){console.error("Error adding dependency:",R)}}},_=async(R,H)=>{if(confirm("  ?"))try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/task-dependencies/${R}/${H}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&await k()}catch(ee){console.error("Error removing dependency:",ee)}},T=(R,H)=>{const ee=new Set,se=[H];for(;se.length>0;){const W=se.shift();if(W===R)return!0;if(ee.has(W))continue;ee.add(W);const te=n.find(J=>J.id===W);te&&se.push(...te.dependencies)}return!1},E=R=>{const H=new Set(u);H.has(R)?H.delete(R):H.add(R),h(H)},z=R=>n.find(H=>H.id===R),O=R=>{switch(R){case"completed":return"bg-green-100 text-green-700 border-green-300";case"in_progress":return"bg-blue-100 text-blue-700 border-blue-300";case"pending":return"bg-gray-100 text-gray-700 border-gray-300";case"blocked":return"bg-red-100 text-red-700 border-red-300";default:return"bg-gray-100 text-gray-700 border-gray-300"}},C=R=>{switch(R){case"completed":return e.jsx(ut,{className:"w-4 h-4"});case"in_progress":return e.jsx(Ve,{className:"w-4 h-4"});case"pending":return e.jsx(Lr,{className:"w-4 h-4"});case"blocked":return e.jsx(Ge,{className:"w-4 h-4"});default:return e.jsx(Lr,{className:"w-4 h-4"})}},A=R=>{const H=new Date(R);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"short"}).format(H)},X=()=>{const R=new Set,H=[],ee=(W,te)=>{if(R.has(W)||(R.add(W),!z(W)))return;const K=[...te,W],$=n.filter(ie=>ie.dependencies.includes(W));$.length===0?H.push(K):$.forEach(ie=>ee(ie.id,K)),R.delete(W)};return n.filter(W=>W.dependencies.length===0).forEach(W=>ee(W.id,[])),H.reduce((W,te)=>te.length>W.length?te:W,[])};if(!s)return null;const I=X(),V=n.filter(R=>R.dependencies.some(H=>{const ee=z(H);return ee&&ee.status!=="completed"}));return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Bh,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"  "}),e.jsx("p",{className:"text-purple-100 text-sm mt-1",children:a})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bh,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-gray-600",children:" :"}),e.jsx("span",{className:"font-bold text-purple-600",children:n.length})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Nl,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-gray-600",children:":"}),e.jsx("span",{className:"font-bold text-blue-600",children:o.length})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"w-4 h-4 text-orange-600"}),e.jsx("span",{className:"text-gray-600",children:":"}),e.jsx("span",{className:"font-bold text-orange-600",children:V.length})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Lr,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"text-gray-600",children:" :"}),e.jsxs("span",{className:"font-bold text-red-600",children:[I.length," "]})]})]}),!p&&e.jsxs("button",{onClick:()=>v(!0),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-semibold text-sm",children:[e.jsx(We,{className:"w-4 h-4"})," "]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[p&&e.jsxs("div",{className:"mb-6 bg-purple-50 border-2 border-purple-200 rounded-xl p-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-4",children:" "}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" ()"}),e.jsxs("select",{value:g.fromTask,onChange:R=>y({...g,fromTask:Number(R.target.value)}),className:"w-full px-4 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 outline-none",children:[e.jsx("option",{value:0,children:" "}),n.map(R=>e.jsx("option",{value:R.id,children:R.title},R.id))]})]}),e.jsx("div",{className:"text-center text-2xl text-purple-600 font-bold",children:""}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" ()"}),e.jsxs("select",{value:g.toTask,onChange:R=>y({...g,toTask:Number(R.target.value)}),className:"w-full px-4 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 outline-none",children:[e.jsx("option",{value:0,children:" "}),n.map(R=>e.jsx("option",{value:R.id,children:R.title},R.id))]})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs("button",{onClick:S,disabled:!g.fromTask||!g.toTask,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 font-semibold",children:[e.jsx(Nl,{className:"w-4 h-4"})," "]}),e.jsx("button",{onClick:()=>{v(!1),y({fromTask:0,toTask:0,type:"blocks"})},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-semibold",children:""})]})]}),I.length>0&&e.jsxs("div",{className:"mb-6 bg-red-50 border-2 border-red-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Lr,{className:"w-5 h-5 text-red-600"}),e.jsx("h4",{className:"font-bold text-gray-900",children:" "})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:I.map((R,H)=>{const ee=z(R);return ee?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-700 rounded-lg text-sm font-semibold border-2 border-red-300",children:ee.title}),H<I.length-1&&e.jsx(Sn,{className:"w-4 h-4 text-red-400"})]},R):null})})]}),w?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"..."}):n.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Bh,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold",children:"   "})]}):e.jsx("div",{className:"space-y-3",children:n.map(R=>{const H=u.has(R.id),ee=R.dependencies.map(z).filter(Boolean),se=n.filter(J=>J.dependencies.includes(R.id)),W=I.includes(R.id),te=R.dependencies.some(J=>{const K=z(J);return K&&K.status!=="completed"});return e.jsxs("div",{className:`bg-white border-2 rounded-xl transition-all ${W?"border-red-400 shadow-lg":te?"border-orange-400":"border-gray-200 hover:border-purple-400"}`,children:[e.jsx("div",{className:`p-4 cursor-pointer ${W?"bg-red-50":te?"bg-orange-50":"hover:bg-gray-50"}`,onClick:()=>E(R.id),children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[H?e.jsx(Ci,{className:"w-5 h-5 text-gray-500 mt-0.5"}):e.jsx(Sn,{className:"w-5 h-5 text-gray-500 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h5",{className:"font-bold text-gray-900 text-lg",children:R.title}),W&&e.jsx("span",{className:"px-2 py-0.5 bg-red-500 text-white rounded-full text-xs font-bold",children:" "}),te&&e.jsx("span",{className:"px-2 py-0.5 bg-orange-500 text-white rounded-full text-xs font-bold",children:""})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border-2 flex items-center gap-1 ${O(R.status)}`,children:[C(R.status),R.status]}),R.assignee&&e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-semibold",children:R.assignee}),R.deadline&&e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-semibold",children:A(R.deadline)}),e.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-full text-xs font-semibold",children:[ee.length," "]}),e.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-full text-xs font-semibold",children:[": ",se.length]})]})]})]})})}),H&&e.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 space-y-4",children:[ee.length>0&&e.jsxs("div",{children:[e.jsxs("h6",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(Nl,{className:"w-4 h-4"})," :"]}),e.jsx("div",{className:"space-y-2",children:ee.map(J=>e.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg p-3 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${O(J.status)}`,children:J.status}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:J.title})]}),e.jsx("button",{onClick:K=>{K.stopPropagation(),_(J.id,R.id)},className:"p-1 text-red-600 hover:bg-red-100 rounded transition-colors",title:" ",children:e.jsx(q4,{className:"w-4 h-4"})})]},J.id))})]}),se.length>0&&e.jsxs("div",{children:[e.jsxs("h6",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(Ge,{className:"w-4 h-4"}),":"]}),e.jsx("div",{className:"space-y-2",children:se.map(J=>e.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg p-3 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${O(J.status)}`,children:J.status}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:J.title})]}),e.jsx("button",{onClick:K=>{K.stopPropagation(),_(R.id,J.id)},className:"p-1 text-red-600 hover:bg-red-100 rounded transition-colors",title:" ",children:e.jsx(q4,{className:"w-4 h-4"})})]},J.id))})]})]})]},R.id)})})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center flex-shrink-0",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx(Ge,{className:"w-4 h-4 inline mr-1"}),"      "]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})})},G0=["  "," "," "," ","NDA","SLA",""],PW=({isOpen:s,onClose:t,projectId:r,projectName:a})=>{const[n,i]=j.useState([]),[o,c]=j.useState(!1),[u,h]=j.useState(null),[m,f]=j.useState({title:"",type:G0[0],description:"",amount:0,startDate:"",endDate:"",status:"draft"}),[p,v]=j.useState(null),[g,y]=j.useState(!1);j.useEffect(()=>{s&&r&&w()},[s,r]),j.useEffect(()=>{if(s){const V=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${V}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const V=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(V||"0")*-1)}},[s]);const w=async()=>{if(r){y(!0);try{const V=await fetch(`http://localhost:8001/admin/api/projects/${r}/contracts`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(V.ok){const R=await V.json();i(R.contracts||[])}else i([{id:1,title:"   ",type:"  ",description:"   -    ",amount:5e5,startDate:"2025-01-01",endDate:"2025-06-30",status:"active",file:{name:"contract_main.pdf",url:"/files/contract_main.pdf",size:1024e3,uploadedAt:new Date().toISOString()},signedBy:" ",signedAt:"2025-01-01",createdAt:new Date(Date.now()-864e5*30).toISOString()},{id:2,title:"  1",type:"  ",description:"    ",amount:15e4,startDate:"2025-02-01",endDate:"2025-04-30",status:"active",file:{name:"addendum_01.pdf",url:"/files/addendum_01.pdf",size:512e3,uploadedAt:new Date(Date.now()-864e5*15).toISOString()},signedBy:" ",signedAt:"2025-02-01",createdAt:new Date(Date.now()-864e5*15).toISOString()},{id:3,title:"  ",type:"NDA",description:"NDA      ",amount:0,startDate:"2024-12-15",endDate:"2027-12-15",status:"active",file:{name:"nda.pdf",url:"/files/nda.pdf",size:256e3,uploadedAt:new Date(Date.now()-864e5*45).toISOString()},signedBy:" ",signedAt:"2024-12-15",createdAt:new Date(Date.now()-864e5*45).toISOString()},{id:4,title:"  ",type:" ",description:"    ",amount:5e4,startDate:"2025-07-01",endDate:"2026-07-01",status:"draft",createdAt:new Date(Date.now()-864e5*5).toISOString()}])}catch(V){console.error("Error loading contracts:",V)}finally{y(!1)}}},N=async()=>{if(m.title.trim())try{const V=new FormData;Object.entries(m).forEach(([H,ee])=>{V.append(H,String(ee))}),p&&V.append("file",p),(await fetch(`http://localhost:8001/admin/api/projects/${r}/contracts`,{method:"POST",headers:{Authorization:"Basic "+btoa("admin:qwerty123")},body:V})).ok&&(f({title:"",type:G0[0],description:"",amount:0,startDate:"",endDate:"",status:"draft"}),v(null),c(!1),await w())}catch(V){console.error("Error adding contract:",V)}},k=async V=>{if(confirm("  ?"))try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/contracts/${V}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&await w()}catch(R){console.error("Error deleting contract:",R)}},S=V=>{V.file&&window.open(V.file.url,"_blank")},_=V=>{const R=V.target.files?.[0];R&&v(R)},T=V=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0}).format(V),E=V=>V<1024?V+" B":V<1024*1024?(V/1024).toFixed(1)+" KB":(V/(1024*1024)).toFixed(1)+" MB",z=V=>{const R=new Date(V);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"long",year:"numeric"}).format(R)},O=V=>{switch(V){case"active":return"bg-green-100 text-green-700 border-green-300";case"draft":return"bg-gray-100 text-gray-700 border-gray-300";case"expired":return"bg-red-100 text-red-700 border-red-300";case"terminated":return"bg-orange-100 text-orange-700 border-orange-300";default:return"bg-gray-100 text-gray-700 border-gray-300"}},C=V=>{switch(V){case"active":return e.jsx(ut,{className:"w-4 h-4"});case"draft":return e.jsx(sr,{className:"w-4 h-4"});case"expired":return e.jsx(Ge,{className:"w-4 h-4"});case"terminated":return e.jsx(De,{className:"w-4 h-4"});default:return e.jsx(Ue,{className:"w-4 h-4"})}},A=V=>({draft:"",active:"",expired:"",terminated:""})[V]||V;if(!s)return null;const X=n.filter(V=>V.status==="active").length,I=n.filter(V=>V.status==="active").reduce((V,R)=>V+R.amount,0);return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ue,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-emerald-100 text-sm mt-1",children:a})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200 flex-shrink-0",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-3",children:[e.jsxs("div",{className:"bg-white rounded-xl p-3 border-2 border-blue-200",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-1",children:" "}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:n.length})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 border-2 border-green-200",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-1",children:""}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:X})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 border-2 border-emerald-200",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-1",children:" "}),e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:T(I)})]})]}),!o&&e.jsxs("button",{onClick:()=>c(!0),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors font-semibold text-sm",children:[e.jsx(We,{className:"w-4 h-4"})," "]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[o&&e.jsxs("div",{className:"mb-6 bg-emerald-50 border-2 border-emerald-200 rounded-xl p-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-4",children:" "}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsx("input",{type:"text",value:m.title,onChange:V=>f({...m,title:V.target.value}),className:"w-full px-4 py-2 border-2 border-emerald-300 rounded-lg focus:border-emerald-500 outline-none",placeholder:" "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsx("select",{value:m.type,onChange:V=>f({...m,type:V.target.value}),className:"w-full px-4 py-2 border-2 border-emerald-300 rounded-lg focus:border-emerald-500 outline-none",children:G0.map(V=>e.jsx("option",{value:V,children:V},V))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsx("textarea",{value:m.description,onChange:V=>f({...m,description:V.target.value}),className:"w-full px-4 py-2 border-2 border-emerald-300 rounded-lg focus:border-emerald-500 outline-none resize-none",rows:2,placeholder:"  "})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" ()"}),e.jsx("input",{type:"number",value:m.amount,onChange:V=>f({...m,amount:Number(V.target.value)}),className:"w-full px-4 py-2 border-2 border-emerald-300 rounded-lg focus:border-emerald-500 outline-none",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" "}),e.jsx("input",{type:"date",value:m.startDate,onChange:V=>f({...m,startDate:V.target.value}),className:"w-full px-4 py-2 border-2 border-emerald-300 rounded-lg focus:border-emerald-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" "}),e.jsx("input",{type:"date",value:m.endDate,onChange:V=>f({...m,endDate:V.target.value}),className:"w-full px-4 py-2 border-2 border-emerald-300 rounded-lg focus:border-emerald-500 outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" "}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("label",{className:"flex-1 px-4 py-2 border-2 border-dashed border-emerald-300 rounded-lg cursor-pointer hover:border-emerald-500 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx(jn,{className:"w-4 h-4"}),p?p.name:"  PDF  DOCX"]}),e.jsx("input",{type:"file",onChange:_,className:"hidden",accept:".pdf,.doc,.docx"})]}),p&&e.jsx("button",{onClick:()=>v(null),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",children:e.jsx(De,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:N,disabled:!m.title.trim(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 font-semibold",children:[e.jsx(is,{className:"w-4 h-4"}),""]}),e.jsx("button",{onClick:()=>{c(!1),f({title:"",type:G0[0],description:"",amount:0,startDate:"",endDate:"",status:"draft"}),v(null)},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-semibold",children:""})]})]})]}),g?e.jsx("div",{className:"text-center py-12 text-gray-500",children:" ..."}):n.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Ue,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold",children:" "}),e.jsx("p",{className:"text-sm mt-2",children:"   "})]}):e.jsx("div",{className:"space-y-3",children:n.map(V=>e.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4 hover:border-emerald-400 transition-all",children:e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h5",{className:"font-bold text-gray-900 text-lg",children:V.title}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border-2 flex items-center gap-1 ${O(V.status)}`,children:[C(V.status),A(V.status)]})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-3",children:V.description}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ue,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:V.type})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Qe,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"font-bold text-gray-900",children:T(V.amount)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(wt,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:z(V.startDate)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ve,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:z(V.endDate)})]})]}),V.file&&e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ue,{className:"w-8 h-8 text-emerald-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:V.file.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[E(V.file.size)," "," ",z(V.file.uploadedAt)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>S(V),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"",children:e.jsx(Tt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>S(V),className:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors",title:"",children:e.jsx(Vt,{className:"w-4 h-4"})})]})]})}),V.signedBy&&V.signedAt&&e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-gray-600",children:[e.jsx(lt,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[": ",V.signedBy,"  ",z(V.signedAt)]})]})]}),e.jsx("div",{className:"flex items-center gap-2 ml-4",children:e.jsx("button",{onClick:()=>k(V.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"",children:e.jsx(tt,{className:"w-4 h-4"})})})]})},V.id))})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center flex-shrink-0",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[": ",e.jsx("span",{className:"font-bold text-emerald-600",children:n.length})]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})})},fh=["#EF4444","#F59E0B","#10B981","#3B82F6","#8B5CF6","#EC4899","#14B8A6","#6B7280","#F97316","#06B6D4","#84CC16","#A855F7"],BW=({isOpen:s,onClose:t,onLabelsUpdated:r})=>{const[a,n]=j.useState([]),[i,o]=j.useState(!1),[c,u]=j.useState(null),[h,m]=j.useState(""),[f,p]=j.useState({name:"",color:fh[0],description:""}),[v,g]=j.useState(!1);j.useEffect(()=>{s&&y()},[s]),j.useEffect(()=>{if(s){const E=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${E}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const E=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(E||"0")*-1)}},[s]);const y=async()=>{g(!0);try{const E=await fetch("http://localhost:8001/admin/api/labels",{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(E.ok){const z=await E.json();n(z.labels||[])}else n([{id:1,name:"",color:"#EF4444",description:"  ",projectCount:5,createdAt:new Date().toISOString()},{id:2,name:"-",color:"#3B82F6",description:" -",projectCount:12,createdAt:new Date().toISOString()},{id:3,name:" ",color:"#10B981",description:"  ",projectCount:8,createdAt:new Date().toISOString()},{id:4,name:"",color:"#EC4899",description:"-",projectCount:15,createdAt:new Date().toISOString()},{id:5,name:"",color:"#8B5CF6",description:" ",projectCount:6,createdAt:new Date().toISOString()},{id:6,name:"",color:"#F59E0B",description:" ",projectCount:20,createdAt:new Date().toISOString()}])}catch(E){console.error("Error loading labels:",E)}finally{g(!1)}},w=async()=>{if(f.name.trim())try{(await fetch("http://localhost:8001/admin/api/labels",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(f)})).ok&&(p({name:"",color:fh[0],description:""}),o(!1),await y(),r&&r())}catch(E){console.error("Error creating label:",E)}},N=async E=>{if(f.name.trim())try{(await fetch(`http://localhost:8001/admin/api/labels/${E}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(f)})).ok&&(p({name:"",color:fh[0],description:""}),u(null),await y(),r&&r())}catch(z){console.error("Error updating label:",z)}},k=async E=>{const z=a.find(O=>O.id===E);if(!(z&&z.projectCount>0&&!confirm(` "${z.name}"   ${z.projectCount} . ?`)))try{(await fetch(`http://localhost:8001/admin/api/labels/${E}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&(await y(),r&&r())}catch(O){console.error("Error deleting label:",O)}},S=E=>{u(E.id),p({name:E.name,color:E.color,description:E.description}),o(!1)},_=()=>{u(null),o(!1),p({name:"",color:fh[0],description:""})},T=a.filter(E=>E.name.toLowerCase().includes(h.toLowerCase()));return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-pink-600 to-rose-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(mi,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-pink-100 text-sm mt-1",children:"   "})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200 flex-shrink-0",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Us,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:h,onChange:E=>m(E.target.value),className:"w-full pl-10 pr-4 py-2 border-2 border-gray-300 rounded-lg focus:border-pink-500 outline-none",placeholder:" ..."})]}),!i&&!c&&e.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 px-4 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-700 transition-colors font-semibold",children:[e.jsx(We,{className:"w-5 h-5"})," "]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[(i||c)&&e.jsxs("div",{className:"mb-6 bg-pink-50 border-2 border-pink-200 rounded-xl p-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-4",children:c?" ":" "}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsx("input",{type:"text",value:f.name,onChange:E=>p({...f,name:E.target.value}),className:"w-full px-4 py-2 border-2 border-pink-300 rounded-lg focus:border-pink-500 outline-none",placeholder:" ",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsx("input",{type:"text",value:f.description,onChange:E=>p({...f,description:E.target.value}),className:"w-full px-4 py-2 border-2 border-pink-300 rounded-lg focus:border-pink-500 outline-none",placeholder:" "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("div",{className:"flex flex-wrap gap-2",children:fh.map(E=>e.jsx("button",{onClick:()=>p({...f,color:E}),className:`w-10 h-10 rounded-lg border-4 transition-all ${f.color===E?"border-gray-900 scale-110":"border-gray-300 hover:scale-105"}`,style:{backgroundColor:E}},E))}),e.jsxs("div",{className:"mt-3 p-3 bg-white rounded-lg border-2 border-gray-200",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-2",children:":"}),e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-white text-sm font-semibold",style:{backgroundColor:f.color},children:[e.jsx(mi,{className:"w-4 h-4"}),f.name||" "]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>c?N(c):w(),disabled:!f.name.trim(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 font-semibold",children:[e.jsx(is,{className:"w-4 h-4"}),c?"":""]}),e.jsx("button",{onClick:_,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-semibold",children:""})]})]})]}),v?e.jsx("div",{className:"text-center py-12 text-gray-500",children:" ..."}):T.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(mi,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold",children:h?"  ":" "}),e.jsx("p",{className:"text-sm mt-2",children:h?"   ":"  "})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:T.map(E=>e.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4 hover:border-pink-400 transition-all",children:e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-white text-sm font-semibold mb-2",style:{backgroundColor:E.color},children:[e.jsx(mi,{className:"w-4 h-4"}),E.name]}),E.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:E.description}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx(wr,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:["  ",E.projectCount," "]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 ml-3",children:[e.jsx("button",{onClick:()=>S(E),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"",children:e.jsx(sr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>k(E.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"",children:e.jsx(tt,{className:"w-4 h-4"})})]})]})},E.id))})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center flex-shrink-0",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[" : ",e.jsx("span",{className:"font-bold text-pink-600",children:a.length})]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})}):null},FW=({isOpen:s,onClose:t,projectId:r,projectName:a})=>{const[n,i]=j.useState([]),[o,c]=j.useState(null),[u,h]=j.useState(null),[m,f]=j.useState([]),[p,v]=j.useState(!1);j.useEffect(()=>{s&&r&&g()},[s,r]),j.useEffect(()=>{if(s){const E=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${E}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const E=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(E||"0")*-1)}},[s]),j.useEffect(()=>{o&&u?y():f([])},[o,u]);const g=async()=>{if(r){v(!0);try{const E=await fetch(`http://localhost:8001/admin/api/projects/${r}/versions`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(E.ok){const z=await E.json();i(z.versions||[])}else i([{id:1,version:"v1.0.0",createdAt:"2025-01-01",snapshot:{name:"-",status:"planning",budget:3e5,deadline:"2025-05-01",team_size:3}},{id:2,version:"v2.0.0",createdAt:"2025-01-15",snapshot:{name:"-  ",status:"in_progress",budget:4e5,deadline:"2025-04-01",team_size:5,features:" "}},{id:3,version:"v2.5.0",createdAt:"2025-02-01",snapshot:{name:"-  ",status:"in_progress",budget:45e4,deadline:"2025-03-01",team_size:5,features:" "}},{id:4,version:"v3.0.0",createdAt:"2025-02-15",snapshot:{name:"-  ",status:"in_progress",budget:5e5,deadline:"2025-03-01",team_size:8,features:" ",integrations:"API, Webhooks"}}]),n.length>=2&&(c(n[n.length-2].id),h(n[n.length-1].id))}catch(E){console.error("Error loading versions:",E)}finally{v(!1)}}},y=()=>{const E=n.find(A=>A.id===o),z=n.find(A=>A.id===u);if(!E||!z)return;const O=new Set([...Object.keys(E.snapshot),...Object.keys(z.snapshot)]),C=[];O.forEach(A=>{const X=E.snapshot[A],I=z.snapshot[A];X===void 0&&I!==void 0?C.push({field:A,oldValue:null,newValue:I,type:"added"}):X!==void 0&&I===void 0?C.push({field:A,oldValue:X,newValue:null,type:"removed"}):X!==I?C.push({field:A,oldValue:X,newValue:I,type:"modified"}):C.push({field:A,oldValue:X,newValue:I,type:"unchanged"})}),f(C)},w=E=>E==null?"":typeof E=="boolean"?E?"":"":typeof E=="number"?E.toLocaleString():String(E),N=E=>{const z=new Date(E);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"long",year:"numeric"}).format(z)},k=E=>{switch(E){case"added":return e.jsx(We,{className:"w-4 h-4 text-green-600"});case"removed":return e.jsx(I4,{className:"w-4 h-4 text-red-600"});case"modified":return e.jsx(Ge,{className:"w-4 h-4 text-orange-600"});case"unchanged":return e.jsx(is,{className:"w-4 h-4 text-gray-400"});default:return null}},S=E=>{switch(E){case"added":return"bg-green-50 border-green-200";case"removed":return"bg-red-50 border-red-200";case"modified":return"bg-orange-50 border-orange-200";case"unchanged":return"bg-gray-50 border-gray-200";default:return"bg-gray-50 border-gray-200"}},_=E=>({name:"",status:"",budget:"",deadline:"",team_size:" ",features:"",integrations:""})[E]||E;if(!s)return null;const T=m.filter(E=>E.type!=="unchanged").length;return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(P4,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-indigo-100 text-sm mt-1",children:a})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200 flex-shrink-0",children:[e.jsxs("div",{className:"grid grid-cols-[1fr_auto_1fr] gap-4 items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" 1 ()"}),e.jsxs("select",{value:o||"",onChange:E=>c(Number(E.target.value)),className:"w-full px-4 py-2 border-2 border-indigo-300 rounded-lg focus:border-indigo-500 outline-none",children:[e.jsx("option",{value:"",children:" "}),n.map(E=>e.jsxs("option",{value:E.id,children:[E.version," - ",N(E.createdAt)]},E.id))]})]}),e.jsx(LL,{className:"w-8 h-8 text-indigo-600 mt-6"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" 2 ()"}),e.jsxs("select",{value:u||"",onChange:E=>h(Number(E.target.value)),className:"w-full px-4 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 outline-none",children:[e.jsx("option",{value:"",children:" "}),n.map(E=>e.jsxs("option",{value:E.id,children:[E.version," - ",N(E.createdAt)]},E.id))]})]})]}),o&&u&&e.jsx("div",{className:"mt-4 p-3 bg-indigo-50 border border-indigo-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-indigo-800",children:[e.jsx(Ge,{className:"w-4 h-4"}),e.jsxs("span",{children:[" : ",e.jsx("span",{className:"font-bold",children:T})]})]})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:p?e.jsx("div",{className:"text-center py-12 text-gray-500",children:" ..."}):!o||!u?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(P4,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold",children:"    "}),e.jsx("p",{className:"text-sm mt-2",children:"     "})]}):m.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(is,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold",children:" "}),e.jsx("p",{className:"text-sm mt-2",children:"  "})]}):e.jsx("div",{className:"space-y-3",children:m.map((E,z)=>e.jsx("div",{className:`border-2 rounded-xl p-4 ${S(E.type)}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5",children:k(E.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-bold text-gray-900 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:_(E.field)}),E.type==="added"&&e.jsx("span",{className:"px-2 py-0.5 bg-green-500 text-white rounded-full text-xs font-bold",children:""}),E.type==="removed"&&e.jsx("span",{className:"px-2 py-0.5 bg-red-500 text-white rounded-full text-xs font-bold",children:""}),E.type==="modified"&&e.jsx("span",{className:"px-2 py-0.5 bg-orange-500 text-white rounded-full text-xs font-bold",children:""})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs font-semibold text-gray-600 mb-1",children:[" (",n.find(O=>O.id===o)?.version,")"]}),e.jsx("div",{className:`px-3 py-2 rounded-lg text-sm font-mono ${E.type==="added"?"bg-gray-100 text-gray-400":E.type==="removed"?"bg-red-100 text-red-900 line-through":"bg-white"}`,children:w(E.oldValue)})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs font-semibold text-gray-600 mb-1",children:[" (",n.find(O=>O.id===u)?.version,")"]}),e.jsx("div",{className:`px-3 py-2 rounded-lg text-sm font-mono ${E.type==="removed"?"bg-gray-100 text-gray-400":E.type==="added"?"bg-green-100 text-green-900 font-bold":E.type==="modified"?"bg-orange-100 text-orange-900 font-bold":"bg-white"}`,children:w(E.newValue)})]})]})]})]})},z))})}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(We,{className:"w-4 h-4 text-green-600"}),e.jsxs("span",{className:"text-gray-600",children:[":"," ",e.jsx("span",{className:"font-bold text-green-600",children:m.filter(E=>E.type==="added").length})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"w-4 h-4 text-orange-600"}),e.jsxs("span",{className:"text-gray-600",children:[":"," ",e.jsx("span",{className:"font-bold text-orange-600",children:m.filter(E=>E.type==="modified").length})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I4,{className:"w-4 h-4 text-red-600"}),e.jsxs("span",{className:"text-gray-600",children:[":"," ",e.jsx("span",{className:"font-bold text-red-600",children:m.filter(E=>E.type==="removed").length})]})]})]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})})},zW=({isOpen:s,onClose:t,projectId:r,projectName:a})=>{const[n,i]=j.useState({visibility:"team",allowGuestView:!1,requireApproval:!0,notifyOnStatusChange:!0,notifyOnDeadline:!0,notifyOnBudgetAlert:!0,emailDigest:"daily",allowTaskCreation:"team",allowComments:"all",allowFileUpload:"team",autoArchiveCompleted:!1,autoArchiveDays:30,autoStatusChange:!1,autoAssignTasks:!1,slackNotifications:!1,slackWebhook:"",githubIntegration:!1,githubRepo:"",customFields:[]}),[o,c]=j.useState(!1),[u,h]=j.useState(!1),[m,f]=j.useState("privacy");j.useEffect(()=>{s&&r&&p()},[s,r]),j.useEffect(()=>{if(s){const g=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${g}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const g=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(g||"0")*-1)}},[s]);const p=async()=>{if(r){c(!0);try{const g=await fetch(`http://localhost:8001/admin/api/projects/${r}/settings`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(g.ok){const y=await g.json();i(y.settings||n)}}catch(g){console.error("Error loading settings:",g)}finally{c(!1)}}},v=async()=>{h(!0);try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/settings`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(n)})).ok?alert("  !"):alert("  ")}catch(g){console.error("Error saving settings:",g),alert("  ")}finally{h(!1)}};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-5xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-gray-700 to-gray-900 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ta,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-gray-300 text-sm mt-1",children:a})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50 flex-shrink-0 overflow-x-auto",children:[{key:"privacy",label:"",icon:qf},{key:"notifications",label:"",icon:sa},{key:"permissions",label:"",icon:it},{key:"automation",label:"",icon:Ta},{key:"integration",label:"",icon:tm}].map(g=>e.jsxs("button",{onClick:()=>f(g.key),className:`flex items-center gap-2 px-6 py-3 font-semibold whitespace-nowrap transition-colors ${m===g.key?"bg-white border-b-2 border-gray-700 text-gray-900":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(g.icon,{className:"w-4 h-4"}),g.label]},g.key))}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:o?e.jsx("div",{className:"text-center py-12 text-gray-500",children:" ..."}):e.jsxs(e.Fragment,{children:[m==="privacy"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-4",children:" "}),e.jsx("div",{className:"space-y-3",children:[{value:"private",label:"",desc:"  "},{value:"team",label:"",desc:"  "},{value:"organization",label:"",desc:"  "},{value:"public",label:"",desc:" "}].map(g=>e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:[e.jsx("input",{type:"radio",name:"visibility",value:g.value,checked:n.visibility===g.value,onChange:y=>i({...n,visibility:y.target.value}),className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:g.label}),e.jsx("div",{className:"text-sm text-gray-600",children:g.desc})]})]},g.value))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.allowGuestView,onChange:g=>i({...n,allowGuestView:g.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"  "}),e.jsx("div",{className:"text-sm text-gray-600",children:"    "})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.requireApproval,onChange:g=>i({...n,requireApproval:g.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"  "}),e.jsx("div",{className:"text-sm text-gray-600",children:"   "})]})]})]})]}),m==="notifications"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.notifyOnStatusChange,onChange:g=>i({...n,notifyOnStatusChange:g.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"   "}),e.jsx("div",{className:"text-sm text-gray-600",children:"    "})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.notifyOnDeadline,onChange:g=>i({...n,notifyOnDeadline:g.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"   "}),e.jsx("div",{className:"text-sm text-gray-600",children:"  3   "})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.notifyOnBudgetAlert,onChange:g=>i({...n,notifyOnBudgetAlert:g.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"   "}),e.jsx("div",{className:"text-sm text-gray-600",children:"  80% "})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email-"}),e.jsxs("select",{value:n.emailDigest,onChange:g=>i({...n,emailDigest:g.target.value}),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-gray-500 outline-none",children:[e.jsx("option",{value:"none",children:""}),e.jsx("option",{value:"daily",children:""}),e.jsx("option",{value:"weekly",children:""})]})]})]}),m==="permissions"&&e.jsx("div",{className:"space-y-6",children:[{key:"allowTaskCreation",label:" "},{key:"allowComments",label:""},{key:"allowFileUpload",label:" "}].map(g=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:g.label}),e.jsxs("select",{value:n[g.key],onChange:y=>i({...n,[g.key]:y.target.value}),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-gray-500 outline-none",children:[e.jsx("option",{value:"owner",children:" "}),e.jsx("option",{value:"team",children:" "}),e.jsx("option",{value:"all",children:" "})]})]},g.key))}),m==="automation"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.autoArchiveCompleted,onChange:g=>i({...n,autoArchiveCompleted:g.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"  "}),e.jsx("div",{className:"text-sm text-gray-600",children:" :"}),n.autoArchiveCompleted&&e.jsx("input",{type:"number",value:n.autoArchiveDays,onChange:g=>i({...n,autoArchiveDays:Number(g.target.value)}),className:"mt-2 w-32 px-3 py-1 border-2 border-gray-300 rounded-lg",min:"1"}),n.autoArchiveCompleted&&e.jsx("span",{className:"ml-2 text-sm",children:""})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.autoStatusChange,onChange:g=>i({...n,autoStatusChange:g.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"  "}),e.jsx("div",{className:"text-sm text-gray-600",children:"    "})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.autoAssignTasks,onChange:g=>i({...n,autoAssignTasks:g.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:" "}),e.jsx("div",{className:"text-sm text-gray-600",children:"  "})]})]})]}),m==="integration"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-3 mb-3",children:[e.jsx("input",{type:"checkbox",checked:n.slackNotifications,onChange:g=>i({...n,slackNotifications:g.target.checked}),className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold text-gray-900",children:"Slack "})]}),n.slackNotifications&&e.jsx("input",{type:"text",value:n.slackWebhook,onChange:g=>i({...n,slackWebhook:g.target.value}),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-gray-500 outline-none",placeholder:"https://hooks.slack.com/services/..."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-3 mb-3",children:[e.jsx("input",{type:"checkbox",checked:n.githubIntegration,onChange:g=>i({...n,githubIntegration:g.target.checked}),className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold text-gray-900",children:"GitHub "})]}),n.githubIntegration&&e.jsx("input",{type:"text",value:n.githubRepo,onChange:g=>i({...n,githubRepo:g.target.value}),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-gray-500 outline-none",placeholder:"owner/repository"})]})]})]})}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Ge,{className:"w-4 h-4"}),e.jsx("span",{children:"      "})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""}),e.jsx("button",{onClick:v,disabled:u,className:"flex items-center gap-2 px-6 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-all font-semibold disabled:opacity-50",children:u?e.jsxs(e.Fragment,{children:[e.jsx(Ta,{className:"w-5 h-5 animate-spin"}),"..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Aa,{className:"w-5 h-5"}),""]})})]})]})]})}):null},IW=({projectId:s,onClose:t})=>{const[r,a]=j.useState([]),[n,i]=j.useState([]),[o,c]=j.useState(!0),[u,h]=j.useState(""),[m,f]=j.useState("all"),[p,v]=j.useState("all"),[g,y]=j.useState(!1),[w,N]=j.useState(null),[k,S]=j.useState("overview"),[_,T]=j.useState({name:"",email:"",phone:"",role:"developer",department:"development",availability:100,allocatedHours:40,skills:[]}),[E,z]=j.useState({memberId:0,hoursPerWeek:40,startDate:new Date().toISOString().slice(0,10),endDate:"",notes:""});j.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),j.useEffect(()=>{O()},[s]);const O=async()=>{c(!0);try{const W=await fetch(`http://147.45.215.199:8001/api/projects/${s}/team`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(W.ok){const te=await W.json();a(te.team||[]),i(te.allocations||[])}else a([{id:1,name:" ",email:"alexey@company.com",phone:"+7 (999) 123-45-67",role:"Team Lead",department:"Development",availability:80,allocatedHours:32,actualHours:35,skills:["React","Node.js","TypeScript","Leadership"],performance:4.8,status:"busy",tasks:8,completionRate:92,joinedAt:"2024-01-15"},{id:2,name:" ",email:"maria@company.com",phone:"+7 (999) 234-56-78",role:"Frontend Developer",department:"Development",availability:100,allocatedHours:40,actualHours:38,skills:["React","CSS","JavaScript","Figma"],performance:4.5,status:"available",tasks:5,completionRate:88,joinedAt:"2024-02-01"},{id:3,name:" ",email:"dmitry@company.com",phone:"+7 (999) 345-67-89",role:"Backend Developer",department:"Development",availability:50,allocatedHours:20,actualHours:22,skills:["Python","FastAPI","PostgreSQL","Docker"],performance:4.7,status:"busy",tasks:12,completionRate:85,joinedAt:"2024-01-20"},{id:4,name:" ",email:"elena@company.com",phone:"+7 (999) 456-78-90",role:"QA Engineer",department:"Quality Assurance",availability:120,allocatedHours:48,actualHours:52,skills:["Testing","Selenium","Jira","API Testing"],performance:4.2,status:"overloaded",tasks:15,completionRate:78,joinedAt:"2024-02-15"},{id:5,name:" ",email:"sergey@company.com",phone:"+7 (999) 567-89-01",role:"DevOps Engineer",department:"Operations",availability:0,allocatedHours:0,actualHours:0,skills:["Docker","Kubernetes","AWS","CI/CD"],performance:4.9,status:"vacation",tasks:0,completionRate:95,joinedAt:"2024-01-10"}]),i([{id:1,memberId:1,projectId:s,hoursPerWeek:32,startDate:"2024-01-15",endDate:"2024-06-30",notes:" ,   "},{id:2,memberId:2,projectId:s,hoursPerWeek:40,startDate:"2024-02-01",endDate:"2024-12-31",notes:"  UI "}])}catch(W){console.error("Error fetching team:",W)}finally{c(!1)}},C=async()=>{if(!_.name||!_.email){alert("   (  email)");return}const W={..._,id:Date.now(),actualHours:0,performance:0,status:"available",tasks:0,completionRate:0,joinedAt:new Date().toISOString().slice(0,10)};try{const te=await fetch(`http://147.45.215.199:8001/api/projects/${s}/team`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(W)});if(te.ok){const J=await te.json();a([...r,J])}else a([...r,W]);y(!1),T({name:"",email:"",phone:"",role:"developer",department:"development",availability:100,allocatedHours:40,skills:[]})}catch(te){console.error("Error adding member:",te)}},A=async W=>{if(confirm("    ?"))try{await fetch(`http://147.45.215.199:8001/api/projects/${s}/team/${W}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}}),a(r.filter(te=>te.id!==W)),i(n.filter(te=>te.memberId!==W))}catch(te){console.error("Error removing member:",te)}},X=async()=>{if(!E.memberId||!E.endDate){alert("     ");return}const W={...E,id:Date.now(),projectId:s};try{const te=await fetch(`http://147.45.215.199:8001/api/projects/${s}/allocations`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(W)});if(te.ok){const J=await te.json();i([...n,J])}else i([...n,W]);z({memberId:0,hoursPerWeek:40,startDate:new Date().toISOString().slice(0,10),endDate:"",notes:""})}catch(te){console.error("Error adding allocation:",te)}},I=W=>{const te={available:{label:"",color:"bg-green-100 text-green-800"},busy:{label:"",color:"bg-yellow-100 text-yellow-800"},overloaded:{label:"",color:"bg-red-100 text-red-800"},vacation:{label:"",color:"bg-gray-100 text-gray-800"}};return te[W]||te.available},V=W=>W>=4.5?"text-green-600":W>=4?"text-blue-600":W>=3.5?"text-yellow-600":"text-red-600",R=r.filter(W=>{const te=W.name.toLowerCase().includes(u.toLowerCase())||W.email.toLowerCase().includes(u.toLowerCase())||W.role.toLowerCase().includes(u.toLowerCase()),J=m==="all"||W.role===m,K=p==="all"||W.status===p;return te&&J&&K}),ee=(()=>{const W=r.length,te=r.reduce((ne,oe)=>ne+oe.allocatedHours,0),J=r.reduce((ne,oe)=>ne+oe.actualHours,0),K=r.length>0?r.reduce((ne,oe)=>ne+oe.performance,0)/r.length:0,$=r.filter(ne=>ne.status==="overloaded").length,ie=r.filter(ne=>ne.status==="available").length;return{totalMembers:W,totalAllocatedHours:te,totalActualHours:J,avgPerformance:K,overloadedCount:$,availableCount:ie,utilizationRate:te>0?J/te*100:0}})(),se=Array.from(new Set(r.map(W=>W.role)));return o?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:" ..."})]})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(it,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"   "}),e.jsxs("p",{className:"text-purple-100 text-sm",children:[" #",s]})]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors","aria-label":"",children:e.jsx(De,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 p-6 bg-gray-50 border-b",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(it,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:ee.totalMembers})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Ve,{className:"w-4 h-4"}),e.jsx("span",{children:" /"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:ee.totalAllocatedHours})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(xt,{className:"w-4 h-4"}),e.jsx("span",{children:". /"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:ee.totalActualHours})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Vr,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[ee.utilizationRate.toFixed(0),"%"]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Hf,{className:"w-4 h-4"}),e.jsx("span",{children:". "})]}),e.jsx("div",{className:`text-2xl font-bold ${V(ee.avgPerformance)}`,children:ee.avgPerformance.toFixed(1)})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(dr,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-red-600",children:ee.overloadedCount})]})]}),e.jsxs("div",{className:"flex gap-1 p-4 bg-white border-b",children:[e.jsx("button",{onClick:()=>S("overview"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${k==="overview"?"bg-purple-100 text-purple-700":"text-gray-600 hover:bg-gray-100"}`,children:" "}),e.jsx("button",{onClick:()=>S("allocation"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${k==="allocation"?"bg-purple-100 text-purple-700":"text-gray-600 hover:bg-gray-100"}`,children:" "}),e.jsx("button",{onClick:()=>S("skills"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${k==="skills"?"bg-purple-100 text-purple-700":"text-gray-600 hover:bg-gray-100"}`,children:""}),e.jsx("button",{onClick:()=>S("performance"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${k==="performance"?"bg-purple-100 text-purple-700":"text-gray-600 hover:bg-gray-100"}`,children:""})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[k==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(Us,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"  , email, ...",value:u,onChange:W=>h(W.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})}),e.jsxs("select",{value:m,onChange:W=>f(W.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),se.map(W=>e.jsx("option",{value:W,children:W},W))]}),e.jsxs("select",{value:p,onChange:W=>v(W.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),e.jsx("option",{value:"available",children:""}),e.jsx("option",{value:"busy",children:""}),e.jsx("option",{value:"overloaded",children:""}),e.jsx("option",{value:"vacation",children:""})]}),e.jsxs("button",{onClick:()=>y(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2",children:[e.jsx(fN,{className:"w-5 h-5"})," "]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:R.map(W=>{const te=I(W.status),J=n.find(K=>K.memberId===W.id);return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-purple-400 to-pink-400 flex items-center justify-center text-white font-bold text-lg",children:W.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:W.name}),e.jsx("p",{className:"text-sm text-gray-500",children:W.role}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${te.color}`,children:te.label})})]})]}),e.jsx("button",{onClick:()=>A(W.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors","aria-label":"",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(vi,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:W.email})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(bi,{className:"w-4 h-4"}),e.jsx("span",{children:W.phone})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:":"}),e.jsxs("span",{className:"font-medium",children:[W.availability,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${W.availability<=80?"bg-green-500":W.availability<=100?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(W.availability,100)}%`}})}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:" (/):"}),e.jsxs("span",{className:"font-medium",children:[W.allocatedHours," / ",W.actualHours]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:" :"}),e.jsx("span",{className:"font-medium",children:W.tasks})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:":"}),e.jsxs("span",{className:"font-medium",children:[W.completionRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:":"}),e.jsxs("span",{className:`font-bold ${V(W.performance)}`,children:[W.performance.toFixed(1)," / 5.0"]})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:":"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:W.skills.map((K,$)=>e.jsx("span",{className:"text-xs px-2 py-1 bg-purple-100 text-purple-700 rounded-full",children:K},$))})]}),J&&e.jsx("div",{className:"mt-3 pt-3 border-t",children:e.jsxs("p",{className:"text-xs text-gray-500",children:[": ",J.hoursPerWeek," / (",J.startDate," - ",J.endDate,")"]})})]},W.id)})}),R.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(it,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"  ,  "})]})]}),k==="allocation"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"  "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),e.jsxs("select",{value:E.memberId,onChange:W=>z({...E,memberId:parseInt(W.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:0,children:"  "}),r.map(W=>e.jsxs("option",{value:W.id,children:[W.name," - ",W.role]},W.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),e.jsx("input",{type:"number",min:"1",max:"168",value:E.hoursPerWeek,onChange:W=>z({...E,hoursPerWeek:parseInt(W.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"date",value:E.startDate,onChange:W=>z({...E,startDate:W.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),e.jsx("input",{type:"date",value:E.endDate,onChange:W=>z({...E,endDate:W.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:E.notes,onChange:W=>z({...E,notes:W.target.value}),rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"   ..."})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{onClick:X,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:" "})})]}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:" "}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"/"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:n.map(W=>{const te=r.find(J=>J.id===W.memberId);return te?e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"font-medium text-gray-900",children:te.name})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:te.role}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 font-medium",children:W.hoursPerWeek}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-600",children:[W.startDate," - ",W.endDate]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:W.notes||"-"}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("button",{onClick:()=>i(n.filter(J=>J.id!==W.id)),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:""})})]},W.id):null})})]}),n.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(wt,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"  "})]})]})})]}),k==="skills"&&e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(W=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-400 to-pink-400 flex items-center justify-center text-white font-bold",children:W.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:W.name}),e.jsx("p",{className:"text-sm text-gray-500",children:W.role})]})]}),e.jsx("div",{className:"space-y-2",children:W.skills.map((te,J)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-700 flex-1",children:te}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(K=>e.jsx("div",{className:`w-2 h-6 rounded ${K<=3+J%2?"bg-purple-600":"bg-gray-200"}`},K))})]},J))})]},W.id))})}),k==="performance"&&e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:" "}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:" (/)"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:r.sort((W,te)=>te.performance-W.performance).map(W=>{const te=I(W.status);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-400 to-pink-400 flex items-center justify-center text-white font-bold text-sm",children:W.name.charAt(0)}),e.jsx("span",{className:"font-medium text-gray-900",children:W.name})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:W.role}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:`font-bold text-lg ${V(W.performance)}`,children:W.performance.toFixed(1)})}),e.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-900",children:W.tasks}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("span",{className:"font-medium text-gray-900",children:[W.completionRate,"%"]})}),e.jsxs("td",{className:"px-6 py-4 text-center text-sm text-gray-900",children:[W.allocatedHours," / ",W.actualHours]}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${te.color}`,children:te.label})})]},W.id)})})]})})})})]}),g&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"  "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:_.name,onChange:W=>T({..._,name:W.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:" "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:_.email,onChange:W=>T({..._,email:W.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"ivan@company.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("input",{type:"tel",value:_.phone,onChange:W=>T({..._,phone:W.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"+7 (999) 123-45-67"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:_.role,onChange:W=>T({..._,role:W.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Frontend Developer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:_.department,onChange:W=>T({..._,department:W.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Development"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[" (%) - ",_.availability,"%"]}),e.jsx("input",{type:"range",min:"0",max:"200",step:"10",value:_.availability,onChange:W=>T({..._,availability:parseInt(W.target.value)}),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   "}),e.jsx("input",{type:"number",min:"1",max:"168",value:_.allocatedHours,onChange:W=>T({..._,allocatedHours:parseInt(W.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:""}),e.jsx("button",{onClick:C,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:""})]})]})})]})})},$W=({projectId:s,onClose:t})=>{const[r,a]=j.useState([]),[n,i]=j.useState(null),[o,c]=j.useState(!0),[u,h]=j.useState(""),[m,f]=j.useState("all"),[p,v]=j.useState("all"),[g,y]=j.useState(""),[w,N]=j.useState(""),[k,S]=j.useState(null),[_,T]=j.useState("entries"),[E,z]=j.useState(new Date),[O,C]=j.useState({description:"",taskId:0,startTime:new Date().toISOString().slice(0,16),endTime:new Date().toISOString().slice(0,16),billable:!0,hourlyRate:50});j.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),j.useEffect(()=>{A();const $=setInterval(()=>{z(new Date)},1e3);return()=>clearInterval($)},[s]);const A=async()=>{c(!0);try{const $=await fetch(`http://147.45.215.199:8001/api/projects/${s}/time-entries`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if($.ok){const ie=await $.json();a(ie.entries||[]),i(ie.activeTimer||null)}else a([{id:1,userId:1,userName:" ",taskId:101,taskName:"  ",description:"    API",startTime:"2024-03-01T09:00:00",endTime:"2024-03-01T12:30:00",duration:210,billable:!0,hourlyRate:60,status:"stopped",createdAt:"2024-03-01T09:00:00"},{id:2,userId:2,userName:" ",taskId:102,taskName:" UI ",description:"  ",startTime:"2024-03-01T10:00:00",endTime:"2024-03-01T13:00:00",duration:180,billable:!0,hourlyRate:55,status:"stopped",createdAt:"2024-03-01T10:00:00"},{id:3,userId:1,userName:" ",taskId:103,taskName:"Code Review",description:" pull requests",startTime:"2024-03-01T14:00:00",endTime:"2024-03-01T15:30:00",duration:90,billable:!1,hourlyRate:60,status:"stopped",createdAt:"2024-03-01T14:00:00"},{id:4,userId:3,userName:" ",taskId:104,taskName:" CI/CD",description:" GitHub Actions",startTime:"2024-03-02T09:00:00",endTime:"2024-03-02T11:45:00",duration:165,billable:!0,hourlyRate:70,status:"stopped",createdAt:"2024-03-02T09:00:00"},{id:5,userId:2,userName:" ",description:"  ",startTime:"2024-03-02T14:00:00",endTime:"2024-03-02T15:00:00",duration:60,billable:!1,hourlyRate:55,status:"stopped",createdAt:"2024-03-02T14:00:00"}]),i(null)}catch($){console.error("Error fetching time entries:",$)}finally{c(!1)}},X=async()=>{if(!O.description){alert("  ");return}const $={userId:1,userName:" ",taskId:O.taskId||void 0,description:O.description,startTime:new Date().toISOString(),billable:O.billable,hourlyRate:O.hourlyRate};try{const ie=await fetch(`http://147.45.215.199:8001/api/projects/${s}/timer/start`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify($)});if(ie.ok){const ne=await ie.json();i(ne)}else i($);C({...O,description:""})}catch(ie){console.error("Error starting timer:",ie)}},I=async()=>{if(!n)return;const $=Math.floor((new Date().getTime()-new Date(n.startTime).getTime())/1e3/60),ie={id:Date.now(),userId:n.userId,userName:n.userName,taskId:n.taskId,taskName:n.taskName,description:n.description,startTime:n.startTime,endTime:new Date().toISOString(),duration:$,billable:n.billable,hourlyRate:n.hourlyRate,status:"stopped",createdAt:n.startTime};try{const ne=await fetch(`http://147.45.215.199:8001/api/projects/${s}/timer/stop`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(ie)});if(ne.ok){const oe=await ne.json();a([oe,...r])}else a([ie,...r]);i(null)}catch(ne){console.error("Error stopping timer:",ne)}},V=async()=>{if(!O.description||!O.startTime||!O.endTime){alert("   ");return}const $=new Date(O.startTime),ie=new Date(O.endTime),ne=Math.floor((ie.getTime()-$.getTime())/1e3/60);if(ne<=0){alert("      ");return}const oe={id:Date.now(),userId:1,userName:" ",taskId:O.taskId||void 0,description:O.description,startTime:O.startTime,endTime:O.endTime,duration:ne,billable:O.billable,hourlyRate:O.hourlyRate,status:"stopped",createdAt:new Date().toISOString()};try{const ce=await fetch(`http://147.45.215.199:8001/api/projects/${s}/time-entries`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(oe)});if(ce.ok){const U=await ce.json();a([U,...r])}else a([oe,...r]);C({description:"",taskId:0,startTime:new Date().toISOString().slice(0,16),endTime:new Date().toISOString().slice(0,16),billable:!0,hourlyRate:50})}catch(ce){console.error("Error adding entry:",ce)}},R=async $=>{if(confirm("   ?"))try{await fetch(`http://147.45.215.199:8001/api/projects/${s}/time-entries/${$}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}}),a(r.filter(ie=>ie.id!==$))}catch(ie){console.error("Error deleting entry:",ie)}},H=()=>{let $=r;g&&($=$.filter(q=>new Date(q.startTime)>=new Date(g))),w&&($=$.filter(q=>new Date(q.startTime)<=new Date(w+"T23:59:59"))),m!=="all"&&($=$.filter(q=>q.userName===m)),p!=="all"&&($=$.filter(q=>q.billable===(p==="billable")));const ie=$.reduce((q,Q)=>q+Q.duration,0)/60,ne=$.filter(q=>q.billable).reduce((q,Q)=>q+Q.duration,0)/60,oe=ie-ne,ce=$.reduce((q,Q)=>Q.billable?q+Q.duration/60*Q.hourlyRate:q,0),U={},F={},Z={};return $.forEach(q=>{U[q.userName]=(U[q.userName]||0)+q.duration/60;const Q=q.taskName||" ";F[Q]=(F[Q]||0)+q.duration/60;const le=q.startTime.slice(0,10);Z[le]=(Z[le]||0)+q.duration/60}),{totalHours:ie,billableHours:ne,nonBillableHours:oe,totalAmount:ce,entriesCount:$.length,avgHourlyRate:ne>0?ce/ne:0,byUser:U,byTask:F,byDay:Z}},ee=$=>{const ie=Math.floor($/60),ne=$%60;return`${ie} ${ne}`},se=()=>{if(!n)return"00:00:00";const $=Math.floor((E.getTime()-new Date(n.startTime).getTime())/1e3),ie=Math.floor($/3600),ne=Math.floor($%3600/60),oe=$%60;return`${ie.toString().padStart(2,"0")}:${ne.toString().padStart(2,"0")}:${oe.toString().padStart(2,"0")}`},W=r.filter($=>{const ie=$.description.toLowerCase().includes(u.toLowerCase())||$.userName.toLowerCase().includes(u.toLowerCase())||$.taskName&&$.taskName.toLowerCase().includes(u.toLowerCase()),ne=m==="all"||$.userName===m,oe=p==="all"||$.billable===(p==="billable"),ce=!g||new Date($.startTime)>=new Date(g),U=!w||new Date($.startTime)<=new Date(w+"T23:59:59");return ie&&ne&&oe&&ce&&U}),te=H(),J=Array.from(new Set(r.map($=>$.userName))),K=()=>{const $=["","","","","","","","Billable","",""],ie=W.map(U=>[U.startTime.slice(0,10),U.userName,U.taskName||"-",U.description,new Date(U.startTime).toLocaleTimeString("ru-RU"),U.endTime?new Date(U.endTime).toLocaleTimeString("ru-RU"):"-",ee(U.duration),U.billable?"":"",`$${U.hourlyRate}`,U.billable?`$${(U.duration/60*U.hourlyRate).toFixed(2)}`:"-"]),ne=[$,...ie].map(U=>U.join(",")).join(`
`),oe=new Blob([ne],{type:"text/csv;charset=utf-8;"}),ce=document.createElement("a");ce.href=URL.createObjectURL(oe),ce.download=`time-tracking-project-${s}-${new Date().toISOString().slice(0,10)}.csv`,ce.click()};return o?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:" ..."})]})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ve,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:" "}),e.jsxs("p",{className:"text-blue-100 text-sm",children:[" #",s]})]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors","aria-label":"",children:e.jsx(De,{className:"w-6 h-6"})})]}),n&&e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-b border-green-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center animate-pulse",children:e.jsx(ji,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:" "}),e.jsx("p",{className:"font-semibold text-gray-900",children:n.description}),n.taskName&&e.jsxs("p",{className:"text-sm text-gray-500",children:[": ",n.taskName]})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-4xl font-bold text-green-600 font-mono",children:se()}),e.jsx("p",{className:"text-sm text-gray-600",children:n.billable?`$${n.hourlyRate}/`:" "})]}),e.jsxs("button",{onClick:I,className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2 font-medium",children:[e.jsx(ew,{className:"w-5 h-5"}),""]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 p-6 bg-gray-50 border-b",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Ve,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[te.totalHours.toFixed(1),""]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(xt,{className:"w-4 h-4"}),e.jsx("span",{children:"Billable"})]}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[te.billableHours.toFixed(1),""]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Ph,{className:"w-4 h-4"}),e.jsx("span",{children:"Non-billable"})]}),e.jsxs("div",{className:"text-2xl font-bold text-gray-600",children:[te.nonBillableHours.toFixed(1),""]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Qe,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["$",te.totalAmount.toFixed(0)]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(it,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:te.entriesCount})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Qe,{className:"w-4 h-4"}),e.jsx("span",{children:". "})]}),e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:["$",te.avgHourlyRate.toFixed(0)]})]})]}),e.jsxs("div",{className:"flex gap-1 p-4 bg-white border-b",children:[e.jsx("button",{onClick:()=>T("entries"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${_==="entries"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:" "}),e.jsx("button",{onClick:()=>T("timer"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${_==="timer"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:""}),e.jsx("button",{onClick:()=>T("reports"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${_==="reports"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:""})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[_==="entries"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(Us,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"...",value:u,onChange:$=>h($.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsx("input",{type:"date",value:g,onChange:$=>y($.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:""}),e.jsx("input",{type:"date",value:w,onChange:$=>N($.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:""}),e.jsxs("select",{value:m,onChange:$=>f($.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),J.map($=>e.jsx("option",{value:$,children:$},$))]}),e.jsxs("select",{value:p,onChange:$=>v($.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),e.jsx("option",{value:"billable",children:"Billable"}),e.jsx("option",{value:"non-billable",children:"Non-billable"})]}),e.jsxs("button",{onClick:K,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx(Tt,{className:"w-5 h-5"})," CSV"]})]}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Billable"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:W.map($=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:new Date($.startTime).toLocaleDateString("ru-RU")}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:$.userName}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:$.taskName||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:$.description}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-600",children:[new Date($.startTime).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})," ","-"," ",$.endTime?new Date($.endTime).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}):"..."]}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:ee($.duration)}),e.jsx("td",{className:"px-6 py-4 text-center",children:$.billable?e.jsx("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-800 rounded-full",children:""}):e.jsx("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-800 rounded-full",children:""})}),e.jsx("td",{className:"px-6 py-4 text-right text-sm font-medium text-gray-900",children:$.billable?`$${($.duration/60*$.hourlyRate).toFixed(2)}`:"-"}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("button",{onClick:()=>R($.id),className:"text-red-600 hover:text-red-800 p-1","aria-label":"",children:e.jsx(tt,{className:"w-4 h-4"})})})]},$.id))})]}),W.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Ve,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"  "})]})]})})]}),_==="timer"&&e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[n?e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 text-center",children:[e.jsx(Ve,{className:"w-16 h-16 mx-auto mb-4 text-green-600"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"  "}),e.jsx("p",{className:"text-gray-900 font-medium",children:n.description})]}):e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:" "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),e.jsx("input",{type:"text",value:O.description,onChange:$=>C({...O,description:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"   ?"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:O.billable,onChange:$=>C({...O,billable:$.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Billable"})]})}),O.billable&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" ($/)"}),e.jsx("input",{type:"number",min:"0",step:"5",value:O.hourlyRate,onChange:$=>C({...O,hourlyRate:parseFloat($.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsxs("button",{onClick:X,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 font-medium",children:[e.jsx(ji,{className:"w-5 h-5"})," "]})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"  "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:O.description,onChange:$=>C({...O,description:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:" "})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"datetime-local",value:O.startTime,onChange:$=>C({...O,startTime:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"datetime-local",value:O.endTime,onChange:$=>C({...O,endTime:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:O.billable,onChange:$=>C({...O,billable:$.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Billable"})]})}),O.billable&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" ($/)"}),e.jsx("input",{type:"number",min:"0",step:"5",value:O.hourlyRate,onChange:$=>C({...O,hourlyRate:parseFloat($.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:V,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:" "})})]})]}),_==="reports"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:" "}),e.jsx("div",{className:"space-y-2",children:Object.entries(te.byUser).sort(([,$],[,ie])=>ie-$).map(([$,ie])=>e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:$}),e.jsxs("span",{className:"text-sm text-gray-600",children:[ie.toFixed(1),""]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${ie/te.totalHours*100}%`}})})]})},$))})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:" "}),e.jsx("div",{className:"space-y-2",children:Object.entries(te.byTask).sort(([,$],[,ie])=>ie-$).map(([$,ie])=>e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:$}),e.jsxs("span",{className:"text-sm text-gray-600",children:[ie.toFixed(1),""]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${ie/te.totalHours*100}%`}})})]})},$))})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:" "}),e.jsx("div",{className:"space-y-2",children:Object.entries(te.byDay).sort(([$],[ie])=>ie.localeCompare($)).map(([$,ie])=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-24 text-sm text-gray-600",children:new Date($).toLocaleDateString("ru-RU")}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"flex justify-between mb-1",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-8 relative",children:e.jsx("div",{className:"bg-purple-600 h-8 rounded-full flex items-center justify-end pr-3",style:{width:`${ie/Math.max(...Object.values(te.byDay))*100}%`},children:e.jsxs("span",{className:"text-xs font-medium text-white",children:[ie.toFixed(1),""]})})})})})]},$))})]})]})]})]})})},UW=({projectId:s,onClose:t})=>{const[r,a]=j.useState([]),[n,i]=j.useState(!0),[o,c]=j.useState(!1),[u,h]=j.useState(null),[m,f]=j.useState(null),[p,v]=j.useState("all"),[g,y]=j.useState("all"),[w,N]=j.useState("grid"),[k,S]=j.useState({name:"",description:"",dueDate:"",priority:"medium",assignedTo:[],deliverables:[],notes:""}),[_,T]=j.useState("");j.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),j.useEffect(()=>{E()},[s]);const E=async()=>{i(!0);try{const W=await fetch(`http://147.45.215.199:8001/api/projects/${s}/milestones`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(W.ok){const te=await W.json();a(te)}else a([{id:1,name:" ",description:"    ",dueDate:"2024-03-15",status:"completed",progress:100,priority:"high",assignedTo:[1,2],assignedNames:[" "," "],tasks:{total:12,completed:12},budget:{allocated:15e3,spent:14500},dependencies:[],completedAt:"2024-03-14",deliverables:["  ","UI Kit","  "],notes:" ,  ",createdAt:"2024-02-01"},{id:2,name:" MVP",description:"  ",dueDate:"2024-04-01",status:"in-progress",progress:65,priority:"critical",assignedTo:[1,3,4],assignedNames:[" "," "," "],tasks:{total:28,completed:18},budget:{allocated:45e3,spent:28e3},dependencies:[1],deliverables:[" ","API "," "],notes:" ,   ",createdAt:"2024-02-15"},{id:3,name:"  QA",description:"  ",dueDate:"2024-04-15",status:"not-started",progress:0,priority:"high",assignedTo:[4],assignedNames:[" "],tasks:{total:15,completed:0},budget:{allocated:12e3,spent:0},dependencies:[2],deliverables:["  "," "," "],notes:"  ",createdAt:"2024-03-01"},{id:4,name:" -",description:"    ",dueDate:"2024-04-25",status:"not-started",progress:0,priority:"critical",assignedTo:[1,2,3,4,5],assignedNames:[" "," "," "," "," "],tasks:{total:10,completed:0},budget:{allocated:8e3,spent:0},dependencies:[2,3],deliverables:["  production","","  "],notes:"  ",createdAt:"2024-03-01"},{id:5,name:" ",description:"  ",dueDate:"2024-03-20",status:"delayed",progress:40,priority:"medium",assignedTo:[6],assignedNames:[" "],tasks:{total:8,completed:3},budget:{allocated:25e3,spent:1e4},dependencies:[1],deliverables:[" ","  ","-"],notes:" -  ",createdAt:"2024-02-20"}])}catch(W){console.error("Error fetching milestones:",W)}finally{i(!1)}},z=async()=>{if(!k.name||!k.dueDate){alert("   ");return}const W={...k,id:Date.now(),status:"not-started",progress:0,assignedNames:[],tasks:{total:0,completed:0},budget:{allocated:0,spent:0},dependencies:[],createdAt:new Date().toISOString()};try{const te=await fetch(`http://147.45.215.199:8001/api/projects/${s}/milestones`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(W)});if(te.ok){const J=await te.json();a([...r,J])}else a([...r,W]);c(!1),S({name:"",description:"",dueDate:"",priority:"medium",assignedTo:[],deliverables:[],notes:""})}catch(te){console.error("Error adding milestone:",te)}},O=async W=>{try{const te=await fetch(`http://147.45.215.199:8001/api/projects/${s}/milestones/${W.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(W)});if(te.ok){const J=await te.json();a(r.map(K=>K.id===W.id?J:K))}else a(r.map(J=>J.id===W.id?W:J))}catch(te){console.error("Error updating milestone:",te)}},C=async W=>{if(confirm(" ?"))try{await fetch(`http://147.45.215.199:8001/api/projects/${s}/milestones/${W}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}}),a(r.filter(te=>te.id!==W))}catch(te){console.error("Error deleting milestone:",te)}},A=async W=>{const te={...W,status:"completed",progress:100,completedAt:new Date().toISOString()};await O(te)},X=W=>{const te={"not-started":{label:" ",color:"bg-gray-100 text-gray-800",icon:nE},"in-progress":{label:" ",color:"bg-blue-100 text-blue-800",icon:Ve},completed:{label:"",color:"bg-green-100 text-green-800",icon:ut},delayed:{label:"",color:"bg-red-100 text-red-800",icon:dr}};return te[W]||te["not-started"]},I=W=>{const te={low:{label:"",color:"bg-gray-100 text-gray-700"},medium:{label:"",color:"bg-blue-100 text-blue-700"},high:{label:"",color:"bg-orange-100 text-orange-700"},critical:{label:"",color:"bg-red-100 text-red-700"}};return te[W]||te.medium},V=W=>{const te=new Date(W),J=new Date,K=te.getTime()-J.getTime();return Math.ceil(K/(1e3*60*60*24))},R=W=>W.status!=="completed"&&V(W.dueDate)<0,H=r.filter(W=>{const te=p==="all"||W.status===p,J=g==="all"||W.priority===g;return te&&J}),se=(()=>{const W=r.length,te=r.filter(ce=>ce.status==="completed").length,J=r.filter(ce=>ce.status==="in-progress").length,K=r.filter(ce=>ce.status==="delayed").length,$=r.filter(ce=>R(ce)).length,ie=r.length>0?r.reduce((ce,U)=>ce+U.progress,0)/r.length:0,ne=r.reduce((ce,U)=>ce+U.budget.allocated,0),oe=r.reduce((ce,U)=>ce+U.budget.spent,0);return{total:W,completed:te,inProgress:J,delayed:K,overdue:$,avgProgress:ie,totalBudget:ne,spentBudget:oe,budgetUsage:ne>0?oe/ne*100:0}})();return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:" ..."})]})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Af,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"  "}),e.jsxs("p",{className:"text-indigo-100 text-sm",children:[" #",s]})]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors","aria-label":"",children:e.jsx(De,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4 p-6 bg-gray-50 border-b",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Af,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:se.total})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(ut,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:se.completed})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Ve,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:se.inProgress})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(dr,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-red-600",children:se.delayed})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(wt,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:se.overdue})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Lr,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[se.avgProgress.toFixed(0),"%"]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Qe,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["$",se.totalBudget/1e3,"k"]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Vr,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[se.budgetUsage.toFixed(0),"%"]})]})]}),e.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 p-6 bg-white border-b",children:[e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("select",{value:p,onChange:W=>v(W.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),e.jsx("option",{value:"not-started",children:" "}),e.jsx("option",{value:"in-progress",children:" "}),e.jsx("option",{value:"completed",children:""}),e.jsx("option",{value:"delayed",children:""})]}),e.jsxs("select",{value:g,onChange:W=>y(W.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"medium",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"critical",children:""})]}),e.jsxs("div",{className:"flex gap-1 bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>N("grid"),className:`px-3 py-1 rounded transition-colors ${w==="grid"?"bg-white shadow-sm":"hover:bg-gray-200"}`,children:""}),e.jsx("button",{onClick:()=>N("timeline"),className:`px-3 py-1 rounded transition-colors ${w==="timeline"?"bg-white shadow-sm":"hover:bg-gray-200"}`,children:""}),e.jsx("button",{onClick:()=>N("gantt"),className:`px-3 py-1 rounded transition-colors ${w==="gantt"?"bg-white shadow-sm":"hover:bg-gray-200"}`,children:""})]})]}),e.jsxs("button",{onClick:()=>c(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[e.jsx(We,{className:"w-5 h-5"})," "]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[w==="grid"&&e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:H.map(W=>{const te=X(W.status),J=I(W.priority),K=V(W.dueDate),$=R(W),ie=te.icon;return e.jsxs("div",{className:`bg-white border-2 rounded-lg p-6 hover:shadow-lg transition-shadow ${$?"border-red-300":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${W.status==="completed"?"bg-green-100":W.status==="in-progress"?"bg-blue-100":W.status==="delayed"?"bg-red-100":"bg-gray-100"}`,children:e.jsx(ie,{className:`w-6 h-6 ${W.status==="completed"?"text-green-600":W.status==="in-progress"?"text-blue-600":W.status==="delayed"?"text-red-600":"text-gray-600"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2",children:W.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:W.description}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${te.color}`,children:te.label}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${J.color}`,children:J.label}),$&&e.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-red-100 text-red-800",children:["  ",Math.abs(K)," ."]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>f(W),className:"p-1 text-gray-400 hover:text-indigo-600 transition-colors","aria-label":"",children:e.jsx(sr,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>C(W.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors","aria-label":"",children:e.jsx(tt,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-gray-600",children:""}),e.jsxs("span",{className:"font-medium text-gray-900",children:[W.progress,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full transition-all ${W.progress===100?"bg-green-500":W.progress>=70?"bg-blue-500":W.progress>=40?"bg-yellow-500":"bg-red-500"}`,style:{width:`${W.progress}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:" "}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(wt,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:new Date(W.dueDate).toLocaleDateString("ru-RU")})]}),!W.completedAt&&e.jsx("p",{className:`text-xs ${K<0?"text-red-600":K<=7?"text-orange-600":"text-gray-500"}`,children:K<0?`  ${Math.abs(K)} .`:K===0?"":` ${K} .`})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(it,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:W.assignedNames.length})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[W.tasks.completed," / ",W.tasks.total]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Qe,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["$",W.budget.spent,"k / $",W.budget.allocated,"k"]})]})]})]}),W.deliverables.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:":"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:W.deliverables.map((ne,oe)=>e.jsx("span",{className:"text-xs px-2 py-1 bg-indigo-50 text-indigo-700 rounded",children:ne},oe))})]}),W.status!=="completed"&&e.jsx("div",{className:"pt-4 border-t",children:e.jsxs("button",{onClick:()=>A(W),className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(ut,{className:"w-5 h-5"}),"  "]})})]})]},W.id)})}),w==="timeline"&&e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:e.jsx("div",{className:"space-y-6",children:H.sort((W,te)=>new Date(W.dueDate).getTime()-new Date(te.dueDate).getTime()).map((W,te)=>{const J=X(W.status),K=I(W.priority),$=J.icon;return e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${W.status==="completed"?"bg-green-500":W.status==="in-progress"?"bg-blue-500":W.status==="delayed"?"bg-red-500":"bg-gray-400"}`,children:e.jsx($,{className:"w-6 h-6 text-white"})}),te<H.length-1&&e.jsx("div",{className:"w-0.5 h-full bg-gray-300 flex-1 mt-2"})]}),e.jsxs("div",{className:"flex-1 pb-8",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900",children:W.name}),e.jsx("p",{className:"text-sm text-gray-600",children:W.description})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${J.color}`,children:J.label}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${K.color}`,children:K.label})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(wt,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(W.dueDate).toLocaleDateString("ru-RU")})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Lr,{className:"w-4 h-4"}),e.jsxs("span",{children:[W.progress,"%"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(it,{className:"w-4 h-4"}),e.jsx("span",{children:W.assignedNames.length})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${W.status==="completed"?"bg-green-500":"bg-blue-500"}`,style:{width:`${W.progress}%`}})})]})]},W.id)})})}),w==="gantt"&&e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("div",{className:"min-w-[800px]",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-2 mb-4 text-xs text-gray-600 font-medium",children:[e.jsx("div",{className:"col-span-3",children:""}),e.jsxs("div",{className:"col-span-9 grid grid-cols-12 text-center",children:[e.jsx("div",{children:""}),e.jsx("div",{children:""}),e.jsx("div",{children:""}),e.jsx("div",{children:""}),e.jsx("div",{children:""}),e.jsx("div",{children:""}),e.jsx("div",{children:""}),e.jsx("div",{children:""}),e.jsx("div",{children:""}),e.jsx("div",{children:""}),e.jsx("div",{children:""}),e.jsx("div",{children:""})]})]}),H.map(W=>{const te=new Date(W.dueDate).getMonth();return e.jsxs("div",{className:"grid grid-cols-12 gap-2 mb-3",children:[e.jsxs("div",{className:"col-span-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:W.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[W.progress,"%"]})]}),e.jsx("div",{className:"col-span-9 grid grid-cols-12 gap-1",children:Array.from({length:12}).map((J,K)=>e.jsx("div",{className:`h-8 rounded ${K===te?W.status==="completed"?"bg-green-500":W.status==="in-progress"?"bg-blue-500":W.status==="delayed"?"bg-red-500":"bg-gray-400":"bg-gray-100"}`},K))})]},W.id)})]})})}),H.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Af,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:" ,  "})]})]}),o&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:" "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:k.name,onChange:W=>S({...k,name:W.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:" "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:k.description,onChange:W=>S({...k,description:W.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:" "})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),e.jsx("input",{type:"date",value:k.dueDate,onChange:W=>S({...k,dueDate:W.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("select",{value:k.priority,onChange:W=>S({...k,priority:W.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"medium",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"critical",children:""})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:_,onChange:W=>T(W.target.value),onKeyPress:W=>{W.key==="Enter"&&_&&(S({...k,deliverables:[...k.deliverables,_]}),T(""))},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"  (Enter  )"}),e.jsx("button",{onClick:()=>{_&&(S({...k,deliverables:[...k.deliverables,_]}),T(""))},className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:e.jsx(We,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:k.deliverables.map((W,te)=>e.jsxs("span",{className:"inline-flex items-center gap-1 text-sm px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full",children:[W,e.jsx("button",{onClick:()=>S({...k,deliverables:k.deliverables.filter((J,K)=>K!==te)}),className:"hover:text-indigo-900",children:e.jsx(De,{className:"w-3 h-3"})})]},te))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:k.notes,onChange:W=>S({...k,notes:W.target.value}),rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:" "})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:""}),e.jsx("button",{onClick:z,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:""})]})]})}),m&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-3xl max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:m.name}),e.jsx("button",{onClick:()=>f(null),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(De,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:":"}),e.jsx("p",{className:"text-gray-900",children:m.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:":"}),e.jsx("span",{className:`text-xs px-3 py-1 rounded-full ${X(m.status).color}`,children:X(m.status).label})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:":"}),e.jsx("span",{className:`text-xs px-3 py-1 rounded-full ${I(m.priority).color}`,children:I(m.priority).label})]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-700 mb-2",children:[": ",m.progress,"%"]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4",children:e.jsx("div",{className:"bg-indigo-600 h-4 rounded-full transition-all",style:{width:`${m.progress}%`}})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:":"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:m.assignedNames.map((W,te)=>e.jsx("span",{className:"text-sm px-3 py-1 bg-gray-100 text-gray-700 rounded-full",children:W},te))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:":"}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:m.deliverables.map((W,te)=>e.jsx("li",{className:"text-gray-900",children:W},te))})]}),m.notes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:":"}),e.jsx("p",{className:"text-gray-900 bg-gray-50 p-4 rounded-lg",children:m.notes})]})]})]})})]})})},VW=({projectId:s,onClose:t})=>{const[r,a]=j.useState([]),[n,i]=j.useState([]),[o,c]=j.useState(null),[u,h]=j.useState(!0),[m,f]=j.useState(""),[p,v]=j.useState("all"),[g,y]=j.useState("date"),[w,N]=j.useState("grid"),[k,S]=j.useState(!1),[_,T]=j.useState(!1),[E,z]=j.useState(null),[O,C]=j.useState(!1),[A,X]=j.useState({file:null,description:"",tags:[]}),[I,V]=j.useState(""),[R,H]=j.useState("");j.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),j.useEffect(()=>{ee(),se()},[s]);const ee=async()=>{h(!0);try{const Z=await fetch(`http://147.45.215.199:8001/api/projects/${s}/documents`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(Z.ok){const q=await Z.json();a(q)}else a([{id:1,name:" .pdf",type:"pdf",size:2456789,uploadedBy:" ",uploadedAt:"2024-03-01T10:00:00",modifiedAt:"2024-03-02T15:30:00",folderId:1,url:"/documents/tz.pdf",favorite:!0,tags:["",""],description:"    ",version:2,sharedWith:[" "," "]},{id:2,name:" .fig",type:"other",size:15678900,uploadedBy:" ",uploadedAt:"2024-03-05T14:20:00",modifiedAt:"2024-03-10T11:45:00",folderId:2,url:"/documents/design.fig",favorite:!1,tags:["",""],description:"   ",version:5,sharedWith:[" "]},{id:3,name:".png",type:"img",size:567890,uploadedBy:" ",uploadedAt:"2024-02-28T09:15:00",modifiedAt:"2024-02-28T09:15:00",folderId:2,url:"/documents/logo.png",favorite:!0,tags:["",""],description:"  ",version:1,sharedWith:[]},{id:4,name:"API .docx",type:"doc",size:1234567,uploadedBy:" ",uploadedAt:"2024-03-08T16:00:00",modifiedAt:"2024-03-12T10:20:00",folderId:3,url:"/documents/api-docs.docx",favorite:!1,tags:["API",""],description:"   API endpoints",version:3,sharedWith:[" "," "]},{id:5,name:"  Q1.xlsx",type:"xls",size:890123,uploadedBy:" ",uploadedAt:"2024-03-15T11:30:00",modifiedAt:"2024-03-15T11:30:00",folderId:4,url:"/documents/finance-q1.xlsx",favorite:!1,tags:["",""],description:"    ",version:1,sharedWith:[]},{id:6,name:"  .pptx",type:"ppt",size:3456789,uploadedBy:" ",uploadedAt:"2024-03-10T13:45:00",modifiedAt:"2024-03-10T13:45:00",folderId:null,url:"/documents/presentation.pptx",favorite:!0,tags:["",""],description:"   ",version:1,sharedWith:[" "]},{id:7,name:" .mp4",type:"video",size:45678900,uploadedBy:" ",uploadedAt:"2024-03-12T17:00:00",modifiedAt:"2024-03-12T17:00:00",folderId:5,url:"/documents/demo.mp4",favorite:!1,tags:["",""],description:"  ",version:1,sharedWith:[]},{id:8,name:".zip",type:"archive",size:123456789,uploadedBy:" ",uploadedAt:"2024-03-14T12:00:00",modifiedAt:"2024-03-14T12:00:00",folderId:null,url:"/documents/sources.zip",favorite:!1,tags:["",""],description:"    ",version:1,sharedWith:[" "]}])}catch(Z){console.error("Error fetching documents:",Z)}finally{h(!1)}},se=async()=>{try{const Z=await fetch(`http://147.45.215.199:8001/api/projects/${s}/folders`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(Z.ok){const q=await Z.json();i(q)}else i([{id:1,name:"",parentId:null,createdAt:"2024-02-01",documentsCount:1},{id:2,name:"",parentId:null,createdAt:"2024-02-01",documentsCount:2},{id:3,name:"",parentId:null,createdAt:"2024-02-01",documentsCount:1},{id:4,name:"",parentId:null,createdAt:"2024-02-01",documentsCount:1},{id:5,name:"",parentId:null,createdAt:"2024-02-01",documentsCount:1}])}catch(Z){console.error("Error fetching folders:",Z)}},W=async()=>{if(!A.file){alert(" ");return}const Z=new FormData;Z.append("file",A.file),Z.append("description",A.description),Z.append("tags",JSON.stringify(A.tags)),Z.append("folderId",String(o||""));try{const q=await fetch(`http://147.45.215.199:8001/api/projects/${s}/documents`,{method:"POST",headers:{Authorization:"Basic "+btoa("admin:qwerty123")},body:Z});if(q.ok){const Q=await q.json();a([Q,...r])}else{const Q={id:Date.now(),name:A.file.name,type:ie(A.file.name),size:A.file.size,uploadedBy:" ",uploadedAt:new Date().toISOString(),modifiedAt:new Date().toISOString(),folderId:o,url:URL.createObjectURL(A.file),favorite:!1,tags:A.tags,description:A.description,version:1,sharedWith:[]};a([Q,...r])}S(!1),X({file:null,description:"",tags:[]})}catch(q){console.error("Error uploading document:",q)}},te=async()=>{if(!R){alert("  ");return}const Z={name:R,parentId:o,createdAt:new Date().toISOString(),documentsCount:0};try{const q=await fetch(`http://147.45.215.199:8001/api/projects/${s}/folders`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(Z)});if(q.ok){const Q=await q.json();i([...n,Q])}else i([...n,{...Z,id:Date.now()}]);T(!1),H("")}catch(q){console.error("Error creating folder:",q)}},J=async Z=>{if(confirm(" ?"))try{await fetch(`http://147.45.215.199:8001/api/projects/${s}/documents/${Z}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}}),a(r.filter(q=>q.id!==Z))}catch(q){console.error("Error deleting document:",q)}},K=async Z=>{const q={...Z,favorite:!Z.favorite};try{await fetch(`http://147.45.215.199:8001/api/projects/${s}/documents/${Z.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(q)}),a(r.map(Q=>Q.id===Z.id?q:Q))}catch(Q){console.error("Error toggling favorite:",Q)}},$=Z=>({pdf:Ue,doc:Ue,xls:Ue,ppt:Ue,img:YP,video:Ef,archive:R4,other:Mr})[Z]||Mr,ie=Z=>{const q=Z.split(".").pop()?.toLowerCase();return q==="pdf"?"pdf":["doc","docx"].includes(q||"")?"doc":["xls","xlsx"].includes(q||"")?"xls":["ppt","pptx"].includes(q||"")?"ppt":["jpg","jpeg","png","gif","svg"].includes(q||"")?"img":["mp4","avi","mov","wmv"].includes(q||"")?"video":["zip","rar","7z","tar","gz"].includes(q||"")?"archive":"other"},ne=Z=>Z<1024?Z+" B":Z<1024*1024?(Z/1024).toFixed(1)+" KB":Z<1024*1024*1024?(Z/(1024*1024)).toFixed(1)+" MB":(Z/(1024*1024*1024)).toFixed(1)+" GB",oe=()=>{const Z=[];let q=n.find(Q=>Q.id===o);for(;q;)Z.unshift(q),q=n.find(Q=>Q.id===q.parentId);return Z};let ce=r.filter(Z=>{const q=Z.folderId===o,Q=Z.name.toLowerCase().includes(m.toLowerCase())||Z.description.toLowerCase().includes(m.toLowerCase())||Z.tags.some(G=>G.toLowerCase().includes(m.toLowerCase())),le=p==="all"||Z.type===p,me=!O||Z.favorite;return q&&Q&&le&&me});ce=ce.sort((Z,q)=>g==="name"?Z.name.localeCompare(q.name):g==="date"?new Date(q.uploadedAt).getTime()-new Date(Z.uploadedAt).getTime():g==="size"?q.size-Z.size:0);const U=n.filter(Z=>Z.parentId===o),F={totalDocuments:r.length,totalSize:r.reduce((Z,q)=>Z+q.size,0),favorites:r.filter(Z=>Z.favorite).length,foldersCount:n.length};return u?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:" ..."})]})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-600 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(cy,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:" "}),e.jsxs("p",{className:"text-emerald-100 text-sm",children:[" #",s]})]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors","aria-label":"",children:e.jsx(De,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 p-6 bg-gray-50 border-b",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Mr,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:F.totalDocuments})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(cy,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:F.foldersCount})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Is,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:F.favorites})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(R4,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:ne(F.totalSize)})]})]}),e.jsx("div",{className:"px-6 py-3 bg-white border-b",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("button",{onClick:()=>c(null),className:"text-emerald-600 hover:text-emerald-700 font-medium",children:""}),oe().map(Z=>e.jsxs(fl.Fragment,{children:[e.jsx(Sn,{className:"w-4 h-4 text-gray-400"}),e.jsx("button",{onClick:()=>c(Z.id),className:"text-emerald-600 hover:text-emerald-700 font-medium",children:Z.name})]},Z.id))]})}),e.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 p-6 bg-white border-b",children:[e.jsxs("div",{className:"flex flex-wrap gap-3 flex-1",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(Us,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:" ...",value:m,onChange:Z=>f(Z.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]})}),e.jsxs("select",{value:p,onChange:Z=>v(Z.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),e.jsx("option",{value:"pdf",children:"PDF"}),e.jsx("option",{value:"doc",children:""}),e.jsx("option",{value:"xls",children:""}),e.jsx("option",{value:"ppt",children:""}),e.jsx("option",{value:"img",children:""}),e.jsx("option",{value:"video",children:""}),e.jsx("option",{value:"archive",children:""})]}),e.jsxs("select",{value:g,onChange:Z=>y(Z.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",children:[e.jsx("option",{value:"date",children:" "}),e.jsx("option",{value:"name",children:" "}),e.jsx("option",{value:"size",children:" "})]}),e.jsx("button",{onClick:()=>C(!O),className:`px-4 py-2 rounded-lg border transition-colors ${O?"bg-yellow-100 border-yellow-300 text-yellow-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:e.jsx(Is,{className:`w-5 h-5 ${O?"fill-current":""}`})}),e.jsxs("div",{className:"flex gap-1 bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>N("grid"),className:`p-2 rounded transition-colors ${w==="grid"?"bg-white shadow-sm":"hover:bg-gray-200"}`,children:e.jsx(cE,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>N("list"),className:`p-2 rounded transition-colors ${w==="list"?"bg-white shadow-sm":"hover:bg-gray-200"}`,children:e.jsx(Mm,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>T(!0),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center gap-2",children:[e.jsx(Kj,{className:"w-5 h-5"})," "]}),e.jsxs("button",{onClick:()=>S(!0),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors flex items-center gap-2",children:[e.jsx(jn,{className:"w-5 h-5"}),""]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[U.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:""}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:U.map(Z=>e.jsxs("button",{onClick:()=>c(Z.id),className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow text-left",children:[e.jsx(Kj,{className:"w-12 h-12 text-yellow-500 mb-2"}),e.jsx("p",{className:"font-medium text-gray-900 truncate",children:Z.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[Z.documentsCount," "]})]},Z.id))})]}),w==="grid"?e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:""}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:ce.map(Z=>{const q=$(Z.type);return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow relative group",children:[e.jsx("button",{onClick:()=>K(Z),className:"absolute top-2 right-2 p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Is,{className:`w-5 h-5 ${Z.favorite?"fill-yellow-400 text-yellow-400":"text-gray-400"}`})}),e.jsx(q,{className:"w-12 h-12 text-emerald-600 mb-2"}),e.jsx("p",{className:"font-medium text-gray-900 truncate mb-1",children:Z.name}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:ne(Z.size)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>z(Z),className:"flex-1 px-2 py-1 text-xs bg-emerald-100 text-emerald-700 rounded hover:bg-emerald-200 transition-colors",children:""}),e.jsx("button",{onClick:()=>J(Z.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",children:e.jsx(tt,{className:"w-4 h-4"})})]})]},Z.id)})})]}):e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:""}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:ce.map(Z=>{const q=$(Z.type);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(q,{className:"w-8 h-8 text-emerald-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:Z.name}),Z.tags.length>0&&e.jsx("div",{className:"flex gap-1 mt-1",children:Z.tags.slice(0,2).map((Q,le)=>e.jsx("span",{className:"text-xs px-2 py-0.5 bg-gray-100 text-gray-600 rounded",children:Q},le))})]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:ne(Z.size)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:Z.uploadedBy}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(Z.uploadedAt).toLocaleDateString("ru-RU")}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>K(Z),className:"p-1 text-gray-400 hover:text-yellow-500 transition-colors",children:e.jsx(Is,{className:`w-5 h-5 ${Z.favorite?"fill-current text-yellow-500":""}`})}),e.jsx("button",{onClick:()=>z(Z),className:"p-1 text-gray-400 hover:text-emerald-600 transition-colors",children:e.jsx(Vt,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>J(Z.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",children:e.jsx(tt,{className:"w-5 h-5"})})]})})]},Z.id)})})]})})]}),ce.length===0&&U.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(cy,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:" "})]})]}),k&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:" "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"file",onChange:Z=>X({...A,file:Z.target.files?.[0]||null}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:A.description,onChange:Z=>X({...A,description:Z.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:" "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("div",{className:"flex gap-2 mb-2",children:e.jsx("input",{type:"text",value:I,onChange:Z=>V(Z.target.value),onKeyPress:Z=>{Z.key==="Enter"&&I&&(X({...A,tags:[...A.tags,I]}),V(""))},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"  (Enter)"})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:A.tags.map((Z,q)=>e.jsxs("span",{className:"inline-flex items-center gap-1 text-sm px-3 py-1 bg-emerald-100 text-emerald-700 rounded-full",children:[Z,e.jsx("button",{onClick:()=>X({...A,tags:A.tags.filter((Q,le)=>le!==q)}),className:"hover:text-emerald-900",children:e.jsx(De,{className:"w-3 h-3"})})]},q))})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:""}),e.jsx("button",{onClick:W,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:""})]})]})}),_&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:" "}),e.jsx("input",{type:"text",value:R,onChange:Z=>H(Z.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent mb-4",placeholder:" "}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>T(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:""}),e.jsx("button",{onClick:te,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:""})]})]})}),E&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[fl.createElement($(E.type),{className:"w-12 h-12 text-emerald-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:E.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[" ",E.version]})]})]}),e.jsx("button",{onClick:()=>z(null),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(De,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:":"}),e.jsx("p",{className:"text-gray-900",children:E.description||" "})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:":"}),e.jsx("p",{className:"text-gray-900",children:ne(E.size)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:":"}),e.jsx("p",{className:"text-gray-900",children:E.uploadedBy})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:":"}),e.jsx("p",{className:"text-gray-900",children:new Date(E.uploadedAt).toLocaleString("ru-RU")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:":"}),e.jsx("p",{className:"text-gray-900",children:new Date(E.modifiedAt).toLocaleString("ru-RU")})]})]}),E.tags.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:":"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:E.tags.map((Z,q)=>e.jsx("span",{className:"text-sm px-3 py-1 bg-emerald-100 text-emerald-700 rounded-full",children:Z},q))})]}),E.sharedWith.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:":"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:E.sharedWith.map((Z,q)=>e.jsx("span",{className:"text-sm px-3 py-1 bg-gray-100 text-gray-700 rounded-full",children:Z},q))})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsxs("a",{href:E.url,download:E.name,className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors text-center flex items-center justify-center gap-2",children:[e.jsx(Tt,{className:"w-5 h-5"}),""]}),e.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(xN,{className:"w-5 h-5"}),""]})]})]})]})})]})})},HW=({projectId:s,onClose:t})=>{const[r,a]=j.useState({enabled:!1,url:`https://portal.example.com/projects/${s}`,accessPassword:null,allowComments:!0,allowFileDownload:!0,allowTaskView:!0,allowTimelineView:!0,allowBudgetView:!1,showTeamMembers:!0,emailNotifications:!0,customBranding:{enabled:!1,logo:"",primaryColor:"#3B82F6",companyName:" "},accessLog:!0,expiresAt:null}),[n,i]=j.useState([]),[o,c]=j.useState([]),[u,h]=j.useState(!0),[m,f]=j.useState(!1),[p,v]=j.useState(!1),[g,y]=j.useState("settings"),[w,N]=j.useState("");j.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),j.useEffect(()=>{k()},[s]);const k=async()=>{h(!0);try{const I=await fetch(`http://147.45.215.199:8001/api/projects/${s}/portal`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(I.ok){const V=await I.json();a(V.settings),i(V.accessList||[]),c(V.activityLog||[])}else a({...r,enabled:!0,accessPassword:"client2024"}),i([{id:1,clientName:" ",clientEmail:"ivan.petrov@client.com",accessGranted:"2024-03-01T10:00:00",lastAccess:"2024-03-15T14:30:00",accessCount:24,ipAddress:"192.168.1.100"},{id:2,clientName:" ",clientEmail:"olga.sidorova@client.com",accessGranted:"2024-03-05T11:20:00",lastAccess:"2024-03-14T16:45:00",accessCount:12,ipAddress:"192.168.1.101"},{id:3,clientName:" ",clientEmail:"alex.kozlov@client.com",accessGranted:"2024-03-10T09:15:00",lastAccess:null,accessCount:0,ipAddress:"-"}]),c([{id:1,clientName:" ",action:" ",timestamp:"2024-03-15T14:30:00",details:"   "},{id:2,clientName:" ",action:" ",timestamp:"2024-03-15T14:35:00",details:" :  .pdf"},{id:3,clientName:" ",action:" ",timestamp:"2024-03-14T16:45:00",details:'   "  "'},{id:4,clientName:" ",action:" ",timestamp:"2024-03-15T14:32:00",details:"  "},{id:5,clientName:" ",action:" ",timestamp:"2024-03-14T16:40:00",details:"  "}])}catch(I){console.error("Error fetching portal data:",I)}finally{h(!1)}},S=async()=>{try{(await fetch(`http://147.45.215.199:8001/api/projects/${s}/portal/settings`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(r)})).ok&&alert(" ")}catch(I){console.error("Error saving settings:",I),alert("  ()")}},_=async()=>{const I={...r,enabled:!r.enabled};a(I);try{await fetch(`http://147.45.215.199:8001/api/projects/${s}/portal/toggle`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({enabled:I.enabled})})}catch(V){console.error("Error toggling portal:",V)}},T=()=>{const I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let V="";for(let R=0;R<12;R++)V+=I.charAt(Math.floor(Math.random()*I.length));N(V),a({...r,accessPassword:V})},E=()=>{a({...r,accessPassword:null}),N("")},z=()=>{navigator.clipboard.writeText(r.url),f(!0),setTimeout(()=>f(!1),2e3)},O=()=>{const I=`URL: ${r.url}
${r.accessPassword?`: ${r.accessPassword}`:"  "}`;navigator.clipboard.writeText(I),f(!0),setTimeout(()=>f(!1),2e3)},C=async I=>{if(confirm(" ?"))try{await fetch(`http://147.45.215.199:8001/api/projects/${s}/portal/access/${I}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}}),i(n.filter(V=>V.id!==I))}catch(V){console.error("Error revoking access:",V)}},X=(()=>{const I=n.length,V=n.filter(se=>se.lastAccess!==null).length,R=n.reduce((se,W)=>se+W.accessCount,0),H=I>0?R/I:0,ee=o.filter(se=>{const W=new Date(se.timestamp),te=new Date(Date.now()-1440*60*1e3);return W>=te}).length;return{totalAccess:I,activeUsers:V,totalViews:R,avgViewsPerUser:H,recentActivity:ee}})();return u?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:" ..."})]})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-violet-600 to-purple-600 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(tm,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:" "}),e.jsxs("p",{className:"text-violet-100 text-sm",children:[" #",s]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-violet-100",children:" :"}),e.jsx("button",{onClick:_,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${r.enabled?"bg-green-500":"bg-gray-400"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r.enabled?"translate-x-6":"translate-x-1"}`})}),e.jsx("span",{className:`text-sm font-medium ${r.enabled?"text-green-100":"text-gray-200"}`,children:r.enabled?"":""})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors","aria-label":"",children:e.jsx(De,{className:"w-6 h-6"})})]})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-4 p-6 bg-gray-50 border-b",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(it,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:X.totalAccess})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(xt,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:X.activeUsers})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Vt,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:X.totalViews})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(xt,{className:"w-4 h-4"}),e.jsx("span",{children:". "})]}),e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:X.avgViewsPerUser.toFixed(1)})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(sa,{className:"w-4 h-4"}),e.jsx("span",{children:" 24 "})]}),e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:X.recentActivity})]})]}),r.enabled&&e.jsx("div",{className:"p-6 bg-violet-50 border-b",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"  :"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1 flex items-center gap-2 bg-white border border-gray-300 rounded-lg px-4 py-3",children:[e.jsx(Nl,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{className:"font-mono text-sm text-gray-900",children:r.url})]}),e.jsxs("button",{onClick:z,className:"px-4 py-3 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors flex items-center gap-2",children:[m?e.jsx(is,{className:"w-5 h-5"}):e.jsx(er,{className:"w-5 h-5"}),m?"":""]}),e.jsxs("button",{onClick:O,className:"px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(vi,{className:"w-5 h-5"}),""]})]}),r.accessPassword&&e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[" : ",e.jsx("span",{className:"font-mono font-medium",children:p?r.accessPassword:""}),e.jsx("button",{onClick:()=>v(!p),className:"ml-2 text-violet-600 hover:text-violet-700",children:p?e.jsx(Ho,{className:"w-4 h-4 inline"}):e.jsx(Vt,{className:"w-4 h-4 inline"})})]})]})})}),e.jsxs("div",{className:"flex gap-1 p-4 bg-white border-b",children:[e.jsxs("button",{onClick:()=>y("settings"),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${g==="settings"?"bg-violet-100 text-violet-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(Ta,{className:"w-5 h-5"}),""]}),e.jsxs("button",{onClick:()=>y("access"),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${g==="access"?"bg-violet-100 text-violet-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(it,{className:"w-5 h-5"})," (",n.length,")"]}),e.jsxs("button",{onClick:()=>y("activity"),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${g==="activity"?"bg-violet-100 text-violet-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(xt,{className:"w-5 h-5"}),""]}),e.jsxs("button",{onClick:()=>y("preview"),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${g==="preview"?"bg-violet-100 text-violet-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(Vt,{className:"w-5 h-5"}),""]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[g==="settings"&&e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Or,{className:"w-5 h-5"}),""]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.accessPassword!==null,onChange:I=>{I.target.checked?T():E()},className:"w-5 h-5 rounded border-gray-300 text-violet-600 focus:ring-violet-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:" "}),e.jsx("p",{className:"text-sm text-gray-500",children:"     "})]})]})}),r.accessPassword&&e.jsx("div",{className:"ml-8 space-y-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:p?"text":"password",value:r.accessPassword,onChange:I=>a({...r,accessPassword:I.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent"}),e.jsx("button",{onClick:()=>v(!p),className:"p-2 text-gray-400 hover:text-gray-600",children:p?e.jsx(Ho,{className:"w-5 h-5"}):e.jsx(Vt,{className:"w-5 h-5"})}),e.jsxs("button",{onClick:T,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2",children:[e.jsx(ls,{className:"w-4 h-4"}),""]})]})}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.accessLog,onChange:I=>a({...r,accessLog:I.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-violet-600 focus:ring-violet-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:" "}),e.jsx("p",{className:"text-sm text-gray-500",children:"     "})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),e.jsx("input",{type:"datetime-local",value:r.expiresAt||"",onChange:I=>a({...r,expiresAt:I.target.value||null}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"    "})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(qf,{className:"w-5 h-5"}),""]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.allowComments,onChange:I=>a({...r,allowComments:I.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-violet-600 focus:ring-violet-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:" "}),e.jsx("p",{className:"text-sm text-gray-500",children:"     "})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.allowFileDownload,onChange:I=>a({...r,allowFileDownload:I.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-violet-600 focus:ring-violet-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:"  "}),e.jsx("p",{className:"text-sm text-gray-500",children:"    "})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.allowTaskView,onChange:I=>a({...r,allowTaskView:I.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-violet-600 focus:ring-violet-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:" "}),e.jsx("p",{className:"text-sm text-gray-500",children:"   "})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.allowTimelineView,onChange:I=>a({...r,allowTimelineView:I.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-violet-600 focus:ring-violet-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:" "}),e.jsx("p",{className:"text-sm text-gray-500",children:"   "})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.allowBudgetView,onChange:I=>a({...r,allowBudgetView:I.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-violet-600 focus:ring-violet-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:" "}),e.jsx("p",{className:"text-sm text-gray-500",children:"    "})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.showTeamMembers,onChange:I=>a({...r,showTeamMembers:I.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-violet-600 focus:ring-violet-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:" "}),e.jsx("p",{className:"text-sm text-gray-500",children:"    "})]})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(sa,{className:"w-5 h-5"}),""]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.emailNotifications,onChange:I=>a({...r,emailNotifications:I.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-violet-600 focus:ring-violet-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Email "}),e.jsx("p",{className:"text-sm text-gray-500",children:"    "})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.customBranding.enabled,onChange:I=>a({...r,customBranding:{...r.customBranding,enabled:I.target.checked}}),className:"w-5 h-5 rounded border-gray-300 text-violet-600 focus:ring-violet-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:"  "}),e.jsx("p",{className:"text-sm text-gray-500",children:"     "})]})]}),r.customBranding.enabled&&e.jsxs("div",{className:"ml-8 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"text",value:r.customBranding.companyName,onChange:I=>a({...r,customBranding:{...r.customBranding,companyName:I.target.value}}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"color",value:r.customBranding.primaryColor,onChange:I=>a({...r,customBranding:{...r.customBranding,primaryColor:I.target.value}}),className:"w-16 h-10 rounded border border-gray-300 cursor-pointer"}),e.jsx("span",{className:"font-mono text-sm text-gray-600",children:r.customBranding.primaryColor})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL "}),e.jsx("input",{type:"text",value:r.customBranding.logo,onChange:I=>a({...r,customBranding:{...r.customBranding,logo:I.target.value}}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent",placeholder:"https://example.com/logo.png"})]})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:S,className:"px-6 py-3 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors font-medium",children:" "})})]}),g==="access"&&e.jsx("div",{children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:" "}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:" "}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"IP "}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:n.map(I=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-violet-400 to-purple-400 flex items-center justify-center text-white font-bold text-sm",children:I.clientName.charAt(0)}),e.jsx("span",{className:"font-medium text-gray-900",children:I.clientName})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:I.clientEmail}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(I.accessGranted).toLocaleDateString("ru-RU")}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:I.lastAccess?e.jsxs("div",{children:[e.jsx("div",{children:new Date(I.lastAccess).toLocaleDateString("ru-RU")}),e.jsx("div",{className:"text-xs text-gray-400",children:new Date(I.lastAccess).toLocaleTimeString("ru-RU")})]}):e.jsx("span",{className:"text-gray-400",children:" "})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:"font-medium text-gray-900",children:I.accessCount})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 font-mono",children:I.ipAddress}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("button",{onClick:()=>C(I.id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:""})})]},I.id))})]}),n.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(it,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"   "})]})]})}),g==="activity"&&e.jsx("div",{children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"divide-y divide-gray-200",children:o.map(I=>e.jsx("div",{className:"p-6 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-violet-400 to-purple-400 flex items-center justify-center text-white font-bold",children:I.clientName.charAt(0)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-1",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:I.clientName}),e.jsx("p",{className:"text-sm text-gray-600",children:I.action})]}),e.jsx("span",{className:"text-sm text-gray-500",children:new Date(I.timestamp).toLocaleString("ru-RU")})]}),e.jsx("p",{className:"text-sm text-gray-500",children:I.details})]})]})},I.id))}),o.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(xt,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:" "})]})]})}),g==="preview"&&e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Vt,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:" "}),e.jsx("p",{className:"text-gray-600 mb-6",children:"     "}),e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"border-4 rounded-lg p-8",style:{borderColor:r.customBranding.enabled?r.customBranding.primaryColor:"#8B5CF6"},children:[e.jsxs("div",{className:"text-center mb-8",children:[r.customBranding.enabled&&r.customBranding.logo?e.jsx("img",{src:r.customBranding.logo,alt:"Logo",className:"h-16 mx-auto mb-4",onError:I=>{I.currentTarget.style.display="none"}}):e.jsx(tm,{className:"w-16 h-16 mx-auto mb-4 text-violet-600"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:r.customBranding.enabled?r.customBranding.companyName:" "}),e.jsxs("p",{className:"text-gray-600 mt-2",children:[" #",s]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[r.allowTaskView&&e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 text-center",children:[e.jsx(Ue,{className:"w-8 h-8 mx-auto mb-2 text-gray-600"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:""})]}),r.allowTimelineView&&e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 text-center",children:[e.jsx(wt,{className:"w-8 h-8 mx-auto mb-2 text-gray-600"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:""})]}),r.allowFileDownload&&e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 text-center",children:[e.jsx(Tt,{className:"w-8 h-8 mx-auto mb-2 text-gray-600"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:""})]}),r.allowComments&&e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 text-center",children:[e.jsx(Os,{className:"w-8 h-8 mx-auto mb-2 text-gray-600"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:""})]})]}),e.jsx("div",{className:"text-center text-sm text-gray-500",children:r.accessPassword?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(qf,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]}):e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(MB,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]})})]})})]})})]})]})})},qW=({projectId:s,onClose:t})=>{const[r,a]=j.useState([]),[n,i]=j.useState([]),[o,c]=j.useState([]),[u,h]=j.useState(!0),[m,f]=j.useState("tests"),[p,v]=j.useState(""),[g,y]=j.useState("all"),[w,N]=j.useState("all"),[k,S]=j.useState(!1),[_,T]=j.useState(!1),[E,z]=j.useState(null),[O,C]=j.useState(null),[A,X]=j.useState({title:"",description:"",type:"manual",priority:"medium",assignedTo:"",steps:[],expectedResult:""}),[I,V]=j.useState({title:"",description:"",severity:"minor",priority:"medium",assignedTo:"",environment:"production",stepsToReproduce:[],tags:[]}),[R,H]=j.useState(""),[ee,se]=j.useState("");j.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),j.useEffect(()=>{W()},[s]);const W=async()=>{h(!0);try{const q=await fetch(`http://147.45.215.199:8001/api/projects/${s}/qa`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(q.ok){const Q=await q.json();a(Q.testCases||[]),i(Q.bugs||[]),c(Q.testRuns||[])}else a([{id:1,title:"  ",description:"    ",type:"e2e",status:"passed",priority:"critical",assignedTo:" ",lastRun:"2024-03-15T14:30:00",duration:12,steps:["  "," email"," ",' ""'],expectedResult:"      ",actualResult:"",createdAt:"2024-02-01"},{id:2,title:"   ",description:"     ",type:"integration",status:"failed",priority:"high",assignedTo:" ",lastRun:"2024-03-15T15:00:00",duration:8,steps:["  ","  ",' ""'],expectedResult:"   ",actualResult:"Email    ",createdAt:"2024-02-05"},{id:3,title:"  ",description:"    ",type:"manual",status:"pending",priority:"medium",assignedTo:" ",lastRun:null,duration:0,steps:["   ",' " "'," ",""],expectedResult:"     ",actualResult:"",createdAt:"2024-03-01"},{id:4,title:" ",description:"   ",type:"integration",status:"passed",priority:"high",assignedTo:" ",lastRun:"2024-03-14T10:20:00",duration:15,steps:["  "," ",' ""'],expectedResult:"  ",actualResult:"",createdAt:"2024-02-10"},{id:5,title:"  ",description:"    ",type:"smoke",status:"skipped",priority:"low",assignedTo:" ",lastRun:"2024-03-10T09:00:00",duration:5,steps:["  ","  "],expectedResult:"  2 ",actualResult:"",createdAt:"2024-02-20"}]),i([{id:1,title:' ""    ',description:'    ""       ',severity:"critical",status:"in-progress",priority:"critical",assignedTo:" ",reportedBy:" ",reportedAt:"2024-03-15T16:00:00",resolvedAt:null,environment:"production",stepsToReproduce:[" ",' ""'," ",' ""'],attachments:["screenshot1.png"],tags:["ui","","critical"],linkedTestCase:3},{id:2,title:"    ",description:"       ",severity:"minor",status:"open",priority:"low",assignedTo:" ",reportedBy:" ",reportedAt:"2024-03-14T11:30:00",resolvedAt:null,environment:"staging",stepsToReproduce:["   ","  "],attachments:[],tags:["mobile","ui",""]},{id:3,title:" 500    ",description:"   500       10MB",severity:"major",status:"resolved",priority:"high",assignedTo:" ",reportedBy:" ",reportedAt:"2024-03-10T14:00:00",resolvedAt:"2024-03-13T17:30:00",environment:"production",stepsToReproduce:["   > 10MB"],attachments:["error_log.txt"],tags:["backend","",""]},{id:4,title:"   ",description:"      ",severity:"major",status:"open",priority:"medium",assignedTo:" ",reportedBy:" ",reportedAt:"2024-03-12T09:00:00",resolvedAt:null,environment:"development",stepsToReproduce:[" ","  "," ","  "],attachments:["memory_profile.png"],tags:["performance","memory",""]}]),c([{id:1,name:"  v2.1",startedAt:"2024-03-15T14:00:00",completedAt:"2024-03-15T15:30:00",status:"completed",totalTests:45,passed:42,failed:2,skipped:1,duration:5400},{id:2,name:"Smoke test  ",startedAt:"2024-03-14T10:00:00",completedAt:"2024-03-14T10:15:00",status:"completed",totalTests:12,passed:12,failed:0,skipped:0,duration:900},{id:3,name:"  API",startedAt:"2024-03-13T16:00:00",completedAt:null,status:"running",totalTests:28,passed:15,failed:0,skipped:0,duration:0}])}catch(q){console.error("Error fetching QA data:",q)}finally{h(!1)}},te=async()=>{if(!A.title){alert("  ");return}const q={...A,id:Date.now(),status:"pending",lastRun:null,duration:0,actualResult:"",createdAt:new Date().toISOString()};try{const Q=await fetch(`http://147.45.215.199:8001/api/projects/${s}/qa/tests`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(q)});if(Q.ok){const le=await Q.json();a([...r,le])}else a([...r,q]);S(!1),X({title:"",description:"",type:"manual",priority:"medium",assignedTo:"",steps:[],expectedResult:""})}catch(Q){console.error("Error adding test:",Q)}},J=async()=>{if(!I.title){alert("  ");return}const q={...I,id:Date.now(),status:"open",reportedBy:" ",reportedAt:new Date().toISOString(),resolvedAt:null,attachments:[]};try{const Q=await fetch(`http://147.45.215.199:8001/api/projects/${s}/qa/bugs`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(q)});if(Q.ok){const le=await Q.json();i([...n,le])}else i([...n,q]);T(!1),V({title:"",description:"",severity:"minor",priority:"medium",assignedTo:"",environment:"production",stepsToReproduce:[],tags:[]})}catch(Q){console.error("Error adding bug:",Q)}},K=async q=>{if(confirm(" -?"))try{await fetch(`http://147.45.215.199:8001/api/projects/${s}/qa/tests/${q}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}}),a(r.filter(Q=>Q.id!==q))}catch(Q){console.error("Error deleting test:",Q)}},$=async q=>{if(confirm(" ?"))try{await fetch(`http://147.45.215.199:8001/api/projects/${s}/qa/bugs/${q}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}}),i(n.filter(Q=>Q.id!==q))}catch(Q){console.error("Error deleting bug:",Q)}},ie=q=>{const Q={pending:{label:"",color:"bg-gray-100 text-gray-800",icon:Ve},passed:{label:"",color:"bg-green-100 text-green-800",icon:ut},failed:{label:"",color:"bg-red-100 text-red-800",icon:Tl},skipped:{label:"",color:"bg-yellow-100 text-yellow-800",icon:Ge}};return Q[q]||Q.pending},ne=q=>{const Q={open:{label:"",color:"bg-red-100 text-red-800"},"in-progress":{label:" ",color:"bg-blue-100 text-blue-800"},resolved:{label:"",color:"bg-green-100 text-green-800"},closed:{label:"",color:"bg-gray-100 text-gray-800"},reopened:{label:"",color:"bg-orange-100 text-orange-800"}};return Q[q]||Q.open},oe=q=>{const Q={trivial:{label:"",color:"bg-gray-100 text-gray-700"},minor:{label:"",color:"bg-blue-100 text-blue-700"},major:{label:"",color:"bg-orange-100 text-orange-700"},critical:{label:"",color:"bg-red-100 text-red-700"},blocker:{label:"",color:"bg-purple-100 text-purple-700"}};return Q[q]||Q.minor},U=(()=>{const q=r.length,Q=r.filter(he=>he.status==="passed").length,le=r.filter(he=>he.status==="failed").length,me=r.filter(he=>he.status==="pending").length,G=n.length,ue=n.filter(he=>he.status==="open"||he.status==="reopened").length,Y=n.filter(he=>he.status==="in-progress").length,L=n.filter(he=>he.status==="resolved"||he.status==="closed").length,M=n.filter(he=>he.severity==="critical"||he.severity==="blocker").length,B=q>0?Q/q*100:0,ae=G>0?L/G*100:0;return{totalTests:q,passedTests:Q,failedTests:le,pendingTests:me,totalBugs:G,openBugs:ue,inProgressBugs:Y,resolvedBugs:L,criticalBugs:M,passRate:B,bugResolutionRate:ae}})(),F=r.filter(q=>{const Q=q.title.toLowerCase().includes(p.toLowerCase())||q.description.toLowerCase().includes(p.toLowerCase()),le=g==="all"||q.status===g,me=w==="all"||q.priority===w;return Q&&le&&me}),Z=n.filter(q=>{const Q=q.title.toLowerCase().includes(p.toLowerCase())||q.description.toLowerCase().includes(p.toLowerCase())||q.tags.some(G=>G.toLowerCase().includes(p.toLowerCase())),le=g==="all"||q.status===g,me=w==="all"||q.priority===w;return Q&&le&&me});return u?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"  QA..."})]})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-600 to-pink-600 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(DF,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"  (QA)"}),e.jsxs("p",{className:"text-red-100 text-sm",children:[" #",s]})]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors","aria-label":"",children:e.jsx(De,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 p-6 bg-gray-50 border-b",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(dy,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:U.totalTests})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(ut,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:U.passedTests})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Tl,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-red-600",children:U.failedTests})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(B0,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:U.totalBugs})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Ge,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:U.criticalBugs})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Lr,{className:"w-4 h-4"}),e.jsx("span",{children:"Pass Rate"})]}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[U.passRate.toFixed(0),"%"]})]})]}),e.jsxs("div",{className:"flex gap-1 p-4 bg-white border-b",children:[e.jsxs("button",{onClick:()=>f("tests"),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${m==="tests"?"bg-red-100 text-red-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(dy,{className:"w-5 h-5"}),"- (",r.length,")"]}),e.jsxs("button",{onClick:()=>f("bugs"),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${m==="bugs"?"bg-red-100 text-red-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(B0,{className:"w-5 h-5"})," (",n.length,")"]}),e.jsxs("button",{onClick:()=>f("runs"),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${m==="runs"?"bg-red-100 text-red-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(xt,{className:"w-5 h-5"}),"  (",o.length,")"]}),e.jsxs("button",{onClick:()=>f("stats"),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${m==="stats"?"bg-red-100 text-red-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(Vr,{className:"w-5 h-5"}),""]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[m==="tests"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(Us,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:" ...",value:p,onChange:q=>v(q.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]})}),e.jsxs("select",{value:g,onChange:q=>y(q.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),e.jsx("option",{value:"pending",children:""}),e.jsx("option",{value:"passed",children:""}),e.jsx("option",{value:"failed",children:""}),e.jsx("option",{value:"skipped",children:""})]}),e.jsxs("select",{value:w,onChange:q=>N(q.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"medium",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"critical",children:""})]}),e.jsxs("button",{onClick:()=>S(!0),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[e.jsx(We,{className:"w-5 h-5"})," "]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:" "}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:F.map(q=>{const Q=ie(q.status),le=Q.icon;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:q.title}),e.jsx("p",{className:"text-sm text-gray-500 truncate max-w-xs",children:q.description})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 capitalize",children:q.type}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("span",{className:`inline-flex items-center gap-1 text-xs px-2 py-1 rounded-full ${Q.color}`,children:[e.jsx(le,{className:"w-3 h-3"}),Q.label]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 capitalize",children:q.priority}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:q.assignedTo}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:q.lastRun?new Date(q.lastRun).toLocaleString("ru-RU"):" "}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>z(q),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors","aria-label":"",children:e.jsx(Ue,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>K(q.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors","aria-label":"",children:e.jsx(tt,{className:"w-5 h-5"})})]})})]},q.id)})})]}),F.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(dy,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:" -"})]})]})]}),m==="bugs"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(Us,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:" ...",value:p,onChange:q=>v(q.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]})}),e.jsxs("select",{value:g,onChange:q=>y(q.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),e.jsx("option",{value:"open",children:""}),e.jsx("option",{value:"in-progress",children:" "}),e.jsx("option",{value:"resolved",children:""}),e.jsx("option",{value:"closed",children:""}),e.jsx("option",{value:"reopened",children:""})]}),e.jsxs("button",{onClick:()=>T(!0),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[e.jsx(We,{className:"w-5 h-5"})," "]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:Z.map(q=>{const Q=ne(q.status),le=oe(q.severity);return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx(B0,{className:"w-8 h-8 text-red-600 flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2",children:q.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:q.description}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${Q.color}`,children:Q.label}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${le.color}`,children:le.label}),q.tags.map((me,G)=>e.jsx("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-700 rounded-full",children:me},G))]})]})]}),e.jsx("button",{onClick:()=>$(q.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors","aria-label":"",children:e.jsx(tt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(lt,{className:"w-4 h-4"}),e.jsxs("span",{children:[": ",q.assignedTo]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(lt,{className:"w-4 h-4"}),e.jsxs("span",{children:[": ",q.reportedBy]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(wt,{className:"w-4 h-4"}),e.jsxs("span",{children:[": ",new Date(q.reportedAt).toLocaleString("ru-RU")]})]}),q.resolvedAt&&e.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[e.jsx(ut,{className:"w-4 h-4"}),e.jsxs("span",{children:[": ",new Date(q.resolvedAt).toLocaleString("ru-RU")]})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 mb-2",children:" :"}),e.jsx("ol",{className:"list-decimal list-inside space-y-1",children:q.stepsToReproduce.map((me,G)=>e.jsx("li",{className:"text-sm text-gray-600",children:me},G))})]}),e.jsx("button",{onClick:()=>C(q),className:"w-full mt-4 px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors",children:""})]},q.id)})}),Z.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(B0,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:" "})]})]}),m==="runs"&&e.jsx("div",{className:"space-y-4",children:o.map(q=>{const Q=q.status==="running";return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900",children:q.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[": ",new Date(q.startedAt).toLocaleString("ru-RU"),q.completedAt&&`  : ${new Date(q.completedAt).toLocaleString("ru-RU")}`]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${q.status==="completed"?"bg-green-100 text-green-800":q.status==="running"?"bg-blue-100 text-blue-800":q.status==="failed"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:q.status==="completed"?"":q.status==="running"?"":q.status==="failed"?"":""})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:q.totalTests})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:""}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:q.passed})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:""}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:q.failed})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:""}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:q.skipped})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4",children:e.jsxs("div",{className:"flex h-4 rounded-full overflow-hidden",children:[q.passed>0&&e.jsx("div",{className:"bg-green-500",style:{width:`${q.passed/q.totalTests*100}%`}}),q.failed>0&&e.jsx("div",{className:"bg-red-500",style:{width:`${q.failed/q.totalTests*100}%`}}),q.skipped>0&&e.jsx("div",{className:"bg-yellow-500",style:{width:`${q.skipped/q.totalTests*100}%`}})]})}),!Q&&q.duration>0&&e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[": ",Math.floor(q.duration/60),"  ",q.duration%60," "]})]},q.id)})}),m==="stats"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:" "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Pass Rate"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[U.passRate.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-green-500 h-3 rounded-full",style:{width:`${U.passRate}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:""}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:U.passedTests})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:""}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:U.failedTests})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:""}),e.jsx("p",{className:"text-2xl font-bold text-gray-600",children:U.pendingTests})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:""}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:U.totalTests})]})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:" "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:" "}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[U.bugResolutionRate.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-blue-500 h-3 rounded-full",style:{width:`${U.bugResolutionRate}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:""}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:U.openBugs})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:U.inProgressBugs})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:""}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:U.resolvedBugs})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:""}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:U.criticalBugs})]})]})]})]})]})})]}),k&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl my-8",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:" -"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:A.title,onChange:q=>X({...A,title:q.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:A.description,onChange:q=>X({...A,description:q.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("select",{value:A.type,onChange:q=>X({...A,type:q.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[e.jsx("option",{value:"unit",children:"Unit"}),e.jsx("option",{value:"integration",children:"Integration"}),e.jsx("option",{value:"e2e",children:"E2E"}),e.jsx("option",{value:"manual",children:"Manual"}),e.jsx("option",{value:"regression",children:"Regression"}),e.jsx("option",{value:"smoke",children:"Smoke"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("select",{value:A.priority,onChange:q=>X({...A,priority:q.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"medium",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"critical",children:""})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:A.assignedTo,onChange:q=>X({...A,assignedTo:q.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:R,onChange:q=>H(q.target.value),onKeyPress:q=>{q.key==="Enter"&&R&&(X({...A,steps:[...A.steps,R]}),H(""))},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"  (Enter)"}),e.jsx("button",{onClick:()=>{R&&(X({...A,steps:[...A.steps,R]}),H(""))},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:e.jsx(We,{className:"w-5 h-5"})})]}),e.jsx("ol",{className:"list-decimal list-inside space-y-1",children:A.steps.map((q,Q)=>e.jsxs("li",{className:"text-sm text-gray-700 flex items-center justify-between bg-gray-50 p-2 rounded",children:[e.jsx("span",{children:q}),e.jsx("button",{onClick:()=>X({...A,steps:A.steps.filter((le,me)=>me!==Q)}),className:"text-red-600 hover:text-red-800",children:e.jsx(De,{className:"w-4 h-4"})})]},Q))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),e.jsx("textarea",{value:A.expectedResult,onChange:q=>X({...A,expectedResult:q.target.value}),rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:""}),e.jsx("button",{onClick:te,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:""})]})]})}),_&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl my-8",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:" "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:I.title,onChange:q=>V({...I,title:q.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:I.description,onChange:q=>V({...I,description:q.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("select",{value:I.severity,onChange:q=>V({...I,severity:q.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[e.jsx("option",{value:"trivial",children:""}),e.jsx("option",{value:"minor",children:""}),e.jsx("option",{value:"major",children:""}),e.jsx("option",{value:"critical",children:""}),e.jsx("option",{value:"blocker",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("select",{value:I.priority,onChange:q=>V({...I,priority:q.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"medium",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"critical",children:""})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:I.assignedTo,onChange:q=>V({...I,assignedTo:q.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:I.environment,onChange:q=>V({...I,environment:q.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:R,onChange:q=>H(q.target.value),onKeyPress:q=>{q.key==="Enter"&&R&&(V({...I,stepsToReproduce:[...I.stepsToReproduce,R]}),H(""))},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"  (Enter)"}),e.jsx("button",{onClick:()=>{R&&(V({...I,stepsToReproduce:[...I.stepsToReproduce,R]}),H(""))},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:e.jsx(We,{className:"w-5 h-5"})})]}),e.jsx("ol",{className:"list-decimal list-inside space-y-1",children:I.stepsToReproduce.map((q,Q)=>e.jsxs("li",{className:"text-sm text-gray-700 flex items-center justify-between bg-gray-50 p-2 rounded",children:[e.jsx("span",{children:q}),e.jsx("button",{onClick:()=>V({...I,stepsToReproduce:I.stepsToReproduce.filter((le,me)=>me!==Q)}),className:"text-red-600 hover:text-red-800",children:e.jsx(De,{className:"w-4 h-4"})})]},Q))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("div",{className:"flex gap-2 mb-2",children:e.jsx("input",{type:"text",value:ee,onChange:q=>se(q.target.value),onKeyPress:q=>{q.key==="Enter"&&ee&&(V({...I,tags:[...I.tags,ee]}),se(""))},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"  (Enter)"})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:I.tags.map((q,Q)=>e.jsxs("span",{className:"inline-flex items-center gap-1 text-sm px-3 py-1 bg-gray-100 text-gray-700 rounded-full",children:[q,e.jsx("button",{onClick:()=>V({...I,tags:I.tags.filter((le,me)=>me!==Q)}),className:"hover:text-gray-900",children:e.jsx(De,{className:"w-3 h-3"})})]},Q))})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>T(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:""}),e.jsx("button",{onClick:J,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:""})]})]})})]})})},WW=({projectId:s,onClose:t})=>{const[r,a]=j.useState([]),[n,i]=j.useState([]),[o,c]=j.useState(null),[u,h]=j.useState(!0),[m,f]=j.useState(""),[p,v]=j.useState(null),[g,y]=j.useState(!1),[w,N]=j.useState(!1),[k,S]=j.useState(!1),[_,T]=j.useState({title:"",content:"",categoryId:0,tags:[]}),[E,z]=j.useState({name:"",description:"",icon:""}),[O,C]=j.useState("");j.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),j.useEffect(()=>{A()},[s]);const A=async()=>{h(!0);try{const J=await fetch(`http://147.45.215.199:8001/api/projects/${s}/knowledge-base`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(J.ok){const K=await J.json();a(K.articles||[]),i(K.categories||[])}else i([{id:1,name:"",description:" ",parentId:null,articlesCount:5,icon:""},{id:2,name:"FAQ",description:"  ",parentId:null,articlesCount:8,icon:""},{id:3,name:"API",description:" API",parentId:null,articlesCount:12,icon:""},{id:4,name:"Best Practices",description:" ",parentId:null,articlesCount:6,icon:""},{id:5,name:"Troubleshooting",description:" ",parentId:null,articlesCount:10,icon:""}]),a([{id:1,title:"    ",content:"    ...",categoryId:1,author:" ",createdAt:"2024-03-01T10:00:00",updatedAt:"2024-03-10T14:30:00",views:245,likes:18,commentsCount:5,tags:[" ",""],favorite:!0,attachments:["setup-guide.pdf"]},{id:2,title:"  ",content:"    ...",categoryId:1,author:" ",createdAt:"2024-02-15T09:00:00",updatedAt:"2024-03-05T11:20:00",views:189,likes:22,commentsCount:8,tags:["setup","dev environment"],favorite:!1,attachments:[]},{id:3,title:"   ?",content:"FAQ:     ...",categoryId:2,author:" ",createdAt:"2024-03-08T15:30:00",updatedAt:"2024-03-08T15:30:00",views:156,likes:12,commentsCount:3,tags:["faq",""],favorite:!1,attachments:[]},{id:4,title:"REST API: ",content:"    API...",categoryId:3,author:" ",createdAt:"2024-02-20T16:00:00",updatedAt:"2024-03-12T10:45:00",views:312,likes:35,commentsCount:12,tags:["api","auth","security"],favorite:!0,attachments:["api-examples.json"]},{id:5,title:"-:  ",content:"   -...",categoryId:4,author:" ",createdAt:"2024-03-05T13:00:00",updatedAt:"2024-03-05T13:00:00",views:98,likes:15,commentsCount:4,tags:["code review","best practices"],favorite:!1,attachments:[]},{id:6,title:"   ",content:"    ...",categoryId:5,author:" ",createdAt:"2024-03-14T11:00:00",updatedAt:"2024-03-14T11:00:00",views:67,likes:8,commentsCount:2,tags:["performance","troubleshooting"],favorite:!1,attachments:["performance-tips.pdf"]}])}catch(J){console.error("Error fetching knowledge base:",J)}finally{h(!1)}},X=async()=>{if(!_.title||!_.content){alert("   ");return}const J={..._,id:Date.now(),author:" ",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),views:0,likes:0,commentsCount:0,favorite:!1,attachments:[]};a([...r,J]),y(!1),T({title:"",content:"",categoryId:0,tags:[]})},I=()=>{if(!E.name){alert("  ");return}const J={...E,id:Date.now(),parentId:o,articlesCount:0};i([...n,J]),N(!1),z({name:"",description:"",icon:""})},V=J=>{confirm(" ?")&&a(r.filter(K=>K.id!==J))},R=J=>{a(r.map(K=>K.id===J.id?{...K,favorite:!K.favorite}:K))},H=()=>n.find(J=>J.id===o),ee=()=>{const J=[];let K=H();for(;K;)J.unshift(K),K=n.find($=>$.id===K.parentId);return J},se=r.filter(J=>{const K=J.categoryId===o,$=J.title.toLowerCase().includes(m.toLowerCase())||J.content.toLowerCase().includes(m.toLowerCase())||J.tags.some(ne=>ne.toLowerCase().includes(m.toLowerCase())),ie=!k||J.favorite;return K&&$&&ie}),W=n.filter(J=>J.parentId===o),te={totalArticles:r.length,totalViews:r.reduce((J,K)=>J+K.views,0),totalLikes:r.reduce((J,K)=>J+K.likes,0),favorites:r.filter(J=>J.favorite).length};return u?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"  ..."})]})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-cyan-600 to-blue-600 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(A4,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:" "}),e.jsxs("p",{className:"text-cyan-100 text-sm",children:[" #",s]})]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(De,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 p-6 bg-gray-50 border-b",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(UL,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:te.totalArticles})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Vt,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:te.totalViews})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Fh,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:te.totalLikes})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Is,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:te.favorites})]})]}),e.jsx("div",{className:"px-6 py-3 bg-white border-b",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("button",{onClick:()=>c(null),className:"text-cyan-600 hover:text-cyan-700 font-medium",children:" "}),ee().map(J=>e.jsxs(fl.Fragment,{children:[e.jsx(Sn,{className:"w-4 h-4 text-gray-400"}),e.jsx("button",{onClick:()=>c(J.id),className:"text-cyan-600 hover:text-cyan-700 font-medium",children:J.name})]},J.id))]})}),e.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 p-6 bg-white border-b",children:[e.jsxs("div",{className:"flex flex-wrap gap-3 flex-1",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(Us,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"   ...",value:m,onChange:J=>f(J.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent"})]})}),e.jsx("button",{onClick:()=>S(!k),className:`px-4 py-2 rounded-lg border transition-colors ${k?"bg-yellow-100 border-yellow-300 text-yellow-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:e.jsx(Is,{className:`w-5 h-5 ${k?"fill-current":""}`})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>N(!0),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center gap-2",children:[e.jsx(Kj,{className:"w-5 h-5"}),""]}),e.jsxs("button",{onClick:()=>y(!0),className:"px-4 py-2 bg-cyan-600 text-white rounded-lg hover:bg-cyan-700 transition-colors flex items-center gap-2",children:[e.jsx(We,{className:"w-5 h-5"}),""]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[W.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:""}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:W.map(J=>e.jsxs("button",{onClick:()=>c(J.id),className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow text-left",children:[e.jsx("div",{className:"text-3xl mb-2",children:J.icon}),e.jsx("p",{className:"font-medium text-gray-900",children:J.name}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[J.articlesCount," "]})]},J.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:""}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:se.map(J=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx(Mr,{className:"w-6 h-6 text-cyan-600 flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2",children:J.title}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:J.content})]})]}),e.jsx("button",{onClick:()=>R(J),className:"p-1",children:e.jsx(Is,{className:`w-5 h-5 ${J.favorite?"fill-yellow-400 text-yellow-400":"text-gray-400"}`})})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:J.tags.map((K,$)=>e.jsx("span",{className:"text-xs px-2 py-1 bg-cyan-100 text-cyan-700 rounded-full",children:K},$))}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Vt,{className:"w-4 h-4"}),e.jsx("span",{children:J.views})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Fh,{className:"w-4 h-4"}),e.jsx("span",{children:J.likes})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Os,{className:"w-4 h-4"}),e.jsx("span",{children:J.commentsCount})]})]}),e.jsx("button",{onClick:()=>v(J),className:"text-cyan-600 hover:text-cyan-700 font-medium text-sm",children:" "})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t text-xs text-gray-500",children:[e.jsx(lt,{className:"w-3 h-3"}),e.jsx("span",{children:J.author}),e.jsx("span",{children:""}),e.jsx(Ve,{className:"w-3 h-3"}),e.jsx("span",{children:new Date(J.updatedAt).toLocaleDateString("ru-RU")})]})]},J.id))}),se.length===0&&W.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(A4,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"    "})]})]})]}),g&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-3xl max-h-[80vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:" "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:_.title,onChange:J=>T({..._,title:J.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("select",{value:_.categoryId,onChange:J=>T({..._,categoryId:parseInt(J.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",children:[e.jsx("option",{value:0,children:" "}),n.map(J=>e.jsxs("option",{value:J.id,children:[J.icon," ",J.name]},J.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("textarea",{value:_.content,onChange:J=>T({..._,content:J.target.value}),rows:10,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent font-mono text-sm",placeholder:"Markdown ..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("div",{className:"flex gap-2 mb-2",children:e.jsx("input",{type:"text",value:O,onChange:J=>C(J.target.value),onKeyPress:J=>{J.key==="Enter"&&O&&(T({..._,tags:[..._.tags,O]}),C(""))},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",placeholder:"  (Enter)"})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:_.tags.map((J,K)=>e.jsxs("span",{className:"inline-flex items-center gap-1 text-sm px-3 py-1 bg-cyan-100 text-cyan-700 rounded-full",children:[J,e.jsx("button",{onClick:()=>T({..._,tags:_.tags.filter(($,ie)=>ie!==K)}),className:"hover:text-cyan-900",children:e.jsx(De,{className:"w-3 h-3"})})]},K))})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:""}),e.jsx("button",{onClick:X,className:"px-4 py-2 bg-cyan-600 text-white rounded-lg hover:bg-cyan-700 transition-colors",children:""})]})]})}),w&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:" "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:E.name,onChange:J=>z({...E,name:J.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:E.icon,onChange:J=>z({...E,icon:J.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",placeholder:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:E.description,onChange:J=>z({...E,description:J.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>N(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:""}),e.jsx("button",{onClick:I,className:"px-4 py-2 bg-cyan-600 text-white rounded-lg hover:bg-cyan-700 transition-colors",children:""})]})]})}),p&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:p.title}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(lt,{className:"w-4 h-4"}),e.jsx("span",{children:p.author})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ve,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(p.updatedAt).toLocaleString("ru-RU")})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Vt,{className:"w-4 h-4"}),e.jsxs("span",{children:[p.views," "]})]})]})]}),e.jsx("button",{onClick:()=>v(null),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(De,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"prose max-w-none mb-6",children:e.jsx("div",{className:"whitespace-pre-wrap text-gray-700 leading-relaxed",children:p.content})}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:p.tags.map((J,K)=>e.jsxs("span",{className:"text-sm px-3 py-1 bg-cyan-100 text-cyan-700 rounded-full",children:["#",J]},K))}),e.jsxs("div",{className:"flex items-center justify-between pt-6 border-t",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors",children:[e.jsx(Fh,{className:"w-5 h-5"}),e.jsx("span",{children:p.likes})]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[e.jsx(Os,{className:"w-5 h-5"}),e.jsx("span",{children:p.commentsCount})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2",children:[e.jsx(xN,{className:"w-5 h-5"}),""]}),e.jsxs("button",{onClick:()=>V(p.id),className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors flex items-center gap-2",children:[e.jsx(tt,{className:"w-5 h-5"}),""]})]})]})]})})]})})},YW=({projectId:s,onClose:t})=>{const[r,a]=j.useState([]),[n,i]=j.useState(!0),[o,c]=j.useState(!1),[u,h]=j.useState(null),[m,f]=j.useState({title:"",date:new Date().toISOString().slice(0,16),duration:60,type:"internal",participants:[],agenda:[],notes:""}),[p,v]=j.useState(""),[g,y]=j.useState("");j.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),j.useEffect(()=>{w()},[s]);const w=async()=>{i(!0);try{const E=await fetch(`http://147.45.215.199:8001/api/projects/${s}/meetings`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(E.ok){const z=await E.json();a(z)}else a([{id:1,title:" ",date:"2024-03-18T10:00:00",duration:120,type:"planning",participants:[" "," "," "],agenda:[" "," "," ","Q&A"],notes:"    .      API.",actionItems:[{id:1,description:"  API endpoints",assignee:" ",dueDate:"2024-03-20",completed:!1},{id:2,description:"   ",assignee:" ",dueDate:"2024-03-22",completed:!0}],status:"completed",createdBy:" "},{id:2,title:"  ",date:"2024-03-20T14:00:00",duration:60,type:"client",participants:[" ","  ()","  ()"],agenda:["  "," ","  "],notes:"  .    .",actionItems:[{id:3,description:"    ",assignee:" ",dueDate:"2024-03-22",completed:!1}],recordingUrl:"https://example.com/recording/123",status:"completed",createdBy:" "},{id:3,title:"Daily Standup",date:"2024-03-21T09:00:00",duration:15,type:"standup",participants:[" "," "," "," "],agenda:["  ","  ","  "],notes:"   .       .",actionItems:[{id:4,description:"   ",assignee:" ",dueDate:"2024-03-21",completed:!1}],status:"completed",createdBy:" "}])}catch(E){console.error("Error fetching meetings:",E)}finally{i(!1)}},N=async()=>{if(!m.title){alert("  ");return}const E={...m,id:Date.now(),actionItems:[],status:"scheduled",createdBy:" "};a([...r,E]),c(!1),f({title:"",date:new Date().toISOString().slice(0,16),duration:60,type:"internal",participants:[],agenda:[],notes:""})},k=E=>{confirm(" ?")&&a(r.filter(z=>z.id!==E))},S=(E,z)=>{a(r.map(O=>O.id===E?{...O,actionItems:O.actionItems.map(C=>C.id===z?{...C,completed:!C.completed}:C)}:O))},_=E=>{const z={internal:{label:"",color:"bg-blue-100 text-blue-800"},client:{label:" ",color:"bg-purple-100 text-purple-800"},planning:{label:"",color:"bg-green-100 text-green-800"},review:{label:"",color:"bg-yellow-100 text-yellow-800"},standup:{label:"Standup",color:"bg-cyan-100 text-cyan-800"}};return z[E]||z.internal},T={total:r.length,completed:r.filter(E=>E.status==="completed").length,upcoming:r.filter(E=>E.status==="scheduled").length,totalActionItems:r.reduce((E,z)=>E+z.actionItems.length,0),completedActionItems:r.reduce((E,z)=>E+z.actionItems.filter(O=>O.completed).length,0)};return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:" ..."})]})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(F0,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:" "}),e.jsxs("p",{className:"text-purple-100 text-sm",children:[" #",s]})]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(De,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-4 p-6 bg-gray-50 border-b",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(F0,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:T.total})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(ut,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:T.completed})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(wt,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:T.upcoming})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsx("span",{children:"Action Items"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:T.totalActionItems})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(ut,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:T.completedActionItems})]})]}),e.jsxs("div",{className:"flex justify-between items-center p-6 bg-white border-b",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" "}),e.jsxs("button",{onClick:()=>c(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2",children:[e.jsx(We,{className:"w-5 h-5"})," "]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsx("div",{className:"space-y-4",children:r.map(E=>{const z=_(E.type);return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx(F0,{className:"w-8 h-8 text-purple-600 flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"font-bold text-xl text-gray-900",children:E.title}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${z.color}`,children:z.label})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(wt,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(E.date).toLocaleString("ru-RU")})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ve,{className:"w-4 h-4"}),e.jsxs("span",{children:[E.duration," "]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(it,{className:"w-4 h-4"}),e.jsxs("span",{children:[E.participants.length," "]})]})]}),E.recordingUrl&&e.jsxs("a",{href:E.recordingUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-sm text-purple-600 hover:text-purple-700",children:[e.jsx(Nl,{className:"w-4 h-4"}),"  "]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>h(E),className:"p-2 text-gray-400 hover:text-purple-600 transition-colors",children:e.jsx(sr,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>k(E.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",children:e.jsx(tt,{className:"w-5 h-5"})})]})]}),E.agenda.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:":"}),e.jsx("ol",{className:"list-decimal list-inside space-y-1 text-sm text-gray-600",children:E.agenda.map((O,C)=>e.jsx("li",{children:O},C))})]}),E.notes&&e.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:":"}),e.jsx("p",{className:"text-sm text-gray-600 whitespace-pre-wrap",children:E.notes})]}),E.actionItems.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Action Items:"}),e.jsx("div",{className:"space-y-2",children:E.actionItems.map(O=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-blue-50 rounded-lg",children:[e.jsx("button",{onClick:()=>S(E.id,O.id),className:"mt-0.5",children:O.completed?e.jsx(ut,{className:"w-5 h-5 text-green-600"}):e.jsx(nE,{className:"w-5 h-5 text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-sm ${O.completed?"line-through text-gray-500":"text-gray-900"}`,children:O.description}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-gray-500",children:[e.jsxs("span",{children:[": ",O.assignee]}),e.jsx("span",{children:""}),e.jsxs("span",{children:[": ",new Date(O.dueDate).toLocaleDateString("ru-RU")]})]})]})]},O.id))})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t text-xs text-gray-500",children:[": ",E.createdBy,"  ",new Date(E.date).toLocaleDateString("ru-RU")]})]},E.id)})}),r.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(F0,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:" "})]})]}),o&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-3xl max-h-[80vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:" "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:m.title,onChange:E=>f({...m,title:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),e.jsx("input",{type:"datetime-local",value:m.date,onChange:E=>f({...m,date:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" ()"}),e.jsx("input",{type:"number",value:m.duration,onChange:E=>f({...m,duration:parseInt(E.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("select",{value:m.type,onChange:E=>f({...m,type:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"internal",children:""}),e.jsx("option",{value:"client",children:" "}),e.jsx("option",{value:"planning",children:""}),e.jsx("option",{value:"review",children:""}),e.jsx("option",{value:"standup",children:"Standup"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("div",{className:"flex gap-2 mb-2",children:e.jsx("input",{type:"text",value:p,onChange:E=>v(E.target.value),onKeyPress:E=>{E.key==="Enter"&&p&&(f({...m,participants:[...m.participants,p]}),v(""))},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"  (Enter)"})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:m.participants.map((E,z)=>e.jsxs("span",{className:"inline-flex items-center gap-1 text-sm px-3 py-1 bg-purple-100 text-purple-700 rounded-full",children:[E,e.jsx("button",{onClick:()=>f({...m,participants:m.participants.filter((O,C)=>C!==z)}),className:"hover:text-purple-900",children:e.jsx(De,{className:"w-3 h-3"})})]},z))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("div",{className:"flex gap-2 mb-2",children:e.jsx("input",{type:"text",value:g,onChange:E=>y(E.target.value),onKeyPress:E=>{E.key==="Enter"&&g&&(f({...m,agenda:[...m.agenda,g]}),y(""))},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"   (Enter)"})}),e.jsx("ol",{className:"list-decimal list-inside space-y-1",children:m.agenda.map((E,z)=>e.jsxs("li",{className:"text-sm text-gray-700 flex items-center justify-between bg-gray-50 p-2 rounded",children:[e.jsx("span",{children:E}),e.jsx("button",{onClick:()=>f({...m,agenda:m.agenda.filter((O,C)=>C!==z)}),className:"text-red-600 hover:text-red-800",children:e.jsx(De,{className:"w-4 h-4"})})]},z))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:m.notes,onChange:E=>f({...m,notes:E.target.value}),rows:5,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"  ..."})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:""}),e.jsx("button",{onClick:N,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:""})]})]})})]})})},GW=({projectId:s,onClose:t})=>{const[r,a]=j.useState([]),[n,i]=j.useState(!0),[o,c]=j.useState(!1),[u,h]=j.useState({name:"",type:"text",required:!1,defaultValue:"",options:[],description:""}),[m,f]=j.useState("");j.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),j.useEffect(()=>{p()},[s]);const p=async()=>{i(!0);try{const w=await fetch(`http://147.45.215.199:8001/api/projects/${s}/custom-fields`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(w.ok){const N=await w.json();a(N)}else a([{id:1,name:" ",type:"text",required:!0,defaultValue:"",description:"    ",createdAt:"2024-03-01"},{id:2,name:" ",type:"number",required:!0,defaultValue:"0",description:"    ",createdAt:"2024-03-01"},{id:3,name:" ",type:"date",required:!1,description:"  ",createdAt:"2024-03-01"},{id:4,name:"NDA ",type:"boolean",required:!1,defaultValue:"false",description:"    ",createdAt:"2024-03-01"},{id:5,name:" ",type:"select",required:!1,options:["VIP","","",""],description:"  ",createdAt:"2024-03-01"}])}catch(w){console.error("Error fetching fields:",w)}finally{i(!1)}},v=async()=>{if(!u.name){alert("  ");return}const w={...u,id:Date.now(),createdAt:new Date().toISOString()};a([...r,w]),c(!1),h({name:"",type:"text",required:!1,defaultValue:"",options:[],description:""})},g=w=>{confirm(" ?")&&a(r.filter(N=>N.id!==w))},y=w=>({text:Wf,number:hB,date:wt,boolean:gE,select:Mm,textarea:Ue})[w]||Wf;return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:" ..."})]})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-600 to-red-600 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Jj,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:" "}),e.jsxs("p",{className:"text-orange-100 text-sm",children:[" #",s]})]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(De,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex justify-between items-center p-6 bg-white border-b",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[" : ",r.length]}),e.jsx("p",{className:"text-sm text-gray-500",children:"   "})]}),e.jsxs("button",{onClick:()=>c(!0),className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors flex items-center gap-2",children:[e.jsx(We,{className:"w-5 h-5"})," "]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(w=>{const N=y(w.type);return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx(N,{className:"w-8 h-8 text-orange-600 flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-1",children:w.name}),w.required&&e.jsx("span",{className:"text-xs px-2 py-1 bg-red-100 text-red-700 rounded-full",children:""})]})]}),e.jsx("button",{onClick:()=>g(w.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",children:e.jsx(tt,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:w.description}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:":"}),e.jsx("span",{className:"font-medium text-gray-900 capitalize",children:w.type})]}),w.defaultValue&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"  :"}),e.jsx("span",{className:"font-medium text-gray-900",children:w.defaultValue})]}),w.options&&w.options.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 mb-1",children:":"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:w.options.map((k,S)=>e.jsx("span",{className:"text-xs px-2 py-1 bg-orange-100 text-orange-700 rounded",children:k},S))})]})]})]},w.id)})}),r.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Jj,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"  "})]})]}),o&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:" "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:u.name,onChange:w=>h({...u,name:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("select",{value:u.type,onChange:w=>h({...u,type:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"text",children:""}),e.jsx("option",{value:"number",children:""}),e.jsx("option",{value:"date",children:""}),e.jsx("option",{value:"boolean",children:"/"}),e.jsx("option",{value:"select",children:"  "}),e.jsx("option",{value:"textarea",children:" "})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:u.description,onChange:w=>h({...u,description:w.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:u.required,onChange:w=>h({...u,required:w.target.checked}),className:"rounded border-gray-300 text-orange-600 focus:ring-orange-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:" "})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),e.jsx("input",{type:"text",value:u.defaultValue,onChange:w=>h({...u,defaultValue:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),u.type==="select"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),e.jsx("div",{className:"flex gap-2 mb-2",children:e.jsx("input",{type:"text",value:m,onChange:w=>f(w.target.value),onKeyPress:w=>{w.key==="Enter"&&m&&(h({...u,options:[...u.options||[],m]}),f(""))},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"  (Enter)"})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(u.options||[]).map((w,N)=>e.jsxs("span",{className:"inline-flex items-center gap-1 text-sm px-3 py-1 bg-orange-100 text-orange-700 rounded-full",children:[w,e.jsx("button",{onClick:()=>h({...u,options:(u.options||[]).filter((k,S)=>S!==N)}),className:"hover:text-orange-900",children:e.jsx(De,{className:"w-3 h-3"})})]},N))})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:""}),e.jsx("button",{onClick:v,className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors",children:""})]})]})})]})})},KW=({projectId:s,onClose:t})=>{const[r,a]=j.useState([]),[n,i]=j.useState(!0),[o,c]=j.useState(null),[u,h]=j.useState(""),[m,f]=j.useState(new Date().toISOString().slice(0,10)),[p,v]=j.useState([]),[g,y]=j.useState("pdf"),[w,N]=j.useState(!1);j.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),j.useEffect(()=>{k()},[s]);const k=async()=>{i(!0);try{const E=await fetch(`http://147.45.215.199:8001/api/projects/${s}/report-templates`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(E.ok){const z=await E.json();a(z)}else a([{id:1,name:"  ",description:"   ",type:"progress",sections:[" ",""," (%)","",""],format:"pdf"},{id:2,name:" ",description:"   ",type:"financial",sections:["","  ","",""],format:"xlsx"},{id:3,name:"  ",description:"  ",type:"time",sections:["  ","  ","Billable/Non-billable",""],format:"xlsx"},{id:4,name:"  ",description:" ",type:"team",sections:["",""," "," "],format:"pdf"},{id:5,name:"  ",description:"QA   ",type:"quality",sections:["","","Code coverage"," "],format:"pdf"}])}catch(E){console.error("Error fetching templates:",E)}finally{i(!1)}},S=async()=>{if(!o){alert("  ");return}if(!u||!m){alert("  ");return}N(!0);try{const E=await fetch(`http://147.45.215.199:8001/api/projects/${s}/reports/generate`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({templateId:o.id,dateFrom:u,dateTo:m,sections:p.length>0?p:o.sections,format:g})});if(E.ok){const z=await E.blob(),O=window.URL.createObjectURL(z),C=document.createElement("a");C.href=O,C.download=`report-${o.name}-${new Date().toISOString().slice(0,10)}.${g}`,document.body.appendChild(C),C.click(),C.remove(),window.URL.revokeObjectURL(O),alert("   ")}else alert("     ")}catch(E){console.error("Error generating report:",E),alert("     ")}finally{N(!1)}},_=E=>({progress:Lr,financial:Qe,time:Ve,team:it,quality:Ph,custom:Ue})[E]||Ue,T=E=>{p.includes(E)?v(p.filter(z=>z!==E)):v([...p,E])};return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:" ..."})]})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-teal-600 to-cyan-600 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ue,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:" "}),e.jsxs("p",{className:"text-teal-100 text-sm",children:[" #",s]})]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(De,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:" "}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(E=>{const z=_(E.type),O=o?.id===E.id;return e.jsxs("button",{onClick:()=>{c(E),v([]),y(E.format)},className:`text-left bg-white border-2 rounded-lg p-6 hover:shadow-md transition-all ${O?"border-teal-600 bg-teal-50":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx(z,{className:`w-8 h-8 flex-shrink-0 ${O?"text-teal-600":"text-gray-600"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-1",children:E.name}),e.jsx("p",{className:"text-sm text-gray-600",children:E.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsxs("span",{children:[E.sections.length," "]}),e.jsx("span",{children:""}),e.jsx("span",{children:E.format.toUpperCase()})]})]},E.id)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:" "}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(wt,{className:"w-4 h-4 inline mr-2"})," "]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:""}),e.jsx("input",{type:"date",value:u,onChange:E=>h(E.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:""}),e.jsx("input",{type:"date",value:m,onChange:E=>f(E.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"})]})]})]}),o&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Ds,{className:"w-4 h-4 inline mr-2"})," "]}),e.jsx("div",{className:"space-y-2",children:o.sections.map(E=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:p.length===0||p.includes(E),onChange:()=>T(E),className:"rounded border-gray-300 text-teal-600 focus:ring-teal-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:E})]},E))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Ue,{className:"w-4 h-4 inline mr-2"})," "]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["pdf","xlsx","docx","html"].map(E=>e.jsx("button",{onClick:()=>y(E),className:`px-4 py-2 rounded-lg border-2 transition-colors ${g===E?"border-teal-600 bg-teal-50 text-teal-700 font-medium":"border-gray-200 text-gray-700 hover:bg-gray-50"}`,children:E.toUpperCase()},E))})]}),e.jsx("button",{onClick:S,disabled:w||!u||!m,className:"w-full px-6 py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2 font-medium",children:w?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Tt,{className:"w-5 h-5"})," "]})})]}),!o&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ue,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"  "})]})]}),o&&e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:""}),e.jsx("p",{className:"text-sm text-blue-700",children:o.description}),e.jsx("div",{className:"mt-3 pt-3 border-t border-blue-200",children:e.jsxs("p",{className:"text-xs text-blue-600",children:["  "," ",p.length>0?p.length:o.sections.length," "]})})]})]})]})})]})})},XW=({projectId:s,onClose:t})=>{const[r,a]=j.useState([]),[n,i]=j.useState(!0),[o,c]=j.useState(""),[u,h]=j.useState("all"),[m,f]=j.useState("all"),[p,v]=j.useState("all"),[g,y]=j.useState(""),[w,N]=j.useState(new Date().toISOString().slice(0,10)),[k,S]=j.useState(null);j.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),j.useEffect(()=>{_()},[s]);const _=async()=>{i(!0);try{const V=await fetch(`http://147.45.215.199:8001/api/projects/${s}/audit-log`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(V.ok){const R=await V.json();a(R)}else a([{id:1,userId:1,userName:" ",userRole:"",action:"update",entityType:"project",entityId:s,entityName:" ",changes:[{field:"",oldValue:" ",newValue:""},{field:"",oldValue:"100000",newValue:"120000"}],ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7)",timestamp:new Date(Date.now()-36e5).toISOString(),severity:"info"},{id:2,userId:2,userName:" ",userRole:"",action:"create",entityType:"task",entityId:101,entityName:" ",ipAddress:"192.168.1.101",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64)",timestamp:new Date(Date.now()-72e5).toISOString(),severity:"info"},{id:3,userId:3,userName:" ",userRole:"",action:"delete",entityType:"file",entityId:50,entityName:"old_document.pdf",ipAddress:"192.168.1.102",userAgent:"Mozilla/5.0 (X11; Linux x86_64)",timestamp:new Date(Date.now()-144e5).toISOString(),severity:"warning"},{id:4,userId:1,userName:" ",userRole:"",action:"permission",entityType:"user",entityId:5,entityName:" ",changes:[{field:"",oldValue:"",newValue:""},{field:"",oldValue:"",newValue:""}],ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7)",timestamp:new Date(Date.now()-216e5).toISOString(),severity:"critical"},{id:5,userId:2,userName:" ",userRole:"",action:"export",entityType:"report",entityId:20,entityName:" ",ipAddress:"192.168.1.101",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64)",timestamp:new Date(Date.now()-288e5).toISOString(),severity:"info"},{id:6,userId:4,userName:" ",userRole:"QA",action:"update",entityType:"task",entityId:102,entityName:" ",changes:[{field:"",oldValue:"",newValue:" "}],ipAddress:"192.168.1.103",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_7_1)",timestamp:new Date(Date.now()-36e6).toISOString(),severity:"info"}])}catch(V){console.error("Error fetching audit log:",V)}finally{i(!1)}},T=V=>({create:"",update:"",delete:"",view:"",export:"",login:"",logout:"",permission:""})[V]||"",E=V=>({create:"text-green-600 bg-green-100",update:"text-blue-600 bg-blue-100",delete:"text-red-600 bg-red-100",view:"text-gray-600 bg-gray-100",export:"text-purple-600 bg-purple-100",login:"text-teal-600 bg-teal-100",logout:"text-orange-600 bg-orange-100",permission:"text-pink-600 bg-pink-100"})[V]||"text-gray-600 bg-gray-100",z=V=>({info:"bg-blue-100 text-blue-800",warning:"bg-yellow-100 text-yellow-800",critical:"bg-red-100 text-red-800"})[V]||"bg-gray-100 text-gray-800",O=V=>({info:"",warning:"",critical:""})[V]||"",C=V=>({create:"",update:"",delete:"",view:"",export:"",login:"",logout:"",permission:" "})[V]||V,A=V=>({project:"",task:"",file:"",user:"",setting:"",report:"",comment:""})[V]||V,X=r.filter(V=>{const R=V.userName.toLowerCase().includes(o.toLowerCase())||V.entityName.toLowerCase().includes(o.toLowerCase())||V.action.toLowerCase().includes(o.toLowerCase()),H=u==="all"||V.action===u,ee=m==="all"||V.entityType===m,se=p==="all"||V.severity===p,W=new Date(V.timestamp).toISOString().slice(0,10),te=(!g||W>=g)&&(!w||W<=w);return R&&H&&ee&&se&&te}),I=()=>{const V=[["ID","","","","","","IP",""].join(","),...X.map(se=>[se.id,se.userName,C(se.action),A(se.entityType),se.entityName,new Date(se.timestamp).toLocaleString("ru-RU"),se.ipAddress,O(se.severity)].join(","))].join(`
`),R=new Blob(["\uFEFF"+V],{type:"text/csv;charset=utf-8;"}),H=window.URL.createObjectURL(R),ee=document.createElement("a");ee.href=H,ee.download=`audit-log-project-${s}-${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(ee),ee.click(),document.body.removeChild(ee),window.URL.revokeObjectURL(H)};return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"  ..."})]})}):e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Or,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:" "}),e.jsxs("p",{className:"text-indigo-100 text-sm",children:[" #",s]})]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(De,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 border-b bg-gray-50",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Us,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:o,onChange:V=>c(V.target.value),placeholder:"...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),e.jsxs("select",{value:u,onChange:V=>h(V.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),e.jsx("option",{value:"create",children:""}),e.jsx("option",{value:"update",children:""}),e.jsx("option",{value:"delete",children:""}),e.jsx("option",{value:"view",children:""}),e.jsx("option",{value:"export",children:""}),e.jsx("option",{value:"permission",children:""})]}),e.jsxs("select",{value:m,onChange:V=>f(V.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),e.jsx("option",{value:"project",children:""}),e.jsx("option",{value:"task",children:""}),e.jsx("option",{value:"file",children:""}),e.jsx("option",{value:"user",children:""}),e.jsx("option",{value:"report",children:""})]}),e.jsxs("select",{value:p,onChange:V=>v(V.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),e.jsx("option",{value:"info",children:""}),e.jsx("option",{value:"warning",children:""}),e.jsx("option",{value:"critical",children:""})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:" "}),e.jsx("input",{type:"date",value:g,onChange:V=>y(V.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:" "}),e.jsx("input",{type:"date",value:w,onChange:V=>N(V.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsxs("button",{onClick:_,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(ls,{className:"w-5 h-5"}),""]}),e.jsxs("button",{onClick:I,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Tt,{className:"w-5 h-5"}),""]})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[" : ",e.jsx("span",{className:"font-bold text-gray-900",children:X.length}),"  ",r.length]})}),e.jsx("div",{className:"space-y-3",children:X.map(V=>e.jsx("div",{onClick:()=>S(V),className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-all cursor-pointer",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${E(V.action)} flex items-center justify-center flex-shrink-0 text-xl`,children:T(V.action)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-bold text-gray-900 mb-1",children:[C(V.action),"  ",A(V.entityType)]}),e.jsx("p",{className:"text-sm text-gray-600",children:V.entityName})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${z(V.severity)}`,children:O(V.severity)})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(lt,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:V.userName}),e.jsx("p",{className:"text-xs text-gray-500",children:V.userRole})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(wt,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900",children:new Date(V.timestamp).toLocaleDateString("ru-RU")}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(V.timestamp).toLocaleTimeString("ru-RU")})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ya,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900",children:V.ipAddress}),e.jsx("p",{className:"text-xs text-gray-500",children:"IP "})]})]}),V.changes&&V.changes.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-900",children:[V.changes.length," "]}),e.jsx("p",{className:"text-xs text-gray-500",children:""})]})]})]})]})]})},V.id))}),X.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Or,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"  "})]})]})]}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl max-h-[80vh] overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ue,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:" "}),e.jsxs("p",{className:"text-indigo-100 text-sm",children:["ID: ",k.id]})]})]}),e.jsx("button",{onClick:()=>S(null),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(De,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(80vh-80px)]",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:k.userName}),e.jsx("p",{className:"text-sm text-gray-500",children:k.userRole})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:T(k.action)}),e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:C(k.action)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),e.jsx("p",{className:"text-gray-900",children:A(k.entityType)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),e.jsx("p",{className:"text-gray-900",children:k.entityName})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"  "}),e.jsx("p",{className:"text-gray-900",children:new Date(k.timestamp).toLocaleString("ru-RU")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),e.jsx("span",{className:`inline-block text-xs px-3 py-1 rounded-full ${z(k.severity)}`,children:O(k.severity)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"IP "}),e.jsx("p",{className:"text-gray-900 font-mono",children:k.ipAddress})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User Agent"}),e.jsx("p",{className:"text-sm text-gray-600 font-mono break-all",children:k.userAgent})]}),k.changes&&k.changes.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:""}),e.jsx("div",{className:"space-y-3",children:k.changes.map((V,R)=>e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsx("p",{className:"font-medium text-gray-900 mb-2",children:V.field}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),e.jsx("p",{className:"text-sm text-red-600 font-mono bg-red-50 px-2 py-1 rounded",children:V.oldValue||""})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),e.jsx("p",{className:"text-sm text-green-600 font-mono bg-green-50 px-2 py-1 rounded",children:V.newValue||""})]})]})]},R))})]})]})}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t flex justify-end",children:e.jsx("button",{onClick:()=>S(null),className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:""})})]})})]})},ZW=({projectId:s,onClose:t})=>{const[r,a]=j.useState([]),[n,i]=j.useState(!0),[o,c]=j.useState(!1),[u,h]=j.useState(null),[m,f]=j.useState("all"),[p,v]=j.useState({clientName:"",clientEmail:"",clientAddress:"",issueDate:new Date().toISOString().slice(0,10),dueDate:new Date(Date.now()+720*60*60*1e3).toISOString().slice(0,10),items:[],taxRate:20,discount:0,notes:""}),[g,y]=j.useState({description:"",quantity:1,unitPrice:0});j.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),j.useEffect(()=>{w()},[s]);const w=async()=>{i(!0);try{const V=await fetch(`http://147.45.215.199:8001/api/projects/${s}/invoices`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(V.ok){const R=await V.json();a(R)}else a([{id:1,invoiceNumber:"INV-2024-001",clientName:' ""',clientEmail:"client@technocom.ru",clientAddress:". , . , . 10",issueDate:"2024-03-01",dueDate:"2024-03-31",status:"paid",items:[{id:1,description:" ",quantity:1,unitPrice:15e4,amount:15e4},{id:2,description:" (1 )",quantity:1,unitPrice:2e4,amount:2e4}],subtotal:17e4,tax:34e3,taxRate:20,discount:5e3,total:199e3,notes:"   30 ",paymentMethod:" ",paidDate:"2024-03-15"},{id:2,invoiceNumber:"INV-2024-002",clientName:"  ..",clientEmail:"ivanov@example.com",clientAddress:". -, . , . 25",issueDate:"2024-03-15",dueDate:"2024-04-15",status:"sent",items:[{id:1,description:"",quantity:5,unitPrice:5e3,amount:25e3},{id:2,description:" ",quantity:1,unitPrice:45e3,amount:45e3}],subtotal:7e4,tax:14e3,taxRate:20,discount:0,total:84e3,notes:"   30    "},{id:3,invoiceNumber:"INV-2024-003",clientName:' ""',clientEmail:"info@bizgroup.ru",clientAddress:". , . , . 5",issueDate:"2024-02-01",dueDate:"2024-02-28",status:"overdue",items:[{id:1,description:"  CRM",quantity:1,unitPrice:8e4,amount:8e4}],subtotal:8e4,tax:16e3,taxRate:20,discount:0,total:96e3,notes:":  "}])}catch(V){console.error("Error fetching invoices:",V)}finally{i(!1)}},N=()=>{const V=p.items.reduce((ee,se)=>ee+se.amount,0),R=V*p.taxRate/100,H=V+R-p.discount;return{subtotal:V,tax:R,total:H}},k=()=>{if(!g.description||g.quantity<=0||g.unitPrice<=0){alert("   /");return}const V={id:Date.now(),description:g.description,quantity:g.quantity,unitPrice:g.unitPrice,amount:g.quantity*g.unitPrice};v({...p,items:[...p.items,V]}),y({description:"",quantity:1,unitPrice:0})},S=V=>{v({...p,items:p.items.filter(R=>R.id!==V)})},_=()=>{if(!p.clientName||!p.clientEmail||p.items.length===0){alert("      1 /");return}const{subtotal:V,tax:R,total:H}=N(),ee={id:Date.now(),invoiceNumber:`INV-${new Date().getFullYear()}-${String(r.length+1).padStart(3,"0")}`,clientName:p.clientName,clientEmail:p.clientEmail,clientAddress:p.clientAddress,issueDate:p.issueDate,dueDate:p.dueDate,status:"draft",items:p.items,subtotal:V,tax:R,taxRate:p.taxRate,discount:p.discount,total:H,notes:p.notes};a([ee,...r]),c(!1),v({clientName:"",clientEmail:"",clientAddress:"",issueDate:new Date().toISOString().slice(0,10),dueDate:new Date(Date.now()+720*60*60*1e3).toISOString().slice(0,10),items:[],taxRate:20,discount:0,notes:""})},T=V=>{confirm(" ?")&&a(r.filter(R=>R.id!==V))},E=V=>{const R=r.find(H=>H.id===V);R&&R.status==="draft"&&(a(r.map(H=>H.id===V?{...H,status:"sent"}:H)),alert("  "))},z=V=>{a(r.map(R=>R.id===V?{...R,status:"paid",paidDate:new Date().toISOString().slice(0,10)}:R)),alert("   ")},O=V=>({draft:e.jsx(sr,{className:"w-5 h-5"}),sent:e.jsx(rr,{className:"w-5 h-5"}),paid:e.jsx(ut,{className:"w-5 h-5"}),overdue:e.jsx(Ge,{className:"w-5 h-5"}),cancelled:e.jsx(De,{className:"w-5 h-5"})})[V]||e.jsx(Ue,{className:"w-5 h-5"}),C=V=>({draft:"bg-gray-100 text-gray-700",sent:"bg-blue-100 text-blue-700",paid:"bg-green-100 text-green-700",overdue:"bg-red-100 text-red-700",cancelled:"bg-orange-100 text-orange-700"})[V]||"bg-gray-100 text-gray-700",A=V=>({draft:"",sent:"",paid:"",overdue:"",cancelled:""})[V]||V,X=r.filter(V=>m==="all"?!0:V.status===m),I={total:r.reduce((V,R)=>V+R.total,0),paid:r.filter(V=>V.status==="paid").reduce((V,R)=>V+R.total,0),pending:r.filter(V=>V.status==="sent"||V.status==="overdue").reduce((V,R)=>V+R.total,0)};return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:" ..."})]})}):e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ue,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:" "}),e.jsxs("p",{className:"text-green-100 text-sm",children:[" #",s]})]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(De,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 border-b bg-gray-50",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-4",children:[e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Qe,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:" "}),e.jsxs("p",{className:"text-xl font-bold text-gray-900",children:[I.total.toLocaleString("ru-RU")," "]})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ut,{className:"w-8 h-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:""}),e.jsxs("p",{className:"text-xl font-bold text-green-700",children:[I.paid.toLocaleString("ru-RU")," "]})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ve,{className:"w-8 h-8 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:""}),e.jsxs("p",{className:"text-xl font-bold text-orange-700",children:[I.pending.toLocaleString("ru-RU")," "]})]})]})}),e.jsxs("button",{onClick:()=>c(!0),className:"bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2 font-medium",children:[e.jsx(We,{className:"w-5 h-5"})," "]})]}),e.jsx("div",{className:"flex gap-2",children:["all","draft","sent","paid","overdue"].map(V=>e.jsxs("button",{onClick:()=>f(V),className:`px-4 py-2 rounded-lg transition-colors ${m===V?"bg-green-600 text-white":"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50"}`,children:[V==="all"?"":A(V),e.jsxs("span",{className:"ml-2 text-xs",children:["(",V==="all"?r.length:r.filter(R=>R.status===V).length,")"]})]},V))})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsx("div",{className:"space-y-4",children:X.map(V=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:`p-3 rounded-lg ${C(V.status)}`,children:O(V.status)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:V.invoiceNumber}),e.jsx("span",{className:`text-xs px-3 py-1 rounded-full ${C(V.status)}`,children:A(V.status)})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(lt,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:V.clientName}),e.jsx("p",{className:"text-xs text-gray-500",children:V.clientEmail})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(wt,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-900",children:[": ",new Date(V.issueDate).toLocaleDateString("ru-RU")]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[" : ",new Date(V.dueDate).toLocaleDateString("ru-RU")]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[V.total.toLocaleString("ru-RU")," "]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[V.items.length," "]})]})]}),V.paidDate&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ut,{className:"w-4 h-4 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900",children:""}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(V.paidDate).toLocaleDateString("ru-RU")})]})]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>h(V),className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"",children:e.jsx(Vt,{className:"w-5 h-5"})}),V.status==="draft"&&e.jsx("button",{onClick:()=>E(V.id),className:"p-2 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"",children:e.jsx(rr,{className:"w-5 h-5"})}),(V.status==="sent"||V.status==="overdue")&&e.jsx("button",{onClick:()=>z(V.id),className:"p-2 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"  ",children:e.jsx(ut,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>T(V.id),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"",children:e.jsx(tt,{className:"w-5 h-5"})})]})]}),V.notes&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsx("p",{className:"text-sm text-gray-600",children:V.notes})})]},V.id))}),X.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Ue,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"  "})]})]})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white p-6 flex justify-between items-center",children:[e.jsx("h3",{className:"text-2xl font-bold",children:" "}),e.jsx("button",{onClick:()=>c(!1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(De,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:p.clientName,onChange:V=>v({...p,clientName:V.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:p.clientEmail,onChange:V=>v({...p,clientEmail:V.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),e.jsx("textarea",{value:p.clientAddress,onChange:V=>v({...p,clientAddress:V.target.value}),rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"date",value:p.issueDate,onChange:V=>v({...p,issueDate:V.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"date",value:p.dueDate,onChange:V=>v({...p,dueDate:V.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-3",children:"/"}),e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-3",children:[e.jsx("div",{className:"md:col-span-5",children:e.jsx("input",{type:"text",value:g.description,onChange:V=>y({...g,description:V.target.value}),placeholder:"",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx("input",{type:"number",value:g.quantity,onChange:V=>y({...g,quantity:parseFloat(V.target.value)||0}),placeholder:"-",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})}),e.jsx("div",{className:"md:col-span-3",children:e.jsx("input",{type:"number",value:g.unitPrice,onChange:V=>y({...g,unitPrice:parseFloat(V.target.value)||0}),placeholder:"",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx("button",{onClick:k,className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:e.jsx(We,{className:"w-5 h-5 mx-auto"})})})]})}),p.items.length>0&&e.jsx("div",{className:"space-y-2",children:p.items.map(V=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:V.description}),e.jsxs("p",{className:"text-sm text-gray-500",children:[V.quantity,"  ",V.unitPrice.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[V.amount.toLocaleString("ru-RU")," "]}),e.jsx("button",{onClick:()=>S(V.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",children:e.jsx(tt,{className:"w-4 h-4"})})]})]},V.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" (%)"}),e.jsx("input",{type:"number",value:p.taxRate,onChange:V=>v({...p,taxRate:parseFloat(V.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" ()"}),e.jsx("input",{type:"number",value:p.discount,onChange:V=>v({...p,discount:parseFloat(V.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]}),p.items.length>0&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:":"}),e.jsxs("span",{className:"font-medium",children:[N().subtotal.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:[" (",p.taxRate,"%):"]}),e.jsxs("span",{className:"font-medium",children:[N().tax.toLocaleString("ru-RU")," "]})]}),p.discount>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:":"}),e.jsxs("span",{className:"font-medium text-red-600",children:["-",p.discount.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold text-gray-900 pt-2 border-t border-green-300",children:[e.jsx("span",{children:":"}),e.jsxs("span",{children:[N().total.toLocaleString("ru-RU")," "]})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:p.notes,onChange:V=>v({...p,notes:V.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]})}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>c(!1),className:"px-6 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:""}),e.jsx("button",{onClick:_,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:" "})]})]})}),u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white p-6 flex justify-between items-center",children:[e.jsx("h3",{className:"text-2xl font-bold",children:u.invoiceNumber}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>alert("   PDF  "),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",title:" PDF",children:e.jsx(Tt,{className:"w-6 h-6"})}),e.jsx("button",{onClick:()=>h(null),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(De,{className:"w-6 h-6"})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between pb-6 border-b",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-2xl font-bold text-gray-900",children:""}),e.jsx("p",{className:"text-lg text-gray-600",children:u.invoiceNumber})]}),e.jsx("span",{className:`px-4 py-2 rounded-lg ${C(u.status)}`,children:A(u.status)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-500 mb-2",children:""}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:u.clientName}),e.jsx("p",{className:"text-sm text-gray-600",children:u.clientEmail}),u.clientAddress&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:u.clientAddress})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-500",children:" "}),e.jsx("p",{className:"text-gray-900",children:new Date(u.issueDate).toLocaleDateString("ru-RU")})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-500",children:" "}),e.jsx("p",{className:"text-gray-900",children:new Date(u.dueDate).toLocaleDateString("ru-RU")})]})]})]}),e.jsx("div",{children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-300",children:[e.jsx("th",{className:"text-left py-3 text-sm font-medium text-gray-500",children:""}),e.jsx("th",{className:"text-center py-3 text-sm font-medium text-gray-500",children:"-"}),e.jsx("th",{className:"text-right py-3 text-sm font-medium text-gray-500",children:""}),e.jsx("th",{className:"text-right py-3 text-sm font-medium text-gray-500",children:""})]})}),e.jsx("tbody",{children:u.items.map(V=>e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"py-3 text-gray-900",children:V.description}),e.jsx("td",{className:"py-3 text-center text-gray-900",children:V.quantity}),e.jsxs("td",{className:"py-3 text-right text-gray-900",children:[V.unitPrice.toLocaleString("ru-RU")," "]}),e.jsxs("td",{className:"py-3 text-right font-medium text-gray-900",children:[V.amount.toLocaleString("ru-RU")," "]})]},V.id))})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"w-64 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:":"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[u.subtotal.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:[" (",u.taxRate,"%):"]}),e.jsxs("span",{className:"font-medium text-gray-900",children:[u.tax.toLocaleString("ru-RU")," "]})]}),u.discount>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:":"}),e.jsxs("span",{className:"font-medium text-red-600",children:["-",u.discount.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold text-gray-900 pt-2 border-t-2 border-gray-300",children:[e.jsx("span",{children:":"}),e.jsxs("span",{children:[u.total.toLocaleString("ru-RU")," "]})]})]})}),u.notes&&e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("p",{className:"text-sm text-gray-600",children:u.notes})]}),u.paidDate&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-green-800",children:[e.jsx(ut,{className:"w-4 h-4 inline mr-2"})," ",new Date(u.paidDate).toLocaleDateString("ru-RU"),u.paymentMethod&&` - ${u.paymentMethod}`]})})]})})]})})]})},QW=({projectId:s,onClose:t})=>{const[r,a]=j.useState([]),[n,i]=j.useState(!0),[o,c]=j.useState(!1),[u,h]=j.useState("all"),[m,f]=j.useState("all"),[p,v]=j.useState(""),[g,y]=j.useState(new Date().toISOString().slice(0,10)),[w,N]=j.useState("list"),[k,S]=j.useState({date:new Date().toISOString().slice(0,10),category:"other",description:"",amount:0,paidTo:"",paymentMethod:"transfer",notes:"",createdBy:" "});j.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),j.useEffect(()=>{_()},[s]);const _=async()=>{i(!0);try{const J=await fetch(`http://147.45.215.199:8001/api/projects/${s}/expenses`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(J.ok){const K=await J.json();a(K)}else a([{id:1,date:"2024-03-15",category:"salary",description:" ",amount:15e4,paidTo:" ",paymentMethod:"transfer",status:"paid",approvedBy:" ",notes:"   2024",createdBy:" "},{id:2,date:"2024-03-10",category:"software",description:"  IDE  ",amount:15e3,paidTo:"JetBrains, GitHub",paymentMethod:"card",status:"approved",approvedBy:" ",notes:"   ",createdBy:" "},{id:3,date:"2024-03-08",category:"equipment",description:"   ",amount:85e3,paidTo:"DNS",paymentMethod:"invoice",status:"paid",approvedBy:" ",notes:'MacBook Pro 14"',createdBy:" "},{id:4,date:"2024-03-05",category:"marketing",description:" ",amount:25e3,paidTo:".",paymentMethod:"card",status:"pending",notes:"   ",createdBy:" "},{id:5,date:"2024-03-01",category:"office",description:" ",amount:12e4,paidTo:'- "-"',paymentMethod:"transfer",status:"paid",approvedBy:" ",notes:"   2024",createdBy:" "},{id:6,date:"2024-02-28",category:"travel",description:"  -",amount:35e3,paidTo:", ",paymentMethod:"card",status:"approved",approvedBy:" ",notes:"  ",createdBy:" "}])}catch(J){console.error("Error fetching expenses:",J)}finally{i(!1)}},T=()=>{if(!k.description||!k.paidTo||k.amount<=0){alert("   ");return}const J={id:Date.now(),date:k.date,category:k.category,description:k.description,amount:k.amount,paidTo:k.paidTo,paymentMethod:k.paymentMethod,status:"pending",notes:k.notes,createdBy:k.createdBy};a([J,...r]),c(!1),S({date:new Date().toISOString().slice(0,10),category:"other",description:"",amount:0,paidTo:"",paymentMethod:"transfer",notes:"",createdBy:" "})},E=J=>{a(r.map(K=>K.id===J?{...K,status:"approved",approvedBy:" "}:K))},z=J=>{confirm(" ?")&&a(r.map(K=>K.id===J?{...K,status:"rejected"}:K))},O=J=>{a(r.map(K=>K.id===J?{...K,status:"paid"}:K))},C=J=>{confirm(" ?")&&a(r.filter(K=>K.id!==J))},A=J=>({salary:"",equipment:"",software:"",marketing:"",office:"",travel:"",consulting:"",other:""})[J]||"",X=J=>({salary:"",equipment:"",software:"",marketing:"",office:"",travel:"",consulting:"",other:""})[J]||J,I=J=>({pending:"bg-yellow-100 text-yellow-700",approved:"bg-blue-100 text-blue-700",rejected:"bg-red-100 text-red-700",paid:"bg-green-100 text-green-700"})[J]||"bg-gray-100 text-gray-700",V=J=>({pending:" ",approved:"",rejected:"",paid:""})[J]||J,R=J=>({cash:"",card:"",transfer:"",invoice:""})[J]||J,H=r.filter(J=>{const K=u==="all"||J.category===u,$=m==="all"||J.status===m,ie=(!p||J.date>=p)&&(!g||J.date<=g);return K&&$&&ie}),ee=H.reduce((J,K)=>J+K.amount,0),se=Object.entries(H.reduce((J,K)=>(J[K.category]=(J[K.category]||0)+K.amount,J),{})).sort((J,K)=>K[1]-J[1]),W={pending:H.filter(J=>J.status==="pending").reduce((J,K)=>J+K.amount,0),approved:H.filter(J=>J.status==="approved").reduce((J,K)=>J+K.amount,0),paid:H.filter(J=>J.status==="paid").reduce((J,K)=>J+K.amount,0),rejected:H.filter(J=>J.status==="rejected").reduce((J,K)=>J+K.amount,0)},te=()=>{const J=[["","","","",""," ","",""].join(","),...H.map(ne=>[ne.date,X(ne.category),`"${ne.description.replace(/"/g,'""')}"`,ne.amount,`"${ne.paidTo.replace(/"/g,'""')}"`,R(ne.paymentMethod),V(ne.status),ne.createdBy].join(","))].join(`
`),K=new Blob(["\uFEFF"+J],{type:"text/csv;charset=utf-8;"}),$=window.URL.createObjectURL(K),ie=document.createElement("a");ie.href=$,ie.download=`expenses-project-${s}-${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(ie),ie.click(),document.body.removeChild(ie),window.URL.revokeObjectURL($)};return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:" ..."})]})}):e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-600 to-pink-600 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Da,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:" "}),e.jsxs("p",{className:"text-red-100 text-sm",children:[" #",s]})]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(De,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 border-b bg-gray-50",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-4 mb-4",children:[e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Qe,{className:"w-8 h-8 text-gray-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:" "}),e.jsxs("p",{className:"text-xl font-bold text-gray-900",children:[ee.toLocaleString("ru-RU")," "]})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 text-2xl",children:""}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:" "}),e.jsxs("p",{className:"text-xl font-bold text-yellow-700",children:[W.pending.toLocaleString("ru-RU")," "]})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 text-2xl",children:""}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:""}),e.jsxs("p",{className:"text-xl font-bold text-blue-700",children:[W.approved.toLocaleString("ru-RU")," "]})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 text-2xl",children:""}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:""}),e.jsxs("p",{className:"text-xl font-bold text-green-700",children:[W.paid.toLocaleString("ru-RU")," "]})]})]})}),e.jsxs("button",{onClick:()=>c(!0),className:"bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center justify-center gap-2 font-medium",children:[e.jsx(We,{className:"w-5 h-5"})," "]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-4",children:[e.jsxs("select",{value:u,onChange:J=>h(J.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),e.jsx("option",{value:"salary",children:""}),e.jsx("option",{value:"equipment",children:""}),e.jsx("option",{value:"software",children:""}),e.jsx("option",{value:"marketing",children:""}),e.jsx("option",{value:"office",children:""}),e.jsx("option",{value:"travel",children:""}),e.jsx("option",{value:"consulting",children:""}),e.jsx("option",{value:"other",children:""})]}),e.jsxs("select",{value:m,onChange:J=>f(J.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),e.jsx("option",{value:"pending",children:" "}),e.jsx("option",{value:"approved",children:""}),e.jsx("option",{value:"paid",children:""}),e.jsx("option",{value:"rejected",children:""})]}),e.jsx("input",{type:"date",value:p,onChange:J=>v(J.target.value),placeholder:"",className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"}),e.jsx("input",{type:"date",value:g,onChange:J=>y(J.target.value),placeholder:"",className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>N(w==="list"?"chart":"list"),className:"flex-1 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(vp,{className:"w-5 h-5"}),w==="list"?"":""]}),e.jsxs("button",{onClick:te,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Tt,{className:"w-5 h-5"}),""]})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:w==="list"?e.jsxs("div",{className:"space-y-4",children:[H.map(J=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:"text-4xl",children:A(J.category)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:J.description}),e.jsx("span",{className:`text-xs px-3 py-1 rounded-full ${I(J.status)}`,children:V(J.status)})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(mi,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:X(J.category)}),e.jsx("p",{className:"text-xs text-gray-500",children:R(J.paymentMethod)})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(lt,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900",children:J.paidTo}),e.jsx("p",{className:"text-xs text-gray-500",children:""})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(wt,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900",children:new Date(J.date).toLocaleDateString("ru-RU")}),e.jsxs("p",{className:"text-xs text-gray-500",children:[": ",J.createdBy]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"w-4 h-4 text-gray-400"}),e.jsx("div",{children:e.jsxs("p",{className:"text-2xl font-bold text-red-600",children:[J.amount.toLocaleString("ru-RU")," "]})})]})]}),J.notes&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsx("p",{className:"text-sm text-gray-600",children:J.notes})}),J.approvedBy&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsxs("p",{className:"text-sm text-green-600",children:[" : ",J.approvedBy]})})]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[J.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>E(J.id),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"",children:""}),e.jsx("button",{onClick:()=>z(J.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"",children:""})]}),J.status==="approved"&&e.jsx("button",{onClick:()=>O(J.id),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"  ",children:""}),e.jsx("button",{onClick:()=>C(J.id),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"",children:e.jsx(tt,{className:"w-5 h-5"})})]})]})},J.id)),H.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Da,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"  "})]})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),e.jsx("div",{className:"space-y-3",children:se.map(([J,K])=>{const $=K/ee*100;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[A(J)," ",X(J)]}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[K.toLocaleString("ru-RU"),"  (",$.toFixed(1),"%)"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-red-600 h-3 rounded-full transition-all",style:{width:`${$}%`}})})]},J)})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),e.jsx("div",{className:"space-y-4",children:Object.entries(W).map(([J,K])=>{const $=ee>0?K/ee*100:0,ie=H.filter(ne=>ne.status===J).length;return e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${I(J)}`,children:V(J)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[ie," "]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-xl font-bold text-gray-900",children:[K.toLocaleString("ru-RU")," "]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[$.toFixed(1),"%"]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all ${J==="paid"?"bg-green-600":J==="approved"?"bg-blue-600":J==="pending"?"bg-yellow-600":"bg-red-600"}`,style:{width:`${$}%`}})})]},J)})})]})]})})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-600 to-pink-600 text-white p-6 flex justify-between items-center",children:[e.jsx("h3",{className:"text-2xl font-bold",children:" "}),e.jsx("button",{onClick:()=>c(!1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(De,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"date",value:k.date,onChange:J=>S({...k,date:J.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsxs("select",{value:k.category,onChange:J=>S({...k,category:J.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[e.jsx("option",{value:"salary",children:""}),e.jsx("option",{value:"equipment",children:""}),e.jsx("option",{value:"software",children:""}),e.jsx("option",{value:"marketing",children:""}),e.jsx("option",{value:"office",children:""}),e.jsx("option",{value:"travel",children:""}),e.jsx("option",{value:"consulting",children:""}),e.jsx("option",{value:"other",children:""})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:k.description,onChange:J=>S({...k,description:J.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" () *"}),e.jsx("input",{type:"number",value:k.amount,onChange:J=>S({...k,amount:parseFloat(J.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),e.jsxs("select",{value:k.paymentMethod,onChange:J=>S({...k,paymentMethod:J.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[e.jsx("option",{value:"cash",children:""}),e.jsx("option",{value:"card",children:""}),e.jsx("option",{value:"transfer",children:""}),e.jsx("option",{value:"invoice",children:""})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:k.paidTo,onChange:J=>S({...k,paidTo:J.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:k.notes,onChange:J=>S({...k,notes:J.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]})]})}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>c(!1),className:"px-6 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:""}),e.jsx("button",{onClick:T,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:""})]})]})})]})},JW=({projectId:s,onClose:t})=>{const[r,a]=j.useState([]),[n,i]=j.useState(!0),[o,c]=j.useState(!1),[u,h]=j.useState(null),[m,f]=j.useState("all"),[p,v]=j.useState("all"),[g,y]=j.useState("all"),[w,N]=j.useState(""),[k,S]=j.useState({clientName:"",clientEmail:"",date:new Date().toISOString().slice(0,10),rating:5,category:"overall",title:"",message:"",tags:[]}),[_,T]=j.useState("");j.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),j.useEffect(()=>{E()},[s]);const E=async()=>{i(!0);try{const $=await fetch(`http://147.45.215.199:8001/api/projects/${s}/feedback`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if($.ok){const ie=await $.json();a(ie)}else a([{id:1,clientName:" ",clientEmail:"ivan@example.com",date:"2024-03-15",rating:5,category:"overall",title:"  !",message:"      .     .           .",sentiment:"positive",status:"responded",response:"   !        .",respondedBy:" ",respondedAt:"2024-03-16",tags:["",""]},{id:2,clientName:" ",clientEmail:"olga@example.com",date:"2024-03-10",rating:4,category:"communication",title:" ",message:"   ,    .           .",sentiment:"positive",status:"reviewed",tags:[""]},{id:3,clientName:" ",clientEmail:"dmitry@example.com",date:"2024-03-05",rating:3,category:"timeline",title:" ",message:"   2 .      ,      .",sentiment:"neutral",status:"responded",response:"   .      .       .",respondedBy:" ",respondedAt:"2024-03-06",tags:["",""]},{id:4,clientName:" ",clientEmail:"anna@example.com",date:"2024-03-01",rating:5,category:"quality",title:" ",message:"  !   ,   .     .",sentiment:"positive",status:"responded",response:" ! ,     .",respondedBy:" ",respondedAt:"2024-03-02",tags:["",""]},{id:5,clientName:" ",clientEmail:"sergey@example.com",date:"2024-02-28",rating:2,category:"budget",title:" ",message:"       30%.        .",sentiment:"negative",status:"new",tags:[""]}])}catch($){console.error("Error fetching feedbacks:",$)}finally{i(!1)}},z=$=>$>=4?"positive":$>=3?"neutral":"negative",O=()=>{if(!k.clientName||!k.title||!k.message){alert("  ");return}const $={id:Date.now(),clientName:k.clientName,clientEmail:k.clientEmail,date:k.date,rating:k.rating,category:k.category,title:k.title,message:k.message,sentiment:z(k.rating),status:"new",tags:k.tags};a([$,...r]),c(!1),S({clientName:"",clientEmail:"",date:new Date().toISOString().slice(0,10),rating:5,category:"overall",title:"",message:"",tags:[]})},C=()=>{_&&!k.tags.includes(_)&&(S({...k,tags:[...k.tags,_]}),T(""))},A=$=>{S({...k,tags:k.tags.filter(ie=>ie!==$)})},X=()=>{!u||!w||(a(r.map($=>$.id===u.id?{...$,status:"responded",response:w,respondedBy:" ",respondedAt:new Date().toISOString().slice(0,10)}:$)),N(""),h(null))},I=$=>{a(r.map(ie=>ie.id===$?{...ie,status:"reviewed"}:ie))},V=$=>({quality:"",communication:"",timeline:"",budget:"",support:"",overall:""})[$]||"",R=$=>({quality:"",communication:"",timeline:"",budget:"",support:"",overall:" "})[$]||$,H=$=>({positive:"text-green-600 bg-green-100",neutral:"text-yellow-600 bg-yellow-100",negative:"text-red-600 bg-red-100"})[$]||"text-gray-600 bg-gray-100",ee=$=>({positive:e.jsx(Fh,{className:"w-5 h-5"}),neutral:e.jsx(Os,{className:"w-5 h-5"}),negative:e.jsx(H4,{className:"w-5 h-5"})})[$]||e.jsx(Os,{className:"w-5 h-5"}),se=$=>({new:"bg-blue-100 text-blue-700",reviewed:"bg-purple-100 text-purple-700",responded:"bg-green-100 text-green-700",archived:"bg-gray-100 text-gray-700"})[$]||"bg-gray-100 text-gray-700",W=$=>({new:"",reviewed:"",responded:"",archived:""})[$]||$,te=r.filter($=>{const ie=m==="all"||$.category===m,ne=p==="all"||$.sentiment===p,oe=g==="all"||$.status===g;return ie&&ne&&oe}),J=r.length>0?r.reduce(($,ie)=>$+ie.rating,0)/r.length:0,K={positive:r.filter($=>$.sentiment==="positive").length,neutral:r.filter($=>$.sentiment==="neutral").length,negative:r.filter($=>$.sentiment==="negative").length};return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:" ..."})]})}):e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Os,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:" "}),e.jsxs("p",{className:"text-purple-100 text-sm",children:[" #",s]})]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(De,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 border-b bg-gray-50",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-4 mb-4",children:[e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Is,{className:"w-8 h-8 text-yellow-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[J.toFixed(1)," / 5"]})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Fh,{className:"w-8 h-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:""}),e.jsx("p",{className:"text-2xl font-bold text-green-700",children:K.positive})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Os,{className:"w-8 h-8 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:""}),e.jsx("p",{className:"text-2xl font-bold text-yellow-700",children:K.neutral})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(H4,{className:"w-8 h-8 text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:""}),e.jsx("p",{className:"text-2xl font-bold text-red-700",children:K.negative})]})]})}),e.jsxs("button",{onClick:()=>c(!0),className:"bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center gap-2 font-medium",children:[e.jsx(We,{className:"w-5 h-5"})," "]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs("select",{value:m,onChange:$=>f($.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),e.jsx("option",{value:"quality",children:""}),e.jsx("option",{value:"communication",children:""}),e.jsx("option",{value:"timeline",children:""}),e.jsx("option",{value:"budget",children:""}),e.jsx("option",{value:"support",children:""}),e.jsx("option",{value:"overall",children:" "})]}),e.jsxs("select",{value:p,onChange:$=>v($.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),e.jsx("option",{value:"positive",children:""}),e.jsx("option",{value:"neutral",children:""}),e.jsx("option",{value:"negative",children:""})]}),e.jsxs("select",{value:g,onChange:$=>y($.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),e.jsx("option",{value:"new",children:""}),e.jsx("option",{value:"reviewed",children:""}),e.jsx("option",{value:"responded",children:""}),e.jsx("option",{value:"archived",children:""})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsx("div",{className:"space-y-4",children:te.map($=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${H($.sentiment)}`,children:ee($.sentiment)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:$.title}),e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(ie=>e.jsx(Is,{className:`w-4 h-4 ${ie<=$.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},ie))}),e.jsx("span",{className:"text-2xl",children:V($.category)}),e.jsx("span",{className:"text-gray-600",children:R($.category)})]})]}),e.jsx("span",{className:`text-xs px-3 py-1 rounded-full ${se($.status)}`,children:W($.status)})]}),e.jsx("p",{className:"text-gray-700 mb-3",children:$.message}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(lt,{className:"w-4 h-4"}),e.jsx("span",{children:$.clientName})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(wt,{className:"w-4 h-4"}),e.jsx("span",{children:new Date($.date).toLocaleDateString("ru-RU")})]})]}),$.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:$.tags.map((ie,ne)=>e.jsx("span",{className:"text-xs px-2 py-1 bg-purple-100 text-purple-700 rounded-full",children:ie},ne))}),$.response&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mt-3",children:[e.jsx("p",{className:"text-sm font-medium text-green-800 mb-2",children:":"}),e.jsx("p",{className:"text-sm text-green-700 mb-2",children:$.response}),e.jsxs("p",{className:"text-xs text-green-600",children:[$.respondedBy,"  ",new Date($.respondedAt).toLocaleDateString("ru-RU")]})]}),e.jsx("div",{className:"flex gap-2 mt-4",children:$.status==="new"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>h($),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2",children:[e.jsx(rr,{className:"w-4 h-4"}),""]}),e.jsx("button",{onClick:()=>I($.id),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:" "})]})})]})]})},$.id))}),te.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Os,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"  "})]})]})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white p-6 flex justify-between items-center",children:[e.jsx("h3",{className:"text-2xl font-bold",children:" "}),e.jsx("button",{onClick:()=>c(!1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(De,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:k.clientName,onChange:$=>S({...k,clientName:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:k.clientEmail,onChange:$=>S({...k,clientEmail:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("input",{type:"date",value:k.date,onChange:$=>S({...k,date:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("select",{value:k.category,onChange:$=>S({...k,category:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"overall",children:" "}),e.jsx("option",{value:"quality",children:""}),e.jsx("option",{value:"communication",children:""}),e.jsx("option",{value:"timeline",children:""}),e.jsx("option",{value:"budget",children:""}),e.jsx("option",{value:"support",children:""})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map($=>e.jsx("button",{type:"button",onClick:()=>S({...k,rating:$}),className:"transition-transform hover:scale-110",children:e.jsx(Is,{className:`w-10 h-10 ${$<=k.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},$))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:k.title,onChange:$=>S({...k,title:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("textarea",{value:k.message,onChange:$=>S({...k,message:$.target.value}),rows:5,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("div",{className:"flex gap-2 mb-2",children:e.jsx("input",{type:"text",value:_,onChange:$=>T($.target.value),onKeyPress:$=>$.key==="Enter"&&C(),placeholder:"  (Enter)",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:k.tags.map(($,ie)=>e.jsxs("span",{className:"inline-flex items-center gap-1 text-sm px-3 py-1 bg-purple-100 text-purple-700 rounded-full",children:[$,e.jsx("button",{onClick:()=>A($),className:"hover:text-purple-900",children:e.jsx(De,{className:"w-3 h-3"})})]},ie))})]})]})}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>c(!1),className:"px-6 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:""}),e.jsx("button",{onClick:O,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:""})]})]})}),u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white p-6 flex justify-between items-center",children:[e.jsx("h3",{className:"text-2xl font-bold",children:"  "}),e.jsx("button",{onClick:()=>h(null),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(De,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:u.title}),e.jsx("p",{className:"text-gray-700 mb-2",children:u.message}),e.jsxs("p",{className:"text-sm text-gray-500",children:[" ",u.clientName]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),e.jsx("textarea",{value:w,onChange:$=>N($.target.value),rows:5,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"  ..."})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>h(null),className:"px-6 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:""}),e.jsxs("button",{onClick:X,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2",children:[e.jsx(rr,{className:"w-5 h-5"})," "]})]})]})})]})},eY=({projectId:s,onClose:t})=>{const[r,a]=j.useState(null),[n,i]=j.useState(!0),[o,c]=j.useState(new Date(Date.now()-2160*60*60*1e3).toISOString().slice(0,10)),[u,h]=j.useState(new Date().toISOString().slice(0,10));j.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),j.useEffect(()=>{m()},[s,o,u]);const m=async()=>{i(!0);try{const v=await fetch(`http://147.45.215.199:8001/api/projects/${s}/analytics?from=${o}&to=${u}`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(v.ok){const g=await v.json();a(g)}else a({overview:{totalRevenue:125e4,totalExpenses:78e4,profit:47e4,profitMargin:37.6,totalHours:2340,hourlyRate:534,teamSize:8,completedTasks:156,totalTasks:200,completionRate:78},timeline:[{month:"2024-01",revenue:35e4,expenses:22e4,profit:13e4,hours:720},{month:"2024-02",revenue:42e4,expenses:26e4,profit:16e4,hours:780},{month:"2024-03",revenue:48e4,expenses:3e5,profit:18e4,hours:840}],tasksByStatus:[{status:"",count:156,percentage:78},{status:" ",count:32,percentage:16},{status:"",count:12,percentage:6}],tasksByPriority:[{priority:"",count:15},{priority:"",count:45},{priority:"",count:98},{priority:"",count:42}],teamPerformance:[{memberId:1,memberName:" ",tasksCompleted:42,hoursWorked:680,efficiency:95},{memberId:2,memberName:" ",tasksCompleted:38,hoursWorked:620,efficiency:92},{memberId:3,memberName:" ",tasksCompleted:35,hoursWorked:580,efficiency:88},{memberId:4,memberName:" ",tasksCompleted:29,hoursWorked:460,efficiency:85}],expensesByCategory:[{category:"",amount:45e4,percentage:57.7},{category:"",amount:15e4,percentage:19.2},{category:"",amount:85e3,percentage:10.9},{category:"",amount:6e4,percentage:7.7},{category:"",amount:35e3,percentage:4.5}],clientSatisfaction:[{rating:5,count:12},{rating:4,count:8},{rating:3,count:3},{rating:2,count:1},{rating:1,count:0}]})}catch(v){console.error("Error fetching analytics:",v)}finally{i(!1)}},f=()=>{if(!r)return;const v=[["  "],[""],[" "],["",""],["",`${r.overview.totalRevenue.toLocaleString("ru-RU")} `],["",`${r.overview.totalExpenses.toLocaleString("ru-RU")} `],["",`${r.overview.profit.toLocaleString("ru-RU")} `],["",`${r.overview.profitMargin}%`],[" ",r.overview.totalHours],[" ",`${r.overview.hourlyRate.toLocaleString("ru-RU")} `],[""],["  "],["","",""],...r.tasksByStatus.map(N=>[N.status,N.count,`${N.percentage}%`]),[""],[" "],[""," "," ",""],...r.teamPerformance.map(N=>[N.memberName,N.tasksCompleted,N.hoursWorked,`${N.efficiency}%`])].map(N=>N.join(",")).join(`
`),g=new Blob(["\uFEFF"+v],{type:"text/csv;charset=utf-8;"}),y=window.URL.createObjectURL(g),w=document.createElement("a");w.href=y,w.download=`analytics-project-${s}-${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(w),w.click(),document.body.removeChild(w),window.URL.revokeObjectURL(y)};if(n||!r)return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:" ..."})]})});const p=Math.max(...r.timeline.map(v=>v.revenue));return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Vr,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:" "}),e.jsxs("p",{className:"text-blue-100 text-sm",children:[" #",s]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:f,className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors flex items-center gap-2",children:[e.jsx(Tt,{className:"w-5 h-5"}),""]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(De,{className:"w-6 h-6"})})]})]}),e.jsx("div",{className:"p-6 border-b bg-gray-50",children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"date",value:o,onChange:v=>c(v.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("input",{type:"date",value:u,onChange:v=>h(v.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:" "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx(Qe,{className:"w-10 h-10 opacity-80"}),e.jsx(xt,{className:"w-6 h-6"})]}),e.jsx("p",{className:"text-sm opacity-90 mb-1",children:""}),e.jsxs("p",{className:"text-3xl font-bold",children:[r.overview.totalRevenue.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-red-600 text-white rounded-lg p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx(Da,{className:"w-10 h-10 opacity-80"})}),e.jsx("p",{className:"text-sm opacity-90 mb-1",children:""}),e.jsxs("p",{className:"text-3xl font-bold",children:[r.overview.totalExpenses.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-lg p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx(Lr,{className:"w-10 h-10 opacity-80"})}),e.jsx("p",{className:"text-sm opacity-90 mb-1",children:""}),e.jsxs("p",{className:"text-3xl font-bold",children:[r.overview.profit.toLocaleString("ru-RU")," "]}),e.jsxs("p",{className:"text-xs opacity-80 mt-1",children:[": ",r.overview.profitMargin,"%"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-lg p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx(Ve,{className:"w-10 h-10 opacity-80"})}),e.jsx("p",{className:"text-sm opacity-90 mb-1",children:" "}),e.jsx("p",{className:"text-3xl font-bold",children:r.overview.totalHours}),e.jsxs("p",{className:"text-xs opacity-80 mt-1",children:[": ",r.overview.hourlyRate," /"]})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),e.jsx("div",{className:"space-y-4",children:r.timeline.map((v,g)=>{const y=v.revenue/p*100,w=v.expenses/p*100,N=v.profit/p*100;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:new Date(v.month+"-01").toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:"text-green-600",children:[" ",v.revenue.toLocaleString("ru-RU")]}),e.jsxs("span",{className:"text-red-600",children:[" ",v.expenses.toLocaleString("ru-RU")]}),e.jsxs("span",{className:"text-blue-600",children:[" ",v.profit.toLocaleString("ru-RU")]})]})]}),e.jsxs("div",{className:"relative h-8 bg-gray-100 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 h-8 bg-green-500 opacity-30",style:{width:`${y}%`}}),e.jsx("div",{className:"absolute top-0 left-0 h-8 bg-red-500 opacity-30",style:{width:`${w}%`}}),e.jsx("div",{className:"absolute top-0 left-0 h-8 bg-blue-500 opacity-50",style:{width:`${N}%`}})]})]},g)})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),e.jsx("div",{className:"space-y-3",children:r.tasksByStatus.map((v,g)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:v.status}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[v.count," (",v.percentage,"%)"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full transition-all ${v.status===""?"bg-green-600":v.status===" "?"bg-blue-600":"bg-gray-400"}`,style:{width:`${v.percentage}%`}})})]},g))})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),e.jsx("div",{className:"space-y-3",children:r.tasksByPriority.map((v,g)=>{const y=r.tasksByPriority.reduce((N,k)=>N+k.count,0),w=v.count/y*100;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:v.priority}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[v.count," (",w.toFixed(1),"%)"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full transition-all ${v.priority===""?"bg-red-600":v.priority===""?"bg-orange-600":v.priority===""?"bg-yellow-600":"bg-gray-400"}`,style:{width:`${w}%`}})})]},g)})})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:" "}),e.jsx("div",{className:"space-y-4",children:r.teamPerformance.map(v=>e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold",children:v.memberName.charAt(0)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900",children:v.memberName}),e.jsxs("p",{className:"text-sm text-gray-500",children:[v.tasksCompleted,"   ",v.hoursWorked," "]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[v.efficiency,"%"]}),e.jsx("p",{className:"text-xs text-gray-500",children:""})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${v.efficiency}%`}})})]},v.memberId))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),e.jsx("div",{className:"space-y-3",children:r.expensesByCategory.map((v,g)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:v.category}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[v.amount.toLocaleString("ru-RU"),"  (",v.percentage,"%)"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-red-600 h-3 rounded-full transition-all",style:{width:`${v.percentage}%`}})})]},g))})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:" "}),e.jsx("div",{className:"space-y-3",children:r.clientSatisfaction.sort((v,g)=>g.rating-v.rating).map((v,g)=>{const y=r.clientSatisfaction.reduce((N,k)=>N+k.count,0),w=y>0?v.count/y*100:0;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[v.rating," "]})}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[v.count," (",w.toFixed(1),"%)"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-yellow-500 h-3 rounded-full transition-all",style:{width:`${w}%`}})})]},g)})}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:" "}),e.jsxs("span",{className:"text-2xl font-bold text-yellow-600",children:[(r.clientSatisfaction.reduce((v,g)=>v+g.rating*g.count,0)/r.clientSatisfaction.reduce((v,g)=>v+g.count,0)).toFixed(1)," ","/ 5"]})]})})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4 text-blue-900",children:" "}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-700 mb-1",children:""}),e.jsxs("p",{className:"text-3xl font-bold text-blue-900",children:[r.overview.profitMargin,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-700 mb-1",children:""}),e.jsxs("p",{className:"text-3xl font-bold text-blue-900",children:[r.overview.completionRate,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-700 mb-1",children:""}),e.jsx("p",{className:"text-3xl font-bold text-blue-900",children:r.overview.teamSize})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-700 mb-1",children:" "}),e.jsxs("p",{className:"text-3xl font-bold text-blue-900",children:[r.overview.completedTasks,"/",r.overview.totalTasks]})]})]})]})]})})]})})},tY=(s,t=!0)=>{j.useEffect(()=>{if(!t)return;let r=[];if(Array.isArray(s))r=s;else{const n=s;n.onNew&&r.push({key:"n",ctrlKey:!0,action:n.onNew,description:"New"}),n.onRefresh&&r.push({key:"r",action:n.onRefresh,description:"Refresh"}),n.onSearch&&(r.push({key:"f",ctrlKey:!0,action:n.onSearch,description:"Search"}),r.push({key:"/",action:n.onSearch,description:"Search"})),n.onHelp&&(r.push({key:"?",action:n.onHelp,description:"Help"}),r.push({key:"h",action:n.onHelp,description:"Help"})),n.onEscape&&r.push({key:"Escape",action:n.onEscape,description:"Close"}),n.onSave&&r.push({key:"s",ctrlKey:!0,action:n.onSave,description:"Save"}),n.onClose&&r.push({key:"Escape",action:n.onClose,description:"Close"})}const a=n=>{const i=n.target;if(!(i.tagName==="INPUT"||i.tagName==="TEXTAREA"||i.isContentEditable))for(const o of r){const c=n.key.toLowerCase()===o.key.toLowerCase(),u=o.ctrlKey?n.ctrlKey:!n.ctrlKey,h=o.shiftKey?n.shiftKey:!n.shiftKey,m=o.altKey?n.altKey:!n.altKey,f=o.metaKey?n.metaKey:!n.metaKey;if(c&&u&&h&&m&&f){n.preventDefault(),o.action();break}}};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[s,t])},Z7=(s,t="projects")=>{const r=["ID","","","","",""," ","","","","",""],a=s.map(o=>{const c=(o.project_cost||0)-(o.paid_total||0),u=(o.project_cost||0)-(o.executor_cost||0);return[o.id,`"${(o.name||"").replace(/"/g,'""')}"`,o.status||"",o.project_cost||0,o.paid_total||0,c,o.executor_cost||0,u,o.assigned_to?.username||o.assigned_to?.first_name||"",o.user?.first_name||o.user?.telegram_username||"",o.deadline||"",o.created_at||""]}),n=[r.join(","),...a.map(o=>o.join(","))].join(`
`),i=new Blob(["\uFEFF"+n],{type:"text/csv;charset=utf-8;"});x1(i,`${t}.csv`)},sY=(s,t="projects")=>{Z7(s,t)},rY=(s,t="projects")=>{const r=JSON.stringify(s,null,2),a=new Blob([r],{type:"application/json"});x1(a,`${t}.json`)},aY=(s,t="projects")=>{let r=`  
`;r+=` : ${new Date().toLocaleString("ru-RU")}
`,r+=` : ${s.length}

`,r+=`${"=".repeat(80)}

`,s.forEach((u,h)=>{const m=(u.project_cost||0)-(u.paid_total||0),f=(u.project_cost||0)-(u.executor_cost||0);if(r+=`${h+1}. ${u.name}
`,r+=`   ID: ${u.id}
`,r+=`   : ${u.status||" "}
`,r+=`   : ${(u.project_cost||0).toLocaleString("ru-RU")} 
`,r+=`   : ${(u.paid_total||0).toLocaleString("ru-RU")} 
`,r+=`   : ${m.toLocaleString("ru-RU")} 
`,r+=`    : ${(u.executor_cost||0).toLocaleString("ru-RU")} 
`,r+=`   : ${f.toLocaleString("ru-RU")} 
`,u.assigned_to&&(r+=`   : ${u.assigned_to.username||u.assigned_to.first_name}
`),u.user&&(r+=`   : ${u.user.first_name||u.user.telegram_username}
`),u.deadline&&(r+=`   : ${new Date(u.deadline).toLocaleDateString("ru-RU")}
`),u.description){const p=u.description.length>100?u.description.substring(0,100)+"...":u.description;r+=`   : ${p}
`}r+=`
${"-".repeat(80)}

`});const a=s.reduce((u,h)=>u+(h.project_cost||0),0),n=s.reduce((u,h)=>u+(h.paid_total||0),0),i=s.reduce((u,h)=>u+(h.executor_cost||0),0),o=a-i;r+=`${"=".repeat(80)}
`,r+=` 
`,r+=`${"=".repeat(80)}

`,r+=`  : ${a.toLocaleString("ru-RU")} 
`,r+=` : ${n.toLocaleString("ru-RU")} 
`,r+=`   : ${i.toLocaleString("ru-RU")} 
`,r+=` : ${o.toLocaleString("ru-RU")} 
`;const c=new Blob([r],{type:"text/plain;charset=utf-8"});x1(c,`${t}.txt`)},x1=(s,t)=>{const r=window.URL.createObjectURL(s),a=document.createElement("a");a.href=r,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(r)},Q7=(s,t,r="projects")=>{switch(t){case"csv":Z7(s,r);break;case"excel":sY(s,r);break;case"json":rY(s,r);break;case"pdf":aY(s,r);break;default:console.error(`Unknown export format: ${t}`)}},nY=(s,t="")=>{const r=window.open("","_blank");if(!r){alert("    .   .");return}const a=s.reduce((u,h)=>u+(h.project_cost||0),0),n=s.reduce((u,h)=>u+(h.paid_total||0),0),i=s.reduce((u,h)=>u+(h.executor_cost||0),0),o=a-i,c=`
    <!DOCTYPE html>
    <html lang="ru">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>${t}</title>
      <style>
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }

        body {
          font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
          padding: 40px;
          color: #333;
          background: white;
        }

        .header {
          text-align: center;
          margin-bottom: 40px;
          border-bottom: 3px solid #4F46E5;
          padding-bottom: 20px;
        }

        .header h1 {
          font-size: 32px;
          color: #1F2937;
          margin-bottom: 10px;
        }

        .header .date {
          font-size: 14px;
          color: #6B7280;
        }

        .summary {
          display: grid;
          grid-template-columns: repeat(4, 1fr);
          gap: 20px;
          margin-bottom: 40px;
        }

        .summary-card {
          padding: 15px;
          border-radius: 8px;
          border: 2px solid #E5E7EB;
        }

        .summary-card.total {
          border-color: #3B82F6;
          background: #EFF6FF;
        }

        .summary-card.paid {
          border-color: #10B981;
          background: #ECFDF5;
        }

        .summary-card.executor {
          border-color: #F59E0B;
          background: #FFFBEB;
        }

        .summary-card.profit {
          border-color: #8B5CF6;
          background: #F5F3FF;
        }

        .summary-card .label {
          font-size: 12px;
          font-weight: 600;
          text-transform: uppercase;
          color: #6B7280;
          margin-bottom: 5px;
        }

        .summary-card .value {
          font-size: 24px;
          font-weight: bold;
        }

        .summary-card.total .value { color: #3B82F6; }
        .summary-card.paid .value { color: #10B981; }
        .summary-card.executor .value { color: #F59E0B; }
        .summary-card.profit .value { color: #8B5CF6; }

        .project {
          margin-bottom: 30px;
          padding: 20px;
          border: 1px solid #E5E7EB;
          border-radius: 8px;
          page-break-inside: avoid;
        }

        .project-header {
          display: flex;
          justify-content: space-between;
          align-items: start;
          margin-bottom: 15px;
          padding-bottom: 10px;
          border-bottom: 2px solid #F3F4F6;
        }

        .project-title {
          font-size: 18px;
          font-weight: bold;
          color: #1F2937;
        }

        .project-id {
          font-size: 12px;
          color: #6B7280;
        }

        .project-status {
          padding: 4px 12px;
          border-radius: 12px;
          font-size: 12px;
          font-weight: 600;
          background: #F3F4F6;
          color: #374151;
        }

        .project-details {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: 10px;
          margin-bottom: 10px;
        }

        .detail-item {
          font-size: 13px;
        }

        .detail-label {
          font-weight: 600;
          color: #6B7280;
        }

        .detail-value {
          color: #1F2937;
        }

        .project-description {
          margin-top: 10px;
          padding-top: 10px;
          border-top: 1px solid #E5E7EB;
          font-size: 13px;
          color: #4B5563;
          line-height: 1.6;
        }

        .footer {
          margin-top: 40px;
          padding-top: 20px;
          border-top: 3px solid #4F46E5;
          text-align: center;
          font-size: 12px;
          color: #6B7280;
        }

        @media print {
          body {
            padding: 20px;
          }

          .project {
            page-break-inside: avoid;
          }
        }
      </style>
    </head>
    <body>
      <div class="header">
        <h1>${t}</h1>
        <div class="date"> : ${new Date().toLocaleString("ru-RU")}</div>
        <div class="date"> : ${s.length}</div>
      </div>

      <div class="summary">
        <div class="summary-card total">
          <div class="label"> </div>
          <div class="value">${a.toLocaleString("ru-RU")} </div>
        </div>
        <div class="summary-card paid">
          <div class="label"></div>
          <div class="value">${n.toLocaleString("ru-RU")} </div>
        </div>
        <div class="summary-card executor">
          <div class="label"></div>
          <div class="value">${i.toLocaleString("ru-RU")} </div>
        </div>
        <div class="summary-card profit">
          <div class="label"></div>
          <div class="value">${o.toLocaleString("ru-RU")} </div>
        </div>
      </div>

      ${s.map((u,h)=>{const m=(u.project_cost||0)-(u.paid_total||0);(u.executor_cost||0)-(u.executor_paid_total||0);const f=(u.project_cost||0)-(u.executor_cost||0);return`
            <div class="project">
              <div class="project-header">
                <div>
                  <div class="project-title">${h+1}. ${u.name||" "}</div>
                  <div class="project-id">ID: ${u.id}</div>
                </div>
                ${u.status?`<div class="project-status">${u.status}</div>`:""}
              </div>

              <div class="project-details">
                <div class="detail-item">
                  <span class="detail-label">:</span>
                  <span class="detail-value">${(u.project_cost||0).toLocaleString("ru-RU")} </span>
                </div>
                <div class="detail-item">
                  <span class="detail-label">:</span>
                  <span class="detail-value">${(u.paid_total||0).toLocaleString("ru-RU")} </span>
                </div>
                <div class="detail-item">
                  <span class="detail-label">:</span>
                  <span class="detail-value">${m.toLocaleString("ru-RU")} </span>
                </div>
                <div class="detail-item">
                  <span class="detail-label">:</span>
                  <span class="detail-value">${f.toLocaleString("ru-RU")} </span>
                </div>

                ${u.executor_cost?`
                <div class="detail-item">
                  <span class="detail-label">:</span>
                  <span class="detail-value">${(u.executor_cost||0).toLocaleString("ru-RU")} </span>
                </div>
                <div class="detail-item">
                  <span class="detail-label">:</span>
                  <span class="detail-value">${(u.executor_paid_total||0).toLocaleString("ru-RU")} </span>
                </div>
                `:""}

                ${u.assigned_to?`
                <div class="detail-item">
                  <span class="detail-label">:</span>
                  <span class="detail-value">${u.assigned_to.username||u.assigned_to.first_name}</span>
                </div>
                `:""}

                ${u.user?`
                <div class="detail-item">
                  <span class="detail-label">:</span>
                  <span class="detail-value">${u.user.first_name||u.user.telegram_username||" "}</span>
                </div>
                `:""}

                ${u.deadline?`
                <div class="detail-item">
                  <span class="detail-label">:</span>
                  <span class="detail-value">${new Date(u.deadline).toLocaleDateString("ru-RU")}</span>
                </div>
                `:""}

                ${u.created_at?`
                <div class="detail-item">
                  <span class="detail-label">:</span>
                  <span class="detail-value">${new Date(u.created_at).toLocaleDateString("ru-RU")}</span>
                </div>
                `:""}
              </div>

              ${u.description?`
              <div class="project-description">
                <strong>:</strong><br>
                ${u.description.replace(/\n/g,"<br>")}
              </div>
              `:""}
            </div>
          `}).join("")}

      <div class="footer">
        <p>    CRM</p>
      </div>

      <script>
        window.onload = () => {
          window.print();
        };
      <\/script>
    </body>
    </html>
  `;r.document.write(c),r.document.close()},iY=(s,t,r,a)=>{r({id:s,name:t}),a(!0)},lY=(s,t,r)=>{t(s),r(!0)},oY=(s,t,r,a)=>{r({id:s,name:t}),a(!0)},cY=(s,t,r,a)=>{r({id:s,name:t}),a(!0)},dY=async(s,t)=>{try{const r=Xq(s);await X7(r)?t("    ","success"):t(" ","error")}catch{t(" ","error")}},uY=s=>{nY(s,"")},hY=(s,t,r,a)=>{try{Q7(r,s,t),a(`    ${s.toUpperCase()}`,"success")}catch{a(" ","error")}},mY=async(s,t,r)=>{try{t(` : ${s.length}`,"success"),r()}catch{t(" ","error")}},xY=async(s,t,r)=>{if(window.confirm(` ${s.length} ?`))try{t(` : ${s.length}`,"success"),r()}catch{t(" ","error")}},fY=async(s,t)=>{t("     ","info")},pY=(s,t,r)=>{const a=t.filter(n=>s.includes(n.id));Q7(a,"csv",`selected_projects_${Date.now()}`),r(` : ${s.length}`,"success")},Ok=(s,t)=>{t(s.map(r=>r.id))},Lk=s=>{s([])},gY=(s,t)=>{t(r=>r.filter(a=>a.id!==s))},bY=s=>{s([])},yY=s=>({new:" ",review:" ",accepted:" ",in_progress:"  ",testing:" ",completed:" ",cancelled:" ",on_hold:" "})[s]||s,vY=s=>({new:"bg-blue-100 text-blue-700",review:"bg-orange-100 text-orange-700",accepted:"bg-purple-100 text-purple-700",in_progress:"bg-yellow-100 text-yellow-700",testing:"bg-green-100 text-green-700",completed:"bg-green-200 text-green-800",cancelled:"bg-red-100 text-red-700",on_hold:"bg-gray-100 text-gray-700"})[s]||"bg-gray-100 text-gray-700",jY=s=>({new:"bg-blue-50/30 hover:bg-blue-50",review:"bg-orange-50/30 hover:bg-orange-50",accepted:"bg-purple-50/30 hover:bg-purple-50",in_progress:"bg-yellow-50/30 hover:bg-yellow-50",testing:"bg-green-50/30 hover:bg-green-50",completed:"bg-green-50/50 hover:bg-green-100",cancelled:"bg-red-50/30 hover:bg-red-50",on_hold:"bg-gray-50/30 hover:bg-gray-50"})[s]||"hover:bg-gray-50",wY=s=>({simple:" ",medium:" ",complex:" ",premium:" "})[s]||s,NY=s=>({new:10,review:25,accepted:40,in_progress:60,testing:80,completed:100,cancelled:0,on_hold:0})[s]||0,_Y=()=>{const s=Oa(),[t,r]=j.useState([]),[a,n]=j.useState(null),[i,o]=j.useState(!0),[c,u]=j.useState(!1),[h,m]=j.useState("cards"),[f,p]=j.useState(!1),[v,g]=j.useState(!1),[y,w]=j.useState(!1),[N,k]=j.useState(!1),[S,_]=j.useState(!1),[T,E]=j.useState(!1),[z,O]=j.useState(!1),[C,A]=j.useState(null),[X,I]=j.useState(null),[V,R]=j.useState(null),[H,ee]=j.useState(null),[se,W]=j.useState(null),[te,J]=j.useState(null),[K,$]=j.useState(!1),[ie,ne]=j.useState(null),[oe,ce]=j.useState(!1),[U,F]=j.useState(null),[Z,q]=j.useState(!1),[Q,le]=j.useState(!1),[me,G]=j.useState(!1),[ue,Y]=j.useState(!1),[L,M]=j.useState(null),[B,ae]=j.useState(!1),[he,xe]=j.useState(null),[_e,Te]=j.useState(!1),[Ee,ze]=j.useState(null),[Ie,Ye]=j.useState(!1),[xs,pr]=j.useState(null),[Vs,be]=j.useState(!1),[Le,He]=j.useState(null),[Ze,et]=j.useState(!1),[bt,Yr]=j.useState(null),[Ja,Nr]=j.useState(!1),[_r,oa]=j.useState(null),[gr,Fl]=j.useState([]),[ar,Ai]=j.useState([]),[Ym,$d]=j.useState("none"),[Yt,Ud]=j.useState({executorId:null,clientId:null,colorFilter:"",dateFrom:"",dateTo:"",hasPayment:"",hasOverdue:!1,noExecutor:!1,priceFrom:"",priceTo:""}),[Gm,Vd]=j.useState(!1),[Km,zl]=j.useState(!1),[Hd,qd]=j.useState(!1),[ec,en]=j.useState(null),[Ps,Ws]=j.useState(!1),[Rn,Wd]=j.useState(null),[Wp,Xm]=j.useState(!1),[Zm,Mn]=j.useState(!1),[Yd,On]=j.useState(!1),[Ln,Il]=j.useState(null),[Di,fs]=j.useState(!1),[Gd,Qm]=j.useState(null),[Pn,Bn]=j.useState(!1),[Jm,ex]=j.useState(null),[tx,sx]=j.useState(!1),[$l,tc]=j.useState(null),[La,br]=j.useState(!1),[Kd,Yp]=j.useState(null),[Xd,Zd]=j.useState(!1),[Ul,Gp]=j.useState(null),[kr,sc]=j.useState(!1),[Qd,Jd]=j.useState(null),[Ri,eu]=j.useState(!1),[tu,Mi]=j.useState(null),[Kp,su]=j.useState(!1),[ru,au]=j.useState(null),[Xp,rx]=j.useState(!1),[Vl,Pa]=j.useState(null),[nu,rc]=j.useState(!1),[Fn,Oi]=j.useState(null),[ax,ac]=j.useState(!1),[iu,Hl]=j.useState(null),[Ba,nc]=j.useState(!1),[Li,tn]=j.useState(null),[lu,ql]=j.useState(!1),[ou,ic]=j.useState(null),[lc,cu]=j.useState(!1),[Ys,zn]=j.useState(null),[oc,Pi]=j.useState(!1),[nx,du]=j.useState(null),[uu,Bi]=j.useState(!1),[Wl,ix]=j.useState(null),[Zp,lx]=j.useState(!1),[ox,hu]=j.useState(null),[Qp,cx]=j.useState(!1),[dx,Jp]=j.useState(null),[eg,mu]=j.useState(!1),[ux,tg]=j.useState(null),[sg,hx]=j.useState(!1),[cc,rg]=j.useState(null),[ag,mx]=j.useState(!1),[xu,ng]=j.useState(null),[ig,xx]=j.useState(!1),[fx,lg]=j.useState(null),[og,px]=j.useState(!1),[gx,cg]=j.useState(null),[fu,Fi]=j.useState(!1),[bx,yx]=j.useState(null),[vx,pu]=j.useState(!1),[gu,jx]=j.useState(null),[zi,wx]=j.useState(!1),[Nx,dg]=j.useState(null),[_x,bu]=j.useState(!1),[Ii,Yl]=j.useState(null),[ug,Gl]=j.useState([]),ts=j.useCallback((ve,Fe="info")=>{const Xe=Date.now().toString();Gl(Ft=>[...Ft,{id:Xe,message:ve,type:Fe}])},[]),kx=j.useCallback(ve=>{Gl(Fe=>Fe.filter(Xe=>Xe.id!==ve))},[]),Bs=j.useCallback(async()=>{try{o(!0);const[ve,Fe]=await Promise.all([vs.getProjects(c),vs.getProjectStatistics(c)]);ve.projects&&r(ve.projects),Fe.success&&Fe.stats&&n(Fe.stats)}catch(ve){console.error("Error loading projects:",ve),ts("  ","error")}finally{o(!1)}},[c,ts]),Fa=j.useCallback(async ve=>{try{const Fe=await vs.getProject(ve);Fe.project&&r(Xe=>Xe.map(Ft=>Ft.id===ve?Fe.project:Ft))}catch(Fe){console.error("Error updating project:",Fe),Bs()}},[Bs]),[$i,yu]=j.useState(""),[Ui,Sx]=j.useState(""),[Kl,Cx]=j.useState(""),[sn,Tx]=j.useState("created_at");tY({onNew:()=>p(!0),onRefresh:Bs,onSearch:()=>{document.querySelector('input[type="text"]')?.focus()},onHelp:()=>q(!0),onEscape:()=>{p(!1),g(!1),w(!1),k(!1),$(!1),ce(!1),q(!1),le(!1),G(!1),Y(!1),ae(!1),Te(!1),Ye(!1),be(!1),et(!1),Vd(!1),zl(!1),qd(!1),Ws(!1),Xm(!1),Mn(!1),On(!1),fs(!1),Bn(!1),sx(!1),br(!1),Zd(!1),sc(!1),eu(!1),su(!1),rx(!1),rc(!1),ac(!1),nc(!1),ql(!1),cu(!1),Pi(!1),Bi(!1),lx(!1),cx(!1),mu(!1),hx(!1),mx(!1),xx(!1),px(!1),Fi(!1),pu(!1),wx(!1),bu(!1)}}),j.useEffect(()=>{Bs()},[c]);const Bt=j.useMemo(()=>{let ve=[...t];if($i){const Fe=$i.toLowerCase();ve=ve.filter(Xe=>Xe.title.toLowerCase().includes(Fe)||Xe.user?.first_name?.toLowerCase().includes(Fe)||Xe.user?.username?.toLowerCase().includes(Fe))}if(Ui&&(ve=ve.filter(Fe=>Fe.status===Ui)),Kl&&(ve=ve.filter(Fe=>Fe.complexity===Kl)),Yt.executorId&&(ve=ve.filter(Fe=>Fe.assigned_executor_id===Yt.executorId)),Yt.clientId&&(ve=ve.filter(Fe=>Fe.user?.id===Yt.clientId)),Yt.colorFilter&&(ve=ve.filter(Fe=>Fe.color===Yt.colorFilter)),Yt.dateFrom){const Fe=new Date(Yt.dateFrom);ve=ve.filter(Xe=>new Date(Xe.created_at)>=Fe)}if(Yt.dateTo){const Fe=new Date(Yt.dateTo);Fe.setHours(23,59,59,999),ve=ve.filter(Xe=>new Date(Xe.created_at)<=Fe)}if(Yt.hasPayment&&(ve=ve.filter(Fe=>{const Xe=Fe.prepayment_amount>0,Ft=Fe.client_paid_total||0,ks=Fe.estimated_cost||0;switch(Yt.hasPayment){case"paid":return Xe||Ft>0;case"unpaid":return!Xe&&Ft===0;case"partially":return Ft>0&&Ft<ks;case"fully":return Ft>=ks&&ks>0;default:return!0}})),Yt.hasOverdue){const Fe=new Date;ve=ve.filter(Xe=>{if(!Xe.deadline)return!1;const ks=new Date(Xe.deadline)<Fe,rn=Xe.status!=="completed"&&Xe.status!=="cancelled";return ks&&rn})}if(Yt.noExecutor&&(ve=ve.filter(Fe=>!Fe.assigned_executor_id&&!Fe.assigned_to)),Yt.priceFrom){const Fe=Number(Yt.priceFrom);ve=ve.filter(Xe=>(Xe.estimated_cost||0)>=Fe)}if(Yt.priceTo){const Fe=Number(Yt.priceTo);ve=ve.filter(Xe=>(Xe.estimated_cost||0)<=Fe)}return ve.sort((Fe,Xe)=>sn==="created_at"||sn==="updated_at"?new Date(Xe[sn]).getTime()-new Date(Fe[sn]).getTime():sn==="estimated_cost"?(Xe.estimated_cost||0)-(Fe.estimated_cost||0):sn==="title"?Fe.title.localeCompare(Xe.title):0),ve},[t,$i,Ui,Kl,sn,Yt]),Xl=j.useCallback(()=>{yu(""),Sx(""),Cx(""),Tx("created_at"),Ud({executorId:null,clientId:null,colorFilter:"",dateFrom:"",dateTo:"",hasPayment:"",hasOverdue:!1,noExecutor:!1,priceFrom:"",priceTo:""})},[]),Ex=j.useCallback(()=>{Bs()},[Bs]),vu=j.useCallback(ve=>{s(`/projects/${ve}/overview`)},[s]),ju=j.useCallback(ve=>{A(ve),g(!0)},[]),wu=async ve=>{if(window.confirm(" ,     ?"))try{await vs.deleteProject(ve),ts("  !","success"),Bs()}catch(Xe){console.error("Error deleting project:",Xe),ts("   ","error")}},dc=async ve=>{try{const Fe=t.find(Xe=>Xe.id===ve);await vs.archiveProject(ve),Fe?.is_archived?ts("   !","success"):ts("   !","success"),Bs()}catch(Fe){console.error("Error archiving project:",Fe),ts("    ","error")}},Nu=async ve=>{const Fe=window.prompt("   :");if(Fe)try{await vs.sendMessageToClient(ve,Fe),ts(" !","success")}catch(Xe){console.error("Error sending message:",Xe),ts("   ","error")}},In=async ve=>{if(window.confirm(" ,     ?"))try{await vs.completeProject(ve),ts("  !","success"),Bs()}catch(Xe){console.error("Error completing project:",Xe),ts("   ","error")}},uc=ve=>{R(ve),k(!0)},Vi=ve=>{const Fe=t.find(Xe=>Xe.id===ve);Fe&&(J(Fe),O(!0))},_u=(ve,Fe)=>{ee({id:ve,status:Fe}),_(!0)},ku=ve=>{const Fe=t.find(Xe=>Xe.id===ve);Fe&&(W(Fe),E(!0))},$n=ve=>{const Fe=t.find(Xe=>Xe.id===ve);Fe&&(ne(Fe),$(!0))},Hi=async(ve,Fe)=>{const Xe=["default","green","yellow","red"],Ft={default:"",green:"",yellow:"",red:""},ks=Xe.indexOf(Fe),rn=Xe[(ks+1)%Xe.length];try{(await fetch(`http://localhost:8001/admin/api/projects/${ve}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({color:rn})})).ok?(ts(`   ${Ft[rn]}`,"success"),Bs()):ts("  ","error")}catch(Zl){console.error("Error changing color:",Zl),ts("  ","error")}},Su=a?.total_projects??t.length,Ax=a?.active_projects??t.filter(ve=>["new","review","accepted","in_progress","testing"].includes(ve.status)).length,Un=a?.completed_projects??t.filter(ve=>ve.status==="completed").length,Cu=a?.total_cost??t.reduce((ve,Fe)=>ve+(Fe.estimated_cost||0),0),hc=a?.total_received??t.reduce((ve,Fe)=>ve+(Fe.client_paid_total||0),0),Dx=a?.remaining_budget??Cu-hc,hg=a?.total_prepayments??t.reduce((ve,Fe)=>ve+(Fe.prepayment_amount||0),0),Tu=a?.total_paid_to_executors??t.reduce((ve,Fe)=>ve+(Fe.executor_paid_total||0),0),Rx=(a?.total_planned_executor_payments??t.reduce((ve,Fe)=>ve+(Fe.executor_cost||0),0))-Tu,Mx=a?.total_profit??hc-Tu;return i?e.jsx("div",{className:"p-8",children:e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ls,{className:"w-12 h-12 text-purple-600 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:" ..."})]})})}):e.jsxs("div",{className:"p-8 space-y-6 bg-gradient-to-br from-purple-50 via-pink-50 to-red-50",children:[e.jsx(uW,{items:[{label:"",path:"/"},{label:"",path:"/projects"}]}),Ja&&e.jsx(xW,{projects:Bt,onClose:()=>Nr(!1)}),e.jsx("div",{className:"bg-gradient-to-r from-purple-600 via-pink-600 to-red-500 rounded-3xl p-8 text-white shadow-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:" "}),e.jsxs("p",{className:"text-purple-100",children:[" : ",Bt.length]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:Ex,className:"px-4 py-2 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-xl font-semibold transition-all flex items-center gap-2",title:" (R)",children:[e.jsx(ls,{className:"w-4 h-4"}),""]}),e.jsxs("button",{onClick:()=>u(!c),className:"px-4 py-2 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-xl font-semibold transition-all flex items-center gap-2",children:[e.jsx(Cl,{className:"w-4 h-4"}),c?" ":" "]}),e.jsx("button",{onClick:()=>Nr(!Ja),className:"px-4 py-2 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-xl font-semibold transition-all flex items-center gap-2",children:" "}),e.jsxs("button",{onClick:()=>le(!0),className:"px-4 py-2 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-xl font-semibold transition-all flex items-center gap-2",children:[e.jsx(Tt,{className:"w-4 h-4"}),""]}),e.jsx("button",{onClick:()=>q(!0),className:"px-4 py-2 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-xl font-semibold transition-all flex items-center gap-2",title:"  (?  H)",children:""}),e.jsxs("button",{onClick:()=>p(!0),className:"px-6 py-2 bg-white text-purple-600 rounded-xl font-semibold hover:shadow-xl transition-all flex items-center gap-2",title:"  (Ctrl+N)",children:[e.jsx(We,{className:"w-5 h-5"})," "]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md border border-purple-100 flex flex-col items-center justify-center text-center min-h-[100px]",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:Su}),e.jsxs("div",{className:"text-xs text-gray-600 mt-2 leading-tight",children:["",e.jsx("br",{}),""]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md border border-green-100 flex flex-col items-center justify-center text-center min-h-[100px]",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:Ax}),e.jsx("div",{className:"text-xs text-gray-600 mt-2",children:""})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md border border-green-200 flex flex-col items-center justify-center text-center min-h-[100px]",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:Un}),e.jsx("div",{className:"text-xs text-gray-600 mt-2",children:""})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md border border-orange-100 flex flex-col items-center justify-center text-center min-h-[100px]",children:[e.jsxs("div",{className:"text-xl font-bold text-gray-900",children:[Cu.toLocaleString(),""]}),e.jsxs("div",{className:"text-xs text-gray-600 mt-2 leading-tight",children:["",e.jsx("br",{}),""]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md border border-cyan-100 flex flex-col items-center justify-center text-center min-h-[100px]",children:[e.jsxs("div",{className:"text-xl font-bold text-gray-900",children:[hc.toLocaleString(),""]}),e.jsx("div",{className:"text-xs text-gray-600 mt-2",children:""})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md border border-red-100 flex flex-col items-center justify-center text-center min-h-[100px]",children:[e.jsxs("div",{className:"text-xl font-bold text-gray-900",children:[Dx.toLocaleString(),""]}),e.jsx("div",{className:"text-xs text-gray-600 mt-2",children:""})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md border border-gray-100 flex flex-col items-center justify-center text-center min-h-[100px]",children:[e.jsxs("div",{className:"text-xl font-bold text-gray-900",children:[hg.toLocaleString(),""]}),e.jsx("div",{className:"text-xs text-gray-600 mt-2",children:""})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md border border-orange-200 flex flex-col items-center justify-center text-center min-h-[100px]",children:[e.jsxs("div",{className:"text-xl font-bold text-gray-900",children:[Tu.toLocaleString(),""]}),e.jsx("div",{className:"text-xs text-gray-600 mt-2",children:""})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md border border-red-200 flex flex-col items-center justify-center text-center min-h-[100px]",children:[e.jsxs("div",{className:"text-xl font-bold text-gray-900",children:[Rx.toLocaleString(),""]}),e.jsx("div",{className:"text-xs text-gray-600 mt-2 leading-tight",children:" "})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md border border-purple-200 flex flex-col items-center justify-center text-center min-h-[100px]",children:[e.jsxs("div",{className:"text-xl font-bold text-gray-900",children:[Mx.toLocaleString(),""]}),e.jsx("div",{className:"text-xs text-gray-600 mt-2",children:""})]})]}),ar.length>0&&e.jsx(Qq,{selectedIds:ar,onSelectAll:()=>Ok(Bt,Ai),onDeselectAll:()=>Lk(Ai),onBulkArchive:()=>mY(ar,ts,Bs),onBulkDelete:()=>xY(ar,ts,Bs),onBulkStatusChange:()=>fY(ar,ts),onBulkExport:()=>pY(ar,Bt,ts),totalCount:Bt.length}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-[300px] relative",children:[e.jsx(Us,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"    ... (Ctrl+F)",className:"w-full pl-12 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",value:$i,onChange:ve=>yu(ve.target.value)})]}),e.jsxs("select",{className:"px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500",value:Ui,onChange:ve=>Sx(ve.target.value),children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"new",children:""}),e.jsx("option",{value:"review",children:" "}),e.jsx("option",{value:"accepted",children:""}),e.jsx("option",{value:"in_progress",children:" "}),e.jsx("option",{value:"testing",children:""}),e.jsx("option",{value:"completed",children:""}),e.jsx("option",{value:"cancelled",children:""})]}),e.jsxs("select",{className:"px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500",value:Kl,onChange:ve=>Cx(ve.target.value),children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"simple",children:""}),e.jsx("option",{value:"medium",children:""}),e.jsx("option",{value:"complex",children:""}),e.jsx("option",{value:"premium",children:""})]}),e.jsxs("select",{className:"px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500",value:sn,onChange:ve=>Tx(ve.target.value),children:[e.jsx("option",{value:"created_at",children:"  "}),e.jsx("option",{value:"updated_at",children:"  "}),e.jsx("option",{value:"estimated_cost",children:" "}),e.jsx("option",{value:"title",children:" "})]}),e.jsx("button",{onClick:Xl,className:"px-6 py-3 bg-red-50 text-red-600 rounded-xl hover:bg-red-100 transition-all font-medium",children:""})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-4 pt-4 border-t border-gray-200",children:[e.jsx(Kq,{filters:Yt,onChange:Ud,onClear:()=>{Ud({executorId:null,clientId:null,colorFilter:"",dateFrom:"",dateTo:"",hasPayment:"",hasOverdue:!1,noExecutor:!1,priceFrom:"",priceTo:""})}}),e.jsx(Jq,{groupBy:Ym,onChange:$d}),e.jsx("div",{className:"flex-1"}),e.jsx("button",{onClick:()=>uY(Bt),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-all font-medium flex items-center gap-2",title:"  ",children:" "}),e.jsx("button",{onClick:()=>G(!0),className:"px-4 py-2 bg-purple-100 text-purple-700 rounded-xl hover:bg-purple-200 transition-all font-medium flex items-center gap-2",title:" ",children:" "})]})]}),e.jsx("div",{className:"flex items-center justify-between bg-white rounded-2xl p-4 shadow-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:":"}),e.jsxs("div",{className:"flex gap-2 bg-gray-100 rounded-xl p-1",children:[e.jsxs("button",{onClick:()=>m("table"),className:`px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 ${h==="table"?"bg-white text-purple-600 shadow-md":"text-gray-600 hover:text-purple-600"}`,children:[e.jsx(CF,{className:"w-4 h-4"}),""]}),e.jsxs("button",{onClick:()=>m("cards"),className:`px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 ${h==="cards"?"bg-white text-purple-600 shadow-md":"text-gray-600 hover:text-purple-600"}`,children:[e.jsx(mN,{className:"w-4 h-4"}),""]})]})]})}),Bt.length===0?e.jsx("div",{className:"bg-white rounded-3xl p-16 shadow-xl border border-gray-100",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-purple-100 to-pink-100 rounded-3xl flex items-center justify-center mb-6",children:e.jsx(qa,{className:"w-12 h-12 text-purple-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:" "}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-md",children:$i||Ui||Kl?"     ":"   ,   "})]})}):h==="cards"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Bt.map(ve=>e.jsx(Aq,{project:ve,onView:vu,onEdit:ju,onDelete:wu,onArchive:dc,onContact:Nu,onAddPayment:Vi,onComplete:In,onViewFiles:uc,onAssignExecutor:ku,onExecutorPayment:$n},ve.id))}):e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-4 text-center text-xs font-bold uppercase w-[50px]",children:e.jsx("input",{type:"checkbox",checked:ar.length===Bt.length&&Bt.length>0,onChange:ve=>{ve.target.checked?Ok(Bt,Ai):Lk(Ai)},className:"w-4 h-4 rounded",title:" "})}),e.jsx("th",{className:"px-3 py-4 text-left text-xs font-bold uppercase",children:"ID"}),e.jsx("th",{className:"px-3 py-4 text-center text-xs font-bold uppercase w-[50px]",children:""}),e.jsx("th",{className:"px-3 py-4 text-left text-xs font-bold uppercase min-w-[200px]",children:""}),e.jsx("th",{className:"px-3 py-4 text-left text-xs font-bold uppercase",children:""}),e.jsx("th",{className:"px-3 py-4 text-left text-xs font-bold uppercase",children:""}),e.jsx("th",{className:"px-3 py-4 text-left text-xs font-bold uppercase",children:""}),e.jsx("th",{className:"px-3 py-4 text-left text-xs font-bold uppercase",children:""}),e.jsx("th",{className:"px-3 py-4 text-left text-xs font-bold uppercase",children:""}),e.jsx("th",{className:"px-3 py-4 text-left text-xs font-bold uppercase",children:""}),e.jsx("th",{className:"px-3 py-4 text-left text-xs font-bold uppercase",children:""}),e.jsx("th",{className:"px-3 py-4 text-left text-xs font-bold uppercase",children:""}),e.jsx("th",{className:"px-3 py-4 text-left text-xs font-bold uppercase",children:""}),e.jsx("th",{className:"px-3 py-4 text-center text-xs font-bold uppercase min-w-[400px]",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:Bt.map(ve=>{const Fe=NY(ve.status),Xe=vY(ve.status),Ft=jY(ve.status);return e.jsxs("tr",{className:`transition-colors ${Ft}`,children:[e.jsx("td",{className:"px-3 py-4 text-center",children:e.jsx("input",{type:"checkbox",checked:ar.includes(ve.id),onChange:ks=>{ks.target.checked?Ai([...ar,ve.id]):Ai(ar.filter(rn=>rn!==ve.id))},className:"w-4 h-4 rounded",onClick:ks=>ks.stopPropagation()})}),e.jsx("td",{className:"px-3 py-4",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"px-2 py-1 bg-gray-700 text-white rounded-lg text-xs font-bold",children:["#",ve.id]})})}),e.jsx("td",{className:"px-3 py-4",children:e.jsx("button",{onClick:ks=>{ks.stopPropagation(),Hi(ve.id,ve.color||"default")},className:`w-6 h-6 rounded-full border-2 border-gray-300 hover:scale-110 transition-transform cursor-pointer ${ve.color==="green"?"bg-green-500":ve.color==="yellow"?"bg-yellow-500":ve.color==="red"?"bg-red-500":"bg-gray-400"}`,title:`  (: ${ve.color==="green"?"":ve.color==="yellow"?"":ve.color==="red"?"":""})`})}),e.jsxs("td",{className:"px-3 py-4",children:[e.jsx("div",{className:"font-semibold text-gray-900 text-sm mb-1",children:ve.title}),e.jsx("div",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded inline-block",children:ve.project_type||" "})]}),e.jsxs("td",{className:"px-3 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:ve.user?.first_name||""}),e.jsxs("div",{className:"text-xs text-gray-500",children:["@",ve.user?.username||""]})]}),e.jsx("td",{className:"px-3 py-4",children:ve.assigned_to?e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:ve.assigned_to.username}),ve.executor_cost>0&&e.jsxs("div",{className:"text-xs text-orange-600 font-semibold",children:[ve.executor_paid_total?.toLocaleString()||0," / ",ve.executor_cost?.toLocaleString(),""]})]}):e.jsx("span",{className:"text-xs text-gray-400 italic",children:" "})}),e.jsx("td",{className:"px-3 py-4",children:e.jsx("span",{className:`px-3 py-1.5 rounded-lg text-xs font-bold whitespace-nowrap ${Xe}`,children:yY(ve.status)})}),e.jsx("td",{className:"px-3 py-4",children:e.jsx("span",{className:"text-sm font-medium",children:wY(ve.complexity)})}),e.jsx("td",{className:"px-3 py-4",children:e.jsxs("div",{className:"w-24",children:[e.jsx("div",{className:"flex justify-between items-center mb-1",children:e.jsxs("span",{className:"text-xs font-bold text-purple-600",children:[Fe,"%"]})}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all duration-500 rounded-full",style:{width:`${Fe}%`}})})]})}),e.jsx("td",{className:"px-3 py-4",children:e.jsxs("div",{className:"text-sm font-bold text-purple-600",children:[(ve.estimated_cost||0).toLocaleString(),""]})}),e.jsx("td",{className:"px-3 py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"font-bold text-green-600",children:[(ve.client_paid_total||0).toLocaleString(),""]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[": ",((ve.estimated_cost||0)-(ve.client_paid_total||0)).toLocaleString(),""]})]})}),e.jsx("td",{className:"px-3 py-4",children:ve.deadline?e.jsxs("div",{className:"text-xs text-orange-700 font-semibold",children:[" ",ve.deadline.slice(0,10)]}):e.jsx("span",{className:"text-xs text-gray-400",children:""})}),e.jsx("td",{className:"px-3 py-4",children:e.jsx("div",{className:"text-xs text-gray-500",children:ve.created_at?.slice(0,10)})}),e.jsx("td",{className:"px-3 py-4",children:e.jsxs("div",{className:"flex flex-wrap gap-1.5 justify-center",children:[e.jsxs("button",{onClick:()=>vu(ve.id),className:"px-2 py-1.5 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-all text-xs font-semibold flex items-center gap-1",title:"",children:[e.jsx(Vt,{className:"w-3 h-3"}),""]}),e.jsxs("button",{onClick:()=>ju(ve.id),className:"px-2 py-1.5 bg-cyan-100 text-cyan-700 rounded-lg hover:bg-cyan-200 transition-all text-xs font-semibold flex items-center gap-1",title:"",children:[e.jsx(An,{className:"w-3 h-3"}),""]}),e.jsxs("button",{onClick:()=>_u(ve.id,ve.status),className:"px-2 py-1.5 bg-teal-100 text-teal-700 rounded-lg hover:bg-teal-200 transition-all text-xs font-semibold flex items-center gap-1",title:" ",children:[e.jsx(ls,{className:"w-3 h-3"}),""]}),e.jsxs("button",{onClick:()=>ku(ve.id),className:"px-2 py-1.5 bg-violet-100 text-violet-700 rounded-lg hover:bg-violet-200 transition-all text-xs font-semibold flex items-center gap-1",title:" ",children:[e.jsx(it,{className:"w-3 h-3"}),""]}),(ve.status==="testing"||ve.status==="in_progress")&&e.jsxs("button",{onClick:()=>In(ve.id),className:"px-2 py-1.5 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-all text-xs font-semibold flex items-center gap-1",title:" ",children:[e.jsx(ut,{className:"w-3 h-3"}),""]}),ve.user?.telegram_id&&e.jsxs("button",{onClick:()=>Nu(ve.user.telegram_id),className:"px-2 py-1.5 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-all text-xs font-semibold flex items-center gap-1",title:"",children:[e.jsx(Xa,{className:"w-3 h-3"}),""]}),e.jsxs("button",{onClick:()=>Vi(ve.id),className:"px-2 py-1.5 bg-yellow-100 text-yellow-700 rounded-lg hover:bg-yellow-200 transition-all text-xs font-semibold flex items-center gap-1",title:" ",children:[e.jsx(Qe,{className:"w-3 h-3"}),""]}),e.jsxs("button",{onClick:()=>uc(ve.id),className:"px-2 py-1.5 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition-all text-xs font-semibold flex items-center gap-1",title:" ",children:[e.jsx(Mr,{className:"w-3 h-3"}),""]}),e.jsx("button",{onClick:()=>oY(ve.id,ve.title,He,be),className:"px-2 py-1.5 bg-sky-100 text-sky-700 rounded-lg hover:bg-sky-200 transition-all text-xs font-semibold flex items-center gap-1",title:"",children:""}),e.jsx("button",{onClick:()=>cY(ve.id,ve.title,Yr,et),className:"px-2 py-1.5 bg-pink-100 text-pink-700 rounded-lg hover:bg-pink-200 transition-all text-xs font-semibold flex items-center gap-1",title:"",children:""}),e.jsx("button",{onClick:()=>iY(ve.id,ve.title,M,Y),className:"px-2 py-1.5 bg-lime-100 text-lime-700 rounded-lg hover:bg-lime-200 transition-all text-xs font-semibold flex items-center gap-1",title:"",children:""}),e.jsx("button",{onClick:()=>lY(ve,xe,ae),className:"px-2 py-1.5 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition-all text-xs font-semibold flex items-center gap-1",title:" ",children:""}),e.jsx("button",{onClick:()=>dY(ve,ts),className:"px-2 py-1.5 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-all text-xs font-semibold flex items-center gap-1",title:"  ",children:""}),e.jsxs("button",{onClick:()=>dc(ve.id),className:"px-2 py-1.5 bg-amber-100 text-amber-700 rounded-lg hover:bg-amber-200 transition-all text-xs font-semibold flex items-center gap-1",title:ve.is_archived?"":"",children:[e.jsx(Cl,{className:"w-3 h-3"}),ve.is_archived?".":""]}),e.jsxs("button",{onClick:()=>wu(ve.id),className:"px-2 py-1.5 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-all text-xs font-semibold flex items-center gap-1",title:"",children:[e.jsx(tt,{className:"w-3 h-3"}),""]})]})})]},ve.id)})})]})})}),e.jsx(Dq,{isOpen:f,onClose:()=>p(!1),onSuccess:Bs}),e.jsx(Rq,{projectId:C,isOpen:v,onClose:()=>{g(!1),A(null)},onSuccess:()=>C&&Fa(C)}),e.jsx(Fq,{isOpen:y,onClose:()=>{w(!1),I(null)},onEdit:ve=>{w(!1),A(ve),g(!0)},onContact:Nu,project:X}),e.jsx(Uq,{isOpen:N,onClose:()=>{k(!1),R(null)},projectId:V}),e.jsx(Vq,{isOpen:S,onClose:()=>{_(!1),ee(null)},projectId:H?.id||null,currentStatus:H?.status||"",onStatusChanged:()=>H?.id&&Fa(H.id)}),e.jsx(Hq,{isOpen:T,onClose:()=>{E(!1),W(null)},projectId:se?.id||null,currentExecutor:se?.assigned_to,currentCost:se?.executor_cost,onAssigned:()=>se?.id&&Fa(se.id)}),e.jsx(qq,{isOpen:z,onClose:()=>{O(!1),J(null)},projectId:te?.id||null,projectCost:te?.estimated_cost||0,paidTotal:te?.client_paid_total||0,onPaymentAdded:()=>te?.id&&Fa(te.id)}),e.jsx(Gq,{isOpen:K,onClose:()=>{$(!1),ne(null)},projectId:ie?.id||null,executorCost:ie?.executor_cost||0,executorPaidTotal:ie?.executor_paid_total||0,executorName:ie?.assigned_to?.username,onPaymentAdded:()=>ie?.id&&Fa(ie.id)}),e.jsx(Zq,{isOpen:oe,onClose:()=>{ce(!1),F(null)},project:U}),e.jsx(eW,{isOpen:Z,onClose:()=>q(!1)}),e.jsx(tW,{isOpen:Q,onClose:()=>le(!1),onExport:(ve,Fe)=>{hY(ve,Fe,Bt,ts),le(!1)}}),e.jsx(rW,{isOpen:me,onClose:()=>G(!1),onStatusesUpdated:Bs}),e.jsx(lW,{isOpen:ue,onClose:()=>{Y(!1),M(null)},projectId:L?.id||null,projectName:L?.name||""}),e.jsx(oW,{isOpen:B,onClose:()=>{ae(!1),xe(null)},project:he,onSaved:()=>he?.id&&Fa(he.id)}),e.jsx(cW,{isOpen:_e,onClose:()=>{Te(!1),ze(null)},title:Ee?.title||"",message:Ee?.message||"",onConfirm:()=>{Ee?.onConfirm(),Te(!1),ze(null)},type:Ee?.type}),e.jsx(dW,{isOpen:Ie,onClose:()=>{Ye(!1),pr(null)},project:xs,onDuplicated:Bs}),e.jsx(hW,{isOpen:Vs,onClose:()=>{be(!1),He(null)},projectId:Le?.id||null,projectName:Le?.name||""}),e.jsx(mW,{isOpen:Ze,onClose:()=>{et(!1),Yr(null)},projectId:bt?.id||null,projectName:bt?.name||"",onTagsUpdated:()=>bt?.id&&Fa(bt.id)}),e.jsx(iW,{imageUrl:_r,onClose:()=>oa(null)}),gr.length>0&&e.jsx(aW,{files:gr,onCancel:ve=>gY(ve,Fl),onClear:()=>bY(Fl)}),Gm&&e.jsx(pW,{projects:Bt,onClose:()=>Vd(!1)}),Km&&e.jsx(gW,{projects:t,onClose:()=>zl(!1),onProjectSelect:ve=>{I(ve),w(!0),zl(!1)}}),Hd&&ec&&e.jsx(bW,{projectId:ec.id,projectName:ec.name,onClose:()=>{qd(!1),en(null)}}),Ps&&Rn&&e.jsx(yW,{projectId:Rn,onClose:()=>{Ws(!1),Wd(null)}}),Wp&&e.jsx(vW,{onClose:()=>Xm(!1)}),Zm&&e.jsx(jW,{onClose:()=>Mn(!1),onTemplateSelect:ve=>{Mn(!1),p(!0)}}),e.jsx(wW,{}),Yd&&Ln&&e.jsx(_W,{projectId:Ln,onClose:()=>{On(!1),Il(null)}}),Di&&Gd&&e.jsx(kW,{projectId:Gd,onClose:()=>{fs(!1),Qm(null)}}),Pn&&Jm&&e.jsx(SW,{projectId:Jm,onClose:()=>{Bn(!1),ex(null)}}),tx&&$l&&e.jsx(CW,{projectId:$l,onClose:()=>{sx(!1),tc(null)}}),La&&Kd&&e.jsx(AW,{projectId:Kd,onClose:()=>{br(!1),Yp(null)}}),Xd&&Ul&&e.jsx(DW,{projectId:Ul,onClose:()=>{Zd(!1),Gp(null)}}),kr&&Qd&&e.jsx(RW,{projectId:Qd,onClose:()=>{sc(!1),Jd(null)}}),Ri&&tu&&e.jsx(OW,{projectId:tu,onClose:()=>{eu(!1),Mi(null)}}),Kp&&ru&&e.jsx(LW,{projectId:ru,onClose:()=>{su(!1),au(null)}}),Xp&&Vl&&e.jsx(PW,{projectId:Vl,onClose:()=>{rx(!1),Pa(null)}}),nu&&Fn&&e.jsx(BW,{projectId:Fn,onClose:()=>{rc(!1),Oi(null)}}),ax&&iu&&e.jsx(FW,{projectId:iu,onClose:()=>{ac(!1),Hl(null)}}),Ba&&Li&&e.jsx(zW,{projectId:Li,onClose:()=>{nc(!1),tn(null)}}),lu&&ou&&e.jsx(IW,{projectId:ou,onClose:()=>{ql(!1),ic(null)}}),lc&&Ys&&e.jsx($W,{projectId:Ys,onClose:()=>{cu(!1),zn(null)}}),oc&&nx&&e.jsx(UW,{projectId:nx,onClose:()=>{Pi(!1),du(null)}}),uu&&Wl&&e.jsx(VW,{projectId:Wl,onClose:()=>{Bi(!1),ix(null)}}),Zp&&ox&&e.jsx(HW,{projectId:ox,onClose:()=>{lx(!1),hu(null)}}),Qp&&dx&&e.jsx(qW,{projectId:dx,onClose:()=>{cx(!1),Jp(null)}}),eg&&ux&&e.jsx(WW,{projectId:ux,onClose:()=>{mu(!1),tg(null)}}),sg&&cc&&e.jsx(YW,{projectId:cc,onClose:()=>{hx(!1),rg(null)}}),ag&&xu&&e.jsx(GW,{projectId:xu,onClose:()=>{mx(!1),ng(null)}}),ig&&fx&&e.jsx(KW,{projectId:fx,onClose:()=>{xx(!1),lg(null)}}),og&&gx&&e.jsx(XW,{projectId:gx,onClose:()=>{px(!1),cg(null)}}),fu&&bx&&e.jsx(ZW,{projectId:bx,onClose:()=>{Fi(!1),yx(null)}}),vx&&gu&&e.jsx(QW,{projectId:gu,onClose:()=>{pu(!1),jx(null)}}),zi&&Nx&&e.jsx(JW,{projectId:Nx,onClose:()=>{wx(!1),dg(null)}}),_x&&Ii&&e.jsx(eY,{projectId:Ii,onClose:()=>{bu(!1),Yl(null)}}),e.jsx(m1,{toasts:ug,onRemove:kx})]})},kY=()=>{const{projectId:s}=yT(),t=Oa(),[r,a]=j.useState(null),[n,i]=j.useState(!0),[o,c]=j.useState(null);j.useEffect(()=>{(async()=>{if(s)try{i(!0);const p=await fe.get(`/admin/api/projects/${s}`),v=p.data.project||p.data;a(v),c(null)}catch(p){console.error("Error loading project:",p),c("  ")}finally{i(!1)}})()},[s]);const u=[{id:"overview",label:"",icon:dE,path:`/projects/${s}/overview`},{id:"tasks",label:"",icon:Ds,path:`/projects/${s}/tasks`},{id:"revisions",label:"",icon:Cn,path:`/projects/${s}/revisions`},{id:"chat",label:"",icon:Os,path:`/projects/${s}/chat`},{id:"documents",label:"",icon:Ue,path:`/projects/${s}/documents`},{id:"finance",label:"",icon:Qe,path:`/projects/${s}/finance`},{id:"hosting",label:"",icon:bn,path:`/projects/${s}/hosting`}],h={new:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",in_progress:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400",testing:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400",completed:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",archived:"bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-400"},m={new:"",in_progress:" ",testing:"",completed:"",archived:""};return n?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx(Pt,{className:"w-8 h-8 text-blue-500 animate-spin"})}):o||!r?e.jsxs("div",{className:"flex flex-col items-center justify-center h-96 gap-4",children:[e.jsx("p",{className:"text-red-500 dark:text-red-400",children:o||"  "}),e.jsx("button",{onClick:()=>t("/projects"),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"  "})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>t("/projects"),className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:[e.jsx(rE,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${h[r.status]||h.new}`,children:m[r.status]||r.status})]}),e.jsxs("div",{className:"px-6 py-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:r.title}),r.description&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:r.description}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:""}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[r.progress||0,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${r.progress||0}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[r.client_name&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:":"}),e.jsx("span",{className:"ml-2 text-gray-900 dark:text-white",children:r.client_name})]}),r.budget&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:":"}),e.jsxs("span",{className:"ml-2 text-gray-900 dark:text-white",children:[r.budget.toLocaleString("ru-RU")," "]})]}),r.deadline&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:":"}),e.jsx("span",{className:"ml-2 text-gray-900 dark:text-white",children:new Date(r.deadline).toLocaleDateString("ru-RU")})]})]})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700",children:e.jsx("nav",{className:"flex overflow-x-auto scrollbar-hide",children:u.map(f=>e.jsxs(CT,{to:f.path,className:({isActive:p})=>`flex items-center gap-2 px-6 py-4 text-sm font-medium whitespace-nowrap border-b-2 transition-colors ${p?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:border-gray-300 dark:hover:border-gray-600"}`,children:[e.jsx(f.icon,{className:"w-4 h-4"}),e.jsx("span",{children:f.label})]},f.id))})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:e.jsx(nN,{context:{project:r}})})]})},SY=()=>{const{project:s}=Ko(),t=Oa(),[r,a]=j.useState([]),[n,i]=j.useState(!1),[o,c]=j.useState([]),[u,h]=j.useState(!1),[m,f]=j.useState([]),[p,v]=j.useState(!1);j.useEffect(()=>{(async()=>{try{i(!0),a([{id:1,action:"create",user_name:"admin",created_at:s.created_at||new Date().toISOString(),details:" "}])}catch(S){console.error("Error loading activity:",S)}finally{i(!1)}})()},[s.id]),j.useEffect(()=>{(async()=>{try{h(!0);const S=await fe.get(`/admin/api/projects/${s.id}/tasks`);if(S.data.success){const T=(S.data.tasks||[]).filter(E=>E.status==="in_progress"||E.status==="pending"||E.status==="new").slice(0,5);c(T)}}catch(S){console.error("Error loading tasks:",S)}finally{h(!1)}})()},[s.id]),j.useEffect(()=>{(async()=>{try{v(!0);const S=await fe.get(`/admin/api/projects/${s.id}/payments`);if(S.data.success){const _=S.data.payments||[];f(_.slice(0,3))}}catch(S){console.error("Error loading payments:",S)}finally{v(!1)}})()},[s.id]);const g=k=>{const S=new Date(k),T=new Date().getTime()-S.getTime(),E=Math.floor(T/(1e3*60*60*24));return E===0?"":E===1?"":E<7?`${E}  `:S.toLocaleDateString("ru-RU")},y={pending:{label:"",color:"gray"},new:{label:"",color:"blue"},in_progress:{label:" ",color:"yellow"},review:{label:" ",color:"purple"},completed:{label:"",color:"green"}},w=k=>y[k]||y.pending,N={PREPAYMENT:"",MILESTONE:"",FINAL:"",ADDITIONAL:""};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:" "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500 rounded-lg",children:e.jsx(xt,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:""}),e.jsxs("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:[s.progress||0,"%"]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-lg p-4 border border-green-200 dark:border-green-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-500 rounded-lg",children:e.jsx(it,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:""}),e.jsx("p",{className:"text-lg font-bold text-green-900 dark:text-green-100 truncate",children:s.client_name||s.user?.username||" "})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-lg p-4 border border-purple-200 dark:border-purple-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-500 rounded-lg",children:e.jsx(wt,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-purple-600 dark:text-purple-400",children:""}),e.jsx("p",{className:"text-lg font-bold text-purple-900 dark:text-purple-100",children:s.deadline?new Date(s.deadline).toLocaleDateString("ru-RU"):" "})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 rounded-lg p-4 border border-orange-200 dark:border-orange-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-500 rounded-lg",children:e.jsx(Ve,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-orange-600 dark:text-orange-400",children:""}),e.jsx("p",{className:"text-lg font-bold text-orange-900 dark:text-orange-100",children:s.created_at?new Date(s.created_at).toLocaleDateString("ru-RU"):""})]})]})})]}),(s.estimated_cost||s.executor_cost||s.final_cost)&&e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-green-100 dark:from-emerald-900/20 dark:to-green-800/20 rounded-lg p-6 border border-emerald-200 dark:border-emerald-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-emerald-500 rounded-lg",children:e.jsx(Qe,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold text-emerald-900 dark:text-emerald-100",children:" "})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.estimated_cost&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-emerald-600 dark:text-emerald-400",children:" "}),e.jsxs("p",{className:"text-xl font-bold text-emerald-900 dark:text-emerald-100",children:[s.estimated_cost.toLocaleString("ru-RU")," "]})]}),s.executor_cost&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-emerald-600 dark:text-emerald-400",children:" "}),e.jsxs("p",{className:"text-xl font-bold text-emerald-900 dark:text-emerald-100",children:[s.executor_cost.toLocaleString("ru-RU")," "]})]}),s.final_cost&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-emerald-600 dark:text-emerald-400",children:" "}),e.jsxs("p",{className:"text-xl font-bold text-emerald-900 dark:text-emerald-100",children:[s.final_cost.toLocaleString("ru-RU")," "]})]})]})]}),s.description&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:" "}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:s.description})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(it,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:" "})]}),e.jsxs("div",{className:"space-y-4",children:[s.user&&e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-full",children:e.jsx(lt,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:""}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:s.user.first_name||s.user.username}),s.user.phone&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(bi,{className:"w-3 h-3 text-gray-400"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:s.user.phone})]}),s.user.email&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(vi,{className:"w-3 h-3 text-gray-400"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:s.user.email})]})]})]}),(s.assigned_executor||s.assigned_to)&&e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-full",children:e.jsx(lt,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:""}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:s.assigned_executor?.first_name||s.assigned_executor?.username||s.assigned_to?.first_name||s.assigned_to?.username})]})]}),!s.user&&!s.assigned_executor&&!s.assigned_to&&e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm text-center py-4",children:"  "})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ds,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"  "})]}),e.jsx("button",{onClick:()=>t(`/projects/${s.id}/tasks`),className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"  "})]}),u?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm text-center py-4",children:"..."}):o.length>0?e.jsx("div",{className:"space-y-2",children:o.map(k=>{const S=w(k.status);return e.jsx("div",{onClick:()=>t(`/projects/${s.id}/tasks`),className:"flex items-start gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-600 cursor-pointer transition-colors",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:k.title}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${S.color==="yellow"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":S.color==="blue"?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":"bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-400"}`,children:S.label})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 dark:text-gray-400",children:[k.deadline&&e.jsx("span",{children:new Date(k.deadline).toLocaleDateString("ru-RU")}),k.comments_count!==void 0&&k.comments_count>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Os,{className:"w-3 h-3"}),e.jsx("span",{children:k.comments_count})]})]})]})},k.id)})}):e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm text-center py-4",children:"  "})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:" "})]}),e.jsx("button",{onClick:()=>t(`/projects/${s.id}/finance`),className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"  "})]}),p?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm text-center py-4",children:"..."}):m.length>0?e.jsx("div",{className:"space-y-2",children:m.map(k=>e.jsxs("div",{onClick:()=>t(`/projects/${s.id}/finance`),className:"flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-emerald-300 dark:hover:border-emerald-600 cursor-pointer transition-colors",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:N[k.type]||k.type}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:k.due_date&&new Date(k.due_date).toLocaleDateString("ru-RU")})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:[k.amount.toLocaleString("ru-RU")," "]}),e.jsx("span",{className:`text-xs ${k.status==="PAID"?"text-green-600 dark:text-green-400":"text-yellow-600 dark:text-yellow-400"}`,children:k.status==="PAID"?"":""})]})]},k.id))}):e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm text-center py-4",children:" "})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ya,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:" "})]}),n?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm text-center py-4",children:"..."}):r.length>0?e.jsx("div",{className:"space-y-3",children:r.slice(0,5).map(k=>e.jsx("div",{className:"flex items-start gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[e.jsx("span",{className:"font-medium",children:k.user_name})," ",e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:k.details})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:g(k.created_at)})]})},k.id))}):e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm text-center py-4",children:" "})]})]})]})},CY=()=>{const{project:s}=Ko(),[t,r]=j.useState([]),[a,n]=j.useState(!0),[i,o]=j.useState(null),[c,u]=j.useState("all"),[h,m]=j.useState(!1),[f,p]=j.useState({title:"",description:"",priority:"medium",deadline:""}),[v,g]=j.useState(!1),[y,w]=j.useState(null),[N,k]=j.useState({title:"",description:"",status:"",priority:"",deadline:""}),[S,_]=j.useState([]),[T,E]=j.useState(""),[z,O]=j.useState(!1),[C,A]=j.useState(!1);j.useEffect(()=>{s?.id&&X()},[s?.id]);const X=async()=>{if(s?.id)try{n(!0);const ne=await fe.get(`/admin/api/projects/${s.id}/tasks`);if(ne.data.success){const oe=(ne.data.tasks||[]).filter(ce=>ce.type!=="REVISION");r(oe)}o(null)}catch(ne){console.error("Error loading tasks:",ne),o("  ")}finally{n(!1)}},I=async()=>{if(s?.id)try{const ne={title:f.title,description:f.description,priority:f.priority,deadline:f.deadline||null,status:"pending"};if(s.assigned_executor_id)ne.assigned_to_id=s.assigned_executor_id;else{o("  :    ");return}(await fe.post(`/admin/api/projects/${s.id}/tasks`,ne)).data.success&&(m(!1),p({title:"",description:"",priority:"medium",deadline:""}),X())}catch(ne){console.error("Error creating task:",ne),o("  ")}},V=async ne=>{w(ne),k({title:ne.title,description:ne.description||"",status:ne.status,priority:ne.priority,deadline:ne.deadline?ne.deadline.split("T")[0]:""}),g(!0),await R(ne.id)},R=async ne=>{try{O(!0);const oe=await fe.get(`/admin/api/tasks/${ne}/comments`);oe.data.success&&_(oe.data.comments||[])}catch(oe){console.error("Error loading comments:",oe)}finally{O(!1)}},H=async()=>{if(!(!y||!T.trim()))try{A(!0),(await fe.post(`/admin/api/tasks/${y.id}/comments`,{comment:T.trim()})).data.success&&(E(""),await R(y.id))}catch(ne){console.error("Error adding comment:",ne),o("  ")}finally{A(!1)}},ee=async()=>{if(y)try{const ne=await fe.put(`/admin/api/tasks/${y.id}`,{title:N.title,description:N.description,status:N.status,priority:N.priority,deadline:N.deadline||null});if(ne.data.success){X();const oe=ne.data.task;w(oe)}}catch(ne){console.error("Error updating task:",ne),o("  ")}},se=async()=>{if(y&&confirm(` ,     "${y.title}"?`))try{(await fe.delete(`/admin/api/tasks/${y.id}`)).data.success&&(g(!1),w(null),X())}catch(ne){console.error("Error deleting task:",ne),o("  ")}},W={pending:{label:"",color:"gray",icon:Ve},new:{label:"",color:"blue",icon:Ge},in_progress:{label:" ",color:"yellow",icon:Ve},review:{label:" ",color:"purple",icon:Ds},completed:{label:"",color:"green",icon:Hr},cancelled:{label:"",color:"red",icon:Tl}},te={low:{label:"",color:"gray"},normal:{label:"",color:"blue"},medium:{label:"",color:"blue"},high:{label:"",color:"orange"},urgent:{label:"",color:"red"}},J=ne=>W[ne]||W.pending,K=ne=>te[ne]||te.normal,$=t.filter(ne=>c==="all"?!0:ne.status===c),ie=t.reduce((ne,oe)=>(ne[oe.status]=(ne[oe.status]||0)+1,ne),{});return a?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Pt,{className:"w-8 h-8 text-blue-500 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:" "}),e.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[e.jsx(We,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]})]}),i&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 flex items-center justify-between",children:[e.jsx("p",{className:"text-red-600 dark:text-red-400",children:i}),e.jsx("button",{onClick:()=>o(null),className:"text-red-400 hover:text-red-600",children:e.jsx(De,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",children:[e.jsxs("button",{onClick:()=>u("all"),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors ${c==="all"?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[" (",t.length,")"]}),Object.entries(W).map(([ne,oe])=>e.jsxs("button",{onClick:()=>u(ne),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors ${c===ne?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[oe.label," (",ie[ne]||0,")"]},ne))]}),$.length>0?e.jsx("div",{className:"space-y-3",children:$.map(ne=>{const oe=J(ne.status),ce=K(ne.priority),U=oe.icon;return e.jsx("div",{onClick:()=>V(ne),className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 hover:shadow-md transition-shadow cursor-pointer",children:e.jsx("div",{className:"flex items-start justify-between gap-4",children:e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:`p-2 rounded-lg ${oe.color==="green"?"bg-green-100 dark:bg-green-900/20":oe.color==="blue"?"bg-blue-100 dark:bg-blue-900/20":oe.color==="yellow"?"bg-yellow-100 dark:bg-yellow-900/20":oe.color==="purple"?"bg-purple-100 dark:bg-purple-900/20":oe.color==="red"?"bg-red-100 dark:bg-red-900/20":"bg-gray-100 dark:bg-gray-900/20"} mt-1`,children:e.jsx(U,{className:`w-5 h-5 ${oe.color==="green"?"text-green-600 dark:text-green-400":oe.color==="blue"?"text-blue-600 dark:text-blue-400":oe.color==="yellow"?"text-yellow-600 dark:text-yellow-400":oe.color==="purple"?"text-purple-600 dark:text-purple-400":oe.color==="red"?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2 flex-wrap",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:ne.title}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${ce.color==="red"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":ce.color==="orange"?"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400":ce.color==="blue"?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":"bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-400"}`,children:ce.label}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${oe.color==="green"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":oe.color==="blue"?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":oe.color==="yellow"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":oe.color==="purple"?"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400":oe.color==="red"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-400"}`,children:oe.label})]}),ne.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2",children:ne.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400 flex-wrap",children:[(ne.assigned_to?.first_name||ne.assigned_to?.username||ne.assigned_to_name)&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(lt,{className:"w-3 h-3"}),e.jsx("span",{children:ne.assigned_to?.first_name||ne.assigned_to?.username||ne.assigned_to_name})]}),ne.deadline&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(wt,{className:"w-3 h-3"}),e.jsx("span",{children:new Date(ne.deadline).toLocaleDateString("ru-RU")})]}),ne.comments_count!==void 0&&ne.comments_count>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Os,{className:"w-3 h-3"}),e.jsxs("span",{children:[ne.comments_count," ",ne.comments_count===1?"":""]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ve,{className:"w-3 h-3"}),e.jsxs("span",{children:[": ",new Date(ne.created_at).toLocaleDateString("ru-RU")]})]})]})]})]})})},ne.id)})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(Ds,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:c==="all"?"  ":"    "}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:c==="all"?`     "${s.title}"`:"  "}),c==="all"&&e.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[e.jsx(We,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]})]}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:" "}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[": ",s.title]})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"  *"}),e.jsx("input",{type:"text",value:f.title,onChange:ne=>p({...f,title:ne.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"  "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsx("textarea",{value:f.description,onChange:ne=>p({...f,description:ne.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:" ..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsxs("select",{value:f.priority,onChange:ne=>p({...f,priority:ne.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"normal",children:""}),e.jsx("option",{value:"medium",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"urgent",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsx("input",{type:"date",value:f.deadline,onChange:ne=>p({...f,deadline:ne.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex items-center justify-end gap-3",children:[e.jsx("button",{onClick:()=>{m(!1),p({title:"",description:"",priority:"medium",deadline:""})},className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:""}),e.jsx("button",{onClick:I,disabled:!f.title.trim(),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:" "})]})]})}),v&&y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:" "}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[": ",s.title]})]}),e.jsx("button",{onClick:se,className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:" ",children:e.jsx(tt,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"  *"}),e.jsx("input",{type:"text",value:N.title,onChange:ne=>k({...N,title:ne.target.value}),onBlur:ee,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"  "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsx("textarea",{value:N.description,onChange:ne=>k({...N,description:ne.target.value}),onBlur:ee,rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:" ..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsxs("select",{value:N.status,onChange:ne=>{k({...N,status:ne.target.value}),ee()},className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"pending",children:""}),e.jsx("option",{value:"new",children:""}),e.jsx("option",{value:"in_progress",children:" "}),e.jsx("option",{value:"review",children:" "}),e.jsx("option",{value:"completed",children:""}),e.jsx("option",{value:"cancelled",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsxs("select",{value:N.priority,onChange:ne=>{k({...N,priority:ne.target.value}),ee()},className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"normal",children:""}),e.jsx("option",{value:"medium",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"urgent",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsx("input",{type:"date",value:N.deadline,onChange:ne=>k({...N,deadline:ne.target.value}),onBlur:ee,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(Os,{className:"w-5 h-5"})," (",S.length,")"]}),e.jsx("div",{className:"space-y-3 mb-4 max-h-64 overflow-y-auto",children:z?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Pt,{className:"w-6 h-6 text-blue-500 animate-spin"})}):S.length>0?S.map(ne=>e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:(ne.author?.first_name||ne.author?.username||"U")[0].toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:ne.author?.first_name||ne.author?.username||""}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(ne.created_at).toLocaleString("ru-RU")})]})]})}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:ne.comment})]},ne.id)):e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"  "})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:T,onChange:ne=>E(ne.target.value),onKeyPress:ne=>ne.key==="Enter"&&H(),placeholder:" ...",className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("button",{onClick:H,disabled:!T.trim()||C,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:C?e.jsx(Pt,{className:"w-4 h-4 animate-spin"}):e.jsx(rr,{className:"w-4 h-4"})})]})]})]})}),e.jsx("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex items-center justify-end gap-3",children:e.jsx("button",{onClick:()=>{g(!1),w(null),_([]),E("")},className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:""})})]})})]})},TY=()=>{const{project:s}=Ko(),[t,r]=j.useState([]),[a,n]=j.useState(!0),[i,o]=j.useState(null),[c,u]=j.useState("all");j.useEffect(()=>{s?.id&&h()},[s?.id]);const h=async()=>{if(s?.id)try{n(!0);const w=await fe.get(`/admin/api/projects/${s.id}/tasks`);if(w.data.success){const N=(w.data.tasks||[]).filter(k=>k.type==="REVISION");r(N)}o(null)}catch(w){console.error("Error loading revisions:",w),o("  ")}finally{n(!1)}},m={new:{label:"",color:"blue",icon:Ge},in_progress:{label:" ",color:"yellow",icon:Ve},review:{label:" ",color:"purple",icon:Cn},completed:{label:"",color:"green",icon:Hr},rejected:{label:"",color:"red",icon:Tl}},f={low:{label:"",color:"gray"},medium:{label:"",color:"blue"},high:{label:"",color:"orange"},urgent:{label:"",color:"red"}},p=w=>m[w]||m.new,v=w=>f[w]||f.medium,g=t.filter(w=>c==="all"?!0:w.status===c),y=t.reduce((w,N)=>(w[N.status]=(w[N.status]||0)+1,w),{});return a?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Pt,{className:"w-8 h-8 text-blue-500 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:" "}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:[e.jsx(We,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]})]}),i&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:e.jsx("p",{className:"text-red-600 dark:text-red-400",children:i})}),e.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 border border-purple-200 dark:border-purple-800",children:e.jsxs("p",{className:"text-sm text-purple-700 dark:text-purple-300",children:[e.jsx("strong",{children:""})," -      .           ."]})}),e.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",children:[e.jsxs("button",{onClick:()=>u("all"),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors ${c==="all"?"bg-purple-500 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[" (",t.length,")"]}),Object.entries(m).map(([w,N])=>e.jsxs("button",{onClick:()=>u(w),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors ${c===w?`bg-${N.color}-500 text-white`:"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[N.label," (",y[w]||0,")"]},w))]}),g.length>0?e.jsx("div",{className:"space-y-3",children:g.map(w=>{const N=p(w.status),k=v(w.priority),S=N.icon;return e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border-2 border-purple-200 dark:border-purple-800 p-4 hover:shadow-md transition-shadow cursor-pointer",children:e.jsx("div",{className:"flex items-start justify-between gap-4",children:e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:`p-2 bg-${N.color}-100 dark:bg-${N.color}-900/20 rounded-lg mt-1`,children:e.jsx(S,{className:`w-5 h-5 text-${N.color}-600 dark:text-${N.color}-400`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2 flex-wrap",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:w.title}),w.created_from_chat&&e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",children:" "}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium bg-${k.color}-100 text-${k.color}-700 dark:bg-${k.color}-900/30 dark:text-${k.color}-400`,children:k.label}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium bg-${N.color}-100 text-${N.color}-700 dark:bg-${N.color}-900/30 dark:text-${N.color}-400`,children:N.label})]}),w.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2",children:w.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400",children:[w.assigned_to_name&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(lt,{className:"w-3 h-3"}),e.jsx("span",{children:w.assigned_to_name})]}),w.deadline&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(wt,{className:"w-3 h-3"}),e.jsx("span",{children:new Date(w.deadline).toLocaleDateString("ru-RU")})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ve,{className:"w-3 h-3"}),e.jsxs("span",{children:[": ",new Date(w.created_at).toLocaleDateString("ru-RU")]})]})]})]})]})})},w.id)})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(Cn,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:c==="all"?"  ":"    "}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:c==="all"?"     ":"  "}),c==="all"&&e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:[e.jsx(We,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]})]})]})},EY=()=>{const{project:s}=Ko(),{user:t}=Rm(),[r,a]=j.useState([]),[n,i]=j.useState(!0),[o,c]=j.useState(null),[u,h]=j.useState(""),[m,f]=j.useState(!1),[p,v]=j.useState(null),[g,y]=j.useState(!1),[w,N]=j.useState(null),k=j.useRef(null);j.useEffect(()=>{s?.id&&S()},[s?.id]),j.useEffect(()=>{_()},[r]);const S=async()=>{if(s?.id)try{i(!0);const O=await fe.get(`/admin/api/projects/${s.id}/chat`);if(O.data.success&&O.data.chat){const C=O.data.chat.id;N(C);const A=await fe.get(`/admin/api/chats/${C}/messages`);A.data.success&&a(A.data.messages||[])}c(null)}catch(O){console.error("Error loading chat:",O),c("  ")}finally{i(!1)}},_=()=>{k.current?.scrollIntoView({behavior:"smooth"})},T=async O=>{if(O.preventDefault(),!(!u.trim()||m||!w))try{if(f(!0),(await fe.post(`/admin/api/chats/${w}/messages`,{text:u.trim(),sender_type:"admin",sender_id:t?.id||1})).data.success){const A=await fe.get(`/admin/api/chats/${w}/messages`);A.data.success&&a(A.data.messages||[]),h("")}}catch(C){console.error("Error sending message:",C),alert("  ")}finally{f(!1)}},E=async O=>{if(s?.id)try{(await fe.post("/admin/api/tasks",{project_id:s.id,title:`  : ${O.text.substring(0,50)}...`,description:O.text,type:"TASK",status:"new",priority:"medium",created_from_chat:!0})).data.success&&(alert("  !"),y(!1),v(null))}catch(C){console.error("Error creating task:",C),alert("  ")}},z=async O=>{if(s?.id)try{(await fe.post("/admin/api/tasks",{project_id:s.id,title:`  : ${O.text.substring(0,50)}...`,description:O.text,type:"REVISION",status:"new",priority:"high",created_from_chat:!0})).data.success&&(alert("  !"),y(!1),v(null))}catch(C){console.error("Error creating revision:",C),alert("  ")}};return n?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Pt,{className:"w-8 h-8 text-blue-500 animate-spin"})}):e.jsxs("div",{className:"flex flex-col h-[600px]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"  "}),s.client_id&&e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(lt,{className:"w-4 h-4"})," ID: ",s.client_id]})})]}),o&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-4",children:e.jsx("p",{className:"text-red-600 dark:text-red-400",children:o})}),e.jsxs("div",{className:"flex-1 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden flex flex-col",children:[r.length>0?e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[r.map(O=>{const C=!O.is_client;return e.jsx("div",{className:`flex ${C?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[70%] ${C?"order-2":"order-1"}`,children:[e.jsx("div",{className:`text-xs text-gray-500 dark:text-gray-400 mb-1 ${C?"text-right":"text-left"}`,children:O.author_name||O.sender_name||(O.is_client?"":"")}),e.jsxs("div",{className:`relative group rounded-lg px-4 py-3 ${C?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white"}`,children:[e.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:O.text}),O.is_client&&e.jsx("div",{className:"absolute top-0 right-0 -mt-8 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs("div",{className:"flex items-center gap-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-1",children:[e.jsxs("button",{onClick:()=>{v(O),y(!0)},className:"flex items-center gap-1 px-2 py-1 text-xs text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors",title:" ",children:[e.jsx(Ds,{className:"w-3 h-3"}),e.jsx("span",{children:""})]}),e.jsxs("button",{onClick:()=>{v(O),z(O)},className:"flex items-center gap-1 px-2 py-1 text-xs text-purple-600 dark:text-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/20 rounded transition-colors",title:" ",children:[e.jsx(Cn,{className:"w-3 h-3"}),e.jsx("span",{children:""})]})]})})]}),e.jsxs("div",{className:`flex items-center gap-1 text-xs text-gray-400 mt-1 ${C?"justify-end":"justify-start"}`,children:[e.jsx(Ve,{className:"w-3 h-3"}),e.jsx("span",{children:new Date(O.created_at).toLocaleString("ru-RU")})]})]})},O.id)}),e.jsx("div",{ref:k})]}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center p-8",children:[e.jsx(Os,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"  "}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"   "})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("form",{onSubmit:T,className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:u,onChange:O=>h(O.target.value),placeholder:" ...",className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:m}),e.jsxs("button",{type:"submit",disabled:!u.trim()||m,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[m?e.jsx(Pt,{className:"w-4 h-4 animate-spin"}):e.jsx(rr,{className:"w-4 h-4"}),e.jsx("span",{children:""})]})]})})]}),g&&p&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"   ?"}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-3 mb-4",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-3",children:p.text})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>E(p),className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:" "}),e.jsx("button",{onClick:()=>{y(!1),v(null)},className:"flex-1 px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:""})]})]})})]})},AY=()=>{const{project:s}=Ko(),[t,r]=j.useState([]),[a,n]=j.useState(!0),[i,o]=j.useState(null),[c,u]=j.useState(!1),[h,m]=j.useState({type:"contract",name:"",number:"",description:""}),[f,p]=j.useState(!1);j.useEffect(()=>{s?.id&&v()},[s?.id]);const v=async()=>{if(s?.id)try{n(!0);const _=await fe.get(`/admin/api/projects/${s.id}/documents`);_.data.success&&r(_.data.documents||[]),o(null)}catch(_){console.error("Error loading documents:",_),o("  ")}finally{n(!1)}},g={contract:{label:"",color:"blue"},act:{label:"",color:"green"},invoice:{label:"",color:"purple"},specification:{label:"",color:"orange"},other:{label:"",color:"gray"}},y={draft:{label:"",color:"gray"},sent:{label:"",color:"blue"},signed:{label:"",color:"green"},rejected:{label:"",color:"red"}},w=_=>(g[_]||g.other).color,N=_=>(y[_]||y.draft).color,k=_=>_?`${(_/(1024*1024)).toFixed(2)} `:"-",S=async()=>{if(s?.id){if(!h.name.trim()){o("  ");return}try{p(!0),(await fe.post(`/admin/api/projects/${s.id}/documents`,{type:h.type,name:h.name.trim(),number:h.number.trim()||null,description:h.description.trim()||null})).data.success&&(u(!1),m({type:"contract",name:"",number:"",description:""}),v(),o(null))}catch(_){console.error("Error creating document:",_),o("  : "+(_.response?.data?.message||_.message))}finally{p(!1)}}};return a?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Pt,{className:"w-8 h-8 text-blue-500 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:" "}),e.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-4 py-2 bg-amber-500 text-white rounded-lg hover:bg-amber-600 transition-colors",children:[e.jsx(We,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]})]}),i&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:e.jsx("p",{className:"text-red-600 dark:text-red-400",children:i})}),t.length>0?e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900/50 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:t.map(_=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-900/30 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-${w(_.type)}-100 text-${w(_.type)}-700 dark:bg-${w(_.type)}-900/30 dark:text-${w(_.type)}-400`,children:g[_.type]?.label||_.type})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:_.name})]}),_.description&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:_.description})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:_.number||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-${N(_.status)}-100 text-${N(_.status)}-700 dark:bg-${N(_.status)}-900/30 dark:text-${N(_.status)}-400`,children:y[_.status]?.label||_.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:_.date?new Date(_.date).toLocaleDateString("ru-RU"):new Date(_.created_at).toLocaleDateString("ru-RU")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:k(_.file_size)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[_.file_path&&e.jsx("button",{className:"p-1.5 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors",title:"",children:e.jsx(Tt,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1.5 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded transition-colors",title:"",children:e.jsx(Vt,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1.5 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"",children:e.jsx(tt,{className:"w-4 h-4"})})]})})]},_.id))})]})})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(Ue,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"  "}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"   "}),e.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-4 py-2 bg-amber-500 text-white rounded-lg hover:bg-amber-600 transition-colors",children:[e.jsx(jn,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-lg w-full p-6 shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:" "}),e.jsx("button",{onClick:()=>u(!1),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),i&&e.jsx("div",{className:"mb-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:e.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:i})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"  *"}),e.jsxs("select",{value:h.type,onChange:_=>m({...h,type:_.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:[e.jsx("option",{value:"contract",children:""}),e.jsx("option",{value:"act",children:""}),e.jsx("option",{value:"invoice",children:""}),e.jsx("option",{value:"specification",children:""}),e.jsx("option",{value:"other",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"  *"}),e.jsx("input",{type:"text",value:h.name,onChange:_=>m({...h,name:_.target.value}),placeholder:" 123  01.12.2025",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-amber-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:" "}),e.jsx("input",{type:"text",value:h.number,onChange:_=>m({...h,number:_.target.value}),placeholder:"123",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-amber-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsx("textarea",{value:h.description,onChange:_=>m({...h,description:_.target.value}),placeholder:"   ",rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-amber-500 focus:border-transparent resize-none"})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3 border border-blue-200 dark:border-blue-800",children:e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[e.jsx("strong",{children:":"}),"        .      ."]})})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-6",children:[e.jsx("button",{onClick:S,disabled:f,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-amber-500 text-white rounded-lg hover:bg-amber-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:f?e.jsxs(e.Fragment,{children:[e.jsx(Pt,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(We,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]})}),e.jsx("button",{onClick:()=>{u(!1),o(null)},disabled:f,className:"px-4 py-2.5 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors disabled:opacity-50",children:""})]})]})})]})},DY=()=>{const{project:s}=Ko(),[t,r]=j.useState([]),[a,n]=j.useState({total_amount:0,paid_amount:0,pending_amount:0}),[i,o]=j.useState(null),[c,u]=j.useState(0),[h,m]=j.useState(!0),[f,p]=j.useState(null),[v,g]=j.useState(!1),[y,w]=j.useState({type:"PREPAYMENT",amount:"",due_date:"",description:""}),[N,k]=j.useState(!1);j.useEffect(()=>{s?.id&&(S(),_())},[s?.id]);const S=async()=>{if(s?.id)try{m(!0);const A=await fe.get(`/admin/api/projects/${s.id}/payments`);A.data.success&&(r(A.data.payments||[]),n(A.data.summary||{total_amount:0,paid_amount:0,pending_amount:0})),p(null)}catch(A){console.error("Error loading payments:",A),p("  ")}finally{m(!1)}},_=async()=>{if(s?.id)try{const A=await fe.get(`/admin/hosting/api/project/${s.id}/hosting-costs`);A.data.success&&(o(A.data.finance||null),u(A.data.servers_count||0))}catch(A){console.error("Error loading hosting costs:",A)}},T=async()=>{if(s?.id){if(!y.amount||parseFloat(y.amount)<=0){p("   ");return}try{k(!0),(await fe.post(`/admin/api/projects/${s.id}/payments`,{type:y.type,amount:parseFloat(y.amount),due_date:y.due_date||null,description:y.description||null})).data.success&&(g(!1),w({type:"PREPAYMENT",amount:"",due_date:"",description:""}),S())}catch(A){console.error("Error creating payment:",A),p("  : "+(A.response?.data?.message||A.message))}finally{k(!1)}}},E=async A=>{try{const X=new Date().toISOString().split("T")[0];(await fe.patch(`/admin/api/payments/${A}`,{status:"PAID",paid_at:X})).data.success&&S()}catch(X){console.error("Error updating payment:",X),p("  ")}},z={PREPAYMENT:"",MILESTONE:"",FINAL:"",ADDITIONAL:""},O={PLANNED:{label:"",color:"gray",icon:Ve},PENDING:{label:"",color:"yellow",icon:Ve},PAID:{label:"",color:"green",icon:ut},OVERDUE:{label:"",color:"red",icon:Da}},C=A=>O[A]||O.PLANNED;return h?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Pt,{className:"w-8 h-8 text-blue-500 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:" "}),e.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-2 px-4 py-2 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition-colors",children:[e.jsx(We,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]})]}),f&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:e.jsx("p",{className:"text-red-600 dark:text-red-400",children:f})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg p-6 border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-3 bg-blue-500 rounded-lg",children:e.jsx(Qe,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:[a.total_amount.toLocaleString("ru-RU")," "]})]})]})}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-lg p-6 border border-green-200 dark:border-green-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-3 bg-green-500 rounded-lg",children:e.jsx(xt,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:""}),e.jsxs("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:[a.paid_amount.toLocaleString("ru-RU")," "]})]})]}),e.jsx("div",{className:"w-full bg-green-200 dark:bg-green-900/50 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all",style:{width:`${a.total_amount>0?a.paid_amount/a.total_amount*100:0}%`}})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 rounded-lg p-6 border border-red-200 dark:border-red-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-3 bg-red-500 rounded-lg",children:e.jsx(Da,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:""}),e.jsxs("p",{className:"text-2xl font-bold text-red-900 dark:text-red-100",children:[a.pending_amount.toLocaleString("ru-RU")," "]})]})]}),e.jsx("div",{className:"w-full bg-red-200 dark:bg-red-900/50 rounded-full h-2",children:e.jsx("div",{className:"bg-red-500 h-2 rounded-full transition-all",style:{width:`${a.total_amount>0?a.pending_amount/a.total_amount*100:0}%`}})})]})]}),i&&c>0&&e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-lg p-6 border border-purple-200 dark:border-purple-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-purple-500 rounded-lg",children:e.jsx(bn,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-purple-600 dark:text-purple-400",children:"  "}),e.jsxs("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:[i.monthly_cost.toLocaleString("ru-RU")," /"]})]})]}),e.jsxs("span",{className:"px-3 py-1 bg-purple-200 dark:bg-purple-900/50 text-purple-700 dark:text-purple-300 rounded-full text-sm font-medium",children:[c," ",c===1?"":c<5?"":""]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-purple-200 dark:border-purple-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400",children:""}),e.jsxs("p",{className:"text-lg font-semibold text-purple-900 dark:text-purple-100",children:[i.total_cost_price.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400",children:" "}),e.jsxs("p",{className:"text-lg font-semibold text-purple-900 dark:text-purple-100",children:[i.total_client_price.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400",children:""}),e.jsxs("p",{className:"text-lg font-semibold text-purple-900 dark:text-purple-100",children:[i.total_service_fee.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:""}),e.jsxs("p",{className:`text-lg font-bold ${i.total_profit>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[i.total_profit>=0?"+":"",i.total_profit.toLocaleString("ru-RU")," "]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:" "})}),t.length>0?e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:t.map(A=>{const X=C(A.status),I=X.icon;return e.jsx("div",{className:"px-6 py-4 hover:bg-gray-50 dark:hover:bg-gray-900/30 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:`p-2 bg-${X.color}-100 dark:bg-${X.color}-900/20 rounded-lg`,children:e.jsx(I,{className:`w-5 h-5 text-${X.color}-600 dark:text-${X.color}-400`})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:z[A.type]||A.type}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium bg-${X.color}-100 text-${X.color}-700 dark:bg-${X.color}-900/30 dark:text-${X.color}-400`,children:X.label})]}),A.description&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:A.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400",children:[A.due_date&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(wt,{className:"w-3 h-3"}),e.jsxs("span",{children:[": ",new Date(A.due_date).toLocaleDateString("ru-RU")]})]}),A.paid_at&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ut,{className:"w-3 h-3"}),e.jsxs("span",{children:[": ",new Date(A.paid_at).toLocaleDateString("ru-RU")]})]})]})]})]}),e.jsxs("div",{className:"text-right flex items-center gap-3",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[A.amount.toLocaleString("ru-RU")," "]})}),A.status!=="PAID"&&e.jsx("button",{onClick:()=>E(A.id),className:"px-3 py-1.5 text-sm bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors whitespace-nowrap",children:""})]})]})},A.id)})}):e.jsx("div",{className:"px-6 py-12 text-center",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"      "})})]}),v&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-lg w-full p-6 shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:" "}),e.jsx("button",{onClick:()=>g(!1),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:" "}),e.jsxs("select",{value:y.type,onChange:A=>w({...y,type:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",children:[e.jsx("option",{value:"PREPAYMENT",children:""}),e.jsx("option",{value:"MILESTONE",children:""}),e.jsx("option",{value:"FINAL",children:""}),e.jsx("option",{value:"ADDITIONAL",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:" () *"}),e.jsx("input",{type:"number",value:y.amount,onChange:A=>w({...y,amount:A.target.value}),placeholder:" ",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:" "}),e.jsx("input",{type:"date",value:y.due_date,onChange:A=>w({...y,due_date:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsx("textarea",{value:y.description,onChange:A=>w({...y,description:A.target.value}),placeholder:"   ",rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent resize-none"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-6",children:[e.jsx("button",{onClick:T,disabled:N,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:N?e.jsxs(e.Fragment,{children:[e.jsx(Pt,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(We,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]})}),e.jsx("button",{onClick:()=>g(!1),disabled:N,className:"px-4 py-2.5 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors disabled:opacity-50",children:""})]})]})})]})},RY=()=>{const{project:s}=Ko(),[t,r]=j.useState([]),[a,n]=j.useState(null),[i,o]=j.useState(!0),[c,u]=j.useState(null),[h,m]=j.useState(null),[f,p]=j.useState(!1),[v,g]=j.useState([]),[y,w]=j.useState(null);j.useEffect(()=>{s?.id&&(N(),k())},[s?.id]);const N=async()=>{if(s?.id)try{o(!0);const C=await fe.get(`/admin/hosting/api/servers?project_id=${s.id}`);C.data.success&&r(C.data.servers||[]),u(null)}catch(C){console.error("Error loading hosting:",C),u("    ")}finally{o(!1)}},k=async()=>{if(s?.id)try{const C=await fe.get(`/admin/hosting/api/project/${s.id}/hosting-costs`);C.data.success&&n(C.data.finance||null)}catch(C){console.error("Error loading hosting finance:",C)}},S=(C,A)=>{navigator.clipboard.writeText(C),m(A),setTimeout(()=>m(null),2e3)},_=async()=>{try{const C=await fe.get("/admin/hosting/api/servers");if(C.data.success){const A=t.map(I=>I.id),X=(C.data.servers||[]).filter(I=>!A.includes(I.id));g(X)}}catch(C){console.error("Error loading available servers:",C),u("   ")}},T=()=>{_(),p(!0)},E=async()=>{if(!(!y||!s?.id))try{(await fe.patch(`/admin/hosting/api/server/${y}/link-project`,{project_id:s.id})).data.success&&(p(!1),w(null),u(null),N(),k())}catch(C){console.error("Error linking server:",C),u("  : "+(C.response?.data?.detail||C.message))}},z={active:{label:"",color:"green"},suspended:{label:"",color:"yellow"},expired:{label:"",color:"red"},pending:{label:"",color:"blue"}},O=C=>z[C]||z.pending;return i?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Pt,{className:"w-8 h-8 text-blue-500 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:" "}),e.jsxs("button",{onClick:T,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[e.jsx(bn,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]})]}),c&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:e.jsx("p",{className:"text-red-600 dark:text-red-400",children:c})}),a&&t.length>0&&e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-indigo-100 dark:from-purple-900/20 dark:to-indigo-900/20 rounded-xl p-6 border border-purple-200 dark:border-purple-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-purple-500 rounded-lg",children:e.jsx(Qe,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-purple-900 dark:text-purple-100",children:" "}),e.jsxs("p",{className:"text-sm text-purple-600 dark:text-purple-400",children:[t.length," ",t.length===1?"":t.length<5?"":""," "]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-purple-600 dark:text-purple-400",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:[a.monthly_cost.toLocaleString("ru-RU")," "]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-purple-200 dark:border-purple-700",children:[e.jsxs("div",{className:"bg-white/50 dark:bg-gray-800/50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:""}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[a.total_cost_price.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"bg-white/50 dark:bg-gray-800/50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:" "}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[a.total_client_price.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"bg-white/50 dark:bg-gray-800/50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:""}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[a.total_service_fee.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"bg-white/50 dark:bg-gray-800/50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mb-1",children:""}),e.jsxs("p",{className:`text-lg font-bold ${a.total_profit>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[a.total_profit>=0?"+":"",a.total_profit.toLocaleString("ru-RU")," "]})]})]}),t.some(C=>{const A=new Date(C.next_payment_date),X=new Date;return Math.ceil((A.getTime()-X.getTime())/(1e3*60*60*24))<=7})&&e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-yellow-600 dark:text-yellow-400 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-3",children:[e.jsx(Ge,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"      7 "})]})]}),t.length>0?e.jsx("div",{className:"space-y-4",children:t.map(C=>{const A=O(C.status);return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-500 rounded-lg",children:e.jsx(bn,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:C.server_name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:C.configuration||" "})]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium bg-${A.color}-100 text-${A.color}-700 dark:bg-${A.color}-900/30 dark:text-${A.color}-400`,children:A.label})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[C.ip_address&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"IP "}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm font-mono text-gray-900 dark:text-white",children:C.ip_address}),e.jsx("button",{onClick:()=>S(C.ip_address,`ip-${C.id}`),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors",title:" IP",children:h===`ip-${C.id}`?e.jsx(ut,{className:"w-3 h-3 text-green-600"}):e.jsx(er,{className:"w-3 h-3 text-gray-600"})})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:""}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:C.client_name})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:" "}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(C.next_payment_date).toLocaleDateString("ru-RU")})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:""}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:[C.cost_price.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:" "}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:[C.client_price.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:""}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:[C.service_fee.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:""}),e.jsxs("p",{className:"text-sm font-semibold text-green-600 dark:text-green-400",children:[C.profit_amount.toLocaleString("ru-RU"),"  (",C.profit_percent.toFixed(1),"%)"]})]})]}),C.notes&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:""}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:C.notes})]})]},C.id)})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(bn,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"  "}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"      "}),e.jsxs("button",{onClick:T,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[e.jsx(bn,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:" "}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:['      "',s.title,'"']})]}),e.jsx("div",{className:"p-6 space-y-4",children:v.length>0?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:" "}),e.jsxs("select",{value:y||"",onChange:C=>w(Number(C.target.value)),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:" ..."}),v.map(C=>e.jsxs("option",{value:C.id,children:[C.server_name," - ",C.client_name," (",C.client_price.toLocaleString("ru-RU")," )"]},C.id))]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"    "}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-2",children:'     ""'})]})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex items-center justify-end gap-3",children:[e.jsx("button",{onClick:()=>{p(!1),w(null)},className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:""}),e.jsx("button",{onClick:E,disabled:!y,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:" "})]})]})})]})},zs={getTasks:async s=>{const t=new URLSearchParams;s?.status&&t.append("status",s.status),s?.assigned_to_id&&t.append("assigned_to_id",s.assigned_to_id.toString()),s?.created_by_id&&t.append("created_by_id",s.created_by_id.toString()),s?.priority&&t.append("priority",s.priority),s?.type&&t.append("type",s.type),s?.project_id&&t.append("project_id",s.project_id.toString());const r=t.toString(),a=r?`/admin/api/tasks/?${r}`:"/admin/api/tasks/";return(await fe.get(a)).data},getMyTasks:async()=>(await fe.get("/admin/api/tasks/my-tasks")).data,getEmployeeTasks:async s=>(await fe.get(`/admin/api/tasks/employee/${s}`)).data,getTask:async s=>(await fe.get(`/admin/api/tasks/${s}`)).data,createTask:async s=>(await fe.post("/admin/api/tasks/",s)).data,updateTask:async(s,t)=>(await fe.put(`/admin/api/tasks/${s}`,t)).data,updateTaskStatus:async(s,t)=>(await fe.put(`/admin/api/tasks/${s}/status`,{status:t})).data,reassignTask:async(s,t)=>(await fe.put(`/admin/api/tasks/${s}/reassign`,{assigned_to_id:t})).data,deleteTask:async s=>(await fe.delete(`/admin/api/tasks/${s}`)).data,getComments:async s=>(await fe.get(`/admin/api/tasks/${s}/comments`)).data,addComment:async(s,t,r=!1,a)=>{const n=new FormData;return n.append("comment",t),n.append("is_internal",r.toString()),a&&a.forEach(o=>{n.append("files",o)}),(await fe.post(`/admin/api/tasks/${s}/comments`,n,{headers:{"Content-Type":"multipart/form-data"},timeout:6e4})).data},markCommentRead:async(s,t)=>(await fe.post(`/admin/api/tasks/${s}/comments/${t}/mark_read`)).data,markAllCommentsRead:async s=>(await fe.post(`/admin/api/tasks/${s}/mark_all_comments_read`)).data,getUnreadCommentsCount:async s=>(await fe.get(`/admin/api/tasks/${s}/unread_comments_count`)).data,getStats:async()=>(await fe.get("/admin/api/tasks/stats/dashboard")).data,getExecutors:async()=>(await fe.get("/admin/api/users/executors")).data.executors||[],getProjects:async()=>(await fe.get("/admin/api/projects/")).data.projects||[],getProjectTasks:async s=>(await fe.get(`/admin/api/projects/${s}/tasks`)).data,updateProgress:async(s,t)=>(await fe.post(`/admin/api/tasks/${s}/progress`,{progress:t})).data,startTimer:async s=>(await fe.post(`/admin/tasks/${s}/timer/start`)).data,stopTimer:async s=>(await fe.post(`/admin/tasks/${s}/timer/stop`)).data,markCompleted:async s=>(await fe.post(`/admin/api/tasks/${s}/mark-completed`)).data,archiveTask:async s=>(await fe.post(`/admin/api/tasks/${s}/archive`)).data,getArchivedTasks:async s=>{const t=new URLSearchParams;return s?.employee_id&&t.append("employee_id",s.employee_id.toString()),s?.date_from&&t.append("date_from",s.date_from),s?.date_to&&t.append("date_to",s.date_to),(await fe.get(`/admin/api/tasks/archive/list?${t}`)).data},uploadFiles:async(s,t)=>{const r=new FormData;return t.forEach(n=>{r.append("files",n)}),(await fe.post(`/admin/api/tasks/${s}/upload-image`,r,{headers:{"Content-Type":"multipart/form-data"}})).data}},By={bug:"bg-red-100 text-red-800 border-red-300",feature:"bg-blue-100 text-blue-800 border-blue-300",urgent:"bg-orange-100 text-orange-800 border-orange-300",design:"bg-purple-100 text-purple-800 border-purple-300",backend:"bg-green-100 text-green-800 border-green-300",frontend:"bg-cyan-100 text-cyan-800 border-cyan-300",mobile:"bg-pink-100 text-pink-800 border-pink-300",security:"bg-yellow-100 text-yellow-800 border-yellow-300",testing:"bg-indigo-100 text-indigo-800 border-indigo-300",devops:"bg-teal-100 text-teal-800 border-teal-300",api:"bg-lime-100 text-lime-800 border-lime-300",database:"bg-amber-100 text-amber-800 border-amber-300"},J7=s=>{const t=s.toLowerCase();if(By[t])return By[t];for(const[r,a]of Object.entries(By))if(t.includes(r)||r.includes(t))return a;return"bg-gray-100 text-gray-800 border-gray-300"},f1=({tags:s,onRemove:t,editable:r=!1,size:a="sm",className:n=""})=>{if(!s||s.length===0)return null;const i={sm:"text-xs px-2 py-0.5",md:"text-sm px-3 py-1"};return e.jsx("div",{className:`flex flex-wrap gap-1.5 ${n}`,children:s.map((o,c)=>e.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full border font-medium ${J7(o)} ${i[a]} transition-all`,children:[e.jsxs("span",{children:["#",o]}),r&&t&&e.jsx("button",{onClick:u=>{u.stopPropagation(),t(o)},className:"hover:bg-black/10 rounded-full p-0.5 transition-colors",title:" ",children:e.jsx(De,{className:"w-3 h-3"})})]},c))})},eD=({value:s,onChange:t,suggestions:r=[]})=>{const[a,n]=j.useState(""),[i,o]=j.useState(!1),c=m=>{const f=m.trim().toLowerCase().replace(/^#/,"");f&&!s.includes(f)&&t([...s,f]),n(""),o(!1)},u=m=>{m.key==="Enter"||m.key===","?(m.preventDefault(),c(a)):m.key==="Backspace"&&!a&&s.length>0&&t(s.slice(0,-1))},h=r.filter(m=>!s.includes(m)&&m.toLowerCase().includes(a.toLowerCase()));return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex flex-wrap gap-1.5 p-2 border border-gray-300 rounded-lg min-h-[42px] focus-within:ring-2 focus-within:ring-blue-500 focus-within:border-blue-500",children:[e.jsx(f1,{tags:s,editable:!0,onRemove:m=>t(s.filter(f=>f!==m))}),e.jsx("input",{type:"text",value:a,onChange:m=>{n(m.target.value),o(!0)},onKeyDown:u,onFocus:()=>o(!0),onBlur:()=>setTimeout(()=>o(!1),200),placeholder:s.length===0?"  (Enter  )...":"",className:"flex-1 min-w-[120px] outline-none text-sm"})]}),i&&h.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-40 overflow-y-auto",children:h.map((m,f)=>e.jsx("button",{onClick:()=>c(m),className:"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm flex items-center gap-2 transition-colors",children:e.jsxs("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${J7(m)}`,children:["#",m]})},f))})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"  Enter     "})]})},MY=({task:s,onView:t,onEdit:r,onDelete:a,onStatusChange:n,onDragStart:i})=>{const[o,c]=j.useState(!!s.timer_started_at),[u,h]=j.useState(0),[m,f]=j.useState(!1),p=j.useRef(0),v=()=>{if(s.color&&s.color!=="normal")return{red:"bg-gradient-to-br from-red-100 to-red-200 border-red-600",yellow:"bg-gradient-to-br from-yellow-100 to-yellow-200 border-yellow-600",green:"bg-gradient-to-br from-green-100 to-green-200 border-green-600"}[s.color]||"";const C={urgent:"bg-gradient-to-br from-red-100 to-red-200 border-red-600",high:"bg-gradient-to-br from-orange-100 to-orange-200 border-orange-500",normal:"bg-gradient-to-br from-blue-100 to-blue-200 border-blue-500",low:"bg-gradient-to-br from-gray-100 to-gray-200 border-gray-400"};return C[s.priority]||C.normal},g=()=>{switch(s.priority){case"urgent":return"bg-red-200 text-red-900";case"high":return"bg-orange-200 text-orange-900";case"normal":return"bg-blue-200 text-blue-900";case"low":return"bg-gray-200 text-gray-900";default:return"bg-gray-200 text-gray-900"}},y=()=>{switch(s.priority){case"urgent":return"";case"high":return"";case"normal":return"";case"low":return"";default:return s.priority.toUpperCase()}},w=()=>{switch(s.status){case"pending":return"bg-blue-200 text-blue-900";case"in_progress":return"bg-yellow-200 text-yellow-900";case"completed":return"bg-green-200 text-green-900";default:return"bg-gray-200 text-gray-900"}},N=()=>{switch(s.status){case"pending":return"";case"in_progress":return" ";case"completed":return"";default:return s.status.toUpperCase()}},k=C=>{if(!C)return"0 0";const A=Math.floor(C/3600),X=Math.floor(C%3600/60);return`${A} ${X}`},S=C=>C?new Date(C).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}):null,_=async C=>{C.stopPropagation();try{o?await zs.stopTimer(s.id):await zs.startTimer(s.id),c(!o)}catch(A){console.error("Error toggling timer:",A)}},T=(C,A)=>{C.stopPropagation(),n(A)},E=C=>{p.current=Date.now(),f(!0),i&&i(C)},z=()=>{setTimeout(()=>{f(!1)},100)},O=C=>{Date.now()-p.current>200&&!m&&t()};return e.jsxs("div",{draggable:!0,onDragStart:E,onDragEnd:z,className:`group rounded-xl shadow-md hover:shadow-xl transition-all duration-300 p-4 cursor-move relative border-l-4 hover:-translate-y-0.5 ${m?"opacity-50":""} ${v()}`,onClick:O,children:[e.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:C=>{C.stopPropagation(),t()},className:"p-1.5 bg-white/90 hover:bg-blue-50 rounded-md transition-all shadow-sm",title:"",children:e.jsx(Vt,{className:"w-3.5 h-3.5 text-blue-600"})}),e.jsx("button",{onClick:C=>{C.stopPropagation(),a()},className:"p-1.5 bg-white/90 hover:bg-orange-50 rounded-md transition-all shadow-sm",title:" ",children:e.jsx(Cl,{className:"w-3.5 h-3.5 text-orange-600"})})]}),e.jsxs("h4",{className:"font-semibold text-gray-900 mb-2 pr-16 text-[0.95rem] leading-tight",children:[s.priority==="urgent"&&e.jsx(Ge,{className:"w-4 h-4 inline-block mr-1.5 text-red-600 animate-pulse"}),s.title]}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2 leading-relaxed",children:s.description}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"mb-3",children:e.jsx(f1,{tags:s.tags,size:"sm"})}),e.jsxs("div",{className:"flex gap-2 mb-3 flex-wrap",children:[e.jsx("span",{className:`text-[0.7rem] font-bold px-2 py-1 rounded-md uppercase ${g()}`,children:y()}),e.jsx("span",{className:`text-[0.7rem] font-bold px-2 py-1 rounded-md uppercase ${w()}`,children:N()}),s.is_overdue&&e.jsx("span",{className:"text-[0.7rem] font-bold px-2 py-1 rounded-md uppercase bg-red-200 text-red-900",children:""})]}),s.deadline&&e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-600 mb-3",children:[e.jsx(wt,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:S(s.deadline)})]}),s.status!=="completed"&&e.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[e.jsxs("div",{className:"flex-1 flex items-center gap-2 cursor-pointer hover:scale-105 transition-transform",children:[e.jsx("div",{className:"flex-1 h-2 bg-indigo-100 rounded-full overflow-hidden relative",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-indigo-600 rounded-full transition-all duration-500",style:{width:`${s.progress||0}%`}})}),e.jsxs("span",{className:"text-xs font-bold text-indigo-600 min-w-[40px] text-right",children:[s.progress||0,"%"]})]}),s.time_spent_seconds!==void 0&&s.time_spent_seconds>0&&e.jsx("div",{className:"flex items-center gap-1.5",children:e.jsxs("div",{onClick:_,className:`flex items-center gap-1.5 px-2.5 py-1 rounded-md text-xs font-bold cursor-pointer transition-all ${o?"bg-green-100 text-green-700 animate-pulse":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[o?e.jsx(am,{className:"w-3 h-3"}):e.jsx(ji,{className:"w-3 h-3"}),e.jsx("span",{children:k(s.time_spent_seconds)})]})}),s.status==="pending"&&e.jsxs("button",{onClick:C=>T(C,"in_progress"),className:"px-3 py-1 bg-yellow-100 text-yellow-700 hover:bg-yellow-200 rounded-md text-xs font-bold transition-all flex items-center gap-1",title:"  ",children:[e.jsx(ji,{className:"w-3 h-3"}),e.jsx("span",{children:""})]}),s.status==="in_progress"&&e.jsxs("button",{onClick:C=>T(C,"completed"),className:"px-3 py-1 bg-green-100 text-green-700 hover:bg-green-200 rounded-md text-xs font-bold transition-all flex items-center gap-1",title:"",children:[e.jsx(ut,{className:"w-3 h-3"}),e.jsx("span",{children:""})]})]})]})},OY=({tasks:s,onView:t,onEdit:r,onDelete:a})=>{const n={pending:Ge,in_progress:Ve,completed:Ds},i={pending:"blue",in_progress:"yellow",completed:"green"},o={pending:"",in_progress:" ",completed:""},c={low:"gray",normal:"blue",high:"orange",urgent:"red"},u={low:"",normal:"",high:"",urgent:""},h=g=>n[g]||Ge,m=g=>i[g]||"gray",f=g=>o[g]||g,p=g=>c[g]||"gray",v=g=>u[g]||g;return e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900/50 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(Ds,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mb-3"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"  "})]})})}):s.map(g=>{const y=h(g.status),w=m(g.status),N=p(g.priority);return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-900/30 transition-colors cursor-pointer",onClick:()=>t(g),children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[g.type==="REVISION"?e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 rounded-md text-xs font-medium",children:[e.jsx(Cn,{className:"w-3 h-3"}),e.jsx("span",{children:""})]}):e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-md text-xs font-medium",children:[e.jsx(Ds,{className:"w-3 h-3"}),e.jsx("span",{children:""})]}),g.created_from_chat&&e.jsx("span",{className:"px-1.5 py-0.5 bg-sky-100 dark:bg-sky-900/30 text-sky-700 dark:text-sky-400 rounded text-xs",children:""})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white line-clamp-1",children:g.title}),g.description&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 line-clamp-1 mt-0.5",children:g.description})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:g.project?e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:g.project.title}):e.jsx("span",{className:"text-sm text-gray-400",children:""})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md bg-${w}-100 dark:bg-${w}-900/30 text-${w}-700 dark:text-${w}-400`,children:[e.jsx(y,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"text-xs font-medium",children:f(g.status)})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-md text-xs font-medium bg-${N}-100 dark:bg-${N}-900/30 text-${N}-700 dark:text-${N}-400`,children:v(g.priority)})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:g.assigned_to?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white text-xs font-bold",children:(g.assigned_to.first_name||g.assigned_to.username).charAt(0).toUpperCase()}),e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:g.assigned_to.first_name&&g.assigned_to.last_name?`${g.assigned_to.first_name} ${g.assigned_to.last_name}`:g.assigned_to.username})})]}):e.jsx("span",{className:"text-sm text-gray-400",children:" "})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:g.deadline?e.jsxs("div",{className:"flex items-center gap-1.5 text-sm",children:[e.jsx(wt,{className:"w-3.5 h-3.5 text-gray-400"}),e.jsx("span",{className:g.is_overdue?"text-red-600 dark:text-red-400 font-medium":"text-gray-700 dark:text-gray-300",children:new Date(g.deadline).toLocaleDateString("ru-RU")})]}):e.jsx("span",{className:"text-sm text-gray-400",children:""})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-1",onClick:k=>k.stopPropagation(),children:[e.jsx("button",{onClick:()=>t(g),className:"p-1.5 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded transition-colors",title:"",children:e.jsx(Vt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>r(g),className:"p-1.5 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",title:"",children:e.jsx(sr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>a(g.id),className:"p-1.5 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 rounded transition-colors",title:"",children:e.jsx(tt,{className:"w-4 h-4"})})]})})]},g.id)})})]})})})},LY=({isOpen:s,onClose:t,onSuccess:r,employees:a,projectId:n})=>{const[i,o]=j.useState(!1),[c,u]=j.useState({}),[h,m]=j.useState({title:"",description:"",assigned_to_id:0,priority:"normal",deadline:"",estimated_hours:void 0,color:"normal",tags:[],created_by_admin:!0,project_id:n}),f=["bug","feature","urgent","design","backend","frontend","mobile","security","testing","devops","api","database"];j.useEffect(()=>{if(s){const g=a.length>0?a[0].id:0;m({title:"",description:"",assigned_to_id:g,priority:"normal",deadline:"",estimated_hours:void 0,color:"normal",tags:[],created_by_admin:!0,project_id:n}),u({}),a.length===0&&u({assigned_to:"  .    ."})}},[s,a,n]),j.useEffect(()=>{if(s){const g=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${g}px`,document.body.style.width="100%",document.body.style.overflow="hidden",setTimeout(()=>{const y=document.querySelector(".task-create-modal-content");y&&(y.scrollTop=0)},0),()=>{const y=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(y||"0")*-1)}}else{const g=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(g||"0")*-1)}},[s]);const p=async g=>{g.preventDefault();const y={};if(h.title.trim()||(y.title="  "),(!h.assigned_to_id||h.assigned_to_id===0)&&(y.assigned_to=" "),Object.keys(y).length>0){u(y);const w=document.querySelector(".task-create-modal-content");w&&w.scrollTo({top:0,behavior:"smooth"});return}try{o(!0),u({});const w=await zs.createTask(h);w.success?(r(),t()):alert(`: ${w.message||" "}`)}catch(w){console.error("   :",w),alert(`  : ${w.response?.data?.error||w.message||" "}`)}finally{o(!1)}},v=(g,y)=>{m(w=>({...w,[g]:y}))};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"task-create-modal-content bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(We,{className:"w-6 h-6"}),e.jsx("h3",{className:"text-xl font-bold",children:" "})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:p,className:"p-6 space-y-4",children:[Object.keys(c).length>0&&e.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm font-semibold text-red-800",children:",    :"}),e.jsxs("ul",{className:"mt-2 text-sm text-red-700 list-disc list-inside",children:[c.title&&e.jsx("li",{children:c.title}),c.assigned_to&&e.jsx("li",{children:c.assigned_to})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:h.title,onChange:g=>{v("title",g.target.value),c.title&&u({...c,title:void 0})},className:`w-full px-4 py-3 border-2 rounded-lg outline-none transition-all ${c.title?"border-red-500 focus:border-red-500 focus:ring-2 focus:ring-red-200":"border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200"}`,placeholder:"  ",required:!0}),c.title&&e.jsx("p",{className:"mt-1 text-sm text-red-600 font-medium",children:c.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:h.description,onChange:g=>v("description",g.target.value),rows:4,className:"w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all resize-none",placeholder:"  "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx(eD,{value:h.tags||[],onChange:g=>v("tags",g),suggestions:f})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:h.assigned_to_id,onChange:g=>{v("assigned_to_id",parseInt(g.target.value)),c.assigned_to&&u({...c,assigned_to:void 0})},className:`w-full px-4 py-3 border-2 rounded-lg outline-none transition-all ${c.assigned_to?"border-red-500 focus:border-red-500 focus:ring-2 focus:ring-red-200":"border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200"}`,required:!0,children:[e.jsx("option",{value:0,children:" "}),a.map(g=>e.jsxs("option",{value:g.id,children:[g.name," (@",g.username,")"]},g.id))]}),c.assigned_to&&e.jsx("p",{className:"mt-1 text-sm text-red-600 font-medium",children:c.assigned_to})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:h.priority,onChange:g=>v("priority",g.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all",children:[e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"normal",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"urgent",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsxs("select",{value:h.color,onChange:g=>v("color",g.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all",children:[e.jsx("option",{value:"normal",children:" "}),e.jsx("option",{value:"red",children:" "}),e.jsx("option",{value:"yellow",children:" "}),e.jsx("option",{value:"green",children:" "})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"datetime-local",value:h.deadline,onChange:g=>v("deadline",g.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  ()"}),e.jsx("input",{type:"number",value:h.estimated_hours||"",onChange:g=>v("estimated_hours",g.target.value?parseFloat(g.target.value):void 0),min:"0",step:"0.5",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all",placeholder:"0"})]})]}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("span",{className:"font-semibold",children:" :"}),"      ."]})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:i,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:i?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(We,{className:"w-5 h-5"})," "]})}),e.jsx("button",{type:"button",onClick:t,disabled:i,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold disabled:opacity-50",children:""})]})]})]})}):null},PY=({isOpen:s,onClose:t,onSuccess:r,task:a,employees:n})=>{const[i,o]=j.useState(!1),[c,u]=j.useState({title:a.title,description:a.description,status:a.status,priority:a.priority,deadline:a.deadline||"",estimated_hours:a.estimated_hours,actual_hours:a.actual_hours,assigned_to_id:a.assigned_to_id,color:a.color||"normal",tags:a.tags||[]}),[h,m]=j.useState(a.deploy_url||""),f=["bug","feature","urgent","design","backend","frontend","mobile","security","testing","devops","api","database"];j.useEffect(()=>{s&&(u({title:a.title,description:a.description,status:a.status,priority:a.priority,deadline:a.deadline?a.deadline.split(".")[0]:"",estimated_hours:a.estimated_hours,actual_hours:a.actual_hours,assigned_to_id:a.assigned_to_id,color:a.color||"normal",tags:a.tags||[]}),m(a.deploy_url||""))},[s,a]),j.useEffect(()=>{if(s){const g=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${g}px`,document.body.style.width="100%",document.body.style.overflow="hidden",()=>{const y=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(y||"0")*-1)}}else{const g=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(g||"0")*-1)}},[s]);const p=async g=>{if(g.preventDefault(),!c.title?.trim()){alert("  ");return}try{o(!0);const y={...c,deploy_url:h||void 0};(await zs.updateTask(a.id,y)).success&&r()}catch(y){console.error("Error updating task:",y),alert("  ")}finally{o(!1)}},v=(g,y)=>{u(w=>({...w,[g]:y}))};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-4 flex items-center justify-between sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Aa,{className:"w-6 h-6"}),e.jsx("h3",{className:"text-xl font-bold",children:" "})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:p,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:c.title,onChange:g=>v("title",g.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",placeholder:"  ",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:c.description,onChange:g=>v("description",g.target.value),rows:4,className:"w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all resize-none",placeholder:"  "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx(eD,{value:c.tags||[],onChange:g=>v("tags",g),suggestions:f})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:c.status,onChange:g=>v("status",g.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",children:[e.jsx("option",{value:"pending",children:""}),e.jsx("option",{value:"in_progress",children:" "}),e.jsx("option",{value:"completed",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("select",{value:c.assigned_to_id,onChange:g=>v("assigned_to_id",parseInt(g.target.value)),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",children:n.map(g=>e.jsxs("option",{value:g.id,children:[g.name," (@",g.username,")"]},g.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:c.priority,onChange:g=>v("priority",g.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",children:[e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"normal",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"urgent",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsxs("select",{value:c.color,onChange:g=>v("color",g.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",children:[e.jsx("option",{value:"normal",children:" "}),e.jsx("option",{value:"red",children:" "}),e.jsx("option",{value:"yellow",children:" "}),e.jsx("option",{value:"green",children:" "})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"datetime-local",value:c.deadline,onChange:g=>v("deadline",g.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(Gc,{className:"w-4 h-4 text-blue-500"}),"  "]}),e.jsx("input",{type:"url",value:h,onChange:g=>m(g.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",placeholder:"https://example.com/app"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"       "})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  ()"}),e.jsx("input",{type:"number",value:c.estimated_hours||"",onChange:g=>v("estimated_hours",g.target.value?parseFloat(g.target.value):void 0),min:"0",step:"0.5",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  ()"}),e.jsx("input",{type:"number",value:c.actual_hours||"",onChange:g=>v("actual_hours",g.target.value?parseFloat(g.target.value):void 0),min:"0",step:"0.5",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",placeholder:"0"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:i,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:i?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(Aa,{className:"w-5 h-5"})," "]})}),e.jsx("button",{type:"button",onClick:t,disabled:i,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold disabled:opacity-50",children:""})]})]})]})}):null},BY=({isOpen:s,onClose:t,task:r,onEdit:a,onDelete:n,onRefresh:i})=>{const[o,c]=j.useState(r),[u,h]=j.useState([]),[m,f]=j.useState(""),[p,v]=j.useState([]),[g,y]=j.useState(!1),[w,N]=j.useState(!1),[k,S]=j.useState(!!r.timer_started_at),[_,T]=j.useState(r.progress||0),[E,z]=j.useState([]),[O,C]=j.useState(r.deploy_url||""),[A,X]=j.useState(!1);j.useEffect(()=>{s&&(c(r),S(!!r.timer_started_at),T(r.progress||0),C(r.deploy_url||""),X(!1),I())},[s,r]),j.useEffect(()=>{if(s){const U=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${U}px`,document.body.style.width="100%",document.body.style.overflow="hidden",()=>{const F=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(F||"0")*-1)}}},[s]);const I=async()=>{try{const U=await zs.getComments(r.id);U.success&&h(U.comments)}catch(U){console.error("Error loading comments:",U)}},V=async()=>{try{if(k){const U=await zs.stopTimer(o.id);U.success&&(c(U.data),S(!1),i())}else{const U=await zs.startTimer(o.id);U.success&&(c(U.data),S(!0),i())}}catch(U){console.error("Error toggling timer:",U)}},R=async U=>{try{(await zs.updateProgress(o.id,U)).success&&(T(U),i())}catch(F){console.error("Error updating progress:",F)}},H=async()=>{try{const U=await zs.updateTask(o.id,{deploy_url:O});U.success&&(c(U.task),X(!1),i())}catch(U){console.error("Error updating deploy URL:",U),alert("    ")}},ee=async()=>{if(!(!m.trim()&&p.length===0))try{N(!0);const U=await zs.addComment(o.id,m,g,p);U.success?(f(""),v([]),E.forEach(F=>URL.revokeObjectURL(F)),z([]),y(!1),I(),i()):alert(": "+(U.error||"   "))}catch(U){let F="  ";U.code==="ECONNABORTED"?F="  .     .":U.response?.data?.error&&(F=U.response.data.error),alert(F)}finally{N(!1)}},se=U=>{const F=U.clipboardData?.items;if(!F)return;const Z=[];for(let q=0;q<F.length;q++){const Q=F[q];if(Q.type.indexOf("image")!==-1){const le=Q.getAsFile();if(le){const me=new Date().getTime(),G=new File([le],`screenshot-${me}.png`,{type:le.type});Z.push(G)}}}Z.length>0&&W(Z)},W=U=>{const F=[...p,...U];v(F);const Z=[];U.forEach(q=>{if(q.type.startsWith("image/")){const Q=URL.createObjectURL(q);Z.push(Q)}}),z([...E,...Z])},te=U=>{const F=p.filter((q,Q)=>Q!==U);v(F),E[U]&&URL.revokeObjectURL(E[U]);const Z=E.filter((q,Q)=>Q!==U);z(Z)};j.useEffect(()=>()=>{E.forEach(U=>URL.revokeObjectURL(U))},[E]);const J=async()=>{try{(await zs.markCompleted(o.id)).success&&(i(),t())}catch(U){console.error("Error marking completed:",U)}},K=async()=>{if(confirm(" ,     ?"))try{(await zs.archiveTask(o.id)).success&&(i(),t())}catch(U){console.error("Error archiving task:",U)}},$=U=>{if(!U)return"0 0";const F=Math.floor(U/3600),Z=Math.floor(U%3600/60);return`${F} ${Z}`},ie=U=>U?new Date(U).toLocaleString("ru-RU"):" ",ne=()=>{switch(o.priority){case"urgent":return"bg-red-100 text-red-700 border-red-300";case"high":return"bg-orange-100 text-orange-700 border-orange-300";case"normal":return"bg-blue-100 text-blue-700 border-blue-300";case"low":return"bg-gray-100 text-gray-700 border-gray-300";default:return"bg-gray-100 text-gray-700 border-gray-300"}},oe=()=>{switch(o.status){case"pending":return"bg-gradient-to-r from-blue-500 to-blue-600";case"in_progress":return"bg-gradient-to-r from-yellow-500 to-orange-500";case"completed":return"bg-gradient-to-r from-green-500 to-emerald-600";default:return"bg-gradient-to-r from-gray-500 to-gray-600"}},ce=()=>{switch(o.status){case"pending":return" ";case"in_progress":return" ";case"completed":return"";default:return o.status}};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx("div",{className:`${oe()} text-white px-8 py-6 flex-shrink-0`,children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("h3",{className:"text-2xl font-bold",children:o.title}),o.is_overdue&&e.jsxs("span",{className:"flex items-center gap-1 bg-red-500 px-3 py-1 rounded-full text-sm font-semibold animate-pulse",children:[e.jsx(Ge,{className:"w-4 h-4"}),""]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:`px-3 py-1.5 rounded-lg border text-sm font-semibold ${ne()}`,children:[o.priority==="urgent"&&"",o.priority==="high"&&"",o.priority==="normal"&&"",o.priority==="low"&&""]}),e.jsx("span",{className:"px-3 py-1.5 bg-white/20 backdrop-blur-sm rounded-lg text-sm font-semibold",children:ce()})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-6 h-6"})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"p-6 space-y-4",children:[o.description&&e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 rounded-xl p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ue,{className:"w-5 h-5 text-blue-600"}),e.jsx("h4",{className:"text-lg font-bold text-gray-900",children:""})]}),e.jsx("p",{className:"text-gray-800 text-sm whitespace-pre-wrap leading-relaxed",children:o.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl p-4 border border-indigo-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(xt,{className:"w-4 h-4 text-indigo-700"}),e.jsx("h4",{className:"font-bold text-gray-900",children:""})]}),e.jsx("div",{className:"text-center mb-3",children:e.jsxs("span",{className:`text-3xl font-bold ${_<25?"text-red-600":_<50?"text-orange-600":_<75?"text-yellow-600":_<100?"text-blue-600":"text-green-600"}`,children:[_,"%"]})}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{className:"w-full h-3 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full transition-all duration-500 ease-out",style:{width:`${_}%`,background:_<25?"linear-gradient(90deg, #ef4444, #f87171)":_<50?"linear-gradient(90deg, #f97316, #fb923c)":_<75?"linear-gradient(90deg, #eab308, #fde047)":_<100?"linear-gradient(90deg, #3b82f6, #60a5fa)":"linear-gradient(90deg, #22c55e, #4ade80)"}})}),e.jsx("input",{type:"range",min:"0",max:"100",value:_,onChange:U=>R(parseInt(U.target.value)),className:"absolute top-0 left-0 w-full h-3 appearance-none cursor-pointer bg-transparent opacity-0",disabled:o.status==="completed"})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1 text-center",children:"  "})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(lt,{className:"w-4 h-4 text-blue-700"}),e.jsx("h4",{className:"font-bold text-gray-900",children:""})]}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:o.assigned_to?.first_name||o.assigned_to?.username||" "})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ve,{className:"w-4 h-4 text-green-700"}),e.jsx("h4",{className:"font-bold text-gray-900",children:""})]}),e.jsx("p",{className:"text-xl font-bold text-gray-900 mb-2",children:$(o.time_spent_seconds)}),o.status!=="completed"&&e.jsxs("button",{onClick:V,className:`w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg font-semibold transition-all text-sm ${k?"bg-red-500 text-white hover:bg-red-600":"bg-green-500 text-white hover:bg-green-600"}`,children:[k?e.jsx(am,{className:"w-4 h-4"}):e.jsx(ji,{className:"w-4 h-4"}),k?"":""]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-gray-100 rounded-xl p-4 border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(lt,{className:"w-4 h-4 text-slate-700"}),e.jsx("h4",{className:"font-bold text-gray-900",children:""})]}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:o.created_by?.first_name||o.created_by?.username||""})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 rounded-xl p-4 border border-orange-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(wt,{className:"w-4 h-4 text-orange-700"}),e.jsx("h4",{className:"font-bold text-gray-900",children:""})]}),e.jsx("p",{className:`text-base font-semibold ${o.is_overdue?"text-red-600":"text-gray-900"}`,children:ie(o.deadline)})]}),o.tags&&o.tags.length>0&&e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-4 border border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(mi,{className:"w-4 h-4 text-purple-700"}),e.jsx("h4",{className:"font-bold text-gray-900",children:""})]}),e.jsx(f1,{tags:o.tags,size:"sm"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-cyan-50 to-blue-50 rounded-xl p-4 border border-cyan-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Gc,{className:"w-4 h-4 text-cyan-700"}),e.jsx("h4",{className:"font-bold text-gray-900",children:"  "})]}),A?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"url",value:O,onChange:U=>C(U.target.value),placeholder:"https://example.com/app",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"}),e.jsx("button",{onClick:H,className:"px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors text-sm",children:""}),e.jsx("button",{onClick:()=>{C(o.deploy_url||""),X(!1)},className:"px-4 py-2 bg-gray-200 text-gray-700 font-semibold rounded-lg hover:bg-gray-300 transition-colors text-sm",children:""})]}):e.jsx("div",{className:"flex items-center gap-2",children:o.deploy_url?e.jsxs(e.Fragment,{children:[e.jsxs("a",{href:o.deploy_url,target:"_blank",rel:"noopener noreferrer",className:"flex-1 px-3 py-2 bg-white border border-blue-300 rounded-lg text-blue-600 font-semibold hover:bg-blue-50 transition-colors flex items-center justify-center gap-2 text-sm",children:[" ",e.jsx(Gc,{className:"w-4 h-4"})]}),e.jsx("button",{onClick:()=>X(!0),className:"px-4 py-2 bg-gray-200 text-gray-700 font-semibold rounded-lg hover:bg-gray-300 transition-colors text-sm",children:""})]}):e.jsxs("button",{onClick:()=>X(!0),className:"w-full px-3 py-2 bg-blue-100 text-blue-700 font-semibold rounded-lg hover:bg-blue-200 transition-colors flex items-center justify-center gap-2 text-sm",children:[e.jsx(Gc,{className:"w-4 h-4"}),"   "]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-gray-100 rounded-xl p-4 border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Xa,{className:"w-4 h-4 text-slate-700"}),e.jsxs("h4",{className:"font-bold text-gray-900",children:[" (",u.length,")"]})]}),e.jsxs("div",{className:"space-y-2 mb-4 max-h-80 overflow-y-auto",children:[u.map(U=>e.jsxs("div",{className:`p-3 rounded-lg ${U.is_internal?"bg-yellow-50 border border-yellow-200":"bg-white border border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold text-xs text-gray-900",children:U.author?.first_name||U.author?.username}),e.jsx("span",{className:"text-xs text-gray-500",children:ie(U.created_at)}),U.is_internal&&e.jsx("span",{className:"text-xs bg-yellow-200 text-yellow-800 px-1.5 py-0.5 rounded font-semibold",children:""})]}),e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap mb-2",children:U.comment}),U.attachments&&U.attachments.length>0&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:U.attachments.map((F,Z)=>{const q=/\.(jpg|jpeg|png|gif|webp)$/i.test(F.original_filename),le=`/admin/${F.path||F.filename}`;return q?e.jsxs("a",{href:le,target:"_blank",rel:"noopener noreferrer",className:"group relative block",children:[e.jsx("img",{src:le,alt:F.original_filename,className:"h-32 w-auto rounded-lg border-2 border-gray-200 hover:border-blue-500 transition-all cursor-pointer object-cover shadow-sm hover:shadow-md",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-opacity rounded-lg flex items-center justify-center",children:e.jsx(Gc,{className:"w-5 h-5 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 max-w-[150px] truncate",children:F.original_filename})]},Z):e.jsxs("a",{href:le,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800 bg-blue-50 px-3 py-2 rounded-lg hover:bg-blue-100 transition-colors",children:[e.jsx(Tt,{className:"w-4 h-4"}),F.original_filename]},Z)})})]},U.id)),u.length===0&&e.jsx("p",{className:"text-center text-gray-400 py-4 text-sm",children:"  "})]}),e.jsxs("div",{className:"space-y-3 bg-white p-3 rounded-lg border border-gray-200",children:[e.jsx("textarea",{value:m,onChange:U=>f(U.target.value),onPaste:se,placeholder:" ... (Ctrl+V   )",rows:2,className:"w-full px-3 py-2 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none text-sm"}),E.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:E.map((U,F)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:U,alt:`Preview ${F+1}`,className:"w-24 h-24 object-cover rounded-lg border-2 border-gray-200"}),e.jsx("button",{onClick:()=>te(F),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(De,{className:"w-3 h-3"})})]},F))}),p.filter(U=>!U.type.startsWith("image/")).length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:p.map((U,F)=>!U.type.startsWith("image/")&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-gray-100 rounded-lg text-sm",children:[e.jsx(rd,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-gray-700",children:U.name}),e.jsx("button",{onClick:()=>te(F),className:"text-red-500 hover:text-red-700",children:e.jsx(De,{className:"w-4 h-4"})})]},F))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-lg cursor-pointer transition-colors",children:[e.jsx(rd,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"text-xs font-medium",children:""}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*,application/pdf,.doc,.docx,.xls,.xlsx,.txt",onChange:U=>W(Array.from(U.target.files||[])),className:"hidden"})]}),p.length>0&&e.jsxs("span",{className:"text-xs text-gray-600",children:[p.length," ",p.length===1?"":""]}),e.jsx("div",{className:"flex-1"}),e.jsxs("label",{className:"flex items-center gap-1.5 text-xs",children:[e.jsx("input",{type:"checkbox",checked:g,onChange:U=>y(U.target.checked),className:"rounded"}),""]}),e.jsxs("button",{onClick:ee,disabled:w||!m.trim()&&p.length===0,className:"flex items-center gap-1.5 px-4 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:[e.jsx(rr,{className:"w-3.5 h-3.5"}),""]})]})]})]}),o.status==="in_progress"&&e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("button",{onClick:J,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg hover:from-green-600 hover:to-emerald-700 font-bold transition-all shadow-md hover:shadow-lg",children:[e.jsx(ut,{className:"w-5 h-5"})," "]})})]})}),e.jsxs("div",{className:"flex-shrink-0 bg-gray-50 px-6 py-3 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:a,className:"flex items-center gap-1.5 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-all font-semibold text-sm",children:[e.jsx(An,{className:"w-4 h-4"}),""]}),e.jsxs("button",{onClick:K,className:"flex items-center gap-1.5 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-all font-semibold text-sm",children:[e.jsx(Cl,{className:"w-4 h-4"}),""]})]}),e.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-semibold text-sm",children:""})]})]})}):null},FY=({filters:s,onFilterChange:t,onClose:r,employees:a,projects:n=[]})=>{const i=(c,u)=>{t({...s,[c]:u||void 0})},o=()=>{t({})};return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:""}),e.jsx("button",{onClick:r,className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsxs("select",{value:s.type||"",onChange:c=>i("type",c.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"TASK",children:""}),e.jsx("option",{value:"REVISION",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsxs("select",{value:s.status||"",onChange:c=>i("status",c.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"pending",children:""}),e.jsx("option",{value:"in_progress",children:" "}),e.jsx("option",{value:"completed",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsxs("select",{value:s.priority||"",onChange:c=>i("priority",c.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"urgent",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"normal",children:""}),e.jsx("option",{value:"low",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsxs("select",{value:s.project_id||"",onChange:c=>i("project_id",c.target.value?parseInt(c.target.value):null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:" "}),n.map(c=>e.jsx("option",{value:c.id,children:c.title},c.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsxs("select",{value:s.assigned_to_id||"",onChange:c=>i("assigned_to_id",c.target.value?parseInt(c.target.value):null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:" "}),a.map(c=>e.jsxs("option",{value:c.id,children:[c.name," (@",c.username,")"]},c.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsxs("select",{value:s.created_by_id||"",onChange:c=>i("created_by_id",c.target.value?parseInt(c.target.value):null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:" "}),a.map(c=>e.jsxs("option",{value:c.id,children:[c.name," (@",c.username,")"]},c.id))]})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:o,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-900 font-medium transition-colors",children:" "})})]})},zY=({stats:s})=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:" "}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-6",children:[e.jsx(Ic,{icon:e.jsx(Qj,{className:"w-5 h-5"}),label:" ",value:s.total_tasks,color:"blue"}),e.jsx(Ic,{icon:e.jsx(Ve,{className:"w-5 h-5"}),label:"",value:s.pending_tasks,color:"indigo"}),e.jsx(Ic,{icon:e.jsx(xt,{className:"w-5 h-5"}),label:" ",value:s.in_progress_tasks,color:"yellow"}),e.jsx(Ic,{icon:e.jsx(ut,{className:"w-5 h-5"}),label:"",value:s.completed_tasks,color:"green"}),e.jsx(Ic,{icon:e.jsx(dr,{className:"w-5 h-5"}),label:"",value:s.overdue_tasks,color:"red"}),e.jsx(Ic,{icon:e.jsx(eB,{className:"w-5 h-5"}),label:"",value:s.today_tasks,color:"orange"})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:" "}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsx(K0,{label:"",value:s.priority_stats.urgent,color:"red",icon:e.jsx(Ge,{className:"w-4 h-4"})}),e.jsx(K0,{label:"",value:s.priority_stats.high,color:"orange",icon:e.jsx(dr,{className:"w-4 h-4"})}),e.jsx(K0,{label:"",value:s.priority_stats.normal,color:"blue",icon:e.jsx(Qj,{className:"w-4 h-4"})}),e.jsx(K0,{label:"",value:s.priority_stats.low,color:"gray",icon:e.jsx(Ve,{className:"w-4 h-4"})})]})]})]}),Ic=({icon:s,label:t,value:r,color:a})=>{const n={blue:"from-blue-500 to-blue-600",indigo:"from-indigo-500 to-indigo-600",yellow:"from-yellow-500 to-yellow-600",green:"from-green-500 to-green-600",red:"from-red-500 to-red-600",orange:"from-orange-500 to-orange-600"};return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-3 rounded-lg bg-gradient-to-r ${n[a]} text-white`,children:s}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r}),e.jsx("div",{className:"text-xs text-gray-600",children:t})]})]})},K0=({label:s,value:t,color:r,icon:a})=>{const n={red:"bg-red-50 border-red-200 text-red-700",orange:"bg-orange-50 border-orange-200 text-orange-700",blue:"bg-blue-50 border-blue-200 text-blue-700",gray:"bg-gray-50 border-gray-200 text-gray-700"};return e.jsxs("div",{className:`flex items-center gap-2 p-3 rounded-lg border ${n[r]}`,children:[a,e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium",children:s}),e.jsx("div",{className:"text-lg font-bold",children:t})]})]})},IY=()=>{const s=Oa(),[t,r]=j.useState([]),[a,n]=j.useState(null),[i,o]=j.useState([]),[c,u]=j.useState([]),[h,m]=j.useState(!0),[f,p]=j.useState({}),[v,g]=j.useState(!1),[y,w]=j.useState(""),[N,k]=j.useState("kanban"),[S,_]=j.useState(!1),[T,E]=j.useState(!1),[z,O]=j.useState(!1),[C,A]=j.useState(null),[X,I]=j.useState(null),[V,R]=j.useState(null),[H,ee]=j.useState([]),se=j.useCallback((Y,L="info")=>{const M=Date.now().toString();ee(B=>[...B,{id:M,message:Y,type:L}])},[]),W=j.useCallback(Y=>{ee(L=>L.filter(M=>M.id!==Y))},[]),te=j.useCallback(async()=>{try{m(!0),console.log(" Requesting tasks with filters:",f);const Y=await zs.getTasks(f);console.log(" API Response:",Y),console.log(" Response success:",Y.success),console.log(" Response tasks:",Y.tasks),console.log(" Tasks length:",Y.tasks?.length),Y.success?(r(Y.tasks||[]),console.log(" Tasks set to state:",Y.tasks?.length||0)):(console.error(" API returned success=false:",Y),r([]))}catch(Y){console.error(" Error loading tasks:",Y),console.error(" Error details:",JSON.stringify(Y,null,2)),se("  ","error"),r([])}finally{m(!1)}},[f,se]),J=j.useCallback(async()=>{try{const Y=await zs.getStats();Y.success&&n(Y.stats)}catch(Y){console.error("Error loading stats:",Y)}},[]),K=j.useCallback(async()=>{try{const Y=await zs.getExecutors();o(Y)}catch(Y){console.error("Error loading executors:",Y)}},[]),$=j.useCallback(async()=>{try{const Y=await zs.getProjects();u(Y)}catch(Y){console.error("Error loading projects:",Y)}},[]);j.useEffect(()=>{te(),J(),K(),$()},[te,J,K,$]);const ie=Y=>{if(!y.trim())return Y;const L=y.toLowerCase();return Y.filter(M=>{const B=M.title.toLowerCase().includes(L),ae=M.description?.toLowerCase().includes(L),he=M.assigned_to?.first_name?.toLowerCase().includes(L)||M.assigned_to?.last_name?.toLowerCase().includes(L)||M.assigned_to?.username?.toLowerCase().includes(L);return B||ae||he})},ne=()=>{const Y={},L=ie(t);return console.log("=== GROUPING DEBUG ==="),console.log("Total tasks:",t.length),console.log("Filtered tasks:",L.length),console.log("Employees:",i.length,i.map(M=>({id:M.id,username:M.username}))),i.forEach(M=>{Y[M.id]={employee:M,tasks:[]}}),console.log("Grouped keys:",Object.keys(Y)),L.forEach(M=>{console.log("Task",M.id,"assigned_to_id:",M.assigned_to_id,"exists in grouped:",!!Y[M.assigned_to_id]),M.assigned_to_id&&Y[M.assigned_to_id]&&Y[M.assigned_to_id].tasks.push(M)}),console.log("Final grouped:",Object.entries(Y).map(([M,B])=>({id:M,tasksCount:B.tasks.length}))),console.log("=== END DEBUG ==="),Y},oe=Y=>L=>{console.log("Drag start:",Y.title),I(Y),L.dataTransfer.effectAllowed="move",L.dataTransfer.setData("text/plain",Y.id.toString())},ce=Y=>L=>{L.preventDefault(),L.dataTransfer.dropEffect="move",R(Y)},U=Y=>{const L=Y.currentTarget.getBoundingClientRect(),M=Y.clientX,B=Y.clientY;(M<L.left||M>=L.right||B<L.top||B>=L.bottom)&&R(null)},F=Y=>async L=>{if(L.preventDefault(),L.stopPropagation(),R(null),console.log("Drop on employee:",Y,"dragged task:",X),!X){console.log("No dragged task");return}if(X.assigned_to_id===Y){console.log("Dropped on same executor"),I(null);return}console.log("Reassigning task...");try{const M=await zs.reassignTask(X.id,Y);console.log("Reassign response:",M),M.success&&(se(" ","success"),te(),J())}catch(M){console.error("Error reassigning task:",M),se("  ","error")}finally{I(null)}},Z=async(Y,L)=>{try{(await zs.updateTaskStatus(Y,L)).success&&(se(" ","success"),te(),J())}catch(M){console.error("Error updating status:",M),se("  ","error")}},q=()=>{_(!1),te(),J()},Q=()=>{E(!1),A(null),te(),J()},le=async Y=>{if(confirm("    . ?"))try{(await zs.archiveTask(Y)).success&&(se("   ","success"),te(),J(),O(!1),A(null))}catch(L){console.error("Error archiving task:",L),se("  ","error")}},me=Y=>{A(Y),O(!0)},G=Y=>{A(Y),E(!0)},ue=ne();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-6 py-4 pb-6 space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:" "}),e.jsx("p",{className:"text-gray-600 mt-1",children:"  "})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>g(!v),className:"flex items-center gap-2 px-4 py-2.5 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-300 shadow-sm",children:[e.jsx(wr,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:""})]}),e.jsxs("button",{onClick:()=>s("/tasks-archive"),className:"flex items-center gap-2 px-4 py-2.5 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-300 shadow-sm",children:[e.jsx(Cl,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:""})]}),e.jsxs("div",{className:"flex items-center bg-white border border-gray-300 rounded-lg shadow-sm",children:[e.jsxs("button",{onClick:()=>k("kanban"),className:`flex items-center gap-2 px-4 py-2.5 rounded-l-lg transition-all ${N==="kanban"?"bg-blue-500 text-white":"text-gray-700 hover:bg-gray-50"}`,title:"Kanban ",children:[e.jsx(mN,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Kanban"})]}),e.jsxs("button",{onClick:()=>k("table"),className:`flex items-center gap-2 px-4 py-2.5 rounded-r-lg transition-all ${N==="table"?"bg-blue-500 text-white":"text-gray-700 hover:bg-gray-50"}`,title:" ",children:[e.jsx(Mm,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:""})]})]}),e.jsx("button",{onClick:()=>{te(),J()},className:"p-2.5 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-300 shadow-sm",title:"",children:e.jsx(ls,{className:"w-4 h-4"})}),e.jsxs("button",{onClick:()=>_(!0),className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all shadow-md font-semibold",children:[e.jsx(We,{className:"w-5 h-5"})," "]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Us,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:y,onChange:Y=>w(Y.target.value),placeholder:"    ,   ...",className:"block w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"}),y&&e.jsx("button",{onClick:()=>w(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 transition-colors",title:"",children:e.jsx(De,{className:"h-5 w-5"})}),y&&e.jsxs("div",{className:"absolute left-0 right-0 top-full mt-1 text-sm text-gray-500 bg-blue-50 px-3 py-2 rounded-lg border border-blue-200",children:[" : ",ie(t).length,"  ",t.length]})]})]}),a&&e.jsx(zY,{stats:a}),v&&e.jsx(FY,{filters:f,onFilterChange:p,onClose:()=>g(!1),employees:i,projects:c}),h?e.jsx("div",{className:"flex items-center justify-center h-96 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):N==="table"?e.jsx(OY,{tasks:ie(t),onView:me,onEdit:G,onDelete:le}):e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("div",{className:"flex gap-4 min-w-max p-4",children:[Object.values(ue).map(({employee:Y,tasks:L})=>e.jsxs("div",{className:`flex-shrink-0 w-[340px] rounded-xl p-4 transition-all ${V===Y.id?"bg-blue-100 dark:bg-blue-900/30 ring-2 ring-blue-500 shadow-lg":"bg-gray-50 dark:bg-gray-900/30"}`,onDragOver:ce(Y.id),onDragLeave:U,onDrop:F(Y.id),children:[e.jsxs("div",{className:"mb-4 pb-3 border-b border-gray-300 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-bold text-sm shadow",children:(Y.first_name||Y.username).charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-base text-gray-900 dark:text-white truncate",children:Y.first_name&&Y.last_name?`${Y.first_name} ${Y.last_name} (@${Y.username})`:`@${Y.username}`}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:Y.role==="owner"?"":Y.role==="admin"?"":Y.role==="manager"?"":""})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:"px-2.5 py-1 bg-blue-500 text-white rounded-md font-semibold",children:L.filter(M=>M.status==="pending").length}),e.jsx("span",{className:"px-2.5 py-1 bg-yellow-500 text-white rounded-md font-semibold",children:L.filter(M=>M.status==="in_progress").length}),e.jsx("span",{className:"px-2.5 py-1 bg-green-500 text-white rounded-md font-semibold",children:L.filter(M=>M.status==="completed").length})]})]}),e.jsx("div",{className:"space-y-3 min-h-[200px]",children:L.length===0?e.jsx("div",{className:"text-center text-gray-400 py-8 bg-white dark:bg-gray-800 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-600",children:e.jsx("p",{className:"text-sm font-medium",children:" "})}):L.map(M=>e.jsx(MY,{task:M,onView:()=>me(M),onEdit:()=>G(M),onDelete:()=>le(M.id),onStatusChange:B=>Z(M.id,B),onDragStart:oe(M)},M.id))})]},Y.id)),Object.keys(ue).length===0&&e.jsx("div",{className:"w-full text-center py-12",children:e.jsx("p",{className:"text-gray-400 dark:text-gray-500",children:"   "})})]})})})]}),S&&e.jsx(LY,{isOpen:S,onClose:()=>_(!1),onSuccess:q,employees:i}),T&&C&&e.jsx(PY,{isOpen:T,onClose:()=>{E(!1),A(null)},onSuccess:Q,task:C,employees:i}),z&&C&&e.jsx(BY,{isOpen:z,onClose:()=>{O(!1),A(null)},task:C,onEdit:()=>{O(!1),G(C)},onDelete:()=>le(C.id),onRefresh:te}),e.jsx(m1,{toasts:H,onRemove:W})]})},ga={getRevisions:async s=>{const t=new URLSearchParams;return s?.project_id&&t.append("project_id",s.project_id.toString()),s?.status&&t.append("status",s.status),s?.priority&&t.append("priority",s.priority),s?.assigned_to_me&&t.append("assigned_to_me","true"),(await fe.get(`/admin/api/revisions?${t}`)).data},getRevision:async s=>(await fe.get(`/admin/api/revisions/${s}`)).data,getStats:async()=>(await fe.get("/admin/api/revisions/stats")).data,createRevision:async s=>(await fe.post("/admin/api/revisions",s)).data,updateRevision:async(s,t)=>(await fe.put(`/admin/api/revisions/${s}`,t)).data,getFiles:async s=>(await fe.get(`/admin/api/revisions/${s}/files`)).data,getMessages:async s=>(await fe.get(`/admin/api/revisions/${s}/messages`)).data,addMessage:async(s,t,r,a)=>{const n=new FormData;return n.append("revision_id",s.toString()),n.append("message",t),n.append("is_internal",r.toString()),a&&a.forEach(o=>{n.append("files",o)}),(await fe.post("/admin/api/revisions/messages",n,{headers:{"Content-Type":"multipart/form-data"}})).data},updateProgress:async(s,t)=>(await fe.post(`/admin/api/revisions/${s}/progress`,{progress:t})).data,startTimer:async s=>(await fe.post(`/admin/api/revisions/${s}/timer/start`)).data,stopTimer:async s=>(await fe.post(`/admin/api/revisions/${s}/timer/stop`)).data,sendForReview:async s=>(await fe.post(`/admin/api/revisions/${s}/send-for-review`)).data,completeRevision:async(s,t,r=" ")=>{const a=new FormData;return t&&a.append("actual_time",t.toString()),a.append("completion_message",r),(await fe.post(`/admin/api/revisions/${s}/complete`,a)).data}},$Y=()=>{const[s,t]=j.useState([]),[r,a]=j.useState(!0),[n,i]=j.useState({total_revisions:0,pending_revisions:0,completed_revisions:0,my_revisions:0}),[o,c]=j.useState(""),[u,h]=j.useState(""),[m,f]=j.useState(""),[p,v]=j.useState(!1),[g,y]=j.useState(null),[w,N]=j.useState(!1),[k,S]=j.useState(!1),[_,T]=j.useState([]),[E,z]=j.useState({project_id:"",title:"",description:"",priority:"normal"}),[O,C]=j.useState(""),[A,X]=j.useState(!1),[I,V]=j.useState([]),[R,H]=j.useState([]),[ee,se]=j.useState([]),[W,te]=j.useState(null),J=j.useCallback((ue,Y="info")=>{te({message:ue,type:Y}),setTimeout(()=>te(null),3e3)},[]),K=j.useCallback(async()=>{try{a(!0);const ue=await ga.getRevisions({project_id:o?parseInt(o):void 0,status:u||void 0,priority:m||void 0,assigned_to_me:p||void 0});ue.success&&t(ue.data)}catch{J("  ","error")}finally{a(!1)}},[o,u,m,p,J]),$=j.useCallback(async()=>{try{const ue=await ga.getStats();ue.success&&i(ue.data)}catch(ue){console.error("Failed to load stats:",ue)}},[]),ie=j.useCallback(async()=>{try{const ue=await vs.getProjects();ue.success&&T(ue.projects)}catch(ue){console.error("Failed to load projects:",ue)}},[]);j.useEffect(()=>{K(),$(),ie()},[K,$,ie]);const ne=async()=>{if(!E.project_id||!E.title||!E.description){J("   ","error");return}try{(await ga.createRevision({project_id:parseInt(E.project_id),title:E.title,description:E.description,priority:E.priority})).success&&(J("  ","success"),N(!1),z({project_id:"",title:"",description:"",priority:"normal"}),K(),$())}catch{J("   ","error")}},oe=async ue=>{try{const Y=await ga.getRevision(ue.id);if(Y.success){y(Y.data);const[L,M]=await Promise.all([ga.getMessages(ue.id),ga.getFiles(ue.id)]);L.success&&H(L.data),M.success&&se(M.data),S(!0)}}catch{J("   ","error")}},ce=async()=>{if(!g||!O.trim()){J("  ","error");return}try{if((await ga.addMessage(g.id,O,A,I)).success){J(" ","success"),C(""),X(!1),V([]);const Y=await ga.getMessages(g.id);Y.success&&H(Y.data)}}catch{J("   ","error")}},U=async ue=>{if(g)try{(await ga.updateRevision(g.id,{status:ue})).success&&(J(" ","success"),K(),$(),S(!1))}catch{J("  ","error")}},F=async()=>{if(g)try{(await ga.sendForReview(g.id)).success&&(J("   ","success"),K(),$(),S(!1))}catch{J("   ","error")}},Z=async(ue,Y)=>{Y.stopPropagation();try{await ga.startTimer(ue),K()}catch{J("  ","error")}},q=async(ue,Y)=>{Y.stopPropagation();try{await ga.stopTimer(ue),K()}catch{J("  ","error")}},Q=ue=>({pending:" ",in_progress:" ",review:" ",completed:"",approved:" ",needs_rework:" ",rejected:""})[ue]||ue,le=ue=>({low:"",normal:"",high:"",urgent:""})[ue]||ue,me=ue=>{const Y=Math.floor(ue/3600),L=Math.floor(ue%3600/60);return Y>0?`${Y} ${L}`:`${L}`},G=j.useMemo(()=>s,[s]);return e.jsxs("div",{className:"p-8 max-w-[1920px] mx-auto",children:[W&&e.jsx("div",{className:`fixed top-4 right-4 z-50 px-6 py-3 rounded-lg shadow-lg ${W.type==="success"?"bg-green-500":W.type==="error"?"bg-red-500":"bg-blue-500"} text-white flex items-center gap-2`,children:e.jsx("span",{children:W.message})}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-violet-500 to-purple-600 flex items-center justify-center",children:e.jsx(Cn,{className:"w-6 h-6 text-white"})})," "]}),e.jsx("p",{className:"text-gray-500 mt-1",children:"   "})]}),e.jsxs("button",{onClick:()=>N(!0),className:"px-6 py-3 bg-gradient-to-r from-violet-500 to-purple-600 text-white rounded-xl hover:shadow-lg transition-all duration-200 flex items-center gap-2",children:[e.jsx(We,{className:"w-5 h-5"})," "]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-violet-100 flex items-center justify-center",children:e.jsx(Ue,{className:"w-6 h-6 text-violet-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n.total_revisions}),e.jsx("div",{className:"text-sm text-gray-500",children:" "})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-yellow-100 flex items-center justify-center",children:e.jsx(Ve,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n.pending_revisions}),e.jsx("div",{className:"text-sm text-gray-500",children:" "})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-green-100 flex items-center justify-center",children:e.jsx(Hr,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n.completed_revisions}),e.jsx("div",{className:"text-sm text-gray-500",children:""})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-100 flex items-center justify-center",children:e.jsx(Ge,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n.my_revisions}),e.jsx("div",{className:"text-sm text-gray-500",children:" "})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(wr,{className:"w-5 h-5 text-gray-400"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:""})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("select",{value:o,onChange:ue=>c(ue.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:" "}),_.map(ue=>e.jsx("option",{value:ue.id,children:ue.title},ue.id))]}),e.jsxs("select",{value:u,onChange:ue=>h(ue.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"pending",children:" "}),e.jsx("option",{value:"in_progress",children:" "}),e.jsx("option",{value:"review",children:" "}),e.jsx("option",{value:"completed",children:""})]}),e.jsxs("select",{value:m,onChange:ue=>f(ue.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"normal",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"urgent",children:""})]}),e.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 border border-gray-200 rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:p,onChange:ue=>v(ue.target.checked),className:"w-4 h-4 text-violet-600 rounded focus:ring-2 focus:ring-violet-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:" "})]}),e.jsx("button",{onClick:()=>{c(""),h(""),f(""),v(!1)},className:"px-4 py-2 border border-gray-200 rounded-lg hover:bg-gray-50 text-gray-700",children:""})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:r?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-6 py-12 text-center",children:e.jsx(Pt,{className:"w-8 h-8 animate-spin mx-auto text-violet-500"})})}):G.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-6 py-12 text-center text-gray-500",children:"  "})}):G.map(ue=>e.jsxs("tr",{onClick:()=>oe(ue),className:"hover:bg-gray-50 cursor-pointer transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["#",ue.revision_number]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:ue.project?.title||""}),e.jsx("div",{className:"text-xs text-gray-500",children:ue.project?.status})]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:ue.title}),e.jsx("div",{className:"text-xs text-gray-500 line-clamp-1",children:ue.description})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-violet-100 text-violet-700",children:Q(ue.status)})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`text-sm font-medium ${ue.priority==="urgent"?"text-red-600":ue.priority==="high"?"text-orange-600":ue.priority==="normal"?"text-blue-600":"text-green-600"}`,children:le(ue.priority)})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2 max-w-[100px]",children:e.jsx("div",{className:"bg-violet-600 h-2 rounded-full transition-all",style:{width:`${ue.progress||0}%`}})}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[ue.progress||0,"%"]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:me(ue.time_spent_seconds||0)}),ue.timer_started_at?e.jsx("button",{onClick:Y=>q(ue.id,Y),className:"p-1 hover:bg-red-100 rounded transition-colors",children:e.jsx(am,{className:"w-4 h-4 text-red-600"})}):e.jsx("button",{onClick:Y=>Z(ue.id,Y),className:"p-1 hover:bg-green-100 rounded transition-colors",children:e.jsx(ji,{className:"w-4 h-4 text-green-600"})})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>oe(ue),className:"text-violet-600 hover:text-violet-700 font-medium text-sm",children:""})})]},ue.id))})]})})}),w&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:" "}),e.jsx("button",{onClick:()=>N(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsxs("select",{value:E.project_id,onChange:ue=>z({...E,project_id:ue.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:" "}),_.map(ue=>e.jsx("option",{value:ue.id,children:ue.title},ue.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:E.title,onChange:ue=>z({...E,title:ue.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent",placeholder:"  "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("textarea",{value:E.description,onChange:ue=>z({...E,description:ue.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent",placeholder:"      "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("select",{value:E.priority,onChange:ue=>z({...E,priority:ue.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent",children:[e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"normal",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"urgent",children:""})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-100 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>N(!1),className:"px-6 py-2 border border-gray-200 rounded-lg hover:bg-gray-50 text-gray-700",children:""}),e.jsx("button",{onClick:ne,className:"px-6 py-2 bg-gradient-to-r from-violet-500 to-purple-600 text-white rounded-lg hover:shadow-lg transition-all",children:""})]})]})}),k&&g&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[" #",g.revision_number," - ",g.title]}),e.jsx("button",{onClick:()=>S(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-6 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:""}),e.jsx("div",{className:"font-medium",children:g.project?.title})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:""}),e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-violet-100 text-violet-700",children:Q(g.status)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:""}),e.jsx("div",{className:"font-medium",children:le(g.priority)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:""}),e.jsx("div",{className:"text-sm",children:g.description})]})]}),ee.length>0&&e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("div",{className:"text-sm font-medium mb-3",children:""}),e.jsx("div",{className:"space-y-2",children:ee.map(ue=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white rounded-lg",children:[ue.file_type==="image"?e.jsx(sm,{className:"w-4 h-4 text-gray-400"}):e.jsx(Ue,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm flex-1 truncate",children:ue.original_filename}),e.jsx("a",{href:ue.download_url,download:!0,className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(Tt,{className:"w-4 h-4 text-gray-600"})})]},ue.id))})]})]}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("div",{className:"bg-gray-50 rounded-xl p-4 h-[400px] overflow-y-auto mb-4",children:R.length===0?e.jsx("div",{className:"text-center text-gray-500 py-8",children:"  "}):e.jsx("div",{className:"space-y-3",children:R.map(ue=>e.jsxs("div",{className:`p-4 rounded-lg ${ue.is_internal?"bg-yellow-50 border-l-4 border-yellow-400":"bg-white"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("div",{className:"font-medium text-sm",children:ue.sender_name}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(ue.created_at).toLocaleString("ru-RU")})]}),e.jsx("div",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:ue.message||ue.content}),ue.is_internal&&e.jsx("div",{className:"mt-2 text-xs text-yellow-700",children:" "})]},ue.id))})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("textarea",{value:O,onChange:ue=>C(ue.target.value),rows:3,placeholder:" ...",className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:A,onChange:ue=>X(ue.target.checked),className:"w-4 h-4 text-violet-600 rounded focus:ring-2 focus:ring-violet-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:" "})]}),e.jsxs("button",{onClick:ce,className:"px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 flex items-center gap-2",children:[e.jsx(rr,{className:"w-4 h-4"}),""]})]})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-100 flex justify-between",children:[e.jsxs("div",{className:"flex gap-2",children:[g.status==="in_progress"&&e.jsxs("button",{onClick:F,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(rr,{className:"w-4 h-4"}),"  "]}),g.status==="pending"&&e.jsxs("button",{onClick:()=>U("in_progress"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(ji,{className:"w-4 h-4"}),"  "]}),g.status!=="completed"&&e.jsxs("button",{onClick:()=>U("completed"),className:"px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 flex items-center gap-2",children:[e.jsx(Hr,{className:"w-4 h-4"}),""]})]}),e.jsx("button",{onClick:()=>S(!1),className:"px-6 py-2 border border-gray-200 rounded-lg hover:bg-gray-50",children:""})]})]})})]})};class UY{async getClients(t){try{const r=new URLSearchParams;t?.search&&r.append("search",t.search),t?.status&&r.append("status",t.status),t?.type&&r.append("type",t.type),t?.manager_id&&r.append("manager_id",t.manager_id.toString()),t?.segment&&r.append("segment",t.segment),t?.page&&r.append("page",t.page.toString()),t?.limit&&r.append("limit",t.limit.toString());const a=await fe.get(`/admin/clients/?${r.toString()}`);return{success:!0,clients:a.data.clients,pagination:a.data.pagination,stats:a.data.stats}}catch(r){return console.error("Error fetching clients:",r),{success:!1,message:r.response?.data?.message||r.message||"  ",clients:[],pagination:{total:0,page:1,limit:20,pages:0}}}}async getClient(t){try{return{success:!0,client:(await fe.get(`/admin/clients/api/${t}`)).data.client}}catch(r){return console.error("Error fetching client:",r),{success:!1,message:r.response?.data?.message||"  "}}}async createClient(t){try{return{success:!0,client:(await fe.post("/admin/clients/api",t)).data.client,message:"  "}}catch(r){return console.error("Error creating client:",r),{success:!1,message:r.response?.data?.message||"  "}}}async updateClient(t,r){try{return{success:!0,client:(await fe.put(`/admin/clients/api/${t}`,r)).data.client,message:"  "}}catch(a){return console.error("Error updating client:",a),{success:!1,message:a.response?.data?.message||"  "}}}async deleteClient(t){try{return await fe.delete(`/admin/clients/api/${t}`),{success:!0,message:"  "}}catch(r){return console.error("Error deleting client:",r),{success:!1,message:r.response?.data?.message||"  "}}}async addCommunication(t,r){try{return{success:!0,communication:(await fe.post(`/admin/clients/api/${t}/communication`,r)).communication,message:" "}}catch(a){return console.error("Error adding communication:",a),{success:!1,message:a.response?.data?.message||"  "}}}async getClientTimeline(t){try{return{success:!0,timeline:(await fe.get(`/admin/clients/api/${t}/timeline`)).timeline}}catch(r){return console.error("Error fetching timeline:",r),{success:!1,message:r.response?.data?.message||"  ",timeline:[]}}}async getSegmentStats(){try{return{success:!0,stats:(await fe.get("/admin/clients/api/stats/segments")).stats}}catch(t){return console.error("Error fetching segment stats:",t),{success:!1,message:t.response?.data?.message||"  ",stats:{}}}}async getClientsSimple(){try{return{success:!0,clients:(await fe.get("/admin/clients/simple")).data.clients}}catch(t){return console.error("Error fetching simple clients:",t),{success:!1,message:t.response?.data?.message||"   ",clients:[]}}}}const Pk=new UY,VY=()=>{const[s,t]=j.useState([]),[r,a]=j.useState(!0),[n,i]=j.useState({page:1,limit:20}),[o,c]=j.useState(!1),[u,h]=j.useState({total:0,page:1,limit:20,pages:1}),[m,f]=j.useState({total:0,active:0,vip:0,new_month:0}),[p,v]=j.useState([]),g=j.useCallback((A,X="info")=>{const I=Date.now().toString();v(V=>[...V,{id:I,message:A,type:X}]),setTimeout(()=>{v(V=>V.filter(R=>R.id!==I))},4e3)},[]),y=j.useCallback(A=>{v(X=>X.filter(I=>I.id!==A))},[]),w=j.useCallback(async()=>{try{a(!0);const A=await Pk.getClients(n);A.success?(t(A.clients||[]),h(A.pagination||{total:0,page:1,limit:20,pages:0}),A.stats&&f(A.stats)):(g(A.message||"  ","error"),t([]))}catch(A){console.error("Error loading clients:",A),g("  ","error"),t([])}finally{a(!1)}},[n,g]);j.useEffect(()=>{w()},[w]);const N=async A=>{if(!confirm(" ,     ?"))return;const X=await Pk.deleteClient(A);X.success?(g("  ","success"),w()):g(X.message,"error")},k=A=>{i(X=>({...X,search:A,page:1}))},S=(A,X)=>{i(I=>({...I,[A]:X,page:1}))},_=A=>{i(X=>({...X,page:A}))},T=()=>{w()},E=A=>({individual:". ",company:"",ip:"",self_employed:""})[A]||A,z=A=>({new:"",active:"",inactive:"",vip:"VIP",blacklist:" "})[A]||A,O=A=>({new:"bg-blue-100 text-blue-700",active:"bg-green-100 text-green-700",inactive:"bg-gray-100 text-gray-700",vip:"bg-purple-100 text-purple-700",blacklist:"bg-red-100 text-red-700"})[A]||"bg-gray-100 text-gray-700",C=A=>{const I={individual:lt,company:D4,ip:D4,self_employed:lt}[A]||lt;return e.jsx(I,{className:"w-4 h-4"})};return e.jsxs("div",{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:""}),e.jsx("p",{className:"text-gray-600",children:"   CRM"})]}),e.jsxs("button",{className:"bg-gradient-to-r from-orange-600 to-red-600 text-white px-6 py-3 rounded-xl font-semibold hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5 flex items-center gap-2",children:[e.jsx(We,{className:"w-5 h-5"})," "]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:e.jsx(it,{className:"w-6 h-6 text-blue-600"})}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:m.total})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:" "})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:e.jsx(xt,{className:"w-6 h-6 text-green-600"})}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:m.active})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:""})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:e.jsx(Is,{className:"w-6 h-6 text-purple-600"})}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:m.vip})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"VIP "})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center",children:e.jsx(wt,{className:"w-6 h-6 text-orange-600"})}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:m.new_month})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"  "})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Us,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"  , email, , ...",className:"w-full pl-12 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all",value:n.search||"",onChange:A=>k(A.target.value)})]}),e.jsxs("button",{onClick:()=>c(!o),className:`px-6 py-3 bg-white border border-gray-200 rounded-xl hover:border-orange-500 transition-all flex items-center gap-2 font-medium ${o?"border-orange-500 text-orange-600":"text-gray-700"}`,children:[e.jsx(wr,{className:"w-5 h-5"}),""]}),e.jsx("button",{onClick:T,className:"px-6 py-3 bg-white border border-gray-200 rounded-xl hover:border-gray-300 transition-all flex items-center gap-2 font-medium text-gray-700",children:e.jsx(ls,{className:"w-5 h-5"})})]}),o&&e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("select",{className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",value:n.status||"",onChange:A=>S("status",A.target.value||void 0),children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"new",children:""}),e.jsx("option",{value:"active",children:""}),e.jsx("option",{value:"inactive",children:""}),e.jsx("option",{value:"vip",children:"VIP"}),e.jsx("option",{value:"blacklist",children:" "})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("select",{className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",value:n.type||"",onChange:A=>S("type",A.target.value||void 0),children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"individual",children:". "}),e.jsx("option",{value:"company",children:""}),e.jsx("option",{value:"ip",children:""}),e.jsx("option",{value:"self_employed",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",placeholder:" ...",className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",value:n.segment||"",onChange:A=>S("segment",A.target.value||void 0)})]})]})}),r?e.jsx("div",{className:"bg-white rounded-3xl p-16 shadow-xl border border-gray-100 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"})}):s.length===0?e.jsx("div",{className:"bg-white rounded-3xl p-16 shadow-xl border border-gray-100",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-orange-100 to-red-100 rounded-3xl flex items-center justify-center mb-6",children:e.jsx(it,{className:"w-12 h-12 text-orange-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:n.search||n.status||n.type?"  ":" "}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-md",children:n.search||n.status||n.type?"   ":"  ,      "})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"/"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:s.map(A=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-500 to-red-500 rounded-lg flex items-center justify-center text-white font-semibold",children:A.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:A.name}),A.company_name&&e.jsx("div",{className:"text-sm text-gray-500",children:A.company_name})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1",children:[A.email&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(vi,{className:"w-4 h-4"}),A.email]}),A.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(bi,{className:"w-4 h-4"}),A.phone]}),A.telegram&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Xa,{className:"w-4 h-4"}),A.telegram]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[C(A.type),e.jsx("span",{className:"text-sm text-gray-700",children:E(A.type)})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-xs font-semibold ${O(A.status)}`,children:z(A.status)})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[A.projects_count!==void 0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ue,{className:"w-4 h-4"}),A.projects_count]}),A.deals_count!==void 0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(xt,{className:"w-4 h-4"}),A.deals_count]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{className:"p-2 hover:bg-blue-50 rounded-lg transition-colors",title:"",children:e.jsx(Vt,{className:"w-4 h-4 text-blue-600"})}),e.jsx("button",{className:"p-2 hover:bg-green-50 rounded-lg transition-colors",title:"",children:e.jsx(sr,{className:"w-4 h-4 text-green-600"})}),e.jsx("button",{onClick:X=>{X.stopPropagation(),N(A.id)},className:"p-2 hover:bg-red-50 rounded-lg transition-colors",title:"",children:e.jsx(tt,{className:"w-4 h-4 text-red-600"})})]})})]},A.id))})]})})}),u.pages>1&&e.jsxs("div",{className:"flex items-center justify-between bg-white rounded-2xl p-4 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[" ",s.length,"  ",u.total," "]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>_(u.page-1),disabled:u.page===1,className:"px-4 py-2 border border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:""}),e.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,u.pages)},(A,X)=>{const I=X+1;return e.jsx("button",{onClick:()=>_(I),className:`px-4 py-2 rounded-lg transition-all ${u.page===I?"bg-orange-600 text-white":"border border-gray-200 hover:bg-gray-50"}`,children:I},I)})}),e.jsx("button",{onClick:()=>_(u.page+1),disabled:u.page===u.pages,className:"px-4 py-2 border border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:""})]})]})]}),e.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:p.map(A=>e.jsxs("div",{className:`flex items-center gap-3 px-6 py-4 rounded-xl shadow-2xl border backdrop-blur-sm animate-slide-in-right ${A.type==="success"?"bg-green-50 border-green-200 text-green-800":A.type==="error"?"bg-red-50 border-red-200 text-red-800":"bg-blue-50 border-blue-200 text-blue-800"}`,children:[e.jsx("span",{className:"flex-1 font-medium",children:A.message}),e.jsx("button",{onClick:()=>y(A.id),className:"p-1 hover:bg-white/50 rounded-lg transition-colors",children:e.jsx(De,{className:"w-4 h-4"})})]},A.id))})]})},wd={getLeads:async s=>{const t=new URLSearchParams;return s?.search&&t.append("search",s.search),s?.status&&t.append("status",s.status),s?.source&&t.append("source",s.source),s?.manager_id&&t.append("manager_id",s.manager_id.toString()),s?.client_id&&t.append("client_id",s.client_id.toString()),s?.page&&t.append("page",s.page.toString()),s?.limit&&t.append("limit",s.limit.toString()),(await fe.get(`/admin/leads/api?${t}`)).data},getLead:async s=>(await fe.get(`/admin/leads/api/${s}`)).data,createLead:async s=>(await fe.post("/admin/leads/api",s)).data,updateLead:async(s,t)=>(await fe.put(`/admin/leads/api/${s}`,t)).data,updateLeadStatus:async(s,t,r)=>(await fe.put(`/admin/leads/api/${s}/status`,{status:t,lost_reason:r})).data,convertLead:async(s,t)=>(await fe.post(`/admin/leads/api/${s}/convert`,t)).data,getFunnelStats:async(s="month")=>(await fe.get(`/admin/leads/api/stats/funnel?period=${s}`)).data},HY=()=>{const[s,t]=j.useState([]),[r,a]=j.useState(!0),[n,i]=j.useState({page:1,limit:20}),[o,c]=j.useState(!1),[u,h]=j.useState({total:0,page:1,limit:20,pages:1}),[m,f]=j.useState(null),[p,v]=j.useState(0),[g,y]=j.useState(!1),[w,N]=j.useState(!1),[k,S]=j.useState(!1),[_,T]=j.useState(!1),[E,z]=j.useState(null),[O,C]=j.useState([]),A=j.useCallback((q,Q="info")=>{const le=Date.now().toString();C(me=>[...me,{id:le,message:q,type:Q}]),setTimeout(()=>{C(me=>me.filter(G=>G.id!==le))},4e3)},[]),X=j.useCallback(async()=>{try{a(!0);const q=await wd.getLeads(n);q.success&&(t(q.leads),h(q.pagination))}catch(q){console.error("Error loading leads:",q),A("  ","error")}finally{a(!1)}},[n,A]),I=j.useCallback(async()=>{try{const q=await wd.getFunnelStats("month");q.success&&(f(q.funnel),v(q.metrics.win_rate||0))}catch(q){console.error("Error loading funnel stats:",q)}},[]);j.useEffect(()=>{X(),I()},[X,I]);const V=j.useCallback(()=>{X(),I()},[X,I]),R=j.useCallback(()=>{i(q=>({...q,page:1}))},[]),H=j.useCallback(()=>{i({page:1,limit:20})},[]),ee=j.useCallback(q=>{i(Q=>({...Q,status:q,page:1}))},[]),se=j.useCallback(async q=>{if(confirm(" ,     ?"))try{A("    ","info")}catch(Q){console.error("Error deleting lead:",Q),A("  ","error")}},[A]),W=j.useCallback(()=>{y(!0),document.body.style.overflow="hidden"},[]),te=j.useCallback(()=>{y(!1),document.body.style.overflow="auto"},[]),J=j.useCallback(q=>{z(q),N(!0),document.body.style.overflow="hidden"},[]),K=j.useCallback(()=>{N(!1),z(null),document.body.style.overflow="auto"},[]),$=j.useCallback(q=>{z(q),S(!0),document.body.style.overflow="hidden"},[]),ie=j.useCallback(()=>{S(!1),z(null),document.body.style.overflow="auto"},[]),ne=j.useCallback(q=>{z(q),T(!0),document.body.style.overflow="hidden"},[]),oe=j.useCallback(()=>{T(!1),z(null),document.body.style.overflow="auto"},[]),ce=j.useCallback(q=>{i(Q=>({...Q,page:q}))},[]),U=q=>({new:"",contact_made:" ",qualification:"",proposal_sent:" ",negotiation:"",won:"",lost:"",postponed:""})[q]||q,F=q=>({new:"bg-blue-100 text-blue-700",contact_made:"bg-pink-100 text-pink-700",qualification:"bg-teal-100 text-teal-700",proposal_sent:"bg-purple-100 text-purple-700",negotiation:"bg-orange-100 text-orange-700",won:"bg-green-100 text-green-700",lost:"bg-red-100 text-red-700",postponed:"bg-gray-100 text-gray-700"})[q]||"bg-gray-100 text-gray-700",Z=q=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0}).format(q);return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"max-w-[2000px] mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx(xt,{className:"w-7 h-7 text-white"})})," "]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"  "})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>c(!o),className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-200",children:[e.jsx(wr,{className:"w-5 h-5"}),""]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-200",children:[e.jsx(Tt,{className:"w-5 h-5"}),""]}),e.jsx("button",{onClick:V,className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-200",children:e.jsx(ls,{className:"w-5 h-5"})}),e.jsxs("button",{onClick:W,className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-cyan-500 to-blue-600 text-white rounded-lg hover:from-cyan-600 hover:to-blue-700 transition-all shadow-lg",children:[e.jsx(We,{className:"w-5 h-5"})," "]})]})]}),m&&e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h5",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Lr,{className:"w-5 h-5 text-cyan-600"})," "]}),e.jsxs("div",{className:"px-4 py-1 bg-green-100 text-green-700 rounded-full text-sm font-semibold",children:[": ",p.toFixed(1),"%"]})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-3",children:[e.jsxs("button",{onClick:()=>ee("new"),className:"bg-gradient-to-br from-blue-500 to-purple-600 text-white rounded-xl p-4 hover:scale-105 transition-transform shadow-lg",children:[e.jsx("div",{className:"text-3xl font-bold",children:m.new}),e.jsx("div",{className:"text-sm opacity-90 mt-1",children:""})]}),e.jsxs("button",{onClick:()=>ee("contact_made"),className:"bg-gradient-to-br from-pink-500 to-red-500 text-white rounded-xl p-4 hover:scale-105 transition-transform shadow-lg",children:[e.jsx("div",{className:"text-3xl font-bold",children:m.contact_made}),e.jsx("div",{className:"text-sm opacity-90 mt-1",children:""})]}),e.jsxs("button",{onClick:()=>ee("qualification"),className:"bg-gradient-to-br from-cyan-400 to-blue-500 text-white rounded-xl p-4 hover:scale-105 transition-transform shadow-lg",children:[e.jsx("div",{className:"text-3xl font-bold",children:m.qualification}),e.jsx("div",{className:"text-sm opacity-90 mt-1",children:""})]}),e.jsxs("button",{onClick:()=>ee("proposal_sent"),className:"bg-gradient-to-br from-emerald-400 to-teal-500 text-white rounded-xl p-4 hover:scale-105 transition-transform shadow-lg",children:[e.jsx("div",{className:"text-3xl font-bold",children:m.proposal_sent}),e.jsx("div",{className:"text-sm opacity-90 mt-1",children:""})]}),e.jsxs("button",{onClick:()=>ee("negotiation"),className:"bg-gradient-to-br from-orange-400 to-pink-500 text-white rounded-xl p-4 hover:scale-105 transition-transform shadow-lg",children:[e.jsx("div",{className:"text-3xl font-bold",children:m.negotiation}),e.jsx("div",{className:"text-sm opacity-90 mt-1",children:""})]}),e.jsxs("button",{onClick:()=>ee("won"),className:"bg-gradient-to-br from-teal-500 to-blue-700 text-white rounded-xl p-4 hover:scale-105 transition-transform shadow-lg",children:[e.jsx("div",{className:"text-3xl font-bold",children:m.won}),e.jsx("div",{className:"text-sm opacity-90 mt-1",children:""})]}),e.jsxs("button",{onClick:()=>ee("lost"),className:"text-gray-800 rounded-xl p-4 hover:scale-105 transition-transform shadow-lg",children:[e.jsx("div",{className:"text-3xl font-bold",children:m.lost}),e.jsx("div",{className:"text-sm opacity-90 mt-1",children:""})]})]})]}),o&&e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:n.search||"",onChange:q=>i({...n,search:q.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",placeholder:", ..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:n.status||"",onChange:q=>i({...n,status:q.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"new",children:""}),e.jsx("option",{value:"contact_made",children:" "}),e.jsx("option",{value:"qualification",children:""}),e.jsx("option",{value:"proposal_sent",children:" "}),e.jsx("option",{value:"negotiation",children:""}),e.jsx("option",{value:"won",children:""}),e.jsx("option",{value:"lost",children:""}),e.jsx("option",{value:"postponed",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:n.source||"",onChange:q=>i({...n,source:q.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"website",children:""}),e.jsx("option",{value:"telegram",children:"Telegram"}),e.jsx("option",{value:"referral",children:""}),e.jsx("option",{value:"ads",children:""}),e.jsx("option",{value:"social",children:". "}),e.jsx("option",{value:"cold",children:""}),e.jsx("option",{value:"other",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" ID"}),e.jsx("input",{type:"number",value:n.client_id||"",onChange:q=>i({...n,client_id:q.target.value?+q.target.value:void 0}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",placeholder:"ID "})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("button",{onClick:R,className:"flex-1 px-4 py-2 bg-cyan-600 text-white rounded-lg hover:bg-cyan-700 transition-all font-semibold",children:""}),e.jsx("button",{onClick:H,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all font-semibold",children:""})]})]})}),e.jsx("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden border border-gray-100",children:r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600"})}):s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-cyan-100 to-blue-100 rounded-3xl flex items-center justify-center mb-6 mx-auto",children:e.jsx(xt,{className:"w-12 h-12 text-cyan-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"  "}),e.jsx("p",{className:"text-gray-600 mb-6",children:"  ,   "}),e.jsxs("button",{onClick:W,className:"inline-flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-cyan-500 to-blue-600 text-white rounded-xl font-semibold hover:shadow-xl transition-all",children:[e.jsx(We,{className:"w-5 h-5"}),"  "]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-cyan-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"ID"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"/"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"  "}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:s.map(q=>e.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-cyan-50/50 hover:to-blue-50/50 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:["#",q.id]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:q.title}),q.source&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[": ",q.source]}),q.converted_to_deal_id&&e.jsx("div",{className:"mt-2",children:e.jsxs("a",{href:"/deals",className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 rounded-md text-xs font-medium hover:bg-green-200 transition-colors",title:`   #${q.converted_to_deal_id}`,children:[e.jsx(kn,{className:"w-3 h-3"}),e.jsxs("span",{children:[" #",q.converted_to_deal_id]}),e.jsx(Gj,{className:"w-3 h-3"})]})})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${F(q.status)}`,children:U(q.status)})}),e.jsxs("td",{className:"px-6 py-4",children:[q.client_name&&e.jsx("div",{className:"font-semibold text-gray-900",children:q.client_name}),e.jsx("div",{className:"text-sm text-gray-600",children:q.contact_name||q.contact_phone||"-"})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 font-medium",children:q.budget?Z(q.budget):"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[q.probability,"%"]}),e.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-cyan-500 to-blue-600 transition-all",style:{width:`${q.probability}%`}})})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:q.manager_name||"-"}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-600",children:[q.days_in_funnel||0," ."]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>$(q),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:" ",children:e.jsx(Gj,{className:"w-4 h-4"})}),q.status!=="won"&&q.status!=="lost"&&e.jsx("button",{onClick:()=>ne(q),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"  ",children:e.jsx(kn,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>J(q),className:"p-2 text-cyan-600 hover:bg-cyan-50 rounded-lg transition-colors",title:"",children:e.jsx(sr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>se(q.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"",children:e.jsx(tt,{className:"w-4 h-4"})})]})})]},q.id))})]})}),u.pages>1&&e.jsxs("div",{className:"px-6 py-4 border-t border-gray-100 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[" ",s.length,"  ",u.total," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>ce(u.page-1),disabled:u.page===1,className:"px-4 py-2 bg-white border-2 border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:" "}),[...Array(Math.min(u.pages,5))].map((q,Q)=>{const le=Q+1;return e.jsx("button",{onClick:()=>ce(le),className:`px-4 py-2 rounded-lg transition-all ${u.page===le?"bg-gradient-to-r from-cyan-500 to-blue-600 text-white":"bg-white border-2 border-gray-200 hover:bg-gray-50"}`,children:le},le)}),e.jsx("button",{onClick:()=>ce(u.page+1),disabled:u.page===u.pages,className:"px-4 py-2 bg-white border-2 border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:" "})]})]})]})})]}),g&&e.jsx(qY,{onClose:te,onSuccess:()=>{te(),V(),A("  ","success")},showToast:A}),w&&E&&e.jsx(WY,{lead:E,onClose:K,onSuccess:()=>{K(),V(),A("  ","success")},showToast:A}),k&&E&&e.jsx(YY,{lead:E,onClose:ie,onSuccess:()=>{ie(),V(),A("  ","success")},showToast:A}),_&&E&&e.jsx(GY,{lead:E,onClose:oe,onSuccess:()=>{oe(),V(),A("    ","success")},showToast:A}),e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:O.map(q=>e.jsx("div",{className:`px-6 py-3 rounded-lg shadow-lg text-white ${q.type==="success"?"bg-green-500":q.type==="error"?"bg-red-500":"bg-blue-500"} animate-slide-in`,children:q.message},q.id))})]})},qY=({onClose:s,onSuccess:t,showToast:r})=>{const[a,n]=j.useState({title:"",source:"",client_id:"",contact_name:"",contact_phone:"",contact_email:"",contact_telegram:"",contact_whatsapp:"",description:"",requirements:"",budget:"",probability:"50",expected_close_date:"",next_action_date:"",notes:""}),[i,o]=j.useState(!1),c=async u=>{if(u.preventDefault(),!a.title.trim()){r(" ","error");return}o(!0);try{const h={title:a.title,source:a.source||void 0,client_id:a.client_id?+a.client_id:void 0,contact_name:a.contact_name||void 0,contact_phone:a.contact_phone||void 0,contact_email:a.contact_email||void 0,contact_telegram:a.contact_telegram||void 0,contact_whatsapp:a.contact_whatsapp||void 0,description:a.description||void 0,requirements:a.requirements||void 0,budget:a.budget?+a.budget:void 0,probability:a.probability?+a.probability:50,expected_close_date:a.expected_close_date||void 0,next_action_date:a.next_action_date||void 0,notes:a.notes||void 0},m=await wd.createLead(h);m.success?t():r(m.message||"  ","error")}catch(h){console.error("Error creating lead:",h),r(h.response?.data?.message||"  ","error")}finally{o(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black/50 backdrop-blur-sm",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-3xl bg-white rounded-3xl shadow-2xl",children:[e.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-cyan-500 to-blue-600 px-6 py-5 rounded-t-3xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:" "}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(De,{className:"w-6 h-6 text-white"})})]})}),e.jsxs("form",{onSubmit:c,className:"p-6 space-y-6 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a.title,onChange:u=>n({...a,title:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",placeholder:" ",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:a.source,onChange:u=>n({...a,source:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"website",children:""}),e.jsx("option",{value:"telegram",children:"Telegram"}),e.jsx("option",{value:"referral",children:""}),e.jsx("option",{value:"ads",children:""}),e.jsx("option",{value:"social",children:". "}),e.jsx("option",{value:"cold",children:""}),e.jsx("option",{value:"other",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ID "}),e.jsx("input",{type:"number",value:a.client_id,onChange:u=>n({...a,client_id:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",placeholder:"   "})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-bold text-gray-900",children:" "}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"text",value:a.contact_name,onChange:u=>n({...a,contact_name:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",placeholder:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"tel",value:a.contact_phone,onChange:u=>n({...a,contact_phone:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",placeholder:"+7 (999) 123-45-67"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:a.contact_email,onChange:u=>n({...a,contact_email:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",placeholder:"email@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Telegram"}),e.jsx("input",{type:"text",value:a.contact_telegram,onChange:u=>n({...a,contact_telegram:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",placeholder:"@username"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:a.description,onChange:u=>n({...a,description:u.target.value}),rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all resize-none",placeholder:" "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:a.requirements,onChange:u=>n({...a,requirements:u.target.value}),rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all resize-none",placeholder:" "})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"number",value:a.budget,onChange:u=>n({...a,budget:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",placeholder:"0",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" (%)"}),e.jsx("input",{type:"number",value:a.probability,onChange:u=>n({...a,probability:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",min:"0",max:"100"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  "}),e.jsx("input",{type:"date",value:a.expected_close_date,onChange:u=>n({...a,expected_close_date:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  "}),e.jsx("input",{type:"date",value:a.next_action_date,onChange:u=>n({...a,next_action_date:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:a.notes,onChange:u=>n({...a,notes:u.target.value}),rows:2,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all resize-none",placeholder:" "})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 rounded-b-3xl flex items-center justify-end gap-3 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 transition-all",children:""}),e.jsx("button",{onClick:c,disabled:i,className:"px-6 py-3 bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-semibold rounded-xl hover:from-cyan-600 hover:to-blue-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:i?"...":" "})]})]})})})},WY=({lead:s,onClose:t,onSuccess:r,showToast:a})=>{const[n,i]=j.useState({title:s.title||"",source:s.source||"",client_id:s.client_id?.toString()||"",contact_name:s.contact_name||"",contact_phone:s.contact_phone||"",contact_email:s.contact_email||"",contact_telegram:s.contact_telegram||"",description:s.description||"",requirements:s.requirements||"",budget:s.budget?.toString()||"",probability:s.probability?.toString()||"50",expected_close_date:s.expected_close_date||"",notes:s.notes||""}),[o,c]=j.useState(!1),u=async h=>{if(h.preventDefault(),!n.title.trim()){a(" ","error");return}c(!0);try{const m={title:n.title,source:n.source||void 0,client_id:n.client_id?+n.client_id:void 0,contact_name:n.contact_name||void 0,contact_phone:n.contact_phone||void 0,contact_email:n.contact_email||void 0,contact_telegram:n.contact_telegram||void 0,description:n.description||void 0,requirements:n.requirements||void 0,budget:n.budget?+n.budget:void 0,probability:n.probability?+n.probability:50,expected_close_date:n.expected_close_date||void 0,notes:n.notes||void 0},f=await wd.updateLead(s.id,m);f.success?r():a(f.message||"  ","error")}catch(m){console.error("Error updating lead:",m),a(m.response?.data?.message||"  ","error")}finally{c(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black/50 backdrop-blur-sm",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-3xl bg-white rounded-3xl shadow-2xl",children:[e.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-cyan-500 to-blue-600 px-6 py-5 rounded-t-3xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:" "}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(De,{className:"w-6 h-6 text-white"})})]})}),e.jsxs("form",{onSubmit:u,className:"p-6 space-y-6 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:n.title,onChange:h=>i({...n,title:h.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:n.source,onChange:h=>i({...n,source:h.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"website",children:""}),e.jsx("option",{value:"telegram",children:"Telegram"}),e.jsx("option",{value:"referral",children:""}),e.jsx("option",{value:"ads",children:""}),e.jsx("option",{value:"social",children:". "}),e.jsx("option",{value:"cold",children:""}),e.jsx("option",{value:"other",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"number",value:n.budget,onChange:h=>i({...n,budget:h.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",min:"0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" (%)"}),e.jsx("input",{type:"number",value:n.probability,onChange:h=>i({...n,probability:h.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",min:"0",max:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:n.description,onChange:h=>i({...n,description:h.target.value}),rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all resize-none"})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 rounded-b-3xl flex items-center justify-end gap-3 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 transition-all",children:""}),e.jsx("button",{onClick:u,disabled:o,className:"px-6 py-3 bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-semibold rounded-xl hover:from-cyan-600 hover:to-blue-700 transition-all shadow-lg disabled:opacity-50",children:o?"...":""})]})]})})})},YY=({lead:s,onClose:t,onSuccess:r,showToast:a})=>{const[n,i]=j.useState(s.status),[o,c]=j.useState(""),[u,h]=j.useState(!1),m=async f=>{f.preventDefault(),h(!0);try{const p=await wd.updateLeadStatus(s.id,n,o||void 0);p.success?r():a(p.message||"  ","error")}catch(p){console.error("Error updating status:",p),a(p.response?.data?.message||"  ","error")}finally{h(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black/50 backdrop-blur-sm",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md bg-white rounded-3xl shadow-2xl",children:[e.jsx("div",{className:"bg-gradient-to-r from-cyan-500 to-blue-600 px-6 py-5 rounded-t-3xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:" "}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(De,{className:"w-6 h-6 text-white"})})]})}),e.jsxs("form",{onSubmit:m,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsxs("select",{value:n,onChange:f=>i(f.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",children:[e.jsx("option",{value:"new",children:""}),e.jsx("option",{value:"contact_made",children:" "}),e.jsx("option",{value:"qualification",children:""}),e.jsx("option",{value:"proposal_sent",children:" "}),e.jsx("option",{value:"negotiation",children:""}),e.jsx("option",{value:"won",children:""}),e.jsx("option",{value:"lost",children:""}),e.jsx("option",{value:"postponed",children:""})]})]}),n==="lost"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("textarea",{value:o,onChange:f=>c(f.target.value),rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all resize-none",placeholder:" ..."})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 transition-all",children:""}),e.jsx("button",{type:"submit",disabled:u,className:"px-6 py-3 bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-semibold rounded-xl hover:from-cyan-600 hover:to-blue-700 transition-all shadow-lg disabled:opacity-50",children:u?"...":""})]})]})]})})})},GY=({lead:s,onClose:t,onSuccess:r,showToast:a})=>{const[n,i]=j.useState({title:s.title,amount:s.budget?.toString()||"",prepayment_percent:"50",priority:"normal",start_date:"",end_date:s.expected_close_date||"",description:s.description||""}),[o,c]=j.useState(!1),u=async h=>{if(h.preventDefault(),!n.amount||+n.amount<=0){a("  ","error");return}c(!0);try{const m={title:n.title,amount:+n.amount,prepayment_percent:n.prepayment_percent?+n.prepayment_percent:void 0,priority:n.priority,start_date:n.start_date||void 0,end_date:n.end_date||void 0,description:n.description||void 0},f=await wd.convertLead(s.id,m);f.success?(r(),setTimeout(()=>{window.location.href="/deals"},1500)):a(f.message||" ","error")}catch(m){console.error("Error converting lead:",m),a(m.response?.data?.message||" ","error")}finally{c(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black/50 backdrop-blur-sm",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-2xl bg-white rounded-3xl shadow-2xl",children:[e.jsx("div",{className:"bg-gradient-to-r from-cyan-500 to-blue-600 px-6 py-5 rounded-t-3xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:"  "}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(De,{className:"w-6 h-6 text-white"})})]})}),e.jsxs("form",{onSubmit:u,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"text",value:n.title,onChange:h=>i({...n,title:h.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:n.amount,onChange:h=>i({...n,amount:h.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",required:!0,min:"0"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" (%)"}),e.jsx("input",{type:"number",value:n.prepayment_percent,onChange:h=>i({...n,prepayment_percent:h.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",min:"0",max:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:n.priority,onChange:h=>i({...n,priority:h.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",children:[e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"normal",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"urgent",children:""})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"date",value:n.start_date,onChange:h=>i({...n,start_date:h.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"date",value:n.end_date,onChange:h=>i({...n,end_date:h.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:n.description,onChange:h=>i({...n,description:h.target.value}),rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all resize-none"})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 transition-all",children:""}),e.jsx("button",{type:"submit",disabled:o,className:"px-6 py-3 bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-semibold rounded-xl hover:from-cyan-600 hover:to-blue-700 transition-all shadow-lg disabled:opacity-50",children:o?"...":""})]})]})]})})})},Yh={getDeals:async s=>{const t=new URLSearchParams;return s?.search&&t.append("search",s.search),s?.status&&t.append("status",s.status),s?.client_id&&t.append("client_id",s.client_id.toString()),s?.manager_id&&t.append("manager_id",s.manager_id.toString()),s?.executor_id&&t.append("executor_id",s.executor_id.toString()),s?.priority&&t.append("priority",s.priority),s?.page&&t.append("page",s.page.toString()),s?.limit&&t.append("limit",s.limit.toString()),(await fe.get(`/admin/deals/api?${t}`)).data},createDeal:async s=>(await fe.post("/admin/deals/api",s)).data,updateDealStatus:async(s,t)=>(await fe.put(`/admin/deals/api/${s}/status`,{status:t})).data,addPayment:async(s,t,r,a)=>(await fe.post(`/admin/deals/api/${s}/payment`,{amount:t,type:r,description:a})).data,convertToProject:async(s,t)=>(await fe.post(`/admin/deals/api/${s}/convert-to-project`,t)).data,getPipeline:async()=>(await fe.get("/admin/deals/api/pipeline")).data},KY=()=>{const[s,t]=j.useState([]),[r,a]=j.useState(!0),[n,i]=j.useState({page:1,limit:20}),[o,c]=j.useState(!1),[u,h]=j.useState({total:0,page:1,limit:20,pages:1}),[m,f]=j.useState({total:0,active:0,completed_month:0,total_amount:0,paid_amount:0,payment_progress:0}),[p,v]=j.useState("table"),[g,y]=j.useState(null),[w,N]=j.useState(null),[k,S]=j.useState(!1),[_,T]=j.useState(!1),[E,z]=j.useState(null),[O,C]=j.useState([]),A=j.useCallback((Z,q="info")=>{const Q=Date.now().toString();C(le=>[...le,{id:Q,message:Z,type:q}]),setTimeout(()=>{C(le=>le.filter(me=>me.id!==Q))},4e3)},[]),X=j.useCallback(async()=>{try{a(!0);const Z=await Yh.getDeals(n);if(Z.success){t(Z.deals),h(Z.pagination);const q=Z.pagination.total,Q=["new","discussion","contract_prep","contract_signed","prepayment","in_work","testing","acceptance","payment"],le=Z.deals.filter(ue=>Q.includes(ue.status)).length,me=Z.deals.reduce((ue,Y)=>ue+(Y.amount||0),0),G=Z.deals.reduce((ue,Y)=>ue+(Y.paid_amount||0),0);f({total:q,active:le,completed_month:0,total_amount:me,paid_amount:G,payment_progress:me>0?G/me*100:0})}}catch(Z){console.error("Error loading deals:",Z),A("  ","error")}finally{a(!1)}},[n,A]),I=j.useCallback(async()=>{try{const Z=await Yh.getPipeline();Z.success&&(y(Z.pipeline),N(Z.stats))}catch(Z){console.error("Error loading pipeline:",Z),A("  ","error")}},[A]);j.useEffect(()=>{p==="table"?X():I()},[p,X,I]);const V=j.useCallback(()=>{p==="table"?X():I()},[p,X,I]),R=j.useCallback(()=>{i(Z=>({...Z,page:1}))},[]),H=j.useCallback(()=>{i({page:1,limit:20})},[]),ee=j.useCallback(()=>{v(Z=>Z==="table"?"kanban":"table")},[]),se=j.useCallback(()=>{S(!0),document.body.style.overflow="hidden"},[]),W=j.useCallback(()=>{S(!1),document.body.style.overflow="auto"},[]),te=j.useCallback(Z=>{z(Z),T(!0),document.body.style.overflow="hidden"},[]),J=j.useCallback(()=>{T(!1),z(null),document.body.style.overflow="auto"},[]),K=j.useCallback(async Z=>{if(confirm("     ?"))try{const q=await Yh.convertToProject(Z,{});q.success?(A("    ","success"),setTimeout(()=>{window.location.href="/projects"},1500)):A(q.message||" ","error")}catch(q){console.error("Error converting deal:",q),A(q.response?.data?.message||" ","error")}},[A]),$=j.useCallback(Z=>{i(q=>({...q,page:Z}))},[]),ie=Z=>({new:"",discussion:"",contract_prep:" ",contract_signed:" ",prepayment:" ",in_work:" ",testing:"",acceptance:"",payment:" ",completed:"",cancelled:""})[Z]||Z,ne=Z=>({new:"bg-blue-100 text-blue-700",discussion:"bg-pink-100 text-pink-700",contract_prep:"bg-orange-100 text-orange-700",contract_signed:"bg-green-100 text-green-700",prepayment:"bg-rose-100 text-rose-700",in_work:"bg-teal-100 text-teal-700",testing:"bg-cyan-100 text-cyan-700",acceptance:"bg-purple-100 text-purple-700",payment:"bg-amber-100 text-amber-700",completed:"bg-emerald-100 text-emerald-700",cancelled:"bg-red-100 text-red-700"})[Z]||"bg-gray-100 text-gray-700",oe=Z=>({low:"",normal:"",high:"",urgent:""})[Z]||Z,ce=Z=>({low:"bg-gray-100 text-gray-700",normal:"bg-blue-100 text-blue-700",high:"bg-orange-100 text-orange-700",urgent:"bg-red-100 text-red-700"})[Z]||"bg-gray-100 text-gray-700",U=Z=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0}).format(Z),F=Z=>["contract_signed","prepayment","in_work"].includes(Z.status)&&!Z.project_id;return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"max-w-[2000px] mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx(B4,{className:"w-7 h-7 text-white"})})," "]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"   "})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>c(!o),className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-200",children:[e.jsx(wr,{className:"w-5 h-5"}),""]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-200",children:[e.jsx(Tt,{className:"w-5 h-5"}),""]}),e.jsx("button",{onClick:V,className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-200",children:e.jsx(ls,{className:"w-5 h-5"})}),e.jsx("button",{onClick:ee,className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-200",children:p==="table"?e.jsxs(e.Fragment,{children:[e.jsx(mN,{className:"w-5 h-5"}),""]}):e.jsxs(e.Fragment,{children:[e.jsx(Mm,{className:"w-5 h-5"}),""]})}),e.jsxs("button",{onClick:se,className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg hover:from-green-600 hover:to-emerald-700 transition-all shadow-lg",children:[e.jsx(We,{className:"w-5 h-5"})," "]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl p-6 text-white shadow-xl",children:[e.jsx("div",{className:"text-4xl font-bold mb-2",children:m.total}),e.jsx("div",{className:"text-sm opacity-90",children:" "})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-6 text-white shadow-xl",children:[e.jsx("div",{className:"text-4xl font-bold mb-2",children:m.active}),e.jsx("div",{className:"text-sm opacity-90",children:""})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-amber-600 rounded-2xl p-6 text-white shadow-xl",children:[e.jsx("div",{className:"text-4xl font-bold mb-2",children:U(m.total_amount)}),e.jsx("div",{className:"text-sm opacity-90",children:" "})]}),e.jsxs("div",{className:"bg-gradient-to-br from-cyan-500 to-blue-600 rounded-2xl p-6 text-white shadow-xl",children:[e.jsxs("div",{className:"text-4xl font-bold mb-2",children:[m.payment_progress.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm opacity-90",children:""})]})]}),o&&e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:e.jsxs("div",{className:"grid grid-cols-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:n.search||"",onChange:Z=>i({...n,search:Z.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all",placeholder:", ..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:n.status||"",onChange:Z=>i({...n,status:Z.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"new",children:""}),e.jsx("option",{value:"discussion",children:""}),e.jsx("option",{value:"contract_prep",children:" "}),e.jsx("option",{value:"contract_signed",children:" "}),e.jsx("option",{value:"prepayment",children:" "}),e.jsx("option",{value:"in_work",children:" "}),e.jsx("option",{value:"testing",children:""}),e.jsx("option",{value:"acceptance",children:""}),e.jsx("option",{value:"payment",children:" "}),e.jsx("option",{value:"completed",children:""}),e.jsx("option",{value:"cancelled",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:n.priority||"",onChange:Z=>i({...n,priority:Z.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"normal",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"urgent",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" ID"}),e.jsx("input",{type:"number",value:n.client_id||"",onChange:Z=>i({...n,client_id:Z.target.value?+Z.target.value:void 0}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all",placeholder:"ID "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" ID"}),e.jsx("input",{type:"number",value:n.manager_id||"",onChange:Z=>i({...n,manager_id:Z.target.value?+Z.target.value:void 0}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all",placeholder:"ID "})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("button",{onClick:R,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all font-semibold",children:""}),e.jsx("button",{onClick:H,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all font-semibold",children:""})]})]})}),p==="table"&&e.jsx("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden border border-gray-100",children:r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-green-100 to-emerald-100 rounded-3xl flex items-center justify-center mb-6 mx-auto",children:e.jsx(B4,{className:"w-12 h-12 text-green-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"  "}),e.jsx("p",{className:"text-gray-600 mb-6",children:"  ,   "}),e.jsxs("button",{onClick:se,className:"inline-flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl font-semibold hover:shadow-xl transition-all",children:[e.jsx(We,{className:"w-5 h-5"}),"  "]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-green-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"ID"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:s.map(Z=>e.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-green-50/50 hover:to-emerald-50/50 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:["#",Z.id]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:Z.title}),Z.priority!=="normal"&&e.jsx("span",{className:`inline-block mt-1 px-2 py-1 rounded-full text-xs font-semibold ${ce(Z.priority)}`,children:oe(Z.priority)}),Z.project_id&&e.jsx("div",{className:"mt-2",children:e.jsxs("a",{href:`/projects/${Z.project_id}`,className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-700 rounded-md text-xs font-medium hover:bg-blue-200 transition-colors",title:` #${Z.project_id}`,children:[e.jsx(kn,{className:"w-3 h-3"}),e.jsxs("span",{children:[" #",Z.project_id]}),e.jsx(Gj,{className:"w-3 h-3"})]})})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:Z.client_name||"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${ne(Z.status)}`,children:ie(Z.status)})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 font-medium",children:U(Z.amount)}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900 font-medium mb-1",children:U(Z.paid_amount||0)}),e.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-red-500 via-orange-500 to-green-500 transition-all",style:{width:`${Z.payment_progress||0}%`}})})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:Z.manager_name||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:Z.executor_name||"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>te(Z),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:" ",children:e.jsx(Qe,{className:"w-4 h-4"})}),F(Z)&&e.jsx("button",{onClick:()=>K(Z.id),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:" ",children:e.jsx(kn,{className:"w-4 h-4"})})]})})]},Z.id))})]})}),u.pages>1&&e.jsxs("div",{className:"px-6 py-4 border-t border-gray-100 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[" ",s.length,"  ",u.total," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>$(u.page-1),disabled:u.page===1,className:"px-4 py-2 bg-white border-2 border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:" "}),[...Array(Math.min(u.pages,5))].map((Z,q)=>{const Q=q+1;return e.jsx("button",{onClick:()=>$(Q),className:`px-4 py-2 rounded-lg transition-all ${u.page===Q?"bg-gradient-to-r from-green-500 to-emerald-600 text-white":"bg-white border-2 border-gray-200 hover:bg-gray-50"}`,children:Q},Q)}),e.jsx("button",{onClick:()=>$(u.page+1),disabled:u.page===u.pages,className:"px-4 py-2 bg-white border-2 border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:" "})]})]})]})}),p==="kanban"&&g&&e.jsx(XY,{pipeline:g,stats:w,formatCurrency:U,getStatusLabel:ie})]}),k&&e.jsx(ZY,{onClose:W,onSuccess:()=>{W(),V(),A("  ","success")},showToast:A}),_&&E&&e.jsx(QY,{deal:E,onClose:J,onSuccess:()=>{J(),V(),A("  ","success")},showToast:A}),e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:O.map(Z=>e.jsx("div",{className:`px-6 py-3 rounded-lg shadow-lg text-white ${Z.type==="success"?"bg-green-500":Z.type==="error"?"bg-red-500":"bg-blue-500"} animate-slide-in`,children:Z.message},Z.id))})]})},XY=({pipeline:s,stats:t,formatCurrency:r,getStatusLabel:a})=>{const n=[{key:"new",label:"",gradient:"from-purple-500 to-pink-600"},{key:"discussion",label:"",gradient:"from-pink-500 to-red-500"},{key:"contract_prep",label:"",gradient:"from-cyan-400 to-blue-500"},{key:"in_work",label:" ",gradient:"from-emerald-400 to-teal-500"},{key:"testing",label:"",gradient:"from-orange-400 to-pink-500"},{key:"payment",label:"",gradient:"from-teal-500 to-blue-700"}];return e.jsx("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4",children:n.map(i=>{const o=s[i.key]||[],c=t?t[i.key]:null;return e.jsx("div",{className:"flex-shrink-0",style:{width:"300px"},children:e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-4 min-h-[500px]",children:[e.jsxs("div",{className:`bg-gradient-to-br ${i.gradient} text-white rounded-xl p-4 mb-4`,children:[e.jsx("div",{className:"font-bold text-lg",children:i.label}),e.jsx("div",{className:"text-sm opacity-90 mt-1",children:c?`${c.count} `:`${o.length} `})]}),e.jsx("div",{className:"space-y-3",children:o.length===0?e.jsx("div",{className:"text-center text-gray-400 py-8",children:" "}):o.map(u=>e.jsxs("div",{className:"bg-white rounded-xl p-4 border-l-4 border-green-500 shadow-md hover:shadow-lg transition-all cursor-move",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h6",{className:"font-bold text-gray-900",children:u.title}),e.jsxs("span",{className:"text-xs font-semibold text-gray-500",children:["#",u.id]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:u.client_name}),e.jsx("div",{className:"text-lg font-bold text-green-600 mb-2",children:r(u.amount)}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden mb-2",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-red-500 via-orange-500 to-green-500",style:{width:`${u.payment_progress||0}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsx("span",{children:u.manager_name||" "}),e.jsxs("span",{children:[u.days_in_status||0," ."]})]})]},u.id))})]})},i.key)})})})},ZY=({onClose:s,onSuccess:t,showToast:r})=>{const[a,n]=j.useState({title:"",client_id:"",description:"",technical_requirements:"",amount:"",cost:"",discount:"0",prepayment_percent:"50",start_date:"",end_date:"",manager_id:"",executor_id:"",priority:"normal"}),[i,o]=j.useState(!1),c=async u=>{if(u.preventDefault(),!a.title.trim()){r(" ","error");return}if(!a.client_id){r(" ","error");return}if(!a.amount||+a.amount<=0){r("  ","error");return}o(!0);try{const h={title:a.title,client_id:+a.client_id,description:a.description||void 0,technical_requirements:a.technical_requirements||void 0,amount:+a.amount,cost:a.cost?+a.cost:void 0,discount:a.discount?+a.discount:0,prepayment_percent:a.prepayment_percent?+a.prepayment_percent:50,start_date:a.start_date||void 0,end_date:a.end_date||void 0,manager_id:a.manager_id?+a.manager_id:void 0,executor_id:a.executor_id?+a.executor_id:void 0,priority:a.priority},m=await Yh.createDeal(h);m.success?t():r(m.message||"  ","error")}catch(h){console.error("Error creating deal:",h),r(h.response?.data?.message||"  ","error")}finally{o(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black/50 backdrop-blur-sm",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-3xl bg-white rounded-3xl shadow-2xl",children:[e.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-green-500 to-emerald-600 px-6 py-5 rounded-t-3xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:" "}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(De,{className:"w-6 h-6 text-white"})})]})}),e.jsxs("form",{onSubmit:c,className:"p-6 space-y-6 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a.title,onChange:u=>n({...a,title:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all",placeholder:" ",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["ID  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:a.client_id,onChange:u=>n({...a,client_id:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all",placeholder:"ID ",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:a.description,onChange:u=>n({...a,description:u.target.value}),rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all resize-none",placeholder:" "})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:a.amount,onChange:u=>n({...a,amount:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all",placeholder:"0",min:"0",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"number",value:a.cost,onChange:u=>n({...a,cost:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all",placeholder:"0",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"number",value:a.discount,onChange:u=>n({...a,discount:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all",placeholder:"0",min:"0"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" (%)"}),e.jsx("input",{type:"number",value:a.prepayment_percent,onChange:u=>n({...a,prepayment_percent:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all",min:"0",max:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:a.priority,onChange:u=>n({...a,priority:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all",children:[e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"normal",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"urgent",children:""})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"date",value:a.start_date,onChange:u=>n({...a,start_date:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"date",value:a.end_date,onChange:u=>n({...a,end_date:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ID "}),e.jsx("input",{type:"number",value:a.manager_id,onChange:u=>n({...a,manager_id:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all",placeholder:"ID "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ID "}),e.jsx("input",{type:"number",value:a.executor_id,onChange:u=>n({...a,executor_id:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all",placeholder:"ID "})]})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 rounded-b-3xl flex items-center justify-end gap-3 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 transition-all",children:""}),e.jsx("button",{onClick:c,disabled:i,className:"px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-semibold rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:i?"...":" "})]})]})})})},QY=({deal:s,onClose:t,onSuccess:r,showToast:a})=>{const[n,i]=j.useState({amount:"",type:"payment",description:""}),[o,c]=j.useState(!1),u=async h=>{if(h.preventDefault(),!n.amount||+n.amount<=0){a("     0","error");return}c(!0);try{const m=await Yh.addPayment(s.id,+n.amount,n.type,n.description||void 0);m.success?r():a(m.message||"  ","error")}catch(m){console.error("Error adding payment:",m),a(m.response?.data?.message||"  ","error")}finally{c(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black/50 backdrop-blur-sm",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md bg-white rounded-3xl shadow-2xl",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 px-6 py-5 rounded-t-3xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:" "}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(De,{className:"w-6 h-6 text-white"})})]})}),e.jsxs("form",{onSubmit:u,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:n.amount,onChange:h=>i({...n,amount:h.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all",placeholder:"0",min:"1",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsxs("select",{value:n.type,onChange:h=>i({...n,type:h.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all",children:[e.jsx("option",{value:"prepayment",children:""}),e.jsx("option",{value:"payment",children:""}),e.jsx("option",{value:"final",children:" "})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:n.description,onChange:h=>i({...n,description:h.target.value}),rows:2,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all resize-none",placeholder:" "})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 transition-all",children:""}),e.jsx("button",{type:"submit",disabled:o,className:"px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-semibold rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all shadow-lg disabled:opacity-50",children:o?"...":" "})]})]})]})})})},Wo={getContractors:async s=>{const t=new URLSearchParams;return s?.search&&t.append("search",s.search),s?.specialization&&t.append("specialization",s.specialization),s?.status&&t.append("status",s.status),s?.page&&t.append("page",s.page.toString()),s?.limit&&t.append("limit",s.limit.toString()),(await fe.get(`/admin/api/contractors/?${t}`)).data},getContractor:async s=>(await fe.get(`/admin/api/contractors/${s}`)).data,createContractor:async s=>(await fe.post("/admin/api/contractors/",s)).data,updateContractor:async(s,t)=>(await fe.put(`/admin/api/contractors/${s}`,t)).data,deleteContractor:async s=>(await fe.delete(`/admin/api/contractors/${s}`)).data,changePassword:async(s,t)=>(await fe.post(`/admin/api/contractors/${s}/change-password`,{new_password:t})).data,createPayment:async(s,t)=>(await fe.post(`/admin/api/contractors/${s}/payments`,t)).data},JY=({contractor:s,onView:t,onEdit:r,onDelete:a,onCreatePayment:n})=>{const i=s.first_name&&s.last_name?`${s.first_name} ${s.last_name}`:s.username,o=c=>c?`${c.toLocaleString("ru-RU")} `:"0 ";return e.jsxs("div",{className:"bg-white rounded-2xl shadow-md hover:shadow-xl transition-all duration-200 overflow-hidden border border-gray-100",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:i}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:"inline-block px-3 py-1 bg-green-500 text-white text-xs rounded-full font-medium",children:""}),e.jsx("span",{className:"inline-block px-3 py-1 bg-blue-500 text-white text-xs rounded-full font-medium",children:""})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"flex items-center gap-1 text-yellow-300",children:[...Array(5)].map((c,u)=>e.jsx(Is,{className:"w-4 h-4 fill-current"},u))}),e.jsx("span",{className:"text-sm mt-1 block",children:"5/5"})]})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-1",children:"Email"}),e.jsx("p",{className:"text-sm text-gray-900 truncate",title:s.email,children:s.email||" "})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-1",children:"Username"}),e.jsx("p",{className:"text-sm text-gray-900 truncate",title:s.username,children:s.username||" "})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-1",children:" "}),e.jsx("p",{className:"text-sm text-gray-900",children:s.created_at?new Date(s.created_at).toLocaleDateString("ru-RU"):" "})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-1",children:""}),e.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-medium ${s.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:s.is_active?"":""})]})]})]}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 grid grid-cols-3 gap-4 border-t border-gray-100",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-gray-900",children:s.total_tasks||0}),e.jsx("div",{className:"text-xs text-gray-500",children:""})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-gray-900",children:s.active_tasks||0}),e.jsx("div",{className:"text-xs text-gray-500",children:""})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-gray-900 truncate",title:o(s.total_payments),children:s.total_payments?o(s.total_payments).slice(0,10)+(o(s.total_payments).length>10?"...":""):"0 "}),e.jsx("div",{className:"text-xs text-gray-500",children:""})]})]}),e.jsxs("div",{className:"p-4 flex flex-wrap gap-2 border-t border-gray-100",children:[e.jsxs("button",{onClick:t,className:"flex items-center gap-1 px-3 py-2 text-sm bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors",children:[e.jsx(Vt,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("button",{onClick:n,className:"flex items-center gap-1 px-3 py-2 text-sm bg-green-50 text-green-600 rounded-lg hover:bg-green-100 transition-colors",children:[e.jsx(Qe,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("button",{onClick:r,className:"flex items-center gap-1 px-3 py-2 text-sm bg-yellow-50 text-yellow-600 rounded-lg hover:bg-yellow-100 transition-colors",children:[e.jsx(An,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("button",{onClick:a,className:"flex items-center gap-1 px-3 py-2 text-sm bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors",children:[e.jsx(tt,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:""})]})]})]})},eG=({isOpen:s,onClose:t,onSuccess:r})=>{const[a,n]=j.useState(!1),[i,o]=j.useState({username:"",email:"",first_name:"",last_name:"",role:"executor",is_active:!0,admin_login:"",admin_password:"",force_password_change:!1});j.useEffect(()=>{s&&o({username:"",email:"",first_name:"",last_name:"",role:"executor",is_active:!0,admin_login:"",admin_password:"",force_password_change:!1})},[s]),j.useEffect(()=>{if(s){const h=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${h}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const h=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(h||"0")*-1)}},[s]);const c=async h=>{if(h.preventDefault(),!i.username.trim()){alert(" username");return}if(!i.email.trim()){alert(" email");return}if(!i.admin_password.trim()){alert("   ");return}try{n(!0);const m=await Wo.createContractor(i);m.success?r():alert("  : "+m.message)}catch(m){console.error("Error creating contractor:",m),alert("  ")}finally{n(!1)}},u=(h,m)=>{o(f=>({...f,[h]:m}))};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-4 flex items-center justify-between sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(We,{className:"w-6 h-6"}),e.jsx("h3",{className:"text-xl font-bold",children:" "})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:c,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Username ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:i.username,onChange:h=>u("username",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all",placeholder:" username",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",value:i.email,onChange:h=>u("email",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all",placeholder:" email",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:i.first_name,onChange:h=>u("first_name",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all",placeholder:" "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:i.last_name,onChange:h=>u("last_name",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all",placeholder:" "})]})]}),e.jsx("hr",{className:"my-6"}),e.jsx("h6",{className:"text-lg font-semibold text-gray-900 mb-4",children:"  "}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  "}),e.jsx("input",{type:"text",value:i.admin_login,onChange:h=>u("admin_login",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all",placeholder:"  username   "})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["   ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"password",value:i.admin_password,onChange:h=>u("admin_password",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all",placeholder:" ",required:!0})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"forcePasswordChange",checked:i.force_password_change,onChange:h=>u("force_password_change",h.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"forcePasswordChange",className:"text-sm text-gray-700",children:"     "})]}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-blue-900",children:"          ."})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:a,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:a?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(We,{className:"w-5 h-5"})," "]})}),e.jsx("button",{type:"button",onClick:t,disabled:a,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold disabled:opacity-50",children:""})]})]})]})}):null},tG=({isOpen:s,onClose:t,onSuccess:r,contractor:a})=>{const[n,i]=j.useState(!1),[o,c]=j.useState(!1),[u,h]=j.useState(""),[m,f]=j.useState(!1),[p,v]=j.useState({username:a.username,email:a.email,first_name:a.first_name||"",last_name:a.last_name||"",telegram_id:a.telegram_id,is_active:a.is_active});j.useEffect(()=>{s&&(v({username:a.username,email:a.email,first_name:a.first_name||"",last_name:a.last_name||"",telegram_id:a.telegram_id,is_active:a.is_active}),c(!1),h(""))},[s,a]),j.useEffect(()=>{if(s){const N=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${N}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const N=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(N||"0")*-1)}},[s]);const g=async N=>{if(N.preventDefault(),!p.username?.trim()){alert("  ");return}if(!p.email?.trim()){alert(" email");return}try{i(!0),(await Wo.updateContractor(a.id,p)).success&&r()}catch(k){console.error("Error updating contractor:",k),alert("  ")}finally{i(!1)}},y=async N=>{if(N.preventDefault(),!u.trim()){alert("  ");return}if(u.length<6){alert("     6 ");return}try{f(!0),(await Wo.changePassword(a.id,u)).success&&(alert("  "),c(!1),h(""))}catch(k){console.error("Error changing password:",k),alert("  ")}finally{f(!1)}},w=(N,k)=>{v(S=>({...S,[N]:k}))};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-4 flex items-center justify-between sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Aa,{className:"w-6 h-6"}),e.jsx("h3",{className:"text-xl font-bold",children:" "})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:g,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:p.username,onChange:N=>w("username",N.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",placeholder:"  ",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",value:p.email,onChange:N=>w("email",N.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",placeholder:" email",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:p.first_name,onChange:N=>w("first_name",N.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",placeholder:" "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:p.last_name,onChange:N=>w("last_name",N.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",placeholder:" "})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Telegram ID"}),e.jsx("input",{type:"number",value:p.telegram_id||"",onChange:N=>w("telegram_id",N.target.value?parseInt(N.target.value):void 0),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",placeholder:" Telegram ID"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:p.is_active,onChange:N=>w("is_active",N.target.checked),className:"w-5 h-5 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-semibold text-gray-700",children:""})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsxs("button",{type:"button",onClick:()=>c(!o),className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-all font-semibold",children:[e.jsx(Xj,{className:"w-4 h-4"}),o?"  ":" "]})}),o&&e.jsxs("div",{className:"bg-gray-50 border-2 border-gray-200 rounded-lg p-4 space-y-3",children:[e.jsx("h4",{className:"font-semibold text-gray-700",children:" "}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"password",value:u,onChange:N=>h(N.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",placeholder:" 6 ",minLength:6})]}),e.jsx("button",{type:"button",onClick:y,disabled:m,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:m?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(Xj,{className:"w-4 h-4"})," "]})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:n,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:n?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(Aa,{className:"w-5 h-5"})," "]})}),e.jsx("button",{type:"button",onClick:t,disabled:n,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold disabled:opacity-50",children:""})]})]})]})}):null},sG=({isOpen:s,onClose:t,contractorId:r,onEdit:a,onDelete:n})=>{const[i,o]=j.useState(!1),[c,u]=j.useState(null),[h,m]=j.useState([]),[f,p]=j.useState([]),v=j.useRef(0);j.useEffect(()=>{s&&g()},[s,r]),j.useEffect(()=>{if(s)return v.current=window.scrollY,document.body.style.position="fixed",document.body.style.top=`-${v.current}px`,document.body.style.width="100%",document.body.style.overflow="hidden",()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,v.current)}},[s]);const g=async()=>{try{o(!0);const N=await Wo.getContractor(r);N.success&&(u(N.contractor),m(N.assignments||[]),p(N.payments||[]))}catch(N){console.error("Error loading contractor details:",N),alert("   ")}finally{o(!1)}},y=N=>N?new Date(N).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):" ",w=N=>{const S={pending:{label:" ",color:"bg-yellow-100 text-yellow-800"},paid:{label:"",color:"bg-green-100 text-green-800"},cancelled:{label:"",color:"bg-red-100 text-red-800"},active:{label:"",color:"bg-blue-100 text-blue-800"},completed:{label:"",color:"bg-gray-100 text-gray-800"}}[N]||{label:N,color:"bg-gray-100 text-gray-800"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${S.color}`,children:S.label})};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-4 flex items-center justify-between sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Vt,{className:"w-6 h-6"}),e.jsx("h3",{className:"text-xl font-bold",children:" "})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6",children:i?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):c?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-900 mb-4",children:"  "}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500",children:" "}),e.jsx("p",{className:"text-gray-900",children:c.username})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500",children:"Email"}),e.jsx("p",{className:"text-gray-900",children:c.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500",children:""}),e.jsx("p",{className:"text-gray-900",children:c.first_name||" "})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500",children:""}),e.jsx("p",{className:"text-gray-900",children:c.last_name||" "})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500",children:"Telegram ID"}),e.jsx("p",{className:"text-gray-900",children:c.telegram_id||" "})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500",children:""}),e.jsx("p",{className:"text-gray-900",children:c.is_active?e.jsx("span",{className:"text-green-600 font-semibold",children:""}):e.jsx("span",{className:"text-red-600 font-semibold",children:""})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500",children:" "}),e.jsx("p",{className:"text-gray-900",children:y(c.created_at)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500",children:" "}),e.jsx("p",{className:"text-gray-900",children:y(c.last_login)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500",children:" "}),e.jsx("p",{className:"text-gray-900 font-bold text-lg",children:c.total_payments?`${c.total_payments.toFixed(2)} `:"0.00 "})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(wt,{className:"w-5 h-5"}),"   (",h.length,")"]}),h.length>0?e.jsx("div",{className:"space-y-3",children:h.map(N=>e.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-gray-900",children:N.project_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[y(N.start_date)," - ",y(N.end_date)]})]}),w(N.status)]})},N.id))}):e.jsx("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:e.jsx("p",{className:"text-gray-500",children:"   "})})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Qe,{className:"w-5 h-5"}),"  (",f.length,")"]}),f.length>0?e.jsx("div",{className:"space-y-3",children:f.map(N=>e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-4 hover:border-green-300 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-lg text-gray-900",children:[N.amount.toFixed(2)," "]}),e.jsx("p",{className:"text-sm text-gray-500",children:y(N.payment_date||N.created_at)})]}),w(N.status)]}),e.jsx("p",{className:"text-gray-700",children:N.description})]},N.id))}):e.jsx("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:e.jsx("p",{className:"text-gray-500",children:"  "})})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[e.jsxs("button",{type:"button",onClick:a,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all font-semibold",children:[e.jsx(An,{className:"w-5 h-5"}),""]}),e.jsxs("button",{type:"button",onClick:n,className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all font-semibold flex items-center gap-2",children:[e.jsx(tt,{className:"w-5 h-5"}),""]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]}):e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 rounded-lg p-4",children:e.jsx("p",{className:"text-red-900",children:"    "})})})]})}):null},rG=({isOpen:s,onClose:t,onSuccess:r,contractorId:a,contractorName:n})=>{const[i,o]=j.useState(!1),[c,u]=j.useState({amount:0,description:""});j.useEffect(()=>{s&&u({amount:0,description:""})},[s]),j.useEffect(()=>{if(s){const f=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${f}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const f=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(f||"0")*-1)}},[s]);const h=async f=>{if(f.preventDefault(),!c.amount||c.amount<=0){alert("  ");return}if(!c.description.trim()){alert("  ");return}try{o(!0),(await Wo.createPayment(a,c)).success&&r()}catch(p){console.error("Error creating payment:",p),alert("  ")}finally{o(!1)}},m=(f,p)=>{u(v=>({...v,[f]:p}))};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-4 flex items-center justify-between sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Qe,{className:"w-6 h-6"}),e.jsx("h3",{className:"text-xl font-bold",children:" "})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:h,className:"p-6 space-y-4",children:[e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("span",{className:"font-semibold",children:":"})," ",n]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" () ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:c.amount||"",onChange:f=>m("amount",f.target.value?parseFloat(f.target.value):0),min:"0",step:"0.01",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all",placeholder:" ",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:c.description,onChange:f=>m("description",f.target.value),rows:4,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all resize-none",placeholder:"   (:    )",required:!0})]}),e.jsx("div",{className:"bg-green-50 border-l-4 border-green-500 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-green-900",children:[e.jsx("span",{className:"font-semibold",children:":"}),'      " ".        .']})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:i,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:i?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"w-5 h-5"})," "]})}),e.jsx("button",{type:"button",onClick:t,disabled:i,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold disabled:opacity-50",children:""})]})]})]})}):null},aG=()=>{const[s,t]=j.useState([]),[r,a]=j.useState(!0),[n,i]=j.useState({}),[o,c]=j.useState(!1),[u,h]=j.useState(1),[m,f]=j.useState(0),p=12,[v,g]=j.useState(!1),[y,w]=j.useState(!1),[N,k]=j.useState(!1),[S,_]=j.useState(!1),[T,E]=j.useState(null),[z,O]=j.useState([]),C=j.useCallback((ie,ne="info")=>{const oe=Date.now().toString();O(ce=>[...ce,{id:oe,message:ie,type:ne}])},[]),A=j.useCallback(ie=>{O(ne=>ne.filter(oe=>oe.id!==ie))},[]),X=j.useCallback(async()=>{try{a(!0);const ie=await Wo.getContractors({...n,page:u,limit:p});ie.success&&(t(ie.data),f(ie.total))}catch(ie){console.error("Error loading contractors:",ie),C("  ","error")}finally{a(!1)}},[n,u,C]);j.useEffect(()=>{X()},[X]);const I=()=>{g(!1),C("  ","success"),X()},V=()=>{w(!1),E(null),C("  ","success"),X()},R=async ie=>{if(confirm(" ,     ?    ."))try{const ne=await Wo.deleteContractor(ie);ne.success?(C(" ","success"),X(),k(!1),E(null)):C(ne.message||"  ","error")}catch(ne){console.error("Error deleting contractor:",ne),C("  ","error")}},H=ie=>{E(ie),k(!0)},ee=ie=>{E(ie),w(!0)},se=ie=>{E(ie),_(!0)},W=()=>{_(!1),E(null),C("  ","success"),X()},te=()=>{h(1),X()},J=()=>{i({}),h(1)},K=Math.ceil(m/p),$=ie=>{h(ie)};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"max-w-[2000px] mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:" "}),e.jsx("p",{className:"text-gray-600 mt-1",children:"  "})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>c(!o),className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-200",children:[e.jsx(wr,{className:"w-5 h-5"}),""]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-200",children:[e.jsx(Tt,{className:"w-5 h-5"}),""]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-200",children:[e.jsx(tP,{className:"w-5 h-5"}),""]}),e.jsx("button",{onClick:X,className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-200",children:e.jsx(ls,{className:"w-5 h-5"})}),e.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all shadow-lg",children:[e.jsx(We,{className:"w-5 h-5"})," "]})]})]}),o&&e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:n.search||"",onChange:ie=>i({...n,search:ie.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",placeholder:", email, username..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:n.specialization||"",onChange:ie=>i({...n,specialization:ie.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"developer",children:""}),e.jsx("option",{value:"designer",children:""}),e.jsx("option",{value:"tester",children:""}),e.jsx("option",{value:"manager",children:""}),e.jsx("option",{value:"analyst",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:n.status||"",onChange:ie=>i({...n,status:ie.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"active",children:""}),e.jsx("option",{value:"inactive",children:""})]})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("button",{onClick:te,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-all font-semibold",children:""}),e.jsx("button",{onClick:J,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all font-semibold",children:""})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):s.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-400 text-lg",children:"  "})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(ie=>e.jsx(JY,{contractor:ie,onView:()=>H(ie),onEdit:()=>ee(ie),onDelete:()=>R(ie.id),onCreatePayment:()=>se(ie)},ie.id))}),K>1&&e.jsxs("div",{className:"mt-6 flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>$(u-1),disabled:u===1,className:"px-4 py-2 bg-white border-2 border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:" "}),[...Array(K)].map((ie,ne)=>{const oe=ne+1;return oe===1||oe===K||oe>=u-1&&oe<=u+1?e.jsx("button",{onClick:()=>$(oe),className:`px-4 py-2 rounded-lg transition-all ${u===oe?"bg-indigo-600 text-white":"bg-white border-2 border-gray-200 hover:bg-gray-50"}`,children:oe},oe):oe===u-2||oe===u+2?e.jsx("span",{children:"..."},oe):null}),e.jsx("button",{onClick:()=>$(u+1),disabled:u===K,className:"px-4 py-2 bg-white border-2 border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:" "})]})]})})]}),v&&e.jsx(eG,{isOpen:v,onClose:()=>g(!1),onSuccess:I}),y&&T&&e.jsx(tG,{isOpen:y,onClose:()=>{w(!1),E(null)},onSuccess:V,contractor:T}),N&&T&&e.jsx(sG,{isOpen:N,onClose:()=>{k(!1),E(null)},contractorId:T.id,onEdit:()=>{k(!1),ee(T)},onDelete:()=>R(T.id)}),S&&T&&e.jsx(rG,{isOpen:S,onClose:()=>{_(!1),E(null)},onSuccess:W,contractor:T}),e.jsx(m1,{toasts:z,onRemove:A})]})};class nG{async getProjectsWithFiles(t){try{const r=new URLSearchParams;t?.search&&r.append("search",t.search),t?.status&&r.append("status",t.status),t?.page&&r.append("page",t.page.toString()),t?.limit&&r.append("per_page",t.limit.toString());const[a,n]=await Promise.all([fe.get(`/admin/projects/?${r.toString()}`),this.getAllFiles()]),i=a.data.projects,o=n.files||[],c=new Map;o.forEach(m=>{c.has(m.project_id)||c.set(m.project_id,[]),c.get(m.project_id).push(m)});const u=i.map(m=>({...m,files:c.get(m.id)||[],files_count:c.get(m.id)?.length||0}));let h=u;return t?.has_files!==void 0&&(h=u.filter(m=>t.has_files?(m.files_count||0)>0:(m.files_count||0)===0)),{success:!0,projects:h,pagination:a.data.pagination||{total:h.length,page:t?.page||1,limit:t?.limit||20,pages:Math.ceil(h.length/(t?.limit||20))}}}catch(r){return console.error("Error fetching projects with files:",r),{success:!1,message:r.response?.data?.message||"  ",projects:[],pagination:{total:0,page:1,limit:20,pages:0}}}}async getAllFiles(){try{return{success:!0,files:(await fe.get("/admin/files/all")).data.files}}catch(t){return console.error("Error fetching all files:",t),{success:!1,message:t.response?.data?.message||"  ",files:[]}}}async getProjectFiles(t){try{return{success:!0,files:(await fe.get(`/admin/files/project/${t}`)).data.files}}catch(r){return console.error(`Error fetching files for project ${t}:`,r),{success:!1,message:r.response?.data?.message||"  ",files:[]}}}async uploadFile(t,r,a){try{const n=new FormData;return n.append("file",r),a&&n.append("description",a),{success:!0,file:(await fe.post(`/admin/files/upload/${t}`,n,{headers:{"Content-Type":"multipart/form-data"}})).data.file,message:"  "}}catch(n){return console.error("Error uploading file:",n),{success:!1,message:n.response?.data?.message||"  "}}}async deleteFile(t){try{const r=await fe.delete(`/admin/files/delete/${t}`);return{success:!0,message:"  "}}catch(r){return console.error("Error deleting file:",r),{success:!1,message:r.response?.data?.message||"  "}}}getDownloadUrl(t){return`/admin/files/download/${t}`}async getStats(){try{const[t,r]=await Promise.all([fe.get("/admin/projects/?per_page=1000"),this.getAllFiles()]),a=t.data.projects||[],n=r.files||[],i=new Set(n.map(c=>c.project_id)),o=n.reduce((c,u)=>c+(u.file_size||0),0);return{success:!0,stats:{total_projects:a.length,projects_with_files:i.size,projects_without_files:a.length-i.size,total_files:n.length,total_size:o}}}catch(t){return console.error("Error fetching stats:",t),{success:!1,message:t.response?.data?.message||"  ",stats:{total_projects:0,projects_with_files:0,projects_without_files:0,total_files:0,total_size:0}}}}}const ph=new nG,iG=()=>{const{currentTheme:s}=Cm(),[t,r]=j.useState([]),[a,n]=j.useState(!0),[i,o]=j.useState({total_projects:0,projects_with_files:0,projects_without_files:0,total_files:0,total_size:0}),[c,u]=j.useState({search:"",page:1,limit:20}),[h,m]=j.useState(new Set),[f,p]=j.useState(null),[v,g]=j.useState([]),y=j.useCallback((T,E="info")=>{const z=Date.now();g(O=>[...O,{id:z,message:T,type:E}]),setTimeout(()=>{g(O=>O.filter(C=>C.id!==z))},3e3)},[]),w=j.useCallback(async()=>{try{n(!0);const[T,E]=await Promise.all([ph.getProjectsWithFiles(c),ph.getStats()]);T.success?r(T.projects):y(T.message||"  ","error"),E.success&&o(E.stats)}catch(T){console.error("Error loading data:",T),y("  ","error")}finally{n(!1)}},[c,y]);j.useEffect(()=>{w()},[w]);const N=T=>{m(E=>{const z=new Set(E);return z.has(T)?z.delete(T):z.add(T),z})},k=async(T,E,z)=>{try{p(T);const O=await ph.uploadFile(T,E,z);O.success?(y("  ","success"),await w()):y(O.message||"  ","error")}catch(O){console.error("Error uploading file:",O),y("  ","error")}finally{p(null)}},S=async(T,E)=>{if(confirm(" ,     ?"))try{const z=await ph.deleteFile(T);z.success?(y("  ","success"),await w()):y(z.message||"  ","error")}catch(z){console.error("Error deleting file:",z),y("  ","error")}},_=T=>{if(T===0)return"0 B";const E=1024,z=["B","KB","MB","GB"],O=Math.floor(Math.log(T)/Math.log(E));return Math.round(T/Math.pow(E,O)*100)/100+" "+z[O]};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${s.text}`,children:" "}),e.jsx("p",{className:"text-gray-500 mt-1",children:"  "})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:`${s.card} ${s.border} border rounded-lg p-4`,children:[e.jsx("div",{className:"text-sm text-gray-500",children:" "}),e.jsx("div",{className:`text-2xl font-bold ${s.text}`,children:i.total_projects})]}),e.jsxs("div",{className:`${s.card} ${s.border} border rounded-lg p-4`,children:[e.jsx("div",{className:"text-sm text-gray-500",children:" "}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.projects_with_files})]}),e.jsxs("div",{className:`${s.card} ${s.border} border rounded-lg p-4`,children:[e.jsx("div",{className:"text-sm text-gray-500",children:" "}),e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:i.projects_without_files})]}),e.jsxs("div",{className:`${s.card} ${s.border} border rounded-lg p-4`,children:[e.jsx("div",{className:"text-sm text-gray-500",children:" "}),e.jsx("div",{className:`text-2xl font-bold ${s.primary}`,children:i.total_files}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:_(i.total_size)})]})]}),e.jsx("div",{className:`${s.card} ${s.border} border rounded-lg p-4`,children:e.jsx("input",{type:"text",placeholder:"   ...",value:c.search||"",onChange:T=>u({...c,search:T.target.value,page:1}),className:`w-full px-4 py-2 border ${s.border} rounded-lg ${s.input} ${s.text}`})}),a?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:`inline-block animate-spin rounded-full h-12 w-12 border-b-2 ${s.primary}`}),e.jsx("p",{className:`mt-4 ${s.text}`,children:" ..."})]}):t.length===0?e.jsxs("div",{className:`${s.card} ${s.border} border rounded-lg p-12 text-center`,children:[e.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),e.jsx("h3",{className:`text-xl font-semibold ${s.text} mb-2`,children:"  "}),e.jsx("p",{className:"text-gray-500",children:"   "})]}):e.jsx("div",{className:"space-y-4",children:t.map(T=>{const E=h.has(T.id),z=(T.files_count||0)>0;return e.jsxs("div",{className:`${s.card} ${s.border} border rounded-lg overflow-hidden`,children:[e.jsx("div",{className:`p-4 cursor-pointer hover:bg-opacity-50 ${s.hover}`,onClick:()=>N(T.id),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`transform transition-transform ${E?"rotate-90":""}`,children:""}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold ${s.text}`,children:T.title}),e.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-500 mt-1",children:[e.jsxs("span",{children:["ID: ",T.id]}),T.user&&e.jsxs("span",{children:[": ",T.user.first_name," ",T.user.last_name]}),e.jsx("span",{className:z?"text-green-600":"text-orange-600",children:z?` ${T.files_count} `:"  "})]})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${T.status==="completed"?"bg-green-100 text-green-800":T.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:T.status_name||T.status})})]})}),E&&e.jsxs("div",{className:`border-t ${s.border} p-4 space-y-4`,children:[e.jsxs("div",{className:`p-4 rounded-lg ${s.hover}`,children:[e.jsx("h4",{className:`font-semibold ${s.text} mb-3`,children:" "}),e.jsx("input",{type:"file",onChange:O=>{const C=O.target.files?.[0];C&&(k(T.id,C),O.target.value="")},disabled:f===T.id,className:`w-full px-4 py-2 border ${s.border} rounded-lg ${s.input}`}),f===T.id&&e.jsx("p",{className:"text-sm text-blue-600 mt-2",children:" ..."})]}),T.files&&T.files.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:`font-semibold ${s.text}`,children:" :"}),T.files.map(O=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${s.hover} border ${s.border}`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-2xl",children:O.file_type==="archive"?"":O.file_type==="image"?"":O.file_type==="document"?"":""}),e.jsxs("div",{children:[e.jsx("div",{className:`font-medium ${s.text}`,children:O.original_filename}),e.jsxs("div",{className:"text-sm text-gray-500",children:[_(O.file_size),"  ",new Date(O.uploaded_at).toLocaleDateString(),O.description&&`  ${O.description}`]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("a",{href:ph.getDownloadUrl(O.id),download:!0,className:`px-3 py-1 rounded ${s.primary} text-white hover:opacity-80`,children:""}),e.jsx("button",{onClick:()=>S(O.id,T.id),className:"px-3 py-1 rounded bg-red-600 text-white hover:bg-red-700",children:""})]})]},O.id))]}):e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx("p",{children:"  "}),e.jsx("p",{className:"text-sm mt-2",children:"     "})]})]})]},T.id)})}),e.jsx("div",{className:"fixed bottom-4 right-4 space-y-2 z-50",children:v.map(T=>e.jsx("div",{className:`px-6 py-3 rounded-lg shadow-lg text-white ${T.type==="success"?"bg-green-600":T.type==="error"?"bg-red-600":"bg-blue-600"}`,children:T.message},T.id))})]})};class lG{async getArchivedTasks(t){try{const r=new URLSearchParams;t?.employee_id&&r.append("employee_id",t.employee_id.toString()),t?.date_from&&r.append("date_from",t.date_from),t?.date_to&&r.append("date_to",t.date_to);const a=await fe.get(`/admin/api/tasks/archive/list?${r.toString()}`);return{success:!0,tasks_by_date:a.data.tasks_by_date,total_tasks:a.data.total_tasks}}catch(r){return console.error("Error fetching archived tasks:",r),{success:!1,message:r.response?.data?.message||r.response?.data?.error||"   ",tasks_by_date:{},total_tasks:0}}}async archiveTask(t){try{const r=await fe.post(`/admin/api/tasks/${t}/archive`);return{success:r.data.success,message:r.data.success?"  ":r.data.error}}catch(r){return console.error("Error archiving task:",r),{success:!1,message:r.response?.data?.message||r.response?.data?.error||"  "}}}async restoreTask(t){try{const r=await fe.put(`/admin/api/tasks/${t}`,{task_metadata:{archived:!1}});return{success:r.data.success,message:r.data.success?"  ":r.data.error}}catch(r){return console.error("Error restoring task:",r),{success:!1,message:r.response?.data?.message||r.response?.data?.error||"  "}}}async getEmployees(){try{return{success:!0,employees:((await fe.get("/admin/api/users/executors")).data.executors||[]).filter(a=>["executor","owner"].includes(a.role)&&a.is_active)}}catch(t){return console.error("Error fetching employees:",t),{success:!1,message:t.response?.data?.message||"  ",employees:[]}}}}const Fy=new lG,oG=()=>{const{currentTheme:s}=Cm(),[t,r]=j.useState({}),[a,n]=j.useState(0),[i,o]=j.useState(!0),[c,u]=j.useState({}),[h,m]=j.useState([]),[f,p]=j.useState([]),v=j.useCallback((C,A="info")=>{const X=Date.now();p(I=>[...I,{id:X,message:C,type:A}]),setTimeout(()=>{p(I=>I.filter(V=>V.id!==X))},3e3)},[]),g=j.useCallback(async()=>{try{o(!0);const C=await Fy.getArchivedTasks(c);C.success?(r(C.tasks_by_date),n(C.total_tasks)):v(C.message||"   ","error")}catch(C){console.error("Error loading archived tasks:",C),v("   ","error")}finally{o(!1)}},[c,v]),y=j.useCallback(async()=>{try{const C=await Fy.getEmployees();C.success&&m(C.employees)}catch(C){console.error("Error loading employees:",C)}},[]);j.useEffect(()=>{g()},[g]),j.useEffect(()=>{y()},[y]);const w=async C=>{if(confirm(" ,       ?"))try{const A=await Fy.restoreTask(C);A.success?(v("  ","success"),await g()):v(A.message||"  ","error")}catch(A){console.error("Error restoring task:",A),v("  ","error")}},N=()=>{g()},k=()=>{u({})},S=C=>{const A=new Date(C),X=new Date,I=new Date(X);return I.setDate(I.getDate()-1),A.toDateString()===X.toDateString()?"":A.toDateString()===I.toDateString()?"":A.toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})},_=C=>{switch(C){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"normal":return"bg-blue-100 text-blue-800";case"low":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},T=C=>{switch(C){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},E=C=>({urgent:"",high:"",normal:"",low:""})[C]||C,z=C=>({completed:"",in_progress:" ",pending:""})[C]||C,O=Object.keys(t||{}).sort((C,A)=>new Date(A).getTime()-new Date(C).getTime());return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:`${s.card} ${s.border} border rounded-lg p-6`,children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${s.text}`,children:" "}),e.jsxs("p",{className:"text-gray-500 mt-1",children:["  : ",a," "]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${s.text} mb-2`,children:""}),e.jsxs("select",{value:c.employee_id||"",onChange:C=>u({...c,employee_id:C.target.value?parseInt(C.target.value):void 0}),className:`w-full px-3 py-2 border ${s.border} rounded-lg ${s.input} ${s.text}`,children:[e.jsx("option",{value:"",children:" "}),h.map(C=>e.jsxs("option",{value:C.id,children:[C.first_name," ",C.last_name]},C.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${s.text} mb-2`,children:" "}),e.jsx("input",{type:"date",value:c.date_from||"",onChange:C=>u({...c,date_from:C.target.value}),className:`w-full px-3 py-2 border ${s.border} rounded-lg ${s.input} ${s.text}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${s.text} mb-2`,children:" "}),e.jsx("input",{type:"date",value:c.date_to||"",onChange:C=>u({...c,date_to:C.target.value}),className:`w-full px-3 py-2 border ${s.border} rounded-lg ${s.input} ${s.text}`})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("button",{onClick:N,className:`px-4 py-2 rounded-lg ${s.primary} text-white hover:opacity-90`,children:""}),e.jsx("button",{onClick:k,className:`px-4 py-2 rounded-lg border ${s.border} ${s.text} hover:bg-gray-50`,children:""})]})]})]}),i?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:`inline-block animate-spin rounded-full h-12 w-12 border-b-2 ${s.primary}`}),e.jsx("p",{className:`mt-4 ${s.text}`,children:"  ..."})]}):O.length===0?e.jsxs("div",{className:`${s.card} ${s.border} border rounded-lg p-12 text-center`,children:[e.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),e.jsx("h3",{className:`text-xl font-semibold ${s.text} mb-2`,children:" "}),e.jsx("p",{className:"text-gray-500",children:"      "})]}):e.jsx("div",{className:"space-y-6",children:O.map(C=>{const A=t[C]||{},X=Object.values(A).reduce((I,V)=>I+V.tasks.length,0);return e.jsxs("div",{className:`${s.card} ${s.border} border rounded-lg p-6`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 pb-4 border-b",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:""}),e.jsxs("div",{children:[e.jsx("h2",{className:`text-xl font-bold ${s.text}`,children:S(C)}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(C).toLocaleDateString("ru-RU",{weekday:"long"})})]})]}),e.jsxs("div",{className:`px-4 py-2 rounded-full ${s.primary} text-white font-semibold`,children:[X," ",X===1?"":""]})]}),e.jsx("div",{className:"space-y-6",children:Object.entries(A).map(([I,V])=>{const R=V.employee,H=V.tasks;return e.jsxs("div",{className:"space-y-4",children:[R&&e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg ${s.hover}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full ${s.primary} text-white flex items-center justify-center font-semibold`,children:R.first_name?.[0]||R.username[0].toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:`font-semibold ${s.text}`,children:[R.first_name," ",R.last_name]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["@",R.username]})]}),e.jsxs("div",{className:`px-3 py-1 rounded-full ${s.primary} text-white text-sm`,children:[H.length," ",H.length===1?"":""]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:H.map(ee=>e.jsxs("div",{className:`${s.card} border-l-4 border-green-500 p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow`,children:[e.jsx("h3",{className:`font-semibold ${s.text} mb-2`,children:ee.title}),ee.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:ee.description}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs ${T(ee.status)}`,children:z(ee.status)}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${_(ee.priority)}`,children:E(ee.priority)})]}),ee.completed_at&&e.jsxs("div",{className:"text-xs text-gray-500 mb-3",children:[": ",new Date(ee.completed_at).toLocaleString("ru-RU")]}),e.jsx("button",{onClick:()=>w(ee.id),className:"w-full px-3 py-2 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",children:""})]},ee.id))})]},I)})})]},C)})}),e.jsx("div",{className:"fixed bottom-4 right-4 space-y-2 z-50",children:f.map(C=>e.jsx("div",{className:`px-6 py-3 rounded-lg shadow-lg text-white ${C.type==="success"?"bg-green-600":C.type==="error"?"bg-red-600":"bg-blue-600"}`,children:C.message},C.id))})]})};class cG{async getUserTasks(t){try{const r=new URLSearchParams;t&&r.append("assigned_to_id",t.toString()),r.append("per_page","1000");const a=await fe.get(`/admin/api/tasks/?${r.toString()}`),n={pending:[],in_progress:[],completed:[]},i=a.data.tasks||[];return i.forEach(o=>{o.status==="pending"?n.pending.push(o):o.status==="in_progress"?n.in_progress.push(o):o.status==="completed"&&n.completed.push(o)}),{success:!0,tasksByStatus:n,total:i.length}}catch(r){return console.error("Error fetching user tasks:",r),{success:!1,message:r.response?.data?.message||"  ",tasksByStatus:{pending:[],in_progress:[],completed:[]},total:0}}}async updateTaskStatus(t,r){try{const a=await fe.put(`/admin/api/tasks/${t}`,{status:r});return{success:a.data.success,message:a.data.success?"  ":a.data.error}}catch(a){return console.error("Error updating task status:",a),{success:!1,message:a.response?.data?.message||a.response?.data?.error||"  "}}}async getExecutors(){try{return{success:!0,executors:((await fe.get("/admin/api/users/executors")).data.executors||[]).filter(a=>["executor","owner"].includes(a.role)&&a.is_active)}}catch(t){return console.error("Error fetching executors:",t),{success:!1,message:t.response?.data?.message||"  ",executors:[]}}}async createTask(t){try{return{success:!0,message:"  ",task:(await fe.post("/admin/api/tasks",t)).data}}catch(r){return console.error("Error creating task:",r),{success:!1,message:r.response?.data?.message||"  "}}}async getTask(t){try{return{success:!0,task:(await fe.get(`/admin/api/tasks/${t}`)).data.task}}catch(r){return console.error("Error fetching task:",r),{success:!1,message:r.response?.data?.message||"  ",task:null}}}async deleteTask(t){try{const r=await fe.delete(`/admin/api/tasks/${t}`);return{success:!0,message:" "}}catch(r){return console.error("Error deleting task:",r),{success:!1,message:r.response?.data?.detail||r.response?.data?.message||"  "}}}async getComments(t){try{return{success:!0,comments:(await fe.get(`/admin/api/tasks/${t}/comments`)).data.comments||[]}}catch(r){return console.error("Error fetching comments:",r),{success:!1,message:r.response?.data?.message||"  ",comments:[]}}}async addComment(t,r,a=!1,n=[]){try{const i=new FormData;i.append("comment",r),i.append("is_internal",a.toString()),n.forEach(c=>{i.append("files",c)});const o=await fe.post(`/admin/api/tasks/${t}/comments`,i,{headers:{"Content-Type":"multipart/form-data"}});return{success:!0,message:" "}}catch(i){return console.error("Error adding comment:",i),{success:!1,error:i.response?.data?.message||"  "}}}async updateProgress(t,r){try{const a=await fe.post(`/admin/api/tasks/${t}/progress`,{progress:r});return{success:!0,message:" "}}catch(a){return console.error("Error updating progress:",a),{success:!1,message:a.response?.data?.message||"  "}}}}const ai=new cG,dG=()=>{const{currentTheme:s}=Cm(),{isOwner:t}=Rm(),[r,a]=j.useState({pending:[],in_progress:[],completed:[]}),[n,i]=j.useState(!0),[o,c]=j.useState([]),[u,h]=j.useState(void 0),[m,f]=j.useState([]),[p,v]=j.useState(null),[g,y]=j.useState(null),[w,N]=j.useState(!1),[k,S]=j.useState(!1),[_,T]=j.useState(null),[E,z]=j.useState([]),[O,C]=j.useState(""),[A,X]=j.useState([]),[I,V]=j.useState([]),[R,H]=j.useState(!1),[ee,se]=j.useState(!1),[W,te]=j.useState(0),[J,K]=j.useState({title:"",description:"",priority:"normal",deadline:"",assigned_to_id:""}),$=j.useRef(null);j.useRef({});const ie=j.useCallback(()=>{const be=$.current;if(!be)return;const Le=be.getContext("2d");if(!Le)return;be.width=window.innerWidth,be.height=window.innerHeight;const He=[],Ze=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"];for(let bt=0;bt<150;bt++)He.push({x:Math.random()*be.width,y:-10,w:Math.random()*10+5,h:Math.random()*5+3,color:Ze[Math.floor(Math.random()*Ze.length)],speed:Math.random()*3+2,rotation:Math.random()*360,rotationSpeed:Math.random()*10-5});function et(){Le.clearRect(0,0,be.width,be.height),He.forEach((bt,Yr)=>{bt.y+=bt.speed,bt.rotation+=bt.rotationSpeed,Le.save(),Le.translate(bt.x+bt.w/2,bt.y+bt.h/2),Le.rotate(bt.rotation*Math.PI/180),Le.fillStyle=bt.color,Le.fillRect(-bt.w/2,-bt.h/2,bt.w,bt.h),Le.restore(),bt.y>be.height&&He.splice(Yr,1)}),He.length>0?requestAnimationFrame(et):Le.clearRect(0,0,be.width,be.height)}et()},[]),ne=j.useCallback(()=>{const be=["  !","  !"," !  !"," !    !"," !"," !  !"],Le=be[Math.floor(Math.random()*be.length)];oe(Le,"success")},[]),oe=j.useCallback((be,Le="info")=>{const He=Date.now();f(Ze=>[...Ze,{id:He,message:be,type:Le}]),setTimeout(()=>{f(Ze=>Ze.filter(et=>et.id!==He))},3e3)},[]),ce=j.useCallback(async()=>{try{i(!0);const be=await ai.getUserTasks(u);be.success?a(be.tasksByStatus):oe(be.message||"  ","error")}catch(be){console.error("Error loading tasks:",be),oe("  ","error")}finally{i(!1)}},[u,oe]),U=j.useCallback(async()=>{const be=await ai.getExecutors();be.success&&c(be.executors)},[]);j.useEffect(()=>{ce()},[ce]),j.useEffect(()=>{U()},[U]),j.useEffect(()=>{const be=setInterval(()=>{ce()},3e4);return()=>clearInterval(be)},[ce]);const F=(be,Le)=>{v(Le),be.dataTransfer.effectAllowed="move"},Z=()=>{v(null),y(null)},q=(be,Le)=>{be.preventDefault(),be.stopPropagation(),y(Le)},Q=be=>{be.preventDefault(),be.stopPropagation();const Le=be.currentTarget.getBoundingClientRect();(be.clientX<Le.left||be.clientX>=Le.right||be.clientY<Le.top||be.clientY>=Le.bottom)&&y(null)},le=be=>{be.preventDefault(),be.dataTransfer.dropEffect="move"},me=async be=>{if(!p)return;y(null);const Le=p.status;if(Le===be){v(null);return}const He={...r};He[Le]=He[Le].filter(et=>et.id!==p.id),He[be]=[{...p,status:be},...He[be]],a(He),be==="completed"&&(ie(),ne());const Ze=await ai.updateTaskStatus(p.id,be);Ze.success?oe(`   "${Te(be)}"`,"success"):(oe(Ze.message||"  ","error"),await ce()),v(null)},G=async be=>{if(be.preventDefault(),!J.title){oe("  ","error");return}const Le={title:J.title,description:J.description||void 0,priority:J.priority,deadline:J.deadline||void 0,assigned_to_id:J.assigned_to_id?parseInt(J.assigned_to_id):null,created_by_admin:!0},He=await ai.createTask(Le);He.success?(oe("  ","success"),N(!1),K({title:"",description:"",priority:"normal",deadline:"",assigned_to_id:""}),await ce()):oe(He.message||"  ","error")},ue=async be=>{const Le=await ai.getTask(be);Le.success&&Le.task?(T(Le.task),te(Le.task.progress||0),S(!0),await Y(be)):oe(Le.message||"  ","error")},Y=async be=>{try{const Le=await ai.getComments(be);Le.success&&z(Le.comments)}catch(Le){console.error("Error loading comments:",Le)}},L=async()=>{if(!(!_||!O.trim()&&A.length===0))try{se(!0);const be=await ai.addComment(_.id,O,R,A);be.success?(C(""),X([]),I.forEach(Le=>URL.revokeObjectURL(Le)),V([]),H(!1),await Y(_.id),oe(" ","success")):oe(be.error||"  ","error")}catch(be){let Le="  ";be.code==="ECONNABORTED"&&(Le="  .     ."),oe(Le,"error")}finally{se(!1)}},M=async be=>{if(_)try{(await ai.updateProgress(_.id,be)).success&&(te(be),oe(" ","success"))}catch(Le){console.error("Error updating progress:",Le),oe("  ","error")}},B=be=>{const Le=[...A,...be];X(Le);const He=[];be.forEach(Ze=>{if(Ze.type.startsWith("image/")){const et=URL.createObjectURL(Ze);He.push(et)}}),V([...I,...He])},ae=be=>{const Le=A.filter((Ze,et)=>et!==be);X(Le),I[be]&&URL.revokeObjectURL(I[be]);const He=I.filter((Ze,et)=>et!==be);V(He)},he=be=>{const Le=be.clipboardData?.items;if(!Le)return;const He=[];for(let Ze=0;Ze<Le.length;Ze++){const et=Le[Ze];if(et.type.indexOf("image")!==-1){const bt=et.getAsFile();if(bt){const Yr=new Date().getTime(),Ja=new File([bt],`screenshot-${Yr}.png`,{type:bt.type});He.push(Ja)}}}He.length>0&&B(He)},xe=async(be,Le)=>{if(!confirm(" ,     ?"))return;const He=await ai.deleteTask(be);He.success?(oe(" ","success"),await ce()):oe(He.message||"  ","error")},_e=be=>{const Le=new Date,Ze=new Date(be).getTime()-Le.getTime();if(Ze<=0)return{text:"",colorClass:"bg-red-100 text-red-800 animate-pulse",isOverdue:!0};const et=Math.floor(Ze/(1e3*60*60*24)),bt=Math.floor(Ze%(1e3*60*60*24)/(1e3*60*60)),Yr=Math.floor(Ze%(1e3*60*60)/(1e3*60)),Ja=Math.floor(Ze%(1e3*60)/1e3);let Nr="";et>0?Nr=`${et} ${bt}`:bt>0?Nr=`${bt} ${Yr}`:Nr=`${Yr} ${Ja}`;let _r="bg-green-100 text-green-800";return Ze<1e3*60*60?_r="bg-red-100 text-red-800":Ze<1e3*60*60*6?_r="bg-orange-100 text-orange-800":Ze<1e3*60*60*24&&(_r="bg-yellow-100 text-yellow-800"),{text:Nr,colorClass:_r,isOverdue:!1}},Te=be=>({pending:"",in_progress:" ",completed:""})[be]||be,Ee=be=>{switch(be){case"urgent":return"border-l-4 border-red-500 bg-gradient-to-r from-red-50 to-white";case"high":return"border-l-4 border-orange-500 bg-gradient-to-r from-orange-50 to-white";case"normal":return"border-l-4 border-blue-500 bg-gradient-to-r from-blue-50 to-white";case"low":return"border-l-4 border-gray-500 bg-gradient-to-r from-gray-50 to-white";default:return"border-l-4 border-gray-300 bg-white"}},ze=be=>({urgent:"",high:"",normal:"",low:""})[be]||be,Ie=be=>{switch(be){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"normal":return"bg-blue-100 text-blue-800";case"low":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},Ye=be=>{switch(be){case"pending":return"from-yellow-500 to-orange-500";case"in_progress":return"from-blue-500 to-cyan-500";case"completed":return"from-green-500 to-emerald-500";default:return"from-gray-500 to-slate-500"}},xs=r.pending.length+r.in_progress.length+r.completed.length,pr=({task:be})=>{const[Le,He]=j.useState(be.deadline?_e(be.deadline):null);return j.useEffect(()=>{if(!be.deadline)return;const Ze=setInterval(()=>{He(_e(be.deadline))},1e3);return()=>clearInterval(Ze)},[be.deadline]),e.jsxs("div",{draggable:!0,onDragStart:Ze=>F(Ze,be),onDragEnd:Z,onClick:()=>ue(be.id),className:`${Ee(be.priority)} rounded-lg p-4 mb-3 cursor-pointer hover:shadow-md transition-all relative ${p?.id===be.id?"opacity-50 scale-95":""}`,children:[e.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-100",children:[e.jsx("button",{onClick:Ze=>{Ze.stopPropagation(),ue(be.id)},className:"bg-white border border-gray-300 rounded p-1 hover:bg-gray-100",title:"",children:e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),t()&&e.jsx("button",{onClick:Ze=>{Ze.stopPropagation(),xe(be.id)},className:"bg-white border border-gray-300 rounded p-1 hover:bg-red-100 text-red-600",title:"",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),e.jsxs("h3",{className:`font-semibold ${s.text} mb-2 pr-16`,children:[be.priority==="urgent"&&e.jsx("span",{className:"text-red-600 mr-1",children:""}),be.title]}),be.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:be.description}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${Ie(be.priority)}`,children:ze(be.priority)}),be.created_by_admin&&e.jsx("span",{className:"px-2 py-1 rounded text-xs font-semibold bg-gradient-to-r from-yellow-400 to-orange-400 text-white",children:" "}),be.project_name&&e.jsx("span",{className:"px-2 py-1 rounded text-xs bg-purple-100 text-purple-800",children:be.project_name})]}),Le&&e.jsxs("div",{className:`px-2 py-1 rounded text-xs font-semibold mb-2 inline-flex items-center gap-1 ${Le.colorClass}`,children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Le.text]}),e.jsxs("div",{className:"text-xs text-gray-500 flex justify-between items-center",children:[e.jsxs("span",{children:[e.jsx("svg",{className:"w-3 h-3 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),be.assigned_to_name||" "]}),e.jsx("span",{children:new Date(be.created_at).toLocaleDateString()})]})]})},Vs=({status:be,tasks:Le})=>e.jsxs("div",{className:`flex-1 min-w-[350px] ${s.card} rounded-2xl overflow-hidden shadow-lg`,children:[e.jsx("div",{className:`bg-gradient-to-r ${Ye(be)} p-5 text-white`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2",children:[be==="pending"&&e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),be==="in_progress"&&e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),be==="completed"&&e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),Te(be)]}),e.jsx("span",{className:"bg-white/30 px-3 py-1 rounded-full text-sm font-semibold",children:Le.length})]})}),e.jsx("div",{className:`p-4 min-h-[400px] transition-all ${g===be?"bg-blue-50 ring-2 ring-blue-400 ring-inset":""}`,onDragEnter:He=>q(He,be),onDragLeave:Q,onDragOver:le,onDrop:()=>me(be),children:Le.length===0?e.jsxs("div",{className:"text-center text-gray-400 py-12",children:[e.jsxs("div",{className:"text-6xl mb-4",children:[be==="pending"&&"",be==="in_progress"&&"",be==="completed"&&""]}),e.jsx("p",{children:" "})]}):Le.map(He=>e.jsx(pr,{task:He},He.id))})]});return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("canvas",{ref:$,className:"fixed top-0 left-0 w-full h-full pointer-events-none z-50"}),e.jsxs("div",{className:`${s.card} ${s.border} border rounded-lg p-6`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:`text-3xl font-bold ${s.text}`,children:[" ",o.length>0&&u&&e.jsxs("select",{value:u||"my",onChange:be=>h(be.target.value==="my"?void 0:parseInt(be.target.value)),className:`ml-4 px-4 py-2 border ${s.border} rounded-lg ${s.input} ${s.text} text-base`,children:[e.jsx("option",{value:"my",children:" "}),o.map(be=>e.jsxs("option",{value:be.id,children:[be.first_name," ",be.last_name," (@",be.username,")"]},be.id))]})]}),e.jsx("p",{className:"text-gray-500 mt-1",children:"-   "})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>N(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})," "]}),e.jsxs("button",{onClick:ce,className:`px-4 py-2 ${s.primary} text-white rounded-lg hover:opacity-80 transition-opacity flex items-center gap-2`,children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),""]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:`text-3xl font-bold ${s.text}`,children:xs}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:" "})]}),e.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[e.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:r.pending.length}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:""})]}),e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:r.in_progress.length}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:" "})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:r.completed.length}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:""})]})]})]}),n?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:`inline-block animate-spin rounded-full h-12 w-12 border-b-2 ${s.primary}`}),e.jsx("p",{className:`mt-4 ${s.text}`,children:" ..."})]}):e.jsxs("div",{className:"flex gap-6 overflow-x-auto pb-4",children:[e.jsx(Vs,{status:"pending",tasks:r.pending}),e.jsx(Vs,{status:"in_progress",tasks:r.in_progress}),e.jsx(Vs,{status:"completed",tasks:r.completed})]}),w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${s.card} rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto`,children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:`text-2xl font-bold ${s.text}`,children:"  "})}),e.jsxs("form",{onSubmit:G,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${s.text} mb-2`,children:"  *"}),e.jsx("input",{type:"text",required:!0,value:J.title,onChange:be=>K({...J,title:be.target.value}),className:`w-full px-4 py-2 border ${s.border} rounded-lg ${s.input} ${s.text}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${s.text} mb-2`,children:""}),e.jsx("textarea",{rows:3,value:J.description,onChange:be=>K({...J,description:be.target.value}),className:`w-full px-4 py-2 border ${s.border} rounded-lg ${s.input} ${s.text}`})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${s.text} mb-2`,children:""}),e.jsxs("select",{value:J.priority,onChange:be=>K({...J,priority:be.target.value}),className:`w-full px-4 py-2 border ${s.border} rounded-lg ${s.input} ${s.text}`,children:[e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"normal",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"urgent",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${s.text} mb-2`,children:""}),e.jsx("input",{type:"datetime-local",value:J.deadline,onChange:be=>K({...J,deadline:be.target.value}),className:`w-full px-4 py-2 border ${s.border} rounded-lg ${s.input} ${s.text}`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${s.text} mb-2`,children:" "}),e.jsxs("select",{value:J.assigned_to_id,onChange:be=>K({...J,assigned_to_id:be.target.value}),className:`w-full px-4 py-2 border ${s.border} rounded-lg ${s.input} ${s.text}`,children:[e.jsx("option",{value:"",children:" "}),o.map(be=>e.jsxs("option",{value:be.id,children:[be.first_name," ",be.last_name," (@",be.username,")"]},be.id))]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{N(!1),K({title:"",description:"",priority:"normal",deadline:"",assigned_to_id:""})},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-100",children:""}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:""})]})]})]})}),k&&_&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${s.card} rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col`,children:[e.jsx("div",{className:"p-6 border-b border-gray-200 flex-shrink-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsx("h2",{className:`text-2xl font-bold ${s.text}`,children:_.title}),e.jsx("button",{onClick:()=>{S(!1),T(null),z([]),C(""),X([]),V([])},className:"text-gray-500 hover:text-gray-700",children:""})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[_.description&&e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 rounded-xl p-4 border border-blue-200",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:""}),e.jsx("p",{className:"text-gray-800 text-sm whitespace-pre-wrap",children:_.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl p-4 border border-indigo-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-indigo-700",children:[e.jsx("path",{d:"M16 7h6v6"}),e.jsx("path",{d:"m22 7-8.5 8.5-5-5L2 17"})]}),e.jsx("h4",{className:"font-bold text-gray-900",children:""})]}),e.jsx("div",{className:"text-center mb-3",children:e.jsxs("span",{className:`text-3xl font-bold ${W<25?"text-red-600":W<50?"text-orange-600":W<75?"text-yellow-600":W<100?"text-blue-600":"text-green-600"}`,children:[W,"%"]})}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{className:"w-full h-3 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full transition-all duration-500 ease-out",style:{width:`${W}%`,background:W<25?"linear-gradient(90deg, #ef4444, #f87171)":W<50?"linear-gradient(90deg, #f97316, #fb923c)":W<75?"linear-gradient(90deg, #eab308, #fde047)":W<100?"linear-gradient(90deg, #3b82f6, #60a5fa)":"linear-gradient(90deg, #22c55e, #4ade80)"}})}),e.jsx("input",{type:"range",min:"0",max:"100",value:W,onChange:be=>M(parseInt(be.target.value)),className:"absolute top-0 left-0 w-full h-3 appearance-none cursor-pointer bg-transparent opacity-0",disabled:_.status==="completed"})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1 text-center",children:"  "})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl p-4 border border-blue-200",children:[e.jsx("strong",{className:"text-gray-900 block mb-2",children:":"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm inline-block ${_.status==="completed"?"bg-green-100 text-green-800":_.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:Te(_.status)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 rounded-xl p-4 border border-orange-200",children:[e.jsx("strong",{className:"text-gray-900 block mb-2",children:":"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm inline-block ${Ie(_.priority)}`,children:ze(_.priority)})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-4 border border-green-200",children:[e.jsx("strong",{className:"text-gray-900 block mb-2",children:":"}),e.jsx("p",{className:"text-gray-800",children:_.assigned_to_name||" "})]}),e.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-gray-100 rounded-xl p-4 border border-slate-200",children:[e.jsx("strong",{className:"text-gray-900 block mb-2",children:":"}),e.jsxs("p",{className:"text-gray-800",children:[_.created_by_name,_.created_by_admin&&e.jsx("span",{className:"ml-2 px-2 py-1 bg-yellow-100 text-yellow-800 rounded text-xs",children:""})]})]}),_.deadline&&e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-4 border border-purple-200",children:[e.jsx("strong",{className:"text-gray-900 block mb-2",children:":"}),e.jsx("p",{className:"text-gray-800",children:new Date(_.deadline).toLocaleString()})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-amber-50 rounded-xl p-4 border border-yellow-200",children:[e.jsx("strong",{className:"text-gray-900 block mb-2",children:":"}),e.jsx("p",{className:"text-gray-800",children:new Date(_.created_at).toLocaleString()})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-gray-100 rounded-xl p-4 border border-slate-200",children:[e.jsxs("h4",{className:"font-bold text-gray-900 mb-3",children:[" (",E.length,")"]}),e.jsxs("div",{className:"space-y-2 mb-4 max-h-80 overflow-y-auto",children:[E.map(be=>e.jsxs("div",{className:`p-3 rounded-lg ${be.is_internal?"bg-yellow-50 border border-yellow-200":"bg-white border border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold text-xs text-gray-900",children:be.author?.first_name||be.author?.username}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(be.created_at).toLocaleString()}),be.is_internal&&e.jsx("span",{className:"text-xs bg-yellow-200 text-yellow-800 px-1.5 py-0.5 rounded font-semibold",children:""})]}),e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap mb-2",children:be.comment}),be.attachments&&be.attachments.length>0&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:be.attachments.map((Le,He)=>{const Ze=/\.(jpg|jpeg|png|gif|webp)$/i.test(Le.original_filename),et=`/${Le.path||Le.filename}`;return Ze?e.jsxs("a",{href:et,target:"_blank",rel:"noopener noreferrer",className:"group relative block",children:[e.jsx("img",{src:et,alt:Le.original_filename,className:"h-32 w-auto rounded-lg border-2 border-gray-200 hover:border-blue-500 transition-all cursor-pointer object-cover shadow-sm hover:shadow-md",loading:"lazy"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 max-w-[150px] truncate",children:Le.original_filename})]},He):e.jsxs("a",{href:et,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800 bg-blue-50 px-3 py-2 rounded-lg hover:bg-blue-100 transition-colors",children:[" ",Le.original_filename]},He)})})]},be.id)),E.length===0&&e.jsx("p",{className:"text-center text-gray-400 py-4 text-sm",children:"  "})]}),e.jsxs("div",{className:"space-y-3 bg-white p-3 rounded-lg border border-gray-200",children:[e.jsx("textarea",{value:O,onChange:be=>C(be.target.value),onPaste:he,placeholder:" ... (Ctrl+V   )",rows:2,className:"w-full px-3 py-2 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none text-sm"}),I.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:I.map((be,Le)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:be,alt:`Preview ${Le+1}`,className:"w-24 h-24 object-cover rounded-lg border-2 border-gray-200"}),e.jsx("button",{onClick:()=>ae(Le),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:""})]},Le))}),A.filter(be=>!be.type.startsWith("image/")).length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:A.map((be,Le)=>!be.type.startsWith("image/")&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-gray-100 rounded-lg text-sm",children:[e.jsx("span",{className:"text-gray-700",children:be.name}),e.jsx("button",{onClick:()=>ae(Le),className:"text-red-500 hover:text-red-700",children:""})]},Le))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-lg cursor-pointer transition-colors",children:[e.jsx("span",{className:"text-xs font-medium",children:" "}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*,application/pdf,.doc,.docx,.xls,.xlsx,.txt",onChange:be=>B(Array.from(be.target.files||[])),className:"hidden"})]}),A.length>0&&e.jsxs("span",{className:"text-xs text-gray-600",children:[A.length," ",A.length===1?"":""]}),e.jsx("div",{className:"flex-1"}),e.jsxs("label",{className:"flex items-center gap-1.5 text-xs",children:[e.jsx("input",{type:"checkbox",checked:R,onChange:be=>H(be.target.checked),className:"rounded"}),""]}),e.jsx("button",{onClick:L,disabled:ee||!O.trim()&&A.length===0,className:"px-4 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:""})]})]})]})]}),e.jsx("div",{className:"p-4 border-t border-gray-200 flex justify-end flex-shrink-0",children:e.jsx("button",{onClick:()=>{S(!1),T(null),z([]),C(""),X([]),V([])},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-100",children:""})})]})}),e.jsx("div",{className:"fixed bottom-4 right-4 space-y-2 z-50",children:m.map(be=>e.jsx("div",{className:`px-6 py-3 rounded-lg shadow-lg text-white ${be.type==="success"?"bg-green-600":be.type==="error"?"bg-red-600":"bg-blue-600"}`,children:be.message},be.id))})]})},Gh={getChats:async()=>(await fe.get("/admin/api/chats")).data,getChatMessages:async s=>(await fe.get(`/admin/api/chats/${s}/messages`)).data,sendMessage:async(s,t)=>(await fe.post(`/admin/api/chats/${s}/messages`,t,{headers:{"Content-Type":"multipart/form-data"}})).data,togglePinChat:async s=>(await fe.post(`/admin/api/chats/${s}/pin`)).data,toggleHideChat:async s=>(await fe.post(`/admin/api/chats/${s}/hide`)).data},uG=()=>{const s=Oa(),[t,r]=j.useState([]),[a,n]=j.useState(!0),[i,o]=j.useState([]),c=j.useCallback((w,N="info")=>{const k=Date.now().toString();o(S=>[...S,{id:k,message:w,type:N}]),setTimeout(()=>{o(S=>S.filter(_=>_.id!==k))},4e3)},[]),u=j.useCallback(async()=>{try{const w=await Gh.getChats();r(w)}catch(w){console.error("Error loading chats:",w),c("  ","error")}finally{n(!1)}},[c]);j.useEffect(()=>{u();const w=setInterval(u,1e4);return()=>clearInterval(w)},[u]);const h=async(w,N)=>{N.stopPropagation();try{const k=await Gh.togglePinChat(w);c(k.message,"success"),await u()}catch(k){console.error("Error pinning chat:",k),k.response?.status===403?c("      ","error"):c("  ","error")}},m=async(w,N)=>{N.stopPropagation();try{const k=await Gh.toggleHideChat(w);c(k.message,"success"),await u()}catch(k){console.error("Error hiding chat:",k),k.response?.status===403?c("      ","error"):c("  ","error")}},f=w=>{if(!w)return"";const N=new Date(w),S=new Date().getTime()-N.getTime(),_=Math.floor(S/6e4);if(_<1)return" ";if(_<60)return`${_}  `;const T=Math.floor(_/60);if(T<24)return`${T}  `;const E=Math.floor(T/24);return E<7?`${E}  `:N.toLocaleDateString("ru-RU")},p=w=>{switch(w){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},v=w=>({completed:"",in_progress:" ",pending:"",cancelled:""})[w]||w,y=[...t].sort((w,N)=>{if(w.is_pinned_by_owner!==N.is_pinned_by_owner)return w.is_pinned_by_owner?-1:1;const k=w.last_message_at?new Date(w.last_message_at).getTime():0;return(N.last_message_at?new Date(N.last_message_at).getTime():0)-k}).filter(w=>!w.is_hidden_by_owner);return a?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx(Pt,{className:"w-8 h-8 animate-spin text-blue-600"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:" "}),e.jsx("p",{className:"text-gray-600 mt-2",children:"     "})]}),e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:i.map(w=>e.jsx("div",{className:`px-6 py-3 rounded-lg shadow-lg text-white ${w.type==="success"?"bg-green-500":w.type==="error"?"bg-red-500":"bg-blue-500"} animate-slide-in`,children:w.message},w.id))}),y.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Xa,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"  "}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:" ,    "})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(w=>e.jsxs("div",{onClick:()=>s(`/chats/${w.id}`),className:`bg-white rounded-xl shadow-md hover:shadow-xl transition-all duration-300 cursor-pointer transform hover:-translate-y-1 relative ${w.unread_by_executor>0?"ring-2 ring-blue-500":""}`,children:[e.jsxs("div",{className:"absolute top-3 right-3 flex gap-2",children:[w.is_pinned_by_owner&&e.jsx("button",{onClick:N=>h(w.id,N),className:"p-2 rounded-full bg-blue-100 text-blue-600 hover:bg-blue-200 transition-colors",title:" ",children:e.jsx(U4,{className:"w-4 h-4 fill-current"})}),!w.is_pinned_by_owner&&e.jsx("button",{onClick:N=>h(w.id,N),className:"p-2 rounded-full bg-gray-100 text-gray-400 hover:bg-gray-200 transition-colors",title:" ",children:e.jsx(U4,{className:"w-4 h-4"})}),e.jsx("button",{onClick:N=>m(w.id,N),className:"p-2 rounded-full bg-gray-100 text-gray-400 hover:bg-gray-200 transition-colors",title:" ",children:e.jsx(Ho,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4 pr-16",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800 mb-1",children:w.project.title}),e.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${p(w.project.status)}`,children:v(w.project.status)})]}),w.unread_by_executor>0&&e.jsx("span",{className:"bg-blue-500 text-white text-xs font-bold rounded-full w-6 h-6 flex items-center justify-center",children:w.unread_by_executor})]}),w.project.client_name&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm mb-3",children:[e.jsx(lt,{className:"w-4 h-4"}),e.jsx("span",{children:w.project.client_name})]}),w.last_message?e.jsxs("div",{className:"mb-3",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[e.jsxs("span",{className:"font-semibold",children:[w.last_message.sender_type==="client"?"":"",":"]})," ",w.last_message.message_text||e.jsxs("span",{className:"italic flex items-center gap-1",children:[e.jsx(rd,{className:"w-3 h-3"}),""]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-gray-400 text-xs",children:[e.jsx(Ve,{className:"w-3 h-3"}),e.jsx("span",{children:f(w.last_message_at)})]})]}):e.jsx("p",{className:"text-sm text-gray-400 italic mb-3",children:" "}),e.jsxs("button",{className:`w-full py-2 px-4 rounded-lg font-medium transition-all flex items-center justify-center gap-2 ${w.unread_by_executor>0?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white hover:from-blue-700 hover:to-indigo-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(Xa,{className:"w-4 h-4"})," "]})]})]},w.id))})]})},hG=()=>{const{chatId:s}=yT(),t=Oa(),r=j.useRef(null),a=j.useRef(null),[n,i]=j.useState([]),[o,c]=j.useState(!0),[u,h]=j.useState(!1),[m,f]=j.useState(""),[p,v]=j.useState([]),[g,y]=j.useState([]),w=j.useCallback((z,O="info")=>{const C=Date.now().toString();y(A=>[...A,{id:C,message:z,type:O}]),setTimeout(()=>{y(A=>A.filter(X=>X.id!==C))},4e3)},[]),N=j.useCallback(async()=>{if(s)try{const z=await Gh.getChatMessages(parseInt(s)),O=r.current&&r.current.getBoundingClientRect().bottom<=window.innerHeight+100;i(z.messages),(O||o)&&setTimeout(()=>{r.current?.scrollIntoView({behavior:"smooth"})},100)}catch(z){console.error("Error loading messages:",z),w("  ","error")}finally{c(!1)}},[s,o,w]);j.useEffect(()=>{N();const z=setInterval(N,3e3);return()=>clearInterval(z)},[N]);const k=z=>{z.target.files&&v(Array.from(z.target.files))},S=z=>{v(O=>O.filter((C,A)=>A!==z))},_=async z=>{if(z.preventDefault(),!s||!m.trim()&&p.length===0){w("    ","error");return}try{h(!0);const O=new FormData;m.trim()&&O.append("message_text",m.trim()),p.forEach(C=>{O.append("attachments",C)}),await Gh.sendMessage(parseInt(s),O),f(""),v([]),a.current&&(a.current.value=""),w(" ","success"),await N()}catch(O){console.error("Error sending message:",O),w("  ","error")}finally{h(!1)}},T=z=>new Date(z).toLocaleString("ru-RU",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}),E=z=>z<1024?z+" B":z<1024*1024?(z/1024).toFixed(1)+" KB":(z/(1024*1024)).toFixed(1)+" MB";return o?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx(Pt,{className:"w-8 h-8 animate-spin text-blue-600"})}):e.jsxs("div",{className:"flex flex-col h-screen bg-gray-50",children:[e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:g.map(z=>e.jsx("div",{className:`px-6 py-3 rounded-lg shadow-lg text-white ${z.type==="success"?"bg-green-500":z.type==="error"?"bg-red-500":"bg-blue-500"} animate-slide-in`,children:z.message},z.id))}),e.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>t("/chats"),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx(rE,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800",children:" "}),e.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",s]})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-4",children:n.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[e.jsx("div",{className:"bg-white rounded-full p-6 mb-4 shadow-md",children:e.jsx(lt,{className:"w-12 h-12 text-gray-400"})}),e.jsx("p",{className:"text-gray-500 text-lg font-medium",children:" "}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"   !"})]}):e.jsxs(e.Fragment,{children:[n.map(z=>e.jsx("div",{className:`flex ${z.sender_type==="executor"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[70%] rounded-2xl px-4 py-3 ${z.sender_type==="executor"?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white":"bg-white shadow-md text-gray-800"}`,children:[e.jsx("div",{className:"text-xs font-semibold mb-1 opacity-80",children:z.sender_type==="client"?"":""}),z.message_text&&e.jsx("div",{className:"whitespace-pre-wrap break-words mb-1",children:z.message_text}),z.attachments&&z.attachments.length>0&&e.jsx("div",{className:"mt-2 space-y-1",children:z.attachments.map((O,C)=>e.jsxs("a",{href:O.url,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-2 p-2 rounded-lg ${z.sender_type==="executor"?"bg-white/20 hover:bg-white/30":"bg-gray-100 hover:bg-gray-200"} transition-colors`,children:[e.jsx(rd,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm truncate flex-1",children:O.filename}),e.jsx("span",{className:"text-xs opacity-75",children:E(O.size)})]},C))}),e.jsx("div",{className:`text-xs mt-2 ${z.sender_type==="executor"?"text-white/70":"text-gray-500"}`,children:T(z.created_at)})]})},z.id)),e.jsx("div",{ref:r})]})}),e.jsx("div",{className:"bg-white border-t border-gray-200 px-6 py-4",children:e.jsxs("form",{onSubmit:_,className:"space-y-3",children:[p.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:p.map((z,O)=>e.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 text-blue-700 px-3 py-2 rounded-lg text-sm",children:[e.jsx(rd,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate max-w-[200px]",children:z.name}),e.jsx("button",{type:"button",onClick:()=>S(O),className:"hover:bg-blue-200 rounded p-1 transition-colors",children:e.jsx(De,{className:"w-3 h-3"})})]},O))}),e.jsxs("div",{className:"flex items-end gap-3",children:[e.jsx("input",{ref:a,type:"file",multiple:!0,onChange:k,className:"hidden",id:"file-input"}),e.jsx("label",{htmlFor:"file-input",className:"p-3 bg-gray-100 hover:bg-gray-200 rounded-lg cursor-pointer transition-colors",title:" ",children:e.jsx(rd,{className:"w-5 h-5 text-gray-600"})}),e.jsx("textarea",{value:m,onChange:z=>f(z.target.value),onKeyDown:z=>{z.key==="Enter"&&!z.shiftKey&&(z.preventDefault(),_(z))},placeholder:" ... (Enter - , Shift+Enter -  )",className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none resize-none",rows:3}),e.jsx("button",{type:"submit",disabled:u||!m.trim()&&p.length===0,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:u?e.jsx(Pt,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(rr,{className:"w-5 h-5"}),""]})})]})]})})]})},$a={getChats:async(s=!1,t=50,r=0)=>(await fe.get("/admin/avito/chats",{params:{unread_only:s,limit:t,offset:r}})).data,getChatInfo:async s=>(await fe.get(`/admin/avito/chats/${s}`)).data,getChatMessages:async(s,t=100,r=0)=>(await fe.get(`/admin/avito/chats/${s}/messages`,{params:{limit:t,offset:r}})).data,sendMessage:async(s,t)=>(await fe.post(`/admin/avito/chats/${s}/messages`,{text:t})).data,deleteMessage:async(s,t)=>(await fe.post(`/admin/avito/chats/${s}/messages/${t}/delete`)).data,uploadImage:async(s,t)=>{const r=new FormData;return r.append("file",t),(await fe.post(`/admin/avito/chats/${s}/images`,r,{headers:{"Content-Type":"multipart/form-data"}})).data},markChatAsRead:async s=>(await fe.post(`/admin/avito/chats/${s}/read`)).data,generateAiResponse:async s=>(await fe.post(`/admin/avito/chats/${s}/ai-suggest`)).data,createLead:async s=>(await fe.post(`/admin/avito/chats/${s}/create-lead`)).data,getAiSalesSuggestions:async(s,t,r)=>(await fe.post(`/admin/avito/chats/${s}/ai-sales`,{industry:t,action_type:r})).data,getIndustries:async(s="")=>(await fe.get("/admin/avito/ai-sales/industries",{params:{partial:s}})).data,configure:async s=>(await fe.post("/admin/avito/configure",{user_id:s})).data,setupWebhook:async()=>(await fe.post("/admin/avito/setup-webhook")).data,updateClientStatus:async(s,t,r)=>(await fe.post(`/admin/avito/chats/${s}/status`,{status:t,notes:r})).data,exportChat:async s=>(await fe.get(`/admin/avito/chats/${s}/export`,{responseType:"blob"})).data,startPolling:async()=>(await fe.post("/admin/avito/polling/start")).data,stopPolling:async()=>(await fe.post("/admin/avito/polling/stop")).data,getPollingStatus:async()=>(await fe.get("/admin/avito/polling/status")).data,toggleAutoResponse:async s=>(await fe.post("/admin/avito/auto-response/toggle",{enabled:s})).data,getDebugStatus:async()=>(await fe.get("/admin/avito/debug")).data},mG=()=>{const[s,t]=j.useState([]),[r,a]=j.useState(null),[n,i]=j.useState([]),[o,c]=j.useState(""),[u,h]=j.useState(""),[m,f]=j.useState(!1),[p,v]=j.useState(!0),[g,y]=j.useState(!1),[w,N]=j.useState(null),[k,S]=j.useState(!1),[_,T]=j.useState(!1),[E,z]=j.useState(""),[O,C]=j.useState(null),[A,X]=j.useState(!1),[I,V]=j.useState(null),[R,H]=j.useState(!1),[ee,se]=j.useState(!1),[W,te]=j.useState(!1),[J,K]=j.useState([]),$=j.useCallback((ae,he="info")=>{const xe=Date.now();K(_e=>[..._e,{id:xe,message:ae,type:he}]),setTimeout(()=>{K(_e=>_e.filter(Te=>Te.id!==xe))},3e3)},[]),ie=j.useCallback(async()=>{try{v(!0);const ae=await $a.getChats(m);t(ae.chats),N(ae.current_user_id)}catch(ae){console.error("Error loading chats:",ae),$(ae.response?.data?.message||"  ","error")}finally{v(!1)}},[m,$]),ne=j.useCallback(async ae=>{try{y(!0);const he=await $a.getChatMessages(ae);i(he.messages),await $a.markChatAsRead(ae),ie()}catch(he){console.error("Error loading messages:",he),$("  ","error")}finally{y(!1)}},[ie,$]),oe=j.useCallback(async ae=>{if(ae.preventDefault(),!(!r||!o.trim()))try{const he=await $a.sendMessage(r.id,o.trim());i(xe=>[...xe,he]),c("")}catch(he){console.error("Error sending message:",he),$("  ","error")}},[r,o,$]),ce=j.useCallback(async ae=>{if(!(!r||!ae.target.files?.[0]))try{const he=ae.target.files[0],xe=await $a.uploadImage(r.id,he);i(_e=>[..._e,xe]),$(" ","success")}catch(he){console.error("Error uploading image:",he),$("  ","error")}},[r,$]),U=j.useCallback(ae=>{a(ae),ne(ae.id)},[ne]),F=j.useCallback(async()=>{if(r)try{H(!0),V(null);const ae=await $a.generateAiResponse(r.id);V(ae.suggestion)}catch(ae){console.error("Error generating AI suggestion:",ae),$("  AI ","error")}},[r,$]),Z=j.useCallback(()=>{I&&(c(I),H(!1))},[I]),q=j.useCallback(async()=>{if(r&&confirm("    ?"))try{const ae=await $a.createLead(r.id);ae.status==="success"?$(` "${ae.lead_data.name}"  `,"success"):$("  ","info")}catch(ae){console.error("Error creating lead:",ae),$("  ","error")}},[r,$]),Q=j.useCallback(async ae=>{if(!r||!E.trim()){$("   ","error");return}try{X(!0);const he=await $a.getAiSalesSuggestions(r.id,E,ae);C(he)}catch(he){console.error("Error generating AI sales:",he),$("  AI ","error")}finally{X(!1)}},[r,E,$]),le=j.useCallback(ae=>{c(ae),T(!1),$("   ","success")},[$]),me=j.useCallback(async()=>{if(r)try{const ae=await $a.exportChat(r.id),he=window.URL.createObjectURL(ae),xe=document.createElement("a");xe.href=he,xe.download=`avito_chat_${r.id}_${new Date().toISOString().split("T")[0]}.txt`,document.body.appendChild(xe),xe.click(),window.URL.revokeObjectURL(he),document.body.removeChild(xe),$(" ","success")}catch(ae){console.error("Error exporting chat:",ae),$("  ","error")}},[r,$]),G=j.useCallback(async()=>{try{const ae=await $a.getPollingStatus();se(ae.polling_active),te(ae.auto_response_enabled)}catch(ae){console.error("Error loading polling status:",ae)}},[]),ue=j.useCallback(async()=>{try{const ae=await $a.toggleAutoResponse(!W);te(ae.enabled),$(ae.message,"success"),G()}catch(ae){console.error("Error toggling auto response:",ae),$("  ","error")}},[W,$,G]),Y=j.useMemo(()=>s.filter(ae=>{const xe=ae.users.find(Ee=>Ee.id!==w)?.name||"",_e=ae.last_message?.content?.text||"",Te=u.toLowerCase();return xe.toLowerCase().includes(Te)||_e.toLowerCase().includes(Te)}),[s,u,w]),L=j.useMemo(()=>s.reduce((ae,he)=>ae+he.unread_count,0),[s]),M=j.useCallback(ae=>ae.users.find(he=>he.id!==w),[w]),B=j.useCallback(ae=>{const he=new Date(ae*1e3),xe=new Date;return he.toDateString()===xe.toDateString()?he.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}):he.toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit"})},[]);return j.useEffect(()=>{ie(),G();const ae=setInterval(ie,3e4);return()=>clearInterval(ae)},[ie,G]),e.jsxs("div",{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-pink-500 to-rose-600 flex items-center justify-center shadow-lg",children:e.jsx(Os,{className:"w-6 h-6 text-gray-900"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" "}),e.jsx("p",{className:"text-sm text-gray-600",children:"   "})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-white rounded-xl border border-gray-200",children:[e.jsx(Tf,{className:"w-5 h-5 text-purple-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"AI "}),e.jsx("button",{onClick:ue,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${W?"bg-green-500":"bg-gray-600"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${W?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("button",{onClick:ie,className:"px-4 py-2 bg-white hover:bg-gray-50 rounded-xl border border-gray-200 text-gray-900 transition-colors flex items-center gap-2",children:[e.jsx(ls,{className:"w-4 h-4"}),""]}),e.jsxs("button",{onClick:()=>S(!0),className:"px-4 py-2 bg-gradient-to-r from-pink-500 to-rose-600 hover:from-pink-600 hover:to-rose-700 rounded-xl text-gray-900 transition-all flex items-center gap-2",children:[e.jsx(Ta,{className:"w-4 h-4"}),""]})]})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[e.jsx("div",{className:"col-span-4 space-y-4",children:e.jsxs("div",{className:"bg-white backdrop-blur-xl rounded-2xl border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-4 space-y-3 border-b border-gray-200",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Us,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-600"}),e.jsx("input",{type:"text",placeholder:" ...",value:u,onChange:ae=>h(ae.target.value),className:"w-full pl-10 pr-4 py-2 bg-white border border-gray-200 rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-pink-500"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m,onChange:ae=>f(ae.target.checked),className:"rounded border-gray-300 bg-white"})," "]}),e.jsxs("span",{className:"px-3 py-1 bg-pink-500/20 text-pink-300 rounded-full text-sm font-medium",children:[L," "]})]})]}),e.jsx("div",{className:"max-h-[600px] overflow-y-auto",children:p?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx(Kc,{className:"w-6 h-6 animate-spin text-pink-500"})}):Y.length===0?e.jsxs("div",{className:"text-center p-8 text-gray-600",children:[e.jsx(Os,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:" "})]}):Y.map(ae=>{const xe=M(ae)?.name||"",_e=ae.last_message?.content?.text||" ",Te=ae.last_message?B(ae.last_message.created):"";return e.jsx("button",{onClick:()=>U(ae),className:`w-full p-4 border-b border-gray-100 hover:bg-white transition-colors text-left ${r?.id===ae.id?"bg-gray-50":""}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-pink-500 to-rose-600 flex items-center justify-center text-gray-900 font-bold flex-shrink-0",children:xe.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"font-medium text-gray-900 truncate",children:xe}),ae.unread_count>0&&e.jsx("span",{className:"px-2 py-0.5 bg-pink-500 text-gray-900 text-xs rounded-full",children:ae.unread_count})]}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:_e})]}),e.jsx("span",{className:"text-xs text-gray-600",children:Te})]})},ae.id)})})]})}),e.jsx("div",{className:"col-span-8",children:r?e.jsxs("div",{className:"h-full bg-white backdrop-blur-xl rounded-2xl border border-gray-200 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-pink-500 to-rose-600 flex items-center justify-center text-gray-900 font-bold",children:M(r)?.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:M(r)?.name}),r.context?.value?.title&&e.jsxs("p",{className:"text-sm text-gray-600",children:[r.context.value.title," - ",r.context.value.price," ."]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>T(!0),className:"p-2 hover:bg-white rounded-lg text-purple-400 transition-colors",title:"AI ",children:e.jsx(kn,{className:"w-5 h-5"})}),e.jsx("button",{onClick:q,className:"p-2 hover:bg-white rounded-lg text-green-400 transition-colors",title:" ",children:e.jsx(Is,{className:"w-5 h-5"})}),e.jsx("button",{onClick:me,className:"p-2 hover:bg-white rounded-lg text-blue-400 transition-colors",title:" ",children:e.jsx(Tt,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:g?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(Kc,{className:"w-6 h-6 animate-spin text-pink-500"})}):n.map(ae=>e.jsx("div",{className:`flex ${ae.direction==="out"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[70%] rounded-2xl p-3 ${ae.direction==="out"?"bg-gradient-to-r from-pink-500 to-rose-600 text-gray-900":"bg-gray-50 text-gray-900"}`,children:[ae.type==="text"&&ae.content.text&&e.jsx("p",{className:"text-sm",children:ae.content.text}),ae.type==="image"&&ae.content.image&&e.jsx("img",{src:ae.content.image["640x480"]||ae.content.image["1280x960"],alt:"Attachment",className:"max-w-xs rounded-lg cursor-pointer",onClick:()=>window.open(ae.content.image?.["1280x960"],"_blank")}),e.jsx("p",{className:"text-xs opacity-70 mt-1",children:B(ae.created)})]})},ae.id))}),R&&e.jsxs("div",{className:"p-4 bg-purple-500/10 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[e.jsx(Tf,{className:"w-5 h-5 text-purple-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"AI   "}),I?e.jsx("div",{className:"p-3 bg-white rounded-lg border border-gray-200",children:e.jsx("p",{className:"text-sm text-gray-900",children:I})}):e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Kc,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{className:"text-sm",children:" ..."})]})]}),e.jsx("button",{onClick:()=>H(!1),className:"text-gray-600 hover:text-gray-900",children:e.jsx(De,{className:"w-4 h-4"})})]}),I&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:Z,className:"px-3 py-1.5 bg-green-500 hover:bg-green-600 text-gray-900 rounded-lg text-sm transition-colors",children:[e.jsx(is,{className:"w-4 h-4 inline mr-1"}),""]}),e.jsxs("button",{onClick:F,className:"px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-gray-900 rounded-lg text-sm transition-colors",children:[e.jsx(ls,{className:"w-4 h-4 inline mr-1"})," "]})]})]}),e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsxs("form",{onSubmit:oe,className:"flex items-center gap-2",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:ce,className:"hidden",id:"image-upload"}),e.jsx("label",{htmlFor:"image-upload",className:"p-2 hover:bg-white rounded-lg text-gray-600 hover:text-gray-900 cursor-pointer transition-colors",children:e.jsx(sm,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",onClick:F,className:"p-2 hover:bg-white rounded-lg text-purple-400 hover:text-purple-300 transition-colors",title:"AI ",children:e.jsx(Tf,{className:"w-5 h-5"})}),e.jsx("input",{type:"text",value:o,onChange:ae=>c(ae.target.value),placeholder:" ...",className:"flex-1 px-4 py-2 bg-white border border-gray-200 rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-pink-500"}),e.jsxs("button",{type:"submit",disabled:!o.trim(),className:"px-4 py-2 bg-gradient-to-r from-pink-500 to-rose-600 hover:from-pink-600 hover:to-rose-700 rounded-xl text-gray-900 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(rr,{className:"w-4 h-4"}),""]})]})})]}):e.jsx("div",{className:"h-full bg-white backdrop-blur-xl rounded-2xl border border-gray-200 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Os,{className:"w-16 h-16 mx-auto mb-4 text-gray-600"}),e.jsx("p",{className:"text-xl text-gray-600",children:"    "})]})})})]}),_&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-[#1a1d2e] rounded-2xl border border-gray-200 max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(kn,{className:"w-6 h-6 text-purple-400"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"AI "})]}),e.jsx("button",{onClick:()=>T(!1),className:"text-gray-600 hover:text-gray-900",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),e.jsx("input",{type:"text",value:E,onChange:ae=>z(ae.target.value),placeholder:", , ...",className:"w-full px-4 py-2 bg-white border border-gray-200 rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:()=>Q("startup_offer"),disabled:A,className:"px-4 py-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 rounded-xl text-gray-900 transition-all disabled:opacity-50",children:" "}),e.jsx("button",{onClick:()=>Q("suggest_response"),disabled:A,className:"px-4 py-3 bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700 rounded-xl text-gray-900 transition-all disabled:opacity-50",children:" "})]}),A&&e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx(Kc,{className:"w-6 h-6 animate-spin text-purple-500"})}),O&&!A&&e.jsxs("div",{className:"space-y-3",children:[O.offer&&e.jsxs("div",{className:"p-4 bg-white rounded-xl border border-gray-200",children:[e.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:O.offer}),e.jsx("button",{onClick:()=>le(O.offer),className:"mt-3 px-4 py-2 bg-green-500 hover:bg-green-600 rounded-lg text-gray-900 text-sm transition-colors",children:""})]}),O.variants&&e.jsx("div",{className:"space-y-2",children:O.variants.map((ae,he)=>e.jsxs("div",{className:"p-4 bg-white rounded-xl border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:ae.title}),e.jsx("p",{className:"text-gray-900",children:ae.text}),e.jsx("button",{onClick:()=>le(ae.text),className:"mt-2 px-3 py-1.5 bg-green-500 hover:bg-green-600 rounded-lg text-gray-900 text-sm transition-colors",children:""})]},he))})]})]})]})}),e.jsx("div",{className:"fixed bottom-4 right-4 space-y-2 z-50",children:J.map(ae=>e.jsx("div",{className:`px-4 py-3 rounded-xl shadow-lg backdrop-blur-sm border ${ae.type==="success"?"bg-green-500/90 border-green-400":ae.type==="error"?"bg-red-500/90 border-red-400":"bg-blue-500/90 border-blue-400"} text-gray-900`,children:ae.message},ae.id))})]})},$c={getStats:async()=>{const t=(await fe.get("/admin/documents/api/list")).data;if(!t.success)throw new Error(t.message||"Failed to load statistics");const r=t.documents;return{total:r.length,contracts:r.filter(a=>a.type==="contract").length,invoices:r.filter(a=>a.type==="invoice").length,acts:r.filter(a=>a.type==="act").length,other:r.filter(a=>a.type==="other").length}},getDocuments:async s=>{const t=new URLSearchParams;s?.type&&t.append("type",s.type),s?.search&&t.append("search",s.search),s?.project_id&&t.append("project_id",s.project_id.toString());const r=`/admin/documents/api/list${t.toString()?`?${t.toString()}`:""}`,a=await fe.get(r);if(!a.data.success)throw new Error(a.data.message||"Failed to load documents");return a.data.documents},uploadDocument:async s=>{const t=new FormData;return t.append("file",s.file),t.append("name",s.name),t.append("type",s.type),s.description&&t.append("description",s.description),s.number&&t.append("number",s.number),s.project_id&&t.append("project_id",s.project_id.toString()),(await fe.post("/admin/documents/api/upload",t,{headers:{"Content-Type":"multipart/form-data"}})).data},downloadDocument:async s=>(await fe.get(`/admin/documents/api/download/${s}`,{responseType:"blob"})).data,deleteDocument:async s=>(await fe.delete(`/admin/documents/api/${s}`)).data,getProjects:async()=>{const s=await fe.get("/admin/documents/api/projects");if(!s.data.success)throw new Error(s.data.message||"Failed to load projects");return s.data.projects}},xG=()=>{const[s,t]=j.useState([]),[r,a]=j.useState([]),[n,i]=j.useState([]),[o,c]=j.useState({total:0,contracts:0,invoices:0,acts:0,other:0}),[u,h]=j.useState(!0),[m,f]=j.useState(!1),[p,v]=j.useState(""),[g,y]=j.useState(""),[w,N]=j.useState(""),[k,S]=j.useState(!1),[_,T]=j.useState({name:"",type:"invoice",number:"",description:"",project_id:"",file:null}),[E,z]=j.useState([]),O=j.useCallback((W,te="info")=>{const J=Date.now().toString();z(K=>[...K,{id:J,message:W,type:te}]),setTimeout(()=>{z(K=>K.filter($=>$.id!==J))},4e3)},[]),C=j.useCallback(async()=>{try{const[W,te,J]=await Promise.all([$c.getDocuments(),$c.getStats(),$c.getProjects()]);t(W),a(W),c(te),i(J)}catch(W){console.error("Error loading documents:",W),O("  ","error")}finally{h(!1)}},[O]);j.useEffect(()=>{C()},[C]),j.useEffect(()=>{let W=[...s];if(p){const te=p.toLowerCase();W=W.filter(J=>J.name.toLowerCase().includes(te)||J.number?.toLowerCase().includes(te)||J.description?.toLowerCase().includes(te))}g&&(W=W.filter(te=>te.type===g)),w&&(W=W.filter(te=>te.project_id?.toString()===w)),a(W)},[s,p,g,w]);const A=async()=>{if(!_.name||!_.type||!_.file){O("  ","error");return}f(!0);try{const W=await $c.uploadDocument({file:_.file,name:_.name,type:_.type,description:_.description||void 0,number:_.number||void 0,project_id:_.project_id?parseInt(_.project_id):void 0});W.success?(O(W.message,"success"),S(!1),T({name:"",type:"invoice",number:"",description:"",project_id:"",file:null}),await C()):O(W.message,"error")}catch(W){console.error("Error uploading document:",W),W.response?.status===403?O("      ","error"):O("  ","error")}finally{f(!1)}},X=async W=>{try{const te=await $c.downloadDocument(W.id),J=window.URL.createObjectURL(te),K=document.createElement("a");K.href=J;const $=W.file_path.split(".").pop()||"";K.download=$?`${W.name}.${$}`:W.name,document.body.appendChild(K),K.click(),document.body.removeChild(K),window.URL.revokeObjectURL(J),O(" ","success")}catch(te){console.error("Error downloading document:",te),te.response?.status===403?O("    ","error"):te.response?.status===404?O("  ","error"):O("  ","error")}},I=async W=>{if(window.confirm(` ,     "${W.name}"?`))try{const te=await $c.deleteDocument(W.id);te.success?(O(te.message,"success"),await C()):O(te.message,"error")}catch(te){console.error("Error deleting document:",te),te.response?.status===403?O("     ","error"):O("  ","error")}},V=W=>{if(!W)return"0 B";const te=1024,J=["B","KB","MB","GB"],K=Math.floor(Math.log(W)/Math.log(te));return`${Math.round(W/Math.pow(te,K)*100)/100} ${J[K]}`},R=W=>W?new Date(W).toLocaleDateString("ru-RU",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"",H=W=>W.includes("pdf")?e.jsx(Mr,{className:"w-5 h-5 text-red-500"}):W.includes("word")||W.includes("document")?e.jsx(Ue,{className:"w-5 h-5 text-blue-500"}):W.includes("excel")||W.includes("spreadsheet")?e.jsx(Ue,{className:"w-5 h-5 text-green-500"}):W.includes("image")?e.jsx(Mr,{className:"w-5 h-5 text-purple-500"}):e.jsx(Mr,{className:"w-5 h-5 text-gray-500"}),ee=W=>{const te={contract:"bg-red-100 text-red-800",invoice:"bg-blue-100 text-blue-800",act:"bg-green-100 text-green-800",other:"bg-gray-100 text-gray-800"},J={contract:"",invoice:"",act:"",other:""};return e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${te[W]}`,children:J[W]})},se=W=>{switch(W){case"contract":return e.jsx(Ue,{className:"w-8 h-8"});case"invoice":return e.jsx(Ue,{className:"w-8 h-8"});case"act":return e.jsx(Ue,{className:"w-8 h-8"});default:return e.jsx(Mr,{className:"w-8 h-8"})}};return u?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx(Pt,{className:"w-8 h-8 animate-spin text-blue-600"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-amber-600 to-orange-600 bg-clip-text text-transparent",children:""}),e.jsx("p",{className:"text-gray-600 mt-2",children:"  "})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>C(),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2",children:[e.jsx(ls,{className:"w-4 h-4"}),""]}),e.jsxs("button",{onClick:()=>S(!0),className:"px-4 py-2 bg-gradient-to-r from-amber-600 to-orange-600 text-white rounded-lg hover:from-amber-700 hover:to-orange-700 transition-all flex items-center gap-2 shadow-lg",children:[e.jsx(jn,{className:"w-4 h-4"})," "]})]})]}),e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:E.map(W=>e.jsx("div",{className:`px-6 py-3 rounded-lg shadow-lg text-white ${W.type==="success"?"bg-green-500":W.type==="error"?"bg-red-500":"bg-blue-500"} animate-slide-in`,children:W.message},W.id))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 text-white shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-100 text-sm font-medium mb-1",children:" "}),e.jsx("p",{className:"text-3xl font-bold",children:o.total})]}),e.jsx("div",{className:"opacity-75",children:se("other")})]})}),e.jsx("div",{className:"bg-gradient-to-br from-red-500 to-red-600 rounded-xl p-6 text-white shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-red-100 text-sm font-medium mb-1",children:""}),e.jsx("p",{className:"text-3xl font-bold",children:o.contracts})]}),e.jsx("div",{className:"opacity-75",children:se("contract")})]})}),e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm font-medium mb-1",children:""}),e.jsx("p",{className:"text-3xl font-bold",children:o.invoices})]}),e.jsx("div",{className:"opacity-75",children:se("invoice")})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 text-white shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm font-medium mb-1",children:""}),e.jsx("p",{className:"text-3xl font-bold",children:o.acts})]}),e.jsx("div",{className:"opacity-75",children:se("act")})]})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-md p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Us,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"  , , ...",value:p,onChange:W=>v(W.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(wr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsxs("select",{value:g,onChange:W=>y(W.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 appearance-none bg-white",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"contract",children:""}),e.jsx("option",{value:"invoice",children:""}),e.jsx("option",{value:"act",children:""}),e.jsx("option",{value:"other",children:""})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(wr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsxs("select",{value:w,onChange:W=>N(W.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 appearance-none bg-white",children:[e.jsx("option",{value:"",children:" "}),n.map(W=>e.jsx("option",{value:W.id,children:W.title},W.id))]})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-800 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:" "}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-center font-semibold",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:r.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:8,className:"px-6 py-12 text-center",children:[e.jsx(Ue,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:" "}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"  "})]})}):r.map(W=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[H(W.file_type),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:W.name}),W.description&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:W.description})]})]})}),e.jsx("td",{className:"px-6 py-4",children:ee(W.type)}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:W.number||""}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:W.project_name||""}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:V(W.file_size)}),e.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:R(W.created_at)}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:W.created_by||""}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>X(W),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"",children:e.jsx(Tt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>I(W),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"",children:e.jsx(tt,{className:"w-4 h-4"})})]})})]},W.id))})]})})}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:" "}),e.jsx("button",{onClick:()=>S(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:_.name,onChange:W=>T({..._,name:W.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"  "})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:_.type,onChange:W=>T({..._,type:W.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500",children:[e.jsx("option",{value:"invoice",children:""}),e.jsx("option",{value:"act",children:""}),e.jsx("option",{value:"contract",children:""}),e.jsx("option",{value:"other",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"text",value:_.number,onChange:W=>T({..._,number:W.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"123"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:_.project_id,onChange:W=>T({..._,project_id:W.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500",children:[e.jsx("option",{value:"",children:" "}),n.map(W=>e.jsxs("option",{value:W.id,children:[W.title," ",W.client_name&&`(${W.client_name})`]},W.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:_.description,onChange:W=>T({..._,description:W.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 resize-none",placeholder:"   "})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-amber-500 transition-colors",children:[e.jsx("input",{type:"file",onChange:W=>T({..._,file:W.target.files?.[0]||null}),className:"hidden",id:"file-upload",accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png"}),e.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[e.jsx(jn,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),_.file?e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:_.file.name}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:V(_.file.size)})]}):e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-1",children:"   "}),e.jsx("p",{className:"text-xs text-gray-500",children:"PDF, Word, Excel, "})]})]})]})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 flex items-center justify-end gap-3 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>S(!1),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:""}),e.jsx("button",{onClick:A,disabled:m,className:"px-6 py-2 bg-gradient-to-r from-amber-600 to-orange-600 text-white rounded-lg hover:from-amber-700 hover:to-orange-700 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:m?e.jsxs(e.Fragment,{children:[e.jsx(Pt,{className:"w-4 h-4 animate-spin"}),"..."]}):e.jsxs(e.Fragment,{children:[e.jsx(jn,{className:"w-4 h-4"}),""]})})]})]})})]})},fo={getList:async s=>{const t=new URLSearchParams;return s?.page&&t.append("page",s.page.toString()),s?.per_page&&t.append("per_page",s.per_page.toString()),s?.category&&t.append("category",s.category),s?.search&&t.append("search",s.search),s?.featured_only!==void 0&&t.append("featured_only",s.featured_only.toString()),s?.visible_only!==void 0&&t.append("visible_only",s.visible_only.toString()),s?.sort_by&&t.append("sort_by",s.sort_by),(await fe.get(`/admin/api/portfolio/?${t.toString()}`)).data},getCategories:async()=>(await fe.get("/admin/api/portfolio/categories")).data,getItem:async s=>(await fe.get(`/admin/api/portfolio/${s}`)).data,create:async s=>{const t=new FormData;return t.append("title",s.title),s.subtitle&&t.append("subtitle",s.subtitle),t.append("description",s.description),t.append("category",s.category),s.technologies&&t.append("technologies",s.technologies),t.append("complexity",s.complexity||"medium"),t.append("complexity_level",(s.complexity_level||5).toString()),s.development_time&&t.append("development_time",s.development_time.toString()),s.cost&&t.append("cost",s.cost.toString()),s.cost_range&&t.append("cost_range",s.cost_range),t.append("show_cost",(s.show_cost||!1).toString()),s.demo_link&&t.append("demo_link",s.demo_link),s.repository_link&&t.append("repository_link",s.repository_link),t.append("external_links",s.external_links||"[]"),t.append("is_featured",(s.is_featured||!1).toString()),t.append("is_visible",(s.is_visible!==!1).toString()),t.append("sort_order",(s.sort_order||0).toString()),s.tags&&t.append("tags",s.tags),s.client_name&&t.append("client_name",s.client_name),t.append("project_status",s.project_status||"completed"),s.completed_at&&t.append("completed_at",s.completed_at),s.main_image&&t.append("main_image",s.main_image),(await fe.post("/admin/api/portfolio/",t,{headers:{"Content-Type":"multipart/form-data"}})).data},update:async(s,t)=>{const r=new FormData;return r.append("title",t.title),r.append("subtitle",t.subtitle||""),r.append("description",t.description),r.append("category",t.category),r.append("technologies",t.technologies||""),r.append("complexity",t.complexity||"medium"),r.append("complexity_level",(t.complexity_level||5).toString()),r.append("development_time",(t.development_time||0).toString()),r.append("cost",(t.cost||0).toString()),r.append("cost_range",t.cost_range||""),r.append("show_cost",(t.show_cost||!1).toString()),r.append("demo_link",t.demo_link||""),r.append("repository_link",t.repository_link||""),r.append("external_links",t.external_links||"[]"),r.append("is_featured",(t.is_featured||!1).toString()),r.append("is_visible",(t.is_visible!==!1).toString()),r.append("sort_order",(t.sort_order||0).toString()),r.append("tags",t.tags||""),r.append("client_name",t.client_name||""),r.append("project_status",t.project_status||"completed"),r.append("remove_main_image",(t.remove_main_image||!1).toString()),t.main_image&&r.append("main_image",t.main_image),(await fe.put(`/admin/api/portfolio/${s}`,r,{headers:{"Content-Type":"multipart/form-data"}})).data},delete:async s=>(await fe.delete(`/admin/api/portfolio/${s}`)).data,uploadImage:async(s,t)=>{const r=new FormData;return r.append("file",s),t&&r.append("subfolder",t),(await fe.post("/admin/api/portfolio/upload-image",r,{headers:{"Content-Type":"multipart/form-data"}})).data},reorder:async s=>(await fe.post("/admin/api/portfolio/reorder",{projects:s})).data,getStats:async()=>(await fe.get("/admin/api/portfolio/stats/overview")).data,publishToTelegram:async s=>(await fe.post(`/admin/api/portfolio/${s}/publish`)).data,updatePublished:async s=>(await fe.put(`/admin/api/portfolio/${s}/update-published`)).data,unpublish:async s=>(await fe.delete(`/admin/api/portfolio/${s}/unpublish`)).data},fG=()=>{const[s,t]=j.useState(!0),[r,a]=j.useState([]),[n,i]=j.useState(null),[o,c]=j.useState([]),[u,h]=j.useState(1),[m,f]=j.useState(1),[p,v]=j.useState(0),g=12,[y,w]=j.useState(""),[N,k]=j.useState(""),[S,_]=j.useState(""),[T,E]=j.useState("created_desc"),[z,O]=j.useState("grid"),[C,A]=j.useState(!1),[X,I]=j.useState(null),[V,R]=j.useState(!1),[H,ee]=j.useState({title:"",subtitle:"",description:"",category:"",technologies:"",complexity:"medium",complexity_level:5,development_time:void 0,cost:void 0,cost_range:"",show_cost:!1,demo_link:"",repository_link:"",external_links:"[]",is_featured:!1,is_visible:!0,sort_order:0,tags:"",client_name:"",project_status:"completed",completed_at:""}),[se,W]=j.useState(null),[te,J]=j.useState(""),[K,$]=j.useState(!1),[ie,ne]=j.useState([]),oe=j.useCallback((B,ae="info")=>{const he=Date.now().toString();ne(xe=>[...xe,{id:he,message:B,type:ae}]),setTimeout(()=>{ne(xe=>xe.filter(_e=>_e.id!==he))},4e3)},[]),ce=j.useCallback(async()=>{try{t(!0);const B=S==="active",ae=S==="featured",[he,xe,_e]=await Promise.all([fo.getList({page:u,per_page:g,category:N||void 0,search:y||void 0,featured_only:ae,visible_only:B,sort_by:T}),fo.getStats(),fo.getCategories()]);he.success&&(a(he.data),f(he.pagination.pages),v(he.pagination.total)),xe.success&&i(xe.stats),_e.success&&c(_e.categories)}catch(B){console.error("Error loading portfolio:",B),oe("  ","error")}finally{t(!1)}},[u,N,y,T,S,oe]);j.useEffect(()=>{ce()},[ce]);const U=B=>{B?(I(B),ee({title:B.title,subtitle:B.subtitle||"",description:B.description,category:B.category,technologies:B.technologies||"",complexity:B.complexity,complexity_level:B.complexity_level,development_time:B.development_time,cost:B.cost,cost_range:B.cost_range||"",show_cost:B.show_cost,demo_link:B.demo_link||"",repository_link:B.repository_link||"",external_links:JSON.stringify(B.external_links||[]),is_featured:B.is_featured,is_visible:B.is_visible,sort_order:B.sort_order,tags:B.tags||"",client_name:B.client_name||"",project_status:B.project_status,completed_at:B.completed_at||""}),B.main_image&&J(`http://localhost:8001/uploads/portfolio/${B.main_image}`)):(I(null),Z()),A(!0),document.body.style.overflow="hidden"},F=()=>{A(!1),I(null),Z(),document.body.style.overflow="auto"},Z=()=>{ee({title:"",subtitle:"",description:"",category:"",technologies:"",complexity:"medium",complexity_level:5,development_time:void 0,cost:void 0,cost_range:"",show_cost:!1,demo_link:"",repository_link:"",external_links:"[]",is_featured:!1,is_visible:!0,sort_order:0,tags:"",client_name:"",project_status:"completed",completed_at:""}),W(null),J(""),$(!1)},q=B=>{const ae=B.target.files?.[0];if(ae){if(ae.size>10*1024*1024){oe("  .  10MB","error");return}W(ae);const he=new FileReader;he.onloadend=()=>{J(he.result)},he.readAsDataURL(ae),$(!1)}},Q=()=>{W(null),J(""),$(!0)},le=async B=>{if(B.preventDefault(),!H.title||!H.description||!H.category){oe("  ","error");return}try{R(!0);const ae={...H,main_image:se||void 0};if(X){ae.remove_main_image=K;const he=await fo.update(X.id,ae);he.success&&(oe(he.message,"success"),F(),ce())}else{const he=await fo.create(ae);he.success&&(oe(he.message,"success"),F(),ce())}}catch(ae){console.error("Error saving project:",ae),oe(ae.response?.data?.detail||"  ","error")}finally{R(!1)}},me=async B=>{if(confirm(` ,     "${B.title}"?    .`))try{const ae=await fo.delete(B.id);ae.success&&(oe(ae.message,"success"),ce())}catch(ae){console.error("Error deleting project:",ae),oe(ae.response?.data?.detail||"  ","error")}},G=async B=>{if(B.is_published){oe("    Telegram","info");return}try{const ae=await fo.publishToTelegram(B.id);ae.success&&(oe(ae.message,"success"),ce())}catch(ae){console.error("Error publishing to Telegram:",ae),oe(ae.response?.data?.detail||"   Telegram","error")}},ue=B=>new Date(B).toLocaleDateString("ru-RU",{year:"numeric",month:"2-digit",day:"2-digit"}),Y=B=>({telegram_bots:"Telegram ",web_development:"-",mobile_apps:" ",ai_integration:"AI ",automation:"",ecommerce:"E-commerce",other:""})[B]||B,L=B=>{const ae={simple:"bg-green-100 text-green-800",medium:"bg-blue-100 text-blue-800",complex:"bg-orange-100 text-orange-800",premium:"bg-purple-100 text-purple-800"},he={simple:"",medium:"",complex:"",premium:""};return e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${ae[B]}`,children:he[B]})},M=B=>{const ae={completed:"bg-green-100 text-green-800",in_progress:"bg-blue-100 text-blue-800",demo:"bg-yellow-100 text-yellow-800"},he={completed:"",in_progress:" ",demo:"-"};return e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${ae[B]}`,children:he[B]})};return s&&!n?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx(Pt,{className:"w-8 h-8 animate-spin text-purple-600"})}):e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 via-pink-50 to-rose-50 p-6",children:[e.jsxs("div",{className:"max-w-[2000px] mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:""}),e.jsx("p",{className:"text-gray-600 mt-1",children:"  "})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:ce,className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-200",children:[e.jsx(ls,{className:"w-5 h-5"}),""]}),e.jsxs("button",{onClick:()=>U(),className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-lg",children:[e.jsx(We,{className:"w-5 h-5"})," "]})]})]}),n&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 rounded-xl shadow-lg p-6 border border-purple-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-violet-500 flex items-center justify-center shadow-lg",children:e.jsx(fE,{className:"w-6 h-6 text-white"})})}),e.jsx("div",{className:"text-3xl font-bold text-purple-700 mb-1",children:n.total}),e.jsx("div",{className:"text-sm text-gray-600 uppercase tracking-wide",children:" "})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl shadow-lg p-6 border border-green-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center shadow-lg",children:e.jsx(Vt,{className:"w-6 h-6 text-white"})})}),e.jsx("div",{className:"text-3xl font-bold text-green-700 mb-1",children:n.visible}),e.jsx("div",{className:"text-sm text-gray-600 uppercase tracking-wide",children:""})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-amber-50 rounded-xl shadow-lg p-6 border border-yellow-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-yellow-500 to-amber-500 flex items-center justify-center shadow-lg",children:e.jsx(Hf,{className:"w-6 h-6 text-white"})})}),e.jsx("div",{className:"text-3xl font-bold text-yellow-700 mb-1",children:n.featured}),e.jsx("div",{className:"text-sm text-gray-600 uppercase tracking-wide",children:""})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl shadow-lg p-6 border border-blue-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center shadow-lg",children:e.jsx(xt,{className:"w-6 h-6 text-white"})})}),e.jsx("div",{className:"text-3xl font-bold text-blue-700 mb-1",children:n.total_views}),e.jsx("div",{className:"text-sm text-gray-600 uppercase tracking-wide",children:""})]}),e.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-rose-50 rounded-xl shadow-lg p-6 border border-pink-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-pink-500 to-rose-500 flex items-center justify-center shadow-lg",children:e.jsx(kn,{className:"w-6 h-6 text-white"})})}),e.jsx("div",{className:"text-3xl font-bold text-pink-700 mb-1",children:Object.keys(n.categories).length}),e.jsx("div",{className:"text-sm text-gray-600 uppercase tracking-wide",children:""})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"lg:col-span-2 relative",children:[e.jsx(Us,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"  , , ...",value:y,onChange:B=>{w(B.target.value),h(1)},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),e.jsxs("select",{value:N,onChange:B=>{k(B.target.value),h(1)},className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"",children:" "}),o.map(B=>e.jsxs("option",{value:B.id,children:[B.name," (",B.count,")"]},B.id))]}),e.jsxs("select",{value:S,onChange:B=>{_(B.target.value),h(1)},className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"active",children:""}),e.jsx("option",{value:"featured",children:""})]}),e.jsxs("select",{value:T,onChange:B=>E(B.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"created_desc",children:" "}),e.jsx("option",{value:"created_asc",children:" "}),e.jsx("option",{value:"title_asc",children:"  -"}),e.jsx("option",{value:"title_desc",children:"  -"}),e.jsx("option",{value:"order_asc",children:" "})]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[e.jsx("span",{className:"text-sm text-gray-600",children:":"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>O("grid"),className:`p-2 rounded-lg transition-all ${z==="grid"?"bg-purple-100 text-purple-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:e.jsx(cE,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>O("list"),className:`p-2 rounded-lg transition-all ${z==="list"?"bg-purple-100 text-purple-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:e.jsx(Mm,{className:"w-5 h-5"})})]})]})]}),r.length===0?e.jsx("div",{className:"bg-white rounded-3xl p-16 shadow-xl border border-gray-100",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-purple-100 to-pink-100 rounded-3xl flex items-center justify-center mb-6",children:e.jsx(kn,{className:"w-12 h-12 text-purple-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:" "}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-md",children:"    ,  "}),e.jsxs("button",{onClick:()=>U(),className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-8 py-3 rounded-xl font-semibold hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5 flex items-center gap-2",children:[e.jsx(We,{className:"w-5 h-5"}),"  "]})]})}):z==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:r.map(B=>e.jsxs("div",{className:`bg-white rounded-2xl shadow-lg overflow-hidden transition-all duration-300 hover:shadow-xl hover:-translate-y-1 ${B.is_featured?"ring-2 ring-yellow-400":""}`,children:[e.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-purple-500 to-pink-500",children:[B.main_image?e.jsx("img",{src:`http://localhost:8001/uploads/portfolio/${B.main_image}`,alt:B.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(sm,{className:"w-16 h-16 text-white opacity-50"})}),B.is_featured&&e.jsxs("div",{className:"absolute top-3 right-3 bg-yellow-400 text-yellow-900 px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1",children:[e.jsx(Is,{className:"w-3 h-3"}),""]}),!B.is_visible&&e.jsxs("div",{className:"absolute top-3 left-3 bg-gray-800 text-white px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1",children:[e.jsx(Ho,{className:"w-3 h-3"}),""]})]}),e.jsxs("div",{className:"p-5",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsx("h3",{className:"text-lg font-bold text-gray-900 line-clamp-1",children:B.title})}),B.subtitle&&e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-1",children:B.subtitle}),e.jsx("p",{className:"text-sm text-gray-700 mb-4 line-clamp-2",children:B.description}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 rounded text-xs font-semibold",children:Y(B.category)}),L(B.complexity),M(B.project_status)]}),e.jsxs("div",{className:"flex items-center gap-4 mb-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Vt,{className:"w-4 h-4"}),B.views_count]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(F4,{className:"w-4 h-4"}),B.likes_count]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>U(B),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all text-sm font-semibold",children:[e.jsx(sr,{className:"w-4 h-4"}),""]}),e.jsx("button",{onClick:()=>G(B),className:"px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-all",title:"  Telegram",children:e.jsx(rr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>me(B),className:"px-3 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-all",title:"",children:e.jsx(tt,{className:"w-4 h-4"})})]})]})]},B.id))}):e.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-800 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-center font-semibold",children:""})]})}),e.jsx("tbody",{children:r.map((B,ae)=>e.jsxs("tr",{className:`border-b border-gray-200 hover:bg-gray-50 transition-colors ${ae%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex-shrink-0 overflow-hidden",children:B.main_image?e.jsx("img",{src:`http://localhost:8001/uploads/portfolio/${B.main_image}`,alt:B.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(sm,{className:"w-6 h-6 text-white opacity-50"})})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[B.title,B.is_featured&&e.jsx(Is,{className:"w-4 h-4 text-yellow-500"}),!B.is_visible&&e.jsx(Ho,{className:"w-4 h-4 text-gray-400"})]}),B.subtitle&&e.jsx("div",{className:"text-sm text-gray-600",children:B.subtitle})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-semibold",children:Y(B.category)})}),e.jsx("td",{className:"px-6 py-4",children:M(B.project_status)}),e.jsx("td",{className:"px-6 py-4",children:L(B.complexity)}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Vt,{className:"w-4 h-4"}),B.views_count]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(F4,{className:"w-4 h-4"}),B.likes_count]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:ue(B.created_at)}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>U(B),className:"p-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-all",title:"",children:e.jsx(sr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>G(B),className:"p-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-all",title:"  Telegram",children:e.jsx(rr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>me(B),className:"p-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-all",title:"",children:e.jsx(tt,{className:"w-4 h-4"})})]})})]},B.id))})]})}),m>1&&e.jsxs("div",{className:"flex items-center justify-between bg-white rounded-xl shadow-md p-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[" ",r.length,"  ",p," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>h(B=>Math.max(1,B-1)),disabled:u===1,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:""}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,m)},(B,ae)=>{let he;return m<=5||u<=3?he=ae+1:u>=m-2?he=m-4+ae:he=u-2+ae,e.jsx("button",{onClick:()=>h(he),className:`w-10 h-10 rounded-lg transition-all ${u===he?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:he},ae)})}),e.jsx("button",{onClick:()=>h(B=>Math.min(m,B+1)),disabled:u===m,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:""})]})]})]}),C&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-4 rounded-t-2xl flex items-center justify-between z-10",children:[e.jsx("h2",{className:"text-xl font-bold",children:X?" ":" "}),e.jsx("button",{onClick:F,className:"p-2 hover:bg-white/20 rounded-lg transition-all",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("form",{onSubmit:le,className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:H.title,onChange:B=>ee({...H,title:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Telegram   -",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"text",value:H.subtitle,onChange:B=>ee({...H,subtitle:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"    "})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:H.description,onChange:B=>ee({...H,description:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",rows:4,placeholder:"  ,  ,  ...",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:H.category,onChange:B=>ee({...H,category:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0,children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"telegram_bots",children:"Telegram "}),e.jsx("option",{value:"web_development",children:"-"}),e.jsx("option",{value:"mobile_apps",children:" "}),e.jsx("option",{value:"ai_integration",children:"AI "}),e.jsx("option",{value:"automation",children:""}),e.jsx("option",{value:"ecommerce",children:"E-commerce"}),e.jsx("option",{value:"other",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:H.complexity,onChange:B=>ee({...H,complexity:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"simple",children:""}),e.jsx("option",{value:"medium",children:""}),e.jsx("option",{value:"complex",children:""}),e.jsx("option",{value:"premium",children:""})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:H.technologies,onChange:B=>ee({...H,technologies:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Python, PostgreSQL, Redis, Docker"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:", "}),e.jsx("input",{type:"number",value:H.cost||"",onChange:B=>ee({...H,cost:B.target.value?Number(B.target.value):void 0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"50000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:", "}),e.jsx("input",{type:"number",value:H.development_time||"",onChange:B=>ee({...H,development_time:B.target.value?Number(B.target.value):void 0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"14"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"date",value:H.completed_at,onChange:B=>ee({...H,completed_at:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"-"}),e.jsx("input",{type:"url",value:H.demo_link,onChange:B=>ee({...H,demo_link:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"https://demo.example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"url",value:H.repository_link,onChange:B=>ee({...H,repository_link:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"https://github.com/username/repo"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:H.client_name,onChange:B=>ee({...H,client_name:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:" "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsxs("select",{value:H.project_status,onChange:B=>ee({...H,project_status:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"completed",children:""}),e.jsx("option",{value:"in_progress",children:" "}),e.jsx("option",{value:"demo",children:"-"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  "}),e.jsx("input",{type:"text",value:H.tags,onChange:B=>ee({...H,tags:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:", , "})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-purple-500 transition-all",children:te?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:te,alt:"Preview",className:"w-full h-40 object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:Q,className:"absolute top-2 right-2 p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all",children:e.jsx(De,{className:"w-4 h-4"})})]}):e.jsxs("label",{className:"cursor-pointer block",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:q,className:"hidden"}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(jn,{className:"w-8 h-8 text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-600",children:" "}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG  10MB"})]})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:" "}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:H.is_featured,onChange:B=>ee({...H,is_featured:B.target.checked}),className:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:" "})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:H.is_visible,onChange:B=>ee({...H,is_visible:B.target.checked}),className:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"  "})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:H.show_cost,onChange:B=>ee({...H,show_cost:B.target.checked}),className:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:" "})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"number",value:H.sort_order,onChange:B=>ee({...H,sort_order:Number(B.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"0"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"  =   "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  (1-10)"}),e.jsx("input",{type:"number",min:"1",max:"10",value:H.complexity_level,onChange:B=>ee({...H,complexity_level:Number(B.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]})]})})}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 rounded-b-2xl flex items-center justify-end gap-3 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:F,className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all font-semibold",children:""}),e.jsx("button",{onClick:le,disabled:V,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:V?e.jsxs(e.Fragment,{children:[e.jsx(Pt,{className:"w-5 h-5 animate-spin"}),"..."]}):e.jsx(e.Fragment,{children:""})})]})]})}),e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:ie.map(B=>e.jsx("div",{className:`px-6 py-3 rounded-lg shadow-lg text-white ${B.type==="success"?"bg-green-500":B.type==="error"?"bg-red-500":"bg-blue-500"} animate-slide-in`,children:B.message},B.id))})]})},ml={getCategories:async s=>{const t=s?{type:s}:{};return(await fe.get("/admin/api/finance/categories",{params:t})).data},createCategory:async s=>(await fe.post("/admin/api/finance/categories",s)).data,updateCategory:async(s,t)=>(await fe.put(`/admin/api/finance/categories/${s}`,t)).data,deleteCategory:async s=>(await fe.delete(`/admin/api/finance/categories/${s}`)).data,getTransactions:async s=>(await fe.get("/admin/api/finance/transactions",{params:s})).data,createTransaction:async s=>(await fe.post("/admin/api/finance/transactions",s)).data,updateTransaction:async(s,t)=>(await fe.put(`/admin/api/finance/transactions/${s}`,t)).data,deleteTransaction:async s=>(await fe.delete(`/admin/api/finance/transactions/${s}`)).data,getSummary:async(s,t)=>{const r={};return s&&(r.date_from=s),t&&(r.date_to=t),(await fe.get("/admin/api/finance/analytics/summary",{params:r})).data},getMonthlyAnalytics:async s=>{const t=s?{year:s}:{};return(await fe.get("/admin/api/finance/analytics/monthly",{params:t})).data},getBudgets:async()=>(await fe.get("/admin/api/finance/budgets")).data,createBudget:async s=>(await fe.post("/admin/api/finance/budgets",s)).data,updateBudget:async(s,t)=>(await fe.put(`/admin/api/finance/budgets/${s}`,t)).data,deleteBudget:async s=>(await fe.delete(`/admin/api/finance/budgets/${s}`)).data},pG=()=>{const[s,t]=j.useState(!0),[r,a]=j.useState([]),[n,i]=j.useState([]),[o,c]=j.useState(null),[u,h]=j.useState("all"),[m,f]=j.useState(""),[p,v]=j.useState(""),[g,y]=j.useState(null),[w,N]=j.useState(!1),[k,S]=j.useState(!1),[_,T]=j.useState(null),[E,z]=j.useState("income"),[O,C]=j.useState([]),A=j.useCallback((te,J="info")=>{const K=Date.now().toString();C($=>[...$,{id:K,message:te,type:J}]),setTimeout(()=>{C($=>$.filter(ie=>ie.id!==K))},4e3)},[]),X=j.useCallback(async()=>{try{t(!0);const te={limit:50,offset:0};u!=="all"&&(te.type=u),m&&(te.date_from=m),p&&(te.date_to=p),g&&(te.category_id=g);const[J,K,$]=await Promise.all([ml.getTransactions(te),ml.getCategories(),ml.getSummary(m,p)]);J.success&&a(J.data),K.success&&i(K.data),$.success&&c($.data)}catch(te){console.error("Error loading finance data:",te),A("  ","error")}finally{t(!1)}},[u,m,p,g,A]);j.useEffect(()=>{X()},[X]);const I=async te=>{try{const J=await ml.createTransaction(te);J.success&&(A(J.message,"success"),N(!1),T(null),X())}catch(J){console.error("Error creating transaction:",J),A(J.response?.data?.detail||"  ","error")}},V=async(te,J)=>{try{const K=await ml.updateTransaction(te,J);K.success&&(A(K.message,"success"),N(!1),T(null),X())}catch(K){console.error("Error updating transaction:",K),A(K.response?.data?.detail||"  ","error")}},R=async te=>{if(confirm(" ,     ?"))try{const J=await ml.deleteTransaction(te);J.success&&(A(J.message,"success"),X())}catch(J){console.error("Error deleting transaction:",J),A(J.response?.data?.detail||"  ","error")}},H=async te=>{try{const J=await ml.createCategory(te);J.success&&(A(J.message,"success"),S(!1),X())}catch(J){console.error("Error creating category:",J),A(J.response?.data?.detail||"  ","error")}},ee=async te=>{if(confirm(" ,     ?"))try{const J=await ml.deleteCategory(te);J.success&&(A(J.message,"success"),X())}catch(J){console.error("Error deleting category:",J),A(J.response?.data?.detail||"  ","error")}},se=te=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",maximumFractionDigits:0}).format(te),W=te=>new Date(te).toLocaleDateString("ru-RU",{year:"numeric",month:"short",day:"numeric"});return s&&!o?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx(Pt,{className:"w-8 h-8 animate-spin text-emerald-600"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"max-w-[2000px] mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-emerald-600 to-teal-600 bg-clip-text text-transparent",children:""}),e.jsx("p",{className:"text-gray-600 mt-1",children:"   "})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>S(!0),className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-200",children:[e.jsx(vp,{className:"w-5 h-5"}),""]}),e.jsx("button",{onClick:X,className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-200",children:e.jsx(ls,{className:"w-5 h-5"})}),e.jsxs("button",{onClick:()=>{z("income"),T(null),N(!0)},className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-lg hover:from-emerald-700 hover:to-teal-700 transition-all shadow-lg",children:[e.jsx(We,{className:"w-5 h-5"})," "]})]})]}),o&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl shadow-lg p-6 border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center shadow-lg",children:e.jsx(xt,{className:"w-6 h-6 text-white"})}),e.jsxs("span",{className:"text-sm text-green-600 font-medium",children:[o.income.count," "]})]}),e.jsx("div",{className:"text-3xl font-bold text-green-700 mb-1",children:se(o.income.total)}),e.jsx("div",{className:"text-sm text-gray-600 uppercase tracking-wide",children:""})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 rounded-xl shadow-lg p-6 border border-red-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-red-500 to-rose-500 flex items-center justify-center shadow-lg",children:e.jsx(Da,{className:"w-6 h-6 text-white"})}),e.jsxs("span",{className:"text-sm text-red-600 font-medium",children:[o.expenses.count," "]})]}),e.jsx("div",{className:"text-3xl font-bold text-red-700 mb-1",children:se(o.expenses.total)}),e.jsx("div",{className:"text-sm text-gray-600 uppercase tracking-wide",children:""})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 rounded-xl shadow-lg p-6 border border-purple-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-violet-500 flex items-center justify-center shadow-lg",children:e.jsx(Qe,{className:"w-6 h-6 text-white"})})}),e.jsx("div",{className:`text-3xl font-bold mb-1 ${o.profit>=0?"text-purple-700":"text-red-700"}`,children:se(o.profit)}),e.jsx("div",{className:"text-sm text-gray-600 uppercase tracking-wide",children:""})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl shadow-lg p-6 border border-blue-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center shadow-lg",children:e.jsx(pN,{className:"w-6 h-6 text-white"})})}),e.jsx("div",{className:"text-3xl font-bold text-blue-700 mb-1",children:se(o.income.total-o.expenses.total)}),e.jsx("div",{className:"text-sm text-gray-600 uppercase tracking-wide",children:""})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(wr,{className:"w-5 h-5 text-gray-500"}),e.jsx("span",{className:"font-semibold text-gray-700",children:":"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>h("all"),className:`px-4 py-2 rounded-lg transition-all ${u==="all"?"bg-emerald-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:""}),e.jsx("button",{onClick:()=>h("income"),className:`px-4 py-2 rounded-lg transition-all ${u==="income"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:""}),e.jsx("button",{onClick:()=>h("expense"),className:`px-4 py-2 rounded-lg transition-all ${u==="expense"?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(wt,{className:"w-5 h-5 text-gray-500"}),e.jsx("input",{type:"date",value:m,onChange:te=>f(te.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none"}),e.jsx("span",{className:"text-gray-500",children:""}),e.jsx("input",{type:"date",value:p,onChange:te=>v(te.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none"})]}),(m||p||u!=="all")&&e.jsx("button",{onClick:()=>{h("all"),f(""),v(""),y(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all",children:""})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:" "}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all",children:[e.jsx(Tt,{className:"w-4 h-4"}),""]})]}),e.jsx("div",{className:"space-y-3",children:r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Qe,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"  "}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"  "})]}):r.map(te=>e.jsxs("div",{className:"flex items-center gap-4 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-all",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${te.type==="income"?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:te.type==="income"?e.jsx(xP,{className:"w-6 h-6"}):e.jsx(dP,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:te.description}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-3 mt-1",children:[e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium",style:{backgroundColor:te.category.color+"20",color:te.category.color},children:te.category.name}),e.jsx("span",{children:W(te.date)}),te.project&&e.jsxs("span",{className:"text-blue-600",children:[" ",te.project.title]})]})]}),e.jsxs("div",{className:`text-xl font-bold ${te.type==="income"?"text-green-600":"text-red-600"}`,children:[te.type==="income"?"+":"-",se(te.amount)]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{T(te),z(te.type),N(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-all",title:"",children:e.jsx(sr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>R(te.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"",children:e.jsx(tt,{className:"w-4 h-4"})})]})]},te.id))})]}),o&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.top_income_categories.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"  "}),e.jsx("div",{className:"space-y-3",children:o.top_income_categories.map((te,J)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-100 text-green-600 flex items-center justify-center font-bold text-sm",children:J+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-800",children:te.name}),e.jsx("div",{className:"text-sm text-green-600 font-semibold",children:se(te.total)})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[(te.total/o.income.total*100).toFixed(1),"%"]})]},J))})]}),o.top_expense_categories.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"  "}),e.jsx("div",{className:"space-y-3",children:o.top_expense_categories.map((te,J)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-red-100 text-red-600 flex items-center justify-center font-bold text-sm",children:J+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-800",children:te.name}),e.jsx("div",{className:"text-sm text-red-600 font-semibold",children:se(te.total)})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[(te.total/o.expenses.total*100).toFixed(1),"%"]})]},J))})]})]})]}),w&&e.jsx(gG,{isOpen:w,onClose:()=>{N(!1),T(null)},onSave:_?V:I,transaction:_,categories:n,type:E,onTypeChange:z}),k&&e.jsx(bG,{isOpen:k,onClose:()=>{S(!1)},onCreate:H,onDelete:ee,categories:n}),e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:O.map(te=>e.jsx("div",{className:`px-6 py-3 rounded-lg shadow-lg text-white ${te.type==="success"?"bg-green-500":te.type==="error"?"bg-red-500":te.type==="warning"?"bg-yellow-500":"bg-blue-500"} animate-slide-in`,children:te.message},te.id))})]})},gG=({isOpen:s,onClose:t,onSave:r,transaction:a,categories:n,type:i,onTypeChange:o})=>{const[c,u]=j.useState({amount:a?.amount||0,type:a?.type||i,description:a?.description||"",date:a?.date?a.date.split("T")[0]:new Date().toISOString().split("T")[0],category_id:a?.category.id||0,project_id:a?.project?.id,contractor_name:a?.contractor_name||"",account:a?.account||"card",receipt_url:a?.receipt_url||"",notes:a?.notes||"",is_recurring:a?.is_recurring||!1,recurring_period:a?.recurring_period||""}),h=n.filter(f=>f.type===c.type),m=f=>{f.preventDefault(),a?r(a.id,c):r(c)};return s?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:a?" ":" "}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-all",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:m,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{u({...c,type:"income",category_id:0}),o("income")},className:`flex-1 py-3 rounded-lg font-semibold transition-all ${c.type==="income"?"bg-green-600 text-white":"bg-gray-100 text-gray-700"}`,children:""}),e.jsx("button",{type:"button",onClick:()=>{u({...c,type:"expense",category_id:0}),o("expense")},className:`flex-1 py-3 rounded-lg font-semibold transition-all ${c.type==="expense"?"bg-red-600 text-white":"bg-gray-100 text-gray-700"}`,children:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"number",step:"0.01",value:c.amount,onChange:f=>u({...c,amount:parseFloat(f.target.value)}),className:"w-full px-4 py-3 text-2xl font-bold border-2 border-gray-200 rounded-lg focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none transition-all text-center",placeholder:"0.00",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" *"}),e.jsxs("select",{value:c.category_id,onChange:f=>u({...c,category_id:parseInt(f.target.value)}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none transition-all",required:!0,children:[e.jsx("option",{value:0,children:" "}),h.map(f=>e.jsx("option",{value:f.id,children:f.name},f.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:c.description,onChange:f=>u({...c,description:f.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none transition-all",placeholder:" ",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"date",value:c.date,onChange:f=>u({...c,date:f.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:c.account,onChange:f=>u({...c,account:f.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none transition-all",children:[e.jsx("option",{value:"card",children:""}),e.jsx("option",{value:"cash",children:""}),e.jsx("option",{value:"bank",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:c.contractor_name||"",onChange:f=>u({...c,contractor_name:f.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none transition-all",placeholder:" /"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:c.notes||"",onChange:f=>u({...c,notes:f.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none transition-all",rows:3,placeholder:" "})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:t,className:"flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all font-semibold",children:""}),e.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-lg hover:from-emerald-700 hover:to-teal-700 transition-all font-semibold shadow-lg",children:a?"":""})]})]})]})}):null},bG=({isOpen:s,onClose:t,onCreate:r,onDelete:a,categories:n})=>{const[i,o]=j.useState(!1),[c,u]=j.useState({name:"",type:"income",description:"",color:"#10b981",icon:"fas fa-circle"}),h=()=>{u({name:"",type:"income",description:"",color:"#10b981",icon:"fas fa-circle"})},m=v=>{v.preventDefault(),r(c),o(!1),h()};if(!s)return null;const f=n.filter(v=>v.type==="income"),p=n.filter(v=>v.type==="expense");return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:" "}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-all",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[!i&&e.jsxs("button",{onClick:()=>o(!0),className:"w-full py-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-lg hover:from-emerald-700 hover:to-teal-700 transition-all font-semibold shadow-lg flex items-center justify-center gap-2",children:[e.jsx(We,{className:"w-5 h-5"})," "]}),i&&e.jsxs("form",{onSubmit:m,className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>u({...c,type:"income"}),className:`flex-1 py-2 rounded-lg font-semibold transition-all ${c.type==="income"?"bg-green-600 text-white":"bg-gray-200 text-gray-700"}`,children:""}),e.jsx("button",{type:"button",onClick:()=>u({...c,type:"expense"}),className:`flex-1 py-2 rounded-lg font-semibold transition-all ${c.type==="expense"?"bg-red-600 text-white":"bg-gray-200 text-gray-700"}`,children:""})]}),e.jsx("input",{type:"text",value:c.name,onChange:v=>u({...c,name:v.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-emerald-500 outline-none",placeholder:" ",required:!0}),e.jsx("input",{type:"text",value:c.description||"",onChange:v=>u({...c,description:v.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-emerald-500 outline-none",placeholder:" ()"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all font-semibold",children:""}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-all font-semibold",children:""})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-green-700 mb-3",children:" "}),e.jsxs("div",{className:"space-y-2",children:[f.map(v=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:v.color+"40",color:v.color},children:e.jsx(Qe,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-800",children:v.name}),v.description&&e.jsx("div",{className:"text-sm text-gray-500",children:v.description})]})]}),e.jsx("button",{onClick:()=>a(v.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-all",children:e.jsx(tt,{className:"w-4 h-4"})})]},v.id)),f.length===0&&e.jsx("p",{className:"text-gray-400 text-center py-4",children:"  "})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-red-700 mb-3",children:" "}),e.jsxs("div",{className:"space-y-2",children:[p.map(v=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:v.color+"40",color:v.color},children:e.jsx(Qe,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-800",children:v.name}),v.description&&e.jsx("div",{className:"text-sm text-gray-500",children:v.description})]})]}),e.jsx("button",{onClick:()=>a(v.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-all",children:e.jsx(tt,{className:"w-4 h-4"})})]},v.id)),p.length===0&&e.jsx("p",{className:"text-gray-400 text-center py-4",children:"  "})]})]})]})]})})},Uc={getServices:async s=>{const t=new URLSearchParams;return s?.service_type&&t.append("service_type",s.service_type),s?.status&&t.append("status",s.status),(await fe.get(`/admin/api/services?${t}`)).data},getService:async s=>(await fe.get(`/admin/api/services/${s}`)).data,createService:async s=>(await fe.post("/admin/api/services",s)).data,updateService:async(s,t)=>(await fe.put(`/admin/api/services/${s}`,t)).data,deleteService:async s=>(await fe.delete(`/admin/api/services/${s}`)).data,createExpense:async(s,t)=>(await fe.post(`/admin/api/services/${s}/expense`,t)).data,getStats:async(s="month")=>(await fe.get(`/admin/api/services/stats?period=${s}`)).data,getUpcomingBilling:async(s=30)=>(await fe.get(`/admin/api/services/billing/upcoming?days_ahead=${s}`)).data,resetUsage:async s=>(await fe.post(`/admin/api/services/${s}/reset-usage`)).data},yG=()=>{const[s,t]=j.useState([]),[r,a]=j.useState(!0),[n,i]=j.useState(null),[o,c]=j.useState(""),[u,h]=j.useState(""),[m,f]=j.useState(""),[p,v]=j.useState(!1),[g,y]=j.useState(!1),[w,N]=j.useState(!1),[k,S]=j.useState(null),[_,T]=j.useState({name:"",provider_type:"ai",description:"",website:"",pricing_model:"monthly",contact_info:"{}"}),[E,z]=j.useState({name:"",provider_type:"ai",description:"",website:"",pricing_model:"monthly",status:"active",contact_info:"{}"}),[O,C]=j.useState({amount:"",expense_type:"subscription",description:"",expense_date:new Date().toISOString().split("T")[0],project_id:"",is_recurring:!1,recurring_period:"monthly"}),[A,X]=j.useState([]),[I,V]=j.useState(null),R=j.useCallback((U,F="info")=>{V({message:U,type:F}),setTimeout(()=>V(null),3e3)},[]),H=j.useCallback(async()=>{try{a(!0);const U=await Uc.getServices({service_type:u||void 0,status:m||void 0});U.success&&t(U.services)}catch{R("  ","error")}finally{a(!1)}},[u,m,R]),ee=j.useCallback(async()=>{try{const U=await Uc.getStats("month");U.success&&i(U.statistics)}catch(U){console.error("Failed to load stats:",U)}},[]),se=j.useCallback(async()=>{try{const U=await vs.getProjects();U.success&&X(U.projects)}catch(U){console.error("Failed to load projects:",U)}},[]);j.useEffect(()=>{H(),ee(),se()},[H,ee,se]);const W=async()=>{if(!_.name||!_.provider_type){R("  ","error");return}try{let U={};try{U=JSON.parse(_.contact_info)}catch{R("  JSON   ","error");return}(await Uc.createService({..._,contact_info:U})).success&&(R("  ","success"),v(!1),T({name:"",provider_type:"ai",description:"",website:"",pricing_model:"monthly",contact_info:"{}"}),H(),ee())}catch{R("   ","error")}},te=U=>{S(U),z({name:U.name,provider_type:U.provider_type,description:U.description||"",website:U.website||"",pricing_model:U.pricing_model||"monthly",status:U.status,contact_info:JSON.stringify(U.contact_info||{},null,2)}),y(!0)},J=async()=>{if(k)try{let U={};try{U=JSON.parse(E.contact_info)}catch{R("  JSON   ","error");return}(await Uc.updateService(k.id,{...E,contact_info:U})).success&&(R("  ","success"),y(!1),H(),ee())}catch{R("   ","error")}},K=async U=>{if(confirm(" ,     ?"))try{(await Uc.deleteService(U)).success&&(R(" ","success"),H(),ee())}catch{R("   ","error")}},$=U=>{S(U),C({amount:"",expense_type:"subscription",description:"",expense_date:new Date().toISOString().split("T")[0],project_id:"",is_recurring:!1,recurring_period:"monthly"}),N(!0)},ie=async()=>{if(!k||!O.amount){R("  ","error");return}try{(await Uc.createExpense(k.id,{amount:parseFloat(O.amount),expense_type:O.expense_type,description:O.description,expense_date:O.expense_date,project_id:O.project_id?parseInt(O.project_id):void 0,is_recurring:O.is_recurring,recurring_period:O.is_recurring?O.recurring_period:void 0})).success&&(R(" ","success"),N(!1),H(),ee())}catch{R("   ","error")}},ne=U=>({ai:"-",hosting:"",payment:"",analytics:"",storage:"",email:"Email",sms:"SMS",cdn:"CDN",monitoring:"",other:""})[U]||U,oe=U=>({monthly:"",yearly:"",usage:" ",per_request:" ",one_time:"",custom:""})[U]||U,ce=j.useMemo(()=>s.filter(U=>!o||U.name.toLowerCase().includes(o.toLowerCase())||U.description?.toLowerCase().includes(o.toLowerCase())),[s,o]);return e.jsxs("div",{className:"p-8 max-w-[1920px] mx-auto",children:[I&&e.jsx("div",{className:`fixed top-4 right-4 z-50 px-6 py-3 rounded-lg shadow-lg ${I.type==="success"?"bg-green-500":I.type==="error"?"bg-red-500":"bg-blue-500"} text-white`,children:I.message}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-teal-500 to-cyan-600 flex items-center justify-center",children:e.jsx(fE,{className:"w-6 h-6 text-white"})})," "]}),e.jsx("p",{className:"text-gray-500 mt-1",children:"      "})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:H,className:"px-4 py-2 border border-gray-200 rounded-xl hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(ls,{className:"w-4 h-4"}),""]}),e.jsxs("button",{onClick:()=>v(!0),className:"px-6 py-3 bg-gradient-to-r from-teal-500 to-cyan-600 text-white rounded-xl hover:shadow-lg transition-all flex items-center gap-2",children:[e.jsx(We,{className:"w-5 h-5"})," "]})]})]}),n&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-teal-100 flex items-center justify-center",children:e.jsx(bn,{className:"w-6 h-6 text-teal-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n.total_services}),e.jsx("div",{className:"text-sm text-gray-500",children:" "})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-green-100 flex items-center justify-center",children:e.jsx(Hr,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n.active_services}),e.jsx("div",{className:"text-sm text-gray-500",children:""})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-orange-100 flex items-center justify-center",children:e.jsx(Qe,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[Math.round(n.month_cost_so_far),""]}),e.jsx("div",{className:"text-sm text-gray-500",children:"  "})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-100 flex items-center justify-center",children:e.jsx(xt,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[Math.round(n.projected_month_cost),""]}),e.jsx("div",{className:"text-sm text-gray-500",children:"  "})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(wr,{className:"w-5 h-5 text-gray-400"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:""})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("input",{type:"text",placeholder:" ...",value:o,onChange:U=>c(U.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"}),e.jsxs("select",{value:u,onChange:U=>h(U.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"ai",children:"-"}),e.jsx("option",{value:"hosting",children:""}),e.jsx("option",{value:"payment",children:""}),e.jsx("option",{value:"analytics",children:""}),e.jsx("option",{value:"storage",children:""}),e.jsx("option",{value:"other",children:""})]}),e.jsxs("select",{value:m,onChange:U=>f(U.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"active",children:""}),e.jsx("option",{value:"inactive",children:""})]}),e.jsx("button",{onClick:()=>{c(""),h(""),f("")},className:"px-4 py-2 border border-gray-200 rounded-lg hover:bg-gray-50",children:""})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:" "}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:" "}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:r?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:e.jsx(Pt,{className:"w-8 h-8 animate-spin mx-auto text-teal-500"})})}):ce.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:"  "})}):ce.map(U=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:U.name}),e.jsx("div",{className:"text-xs text-gray-500 line-clamp-1",children:U.description||" "})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-teal-100 text-teal-700",children:ne(U.provider_type)})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:oe(U.pricing_model||"monthly")}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[U.statistics?.monthly_cost||0,""]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${U.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:U.status==="active"?"":""})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>te(U),className:"p-2 hover:bg-teal-100 rounded-lg transition-colors",title:"",children:e.jsx(An,{className:"w-4 h-4 text-teal-600"})}),e.jsx("button",{onClick:()=>$(U),className:"p-2 hover:bg-green-100 rounded-lg transition-colors",title:" ",children:e.jsx(We,{className:"w-4 h-4 text-green-600"})}),e.jsx("button",{onClick:()=>K(U.id),className:"p-2 hover:bg-red-100 rounded-lg transition-colors",title:"",children:e.jsx(tt,{className:"w-4 h-4 text-red-600"})})]})})]},U.id))})]})})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"  "}),e.jsx("button",{onClick:()=>v(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(De,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),e.jsx("input",{type:"text",value:_.name,onChange:U=>T({..._,name:U.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),e.jsxs("select",{value:_.provider_type,onChange:U=>T({..._,provider_type:U.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",children:[e.jsx("option",{value:"ai",children:"-"}),e.jsx("option",{value:"hosting",children:""}),e.jsx("option",{value:"payment",children:" "}),e.jsx("option",{value:"analytics",children:""}),e.jsx("option",{value:"storage",children:""}),e.jsx("option",{value:"other",children:""})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:_.description,onChange:U=>T({..._,description:U.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"-"}),e.jsx("input",{type:"url",value:_.website,onChange:U=>T({..._,website:U.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),e.jsxs("select",{value:_.pricing_model,onChange:U=>T({..._,pricing_model:U.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",children:[e.jsx("option",{value:"monthly",children:" "}),e.jsx("option",{value:"yearly",children:" "}),e.jsx("option",{value:"usage",children:" "}),e.jsx("option",{value:"per_request",children:" "}),e.jsx("option",{value:"one_time",children:" "}),e.jsx("option",{value:"custom",children:""})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  (JSON)"}),e.jsx("textarea",{value:_.contact_info,onChange:U=>T({..._,contact_info:U.target.value}),rows:3,placeholder:'{"email": "support@service.com", "phone": "+1234567890"}',className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent font-mono text-sm"})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-100 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>v(!1),className:"px-6 py-2 border border-gray-200 rounded-lg hover:bg-gray-50",children:""}),e.jsx("button",{onClick:W,className:"px-6 py-2 bg-gradient-to-r from-teal-500 to-cyan-600 text-white rounded-lg hover:shadow-lg",children:""})]})]})}),g&&k&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:" "}),e.jsx("button",{onClick:()=>y(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(De,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:E.name,onChange:U=>z({...E,name:U.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("select",{value:E.status,onChange:U=>z({...E,status:U.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500",children:[e.jsx("option",{value:"active",children:""}),e.jsx("option",{value:"inactive",children:""})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:E.description,onChange:U=>z({...E,description:U.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500"})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-100 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>y(!1),className:"px-6 py-2 border border-gray-200 rounded-lg hover:bg-gray-50",children:""}),e.jsx("button",{onClick:J,className:"px-6 py-2 bg-gradient-to-r from-teal-500 to-cyan-600 text-white rounded-lg hover:shadow-lg",children:""})]})]})}),w&&k&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-lg w-full",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:" "}),e.jsx("button",{onClick:()=>N(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[": ",k.name]})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"number",step:"0.01",value:O.amount,onChange:U=>C({...O,amount:U.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),e.jsxs("select",{value:O.expense_type,onChange:U=>C({...O,expense_type:U.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500",children:[e.jsx("option",{value:"subscription",children:""}),e.jsx("option",{value:"usage",children:""}),e.jsx("option",{value:"one_time",children:" "})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:O.description,onChange:U=>C({...O,description:U.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"date",value:O.expense_date,onChange:U=>C({...O,expense_date:U.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:O.is_recurring,onChange:U=>C({...O,is_recurring:U.target.checked}),className:"w-4 h-4 text-teal-600 rounded focus:ring-2 focus:ring-teal-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:" "})]})})]}),e.jsxs("div",{className:"p-6 border-t border-gray-100 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>N(!1),className:"px-6 py-2 border border-gray-200 rounded-lg hover:bg-gray-50",children:""}),e.jsx("button",{onClick:ie,className:"px-6 py-2 bg-gradient-to-r from-teal-500 to-cyan-600 text-white rounded-lg hover:shadow-lg",children:""})]})]})})]})},Bk={getDashboard:async(s=30)=>(await fe.get("/admin/api/analytics/dashboard",{params:{days:s}})).data,getUserAnalytics:async(s=30)=>(await fe.get("/admin/api/analytics/users",{params:{days:s}})).data,getProjectAnalytics:async(s=30)=>(await fe.get("/admin/api/analytics/projects",{params:{days:s}})).data,getFinanceAnalytics:async(s=30)=>(await fe.get("/admin/api/analytics/finance",{params:{days:s}})).data,exportAnalytics:async(s="json",t=30)=>(await fe.get("/admin/api/analytics/export",{params:{format:s,days:t}})).data};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function zm(s){return s+.5|0}const yl=(s,t,r)=>Math.max(Math.min(s,r),t);function Mh(s){return yl(zm(s*2.55),0,255)}function Sl(s){return yl(zm(s*255),0,255)}function hi(s){return yl(zm(s/2.55)/100,0,1)}function Fk(s){return yl(zm(s*100),0,100)}const ba={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Bw=[..."0123456789ABCDEF"],vG=s=>Bw[s&15],jG=s=>Bw[(s&240)>>4]+Bw[s&15],X0=s=>(s&240)>>4===(s&15),wG=s=>X0(s.r)&&X0(s.g)&&X0(s.b)&&X0(s.a);function NG(s){var t=s.length,r;return s[0]==="#"&&(t===4||t===5?r={r:255&ba[s[1]]*17,g:255&ba[s[2]]*17,b:255&ba[s[3]]*17,a:t===5?ba[s[4]]*17:255}:(t===7||t===9)&&(r={r:ba[s[1]]<<4|ba[s[2]],g:ba[s[3]]<<4|ba[s[4]],b:ba[s[5]]<<4|ba[s[6]],a:t===9?ba[s[7]]<<4|ba[s[8]]:255})),r}const _G=(s,t)=>s<255?t(s):"";function kG(s){var t=wG(s)?vG:jG;return s?"#"+t(s.r)+t(s.g)+t(s.b)+_G(s.a,t):void 0}const SG=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function tD(s,t,r){const a=t*Math.min(r,1-r),n=(i,o=(i+s/30)%12)=>r-a*Math.max(Math.min(o-3,9-o,1),-1);return[n(0),n(8),n(4)]}function CG(s,t,r){const a=(n,i=(n+s/60)%6)=>r-r*t*Math.max(Math.min(i,4-i,1),0);return[a(5),a(3),a(1)]}function TG(s,t,r){const a=tD(s,1,.5);let n;for(t+r>1&&(n=1/(t+r),t*=n,r*=n),n=0;n<3;n++)a[n]*=1-t-r,a[n]+=t;return a}function EG(s,t,r,a,n){return s===n?(t-r)/a+(t<r?6:0):t===n?(r-s)/a+2:(s-t)/a+4}function p1(s){const r=s.r/255,a=s.g/255,n=s.b/255,i=Math.max(r,a,n),o=Math.min(r,a,n),c=(i+o)/2;let u,h,m;return i!==o&&(m=i-o,h=c>.5?m/(2-i-o):m/(i+o),u=EG(r,a,n,m,i),u=u*60+.5),[u|0,h||0,c]}function g1(s,t,r,a){return(Array.isArray(t)?s(t[0],t[1],t[2]):s(t,r,a)).map(Sl)}function b1(s,t,r){return g1(tD,s,t,r)}function AG(s,t,r){return g1(TG,s,t,r)}function DG(s,t,r){return g1(CG,s,t,r)}function sD(s){return(s%360+360)%360}function RG(s){const t=SG.exec(s);let r=255,a;if(!t)return;t[5]!==a&&(r=t[6]?Mh(+t[5]):Sl(+t[5]));const n=sD(+t[2]),i=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?a=AG(n,i,o):t[1]==="hsv"?a=DG(n,i,o):a=b1(n,i,o),{r:a[0],g:a[1],b:a[2],a:r}}function MG(s,t){var r=p1(s);r[0]=sD(r[0]+t),r=b1(r),s.r=r[0],s.g=r[1],s.b=r[2]}function OG(s){if(!s)return;const t=p1(s),r=t[0],a=Fk(t[1]),n=Fk(t[2]);return s.a<255?`hsla(${r}, ${a}%, ${n}%, ${hi(s.a)})`:`hsl(${r}, ${a}%, ${n}%)`}const zk={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ik={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function LG(){const s={},t=Object.keys(Ik),r=Object.keys(zk);let a,n,i,o,c;for(a=0;a<t.length;a++){for(o=c=t[a],n=0;n<r.length;n++)i=r[n],c=c.replace(i,zk[i]);i=parseInt(Ik[o],16),s[c]=[i>>16&255,i>>8&255,i&255]}return s}let Z0;function PG(s){Z0||(Z0=LG(),Z0.transparent=[0,0,0,0]);const t=Z0[s.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const BG=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function FG(s){const t=BG.exec(s);let r=255,a,n,i;if(t){if(t[7]!==a){const o=+t[7];r=t[8]?Mh(o):yl(o*255,0,255)}return a=+t[1],n=+t[3],i=+t[5],a=255&(t[2]?Mh(a):yl(a,0,255)),n=255&(t[4]?Mh(n):yl(n,0,255)),i=255&(t[6]?Mh(i):yl(i,0,255)),{r:a,g:n,b:i,a:r}}}function zG(s){return s&&(s.a<255?`rgba(${s.r}, ${s.g}, ${s.b}, ${hi(s.a)})`:`rgb(${s.r}, ${s.g}, ${s.b})`)}const zy=s=>s<=.0031308?s*12.92:Math.pow(s,1/2.4)*1.055-.055,Vc=s=>s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4);function IG(s,t,r){const a=Vc(hi(s.r)),n=Vc(hi(s.g)),i=Vc(hi(s.b));return{r:Sl(zy(a+r*(Vc(hi(t.r))-a))),g:Sl(zy(n+r*(Vc(hi(t.g))-n))),b:Sl(zy(i+r*(Vc(hi(t.b))-i))),a:s.a+r*(t.a-s.a)}}function Q0(s,t,r){if(s){let a=p1(s);a[t]=Math.max(0,Math.min(a[t]+a[t]*r,t===0?360:1)),a=b1(a),s.r=a[0],s.g=a[1],s.b=a[2]}}function rD(s,t){return s&&Object.assign(t||{},s)}function $k(s){var t={r:0,g:0,b:0,a:255};return Array.isArray(s)?s.length>=3&&(t={r:s[0],g:s[1],b:s[2],a:255},s.length>3&&(t.a=Sl(s[3]))):(t=rD(s,{r:0,g:0,b:0,a:1}),t.a=Sl(t.a)),t}function $G(s){return s.charAt(0)==="r"?FG(s):RG(s)}let aD=class Fw{constructor(t){if(t instanceof Fw)return t;const r=typeof t;let a;r==="object"?a=$k(t):r==="string"&&(a=NG(t)||PG(t)||$G(t)),this._rgb=a,this._valid=!!a}get valid(){return this._valid}get rgb(){var t=rD(this._rgb);return t&&(t.a=hi(t.a)),t}set rgb(t){this._rgb=$k(t)}rgbString(){return this._valid?zG(this._rgb):void 0}hexString(){return this._valid?kG(this._rgb):void 0}hslString(){return this._valid?OG(this._rgb):void 0}mix(t,r){if(t){const a=this.rgb,n=t.rgb;let i;const o=r===i?.5:r,c=2*o-1,u=a.a-n.a,h=((c*u===-1?c:(c+u)/(1+c*u))+1)/2;i=1-h,a.r=255&h*a.r+i*n.r+.5,a.g=255&h*a.g+i*n.g+.5,a.b=255&h*a.b+i*n.b+.5,a.a=o*a.a+(1-o)*n.a,this.rgb=a}return this}interpolate(t,r){return t&&(this._rgb=IG(this._rgb,t._rgb,r)),this}clone(){return new Fw(this.rgb)}alpha(t){return this._rgb.a=Sl(t),this}clearer(t){const r=this._rgb;return r.a*=1-t,this}greyscale(){const t=this._rgb,r=zm(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=r,this}opaquer(t){const r=this._rgb;return r.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Q0(this._rgb,2,t),this}darken(t){return Q0(this._rgb,2,-t),this}saturate(t){return Q0(this._rgb,1,t),this}desaturate(t){return Q0(this._rgb,1,-t),this}rotate(t){return MG(this._rgb,t),this}};/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ni(){}const UG=(()=>{let s=0;return()=>s++})();function Dt(s){return s==null}function Ls(s){if(Array.isArray&&Array.isArray(s))return!0;const t=Object.prototype.toString.call(s);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function jt(s){return s!==null&&Object.prototype.toString.call(s)==="[object Object]"}function fr(s){return(typeof s=="number"||s instanceof Number)&&isFinite(+s)}function dn(s,t){return fr(s)?s:t}function ht(s,t){return typeof s>"u"?t:s}const VG=(s,t)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100:+s/t,nD=(s,t)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100*t:+s;function Xt(s,t,r){if(s&&typeof s.call=="function")return s.apply(r,t)}function Ot(s,t,r,a){let n,i,o;if(Ls(s))for(i=s.length,n=0;n<i;n++)t.call(r,s[n],n);else if(jt(s))for(o=Object.keys(s),i=o.length,n=0;n<i;n++)t.call(r,s[o[n]],o[n])}function np(s,t){let r,a,n,i;if(!s||!t||s.length!==t.length)return!1;for(r=0,a=s.length;r<a;++r)if(n=s[r],i=t[r],n.datasetIndex!==i.datasetIndex||n.index!==i.index)return!1;return!0}function ip(s){if(Ls(s))return s.map(ip);if(jt(s)){const t=Object.create(null),r=Object.keys(s),a=r.length;let n=0;for(;n<a;++n)t[r[n]]=ip(s[r[n]]);return t}return s}function iD(s){return["__proto__","prototype","constructor"].indexOf(s)===-1}function HG(s,t,r,a){if(!iD(s))return;const n=t[s],i=r[s];jt(n)&&jt(i)?bm(n,i,a):t[s]=ip(i)}function bm(s,t,r){const a=Ls(t)?t:[t],n=a.length;if(!jt(s))return s;r=r||{};const i=r.merger||HG;let o;for(let c=0;c<n;++c){if(o=a[c],!jt(o))continue;const u=Object.keys(o);for(let h=0,m=u.length;h<m;++h)i(u[h],s,o,r)}return s}function Kh(s,t){return bm(s,t,{merger:qG})}function qG(s,t,r){if(!iD(s))return;const a=t[s],n=r[s];jt(a)&&jt(n)?Kh(a,n):Object.prototype.hasOwnProperty.call(t,s)||(t[s]=ip(n))}const Uk={"":s=>s,x:s=>s.x,y:s=>s.y};function WG(s){const t=s.split("."),r=[];let a="";for(const n of t)a+=n,a.endsWith("\\")?a=a.slice(0,-1)+".":(r.push(a),a="");return r}function YG(s){const t=WG(s);return r=>{for(const a of t){if(a==="")break;r=r&&r[a]}return r}}function Yo(s,t){return(Uk[t]||(Uk[t]=YG(t)))(s)}function y1(s){return s.charAt(0).toUpperCase()+s.slice(1)}const ym=s=>typeof s<"u",Ml=s=>typeof s=="function",Vk=(s,t)=>{if(s.size!==t.size)return!1;for(const r of s)if(!t.has(r))return!1;return!0};function GG(s){return s.type==="mouseup"||s.type==="click"||s.type==="contextmenu"}const Lt=Math.PI,ns=2*Lt,KG=ns+Lt,lp=Number.POSITIVE_INFINITY,XG=Lt/180,$s=Lt/2,po=Lt/4,Hk=Lt*2/3,lD=Math.log10,_n=Math.sign;function Xh(s,t,r){return Math.abs(s-t)<r}function qk(s){const t=Math.round(s);s=Xh(s,t,s/1e3)?t:s;const r=Math.pow(10,Math.floor(lD(s))),a=s/r;return(a<=1?1:a<=2?2:a<=5?5:10)*r}function ZG(s){const t=[],r=Math.sqrt(s);let a;for(a=1;a<r;a++)s%a===0&&(t.push(a),t.push(s/a));return r===(r|0)&&t.push(r),t.sort((n,i)=>n-i).pop(),t}function QG(s){return typeof s=="symbol"||typeof s=="object"&&s!==null&&!(Symbol.toPrimitive in s||"toString"in s||"valueOf"in s)}function vm(s){return!QG(s)&&!isNaN(parseFloat(s))&&isFinite(s)}function JG(s,t){const r=Math.round(s);return r-t<=s&&r+t>=s}function eK(s,t,r){let a,n,i;for(a=0,n=s.length;a<n;a++)i=s[a][r],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function xi(s){return s*(Lt/180)}function tK(s){return s*(180/Lt)}function Wk(s){if(!fr(s))return;let t=1,r=0;for(;Math.round(s*t)/t!==s;)t*=10,r++;return r}function oD(s,t){const r=t.x-s.x,a=t.y-s.y,n=Math.sqrt(r*r+a*a);let i=Math.atan2(a,r);return i<-.5*Lt&&(i+=ns),{angle:i,distance:n}}function zw(s,t){return Math.sqrt(Math.pow(t.x-s.x,2)+Math.pow(t.y-s.y,2))}function sK(s,t){return(s-t+KG)%ns-Lt}function ta(s){return(s%ns+ns)%ns}function jm(s,t,r,a){const n=ta(s),i=ta(t),o=ta(r),c=ta(i-n),u=ta(o-n),h=ta(n-i),m=ta(n-o);return n===i||n===o||a&&i===o||c>u&&h<m}function hr(s,t,r){return Math.max(t,Math.min(r,s))}function rK(s){return hr(s,-32768,32767)}function fi(s,t,r,a=1e-6){return s>=Math.min(t,r)-a&&s<=Math.max(t,r)+a}function v1(s,t,r){r=r||(o=>s[o]<t);let a=s.length-1,n=0,i;for(;a-n>1;)i=n+a>>1,r(i)?n=i:a=i;return{lo:n,hi:a}}const Ro=(s,t,r,a)=>v1(s,r,a?n=>{const i=s[n][t];return i<r||i===r&&s[n+1][t]===r}:n=>s[n][t]<r),aK=(s,t,r)=>v1(s,r,a=>s[a][t]>=r);function nK(s,t,r){let a=0,n=s.length;for(;a<n&&s[a]<t;)a++;for(;n>a&&s[n-1]>r;)n--;return a>0||n<s.length?s.slice(a,n):s}const cD=["push","pop","shift","splice","unshift"];function iK(s,t){if(s._chartjs){s._chartjs.listeners.push(t);return}Object.defineProperty(s,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),cD.forEach(r=>{const a="_onData"+y1(r),n=s[r];Object.defineProperty(s,r,{configurable:!0,enumerable:!1,value(...i){const o=n.apply(this,i);return s._chartjs.listeners.forEach(c=>{typeof c[a]=="function"&&c[a](...i)}),o}})})}function Yk(s,t){const r=s._chartjs;if(!r)return;const a=r.listeners,n=a.indexOf(t);n!==-1&&a.splice(n,1),!(a.length>0)&&(cD.forEach(i=>{delete s[i]}),delete s._chartjs)}function dD(s){const t=new Set(s);return t.size===s.length?s:Array.from(t)}const uD=(function(){return typeof window>"u"?function(s){return s()}:window.requestAnimationFrame})();function hD(s,t){let r=[],a=!1;return function(...n){r=n,a||(a=!0,uD.call(window,()=>{a=!1,s.apply(t,r)}))}}function lK(s,t){let r;return function(...a){return t?(clearTimeout(r),r=setTimeout(s,t,a)):s.apply(this,a),t}}const j1=s=>s==="start"?"left":s==="end"?"right":"center",ir=(s,t,r)=>s==="start"?t:s==="end"?r:(t+r)/2,oK=(s,t,r,a)=>s===(a?"left":"right")?r:s==="center"?(t+r)/2:t;function cK(s,t,r){const a=t.length;let n=0,i=a;if(s._sorted){const{iScale:o,vScale:c,_parsed:u}=s,h=s.dataset&&s.dataset.options?s.dataset.options.spanGaps:null,m=o.axis,{min:f,max:p,minDefined:v,maxDefined:g}=o.getUserBounds();if(v){if(n=Math.min(Ro(u,m,f).lo,r?a:Ro(t,m,o.getPixelForValue(f)).lo),h){const y=u.slice(0,n+1).reverse().findIndex(w=>!Dt(w[c.axis]));n-=Math.max(0,y)}n=hr(n,0,a-1)}if(g){let y=Math.max(Ro(u,o.axis,p,!0).hi+1,r?0:Ro(t,m,o.getPixelForValue(p),!0).hi+1);if(h){const w=u.slice(y-1).findIndex(N=>!Dt(N[c.axis]));y+=Math.max(0,w)}i=hr(y,n,a)-n}else i=a-n}return{start:n,count:i}}function dK(s){const{xScale:t,yScale:r,_scaleRanges:a}=s,n={xmin:t.min,xmax:t.max,ymin:r.min,ymax:r.max};if(!a)return s._scaleRanges=n,!0;const i=a.xmin!==t.min||a.xmax!==t.max||a.ymin!==r.min||a.ymax!==r.max;return Object.assign(a,n),i}const J0=s=>s===0||s===1,Gk=(s,t,r)=>-(Math.pow(2,10*(s-=1))*Math.sin((s-t)*ns/r)),Kk=(s,t,r)=>Math.pow(2,-10*s)*Math.sin((s-t)*ns/r)+1,Zh={linear:s=>s,easeInQuad:s=>s*s,easeOutQuad:s=>-s*(s-2),easeInOutQuad:s=>(s/=.5)<1?.5*s*s:-.5*(--s*(s-2)-1),easeInCubic:s=>s*s*s,easeOutCubic:s=>(s-=1)*s*s+1,easeInOutCubic:s=>(s/=.5)<1?.5*s*s*s:.5*((s-=2)*s*s+2),easeInQuart:s=>s*s*s*s,easeOutQuart:s=>-((s-=1)*s*s*s-1),easeInOutQuart:s=>(s/=.5)<1?.5*s*s*s*s:-.5*((s-=2)*s*s*s-2),easeInQuint:s=>s*s*s*s*s,easeOutQuint:s=>(s-=1)*s*s*s*s+1,easeInOutQuint:s=>(s/=.5)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2),easeInSine:s=>-Math.cos(s*$s)+1,easeOutSine:s=>Math.sin(s*$s),easeInOutSine:s=>-.5*(Math.cos(Lt*s)-1),easeInExpo:s=>s===0?0:Math.pow(2,10*(s-1)),easeOutExpo:s=>s===1?1:-Math.pow(2,-10*s)+1,easeInOutExpo:s=>J0(s)?s:s<.5?.5*Math.pow(2,10*(s*2-1)):.5*(-Math.pow(2,-10*(s*2-1))+2),easeInCirc:s=>s>=1?s:-(Math.sqrt(1-s*s)-1),easeOutCirc:s=>Math.sqrt(1-(s-=1)*s),easeInOutCirc:s=>(s/=.5)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1),easeInElastic:s=>J0(s)?s:Gk(s,.075,.3),easeOutElastic:s=>J0(s)?s:Kk(s,.075,.3),easeInOutElastic(s){return J0(s)?s:s<.5?.5*Gk(s*2,.1125,.45):.5+.5*Kk(s*2-1,.1125,.45)},easeInBack(s){return s*s*((1.70158+1)*s-1.70158)},easeOutBack(s){return(s-=1)*s*((1.70158+1)*s+1.70158)+1},easeInOutBack(s){let t=1.70158;return(s/=.5)<1?.5*(s*s*(((t*=1.525)+1)*s-t)):.5*((s-=2)*s*(((t*=1.525)+1)*s+t)+2)},easeInBounce:s=>1-Zh.easeOutBounce(1-s),easeOutBounce(s){return s<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375},easeInOutBounce:s=>s<.5?Zh.easeInBounce(s*2)*.5:Zh.easeOutBounce(s*2-1)*.5+.5};function w1(s){if(s&&typeof s=="object"){const t=s.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Xk(s){return w1(s)?s:new aD(s)}function Iy(s){return w1(s)?s:new aD(s).saturate(.5).darken(.1).hexString()}const uK=["x","y","borderWidth","radius","tension"],hK=["color","borderColor","backgroundColor"];function mK(s){s.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),s.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),s.set("animations",{colors:{type:"color",properties:hK},numbers:{type:"number",properties:uK}}),s.describe("animations",{_fallback:"animation"}),s.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function xK(s){s.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Zk=new Map;function fK(s,t){t=t||{};const r=s+JSON.stringify(t);let a=Zk.get(r);return a||(a=new Intl.NumberFormat(s,t),Zk.set(r,a)),a}function N1(s,t,r){return fK(t,r).format(s)}const pK={values(s){return Ls(s)?s:""+s},numeric(s,t,r){if(s===0)return"0";const a=this.chart.options.locale;let n,i=s;if(r.length>1){const h=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(h<1e-4||h>1e15)&&(n="scientific"),i=gK(s,r)}const o=lD(Math.abs(i)),c=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),u={notation:n,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(u,this.options.ticks.format),N1(s,a,u)}};function gK(s,t){let r=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(r)>=1&&s!==Math.floor(s)&&(r=s-Math.floor(s)),r}var mD={formatters:pK};function bK(s){s.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,r)=>r.lineWidth,tickColor:(t,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:mD.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),s.route("scale.ticks","color","","color"),s.route("scale.grid","color","","borderColor"),s.route("scale.border","color","","borderColor"),s.route("scale.title","color","","color"),s.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),s.describe("scales",{_fallback:"scale"}),s.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Go=Object.create(null),Iw=Object.create(null);function Qh(s,t){if(!t)return s;const r=t.split(".");for(let a=0,n=r.length;a<n;++a){const i=r[a];s=s[i]||(s[i]=Object.create(null))}return s}function $y(s,t,r){return typeof t=="string"?bm(Qh(s,t),r):bm(Qh(s,""),t)}class yK{constructor(t,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=a=>a.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(a,n)=>Iy(n.backgroundColor),this.hoverBorderColor=(a,n)=>Iy(n.borderColor),this.hoverColor=(a,n)=>Iy(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(r)}set(t,r){return $y(this,t,r)}get(t){return Qh(this,t)}describe(t,r){return $y(Iw,t,r)}override(t,r){return $y(Go,t,r)}route(t,r,a,n){const i=Qh(this,t),o=Qh(this,a),c="_"+r;Object.defineProperties(i,{[c]:{value:i[r],writable:!0},[r]:{enumerable:!0,get(){const u=this[c],h=o[n];return jt(u)?Object.assign({},h,u):ht(u,h)},set(u){this[c]=u}}})}apply(t){t.forEach(r=>r(this))}}var js=new yK({_scriptable:s=>!s.startsWith("on"),_indexable:s=>s!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[mK,xK,bK]);function vK(s){return!s||Dt(s.size)||Dt(s.family)?null:(s.style?s.style+" ":"")+(s.weight?s.weight+" ":"")+s.size+"px "+s.family}function Qk(s,t,r,a,n){let i=t[n];return i||(i=t[n]=s.measureText(n).width,r.push(n)),i>a&&(a=i),a}function go(s,t,r){const a=s.currentDevicePixelRatio,n=r!==0?Math.max(r/2,.5):0;return Math.round((t-n)*a)/a+n}function Jk(s,t){!t&&!s||(t=t||s.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,s.width,s.height),t.restore())}function $w(s,t,r,a){xD(s,t,r,a,null)}function xD(s,t,r,a,n){let i,o,c,u,h,m,f,p;const v=t.pointStyle,g=t.rotation,y=t.radius;let w=(g||0)*XG;if(v&&typeof v=="object"&&(i=v.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){s.save(),s.translate(r,a),s.rotate(w),s.drawImage(v,-v.width/2,-v.height/2,v.width,v.height),s.restore();return}if(!(isNaN(y)||y<=0)){switch(s.beginPath(),v){default:n?s.ellipse(r,a,n/2,y,0,0,ns):s.arc(r,a,y,0,ns),s.closePath();break;case"triangle":m=n?n/2:y,s.moveTo(r+Math.sin(w)*m,a-Math.cos(w)*y),w+=Hk,s.lineTo(r+Math.sin(w)*m,a-Math.cos(w)*y),w+=Hk,s.lineTo(r+Math.sin(w)*m,a-Math.cos(w)*y),s.closePath();break;case"rectRounded":h=y*.516,u=y-h,o=Math.cos(w+po)*u,f=Math.cos(w+po)*(n?n/2-h:u),c=Math.sin(w+po)*u,p=Math.sin(w+po)*(n?n/2-h:u),s.arc(r-f,a-c,h,w-Lt,w-$s),s.arc(r+p,a-o,h,w-$s,w),s.arc(r+f,a+c,h,w,w+$s),s.arc(r-p,a+o,h,w+$s,w+Lt),s.closePath();break;case"rect":if(!g){u=Math.SQRT1_2*y,m=n?n/2:u,s.rect(r-m,a-u,2*m,2*u);break}w+=po;case"rectRot":f=Math.cos(w)*(n?n/2:y),o=Math.cos(w)*y,c=Math.sin(w)*y,p=Math.sin(w)*(n?n/2:y),s.moveTo(r-f,a-c),s.lineTo(r+p,a-o),s.lineTo(r+f,a+c),s.lineTo(r-p,a+o),s.closePath();break;case"crossRot":w+=po;case"cross":f=Math.cos(w)*(n?n/2:y),o=Math.cos(w)*y,c=Math.sin(w)*y,p=Math.sin(w)*(n?n/2:y),s.moveTo(r-f,a-c),s.lineTo(r+f,a+c),s.moveTo(r+p,a-o),s.lineTo(r-p,a+o);break;case"star":f=Math.cos(w)*(n?n/2:y),o=Math.cos(w)*y,c=Math.sin(w)*y,p=Math.sin(w)*(n?n/2:y),s.moveTo(r-f,a-c),s.lineTo(r+f,a+c),s.moveTo(r+p,a-o),s.lineTo(r-p,a+o),w+=po,f=Math.cos(w)*(n?n/2:y),o=Math.cos(w)*y,c=Math.sin(w)*y,p=Math.sin(w)*(n?n/2:y),s.moveTo(r-f,a-c),s.lineTo(r+f,a+c),s.moveTo(r+p,a-o),s.lineTo(r-p,a+o);break;case"line":o=n?n/2:Math.cos(w)*y,c=Math.sin(w)*y,s.moveTo(r-o,a-c),s.lineTo(r+o,a+c);break;case"dash":s.moveTo(r,a),s.lineTo(r+Math.cos(w)*(n?n/2:y),a+Math.sin(w)*y);break;case!1:s.closePath();break}s.fill(),t.borderWidth>0&&s.stroke()}}function wm(s,t,r){return r=r||.5,!t||s&&s.x>t.left-r&&s.x<t.right+r&&s.y>t.top-r&&s.y<t.bottom+r}function Ep(s,t){s.save(),s.beginPath(),s.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),s.clip()}function Ap(s){s.restore()}function jK(s,t,r,a,n){if(!t)return s.lineTo(r.x,r.y);if(n==="middle"){const i=(t.x+r.x)/2;s.lineTo(i,t.y),s.lineTo(i,r.y)}else n==="after"!=!!a?s.lineTo(t.x,r.y):s.lineTo(r.x,t.y);s.lineTo(r.x,r.y)}function wK(s,t,r,a){if(!t)return s.lineTo(r.x,r.y);s.bezierCurveTo(a?t.cp1x:t.cp2x,a?t.cp1y:t.cp2y,a?r.cp2x:r.cp1x,a?r.cp2y:r.cp1y,r.x,r.y)}function NK(s,t){t.translation&&s.translate(t.translation[0],t.translation[1]),Dt(t.rotation)||s.rotate(t.rotation),t.color&&(s.fillStyle=t.color),t.textAlign&&(s.textAlign=t.textAlign),t.textBaseline&&(s.textBaseline=t.textBaseline)}function _K(s,t,r,a,n){if(n.strikethrough||n.underline){const i=s.measureText(a),o=t-i.actualBoundingBoxLeft,c=t+i.actualBoundingBoxRight,u=r-i.actualBoundingBoxAscent,h=r+i.actualBoundingBoxDescent,m=n.strikethrough?(u+h)/2:h;s.strokeStyle=s.fillStyle,s.beginPath(),s.lineWidth=n.decorationWidth||2,s.moveTo(o,m),s.lineTo(c,m),s.stroke()}}function kK(s,t){const r=s.fillStyle;s.fillStyle=t.color,s.fillRect(t.left,t.top,t.width,t.height),s.fillStyle=r}function Nm(s,t,r,a,n,i={}){const o=Ls(t)?t:[t],c=i.strokeWidth>0&&i.strokeColor!=="";let u,h;for(s.save(),s.font=n.string,NK(s,i),u=0;u<o.length;++u)h=o[u],i.backdrop&&kK(s,i.backdrop),c&&(i.strokeColor&&(s.strokeStyle=i.strokeColor),Dt(i.strokeWidth)||(s.lineWidth=i.strokeWidth),s.strokeText(h,r,a,i.maxWidth)),s.fillText(h,r,a,i.maxWidth),_K(s,r,a,h,i),a+=Number(n.lineHeight);s.restore()}function op(s,t){const{x:r,y:a,w:n,h:i,radius:o}=t;s.arc(r+o.topLeft,a+o.topLeft,o.topLeft,1.5*Lt,Lt,!0),s.lineTo(r,a+i-o.bottomLeft),s.arc(r+o.bottomLeft,a+i-o.bottomLeft,o.bottomLeft,Lt,$s,!0),s.lineTo(r+n-o.bottomRight,a+i),s.arc(r+n-o.bottomRight,a+i-o.bottomRight,o.bottomRight,$s,0,!0),s.lineTo(r+n,a+o.topRight),s.arc(r+n-o.topRight,a+o.topRight,o.topRight,0,-$s,!0),s.lineTo(r+o.topLeft,a)}const SK=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,CK=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function TK(s,t){const r=(""+s).match(SK);if(!r||r[1]==="normal")return t*1.2;switch(s=+r[2],r[3]){case"px":return s;case"%":s/=100;break}return t*s}const EK=s=>+s||0;function _1(s,t){const r={},a=jt(t),n=a?Object.keys(t):t,i=jt(s)?a?o=>ht(s[o],s[t[o]]):o=>s[o]:()=>s;for(const o of n)r[o]=EK(i(o));return r}function fD(s){return _1(s,{top:"y",right:"x",bottom:"y",left:"x"})}function od(s){return _1(s,["topLeft","topRight","bottomLeft","bottomRight"])}function Ra(s){const t=fD(s);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function mr(s,t){s=s||{},t=t||js.font;let r=ht(s.size,t.size);typeof r=="string"&&(r=parseInt(r,10));let a=ht(s.style,t.style);a&&!(""+a).match(CK)&&(console.warn('Invalid font style specified: "'+a+'"'),a=void 0);const n={family:ht(s.family,t.family),lineHeight:TK(ht(s.lineHeight,t.lineHeight),r),size:r,style:a,weight:ht(s.weight,t.weight),string:""};return n.string=vK(n),n}function ef(s,t,r,a){let n,i,o;for(n=0,i=s.length;n<i;++n)if(o=s[n],o!==void 0&&o!==void 0)return o}function AK(s,t,r){const{min:a,max:n}=s,i=nD(t,(n-a)/2),o=(c,u)=>r&&c===0?0:c+u;return{min:o(a,-Math.abs(i)),max:o(n,i)}}function Zo(s,t){return Object.assign(Object.create(s),t)}function k1(s,t=[""],r,a,n=()=>s[0]){const i=r||s;typeof a>"u"&&(a=yD("_fallback",s));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:s,_rootScopes:i,_fallback:a,_getTarget:n,override:c=>k1([c,...s],t,i,a)};return new Proxy(o,{deleteProperty(c,u){return delete c[u],delete c._keys,delete s[0][u],!0},get(c,u){return gD(c,u,()=>FK(u,t,s,c))},getOwnPropertyDescriptor(c,u){return Reflect.getOwnPropertyDescriptor(c._scopes[0],u)},getPrototypeOf(){return Reflect.getPrototypeOf(s[0])},has(c,u){return tS(c).includes(u)},ownKeys(c){return tS(c)},set(c,u,h){const m=c._storage||(c._storage=n());return c[u]=m[u]=h,delete c._keys,!0}})}function Nd(s,t,r,a){const n={_cacheable:!1,_proxy:s,_context:t,_subProxy:r,_stack:new Set,_descriptors:pD(s,a),setContext:i=>Nd(s,i,r,a),override:i=>Nd(s.override(i),t,r,a)};return new Proxy(n,{deleteProperty(i,o){return delete i[o],delete s[o],!0},get(i,o,c){return gD(i,o,()=>RK(i,o,c))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(s,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(s,o)},getPrototypeOf(){return Reflect.getPrototypeOf(s)},has(i,o){return Reflect.has(s,o)},ownKeys(){return Reflect.ownKeys(s)},set(i,o,c){return s[o]=c,delete i[o],!0}})}function pD(s,t={scriptable:!0,indexable:!0}){const{_scriptable:r=t.scriptable,_indexable:a=t.indexable,_allKeys:n=t.allKeys}=s;return{allKeys:n,scriptable:r,indexable:a,isScriptable:Ml(r)?r:()=>r,isIndexable:Ml(a)?a:()=>a}}const DK=(s,t)=>s?s+y1(t):t,S1=(s,t)=>jt(t)&&s!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function gD(s,t,r){if(Object.prototype.hasOwnProperty.call(s,t)||t==="constructor")return s[t];const a=r();return s[t]=a,a}function RK(s,t,r){const{_proxy:a,_context:n,_subProxy:i,_descriptors:o}=s;let c=a[t];return Ml(c)&&o.isScriptable(t)&&(c=MK(t,c,s,r)),Ls(c)&&c.length&&(c=OK(t,c,s,o.isIndexable)),S1(t,c)&&(c=Nd(c,n,i&&i[t],o)),c}function MK(s,t,r,a){const{_proxy:n,_context:i,_subProxy:o,_stack:c}=r;if(c.has(s))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+s);c.add(s);let u=t(i,o||a);return c.delete(s),S1(s,u)&&(u=C1(n._scopes,n,s,u)),u}function OK(s,t,r,a){const{_proxy:n,_context:i,_subProxy:o,_descriptors:c}=r;if(typeof i.index<"u"&&a(s))return t[i.index%t.length];if(jt(t[0])){const u=t,h=n._scopes.filter(m=>m!==u);t=[];for(const m of u){const f=C1(h,n,s,m);t.push(Nd(f,i,o&&o[s],c))}}return t}function bD(s,t,r){return Ml(s)?s(t,r):s}const LK=(s,t)=>s===!0?t:typeof s=="string"?Yo(t,s):void 0;function PK(s,t,r,a,n){for(const i of t){const o=LK(r,i);if(o){s.add(o);const c=bD(o._fallback,r,n);if(typeof c<"u"&&c!==r&&c!==a)return c}else if(o===!1&&typeof a<"u"&&r!==a)return null}return!1}function C1(s,t,r,a){const n=t._rootScopes,i=bD(t._fallback,r,a),o=[...s,...n],c=new Set;c.add(a);let u=eS(c,o,r,i||r,a);return u===null||typeof i<"u"&&i!==r&&(u=eS(c,o,i,u,a),u===null)?!1:k1(Array.from(c),[""],n,i,()=>BK(t,r,a))}function eS(s,t,r,a,n){for(;r;)r=PK(s,t,r,a,n);return r}function BK(s,t,r){const a=s._getTarget();t in a||(a[t]={});const n=a[t];return Ls(n)&&jt(r)?r:n||{}}function FK(s,t,r,a){let n;for(const i of t)if(n=yD(DK(i,s),r),typeof n<"u")return S1(s,n)?C1(r,a,s,n):n}function yD(s,t){for(const r of t){if(!r)continue;const a=r[s];if(typeof a<"u")return a}}function tS(s){let t=s._keys;return t||(t=s._keys=zK(s._scopes)),t}function zK(s){const t=new Set;for(const r of s)for(const a of Object.keys(r).filter(n=>!n.startsWith("_")))t.add(a);return Array.from(t)}const IK=Number.EPSILON||1e-14,_d=(s,t)=>t<s.length&&!s[t].skip&&s[t],vD=s=>s==="x"?"y":"x";function $K(s,t,r,a){const n=s.skip?t:s,i=t,o=r.skip?t:r,c=zw(i,n),u=zw(o,i);let h=c/(c+u),m=u/(c+u);h=isNaN(h)?0:h,m=isNaN(m)?0:m;const f=a*h,p=a*m;return{previous:{x:i.x-f*(o.x-n.x),y:i.y-f*(o.y-n.y)},next:{x:i.x+p*(o.x-n.x),y:i.y+p*(o.y-n.y)}}}function UK(s,t,r){const a=s.length;let n,i,o,c,u,h=_d(s,0);for(let m=0;m<a-1;++m)if(u=h,h=_d(s,m+1),!(!u||!h)){if(Xh(t[m],0,IK)){r[m]=r[m+1]=0;continue}n=r[m]/t[m],i=r[m+1]/t[m],c=Math.pow(n,2)+Math.pow(i,2),!(c<=9)&&(o=3/Math.sqrt(c),r[m]=n*o*t[m],r[m+1]=i*o*t[m])}}function VK(s,t,r="x"){const a=vD(r),n=s.length;let i,o,c,u=_d(s,0);for(let h=0;h<n;++h){if(o=c,c=u,u=_d(s,h+1),!c)continue;const m=c[r],f=c[a];o&&(i=(m-o[r])/3,c[`cp1${r}`]=m-i,c[`cp1${a}`]=f-i*t[h]),u&&(i=(u[r]-m)/3,c[`cp2${r}`]=m+i,c[`cp2${a}`]=f+i*t[h])}}function HK(s,t="x"){const r=vD(t),a=s.length,n=Array(a).fill(0),i=Array(a);let o,c,u,h=_d(s,0);for(o=0;o<a;++o)if(c=u,u=h,h=_d(s,o+1),!!u){if(h){const m=h[t]-u[t];n[o]=m!==0?(h[r]-u[r])/m:0}i[o]=c?h?_n(n[o-1])!==_n(n[o])?0:(n[o-1]+n[o])/2:n[o-1]:n[o]}UK(s,n,i),VK(s,i,t)}function tf(s,t,r){return Math.max(Math.min(s,r),t)}function qK(s,t){let r,a,n,i,o,c=wm(s[0],t);for(r=0,a=s.length;r<a;++r)o=i,i=c,c=r<a-1&&wm(s[r+1],t),i&&(n=s[r],o&&(n.cp1x=tf(n.cp1x,t.left,t.right),n.cp1y=tf(n.cp1y,t.top,t.bottom)),c&&(n.cp2x=tf(n.cp2x,t.left,t.right),n.cp2y=tf(n.cp2y,t.top,t.bottom)))}function WK(s,t,r,a,n){let i,o,c,u;if(t.spanGaps&&(s=s.filter(h=>!h.skip)),t.cubicInterpolationMode==="monotone")HK(s,n);else{let h=a?s[s.length-1]:s[0];for(i=0,o=s.length;i<o;++i)c=s[i],u=$K(h,c,s[Math.min(i+1,o-(a?0:1))%o],t.tension),c.cp1x=u.previous.x,c.cp1y=u.previous.y,c.cp2x=u.next.x,c.cp2y=u.next.y,h=c}t.capBezierPoints&&qK(s,r)}function T1(){return typeof window<"u"&&typeof document<"u"}function E1(s){let t=s.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function cp(s,t,r){let a;return typeof s=="string"?(a=parseInt(s,10),s.indexOf("%")!==-1&&(a=a/100*t.parentNode[r])):a=s,a}const Dp=s=>s.ownerDocument.defaultView.getComputedStyle(s,null);function YK(s,t){return Dp(s).getPropertyValue(t)}const GK=["top","right","bottom","left"];function Uo(s,t,r){const a={};r=r?"-"+r:"";for(let n=0;n<4;n++){const i=GK[n];a[i]=parseFloat(s[t+"-"+i+r])||0}return a.width=a.left+a.right,a.height=a.top+a.bottom,a}const KK=(s,t,r)=>(s>0||t>0)&&(!r||!r.shadowRoot);function XK(s,t){const r=s.touches,a=r&&r.length?r[0]:s,{offsetX:n,offsetY:i}=a;let o=!1,c,u;if(KK(n,i,s.target))c=n,u=i;else{const h=t.getBoundingClientRect();c=a.clientX-h.left,u=a.clientY-h.top,o=!0}return{x:c,y:u,box:o}}function So(s,t){if("native"in s)return s;const{canvas:r,currentDevicePixelRatio:a}=t,n=Dp(r),i=n.boxSizing==="border-box",o=Uo(n,"padding"),c=Uo(n,"border","width"),{x:u,y:h,box:m}=XK(s,r),f=o.left+(m&&c.left),p=o.top+(m&&c.top);let{width:v,height:g}=t;return i&&(v-=o.width+c.width,g-=o.height+c.height),{x:Math.round((u-f)/v*r.width/a),y:Math.round((h-p)/g*r.height/a)}}function ZK(s,t,r){let a,n;if(t===void 0||r===void 0){const i=s&&E1(s);if(!i)t=s.clientWidth,r=s.clientHeight;else{const o=i.getBoundingClientRect(),c=Dp(i),u=Uo(c,"border","width"),h=Uo(c,"padding");t=o.width-h.width-u.width,r=o.height-h.height-u.height,a=cp(c.maxWidth,i,"clientWidth"),n=cp(c.maxHeight,i,"clientHeight")}}return{width:t,height:r,maxWidth:a||lp,maxHeight:n||lp}}const vl=s=>Math.round(s*10)/10;function QK(s,t,r,a){const n=Dp(s),i=Uo(n,"margin"),o=cp(n.maxWidth,s,"clientWidth")||lp,c=cp(n.maxHeight,s,"clientHeight")||lp,u=ZK(s,t,r);let{width:h,height:m}=u;if(n.boxSizing==="content-box"){const p=Uo(n,"border","width"),v=Uo(n,"padding");h-=v.width+p.width,m-=v.height+p.height}return h=Math.max(0,h-i.width),m=Math.max(0,a?h/a:m-i.height),h=vl(Math.min(h,o,u.maxWidth)),m=vl(Math.min(m,c,u.maxHeight)),h&&!m&&(m=vl(h/2)),(t!==void 0||r!==void 0)&&a&&u.height&&m>u.height&&(m=u.height,h=vl(Math.floor(m*a))),{width:h,height:m}}function sS(s,t,r){const a=t||1,n=vl(s.height*a),i=vl(s.width*a);s.height=vl(s.height),s.width=vl(s.width);const o=s.canvas;return o.style&&(r||!o.style.height&&!o.style.width)&&(o.style.height=`${s.height}px`,o.style.width=`${s.width}px`),s.currentDevicePixelRatio!==a||o.height!==n||o.width!==i?(s.currentDevicePixelRatio=a,o.height=n,o.width=i,s.ctx.setTransform(a,0,0,a,0,0),!0):!1}const JK=(function(){let s=!1;try{const t={get passive(){return s=!0,!1}};T1()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return s})();function rS(s,t){const r=YK(s,t),a=r&&r.match(/^(\d+)(\.\d+)?px$/);return a?+a[1]:void 0}function Co(s,t,r,a){return{x:s.x+r*(t.x-s.x),y:s.y+r*(t.y-s.y)}}function eX(s,t,r,a){return{x:s.x+r*(t.x-s.x),y:a==="middle"?r<.5?s.y:t.y:a==="after"?r<1?s.y:t.y:r>0?t.y:s.y}}function tX(s,t,r,a){const n={x:s.cp2x,y:s.cp2y},i={x:t.cp1x,y:t.cp1y},o=Co(s,n,r),c=Co(n,i,r),u=Co(i,t,r),h=Co(o,c,r),m=Co(c,u,r);return Co(h,m,r)}const sX=function(s,t){return{x(r){return s+s+t-r},setWidth(r){t=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,a){return r-a},leftForLtr(r,a){return r-a}}},rX=function(){return{x(s){return s},setWidth(s){},textAlign(s){return s},xPlus(s,t){return s+t},leftForLtr(s,t){return s}}};function cd(s,t,r){return s?sX(t,r):rX()}function jD(s,t){let r,a;(t==="ltr"||t==="rtl")&&(r=s.canvas.style,a=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",t,"important"),s.prevTextDirection=a)}function wD(s,t){t!==void 0&&(delete s.prevTextDirection,s.canvas.style.setProperty("direction",t[0],t[1]))}function ND(s){return s==="angle"?{between:jm,compare:sK,normalize:ta}:{between:fi,compare:(t,r)=>t-r,normalize:t=>t}}function aS({start:s,end:t,count:r,loop:a,style:n}){return{start:s%r,end:t%r,loop:a&&(t-s+1)%r===0,style:n}}function aX(s,t,r){const{property:a,start:n,end:i}=r,{between:o,normalize:c}=ND(a),u=t.length;let{start:h,end:m,loop:f}=s,p,v;if(f){for(h+=u,m+=u,p=0,v=u;p<v&&o(c(t[h%u][a]),n,i);++p)h--,m--;h%=u,m%=u}return m<h&&(m+=u),{start:h,end:m,loop:f,style:s.style}}function _D(s,t,r){if(!r)return[s];const{property:a,start:n,end:i}=r,o=t.length,{compare:c,between:u,normalize:h}=ND(a),{start:m,end:f,loop:p,style:v}=aX(s,t,r),g=[];let y=!1,w=null,N,k,S;const _=()=>u(n,S,N)&&c(n,S)!==0,T=()=>c(i,N)===0||u(i,S,N),E=()=>y||_(),z=()=>!y||T();for(let O=m,C=m;O<=f;++O)k=t[O%o],!k.skip&&(N=h(k[a]),N!==S&&(y=u(N,n,i),w===null&&E()&&(w=c(N,n)===0?O:C),w!==null&&z()&&(g.push(aS({start:w,end:O,loop:p,count:o,style:v})),w=null),C=O,S=N));return w!==null&&g.push(aS({start:w,end:f,loop:p,count:o,style:v})),g}function kD(s,t){const r=[],a=s.segments;for(let n=0;n<a.length;n++){const i=_D(a[n],s.points,t);i.length&&r.push(...i)}return r}function nX(s,t,r,a){let n=0,i=t-1;if(r&&!a)for(;n<t&&!s[n].skip;)n++;for(;n<t&&s[n].skip;)n++;for(n%=t,r&&(i+=n);i>n&&s[i%t].skip;)i--;return i%=t,{start:n,end:i}}function iX(s,t,r,a){const n=s.length,i=[];let o=t,c=s[t],u;for(u=t+1;u<=r;++u){const h=s[u%n];h.skip||h.stop?c.skip||(a=!1,i.push({start:t%n,end:(u-1)%n,loop:a}),t=o=h.stop?u:null):(o=u,c.skip&&(t=u)),c=h}return o!==null&&i.push({start:t%n,end:o%n,loop:a}),i}function lX(s,t){const r=s.points,a=s.options.spanGaps,n=r.length;if(!n)return[];const i=!!s._loop,{start:o,end:c}=nX(r,n,i,a);if(a===!0)return nS(s,[{start:o,end:c,loop:i}],r,t);const u=c<o?c+n:c,h=!!s._fullLoop&&o===0&&c===n-1;return nS(s,iX(r,o,u,h),r,t)}function nS(s,t,r,a){return!a||!a.setContext||!r?t:oX(s,t,r,a)}function oX(s,t,r,a){const n=s._chart.getContext(),i=iS(s.options),{_datasetIndex:o,options:{spanGaps:c}}=s,u=r.length,h=[];let m=i,f=t[0].start,p=f;function v(g,y,w,N){const k=c?-1:1;if(g!==y){for(g+=u;r[g%u].skip;)g-=k;for(;r[y%u].skip;)y+=k;g%u!==y%u&&(h.push({start:g%u,end:y%u,loop:w,style:N}),m=N,f=y%u)}}for(const g of t){f=c?f:g.start;let y=r[f%u],w;for(p=f+1;p<=g.end;p++){const N=r[p%u];w=iS(a.setContext(Zo(n,{type:"segment",p0:y,p1:N,p0DataIndex:(p-1)%u,p1DataIndex:p%u,datasetIndex:o}))),cX(w,m)&&v(f,p-1,g.loop,m),y=N,m=w}f<p-1&&v(f,p-1,g.loop,m)}return h}function iS(s){return{backgroundColor:s.backgroundColor,borderCapStyle:s.borderCapStyle,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderJoinStyle:s.borderJoinStyle,borderWidth:s.borderWidth,borderColor:s.borderColor}}function cX(s,t){if(!t)return!1;const r=[],a=function(n,i){return w1(i)?(r.includes(i)||r.push(i),r.indexOf(i)):i};return JSON.stringify(s,a)!==JSON.stringify(t,a)}function sf(s,t,r){return s.options.clip?s[r]:t[r]}function dX(s,t){const{xScale:r,yScale:a}=s;return r&&a?{left:sf(r,t,"left"),right:sf(r,t,"right"),top:sf(a,t,"top"),bottom:sf(a,t,"bottom")}:t}function SD(s,t){const r=t._clip;if(r.disabled)return!1;const a=dX(t,s.chartArea);return{left:r.left===!1?0:a.left-(r.left===!0?0:r.left),right:r.right===!1?s.width:a.right+(r.right===!0?0:r.right),top:r.top===!1?0:a.top-(r.top===!0?0:r.top),bottom:r.bottom===!1?s.height:a.bottom+(r.bottom===!0?0:r.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class uX{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,r,a,n){const i=r.listeners[n],o=r.duration;i.forEach(c=>c({chart:t,initial:r.initial,numSteps:o,currentStep:Math.min(a-r.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=uD.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let r=0;this._charts.forEach((a,n)=>{if(!a.running||!a.items.length)return;const i=a.items;let o=i.length-1,c=!1,u;for(;o>=0;--o)u=i[o],u._active?(u._total>a.duration&&(a.duration=u._total),u.tick(t),c=!0):(i[o]=i[i.length-1],i.pop());c&&(n.draw(),this._notify(n,a,t,"progress")),i.length||(a.running=!1,this._notify(n,a,t,"complete"),a.initial=!1),r+=i.length}),this._lastDate=t,r===0&&(this._running=!1)}_getAnims(t){const r=this._charts;let a=r.get(t);return a||(a={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(t,a)),a}listen(t,r,a){this._getAnims(t).listeners[r].push(a)}add(t,r){!r||!r.length||this._getAnims(t).items.push(...r)}has(t){return this._getAnims(t).items.length>0}start(t){const r=this._charts.get(t);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((a,n)=>Math.max(a,n._duration),0),this._refresh())}running(t){if(!this._running)return!1;const r=this._charts.get(t);return!(!r||!r.running||!r.items.length)}stop(t){const r=this._charts.get(t);if(!r||!r.items.length)return;const a=r.items;let n=a.length-1;for(;n>=0;--n)a[n].cancel();r.items=[],this._notify(t,r,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var oi=new uX;const lS="transparent",hX={boolean(s,t,r){return r>.5?t:s},color(s,t,r){const a=Xk(s||lS),n=a.valid&&Xk(t||lS);return n&&n.valid?n.mix(a,r).hexString():t},number(s,t,r){return s+(t-s)*r}};class mX{constructor(t,r,a,n){const i=r[a];n=ef([t.to,n,i,t.from]);const o=ef([t.from,i,n]);this._active=!0,this._fn=t.fn||hX[t.type||typeof o],this._easing=Zh[t.easing]||Zh.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=r,this._prop=a,this._from=o,this._to=n,this._promises=void 0}active(){return this._active}update(t,r,a){if(this._active){this._notify(!1);const n=this._target[this._prop],i=a-this._start,o=this._duration-i;this._start=a,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=ef([t.to,r,n,t.from]),this._from=ef([t.from,n,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const r=t-this._start,a=this._duration,n=this._prop,i=this._from,o=this._loop,c=this._to;let u;if(this._active=i!==c&&(o||r<a),!this._active){this._target[n]=c,this._notify(!0);return}if(r<0){this._target[n]=i;return}u=r/a%2,u=o&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[n]=this._fn(i,c,u)}wait(){const t=this._promises||(this._promises=[]);return new Promise((r,a)=>{t.push({res:r,rej:a})})}_notify(t){const r=t?"res":"rej",a=this._promises||[];for(let n=0;n<a.length;n++)a[n][r]()}}class CD{constructor(t,r){this._chart=t,this._properties=new Map,this.configure(r)}configure(t){if(!jt(t))return;const r=Object.keys(js.animation),a=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{const i=t[n];if(!jt(i))return;const o={};for(const c of r)o[c]=i[c];(Ls(i.properties)&&i.properties||[n]).forEach(c=>{(c===n||!a.has(c))&&a.set(c,o)})})}_animateOptions(t,r){const a=r.options,n=fX(t,a);if(!n)return[];const i=this._createAnimations(n,a);return a.$shared&&xX(t.options.$animations,a).then(()=>{t.options=a},()=>{}),i}_createAnimations(t,r){const a=this._properties,n=[],i=t.$animations||(t.$animations={}),o=Object.keys(r),c=Date.now();let u;for(u=o.length-1;u>=0;--u){const h=o[u];if(h.charAt(0)==="$")continue;if(h==="options"){n.push(...this._animateOptions(t,r));continue}const m=r[h];let f=i[h];const p=a.get(h);if(f)if(p&&f.active()){f.update(p,m,c);continue}else f.cancel();if(!p||!p.duration){t[h]=m;continue}i[h]=f=new mX(p,t,h,m),n.push(f)}return n}update(t,r){if(this._properties.size===0){Object.assign(t,r);return}const a=this._createAnimations(t,r);if(a.length)return oi.add(this._chart,a),!0}}function xX(s,t){const r=[],a=Object.keys(t);for(let n=0;n<a.length;n++){const i=s[a[n]];i&&i.active()&&r.push(i.wait())}return Promise.all(r)}function fX(s,t){if(!t)return;let r=s.options;if(!r){s.options=t;return}return r.$shared&&(s.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function oS(s,t){const r=s&&s.options||{},a=r.reverse,n=r.min===void 0?t:0,i=r.max===void 0?t:0;return{start:a?i:n,end:a?n:i}}function pX(s,t,r){if(r===!1)return!1;const a=oS(s,r),n=oS(t,r);return{top:n.end,right:a.end,bottom:n.start,left:a.start}}function gX(s){let t,r,a,n;return jt(s)?(t=s.top,r=s.right,a=s.bottom,n=s.left):t=r=a=n=s,{top:t,right:r,bottom:a,left:n,disabled:s===!1}}function TD(s,t){const r=[],a=s._getSortedDatasetMetas(t);let n,i;for(n=0,i=a.length;n<i;++n)r.push(a[n].index);return r}function cS(s,t,r,a={}){const n=s.keys,i=a.mode==="single";let o,c,u,h;if(t===null)return;let m=!1;for(o=0,c=n.length;o<c;++o){if(u=+n[o],u===r){if(m=!0,a.all)continue;break}h=s.values[u],fr(h)&&(i||t===0||_n(t)===_n(h))&&(t+=h)}return!m&&!a.all?0:t}function bX(s,t){const{iScale:r,vScale:a}=t,n=r.axis==="x"?"x":"y",i=a.axis==="x"?"x":"y",o=Object.keys(s),c=new Array(o.length);let u,h,m;for(u=0,h=o.length;u<h;++u)m=o[u],c[u]={[n]:m,[i]:s[m]};return c}function Uy(s,t){const r=s&&s.options.stacked;return r||r===void 0&&t.stack!==void 0}function yX(s,t,r){return`${s.id}.${t.id}.${r.stack||r.type}`}function vX(s){const{min:t,max:r,minDefined:a,maxDefined:n}=s.getUserBounds();return{min:a?t:Number.NEGATIVE_INFINITY,max:n?r:Number.POSITIVE_INFINITY}}function jX(s,t,r){const a=s[t]||(s[t]={});return a[r]||(a[r]={})}function dS(s,t,r,a){for(const n of t.getMatchingVisibleMetas(a).reverse()){const i=s[n.index];if(r&&i>0||!r&&i<0)return n.index}return null}function uS(s,t){const{chart:r,_cachedMeta:a}=s,n=r._stacks||(r._stacks={}),{iScale:i,vScale:o,index:c}=a,u=i.axis,h=o.axis,m=yX(i,o,a),f=t.length;let p;for(let v=0;v<f;++v){const g=t[v],{[u]:y,[h]:w}=g,N=g._stacks||(g._stacks={});p=N[h]=jX(n,m,y),p[c]=w,p._top=dS(p,o,!0,a.type),p._bottom=dS(p,o,!1,a.type);const k=p._visualValues||(p._visualValues={});k[c]=w}}function Vy(s,t){const r=s.scales;return Object.keys(r).filter(a=>r[a].axis===t).shift()}function wX(s,t){return Zo(s,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function NX(s,t,r){return Zo(s,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:r,index:t,mode:"default",type:"data"})}function gh(s,t){const r=s.controller.index,a=s.vScale&&s.vScale.axis;if(a){t=t||s._parsed;for(const n of t){const i=n._stacks;if(!i||i[a]===void 0||i[a][r]===void 0)return;delete i[a][r],i[a]._visualValues!==void 0&&i[a]._visualValues[r]!==void 0&&delete i[a]._visualValues[r]}}}const Hy=s=>s==="reset"||s==="none",hS=(s,t)=>t?s:Object.assign({},s),_X=(s,t,r)=>s&&!t.hidden&&t._stacked&&{keys:TD(r,!0),values:null};class Rp{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,r){this.chart=t,this._ctx=t.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Uy(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&gh(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,r=this._cachedMeta,a=this.getDataset(),n=(f,p,v,g)=>f==="x"?p:f==="r"?g:v,i=r.xAxisID=ht(a.xAxisID,Vy(t,"x")),o=r.yAxisID=ht(a.yAxisID,Vy(t,"y")),c=r.rAxisID=ht(a.rAxisID,Vy(t,"r")),u=r.indexAxis,h=r.iAxisID=n(u,i,o,c),m=r.vAxisID=n(u,o,i,c);r.xScale=this.getScaleForId(i),r.yScale=this.getScaleForId(o),r.rScale=this.getScaleForId(c),r.iScale=this.getScaleForId(h),r.vScale=this.getScaleForId(m)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const r=this._cachedMeta;return t===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Yk(this._data,this),t._stacked&&gh(t)}_dataCheck(){const t=this.getDataset(),r=t.data||(t.data=[]),a=this._data;if(jt(r)){const n=this._cachedMeta;this._data=bX(r,n)}else if(a!==r){if(a){Yk(a,this);const n=this._cachedMeta;gh(n),n._parsed=[]}r&&Object.isExtensible(r)&&iK(r,this),this._syncList=[],this._data=r}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const r=this._cachedMeta,a=this.getDataset();let n=!1;this._dataCheck();const i=r._stacked;r._stacked=Uy(r.vScale,r),r.stack!==a.stack&&(n=!0,gh(r),r.stack=a.stack),this._resyncElements(t),(n||i!==r._stacked)&&(uS(this,r._parsed),r._stacked=Uy(r.vScale,r))}configure(){const t=this.chart.config,r=t.datasetScopeKeys(this._type),a=t.getOptionScopes(this.getDataset(),r,!0);this.options=t.createResolver(a,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,r){const{_cachedMeta:a,_data:n}=this,{iScale:i,_stacked:o}=a,c=i.axis;let u=t===0&&r===n.length?!0:a._sorted,h=t>0&&a._parsed[t-1],m,f,p;if(this._parsing===!1)a._parsed=n,a._sorted=!0,p=n;else{Ls(n[t])?p=this.parseArrayData(a,n,t,r):jt(n[t])?p=this.parseObjectData(a,n,t,r):p=this.parsePrimitiveData(a,n,t,r);const v=()=>f[c]===null||h&&f[c]<h[c];for(m=0;m<r;++m)a._parsed[m+t]=f=p[m],u&&(v()&&(u=!1),h=f);a._sorted=u}o&&uS(this,p)}parsePrimitiveData(t,r,a,n){const{iScale:i,vScale:o}=t,c=i.axis,u=o.axis,h=i.getLabels(),m=i===o,f=new Array(n);let p,v,g;for(p=0,v=n;p<v;++p)g=p+a,f[p]={[c]:m||i.parse(h[g],g),[u]:o.parse(r[g],g)};return f}parseArrayData(t,r,a,n){const{xScale:i,yScale:o}=t,c=new Array(n);let u,h,m,f;for(u=0,h=n;u<h;++u)m=u+a,f=r[m],c[u]={x:i.parse(f[0],m),y:o.parse(f[1],m)};return c}parseObjectData(t,r,a,n){const{xScale:i,yScale:o}=t,{xAxisKey:c="x",yAxisKey:u="y"}=this._parsing,h=new Array(n);let m,f,p,v;for(m=0,f=n;m<f;++m)p=m+a,v=r[p],h[m]={x:i.parse(Yo(v,c),p),y:o.parse(Yo(v,u),p)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,r,a){const n=this.chart,i=this._cachedMeta,o=r[t.axis],c={keys:TD(n,!0),values:r._stacks[t.axis]._visualValues};return cS(c,o,i.index,{mode:a})}updateRangeFromParsed(t,r,a,n){const i=a[r.axis];let o=i===null?NaN:i;const c=n&&a._stacks[r.axis];n&&c&&(n.values=c,o=cS(n,i,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,r){const a=this._cachedMeta,n=a._parsed,i=a._sorted&&t===a.iScale,o=n.length,c=this._getOtherScale(t),u=_X(r,a,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:m,max:f}=vX(c);let p,v;function g(){v=n[p];const y=v[c.axis];return!fr(v[t.axis])||m>y||f<y}for(p=0;p<o&&!(!g()&&(this.updateRangeFromParsed(h,t,v,u),i));++p);if(i){for(p=o-1;p>=0;--p)if(!g()){this.updateRangeFromParsed(h,t,v,u);break}}return h}getAllParsedValues(t){const r=this._cachedMeta._parsed,a=[];let n,i,o;for(n=0,i=r.length;n<i;++n)o=r[n][t.axis],fr(o)&&a.push(o);return a}getMaxOverflow(){return!1}getLabelAndValue(t){const r=this._cachedMeta,a=r.iScale,n=r.vScale,i=this.getParsed(t);return{label:a?""+a.getLabelForValue(i[a.axis]):"",value:n?""+n.getLabelForValue(i[n.axis]):""}}_update(t){const r=this._cachedMeta;this.update(t||"default"),r._clip=gX(ht(this.options.clip,pX(r.xScale,r.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,r=this.chart,a=this._cachedMeta,n=a.data||[],i=r.chartArea,o=[],c=this._drawStart||0,u=this._drawCount||n.length-c,h=this.options.drawActiveElementsOnTop;let m;for(a.dataset&&a.dataset.draw(t,i,c,u),m=c;m<c+u;++m){const f=n[m];f.hidden||(f.active&&h?o.push(f):f.draw(t,i))}for(m=0;m<o.length;++m)o[m].draw(t,i)}getStyle(t,r){const a=r?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(a):this.resolveDataElementOptions(t||0,a)}getContext(t,r,a){const n=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];i=o.$context||(o.$context=NX(this.getContext(),t,o)),i.parsed=this.getParsed(t),i.raw=n.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=wX(this.chart.getContext(),this.index)),i.dataset=n,i.index=i.datasetIndex=this.index;return i.active=!!r,i.mode=a,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,r){return this._resolveElementOptions(this.dataElementType.id,r,t)}_resolveElementOptions(t,r="default",a){const n=r==="active",i=this._cachedDataOpts,o=t+"-"+r,c=i[o],u=this.enableOptionSharing&&ym(a);if(c)return hS(c,u);const h=this.chart.config,m=h.datasetElementScopeKeys(this._type,t),f=n?[`${t}Hover`,"hover",t,""]:[t,""],p=h.getOptionScopes(this.getDataset(),m),v=Object.keys(js.elements[t]),g=()=>this.getContext(a,n,r),y=h.resolveNamedOptions(p,v,g,f);return y.$shared&&(y.$shared=u,i[o]=Object.freeze(hS(y,u))),y}_resolveAnimations(t,r,a){const n=this.chart,i=this._cachedDataOpts,o=`animation-${r}`,c=i[o];if(c)return c;let u;if(n.options.animation!==!1){const m=this.chart.config,f=m.datasetAnimationScopeKeys(this._type,r),p=m.getOptionScopes(this.getDataset(),f);u=m.createResolver(p,this.getContext(t,a,r))}const h=new CD(n,u&&u.animations);return u&&u._cacheable&&(i[o]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,r){return!r||Hy(t)||this.chart._animationsDisabled}_getSharedOptions(t,r){const a=this.resolveDataElementOptions(t,r),n=this._sharedOptions,i=this.getSharedOptions(a),o=this.includeOptions(r,i)||i!==n;return this.updateSharedOptions(i,r,a),{sharedOptions:i,includeOptions:o}}updateElement(t,r,a,n){Hy(n)?Object.assign(t,a):this._resolveAnimations(r,n).update(t,a)}updateSharedOptions(t,r,a){t&&!Hy(r)&&this._resolveAnimations(void 0,r).update(t,a)}_setStyle(t,r,a,n){t.active=n;const i=this.getStyle(r,n);this._resolveAnimations(r,a,n).update(t,{options:!n&&this.getSharedOptions(i)||i})}removeHoverStyle(t,r,a){this._setStyle(t,a,"active",!1)}setHoverStyle(t,r,a){this._setStyle(t,a,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const r=this._data,a=this._cachedMeta.data;for(const[c,u,h]of this._syncList)this[c](u,h);this._syncList=[];const n=a.length,i=r.length,o=Math.min(i,n);o&&this.parse(0,o),i>n?this._insertElements(n,i-n,t):i<n&&this._removeElements(i,n-i)}_insertElements(t,r,a=!0){const n=this._cachedMeta,i=n.data,o=t+r;let c;const u=h=>{for(h.length+=r,c=h.length-1;c>=o;c--)h[c]=h[c-r]};for(u(i),c=t;c<o;++c)i[c]=new this.dataElementType;this._parsing&&u(n._parsed),this.parse(t,r),a&&this.updateElements(i,t,r,"reset")}updateElements(t,r,a,n){}_removeElements(t,r){const a=this._cachedMeta;if(this._parsing){const n=a._parsed.splice(t,r);a._stacked&&gh(a,n)}a.data.splice(t,r)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[r,a,n]=t;this[r](a,n)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,r){r&&this._sync(["_removeElements",t,r]);const a=arguments.length-2;a&&this._sync(["_insertElements",t,a])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function kX(s,t){if(!s._cache.$bar){const r=s.getMatchingVisibleMetas(t);let a=[];for(let n=0,i=r.length;n<i;n++)a=a.concat(r[n].controller.getAllParsedValues(s));s._cache.$bar=dD(a.sort((n,i)=>n-i))}return s._cache.$bar}function SX(s){const t=s.iScale,r=kX(t,s.type);let a=t._length,n,i,o,c;const u=()=>{o===32767||o===-32768||(ym(c)&&(a=Math.min(a,Math.abs(o-c)||a)),c=o)};for(n=0,i=r.length;n<i;++n)o=t.getPixelForValue(r[n]),u();for(c=void 0,n=0,i=t.ticks.length;n<i;++n)o=t.getPixelForTick(n),u();return a}function CX(s,t,r,a){const n=r.barThickness;let i,o;return Dt(n)?(i=t.min*r.categoryPercentage,o=r.barPercentage):(i=n*a,o=1),{chunk:i/a,ratio:o,start:t.pixels[s]-i/2}}function TX(s,t,r,a){const n=t.pixels,i=n[s];let o=s>0?n[s-1]:null,c=s<n.length-1?n[s+1]:null;const u=r.categoryPercentage;o===null&&(o=i-(c===null?t.end-t.start:c-i)),c===null&&(c=i+i-o);const h=i-(i-Math.min(o,c))/2*u;return{chunk:Math.abs(c-o)/2*u/a,ratio:r.barPercentage,start:h}}function EX(s,t,r,a){const n=r.parse(s[0],a),i=r.parse(s[1],a),o=Math.min(n,i),c=Math.max(n,i);let u=o,h=c;Math.abs(o)>Math.abs(c)&&(u=c,h=o),t[r.axis]=h,t._custom={barStart:u,barEnd:h,start:n,end:i,min:o,max:c}}function ED(s,t,r,a){return Ls(s)?EX(s,t,r,a):t[r.axis]=r.parse(s,a),t}function mS(s,t,r,a){const n=s.iScale,i=s.vScale,o=n.getLabels(),c=n===i,u=[];let h,m,f,p;for(h=r,m=r+a;h<m;++h)p=t[h],f={},f[n.axis]=c||n.parse(o[h],h),u.push(ED(p,f,i,h));return u}function qy(s){return s&&s.barStart!==void 0&&s.barEnd!==void 0}function AX(s,t,r){return s!==0?_n(s):(t.isHorizontal()?1:-1)*(t.min>=r?1:-1)}function DX(s){let t,r,a,n,i;return s.horizontal?(t=s.base>s.x,r="left",a="right"):(t=s.base<s.y,r="bottom",a="top"),t?(n="end",i="start"):(n="start",i="end"),{start:r,end:a,reverse:t,top:n,bottom:i}}function RX(s,t,r,a){let n=t.borderSkipped;const i={};if(!n){s.borderSkipped=i;return}if(n===!0){s.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:c,reverse:u,top:h,bottom:m}=DX(s);n==="middle"&&r&&(s.enableBorderRadius=!0,(r._top||0)===a?n=h:(r._bottom||0)===a?n=m:(i[xS(m,o,c,u)]=!0,n=h)),i[xS(n,o,c,u)]=!0,s.borderSkipped=i}function xS(s,t,r,a){return a?(s=MX(s,t,r),s=fS(s,r,t)):s=fS(s,t,r),s}function MX(s,t,r){return s===t?r:s===r?t:s}function fS(s,t,r){return s==="start"?t:s==="end"?r:s}function OX(s,{inflateAmount:t},r){s.inflateAmount=t==="auto"?r===1?.33:0:t}class LX extends Rp{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,r,a,n){return mS(t,r,a,n)}parseArrayData(t,r,a,n){return mS(t,r,a,n)}parseObjectData(t,r,a,n){const{iScale:i,vScale:o}=t,{xAxisKey:c="x",yAxisKey:u="y"}=this._parsing,h=i.axis==="x"?c:u,m=o.axis==="x"?c:u,f=[];let p,v,g,y;for(p=a,v=a+n;p<v;++p)y=r[p],g={},g[i.axis]=i.parse(Yo(y,h),p),f.push(ED(Yo(y,m),g,o,p));return f}updateRangeFromParsed(t,r,a,n){super.updateRangeFromParsed(t,r,a,n);const i=a._custom;i&&r===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const r=this._cachedMeta,{iScale:a,vScale:n}=r,i=this.getParsed(t),o=i._custom,c=qy(o)?"["+o.start+", "+o.end+"]":""+n.getLabelForValue(i[n.axis]);return{label:""+a.getLabelForValue(i[a.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,t)}updateElements(t,r,a,n){const i=n==="reset",{index:o,_cachedMeta:{vScale:c}}=this,u=c.getBasePixel(),h=c.isHorizontal(),m=this._getRuler(),{sharedOptions:f,includeOptions:p}=this._getSharedOptions(r,n);for(let v=r;v<r+a;v++){const g=this.getParsed(v),y=i||Dt(g[c.axis])?{base:u,head:u}:this._calculateBarValuePixels(v),w=this._calculateBarIndexPixels(v,m),N=(g._stacks||{})[c.axis],k={horizontal:h,base:y.base,enableBorderRadius:!N||qy(g._custom)||o===N._top||o===N._bottom,x:h?y.head:w.center,y:h?w.center:y.head,height:h?w.size:Math.abs(y.size),width:h?Math.abs(y.size):w.size};p&&(k.options=f||this.resolveDataElementOptions(v,t[v].active?"active":n));const S=k.options||t[v].options;RX(k,S,N,o),OX(k,S,m.ratio),this.updateElement(t[v],v,k,n)}}_getStacks(t,r){const{iScale:a}=this._cachedMeta,n=a.getMatchingVisibleMetas(this._type).filter(m=>m.controller.options.grouped),i=a.options.stacked,o=[],c=this._cachedMeta.controller.getParsed(r),u=c&&c[a.axis],h=m=>{const f=m._parsed.find(v=>v[a.axis]===u),p=f&&f[m.vScale.axis];if(Dt(p)||isNaN(p))return!0};for(const m of n)if(!(r!==void 0&&h(m))&&((i===!1||o.indexOf(m.stack)===-1||i===void 0&&m.stack===void 0)&&o.push(m.stack),m.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,r=this.chart.options.indexAxis;return Object.keys(t).filter(a=>t[a].axis===r).shift()}_getAxis(){const t={},r=this.getFirstScaleIdForIndexAxis();for(const a of this.chart.data.datasets)t[ht(this.chart.options.indexAxis==="x"?a.xAxisID:a.yAxisID,r)]=!0;return Object.keys(t)}_getStackIndex(t,r,a){const n=this._getStacks(t,a),i=r!==void 0?n.indexOf(r):-1;return i===-1?n.length-1:i}_getRuler(){const t=this.options,r=this._cachedMeta,a=r.iScale,n=[];let i,o;for(i=0,o=r.data.length;i<o;++i)n.push(a.getPixelForValue(this.getParsed(i)[a.axis],i));const c=t.barThickness;return{min:c||SX(r),pixels:n,start:a._startPixel,end:a._endPixel,stackCount:this._getStackCount(),scale:a,grouped:t.grouped,ratio:c?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:r,_stacked:a,index:n},options:{base:i,minBarLength:o}}=this,c=i||0,u=this.getParsed(t),h=u._custom,m=qy(h);let f=u[r.axis],p=0,v=a?this.applyStack(r,u,a):f,g,y;v!==f&&(p=v-f,v=f),m&&(f=h.barStart,v=h.barEnd-h.barStart,f!==0&&_n(f)!==_n(h.barEnd)&&(p=0),p+=f);const w=!Dt(i)&&!m?i:p;let N=r.getPixelForValue(w);if(this.chart.getDataVisibility(t)?g=r.getPixelForValue(p+v):g=N,y=g-N,Math.abs(y)<o){y=AX(y,r,c)*o,f===c&&(N-=y/2);const k=r.getPixelForDecimal(0),S=r.getPixelForDecimal(1),_=Math.min(k,S),T=Math.max(k,S);N=Math.max(Math.min(N,T),_),g=N+y,a&&!m&&(u._stacks[r.axis]._visualValues[n]=r.getValueForPixel(g)-r.getValueForPixel(N))}if(N===r.getPixelForValue(c)){const k=_n(y)*r.getLineWidthForValue(c)/2;N+=k,y-=k}return{size:y,base:N,head:g,center:g+y/2}}_calculateBarIndexPixels(t,r){const a=r.scale,n=this.options,i=n.skipNull,o=ht(n.maxBarThickness,1/0);let c,u;const h=this._getAxisCount();if(r.grouped){const m=i?this._getStackCount(t):r.stackCount,f=n.barThickness==="flex"?TX(t,r,n,m*h):CX(t,r,n,m*h),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,v=this._getAxis().indexOf(ht(p,this.getFirstScaleIdForIndexAxis())),g=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0)+v;c=f.start+f.chunk*g+f.chunk/2,u=Math.min(o,f.chunk*f.ratio)}else c=a.getPixelForValue(this.getParsed(t)[a.axis],t),u=Math.min(o,r.min*r.ratio);return{base:c-u/2,head:c+u/2,center:c,size:u}}draw(){const t=this._cachedMeta,r=t.vScale,a=t.data,n=a.length;let i=0;for(;i<n;++i)this.getParsed(i)[r.axis]!==null&&!a[i].hidden&&a[i].draw(this._ctx)}}function PX(s,t,r){let a=1,n=1,i=0,o=0;if(t<ns){const c=s,u=c+t,h=Math.cos(c),m=Math.sin(c),f=Math.cos(u),p=Math.sin(u),v=(S,_,T)=>jm(S,c,u,!0)?1:Math.max(_,_*r,T,T*r),g=(S,_,T)=>jm(S,c,u,!0)?-1:Math.min(_,_*r,T,T*r),y=v(0,h,f),w=v($s,m,p),N=g(Lt,h,f),k=g(Lt+$s,m,p);a=(y-N)/2,n=(w-k)/2,i=-(y+N)/2,o=-(w+k)/2}return{ratioX:a,ratioY:n,offsetX:i,offsetY:o}}class BX extends Rp{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const r=t.data,{labels:{pointStyle:a,textAlign:n,color:i,useBorderRadius:o,borderRadius:c}}=t.legend.options;return r.labels.length&&r.datasets.length?r.labels.map((u,h)=>{const f=t.getDatasetMeta(0).controller.getStyle(h);return{text:u,fillStyle:f.backgroundColor,fontColor:i,hidden:!t.getDataVisibility(h),lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:f.borderWidth,strokeStyle:f.borderColor,textAlign:n,pointStyle:a,borderRadius:o&&(c||f.borderRadius),index:h}}):[]}},onClick(t,r,a){a.chart.toggleDataVisibility(r.index),a.chart.update()}}}};constructor(t,r){super(t,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,r){const a=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=a;else{let i=u=>+a[u];if(jt(a[t])){const{key:u="value"}=this._parsing;i=h=>+Yo(a[h],u)}let o,c;for(o=t,c=t+r;o<c;++o)n._parsed[o]=i(o)}}_getRotation(){return xi(this.options.rotation-90)}_getCircumference(){return xi(this.options.circumference)}_getRotationExtents(){let t=ns,r=-ns;for(let a=0;a<this.chart.data.datasets.length;++a)if(this.chart.isDatasetVisible(a)&&this.chart.getDatasetMeta(a).type===this._type){const n=this.chart.getDatasetMeta(a).controller,i=n._getRotation(),o=n._getCircumference();t=Math.min(t,i),r=Math.max(r,i+o)}return{rotation:t,circumference:r-t}}update(t){const r=this.chart,{chartArea:a}=r,n=this._cachedMeta,i=n.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,c=Math.max((Math.min(a.width,a.height)-o)/2,0),u=Math.min(VG(this.options.cutout,c),1),h=this._getRingWeight(this.index),{circumference:m,rotation:f}=this._getRotationExtents(),{ratioX:p,ratioY:v,offsetX:g,offsetY:y}=PX(f,m,u),w=(a.width-o)/p,N=(a.height-o)/v,k=Math.max(Math.min(w,N)/2,0),S=nD(this.options.radius,k),_=Math.max(S*u,0),T=(S-_)/this._getVisibleDatasetWeightTotal();this.offsetX=g*S,this.offsetY=y*S,n.total=this.calculateTotal(),this.outerRadius=S-T*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-T*h,0),this.updateElements(i,0,i.length,t)}_circumference(t,r){const a=this.options,n=this._cachedMeta,i=this._getCircumference();return r&&a.animation.animateRotate||!this.chart.getDataVisibility(t)||n._parsed[t]===null||n.data[t].hidden?0:this.calculateCircumference(n._parsed[t]*i/ns)}updateElements(t,r,a,n){const i=n==="reset",o=this.chart,c=o.chartArea,h=o.options.animation,m=(c.left+c.right)/2,f=(c.top+c.bottom)/2,p=i&&h.animateScale,v=p?0:this.innerRadius,g=p?0:this.outerRadius,{sharedOptions:y,includeOptions:w}=this._getSharedOptions(r,n);let N=this._getRotation(),k;for(k=0;k<r;++k)N+=this._circumference(k,i);for(k=r;k<r+a;++k){const S=this._circumference(k,i),_=t[k],T={x:m+this.offsetX,y:f+this.offsetY,startAngle:N,endAngle:N+S,circumference:S,outerRadius:g,innerRadius:v};w&&(T.options=y||this.resolveDataElementOptions(k,_.active?"active":n)),N+=S,this.updateElement(_,k,T,n)}}calculateTotal(){const t=this._cachedMeta,r=t.data;let a=0,n;for(n=0;n<r.length;n++){const i=t._parsed[n];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(n)&&!r[n].hidden&&(a+=Math.abs(i))}return a}calculateCircumference(t){const r=this._cachedMeta.total;return r>0&&!isNaN(t)?ns*(Math.abs(t)/r):0}getLabelAndValue(t){const r=this._cachedMeta,a=this.chart,n=a.data.labels||[],i=N1(r._parsed[t],a.options.locale);return{label:n[t]||"",value:i}}getMaxBorderWidth(t){let r=0;const a=this.chart;let n,i,o,c,u;if(!t){for(n=0,i=a.data.datasets.length;n<i;++n)if(a.isDatasetVisible(n)){o=a.getDatasetMeta(n),t=o.data,c=o.controller;break}}if(!t)return 0;for(n=0,i=t.length;n<i;++n)u=c.resolveDataElementOptions(n),u.borderAlign!=="inner"&&(r=Math.max(r,u.borderWidth||0,u.hoverBorderWidth||0));return r}getMaxOffset(t){let r=0;for(let a=0,n=t.length;a<n;++a){const i=this.resolveDataElementOptions(a);r=Math.max(r,i.offset||0,i.hoverOffset||0)}return r}_getRingWeightOffset(t){let r=0;for(let a=0;a<t;++a)this.chart.isDatasetVisible(a)&&(r+=this._getRingWeight(a));return r}_getRingWeight(t){return Math.max(ht(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class FX extends Rp{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const r=this._cachedMeta,{dataset:a,data:n=[],_dataset:i}=r,o=this.chart._animationsDisabled;let{start:c,count:u}=cK(r,n,o);this._drawStart=c,this._drawCount=u,dK(r)&&(c=0,u=n.length),a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!i._decimated,a.points=n;const h=this.resolveDatasetElementOptions(t);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(a,void 0,{animated:!o,options:h},t),this.updateElements(n,c,u,t)}updateElements(t,r,a,n){const i=n==="reset",{iScale:o,vScale:c,_stacked:u,_dataset:h}=this._cachedMeta,{sharedOptions:m,includeOptions:f}=this._getSharedOptions(r,n),p=o.axis,v=c.axis,{spanGaps:g,segment:y}=this.options,w=vm(g)?g:Number.POSITIVE_INFINITY,N=this.chart._animationsDisabled||i||n==="none",k=r+a,S=t.length;let _=r>0&&this.getParsed(r-1);for(let T=0;T<S;++T){const E=t[T],z=N?E:{};if(T<r||T>=k){z.skip=!0;continue}const O=this.getParsed(T),C=Dt(O[v]),A=z[p]=o.getPixelForValue(O[p],T),X=z[v]=i||C?c.getBasePixel():c.getPixelForValue(u?this.applyStack(c,O,u):O[v],T);z.skip=isNaN(A)||isNaN(X)||C,z.stop=T>0&&Math.abs(O[p]-_[p])>w,y&&(z.parsed=O,z.raw=h.data[T]),f&&(z.options=m||this.resolveDataElementOptions(T,E.active?"active":n)),N||this.updateElement(E,T,z,n),_=O}}getMaxOverflow(){const t=this._cachedMeta,r=t.dataset,a=r.options&&r.options.borderWidth||0,n=t.data||[];if(!n.length)return a;const i=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(a,i,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}function bo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class A1{static override(t){Object.assign(A1.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return bo()}parse(){return bo()}format(){return bo()}add(){return bo()}diff(){return bo()}startOf(){return bo()}endOf(){return bo()}}var zX={_date:A1};function IX(s,t,r,a){const{controller:n,data:i,_sorted:o}=s,c=n._cachedMeta.iScale,u=s.dataset&&s.dataset.options?s.dataset.options.spanGaps:null;if(c&&t===c.axis&&t!=="r"&&o&&i.length){const h=c._reversePixels?aK:Ro;if(a){if(n._sharedOptions){const m=i[0],f=typeof m.getRange=="function"&&m.getRange(t);if(f){const p=h(i,t,r-f),v=h(i,t,r+f);return{lo:p.lo,hi:v.hi}}}}else{const m=h(i,t,r);if(u){const{vScale:f}=n._cachedMeta,{_parsed:p}=s,v=p.slice(0,m.lo+1).reverse().findIndex(y=>!Dt(y[f.axis]));m.lo-=Math.max(0,v);const g=p.slice(m.hi).findIndex(y=>!Dt(y[f.axis]));m.hi+=Math.max(0,g)}return m}}return{lo:0,hi:i.length-1}}function Mp(s,t,r,a,n){const i=s.getSortedVisibleDatasetMetas(),o=r[t];for(let c=0,u=i.length;c<u;++c){const{index:h,data:m}=i[c],{lo:f,hi:p}=IX(i[c],t,o,n);for(let v=f;v<=p;++v){const g=m[v];g.skip||a(g,h,v)}}}function $X(s){const t=s.indexOf("x")!==-1,r=s.indexOf("y")!==-1;return function(a,n){const i=t?Math.abs(a.x-n.x):0,o=r?Math.abs(a.y-n.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Wy(s,t,r,a,n){const i=[];return!n&&!s.isPointInArea(t)||Mp(s,r,t,function(c,u,h){!n&&!wm(c,s.chartArea,0)||c.inRange(t.x,t.y,a)&&i.push({element:c,datasetIndex:u,index:h})},!0),i}function UX(s,t,r,a){let n=[];function i(o,c,u){const{startAngle:h,endAngle:m}=o.getProps(["startAngle","endAngle"],a),{angle:f}=oD(o,{x:t.x,y:t.y});jm(f,h,m)&&n.push({element:o,datasetIndex:c,index:u})}return Mp(s,r,t,i),n}function VX(s,t,r,a,n,i){let o=[];const c=$X(r);let u=Number.POSITIVE_INFINITY;function h(m,f,p){const v=m.inRange(t.x,t.y,n);if(a&&!v)return;const g=m.getCenterPoint(n);if(!(!!i||s.isPointInArea(g))&&!v)return;const w=c(t,g);w<u?(o=[{element:m,datasetIndex:f,index:p}],u=w):w===u&&o.push({element:m,datasetIndex:f,index:p})}return Mp(s,r,t,h),o}function Yy(s,t,r,a,n,i){return!i&&!s.isPointInArea(t)?[]:r==="r"&&!a?UX(s,t,r,n):VX(s,t,r,a,n,i)}function pS(s,t,r,a,n){const i=[],o=r==="x"?"inXRange":"inYRange";let c=!1;return Mp(s,r,t,(u,h,m)=>{u[o]&&u[o](t[r],n)&&(i.push({element:u,datasetIndex:h,index:m}),c=c||u.inRange(t.x,t.y,n))}),a&&!c?[]:i}var HX={modes:{index(s,t,r,a){const n=So(t,s),i=r.axis||"x",o=r.includeInvisible||!1,c=r.intersect?Wy(s,n,i,a,o):Yy(s,n,i,!1,a,o),u=[];return c.length?(s.getSortedVisibleDatasetMetas().forEach(h=>{const m=c[0].index,f=h.data[m];f&&!f.skip&&u.push({element:f,datasetIndex:h.index,index:m})}),u):[]},dataset(s,t,r,a){const n=So(t,s),i=r.axis||"xy",o=r.includeInvisible||!1;let c=r.intersect?Wy(s,n,i,a,o):Yy(s,n,i,!1,a,o);if(c.length>0){const u=c[0].datasetIndex,h=s.getDatasetMeta(u).data;c=[];for(let m=0;m<h.length;++m)c.push({element:h[m],datasetIndex:u,index:m})}return c},point(s,t,r,a){const n=So(t,s),i=r.axis||"xy",o=r.includeInvisible||!1;return Wy(s,n,i,a,o)},nearest(s,t,r,a){const n=So(t,s),i=r.axis||"xy",o=r.includeInvisible||!1;return Yy(s,n,i,r.intersect,a,o)},x(s,t,r,a){const n=So(t,s);return pS(s,n,"x",r.intersect,a)},y(s,t,r,a){const n=So(t,s);return pS(s,n,"y",r.intersect,a)}}};const AD=["left","top","right","bottom"];function bh(s,t){return s.filter(r=>r.pos===t)}function gS(s,t){return s.filter(r=>AD.indexOf(r.pos)===-1&&r.box.axis===t)}function yh(s,t){return s.sort((r,a)=>{const n=t?a:r,i=t?r:a;return n.weight===i.weight?n.index-i.index:n.weight-i.weight})}function qX(s){const t=[];let r,a,n,i,o,c;for(r=0,a=(s||[]).length;r<a;++r)n=s[r],{position:i,options:{stack:o,stackWeight:c=1}}=n,t.push({index:r,box:n,pos:i,horizontal:n.isHorizontal(),weight:n.weight,stack:o&&i+o,stackWeight:c});return t}function WX(s){const t={};for(const r of s){const{stack:a,pos:n,stackWeight:i}=r;if(!a||!AD.includes(n))continue;const o=t[a]||(t[a]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return t}function YX(s,t){const r=WX(s),{vBoxMaxWidth:a,hBoxMaxHeight:n}=t;let i,o,c;for(i=0,o=s.length;i<o;++i){c=s[i];const{fullSize:u}=c.box,h=r[c.stack],m=h&&c.stackWeight/h.weight;c.horizontal?(c.width=m?m*a:u&&t.availableWidth,c.height=n):(c.width=a,c.height=m?m*n:u&&t.availableHeight)}return r}function GX(s){const t=qX(s),r=yh(t.filter(h=>h.box.fullSize),!0),a=yh(bh(t,"left"),!0),n=yh(bh(t,"right")),i=yh(bh(t,"top"),!0),o=yh(bh(t,"bottom")),c=gS(t,"x"),u=gS(t,"y");return{fullSize:r,leftAndTop:a.concat(i),rightAndBottom:n.concat(u).concat(o).concat(c),chartArea:bh(t,"chartArea"),vertical:a.concat(n).concat(u),horizontal:i.concat(o).concat(c)}}function bS(s,t,r,a){return Math.max(s[r],t[r])+Math.max(s[a],t[a])}function DD(s,t){s.top=Math.max(s.top,t.top),s.left=Math.max(s.left,t.left),s.bottom=Math.max(s.bottom,t.bottom),s.right=Math.max(s.right,t.right)}function KX(s,t,r,a){const{pos:n,box:i}=r,o=s.maxPadding;if(!jt(n)){r.size&&(s[n]-=r.size);const f=a[r.stack]||{size:0,count:1};f.size=Math.max(f.size,r.horizontal?i.height:i.width),r.size=f.size/f.count,s[n]+=r.size}i.getPadding&&DD(o,i.getPadding());const c=Math.max(0,t.outerWidth-bS(o,s,"left","right")),u=Math.max(0,t.outerHeight-bS(o,s,"top","bottom")),h=c!==s.w,m=u!==s.h;return s.w=c,s.h=u,r.horizontal?{same:h,other:m}:{same:m,other:h}}function XX(s){const t=s.maxPadding;function r(a){const n=Math.max(t[a]-s[a],0);return s[a]+=n,n}s.y+=r("top"),s.x+=r("left"),r("right"),r("bottom")}function ZX(s,t){const r=t.maxPadding;function a(n){const i={left:0,top:0,right:0,bottom:0};return n.forEach(o=>{i[o]=Math.max(t[o],r[o])}),i}return a(s?["left","right"]:["top","bottom"])}function Oh(s,t,r,a){const n=[];let i,o,c,u,h,m;for(i=0,o=s.length,h=0;i<o;++i){c=s[i],u=c.box,u.update(c.width||t.w,c.height||t.h,ZX(c.horizontal,t));const{same:f,other:p}=KX(t,r,c,a);h|=f&&n.length,m=m||p,u.fullSize||n.push(c)}return h&&Oh(n,t,r,a)||m}function rf(s,t,r,a,n){s.top=r,s.left=t,s.right=t+a,s.bottom=r+n,s.width=a,s.height=n}function yS(s,t,r,a){const n=r.padding;let{x:i,y:o}=t;for(const c of s){const u=c.box,h=a[c.stack]||{placed:0,weight:1},m=c.stackWeight/h.weight||1;if(c.horizontal){const f=t.w*m,p=h.size||u.height;ym(h.start)&&(o=h.start),u.fullSize?rf(u,n.left,o,r.outerWidth-n.right-n.left,p):rf(u,t.left+h.placed,o,f,p),h.start=o,h.placed+=f,o=u.bottom}else{const f=t.h*m,p=h.size||u.width;ym(h.start)&&(i=h.start),u.fullSize?rf(u,i,n.top,p,r.outerHeight-n.bottom-n.top):rf(u,i,t.top+h.placed,p,f),h.start=i,h.placed+=f,i=u.right}}t.x=i,t.y=o}var Ca={addBox(s,t){s.boxes||(s.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(r){t.draw(r)}}]},s.boxes.push(t)},removeBox(s,t){const r=s.boxes?s.boxes.indexOf(t):-1;r!==-1&&s.boxes.splice(r,1)},configure(s,t,r){t.fullSize=r.fullSize,t.position=r.position,t.weight=r.weight},update(s,t,r,a){if(!s)return;const n=Ra(s.options.layout.padding),i=Math.max(t-n.width,0),o=Math.max(r-n.height,0),c=GX(s.boxes),u=c.vertical,h=c.horizontal;Ot(s.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const m=u.reduce((y,w)=>w.box.options&&w.box.options.display===!1?y:y+1,0)||1,f=Object.freeze({outerWidth:t,outerHeight:r,padding:n,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/m,hBoxMaxHeight:o/2}),p=Object.assign({},n);DD(p,Ra(a));const v=Object.assign({maxPadding:p,w:i,h:o,x:n.left,y:n.top},n),g=YX(u.concat(h),f);Oh(c.fullSize,v,f,g),Oh(u,v,f,g),Oh(h,v,f,g)&&Oh(u,v,f,g),XX(v),yS(c.leftAndTop,v,f,g),v.x+=v.w,v.y+=v.h,yS(c.rightAndBottom,v,f,g),s.chartArea={left:v.left,top:v.top,right:v.left+v.w,bottom:v.top+v.h,height:v.h,width:v.w},Ot(c.chartArea,y=>{const w=y.box;Object.assign(w,s.chartArea),w.update(v.w,v.h,{left:0,top:0,right:0,bottom:0})})}};class RD{acquireContext(t,r){}releaseContext(t){return!1}addEventListener(t,r,a){}removeEventListener(t,r,a){}getDevicePixelRatio(){return 1}getMaximumSize(t,r,a,n){return r=Math.max(0,r||t.width),a=a||t.height,{width:r,height:Math.max(0,n?Math.floor(r/n):a)}}isAttached(t){return!0}updateConfig(t){}}class QX extends RD{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Ff="$chartjs",JX={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},vS=s=>s===null||s==="";function eZ(s,t){const r=s.style,a=s.getAttribute("height"),n=s.getAttribute("width");if(s[Ff]={initial:{height:a,width:n,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",vS(n)){const i=rS(s,"width");i!==void 0&&(s.width=i)}if(vS(a))if(s.style.height==="")s.height=s.width/(t||2);else{const i=rS(s,"height");i!==void 0&&(s.height=i)}return s}const MD=JK?{passive:!0}:!1;function tZ(s,t,r){s&&s.addEventListener(t,r,MD)}function sZ(s,t,r){s&&s.canvas&&s.canvas.removeEventListener(t,r,MD)}function rZ(s,t){const r=JX[s.type]||s.type,{x:a,y:n}=So(s,t);return{type:r,chart:t,native:s,x:a!==void 0?a:null,y:n!==void 0?n:null}}function dp(s,t){for(const r of s)if(r===t||r.contains(t))return!0}function aZ(s,t,r){const a=s.canvas,n=new MutationObserver(i=>{let o=!1;for(const c of i)o=o||dp(c.addedNodes,a),o=o&&!dp(c.removedNodes,a);o&&r()});return n.observe(document,{childList:!0,subtree:!0}),n}function nZ(s,t,r){const a=s.canvas,n=new MutationObserver(i=>{let o=!1;for(const c of i)o=o||dp(c.removedNodes,a),o=o&&!dp(c.addedNodes,a);o&&r()});return n.observe(document,{childList:!0,subtree:!0}),n}const _m=new Map;let jS=0;function OD(){const s=window.devicePixelRatio;s!==jS&&(jS=s,_m.forEach((t,r)=>{r.currentDevicePixelRatio!==s&&t()}))}function iZ(s,t){_m.size||window.addEventListener("resize",OD),_m.set(s,t)}function lZ(s){_m.delete(s),_m.size||window.removeEventListener("resize",OD)}function oZ(s,t,r){const a=s.canvas,n=a&&E1(a);if(!n)return;const i=hD((c,u)=>{const h=n.clientWidth;r(c,u),h<n.clientWidth&&r()},window),o=new ResizeObserver(c=>{const u=c[0],h=u.contentRect.width,m=u.contentRect.height;h===0&&m===0||i(h,m)});return o.observe(n),iZ(s,i),o}function Gy(s,t,r){r&&r.disconnect(),t==="resize"&&lZ(s)}function cZ(s,t,r){const a=s.canvas,n=hD(i=>{s.ctx!==null&&r(rZ(i,s))},s);return tZ(a,t,n),n}class dZ extends RD{acquireContext(t,r){const a=t&&t.getContext&&t.getContext("2d");return a&&a.canvas===t?(eZ(t,r),a):null}releaseContext(t){const r=t.canvas;if(!r[Ff])return!1;const a=r[Ff].initial;["height","width"].forEach(i=>{const o=a[i];Dt(o)?r.removeAttribute(i):r.setAttribute(i,o)});const n=a.style||{};return Object.keys(n).forEach(i=>{r.style[i]=n[i]}),r.width=r.width,delete r[Ff],!0}addEventListener(t,r,a){this.removeEventListener(t,r);const n=t.$proxies||(t.$proxies={}),o={attach:aZ,detach:nZ,resize:oZ}[r]||cZ;n[r]=o(t,r,a)}removeEventListener(t,r){const a=t.$proxies||(t.$proxies={}),n=a[r];if(!n)return;({attach:Gy,detach:Gy,resize:Gy}[r]||sZ)(t,r,n),a[r]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,r,a,n){return QK(t,r,a,n)}isAttached(t){const r=t&&E1(t);return!!(r&&r.isConnected)}}function uZ(s){return!T1()||typeof OffscreenCanvas<"u"&&s instanceof OffscreenCanvas?QX:dZ}let Ti=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:r,y:a}=this.getProps(["x","y"],t);return{x:r,y:a}}hasValue(){return vm(this.x)&&vm(this.y)}getProps(t,r){const a=this.$animations;if(!r||!a)return this;const n={};return t.forEach(i=>{n[i]=a[i]&&a[i].active()?a[i]._to:this[i]}),n}};function hZ(s,t){const r=s.options.ticks,a=mZ(s),n=Math.min(r.maxTicksLimit||a,a),i=r.major.enabled?fZ(t):[],o=i.length,c=i[0],u=i[o-1],h=[];if(o>n)return pZ(t,h,i,o/n),h;const m=xZ(i,t,n);if(o>0){let f,p;const v=o>1?Math.round((u-c)/(o-1)):null;for(af(t,h,m,Dt(v)?0:c-v,c),f=0,p=o-1;f<p;f++)af(t,h,m,i[f],i[f+1]);return af(t,h,m,u,Dt(v)?t.length:u+v),h}return af(t,h,m),h}function mZ(s){const t=s.options.offset,r=s._tickSize(),a=s._length/r+(t?0:1),n=s._maxLength/r;return Math.floor(Math.min(a,n))}function xZ(s,t,r){const a=gZ(s),n=t.length/r;if(!a)return Math.max(n,1);const i=ZG(a);for(let o=0,c=i.length-1;o<c;o++){const u=i[o];if(u>n)return u}return Math.max(n,1)}function fZ(s){const t=[];let r,a;for(r=0,a=s.length;r<a;r++)s[r].major&&t.push(r);return t}function pZ(s,t,r,a){let n=0,i=r[0],o;for(a=Math.ceil(a),o=0;o<s.length;o++)o===i&&(t.push(s[o]),n++,i=r[n*a])}function af(s,t,r,a,n){const i=ht(a,0),o=Math.min(ht(n,s.length),s.length);let c=0,u,h,m;for(r=Math.ceil(r),n&&(u=n-a,r=u/Math.floor(u/r)),m=i;m<0;)c++,m=Math.round(i+c*r);for(h=Math.max(i,0);h<o;h++)h===m&&(t.push(s[h]),c++,m=Math.round(i+c*r))}function gZ(s){const t=s.length;let r,a;if(t<2)return!1;for(a=s[0],r=1;r<t;++r)if(s[r]-s[r-1]!==a)return!1;return a}const bZ=s=>s==="left"?"right":s==="right"?"left":s,wS=(s,t,r)=>t==="top"||t==="left"?s[t]+r:s[t]-r,NS=(s,t)=>Math.min(t||s,s);function _S(s,t){const r=[],a=s.length/t,n=s.length;let i=0;for(;i<n;i+=a)r.push(s[Math.floor(i)]);return r}function yZ(s,t,r){const a=s.ticks.length,n=Math.min(t,a-1),i=s._startPixel,o=s._endPixel,c=1e-6;let u=s.getPixelForTick(n),h;if(!(r&&(a===1?h=Math.max(u-i,o-u):t===0?h=(s.getPixelForTick(1)-u)/2:h=(u-s.getPixelForTick(n-1))/2,u+=n<t?h:-h,u<i-c||u>o+c)))return u}function vZ(s,t){Ot(s,r=>{const a=r.gc,n=a.length/2;let i;if(n>t){for(i=0;i<n;++i)delete r.data[a[i]];a.splice(0,n)}})}function vh(s){return s.drawTicks?s.tickLength:0}function kS(s,t){if(!s.display)return 0;const r=mr(s.font,t),a=Ra(s.padding);return(Ls(s.text)?s.text.length:1)*r.lineHeight+a.height}function jZ(s,t){return Zo(s,{scale:t,type:"scale"})}function wZ(s,t,r){return Zo(s,{tick:r,index:t,type:"tick"})}function NZ(s,t,r){let a=j1(s);return(r&&t!=="right"||!r&&t==="right")&&(a=bZ(a)),a}function _Z(s,t,r,a){const{top:n,left:i,bottom:o,right:c,chart:u}=s,{chartArea:h,scales:m}=u;let f=0,p,v,g;const y=o-n,w=c-i;if(s.isHorizontal()){if(v=ir(a,i,c),jt(r)){const N=Object.keys(r)[0],k=r[N];g=m[N].getPixelForValue(k)+y-t}else r==="center"?g=(h.bottom+h.top)/2+y-t:g=wS(s,r,t);p=c-i}else{if(jt(r)){const N=Object.keys(r)[0],k=r[N];v=m[N].getPixelForValue(k)-w+t}else r==="center"?v=(h.left+h.right)/2-w+t:v=wS(s,r,t);g=ir(a,o,n),f=r==="left"?-$s:$s}return{titleX:v,titleY:g,maxWidth:p,rotation:f}}class zd extends Ti{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,r){return t}getUserBounds(){let{_userMin:t,_userMax:r,_suggestedMin:a,_suggestedMax:n}=this;return t=dn(t,Number.POSITIVE_INFINITY),r=dn(r,Number.NEGATIVE_INFINITY),a=dn(a,Number.POSITIVE_INFINITY),n=dn(n,Number.NEGATIVE_INFINITY),{min:dn(t,a),max:dn(r,n),minDefined:fr(t),maxDefined:fr(r)}}getMinMax(t){let{min:r,max:a,minDefined:n,maxDefined:i}=this.getUserBounds(),o;if(n&&i)return{min:r,max:a};const c=this.getMatchingVisibleMetas();for(let u=0,h=c.length;u<h;++u)o=c[u].controller.getMinMax(this,t),n||(r=Math.min(r,o.min)),i||(a=Math.max(a,o.max));return r=i&&r>a?a:r,a=n&&r>a?r:a,{min:dn(r,dn(a,r)),max:dn(a,dn(r,a))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Xt(this.options.beforeUpdate,[this])}update(t,r,a){const{beginAtZero:n,grace:i,ticks:o}=this.options,c=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=r,this._margins=a=Object.assign({left:0,right:0,top:0,bottom:0},a),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+a.left+a.right:this.height+a.top+a.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=AK(this,i,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const u=c<this.ticks.length;this._convertTicksToLabels(u?_S(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=hZ(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,r,a;this.isHorizontal()?(r=this.left,a=this.right):(r=this.top,a=this.bottom,t=!t),this._startPixel=r,this._endPixel=a,this._reversePixels=t,this._length=a-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Xt(this.options.afterUpdate,[this])}beforeSetDimensions(){Xt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Xt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Xt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Xt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const r=this.options.ticks;let a,n,i;for(a=0,n=t.length;a<n;a++)i=t[a],i.label=Xt(r.callback,[i.value,a,t],this)}afterTickToLabelConversion(){Xt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Xt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,r=t.ticks,a=NS(this.ticks.length,t.ticks.maxTicksLimit),n=r.minRotation||0,i=r.maxRotation;let o=n,c,u,h;if(!this._isVisible()||!r.display||n>=i||a<=1||!this.isHorizontal()){this.labelRotation=n;return}const m=this._getLabelSizes(),f=m.widest.width,p=m.highest.height,v=hr(this.chart.width-f,0,this.maxWidth);c=t.offset?this.maxWidth/a:v/(a-1),f+6>c&&(c=v/(a-(t.offset?.5:1)),u=this.maxHeight-vh(t.grid)-r.padding-kS(t.title,this.chart.options.font),h=Math.sqrt(f*f+p*p),o=tK(Math.min(Math.asin(hr((m.highest.height+6)/c,-1,1)),Math.asin(hr(u/h,-1,1))-Math.asin(hr(p/h,-1,1)))),o=Math.max(n,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){Xt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Xt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:r,options:{ticks:a,title:n,grid:i}}=this,o=this._isVisible(),c=this.isHorizontal();if(o){const u=kS(n,r.options.font);if(c?(t.width=this.maxWidth,t.height=vh(i)+u):(t.height=this.maxHeight,t.width=vh(i)+u),a.display&&this.ticks.length){const{first:h,last:m,widest:f,highest:p}=this._getLabelSizes(),v=a.padding*2,g=xi(this.labelRotation),y=Math.cos(g),w=Math.sin(g);if(c){const N=a.mirror?0:w*f.width+y*p.height;t.height=Math.min(this.maxHeight,t.height+N+v)}else{const N=a.mirror?0:y*f.width+w*p.height;t.width=Math.min(this.maxWidth,t.width+N+v)}this._calculatePadding(h,m,w,y)}}this._handleMargins(),c?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,r,a,n){const{ticks:{align:i,padding:o},position:c}=this.options,u=this.labelRotation!==0,h=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const m=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,v=0;u?h?(p=n*t.width,v=a*r.height):(p=a*t.height,v=n*r.width):i==="start"?v=r.width:i==="end"?p=t.width:i!=="inner"&&(p=t.width/2,v=r.width/2),this.paddingLeft=Math.max((p-m+o)*this.width/(this.width-m),0),this.paddingRight=Math.max((v-f+o)*this.width/(this.width-f),0)}else{let m=r.height/2,f=t.height/2;i==="start"?(m=0,f=t.height):i==="end"&&(m=r.height,f=0),this.paddingTop=m+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Xt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:r}=this.options;return r==="top"||r==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let r,a;for(r=0,a=t.length;r<a;r++)Dt(t[r].label)&&(t.splice(r,1),a--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const r=this.options.ticks.sampleSize;let a=this.ticks;r<a.length&&(a=_S(a,r)),this._labelSizes=t=this._computeLabelSizes(a,a.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,r,a){const{ctx:n,_longestTextCache:i}=this,o=[],c=[],u=Math.floor(r/NS(r,a));let h=0,m=0,f,p,v,g,y,w,N,k,S,_,T;for(f=0;f<r;f+=u){if(g=t[f].label,y=this._resolveTickFontOptions(f),n.font=w=y.string,N=i[w]=i[w]||{data:{},gc:[]},k=y.lineHeight,S=_=0,!Dt(g)&&!Ls(g))S=Qk(n,N.data,N.gc,S,g),_=k;else if(Ls(g))for(p=0,v=g.length;p<v;++p)T=g[p],!Dt(T)&&!Ls(T)&&(S=Qk(n,N.data,N.gc,S,T),_+=k);o.push(S),c.push(_),h=Math.max(S,h),m=Math.max(_,m)}vZ(i,r);const E=o.indexOf(h),z=c.indexOf(m),O=C=>({width:o[C]||0,height:c[C]||0});return{first:O(0),last:O(r-1),widest:O(E),highest:O(z),widths:o,heights:c}}getLabelForValue(t){return t}getPixelForValue(t,r){return NaN}getValueForPixel(t){}getPixelForTick(t){const r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const r=this._startPixel+t*this._length;return rK(this._alignToPixels?go(this.chart,r,0):r)}getDecimalForPixel(t){const r=(t-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:r}=this;return t<0&&r<0?r:t>0&&r>0?t:0}getContext(t){const r=this.ticks||[];if(t>=0&&t<r.length){const a=r[t];return a.$context||(a.$context=wZ(this.getContext(),t,a))}return this.$context||(this.$context=jZ(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,r=xi(this.labelRotation),a=Math.abs(Math.cos(r)),n=Math.abs(Math.sin(r)),i=this._getLabelSizes(),o=t.autoSkipPadding||0,c=i?i.widest.width+o:0,u=i?i.highest.height+o:0;return this.isHorizontal()?u*a>c*n?c/a:u/n:u*n<c*a?u/a:c/n}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const r=this.axis,a=this.chart,n=this.options,{grid:i,position:o,border:c}=n,u=i.offset,h=this.isHorizontal(),f=this.ticks.length+(u?1:0),p=vh(i),v=[],g=c.setContext(this.getContext()),y=g.display?g.width:0,w=y/2,N=function(ee){return go(a,ee,y)};let k,S,_,T,E,z,O,C,A,X,I,V;if(o==="top")k=N(this.bottom),z=this.bottom-p,C=k-w,X=N(t.top)+w,V=t.bottom;else if(o==="bottom")k=N(this.top),X=t.top,V=N(t.bottom)-w,z=k+w,C=this.top+p;else if(o==="left")k=N(this.right),E=this.right-p,O=k-w,A=N(t.left)+w,I=t.right;else if(o==="right")k=N(this.left),A=t.left,I=N(t.right)-w,E=k+w,O=this.left+p;else if(r==="x"){if(o==="center")k=N((t.top+t.bottom)/2+.5);else if(jt(o)){const ee=Object.keys(o)[0],se=o[ee];k=N(this.chart.scales[ee].getPixelForValue(se))}X=t.top,V=t.bottom,z=k+w,C=z+p}else if(r==="y"){if(o==="center")k=N((t.left+t.right)/2);else if(jt(o)){const ee=Object.keys(o)[0],se=o[ee];k=N(this.chart.scales[ee].getPixelForValue(se))}E=k-w,O=E-p,A=t.left,I=t.right}const R=ht(n.ticks.maxTicksLimit,f),H=Math.max(1,Math.ceil(f/R));for(S=0;S<f;S+=H){const ee=this.getContext(S),se=i.setContext(ee),W=c.setContext(ee),te=se.lineWidth,J=se.color,K=W.dash||[],$=W.dashOffset,ie=se.tickWidth,ne=se.tickColor,oe=se.tickBorderDash||[],ce=se.tickBorderDashOffset;_=yZ(this,S,u),_!==void 0&&(T=go(a,_,te),h?E=O=A=I=T:z=C=X=V=T,v.push({tx1:E,ty1:z,tx2:O,ty2:C,x1:A,y1:X,x2:I,y2:V,width:te,color:J,borderDash:K,borderDashOffset:$,tickWidth:ie,tickColor:ne,tickBorderDash:oe,tickBorderDashOffset:ce}))}return this._ticksLength=f,this._borderValue=k,v}_computeLabelItems(t){const r=this.axis,a=this.options,{position:n,ticks:i}=a,o=this.isHorizontal(),c=this.ticks,{align:u,crossAlign:h,padding:m,mirror:f}=i,p=vh(a.grid),v=p+m,g=f?-m:v,y=-xi(this.labelRotation),w=[];let N,k,S,_,T,E,z,O,C,A,X,I,V="middle";if(n==="top")E=this.bottom-g,z=this._getXAxisLabelAlignment();else if(n==="bottom")E=this.top+g,z=this._getXAxisLabelAlignment();else if(n==="left"){const H=this._getYAxisLabelAlignment(p);z=H.textAlign,T=H.x}else if(n==="right"){const H=this._getYAxisLabelAlignment(p);z=H.textAlign,T=H.x}else if(r==="x"){if(n==="center")E=(t.top+t.bottom)/2+v;else if(jt(n)){const H=Object.keys(n)[0],ee=n[H];E=this.chart.scales[H].getPixelForValue(ee)+v}z=this._getXAxisLabelAlignment()}else if(r==="y"){if(n==="center")T=(t.left+t.right)/2-v;else if(jt(n)){const H=Object.keys(n)[0],ee=n[H];T=this.chart.scales[H].getPixelForValue(ee)}z=this._getYAxisLabelAlignment(p).textAlign}r==="y"&&(u==="start"?V="top":u==="end"&&(V="bottom"));const R=this._getLabelSizes();for(N=0,k=c.length;N<k;++N){S=c[N],_=S.label;const H=i.setContext(this.getContext(N));O=this.getPixelForTick(N)+i.labelOffset,C=this._resolveTickFontOptions(N),A=C.lineHeight,X=Ls(_)?_.length:1;const ee=X/2,se=H.color,W=H.textStrokeColor,te=H.textStrokeWidth;let J=z;o?(T=O,z==="inner"&&(N===k-1?J=this.options.reverse?"left":"right":N===0?J=this.options.reverse?"right":"left":J="center"),n==="top"?h==="near"||y!==0?I=-X*A+A/2:h==="center"?I=-R.highest.height/2-ee*A+A:I=-R.highest.height+A/2:h==="near"||y!==0?I=A/2:h==="center"?I=R.highest.height/2-ee*A:I=R.highest.height-X*A,f&&(I*=-1),y!==0&&!H.showLabelBackdrop&&(T+=A/2*Math.sin(y))):(E=O,I=(1-X)*A/2);let K;if(H.showLabelBackdrop){const $=Ra(H.backdropPadding),ie=R.heights[N],ne=R.widths[N];let oe=I-$.top,ce=0-$.left;switch(V){case"middle":oe-=ie/2;break;case"bottom":oe-=ie;break}switch(z){case"center":ce-=ne/2;break;case"right":ce-=ne;break;case"inner":N===k-1?ce-=ne:N>0&&(ce-=ne/2);break}K={left:ce,top:oe,width:ne+$.width,height:ie+$.height,color:H.backdropColor}}w.push({label:_,font:C,textOffset:I,options:{rotation:y,color:se,strokeColor:W,strokeWidth:te,textAlign:J,textBaseline:V,translation:[T,E],backdrop:K}})}return w}_getXAxisLabelAlignment(){const{position:t,ticks:r}=this.options;if(-xi(this.labelRotation))return t==="top"?"left":"right";let n="center";return r.align==="start"?n="left":r.align==="end"?n="right":r.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:r,ticks:{crossAlign:a,mirror:n,padding:i}}=this.options,o=this._getLabelSizes(),c=t+i,u=o.widest.width;let h,m;return r==="left"?n?(m=this.right+i,a==="near"?h="left":a==="center"?(h="center",m+=u/2):(h="right",m+=u)):(m=this.right-c,a==="near"?h="right":a==="center"?(h="center",m-=u/2):(h="left",m=this.left)):r==="right"?n?(m=this.left+i,a==="near"?h="right":a==="center"?(h="center",m-=u/2):(h="left",m-=u)):(m=this.left+c,a==="near"?h="left":a==="center"?(h="center",m+=u/2):(h="right",m=this.right)):h="right",{textAlign:h,x:m}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:r},left:a,top:n,width:i,height:o}=this;r&&(t.save(),t.fillStyle=r,t.fillRect(a,n,i,o),t.restore())}getLineWidthForValue(t){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const n=this.ticks.findIndex(i=>i.value===t);return n>=0?r.setContext(this.getContext(n)).lineWidth:0}drawGrid(t){const r=this.options.grid,a=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,o;const c=(u,h,m)=>{!m.width||!m.color||(a.save(),a.lineWidth=m.width,a.strokeStyle=m.color,a.setLineDash(m.borderDash||[]),a.lineDashOffset=m.borderDashOffset,a.beginPath(),a.moveTo(u.x,u.y),a.lineTo(h.x,h.y),a.stroke(),a.restore())};if(r.display)for(i=0,o=n.length;i<o;++i){const u=n[i];r.drawOnChartArea&&c({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),r.drawTicks&&c({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:r,options:{border:a,grid:n}}=this,i=a.setContext(this.getContext()),o=a.display?i.width:0;if(!o)return;const c=n.setContext(this.getContext(0)).lineWidth,u=this._borderValue;let h,m,f,p;this.isHorizontal()?(h=go(t,this.left,o)-o/2,m=go(t,this.right,c)+c/2,f=p=u):(f=go(t,this.top,o)-o/2,p=go(t,this.bottom,c)+c/2,h=m=u),r.save(),r.lineWidth=i.width,r.strokeStyle=i.color,r.beginPath(),r.moveTo(h,f),r.lineTo(m,p),r.stroke(),r.restore()}drawLabels(t){if(!this.options.ticks.display)return;const a=this.ctx,n=this._computeLabelArea();n&&Ep(a,n);const i=this.getLabelItems(t);for(const o of i){const c=o.options,u=o.font,h=o.label,m=o.textOffset;Nm(a,h,0,m,u,c)}n&&Ap(a)}drawTitle(){const{ctx:t,options:{position:r,title:a,reverse:n}}=this;if(!a.display)return;const i=mr(a.font),o=Ra(a.padding),c=a.align;let u=i.lineHeight/2;r==="bottom"||r==="center"||jt(r)?(u+=o.bottom,Ls(a.text)&&(u+=i.lineHeight*(a.text.length-1))):u+=o.top;const{titleX:h,titleY:m,maxWidth:f,rotation:p}=_Z(this,u,r,c);Nm(t,a.text,0,0,i,{color:a.color,maxWidth:f,rotation:p,textAlign:NZ(c,r,n),textBaseline:"middle",translation:[h,m]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,r=t.ticks&&t.ticks.z||0,a=ht(t.grid&&t.grid.z,-1),n=ht(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==zd.prototype.draw?[{z:r,draw:i=>{this.draw(i)}}]:[{z:a,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:r,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(t){const r=this.chart.getSortedVisibleDatasetMetas(),a=this.axis+"AxisID",n=[];let i,o;for(i=0,o=r.length;i<o;++i){const c=r[i];c[a]===this.id&&(!t||c.type===t)&&n.push(c)}return n}_resolveTickFontOptions(t){const r=this.options.ticks.setContext(this.getContext(t));return mr(r.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class nf{constructor(t,r,a){this.type=t,this.scope=r,this.override=a,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const r=Object.getPrototypeOf(t);let a;CZ(r)&&(a=this.register(r));const n=this.items,i=t.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in n||(n[i]=t,kZ(t,o,a),this.override&&js.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const r=this.items,a=t.id,n=this.scope;a in r&&delete r[a],n&&a in js[n]&&(delete js[n][a],this.override&&delete Go[a])}}function kZ(s,t,r){const a=bm(Object.create(null),[r?js.get(r):{},js.get(t),s.defaults]);js.set(t,a),s.defaultRoutes&&SZ(t,s.defaultRoutes),s.descriptors&&js.describe(t,s.descriptors)}function SZ(s,t){Object.keys(t).forEach(r=>{const a=r.split("."),n=a.pop(),i=[s].concat(a).join("."),o=t[r].split("."),c=o.pop(),u=o.join(".");js.route(i,n,u,c)})}function CZ(s){return"id"in s&&"defaults"in s}class TZ{constructor(){this.controllers=new nf(Rp,"datasets",!0),this.elements=new nf(Ti,"elements"),this.plugins=new nf(Object,"plugins"),this.scales=new nf(zd,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,r,a){[...r].forEach(n=>{const i=a||this._getRegistryForType(n);a||i.isForType(n)||i===this.plugins&&n.id?this._exec(t,i,n):Ot(n,o=>{const c=a||this._getRegistryForType(o);this._exec(t,c,o)})})}_exec(t,r,a){const n=y1(t);Xt(a["before"+n],[],a),r[t](a),Xt(a["after"+n],[],a)}_getRegistryForType(t){for(let r=0;r<this._typedRegistries.length;r++){const a=this._typedRegistries[r];if(a.isForType(t))return a}return this.plugins}_get(t,r,a){const n=r.get(t);if(n===void 0)throw new Error('"'+t+'" is not a registered '+a+".");return n}}var mn=new TZ;class EZ{constructor(){this._init=void 0}notify(t,r,a,n){if(r==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const i=n?this._descriptors(t).filter(n):this._descriptors(t),o=this._notify(i,t,r,a);return r==="afterDestroy"&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,r,a,n){n=n||{};for(const i of t){const o=i.plugin,c=o[a],u=[r,n,i.options];if(Xt(c,u,o)===!1&&n.cancelable)return!1}return!0}invalidate(){Dt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),r}_createDescriptors(t,r){const a=t&&t.config,n=ht(a.options&&a.options.plugins,{}),i=AZ(a);return n===!1&&!r?[]:RZ(t,i,n,r)}_notifyStateChanges(t){const r=this._oldCache||[],a=this._cache,n=(i,o)=>i.filter(c=>!o.some(u=>c.plugin.id===u.plugin.id));this._notify(n(r,a),t,"stop"),this._notify(n(a,r),t,"start")}}function AZ(s){const t={},r=[],a=Object.keys(mn.plugins.items);for(let i=0;i<a.length;i++)r.push(mn.getPlugin(a[i]));const n=s.plugins||[];for(let i=0;i<n.length;i++){const o=n[i];r.indexOf(o)===-1&&(r.push(o),t[o.id]=!0)}return{plugins:r,localIds:t}}function DZ(s,t){return!t&&s===!1?null:s===!0?{}:s}function RZ(s,{plugins:t,localIds:r},a,n){const i=[],o=s.getContext();for(const c of t){const u=c.id,h=DZ(a[u],n);h!==null&&i.push({plugin:c,options:MZ(s.config,{plugin:c,local:r[u]},h,o)})}return i}function MZ(s,{plugin:t,local:r},a,n){const i=s.pluginScopeKeys(t),o=s.getOptionScopes(a,i);return r&&t.defaults&&o.push(t.defaults),s.createResolver(o,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Uw(s,t){const r=js.datasets[s]||{};return((t.datasets||{})[s]||{}).indexAxis||t.indexAxis||r.indexAxis||"x"}function OZ(s,t){let r=s;return s==="_index_"?r=t:s==="_value_"&&(r=t==="x"?"y":"x"),r}function LZ(s,t){return s===t?"_index_":"_value_"}function SS(s){if(s==="x"||s==="y"||s==="r")return s}function PZ(s){if(s==="top"||s==="bottom")return"x";if(s==="left"||s==="right")return"y"}function Vw(s,...t){if(SS(s))return s;for(const r of t){const a=r.axis||PZ(r.position)||s.length>1&&SS(s[0].toLowerCase());if(a)return a}throw new Error(`Cannot determine type of '${s}' axis. Please provide 'axis' or 'position' option.`)}function CS(s,t,r){if(r[t+"AxisID"]===s)return{axis:t}}function BZ(s,t){if(t.data&&t.data.datasets){const r=t.data.datasets.filter(a=>a.xAxisID===s||a.yAxisID===s);if(r.length)return CS(s,"x",r[0])||CS(s,"y",r[0])}return{}}function FZ(s,t){const r=Go[s.type]||{scales:{}},a=t.scales||{},n=Uw(s.type,t),i=Object.create(null);return Object.keys(a).forEach(o=>{const c=a[o];if(!jt(c))return console.error(`Invalid scale configuration for scale: ${o}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const u=Vw(o,c,BZ(o,s),js.scales[c.type]),h=LZ(u,n),m=r.scales||{};i[o]=Kh(Object.create(null),[{axis:u},c,m[u],m[h]])}),s.data.datasets.forEach(o=>{const c=o.type||s.type,u=o.indexAxis||Uw(c,t),m=(Go[c]||{}).scales||{};Object.keys(m).forEach(f=>{const p=OZ(f,u),v=o[p+"AxisID"]||p;i[v]=i[v]||Object.create(null),Kh(i[v],[{axis:p},a[v],m[f]])})}),Object.keys(i).forEach(o=>{const c=i[o];Kh(c,[js.scales[c.type],js.scale])}),i}function LD(s){const t=s.options||(s.options={});t.plugins=ht(t.plugins,{}),t.scales=FZ(s,t)}function PD(s){return s=s||{},s.datasets=s.datasets||[],s.labels=s.labels||[],s}function zZ(s){return s=s||{},s.data=PD(s.data),LD(s),s}const TS=new Map,BD=new Set;function lf(s,t){let r=TS.get(s);return r||(r=t(),TS.set(s,r),BD.add(r)),r}const jh=(s,t,r)=>{const a=Yo(t,r);a!==void 0&&s.add(a)};class IZ{constructor(t){this._config=zZ(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=PD(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),LD(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return lf(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,r){return lf(`${t}.transition.${r}`,()=>[[`datasets.${t}.transitions.${r}`,`transitions.${r}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,r){return lf(`${t}-${r}`,()=>[[`datasets.${t}.elements.${r}`,`datasets.${t}`,`elements.${r}`,""]])}pluginScopeKeys(t){const r=t.id,a=this.type;return lf(`${a}-plugin-${r}`,()=>[[`plugins.${r}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,r){const a=this._scopeCache;let n=a.get(t);return(!n||r)&&(n=new Map,a.set(t,n)),n}getOptionScopes(t,r,a){const{options:n,type:i}=this,o=this._cachedScopes(t,a),c=o.get(r);if(c)return c;const u=new Set;r.forEach(m=>{t&&(u.add(t),m.forEach(f=>jh(u,t,f))),m.forEach(f=>jh(u,n,f)),m.forEach(f=>jh(u,Go[i]||{},f)),m.forEach(f=>jh(u,js,f)),m.forEach(f=>jh(u,Iw,f))});const h=Array.from(u);return h.length===0&&h.push(Object.create(null)),BD.has(r)&&o.set(r,h),h}chartOptionScopes(){const{options:t,type:r}=this;return[t,Go[r]||{},js.datasets[r]||{},{type:r},js,Iw]}resolveNamedOptions(t,r,a,n=[""]){const i={$shared:!0},{resolver:o,subPrefixes:c}=ES(this._resolverCache,t,n);let u=o;if(UZ(o,r)){i.$shared=!1,a=Ml(a)?a():a;const h=this.createResolver(t,a,c);u=Nd(o,a,h)}for(const h of r)i[h]=u[h];return i}createResolver(t,r,a=[""],n){const{resolver:i}=ES(this._resolverCache,t,a);return jt(r)?Nd(i,r,void 0,n):i}}function ES(s,t,r){let a=s.get(t);a||(a=new Map,s.set(t,a));const n=r.join();let i=a.get(n);return i||(i={resolver:k1(t,r),subPrefixes:r.filter(c=>!c.toLowerCase().includes("hover"))},a.set(n,i)),i}const $Z=s=>jt(s)&&Object.getOwnPropertyNames(s).some(t=>Ml(s[t]));function UZ(s,t){const{isScriptable:r,isIndexable:a}=pD(s);for(const n of t){const i=r(n),o=a(n),c=(o||i)&&s[n];if(i&&(Ml(c)||$Z(c))||o&&Ls(c))return!0}return!1}var VZ="4.5.1";const HZ=["top","bottom","left","right","chartArea"];function AS(s,t){return s==="top"||s==="bottom"||HZ.indexOf(s)===-1&&t==="x"}function DS(s,t){return function(r,a){return r[s]===a[s]?r[t]-a[t]:r[s]-a[s]}}function RS(s){const t=s.chart,r=t.options.animation;t.notifyPlugins("afterRender"),Xt(r&&r.onComplete,[s],t)}function qZ(s){const t=s.chart,r=t.options.animation;Xt(r&&r.onProgress,[s],t)}function FD(s){return T1()&&typeof s=="string"?s=document.getElementById(s):s&&s.length&&(s=s[0]),s&&s.canvas&&(s=s.canvas),s}const zf={},MS=s=>{const t=FD(s);return Object.values(zf).filter(r=>r.canvas===t).pop()};function WZ(s,t,r){const a=Object.keys(s);for(const n of a){const i=+n;if(i>=t){const o=s[n];delete s[n],(r>0||i>t)&&(s[i+r]=o)}}}function YZ(s,t,r,a){return!r||s.type==="mouseout"?null:a?t:s}let Im=class{static defaults=js;static instances=zf;static overrides=Go;static registry=mn;static version=VZ;static getChart=MS;static register(...t){mn.add(...t),OS()}static unregister(...t){mn.remove(...t),OS()}constructor(t,r){const a=this.config=new IZ(r),n=FD(t),i=MS(n);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=a.createResolver(a.chartOptionScopes(),this.getContext());this.platform=new(a.platform||uZ(n)),this.platform.updateConfig(a);const c=this.platform.acquireContext(n,o.aspectRatio),u=c&&c.canvas,h=u&&u.height,m=u&&u.width;if(this.id=UG(),this.ctx=c,this.canvas=u,this.width=m,this.height=h,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new EZ,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=lK(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],zf[this.id]=this,!c||!u){console.error("Failed to create chart: can't acquire context from the given item");return}oi.listen(this,"complete",RS),oi.listen(this,"progress",qZ),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:r},width:a,height:n,_aspectRatio:i}=this;return Dt(t)?r&&i?i:n?a/n:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return mn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():sS(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Jk(this.canvas,this.ctx),this}stop(){return oi.stop(this),this}resize(t,r){oi.running(this)?this._resizeBeforeDraw={width:t,height:r}:this._resize(t,r)}_resize(t,r){const a=this.options,n=this.canvas,i=a.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(n,t,r,i),c=a.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,sS(this,c,!0)&&(this.notifyPlugins("resize",{size:o}),Xt(a.onResize,[this,o],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){const r=this.options.scales||{};Ot(r,(a,n)=>{a.id=n})}buildOrUpdateScales(){const t=this.options,r=t.scales,a=this.scales,n=Object.keys(a).reduce((o,c)=>(o[c]=!1,o),{});let i=[];r&&(i=i.concat(Object.keys(r).map(o=>{const c=r[o],u=Vw(o,c),h=u==="r",m=u==="x";return{options:c,dposition:h?"chartArea":m?"bottom":"left",dtype:h?"radialLinear":m?"category":"linear"}}))),Ot(i,o=>{const c=o.options,u=c.id,h=Vw(u,c),m=ht(c.type,o.dtype);(c.position===void 0||AS(c.position,h)!==AS(o.dposition))&&(c.position=o.dposition),n[u]=!0;let f=null;if(u in a&&a[u].type===m)f=a[u];else{const p=mn.getScale(m);f=new p({id:u,type:m,ctx:this.ctx,chart:this}),a[f.id]=f}f.init(c,t)}),Ot(n,(o,c)=>{o||delete a[c]}),Ot(a,o=>{Ca.configure(this,o,o.options),Ca.addBox(this,o)})}_updateMetasets(){const t=this._metasets,r=this.data.datasets.length,a=t.length;if(t.sort((n,i)=>n.index-i.index),a>r){for(let n=r;n<a;++n)this._destroyDatasetMeta(n);t.splice(r,a-r)}this._sortedMetasets=t.slice(0).sort(DS("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:r}}=this;t.length>r.length&&delete this._stacks,t.forEach((a,n)=>{r.filter(i=>i===a._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const t=[],r=this.data.datasets;let a,n;for(this._removeUnreferencedMetasets(),a=0,n=r.length;a<n;a++){const i=r[a];let o=this.getDatasetMeta(a);const c=i.type||this.config.type;if(o.type&&o.type!==c&&(this._destroyDatasetMeta(a),o=this.getDatasetMeta(a)),o.type=c,o.indexAxis=i.indexAxis||Uw(c,this.options),o.order=i.order||0,o.index=a,o.label=""+i.label,o.visible=this.isDatasetVisible(a),o.controller)o.controller.updateIndex(a),o.controller.linkScales();else{const u=mn.getController(c),{datasetElementType:h,dataElementType:m}=js.datasets[c];Object.assign(u,{dataElementType:mn.getElement(m),datasetElementType:h&&mn.getElement(h)}),o.controller=new u(this,a),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Ot(this.data.datasets,(t,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const r=this.config;r.update();const a=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!a.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let h=0,m=this.data.datasets.length;h<m;h++){const{controller:f}=this.getDatasetMeta(h),p=!n&&i.indexOf(f)===-1;f.buildOrUpdateElements(p),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=a.layout.autoPadding?o:0,this._updateLayout(o),n||Ot(i,h=>{h.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(DS("z","_idx"));const{_active:c,_lastEvent:u}=this;u?this._eventHandler(u,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){Ot(this.scales,t=>{Ca.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,r=new Set(Object.keys(this._listeners)),a=new Set(t.events);(!Vk(r,a)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,r=this._getUniformDataChanges()||[];for(const{method:a,start:n,count:i}of r){const o=a==="_removeElements"?-i:i;WZ(t,n,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const r=this.data.datasets.length,a=i=>new Set(t.filter(o=>o[0]===i).map((o,c)=>c+","+o.splice(1).join(","))),n=a(0);for(let i=1;i<r;i++)if(!Vk(n,a(i)))return;return Array.from(n).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ca.update(this,this.width,this.height,t);const r=this.chartArea,a=r.width<=0||r.height<=0;this._layers=[],Ot(this.boxes,n=>{a&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,i)=>{n._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let r=0,a=this.data.datasets.length;r<a;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,a=this.data.datasets.length;r<a;++r)this._updateDataset(r,Ml(t)?t({datasetIndex:r}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,r){const a=this.getDatasetMeta(t),n={meta:a,index:t,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(a.controller._update(r),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(oi.has(this)?this.attached&&!oi.running(this)&&oi.start(this):(this.draw(),RS({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:a,height:n}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(a,n)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const r=this._layers;for(t=0;t<r.length&&r[t].z<=0;++t)r[t].draw(this.chartArea);for(this._drawDatasets();t<r.length;++t)r[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const r=this._sortedMetasets,a=[];let n,i;for(n=0,i=r.length;n<i;++n){const o=r[n];(!t||o.visible)&&a.push(o)}return a}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let r=t.length-1;r>=0;--r)this._drawDataset(t[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const r=this.ctx,a={meta:t,index:t.index,cancelable:!0},n=SD(this,t);this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(n&&Ep(r,n),t.controller.draw(),n&&Ap(r),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(t){return wm(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,r,a,n){const i=HX.modes[r];return typeof i=="function"?i(this,t,a,n):[]}getDatasetMeta(t){const r=this.data.datasets[t],a=this._metasets;let n=a.filter(i=>i&&i._dataset===r).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:t,_dataset:r,_parsed:[],_sorted:!1},a.push(n)),n}getContext(){return this.$context||(this.$context=Zo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const r=this.data.datasets[t];if(!r)return!1;const a=this.getDatasetMeta(t);return typeof a.hidden=="boolean"?!a.hidden:!r.hidden}setDatasetVisibility(t,r){const a=this.getDatasetMeta(t);a.hidden=!r}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,r,a){const n=a?"show":"hide",i=this.getDatasetMeta(t),o=i.controller._resolveAnimations(void 0,n);ym(r)?(i.data[r].hidden=!a,this.update()):(this.setDatasetVisibility(t,a),o.update(i,{visible:a}),this.update(c=>c.datasetIndex===t?n:void 0))}hide(t,r){this._updateVisibility(t,r,!1)}show(t,r){this._updateVisibility(t,r,!0)}_destroyDatasetMeta(t){const r=this._metasets[t];r&&r.controller&&r.controller._destroy(),delete this._metasets[t]}_stop(){let t,r;for(this.stop(),oi.remove(this),t=0,r=this.data.datasets.length;t<r;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:r}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Jk(t,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete zf[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,r=this.platform,a=(i,o)=>{r.addEventListener(this,i,o),t[i]=o},n=(i,o,c)=>{i.offsetX=o,i.offsetY=c,this._eventHandler(i)};Ot(this.options.events,i=>a(i,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,r=this.platform,a=(u,h)=>{r.addEventListener(this,u,h),t[u]=h},n=(u,h)=>{t[u]&&(r.removeEventListener(this,u,h),delete t[u])},i=(u,h)=>{this.canvas&&this.resize(u,h)};let o;const c=()=>{n("attach",c),this.attached=!0,this.resize(),a("resize",i),a("detach",o)};o=()=>{this.attached=!1,n("resize",i),this._stop(),this._resize(0,0),a("attach",c)},r.isAttached(this.canvas)?c():o()}unbindEvents(){Ot(this._listeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._listeners={},Ot(this._responsiveListeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,r,a){const n=a?"set":"remove";let i,o,c,u;for(r==="dataset"&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+n+"DatasetHoverStyle"]()),c=0,u=t.length;c<u;++c){o=t[c];const h=o&&this.getDatasetMeta(o.datasetIndex).controller;h&&h[n+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const r=this._active||[],a=t.map(({datasetIndex:i,index:o})=>{const c=this.getDatasetMeta(i);if(!c)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:c.data[o],index:o}});!np(a,r)&&(this._active=a,this._lastEvent=null,this._updateHoverStyles(a,r))}notifyPlugins(t,r,a){return this._plugins.notify(this,t,r,a)}isPluginEnabled(t){return this._plugins._cache.filter(r=>r.plugin.id===t).length===1}_updateHoverStyles(t,r,a){const n=this.options.hover,i=(u,h)=>u.filter(m=>!h.some(f=>m.datasetIndex===f.datasetIndex&&m.index===f.index)),o=i(r,t),c=a?t:i(t,r);o.length&&this.updateHoverStyle(o,n.mode,!1),c.length&&n.mode&&this.updateHoverStyle(c,n.mode,!0)}_eventHandler(t,r){const a={event:t,replay:r,cancelable:!0,inChartArea:this.isPointInArea(t)},n=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",a,n)===!1)return;const i=this._handleEvent(t,r,a.inChartArea);return a.cancelable=!1,this.notifyPlugins("afterEvent",a,n),(i||a.changed)&&this.render(),this}_handleEvent(t,r,a){const{_active:n=[],options:i}=this,o=r,c=this._getActiveElements(t,n,a,o),u=GG(t),h=YZ(t,this._lastEvent,a,u);a&&(this._lastEvent=null,Xt(i.onHover,[t,c,this],this),u&&Xt(i.onClick,[t,c,this],this));const m=!np(c,n);return(m||r)&&(this._active=c,this._updateHoverStyles(c,n,r)),this._lastEvent=h,m}_getActiveElements(t,r,a,n){if(t.type==="mouseout")return[];if(!a)return r;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,n)}};function OS(){return Ot(Im.instances,s=>s._plugins.invalidate())}function GZ(s,t,r){const{startAngle:a,x:n,y:i,outerRadius:o,innerRadius:c,options:u}=t,{borderWidth:h,borderJoinStyle:m}=u,f=Math.min(h/o,ta(a-r));if(s.beginPath(),s.arc(n,i,o-h/2,a+f/2,r-f/2),c>0){const p=Math.min(h/c,ta(a-r));s.arc(n,i,c+h/2,r-p/2,a+p/2,!0)}else{const p=Math.min(h/2,o*ta(a-r));if(m==="round")s.arc(n,i,p,r-Lt/2,a+Lt/2,!0);else if(m==="bevel"){const v=2*p*p,g=-v*Math.cos(r+Lt/2)+n,y=-v*Math.sin(r+Lt/2)+i,w=v*Math.cos(a+Lt/2)+n,N=v*Math.sin(a+Lt/2)+i;s.lineTo(g,y),s.lineTo(w,N)}}s.closePath(),s.moveTo(0,0),s.rect(0,0,s.canvas.width,s.canvas.height),s.clip("evenodd")}function KZ(s,t,r){const{startAngle:a,pixelMargin:n,x:i,y:o,outerRadius:c,innerRadius:u}=t;let h=n/c;s.beginPath(),s.arc(i,o,c,a-h,r+h),u>n?(h=n/u,s.arc(i,o,u,r+h,a-h,!0)):s.arc(i,o,n,r+$s,a-$s),s.closePath(),s.clip()}function XZ(s){return _1(s,["outerStart","outerEnd","innerStart","innerEnd"])}function ZZ(s,t,r,a){const n=XZ(s.options.borderRadius),i=(r-t)/2,o=Math.min(i,a*t/2),c=u=>{const h=(r-Math.min(i,u))*a/2;return hr(u,0,Math.min(i,h))};return{outerStart:c(n.outerStart),outerEnd:c(n.outerEnd),innerStart:hr(n.innerStart,0,o),innerEnd:hr(n.innerEnd,0,o)}}function Hc(s,t,r,a){return{x:r+s*Math.cos(t),y:a+s*Math.sin(t)}}function up(s,t,r,a,n,i){const{x:o,y:c,startAngle:u,pixelMargin:h,innerRadius:m}=t,f=Math.max(t.outerRadius+a+r-h,0),p=m>0?m+a+r+h:0;let v=0;const g=n-u;if(a){const H=m>0?m-a:0,ee=f>0?f-a:0,se=(H+ee)/2,W=se!==0?g*se/(se+a):g;v=(g-W)/2}const y=Math.max(.001,g*f-r/Lt)/f,w=(g-y)/2,N=u+w+v,k=n-w-v,{outerStart:S,outerEnd:_,innerStart:T,innerEnd:E}=ZZ(t,p,f,k-N),z=f-S,O=f-_,C=N+S/z,A=k-_/O,X=p+T,I=p+E,V=N+T/X,R=k-E/I;if(s.beginPath(),i){const H=(C+A)/2;if(s.arc(o,c,f,C,H),s.arc(o,c,f,H,A),_>0){const te=Hc(O,A,o,c);s.arc(te.x,te.y,_,A,k+$s)}const ee=Hc(I,k,o,c);if(s.lineTo(ee.x,ee.y),E>0){const te=Hc(I,R,o,c);s.arc(te.x,te.y,E,k+$s,R+Math.PI)}const se=(k-E/p+(N+T/p))/2;if(s.arc(o,c,p,k-E/p,se,!0),s.arc(o,c,p,se,N+T/p,!0),T>0){const te=Hc(X,V,o,c);s.arc(te.x,te.y,T,V+Math.PI,N-$s)}const W=Hc(z,N,o,c);if(s.lineTo(W.x,W.y),S>0){const te=Hc(z,C,o,c);s.arc(te.x,te.y,S,N-$s,C)}}else{s.moveTo(o,c);const H=Math.cos(C)*f+o,ee=Math.sin(C)*f+c;s.lineTo(H,ee);const se=Math.cos(A)*f+o,W=Math.sin(A)*f+c;s.lineTo(se,W)}s.closePath()}function QZ(s,t,r,a,n){const{fullCircles:i,startAngle:o,circumference:c}=t;let u=t.endAngle;if(i){up(s,t,r,a,u,n);for(let h=0;h<i;++h)s.fill();isNaN(c)||(u=o+(c%ns||ns))}return up(s,t,r,a,u,n),s.fill(),u}function JZ(s,t,r,a,n){const{fullCircles:i,startAngle:o,circumference:c,options:u}=t,{borderWidth:h,borderJoinStyle:m,borderDash:f,borderDashOffset:p,borderRadius:v}=u,g=u.borderAlign==="inner";if(!h)return;s.setLineDash(f||[]),s.lineDashOffset=p,g?(s.lineWidth=h*2,s.lineJoin=m||"round"):(s.lineWidth=h,s.lineJoin=m||"bevel");let y=t.endAngle;if(i){up(s,t,r,a,y,n);for(let w=0;w<i;++w)s.stroke();isNaN(c)||(y=o+(c%ns||ns))}g&&KZ(s,t,y),u.selfJoin&&y-o>=Lt&&v===0&&m!=="miter"&&GZ(s,t,y),i||(up(s,t,r,a,y,n),s.stroke())}class zD extends Ti{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,r,a){const n=this.getProps(["x","y"],a),{angle:i,distance:o}=oD(n,{x:t,y:r}),{startAngle:c,endAngle:u,innerRadius:h,outerRadius:m,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],a),p=(this.options.spacing+this.options.borderWidth)/2,v=ht(f,u-c),g=jm(i,c,u)&&c!==u,y=v>=ns||g,w=fi(o,h+p,m+p);return y&&w}getCenterPoint(t){const{x:r,y:a,startAngle:n,endAngle:i,innerRadius:o,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:u,spacing:h}=this.options,m=(n+i)/2,f=(o+c+h+u)/2;return{x:r+Math.cos(m)*f,y:a+Math.sin(m)*f}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:r,circumference:a}=this,n=(r.offset||0)/4,i=(r.spacing||0)/2,o=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=a>ns?Math.floor(a/ns):0,a===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const c=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(c)*n,Math.sin(c)*n);const u=1-Math.sin(Math.min(Lt,a||0)),h=n*u;t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,QZ(t,this,h,i,o),JZ(t,this,h,i,o),t.restore()}}function ID(s,t,r=t){s.lineCap=ht(r.borderCapStyle,t.borderCapStyle),s.setLineDash(ht(r.borderDash,t.borderDash)),s.lineDashOffset=ht(r.borderDashOffset,t.borderDashOffset),s.lineJoin=ht(r.borderJoinStyle,t.borderJoinStyle),s.lineWidth=ht(r.borderWidth,t.borderWidth),s.strokeStyle=ht(r.borderColor,t.borderColor)}function eQ(s,t,r){s.lineTo(r.x,r.y)}function tQ(s){return s.stepped?jK:s.tension||s.cubicInterpolationMode==="monotone"?wK:eQ}function $D(s,t,r={}){const a=s.length,{start:n=0,end:i=a-1}=r,{start:o,end:c}=t,u=Math.max(n,o),h=Math.min(i,c),m=n<o&&i<o||n>c&&i>c;return{count:a,start:u,loop:t.loop,ilen:h<u&&!m?a+h-u:h-u}}function sQ(s,t,r,a){const{points:n,options:i}=t,{count:o,start:c,loop:u,ilen:h}=$D(n,r,a),m=tQ(i);let{move:f=!0,reverse:p}=a||{},v,g,y;for(v=0;v<=h;++v)g=n[(c+(p?h-v:v))%o],!g.skip&&(f?(s.moveTo(g.x,g.y),f=!1):m(s,y,g,p,i.stepped),y=g);return u&&(g=n[(c+(p?h:0))%o],m(s,y,g,p,i.stepped)),!!u}function rQ(s,t,r,a){const n=t.points,{count:i,start:o,ilen:c}=$D(n,r,a),{move:u=!0,reverse:h}=a||{};let m=0,f=0,p,v,g,y,w,N;const k=_=>(o+(h?c-_:_))%i,S=()=>{y!==w&&(s.lineTo(m,w),s.lineTo(m,y),s.lineTo(m,N))};for(u&&(v=n[k(0)],s.moveTo(v.x,v.y)),p=0;p<=c;++p){if(v=n[k(p)],v.skip)continue;const _=v.x,T=v.y,E=_|0;E===g?(T<y?y=T:T>w&&(w=T),m=(f*m+_)/++f):(S(),s.lineTo(_,T),g=E,f=0,y=w=T),N=T}S()}function Hw(s){const t=s.options,r=t.borderDash&&t.borderDash.length;return!s._decimated&&!s._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!r?rQ:sQ}function aQ(s){return s.stepped?eX:s.tension||s.cubicInterpolationMode==="monotone"?tX:Co}function nQ(s,t,r,a){let n=t._path;n||(n=t._path=new Path2D,t.path(n,r,a)&&n.closePath()),ID(s,t.options),s.stroke(n)}function iQ(s,t,r,a){const{segments:n,options:i}=t,o=Hw(t);for(const c of n)ID(s,i,c.style),s.beginPath(),o(s,t,c,{start:r,end:r+a-1})&&s.closePath(),s.stroke()}const lQ=typeof Path2D=="function";function oQ(s,t,r,a){lQ&&!t.options.segment?nQ(s,t,r,a):iQ(s,t,r,a)}class $m extends Ti{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,r){const a=this.options;if((a.tension||a.cubicInterpolationMode==="monotone")&&!a.stepped&&!this._pointsUpdated){const n=a.spanGaps?this._loop:this._fullLoop;WK(this._points,a,t,n,r),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=lX(this,this.options.segment))}first(){const t=this.segments,r=this.points;return t.length&&r[t[0].start]}last(){const t=this.segments,r=this.points,a=t.length;return a&&r[t[a-1].end]}interpolate(t,r){const a=this.options,n=t[r],i=this.points,o=kD(this,{property:r,start:n,end:n});if(!o.length)return;const c=[],u=aQ(a);let h,m;for(h=0,m=o.length;h<m;++h){const{start:f,end:p}=o[h],v=i[f],g=i[p];if(v===g){c.push(v);continue}const y=Math.abs((n-v[r])/(g[r]-v[r])),w=u(v,g,y,a.stepped);w[r]=t[r],c.push(w)}return c.length===1?c[0]:c}pathSegment(t,r,a){return Hw(this)(t,this,r,a)}path(t,r,a){const n=this.segments,i=Hw(this);let o=this._loop;r=r||0,a=a||this.points.length-r;for(const c of n)o&=i(t,this,c,{start:r,end:r+a-1});return!!o}draw(t,r,a,n){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),oQ(t,this,a,n),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function LS(s,t,r,a){const n=s.options,{[r]:i}=s.getProps([r],a);return Math.abs(t-i)<n.radius+n.hitRadius}class UD extends Ti{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,r,a){const n=this.options,{x:i,y:o}=this.getProps(["x","y"],a);return Math.pow(t-i,2)+Math.pow(r-o,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(t,r){return LS(this,t,"x",r)}inYRange(t,r){return LS(this,t,"y",r)}getCenterPoint(t){const{x:r,y:a}=this.getProps(["x","y"],t);return{x:r,y:a}}size(t){t=t||this.options||{};let r=t.radius||0;r=Math.max(r,r&&t.hoverRadius||0);const a=r&&t.borderWidth||0;return(r+a)*2}draw(t,r){const a=this.options;this.skip||a.radius<.1||!wm(this,r,this.size(a)/2)||(t.strokeStyle=a.borderColor,t.lineWidth=a.borderWidth,t.fillStyle=a.backgroundColor,$w(t,a,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function VD(s,t){const{x:r,y:a,base:n,width:i,height:o}=s.getProps(["x","y","base","width","height"],t);let c,u,h,m,f;return s.horizontal?(f=o/2,c=Math.min(r,n),u=Math.max(r,n),h=a-f,m=a+f):(f=i/2,c=r-f,u=r+f,h=Math.min(a,n),m=Math.max(a,n)),{left:c,top:h,right:u,bottom:m}}function jl(s,t,r,a){return s?0:hr(t,r,a)}function cQ(s,t,r){const a=s.options.borderWidth,n=s.borderSkipped,i=fD(a);return{t:jl(n.top,i.top,0,r),r:jl(n.right,i.right,0,t),b:jl(n.bottom,i.bottom,0,r),l:jl(n.left,i.left,0,t)}}function dQ(s,t,r){const{enableBorderRadius:a}=s.getProps(["enableBorderRadius"]),n=s.options.borderRadius,i=od(n),o=Math.min(t,r),c=s.borderSkipped,u=a||jt(n);return{topLeft:jl(!u||c.top||c.left,i.topLeft,0,o),topRight:jl(!u||c.top||c.right,i.topRight,0,o),bottomLeft:jl(!u||c.bottom||c.left,i.bottomLeft,0,o),bottomRight:jl(!u||c.bottom||c.right,i.bottomRight,0,o)}}function uQ(s){const t=VD(s),r=t.right-t.left,a=t.bottom-t.top,n=cQ(s,r/2,a/2),i=dQ(s,r/2,a/2);return{outer:{x:t.left,y:t.top,w:r,h:a,radius:i},inner:{x:t.left+n.l,y:t.top+n.t,w:r-n.l-n.r,h:a-n.t-n.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,i.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(n.b,n.r))}}}}function Ky(s,t,r,a){const n=t===null,i=r===null,c=s&&!(n&&i)&&VD(s,a);return c&&(n||fi(t,c.left,c.right))&&(i||fi(r,c.top,c.bottom))}function hQ(s){return s.topLeft||s.topRight||s.bottomLeft||s.bottomRight}function mQ(s,t){s.rect(t.x,t.y,t.w,t.h)}function Xy(s,t,r={}){const a=s.x!==r.x?-t:0,n=s.y!==r.y?-t:0,i=(s.x+s.w!==r.x+r.w?t:0)-a,o=(s.y+s.h!==r.y+r.h?t:0)-n;return{x:s.x+a,y:s.y+n,w:s.w+i,h:s.h+o,radius:s.radius}}class HD extends Ti{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:r,options:{borderColor:a,backgroundColor:n}}=this,{inner:i,outer:o}=uQ(this),c=hQ(o.radius)?op:mQ;t.save(),(o.w!==i.w||o.h!==i.h)&&(t.beginPath(),c(t,Xy(o,r,i)),t.clip(),c(t,Xy(i,-r,o)),t.fillStyle=a,t.fill("evenodd")),t.beginPath(),c(t,Xy(i,r)),t.fillStyle=n,t.fill(),t.restore()}inRange(t,r,a){return Ky(this,t,r,a)}inXRange(t,r){return Ky(this,t,null,r)}inYRange(t,r){return Ky(this,null,t,r)}getCenterPoint(t){const{x:r,y:a,base:n,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(r+n)/2:r,y:i?a:(a+n)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}function xQ(s,t,r){const a=s.segments,n=s.points,i=t.points,o=[];for(const c of a){let{start:u,end:h}=c;h=Op(u,h,n);const m=qw(r,n[u],n[h],c.loop);if(!t.segments){o.push({source:c,target:m,start:n[u],end:n[h]});continue}const f=kD(t,m);for(const p of f){const v=qw(r,i[p.start],i[p.end],p.loop),g=_D(c,n,v);for(const y of g)o.push({source:y,target:p,start:{[r]:PS(m,v,"start",Math.max)},end:{[r]:PS(m,v,"end",Math.min)}})}}return o}function qw(s,t,r,a){if(a)return;let n=t[s],i=r[s];return s==="angle"&&(n=ta(n),i=ta(i)),{property:s,start:n,end:i}}function fQ(s,t){const{x:r=null,y:a=null}=s||{},n=t.points,i=[];return t.segments.forEach(({start:o,end:c})=>{c=Op(o,c,n);const u=n[o],h=n[c];a!==null?(i.push({x:u.x,y:a}),i.push({x:h.x,y:a})):r!==null&&(i.push({x:r,y:u.y}),i.push({x:r,y:h.y}))}),i}function Op(s,t,r){for(;t>s;t--){const a=r[t];if(!isNaN(a.x)&&!isNaN(a.y))break}return t}function PS(s,t,r,a){return s&&t?a(s[r],t[r]):s?s[r]:t?t[r]:0}function qD(s,t){let r=[],a=!1;return Ls(s)?(a=!0,r=s):r=fQ(s,t),r.length?new $m({points:r,options:{tension:0},_loop:a,_fullLoop:a}):null}function BS(s){return s&&s.fill!==!1}function pQ(s,t,r){let n=s[t].fill;const i=[t];let o;if(!r)return n;for(;n!==!1&&i.indexOf(n)===-1;){if(!fr(n))return n;if(o=s[n],!o)return!1;if(o.visible)return n;i.push(n),n=o.fill}return!1}function gQ(s,t,r){const a=jQ(s);if(jt(a))return isNaN(a.value)?!1:a;let n=parseFloat(a);return fr(n)&&Math.floor(n)===n?bQ(a[0],t,n,r):["origin","start","end","stack","shape"].indexOf(a)>=0&&a}function bQ(s,t,r,a){return(s==="-"||s==="+")&&(r=t+r),r===t||r<0||r>=a?!1:r}function yQ(s,t){let r=null;return s==="start"?r=t.bottom:s==="end"?r=t.top:jt(s)?r=t.getPixelForValue(s.value):t.getBasePixel&&(r=t.getBasePixel()),r}function vQ(s,t,r){let a;return s==="start"?a=r:s==="end"?a=t.options.reverse?t.min:t.max:jt(s)?a=s.value:a=t.getBaseValue(),a}function jQ(s){const t=s.options,r=t.fill;let a=ht(r&&r.target,r);return a===void 0&&(a=!!t.backgroundColor),a===!1||a===null?!1:a===!0?"origin":a}function wQ(s){const{scale:t,index:r,line:a}=s,n=[],i=a.segments,o=a.points,c=NQ(t,r);c.push(qD({x:null,y:t.bottom},a));for(let u=0;u<i.length;u++){const h=i[u];for(let m=h.start;m<=h.end;m++)_Q(n,o[m],c)}return new $m({points:n,options:{}})}function NQ(s,t){const r=[],a=s.getMatchingVisibleMetas("line");for(let n=0;n<a.length;n++){const i=a[n];if(i.index===t)break;i.hidden||r.unshift(i.dataset)}return r}function _Q(s,t,r){const a=[];for(let n=0;n<r.length;n++){const i=r[n],{first:o,last:c,point:u}=kQ(i,t,"x");if(!(!u||o&&c)){if(o)a.unshift(u);else if(s.push(u),!c)break}}s.push(...a)}function kQ(s,t,r){const a=s.interpolate(t,r);if(!a)return{};const n=a[r],i=s.segments,o=s.points;let c=!1,u=!1;for(let h=0;h<i.length;h++){const m=i[h],f=o[m.start][r],p=o[m.end][r];if(fi(n,f,p)){c=n===f,u=n===p;break}}return{first:c,last:u,point:a}}class WD{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,r,a){const{x:n,y:i,radius:o}=this;return r=r||{start:0,end:ns},t.arc(n,i,o,r.end,r.start,!0),!a.bounds}interpolate(t){const{x:r,y:a,radius:n}=this,i=t.angle;return{x:r+Math.cos(i)*n,y:a+Math.sin(i)*n,angle:i}}}function SQ(s){const{chart:t,fill:r,line:a}=s;if(fr(r))return CQ(t,r);if(r==="stack")return wQ(s);if(r==="shape")return!0;const n=TQ(s);return n instanceof WD?n:qD(n,a)}function CQ(s,t){const r=s.getDatasetMeta(t);return r&&s.isDatasetVisible(t)?r.dataset:null}function TQ(s){return(s.scale||{}).getPointPositionForValue?AQ(s):EQ(s)}function EQ(s){const{scale:t={},fill:r}=s,a=yQ(r,t);if(fr(a)){const n=t.isHorizontal();return{x:n?a:null,y:n?null:a}}return null}function AQ(s){const{scale:t,fill:r}=s,a=t.options,n=t.getLabels().length,i=a.reverse?t.max:t.min,o=vQ(r,t,i),c=[];if(a.grid.circular){const u=t.getPointPositionForValue(0,i);return new WD({x:u.x,y:u.y,radius:t.getDistanceFromCenterForValue(o)})}for(let u=0;u<n;++u)c.push(t.getPointPositionForValue(u,o));return c}function Zy(s,t,r){const a=SQ(t),{chart:n,index:i,line:o,scale:c,axis:u}=t,h=o.options,m=h.fill,f=h.backgroundColor,{above:p=f,below:v=f}=m||{},g=n.getDatasetMeta(i),y=SD(n,g);a&&o.points.length&&(Ep(s,r),DQ(s,{line:o,target:a,above:p,below:v,area:r,scale:c,axis:u,clip:y}),Ap(s))}function DQ(s,t){const{line:r,target:a,above:n,below:i,area:o,scale:c,clip:u}=t,h=r._loop?"angle":t.axis;s.save();let m=i;i!==n&&(h==="x"?(FS(s,a,o.top),Qy(s,{line:r,target:a,color:n,scale:c,property:h,clip:u}),s.restore(),s.save(),FS(s,a,o.bottom)):h==="y"&&(zS(s,a,o.left),Qy(s,{line:r,target:a,color:i,scale:c,property:h,clip:u}),s.restore(),s.save(),zS(s,a,o.right),m=n)),Qy(s,{line:r,target:a,color:m,scale:c,property:h,clip:u}),s.restore()}function FS(s,t,r){const{segments:a,points:n}=t;let i=!0,o=!1;s.beginPath();for(const c of a){const{start:u,end:h}=c,m=n[u],f=n[Op(u,h,n)];i?(s.moveTo(m.x,m.y),i=!1):(s.lineTo(m.x,r),s.lineTo(m.x,m.y)),o=!!t.pathSegment(s,c,{move:o}),o?s.closePath():s.lineTo(f.x,r)}s.lineTo(t.first().x,r),s.closePath(),s.clip()}function zS(s,t,r){const{segments:a,points:n}=t;let i=!0,o=!1;s.beginPath();for(const c of a){const{start:u,end:h}=c,m=n[u],f=n[Op(u,h,n)];i?(s.moveTo(m.x,m.y),i=!1):(s.lineTo(r,m.y),s.lineTo(m.x,m.y)),o=!!t.pathSegment(s,c,{move:o}),o?s.closePath():s.lineTo(r,f.y)}s.lineTo(r,t.first().y),s.closePath(),s.clip()}function Qy(s,t){const{line:r,target:a,property:n,color:i,scale:o,clip:c}=t,u=xQ(r,a,n);for(const{source:h,target:m,start:f,end:p}of u){const{style:{backgroundColor:v=i}={}}=h,g=a!==!0;s.save(),s.fillStyle=v,RQ(s,o,c,g&&qw(n,f,p)),s.beginPath();const y=!!r.pathSegment(s,h);let w;if(g){y?s.closePath():IS(s,a,p,n);const N=!!a.pathSegment(s,m,{move:y,reverse:!0});w=y&&N,w||IS(s,a,f,n)}s.closePath(),s.fill(w?"evenodd":"nonzero"),s.restore()}}function RQ(s,t,r,a){const n=t.chart.chartArea,{property:i,start:o,end:c}=a||{};if(i==="x"||i==="y"){let u,h,m,f;i==="x"?(u=o,h=n.top,m=c,f=n.bottom):(u=n.left,h=o,m=n.right,f=c),s.beginPath(),r&&(u=Math.max(u,r.left),m=Math.min(m,r.right),h=Math.max(h,r.top),f=Math.min(f,r.bottom)),s.rect(u,h,m-u,f-h),s.clip()}}function IS(s,t,r,a){const n=t.interpolate(r,a);n&&s.lineTo(n.x,n.y)}var YD={id:"filler",afterDatasetsUpdate(s,t,r){const a=(s.data.datasets||[]).length,n=[];let i,o,c,u;for(o=0;o<a;++o)i=s.getDatasetMeta(o),c=i.dataset,u=null,c&&c.options&&c instanceof $m&&(u={visible:s.isDatasetVisible(o),index:o,fill:gQ(c,o,a),chart:s,axis:i.controller.options.indexAxis,scale:i.vScale,line:c}),i.$filler=u,n.push(u);for(o=0;o<a;++o)u=n[o],!(!u||u.fill===!1)&&(u.fill=pQ(n,o,r.propagate))},beforeDraw(s,t,r){const a=r.drawTime==="beforeDraw",n=s.getSortedVisibleDatasetMetas(),i=s.chartArea;for(let o=n.length-1;o>=0;--o){const c=n[o].$filler;c&&(c.line.updateControlPoints(i,c.axis),a&&c.fill&&Zy(s.ctx,c,i))}},beforeDatasetsDraw(s,t,r){if(r.drawTime!=="beforeDatasetsDraw")return;const a=s.getSortedVisibleDatasetMetas();for(let n=a.length-1;n>=0;--n){const i=a[n].$filler;BS(i)&&Zy(s.ctx,i,s.chartArea)}},beforeDatasetDraw(s,t,r){const a=t.meta.$filler;!BS(a)||r.drawTime!=="beforeDatasetDraw"||Zy(s.ctx,a,s.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const $S=(s,t)=>{let{boxHeight:r=t,boxWidth:a=t}=s;return s.usePointStyle&&(r=Math.min(r,t),a=s.pointStyleWidth||Math.min(a,t)),{boxWidth:a,boxHeight:r,itemHeight:Math.max(t,r)}},MQ=(s,t)=>s!==null&&t!==null&&s.datasetIndex===t.datasetIndex&&s.index===t.index;class US extends Ti{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,r,a){this.maxWidth=t,this.maxHeight=r,this._margins=a,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let r=Xt(t.generateLabels,[this.chart],this)||[];t.filter&&(r=r.filter(a=>t.filter(a,this.chart.data))),t.sort&&(r=r.sort((a,n)=>t.sort(a,n,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:t,ctx:r}=this;if(!t.display){this.width=this.height=0;return}const a=t.labels,n=mr(a.font),i=n.size,o=this._computeTitleHeight(),{boxWidth:c,itemHeight:u}=$S(a,i);let h,m;r.font=n.string,this.isHorizontal()?(h=this.maxWidth,m=this._fitRows(o,i,c,u)+10):(m=this.maxHeight,h=this._fitCols(o,n,c,u)+10),this.width=Math.min(h,t.maxWidth||this.maxWidth),this.height=Math.min(m,t.maxHeight||this.maxHeight)}_fitRows(t,r,a,n){const{ctx:i,maxWidth:o,options:{labels:{padding:c}}}=this,u=this.legendHitBoxes=[],h=this.lineWidths=[0],m=n+c;let f=t;i.textAlign="left",i.textBaseline="middle";let p=-1,v=-m;return this.legendItems.forEach((g,y)=>{const w=a+r/2+i.measureText(g.text).width;(y===0||h[h.length-1]+w+2*c>o)&&(f+=m,h[h.length-(y>0?0:1)]=0,v+=m,p++),u[y]={left:0,top:v,row:p,width:w,height:n},h[h.length-1]+=w+c}),f}_fitCols(t,r,a,n){const{ctx:i,maxHeight:o,options:{labels:{padding:c}}}=this,u=this.legendHitBoxes=[],h=this.columnSizes=[],m=o-t;let f=c,p=0,v=0,g=0,y=0;return this.legendItems.forEach((w,N)=>{const{itemWidth:k,itemHeight:S}=OQ(a,r,i,w,n);N>0&&v+S+2*c>m&&(f+=p+c,h.push({width:p,height:v}),g+=p+c,y++,p=v=0),u[N]={left:g,top:v,col:y,width:k,height:S},p=Math.max(p,k),v+=S+c}),f+=p,h.push({width:p,height:v}),f}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:a,labels:{padding:n},rtl:i}}=this,o=cd(i,this.left,this.width);if(this.isHorizontal()){let c=0,u=ir(a,this.left+n,this.right-this.lineWidths[c]);for(const h of r)c!==h.row&&(c=h.row,u=ir(a,this.left+n,this.right-this.lineWidths[c])),h.top+=this.top+t+n,h.left=o.leftForLtr(o.x(u),h.width),u+=h.width+n}else{let c=0,u=ir(a,this.top+t+n,this.bottom-this.columnSizes[c].height);for(const h of r)h.col!==c&&(c=h.col,u=ir(a,this.top+t+n,this.bottom-this.columnSizes[c].height)),h.top=u,h.left+=this.left+n,h.left=o.leftForLtr(o.x(h.left),h.width),u+=h.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Ep(t,this),this._draw(),Ap(t)}}_draw(){const{options:t,columnSizes:r,lineWidths:a,ctx:n}=this,{align:i,labels:o}=t,c=js.color,u=cd(t.rtl,this.left,this.width),h=mr(o.font),{padding:m}=o,f=h.size,p=f/2;let v;this.drawTitle(),n.textAlign=u.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=h.string;const{boxWidth:g,boxHeight:y,itemHeight:w}=$S(o,f),N=function(E,z,O){if(isNaN(g)||g<=0||isNaN(y)||y<0)return;n.save();const C=ht(O.lineWidth,1);if(n.fillStyle=ht(O.fillStyle,c),n.lineCap=ht(O.lineCap,"butt"),n.lineDashOffset=ht(O.lineDashOffset,0),n.lineJoin=ht(O.lineJoin,"miter"),n.lineWidth=C,n.strokeStyle=ht(O.strokeStyle,c),n.setLineDash(ht(O.lineDash,[])),o.usePointStyle){const A={radius:y*Math.SQRT2/2,pointStyle:O.pointStyle,rotation:O.rotation,borderWidth:C},X=u.xPlus(E,g/2),I=z+p;xD(n,A,X,I,o.pointStyleWidth&&g)}else{const A=z+Math.max((f-y)/2,0),X=u.leftForLtr(E,g),I=od(O.borderRadius);n.beginPath(),Object.values(I).some(V=>V!==0)?op(n,{x:X,y:A,w:g,h:y,radius:I}):n.rect(X,A,g,y),n.fill(),C!==0&&n.stroke()}n.restore()},k=function(E,z,O){Nm(n,O.text,E,z+w/2,h,{strikethrough:O.hidden,textAlign:u.textAlign(O.textAlign)})},S=this.isHorizontal(),_=this._computeTitleHeight();S?v={x:ir(i,this.left+m,this.right-a[0]),y:this.top+m+_,line:0}:v={x:this.left+m,y:ir(i,this.top+_+m,this.bottom-r[0].height),line:0},jD(this.ctx,t.textDirection);const T=w+m;this.legendItems.forEach((E,z)=>{n.strokeStyle=E.fontColor,n.fillStyle=E.fontColor;const O=n.measureText(E.text).width,C=u.textAlign(E.textAlign||(E.textAlign=o.textAlign)),A=g+p+O;let X=v.x,I=v.y;u.setWidth(this.width),S?z>0&&X+A+m>this.right&&(I=v.y+=T,v.line++,X=v.x=ir(i,this.left+m,this.right-a[v.line])):z>0&&I+T>this.bottom&&(X=v.x=X+r[v.line].width+m,v.line++,I=v.y=ir(i,this.top+_+m,this.bottom-r[v.line].height));const V=u.x(X);if(N(V,I,E),X=oK(C,X+g+p,S?X+A:this.right,t.rtl),k(u.x(X),I,E),S)v.x+=A+m;else if(typeof E.text!="string"){const R=h.lineHeight;v.y+=GD(E,R)+m}else v.y+=T}),wD(this.ctx,t.textDirection)}drawTitle(){const t=this.options,r=t.title,a=mr(r.font),n=Ra(r.padding);if(!r.display)return;const i=cd(t.rtl,this.left,this.width),o=this.ctx,c=r.position,u=a.size/2,h=n.top+u;let m,f=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),m=this.top+h,f=ir(t.align,f,this.right-p);else{const g=this.columnSizes.reduce((y,w)=>Math.max(y,w.height),0);m=h+ir(t.align,this.top,this.bottom-g-t.labels.padding-this._computeTitleHeight())}const v=ir(c,f,f+p);o.textAlign=i.textAlign(j1(c)),o.textBaseline="middle",o.strokeStyle=r.color,o.fillStyle=r.color,o.font=a.string,Nm(o,r.text,v,m,a)}_computeTitleHeight(){const t=this.options.title,r=mr(t.font),a=Ra(t.padding);return t.display?r.lineHeight+a.height:0}_getLegendItemAt(t,r){let a,n,i;if(fi(t,this.left,this.right)&&fi(r,this.top,this.bottom)){for(i=this.legendHitBoxes,a=0;a<i.length;++a)if(n=i[a],fi(t,n.left,n.left+n.width)&&fi(r,n.top,n.top+n.height))return this.legendItems[a]}return null}handleEvent(t){const r=this.options;if(!BQ(t.type,r))return;const a=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const n=this._hoveredItem,i=MQ(n,a);n&&!i&&Xt(r.onLeave,[t,n,this],this),this._hoveredItem=a,a&&!i&&Xt(r.onHover,[t,a,this],this)}else a&&Xt(r.onClick,[t,a,this],this)}}function OQ(s,t,r,a,n){const i=LQ(a,s,t,r),o=PQ(n,a,t.lineHeight);return{itemWidth:i,itemHeight:o}}function LQ(s,t,r,a){let n=s.text;return n&&typeof n!="string"&&(n=n.reduce((i,o)=>i.length>o.length?i:o)),t+r.size/2+a.measureText(n).width}function PQ(s,t,r){let a=s;return typeof t.text!="string"&&(a=GD(t,r)),a}function GD(s,t){const r=s.text?s.text.length:0;return t*r}function BQ(s,t){return!!((s==="mousemove"||s==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(s==="click"||s==="mouseup"))}var KD={id:"legend",_element:US,start(s,t,r){const a=s.legend=new US({ctx:s.ctx,options:r,chart:s});Ca.configure(s,a,r),Ca.addBox(s,a)},stop(s){Ca.removeBox(s,s.legend),delete s.legend},beforeUpdate(s,t,r){const a=s.legend;Ca.configure(s,a,r),a.options=r},afterUpdate(s){const t=s.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(s,t){t.replay||s.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(s,t,r){const a=t.datasetIndex,n=r.chart;n.isDatasetVisible(a)?(n.hide(a),t.hidden=!0):(n.show(a),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:s=>s.chart.options.color,boxWidth:40,padding:10,generateLabels(s){const t=s.data.datasets,{labels:{usePointStyle:r,pointStyle:a,textAlign:n,color:i,useBorderRadius:o,borderRadius:c}}=s.legend.options;return s._getSortedDatasetMetas().map(u=>{const h=u.controller.getStyle(r?0:void 0),m=Ra(h.borderWidth);return{text:t[u.index].label,fillStyle:h.backgroundColor,fontColor:i,hidden:!u.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(m.width+m.height)/4,strokeStyle:h.borderColor,pointStyle:a||h.pointStyle,rotation:h.rotation,textAlign:n||h.textAlign,borderRadius:o&&(c||h.borderRadius),datasetIndex:u.index}},this)}},title:{color:s=>s.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:s=>!s.startsWith("on"),labels:{_scriptable:s=>!["generateLabels","filter","sort"].includes(s)}}};class XD extends Ti{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,r){const a=this.options;if(this.left=0,this.top=0,!a.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=r;const n=Ls(a.text)?a.text.length:1;this._padding=Ra(a.padding);const i=n*mr(a.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:r,left:a,bottom:n,right:i,options:o}=this,c=o.align;let u=0,h,m,f;return this.isHorizontal()?(m=ir(c,a,i),f=r+t,h=i-a):(o.position==="left"?(m=a+t,f=ir(c,n,r),u=Lt*-.5):(m=i-t,f=ir(c,r,n),u=Lt*.5),h=n-r),{titleX:m,titleY:f,maxWidth:h,rotation:u}}draw(){const t=this.ctx,r=this.options;if(!r.display)return;const a=mr(r.font),i=a.lineHeight/2+this._padding.top,{titleX:o,titleY:c,maxWidth:u,rotation:h}=this._drawArgs(i);Nm(t,r.text,0,0,a,{color:r.color,maxWidth:u,rotation:h,textAlign:j1(r.align),textBaseline:"middle",translation:[o,c]})}}function FQ(s,t){const r=new XD({ctx:s.ctx,options:t,chart:s});Ca.configure(s,r,t),Ca.addBox(s,r),s.titleBlock=r}var ZD={id:"title",_element:XD,start(s,t,r){FQ(s,r)},stop(s){const t=s.titleBlock;Ca.removeBox(s,t),delete s.titleBlock},beforeUpdate(s,t,r){const a=s.titleBlock;Ca.configure(s,a,r),a.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Lh={average(s){if(!s.length)return!1;let t,r,a=new Set,n=0,i=0;for(t=0,r=s.length;t<r;++t){const c=s[t].element;if(c&&c.hasValue()){const u=c.tooltipPosition();a.add(u.x),n+=u.y,++i}}return i===0||a.size===0?!1:{x:[...a].reduce((c,u)=>c+u)/a.size,y:n/i}},nearest(s,t){if(!s.length)return!1;let r=t.x,a=t.y,n=Number.POSITIVE_INFINITY,i,o,c;for(i=0,o=s.length;i<o;++i){const u=s[i].element;if(u&&u.hasValue()){const h=u.getCenterPoint(),m=zw(t,h);m<n&&(n=m,c=u)}}if(c){const u=c.tooltipPosition();r=u.x,a=u.y}return{x:r,y:a}}};function hn(s,t){return t&&(Ls(t)?Array.prototype.push.apply(s,t):s.push(t)),s}function ci(s){return(typeof s=="string"||s instanceof String)&&s.indexOf(`
`)>-1?s.split(`
`):s}function zQ(s,t){const{element:r,datasetIndex:a,index:n}=t,i=s.getDatasetMeta(a).controller,{label:o,value:c}=i.getLabelAndValue(n);return{chart:s,label:o,parsed:i.getParsed(n),raw:s.data.datasets[a].data[n],formattedValue:c,dataset:i.getDataset(),dataIndex:n,datasetIndex:a,element:r}}function VS(s,t){const r=s.chart.ctx,{body:a,footer:n,title:i}=s,{boxWidth:o,boxHeight:c}=t,u=mr(t.bodyFont),h=mr(t.titleFont),m=mr(t.footerFont),f=i.length,p=n.length,v=a.length,g=Ra(t.padding);let y=g.height,w=0,N=a.reduce((_,T)=>_+T.before.length+T.lines.length+T.after.length,0);if(N+=s.beforeBody.length+s.afterBody.length,f&&(y+=f*h.lineHeight+(f-1)*t.titleSpacing+t.titleMarginBottom),N){const _=t.displayColors?Math.max(c,u.lineHeight):u.lineHeight;y+=v*_+(N-v)*u.lineHeight+(N-1)*t.bodySpacing}p&&(y+=t.footerMarginTop+p*m.lineHeight+(p-1)*t.footerSpacing);let k=0;const S=function(_){w=Math.max(w,r.measureText(_).width+k)};return r.save(),r.font=h.string,Ot(s.title,S),r.font=u.string,Ot(s.beforeBody.concat(s.afterBody),S),k=t.displayColors?o+2+t.boxPadding:0,Ot(a,_=>{Ot(_.before,S),Ot(_.lines,S),Ot(_.after,S)}),k=0,r.font=m.string,Ot(s.footer,S),r.restore(),w+=g.width,{width:w,height:y}}function IQ(s,t){const{y:r,height:a}=t;return r<a/2?"top":r>s.height-a/2?"bottom":"center"}function $Q(s,t,r,a){const{x:n,width:i}=a,o=r.caretSize+r.caretPadding;if(s==="left"&&n+i+o>t.width||s==="right"&&n-i-o<0)return!0}function UQ(s,t,r,a){const{x:n,width:i}=r,{width:o,chartArea:{left:c,right:u}}=s;let h="center";return a==="center"?h=n<=(c+u)/2?"left":"right":n<=i/2?h="left":n>=o-i/2&&(h="right"),$Q(h,s,t,r)&&(h="center"),h}function HS(s,t,r){const a=r.yAlign||t.yAlign||IQ(s,r);return{xAlign:r.xAlign||t.xAlign||UQ(s,t,r,a),yAlign:a}}function VQ(s,t){let{x:r,width:a}=s;return t==="right"?r-=a:t==="center"&&(r-=a/2),r}function HQ(s,t,r){let{y:a,height:n}=s;return t==="top"?a+=r:t==="bottom"?a-=n+r:a-=n/2,a}function qS(s,t,r,a){const{caretSize:n,caretPadding:i,cornerRadius:o}=s,{xAlign:c,yAlign:u}=r,h=n+i,{topLeft:m,topRight:f,bottomLeft:p,bottomRight:v}=od(o);let g=VQ(t,c);const y=HQ(t,u,h);return u==="center"?c==="left"?g+=h:c==="right"&&(g-=h):c==="left"?g-=Math.max(m,p)+n:c==="right"&&(g+=Math.max(f,v)+n),{x:hr(g,0,a.width-t.width),y:hr(y,0,a.height-t.height)}}function of(s,t,r){const a=Ra(r.padding);return t==="center"?s.x+s.width/2:t==="right"?s.x+s.width-a.right:s.x+a.left}function WS(s){return hn([],ci(s))}function qQ(s,t,r){return Zo(s,{tooltip:t,tooltipItems:r,type:"tooltip"})}function YS(s,t){const r=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return r?s.override(r):s}const QD={beforeTitle:ni,title(s){if(s.length>0){const t=s[0],r=t.chart.data.labels,a=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(a>0&&t.dataIndex<a)return r[t.dataIndex]}return""},afterTitle:ni,beforeBody:ni,beforeLabel:ni,label(s){if(this&&this.options&&this.options.mode==="dataset")return s.label+": "+s.formattedValue||s.formattedValue;let t=s.dataset.label||"";t&&(t+=": ");const r=s.formattedValue;return Dt(r)||(t+=r),t},labelColor(s){const r=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(s){const r=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:ni,afterBody:ni,beforeFooter:ni,footer:ni,afterFooter:ni};function Dr(s,t,r,a){const n=s[t].call(r,a);return typeof n>"u"?QD[t].call(r,a):n}class GS extends Ti{static positioners=Lh;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const r=this.chart,a=this.options.setContext(this.getContext()),n=a.enabled&&r.options.animation&&a.animations,i=new CD(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=qQ(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,r){const{callbacks:a}=r,n=Dr(a,"beforeTitle",this,t),i=Dr(a,"title",this,t),o=Dr(a,"afterTitle",this,t);let c=[];return c=hn(c,ci(n)),c=hn(c,ci(i)),c=hn(c,ci(o)),c}getBeforeBody(t,r){return WS(Dr(r.callbacks,"beforeBody",this,t))}getBody(t,r){const{callbacks:a}=r,n=[];return Ot(t,i=>{const o={before:[],lines:[],after:[]},c=YS(a,i);hn(o.before,ci(Dr(c,"beforeLabel",this,i))),hn(o.lines,Dr(c,"label",this,i)),hn(o.after,ci(Dr(c,"afterLabel",this,i))),n.push(o)}),n}getAfterBody(t,r){return WS(Dr(r.callbacks,"afterBody",this,t))}getFooter(t,r){const{callbacks:a}=r,n=Dr(a,"beforeFooter",this,t),i=Dr(a,"footer",this,t),o=Dr(a,"afterFooter",this,t);let c=[];return c=hn(c,ci(n)),c=hn(c,ci(i)),c=hn(c,ci(o)),c}_createItems(t){const r=this._active,a=this.chart.data,n=[],i=[],o=[];let c=[],u,h;for(u=0,h=r.length;u<h;++u)c.push(zQ(this.chart,r[u]));return t.filter&&(c=c.filter((m,f,p)=>t.filter(m,f,p,a))),t.itemSort&&(c=c.sort((m,f)=>t.itemSort(m,f,a))),Ot(c,m=>{const f=YS(t.callbacks,m);n.push(Dr(f,"labelColor",this,m)),i.push(Dr(f,"labelPointStyle",this,m)),o.push(Dr(f,"labelTextColor",this,m))}),this.labelColors=n,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=c,c}update(t,r){const a=this.options.setContext(this.getContext()),n=this._active;let i,o=[];if(!n.length)this.opacity!==0&&(i={opacity:0});else{const c=Lh[a.position].call(this,n,this._eventPosition);o=this._createItems(a),this.title=this.getTitle(o,a),this.beforeBody=this.getBeforeBody(o,a),this.body=this.getBody(o,a),this.afterBody=this.getAfterBody(o,a),this.footer=this.getFooter(o,a);const u=this._size=VS(this,a),h=Object.assign({},c,u),m=HS(this.chart,a,h),f=qS(a,h,m,this.chart);this.xAlign=m.xAlign,this.yAlign=m.yAlign,i={opacity:1,x:f.x,y:f.y,width:u.width,height:u.height,caretX:c.x,caretY:c.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&a.external&&a.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(t,r,a,n){const i=this.getCaretPosition(t,a,n);r.lineTo(i.x1,i.y1),r.lineTo(i.x2,i.y2),r.lineTo(i.x3,i.y3)}getCaretPosition(t,r,a){const{xAlign:n,yAlign:i}=this,{caretSize:o,cornerRadius:c}=a,{topLeft:u,topRight:h,bottomLeft:m,bottomRight:f}=od(c),{x:p,y:v}=t,{width:g,height:y}=r;let w,N,k,S,_,T;return i==="center"?(_=v+y/2,n==="left"?(w=p,N=w-o,S=_+o,T=_-o):(w=p+g,N=w+o,S=_-o,T=_+o),k=w):(n==="left"?N=p+Math.max(u,m)+o:n==="right"?N=p+g-Math.max(h,f)-o:N=this.caretX,i==="top"?(S=v,_=S-o,w=N-o,k=N+o):(S=v+y,_=S+o,w=N+o,k=N-o),T=S),{x1:w,x2:N,x3:k,y1:S,y2:_,y3:T}}drawTitle(t,r,a){const n=this.title,i=n.length;let o,c,u;if(i){const h=cd(a.rtl,this.x,this.width);for(t.x=of(this,a.titleAlign,a),r.textAlign=h.textAlign(a.titleAlign),r.textBaseline="middle",o=mr(a.titleFont),c=a.titleSpacing,r.fillStyle=a.titleColor,r.font=o.string,u=0;u<i;++u)r.fillText(n[u],h.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+c,u+1===i&&(t.y+=a.titleMarginBottom-c)}}_drawColorBox(t,r,a,n,i){const o=this.labelColors[a],c=this.labelPointStyles[a],{boxHeight:u,boxWidth:h}=i,m=mr(i.bodyFont),f=of(this,"left",i),p=n.x(f),v=u<m.lineHeight?(m.lineHeight-u)/2:0,g=r.y+v;if(i.usePointStyle){const y={radius:Math.min(h,u)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},w=n.leftForLtr(p,h)+h/2,N=g+u/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,$w(t,y,w,N),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,$w(t,y,w,N)}else{t.lineWidth=jt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const y=n.leftForLtr(p,h),w=n.leftForLtr(n.xPlus(p,1),h-2),N=od(o.borderRadius);Object.values(N).some(k=>k!==0)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,op(t,{x:y,y:g,w:h,h:u,radius:N}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),op(t,{x:w,y:g+1,w:h-2,h:u-2,radius:N}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(y,g,h,u),t.strokeRect(y,g,h,u),t.fillStyle=o.backgroundColor,t.fillRect(w,g+1,h-2,u-2))}t.fillStyle=this.labelTextColors[a]}drawBody(t,r,a){const{body:n}=this,{bodySpacing:i,bodyAlign:o,displayColors:c,boxHeight:u,boxWidth:h,boxPadding:m}=a,f=mr(a.bodyFont);let p=f.lineHeight,v=0;const g=cd(a.rtl,this.x,this.width),y=function(O){r.fillText(O,g.x(t.x+v),t.y+p/2),t.y+=p+i},w=g.textAlign(o);let N,k,S,_,T,E,z;for(r.textAlign=o,r.textBaseline="middle",r.font=f.string,t.x=of(this,w,a),r.fillStyle=a.bodyColor,Ot(this.beforeBody,y),v=c&&w!=="right"?o==="center"?h/2+m:h+2+m:0,_=0,E=n.length;_<E;++_){for(N=n[_],k=this.labelTextColors[_],r.fillStyle=k,Ot(N.before,y),S=N.lines,c&&S.length&&(this._drawColorBox(r,t,_,g,a),p=Math.max(f.lineHeight,u)),T=0,z=S.length;T<z;++T)y(S[T]),p=f.lineHeight;Ot(N.after,y)}v=0,p=f.lineHeight,Ot(this.afterBody,y),t.y-=i}drawFooter(t,r,a){const n=this.footer,i=n.length;let o,c;if(i){const u=cd(a.rtl,this.x,this.width);for(t.x=of(this,a.footerAlign,a),t.y+=a.footerMarginTop,r.textAlign=u.textAlign(a.footerAlign),r.textBaseline="middle",o=mr(a.footerFont),r.fillStyle=a.footerColor,r.font=o.string,c=0;c<i;++c)r.fillText(n[c],u.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a.footerSpacing}}drawBackground(t,r,a,n){const{xAlign:i,yAlign:o}=this,{x:c,y:u}=t,{width:h,height:m}=a,{topLeft:f,topRight:p,bottomLeft:v,bottomRight:g}=od(n.cornerRadius);r.fillStyle=n.backgroundColor,r.strokeStyle=n.borderColor,r.lineWidth=n.borderWidth,r.beginPath(),r.moveTo(c+f,u),o==="top"&&this.drawCaret(t,r,a,n),r.lineTo(c+h-p,u),r.quadraticCurveTo(c+h,u,c+h,u+p),o==="center"&&i==="right"&&this.drawCaret(t,r,a,n),r.lineTo(c+h,u+m-g),r.quadraticCurveTo(c+h,u+m,c+h-g,u+m),o==="bottom"&&this.drawCaret(t,r,a,n),r.lineTo(c+v,u+m),r.quadraticCurveTo(c,u+m,c,u+m-v),o==="center"&&i==="left"&&this.drawCaret(t,r,a,n),r.lineTo(c,u+f),r.quadraticCurveTo(c,u,c+f,u),r.closePath(),r.fill(),n.borderWidth>0&&r.stroke()}_updateAnimationTarget(t){const r=this.chart,a=this.$animations,n=a&&a.x,i=a&&a.y;if(n||i){const o=Lh[t.position].call(this,this._active,this._eventPosition);if(!o)return;const c=this._size=VS(this,t),u=Object.assign({},o,this._size),h=HS(r,t,u),m=qS(t,u,h,r);(n._to!==m.x||i._to!==m.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=c.width,this.height=c.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,m))}}_willRender(){return!!this.opacity}draw(t){const r=this.options.setContext(this.getContext());let a=this.opacity;if(!a)return;this._updateAnimationTarget(r);const n={width:this.width,height:this.height},i={x:this.x,y:this.y};a=Math.abs(a)<.001?0:a;const o=Ra(r.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&c&&(t.save(),t.globalAlpha=a,this.drawBackground(i,t,n,r),jD(t,r.textDirection),i.y+=o.top,this.drawTitle(i,t,r),this.drawBody(i,t,r),this.drawFooter(i,t,r),wD(t,r.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,r){const a=this._active,n=t.map(({datasetIndex:c,index:u})=>{const h=this.chart.getDatasetMeta(c);if(!h)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:h.data[u],index:u}}),i=!np(a,n),o=this._positionChanged(n,r);(i||o)&&(this._active=n,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,r,a=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,i=this._active||[],o=this._getActiveElements(t,i,r,a),c=this._positionChanged(o,t),u=r||!np(o,i)||c;return u&&(this._active=o,(n.enabled||n.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,r))),u}_getActiveElements(t,r,a,n){const i=this.options;if(t.type==="mouseout")return[];if(!n)return r.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,i.mode,i,a);return i.reverse&&o.reverse(),o}_positionChanged(t,r){const{caretX:a,caretY:n,options:i}=this,o=Lh[i.position].call(this,t,r);return o!==!1&&(a!==o.x||n!==o.y)}}var JD={id:"tooltip",_element:GS,positioners:Lh,afterInit(s,t,r){r&&(s.tooltip=new GS({chart:s,options:r}))},beforeUpdate(s,t,r){s.tooltip&&s.tooltip.initialize(r)},reset(s,t,r){s.tooltip&&s.tooltip.initialize(r)},afterDraw(s){const t=s.tooltip;if(t&&t._willRender()){const r={tooltip:t};if(s.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0})===!1)return;t.draw(s.ctx),s.notifyPlugins("afterTooltipDraw",r)}},afterEvent(s,t){if(s.tooltip){const r=t.replay;s.tooltip.handleEvent(t.event,r,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(s,t)=>t.bodyFont.size,boxWidth:(s,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:QD},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:s=>s!=="filter"&&s!=="itemSort"&&s!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const WQ=(s,t,r,a)=>(typeof t=="string"?(r=s.push(t)-1,a.unshift({index:r,label:t})):isNaN(t)&&(r=null),r);function YQ(s,t,r,a){const n=s.indexOf(t);if(n===-1)return WQ(s,t,r,a);const i=s.lastIndexOf(t);return n!==i?r:n}const GQ=(s,t)=>s===null?null:hr(Math.round(s),0,t);function KS(s){const t=this.getLabels();return s>=0&&s<t.length?t[s]:s}class e8 extends zd{static id="category";static defaults={ticks:{callback:KS}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const r=this._addedLabels;if(r.length){const a=this.getLabels();for(const{index:n,label:i}of r)a[n]===i&&a.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,r){if(Dt(t))return null;const a=this.getLabels();return r=isFinite(r)&&a[r]===t?r:YQ(a,t,ht(r,t),this._addedLabels),GQ(r,a.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:a,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(a=0),r||(n=this.getLabels().length-1)),this.min=a,this.max=n}buildTicks(){const t=this.min,r=this.max,a=this.options.offset,n=[];let i=this.getLabels();i=t===0&&r===i.length-1?i:i.slice(t,r+1),this._valueRange=Math.max(i.length-(a?0:1),1),this._startValue=this.min-(a?.5:0);for(let o=t;o<=r;o++)n.push({value:o});return n}getLabelForValue(t){return KS.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function KQ(s,t){const r=[],{bounds:n,step:i,min:o,max:c,precision:u,count:h,maxTicks:m,maxDigits:f,includeBounds:p}=s,v=i||1,g=m-1,{min:y,max:w}=t,N=!Dt(o),k=!Dt(c),S=!Dt(h),_=(w-y)/(f+1);let T=qk((w-y)/g/v)*v,E,z,O,C;if(T<1e-14&&!N&&!k)return[{value:y},{value:w}];C=Math.ceil(w/T)-Math.floor(y/T),C>g&&(T=qk(C*T/g/v)*v),Dt(u)||(E=Math.pow(10,u),T=Math.ceil(T*E)/E),n==="ticks"?(z=Math.floor(y/T)*T,O=Math.ceil(w/T)*T):(z=y,O=w),N&&k&&i&&JG((c-o)/i,T/1e3)?(C=Math.round(Math.min((c-o)/T,m)),T=(c-o)/C,z=o,O=c):S?(z=N?o:z,O=k?c:O,C=h-1,T=(O-z)/C):(C=(O-z)/T,Xh(C,Math.round(C),T/1e3)?C=Math.round(C):C=Math.ceil(C));const A=Math.max(Wk(T),Wk(z));E=Math.pow(10,Dt(u)?A:u),z=Math.round(z*E)/E,O=Math.round(O*E)/E;let X=0;for(N&&(p&&z!==o?(r.push({value:o}),z<o&&X++,Xh(Math.round((z+X*T)*E)/E,o,XS(o,_,s))&&X++):z<o&&X++);X<C;++X){const I=Math.round((z+X*T)*E)/E;if(k&&I>c)break;r.push({value:I})}return k&&p&&O!==c?r.length&&Xh(r[r.length-1].value,c,XS(c,_,s))?r[r.length-1].value=c:r.push({value:c}):(!k||O===c)&&r.push({value:O}),r}function XS(s,t,{horizontal:r,minRotation:a}){const n=xi(a),i=(r?Math.sin(n):Math.cos(n))||.001,o=.75*t*(""+s).length;return Math.min(t/i,o)}class XQ extends zd{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,r){return Dt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:r,maxDefined:a}=this.getUserBounds();let{min:n,max:i}=this;const o=u=>n=r?n:u,c=u=>i=a?i:u;if(t){const u=_n(n),h=_n(i);u<0&&h<0?c(0):u>0&&h>0&&o(0)}if(n===i){let u=i===0?1:Math.abs(i*.05);c(i+u),t||o(n-u)}this.min=n,this.max=i}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:r,stepSize:a}=t,n;return a?(n=Math.ceil(this.max/a)-Math.floor(this.min/a)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${a} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),r=r||11),r&&(n=Math.min(r,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,r=t.ticks;let a=this.getTickLimit();a=Math.max(2,a);const n={maxTicks:a,bounds:t.bounds,min:t.min,max:t.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},i=this._range||this,o=KQ(n,i);return t.bounds==="ticks"&&eK(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let r=this.min,a=this.max;if(super.configure(),this.options.offset&&t.length){const n=(a-r)/Math.max(t.length-1,1)/2;r-=n,a+=n}this._startValue=r,this._endValue=a,this._valueRange=a-r}getLabelForValue(t){return N1(t,this.chart.options.locale,this.options.ticks.format)}}class t8 extends XQ{static id="linear";static defaults={ticks:{callback:mD.formatters.numeric}};determineDataLimits(){const{min:t,max:r}=this.getMinMax(!0);this.min=fr(t)?t:0,this.max=fr(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),r=t?this.width:this.height,a=xi(this.options.ticks.minRotation),n=(t?Math.sin(a):Math.cos(a))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,i.lineHeight/n))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const Lp={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Rr=Object.keys(Lp);function ZS(s,t){return s-t}function QS(s,t){if(Dt(t))return null;const r=s._adapter,{parser:a,round:n,isoWeekday:i}=s._parseOpts;let o=t;return typeof a=="function"&&(o=a(o)),fr(o)||(o=typeof a=="string"?r.parse(o,a):r.parse(o)),o===null?null:(n&&(o=n==="week"&&(vm(i)||i===!0)?r.startOf(o,"isoWeek",i):r.startOf(o,n)),+o)}function JS(s,t,r,a){const n=Rr.length;for(let i=Rr.indexOf(s);i<n-1;++i){const o=Lp[Rr[i]],c=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((r-t)/(c*o.size))<=a)return Rr[i]}return Rr[n-1]}function ZQ(s,t,r,a,n){for(let i=Rr.length-1;i>=Rr.indexOf(r);i--){const o=Rr[i];if(Lp[o].common&&s._adapter.diff(n,a,o)>=t-1)return o}return Rr[r?Rr.indexOf(r):0]}function QQ(s){for(let t=Rr.indexOf(s)+1,r=Rr.length;t<r;++t)if(Lp[Rr[t]].common)return Rr[t]}function e3(s,t,r){if(!r)s[t]=!0;else if(r.length){const{lo:a,hi:n}=v1(r,t),i=r[a]>=t?r[a]:r[n];s[i]=!0}}function JQ(s,t,r,a){const n=s._adapter,i=+n.startOf(t[0].value,a),o=t[t.length-1].value;let c,u;for(c=i;c<=o;c=+n.add(c,1,a))u=r[c],u>=0&&(t[u].major=!0);return t}function t3(s,t,r){const a=[],n={},i=t.length;let o,c;for(o=0;o<i;++o)c=t[o],n[c]=o,a.push({value:c,major:!1});return i===0||!r?a:JQ(s,a,n,r)}class s3 extends zd{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,r={}){const a=t.time||(t.time={}),n=this._adapter=new zX._date(t.adapters.date);n.init(r),Kh(a.displayFormats,n.formats()),this._parseOpts={parser:a.parser,round:a.round,isoWeekday:a.isoWeekday},super.init(t),this._normalized=r.normalized}parse(t,r){return t===void 0?null:QS(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,r=this._adapter,a=t.time.unit||"day";let{min:n,max:i,minDefined:o,maxDefined:c}=this.getUserBounds();function u(h){!o&&!isNaN(h.min)&&(n=Math.min(n,h.min)),!c&&!isNaN(h.max)&&(i=Math.max(i,h.max))}(!o||!c)&&(u(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&u(this.getMinMax(!1))),n=fr(n)&&!isNaN(n)?n:+r.startOf(Date.now(),a),i=fr(i)&&!isNaN(i)?i:+r.endOf(Date.now(),a)+1,this.min=Math.min(n,i-1),this.max=Math.max(n+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY;return t.length&&(r=t[0],a=t[t.length-1]),{min:r,max:a}}buildTicks(){const t=this.options,r=t.time,a=t.ticks,n=a.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const i=this.min,o=this.max,c=nK(n,i,o);return this._unit=r.unit||(a.autoSkip?JS(r.minUnit,this.min,this.max,this._getLabelCapacity(i)):ZQ(this,c.length,r.minUnit,this.min,this.max)),this._majorUnit=!a.major.enabled||this._unit==="year"?void 0:QQ(this._unit),this.initOffsets(n),t.reverse&&c.reverse(),t3(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let r=0,a=0,n,i;this.options.offset&&t.length&&(n=this.getDecimalForValue(t[0]),t.length===1?r=1-n:r=(this.getDecimalForValue(t[1])-n)/2,i=this.getDecimalForValue(t[t.length-1]),t.length===1?a=i:a=(i-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;r=hr(r,0,o),a=hr(a,0,o),this._offsets={start:r,end:a,factor:1/(r+1+a)}}_generate(){const t=this._adapter,r=this.min,a=this.max,n=this.options,i=n.time,o=i.unit||JS(i.minUnit,r,a,this._getLabelCapacity(r)),c=ht(n.ticks.stepSize,1),u=o==="week"?i.isoWeekday:!1,h=vm(u)||u===!0,m={};let f=r,p,v;if(h&&(f=+t.startOf(f,"isoWeek",u)),f=+t.startOf(f,h?"day":o),t.diff(a,r,o)>1e5*c)throw new Error(r+" and "+a+" are too far apart with stepSize of "+c+" "+o);const g=n.ticks.source==="data"&&this.getDataTimestamps();for(p=f,v=0;p<a;p=+t.add(p,c,o),v++)e3(m,p,g);return(p===a||n.bounds==="ticks"||v===1)&&e3(m,p,g),Object.keys(m).sort(ZS).map(y=>+y)}getLabelForValue(t){const r=this._adapter,a=this.options.time;return a.tooltipFormat?r.format(t,a.tooltipFormat):r.format(t,a.displayFormats.datetime)}format(t,r){const n=this.options.time.displayFormats,i=this._unit,o=r||n[i];return this._adapter.format(t,o)}_tickFormatFunction(t,r,a,n){const i=this.options,o=i.ticks.callback;if(o)return Xt(o,[t,r,a],this);const c=i.time.displayFormats,u=this._unit,h=this._majorUnit,m=u&&c[u],f=h&&c[h],p=a[r],v=h&&f&&p&&p.major;return this._adapter.format(t,n||(v?f:m))}generateTickLabels(t){let r,a,n;for(r=0,a=t.length;r<a;++r)n=t[r],n.label=this._tickFormatFunction(n.value,r,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const r=this._offsets,a=this.getDecimalForValue(t);return this.getPixelForDecimal((r.start+a)*r.factor)}getValueForPixel(t){const r=this._offsets,a=this.getDecimalForPixel(t)/r.factor-r.end;return this.min+a*(this.max-this.min)}_getLabelSize(t){const r=this.options.ticks,a=this.ctx.measureText(t).width,n=xi(this.isHorizontal()?r.maxRotation:r.minRotation),i=Math.cos(n),o=Math.sin(n),c=this._resolveTickFontOptions(0).size;return{w:a*i+c*o,h:a*o+c*i}}_getLabelCapacity(t){const r=this.options.time,a=r.displayFormats,n=a[r.unit]||a.millisecond,i=this._tickFormatFunction(t,0,t3(this,[t],this._majorUnit),n),o=this._getLabelSize(i),c=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return c>0?c:1}getDataTimestamps(){let t=this._cache.data||[],r,a;if(t.length)return t;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(r=0,a=n.length;r<a;++r)t=t.concat(n[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let r,a;if(t.length)return t;const n=this.getLabels();for(r=0,a=n.length;r<a;++r)t.push(QS(this,n[r]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return dD(t.sort(ZS))}}function cf(s,t,r){let a=0,n=s.length-1,i,o,c,u;r?(t>=s[a].pos&&t<=s[n].pos&&({lo:a,hi:n}=Ro(s,"pos",t)),{pos:i,time:c}=s[a],{pos:o,time:u}=s[n]):(t>=s[a].time&&t<=s[n].time&&({lo:a,hi:n}=Ro(s,"time",t)),{time:i,pos:c}=s[a],{time:o,pos:u}=s[n]);const h=o-i;return h?c+(u-c)*(t-i)/h:c}class Dae extends s3{static id="timeseries";static defaults=s3.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(t);this._minPos=cf(r,this.min),this._tableRange=cf(r,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:r,max:a}=this,n=[],i=[];let o,c,u,h,m;for(o=0,c=t.length;o<c;++o)h=t[o],h>=r&&h<=a&&n.push(h);if(n.length<2)return[{time:r,pos:0},{time:a,pos:1}];for(o=0,c=n.length;o<c;++o)m=n[o+1],u=n[o-1],h=n[o],Math.round((m+u)/2)!==h&&i.push({time:h,pos:o/(c-1)});return i}_generate(){const t=this.min,r=this.max;let a=super.getDataTimestamps();return(!a.includes(t)||!a.length)&&a.splice(0,0,t),(!a.includes(r)||a.length===1)&&a.push(r),a.sort((n,i)=>n-i)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const r=this.getDataTimestamps(),a=this.getLabelTimestamps();return r.length&&a.length?t=this.normalize(r.concat(a)):t=r.length?r:a,t=this._cache.all=t,t}getDecimalForValue(t){return(cf(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const r=this._offsets,a=this.getDecimalForPixel(t)/r.factor-r.end;return cf(this._table,a*this._tableRange+this._minPos,!0)}}const s8="label";function r3(s,t){typeof s=="function"?s(t):s&&(s.current=t)}function eJ(s,t){const r=s.options;r&&t&&Object.assign(r,t)}function r8(s,t){s.labels=t}function a8(s,t,r=s8){const a=[];s.datasets=t.map(n=>{const i=s.datasets.find(o=>o[r]===n[r]);return!i||!n.data||a.includes(i)?{...n}:(a.push(i),Object.assign(i,n),i)})}function tJ(s,t=s8){const r={labels:[],datasets:[]};return r8(r,s.labels),a8(r,s.datasets,t),r}function sJ(s,t){const{height:r=150,width:a=300,redraw:n=!1,datasetIdKey:i,type:o,data:c,options:u,plugins:h=[],fallbackContent:m,updateMode:f,...p}=s,v=j.useRef(null),g=j.useRef(null),y=()=>{v.current&&(g.current=new Im(v.current,{type:o,data:tJ(c,i),options:u&&{...u},plugins:h}),r3(t,g.current))},w=()=>{r3(t,null),g.current&&(g.current.destroy(),g.current=null)};return j.useEffect(()=>{!n&&g.current&&u&&eJ(g.current,u)},[n,u]),j.useEffect(()=>{!n&&g.current&&r8(g.current.config.data,c.labels)},[n,c.labels]),j.useEffect(()=>{!n&&g.current&&c.datasets&&a8(g.current.config.data,c.datasets,i)},[n,c.datasets]),j.useEffect(()=>{g.current&&(n?(w(),setTimeout(y)):g.current.update(f))},[n,u,c.labels,c.datasets,f]),j.useEffect(()=>{g.current&&(w(),setTimeout(y))},[o]),j.useEffect(()=>(y(),()=>w()),[]),e.jsx("canvas",{ref:v,role:"img",height:r,width:a,...p,children:m})}const rJ=j.forwardRef(sJ);function D1(s,t){return Im.register(t),j.forwardRef((r,a)=>e.jsx(rJ,{...r,ref:a,type:s}))}const n8=D1("line",FX),aJ=D1("bar",LX),i8=D1("doughnut",BX);Im.register(e8,t8,UD,$m,HD,zD,ZD,JD,KD,YD);const nJ=()=>{const[s,t]=j.useState(!0),[r,a]=j.useState(!1),[n,i]=j.useState(7),[o,c]=j.useState("users"),[u,h]=j.useState(null),[m,f]=j.useState([]),p=j.useCallback((C,A="info")=>{const X=Date.now().toString();f(I=>[...I,{id:X,message:C,type:A}]),setTimeout(()=>{f(I=>I.filter(V=>V.id!==X))},4e3)},[]),v=j.useCallback(async()=>{t(!0);try{const C=await Bk.getDashboard(n);C.success?(h(C.data),p("  ","success")):p("   ","error")}catch(C){console.error("Error loading analytics:",C),p("   ","error")}finally{t(!1)}},[n,p]);j.useEffect(()=>{v()},[v]);const g=j.useCallback(()=>{v()},[v]),y=j.useCallback(C=>{i(C)},[]),w=j.useCallback(async()=>{a(!0);try{const C=await Bk.exportAnalytics("json",n);if(C.success){const A=JSON.stringify(C,null,2),X=new Blob([A],{type:"application/json"}),I=URL.createObjectURL(X),V=document.createElement("a");V.href=I,V.download=`analytics_report_${n}days_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(V),V.click(),document.body.removeChild(V),URL.revokeObjectURL(I),p("  ","success")}else p("  ","error")}catch(C){console.error("Error exporting report:",C),p("  ","error")}finally{a(!1)}},[n,p]),N=j.useCallback(()=>{p("       ","info")},[p]),k=j.useMemo(()=>{if(!u)return null;let C=[],A=[],X="",I="",V="";if(o==="users"&&u.user_statistics?.daily_registrations)C=u.user_statistics.daily_registrations.map(R=>new Date(R.date).toLocaleDateString("ru-RU",{day:"numeric",month:"short"})),A=u.user_statistics.daily_registrations.map(R=>R.registrations),X=" ",I="#667eea",V="rgba(102, 126, 234, 0.1)";else if(o==="projects"&&u.project_statistics?.daily_projects)C=u.project_statistics.daily_projects.map(R=>new Date(R.date).toLocaleDateString("ru-RU",{day:"numeric",month:"short"})),A=u.project_statistics.daily_projects.map(R=>R.projects),X=" ",I="#28a745",V="rgba(40, 167, 69, 0.1)";else if(o==="revenue"){const R=n;C=Array.from({length:R},(ee,se)=>{const W=new Date;return W.setDate(W.getDate()-(R-1-se)),W.toLocaleDateString("ru-RU",{day:"numeric",month:"short"})});const H=5e4;A=Array.from({length:R},(ee,se)=>Math.round(H+Math.random()*25e3+se*500)),X=" ()",I="#ffc107",V="rgba(255, 193, 7, 0.1)"}return{labels:C,datasets:[{label:X,data:A,borderColor:I,backgroundColor:V,tension:.4,fill:!0,pointBackgroundColor:I,pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6}]}},[u,o,n]),S=j.useMemo(()=>{if(!u?.project_statistics?.status_distribution)return null;const C=u.project_statistics.status_distribution;return{labels:["","",""," ","","",""],datasets:[{data:[C.new||0,C.review||0,C.accepted||0,C.in_progress||0,C.testing||0,C.completed||0,C.cancelled||0],backgroundColor:["#17a2b8","#ffc107","#28a745","#007bff","#6f42c1","#20c997","#dc3545"],borderWidth:0}]}},[u]),_=j.useMemo(()=>({labels:["","","",""],datasets:[{label:" ",data:[15,25,12,8],backgroundColor:["#28a745","#ffc107","#fd7e14","#dc3545"],borderRadius:8}]}),[]),T={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:"#fff",font:{size:12}}}},scales:{y:{beginAtZero:!0,ticks:{color:"#9ca3af"},grid:{color:"rgba(255, 255, 255, 0.1)"}},x:{ticks:{color:"#9ca3af"},grid:{color:"rgba(255, 255, 255, 0.1)"}}}},E={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:"#fff",font:{size:11}}}}},z=C=>new Intl.NumberFormat("ru-RU").format(Math.round(C)),O=C=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0,maximumFractionDigits:0}).format(C);return s&&!u?e.jsx("div",{className:"p-8 flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Pt,{className:"w-12 h-12 animate-spin text-purple-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:" ..."})]})}):e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-rose-500 to-orange-600 flex items-center justify-center shadow-lg shadow-rose-500/50",children:e.jsx(Ya,{className:"w-6 h-6 text-gray-900"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"  "}),e.jsx("p",{className:"text-gray-600",children:"   "})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:g,disabled:s,className:"px-4 py-2.5 bg-gray-50 hover:bg-gray-100 text-gray-900 rounded-xl transition-all duration-300 flex items-center gap-2 border border-gray-200",children:[e.jsx(ls,{className:`w-4 h-4 ${s?"animate-spin":""}`}),e.jsx("span",{children:""})]}),e.jsxs("button",{onClick:w,disabled:r,className:"px-4 py-2.5 bg-gradient-to-br from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-gray-900 rounded-xl transition-all duration-300 flex items-center gap-2 shadow-lg shadow-green-500/50",children:[r?e.jsx(Pt,{className:"w-4 h-4 animate-spin"}):e.jsx(Tt,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]}),e.jsxs("button",{onClick:N,className:"px-4 py-2.5 bg-gradient-to-br from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700 text-gray-900 rounded-xl transition-all duration-300 flex items-center gap-2 shadow-lg shadow-blue-500/50",children:[e.jsx(Ve,{className:"w-4 h-4"}),e.jsx("span",{children:"  "})]})]})]}),e.jsx("div",{className:"bg-white backdrop-blur-sm border border-gray-200 rounded-2xl p-6",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-gray-900 font-semibold mb-1",children:" "}),e.jsx("p",{className:"text-sm text-gray-600",children:"    "})]}),e.jsx("div",{className:"flex gap-2",children:[7,30,90,365].map(C=>e.jsx("button",{onClick:()=>y(C),className:`px-6 py-2.5 rounded-xl font-medium transition-all duration-300 ${n===C?"bg-gradient-to-br from-purple-500 to-pink-500 text-gray-900 shadow-lg":"bg-white text-gray-600 hover:bg-gray-50 hover:text-gray-900 border border-gray-200"}`,children:C===7?"7 ":C===30?"30 ":C===90?"90 ":""},C))})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-500/20 to-pink-500/20 backdrop-blur-sm border border-purple-500/30 rounded-2xl p-6 hover:scale-105 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center shadow-lg",children:e.jsx(it,{className:"w-6 h-6 text-gray-900"})}),e.jsxs("span",{className:"text-xs text-purple-300 bg-purple-500/20 px-2 py-1 rounded-lg",children:["+",u?.user_statistics?.new_users||0,"  "]})]}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-1",children:z(u?.user_statistics?.total_users||0)}),e.jsx("p",{className:"text-purple-200",children:" "})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500/20 to-emerald-500/20 backdrop-blur-sm border border-green-500/30 rounded-2xl p-6 hover:scale-105 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center shadow-lg",children:e.jsx(xt,{className:"w-6 h-6 text-gray-900"})}),e.jsx("span",{className:"text-xs text-green-300 bg-green-500/20 px-2 py-1 rounded-lg",children:"  "})]}),e.jsxs("h3",{className:"text-3xl font-bold text-gray-900 mb-1",children:[(u?.conversion_funnel?.overall_conversion||0).toFixed(1),"%"]}),e.jsx("p",{className:"text-green-200",children:" "})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500/20 to-cyan-500/20 backdrop-blur-sm border border-blue-500/30 rounded-2xl p-6 hover:scale-105 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center shadow-lg",children:e.jsx(Qe,{className:"w-6 h-6 text-gray-900"})}),e.jsxs("span",{className:"text-xs text-blue-300 bg-blue-500/20 px-2 py-1 rounded-lg",children:[". : ",O(u?.financial_report?.avg_check||0)]})]}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-1",children:O(u?.financial_report?.total_revenue||0)}),e.jsx("p",{className:"text-blue-200",children:""})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-500/20 to-orange-500/20 backdrop-blur-sm border border-amber-500/30 rounded-2xl p-6 hover:scale-105 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-amber-500 to-orange-500 flex items-center justify-center shadow-lg",children:e.jsx(Is,{className:"w-6 h-6 text-gray-900"})}),e.jsx("span",{className:"text-xs text-amber-300 bg-amber-500/20 px-2 py-1 rounded-lg",children:"AI "})]}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-1",children:(u?.consultant_statistics?.avg_rating||0).toFixed(1)}),e.jsx("p",{className:"text-amber-200",children:" "})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white backdrop-blur-sm border border-gray-200 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ph,{className:"w-5 h-5 text-purple-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" "})]}),e.jsx("div",{className:"flex gap-2",children:["users","projects","revenue"].map(C=>e.jsx("button",{onClick:()=>c(C),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 ${o===C?"bg-gradient-to-br from-purple-500 to-pink-500 text-gray-900":"bg-white text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:C==="users"?"":C==="projects"?"":""},C))})]}),e.jsx("div",{className:"h-[300px]",children:k&&e.jsx(n8,{data:k,options:T})})]}),e.jsxs("div",{className:"bg-white backdrop-blur-sm border border-gray-200 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Lr,{className:"w-5 h-5 text-purple-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" "})]}),e.jsx("div",{className:"space-y-3",children:[{label:"",value:u?.conversion_funnel?.total_users||0,width:100,gradient:"from-purple-500 to-pink-500"},{label:" ",value:u?.conversion_funnel?.users_with_projects||0,width:u?.conversion_funnel?.project_creation_rate||0,gradient:"from-blue-500 to-cyan-500"},{label:" ",value:u?.conversion_funnel?.users_with_accepted_projects||0,width:u?.conversion_funnel?.project_acceptance_rate||0,gradient:"from-green-500 to-emerald-500"},{label:" ",value:u?.conversion_funnel?.users_with_completed_projects||0,width:u?.conversion_funnel?.project_completion_rate||0,gradient:"from-amber-500 to-orange-500"}].map((C,A)=>e.jsx("div",{className:"group",children:e.jsx("div",{className:`bg-gradient-to-br ${C.gradient} rounded-xl p-4 transition-all duration-300 hover:scale-105 hover:shadow-lg`,style:{width:`${C.width}%`},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-900 text-sm font-medium",children:C.label}),e.jsx("span",{className:"text-gray-900 text-lg font-bold bg-gray-100 px-2 py-1 rounded-lg",children:C.value})]})})},A))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white backdrop-blur-sm border border-gray-200 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Ph,{className:"w-5 h-5 text-purple-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" "})]}),e.jsx("div",{className:"h-[300px]",children:S&&e.jsx(i8,{data:S,options:E})})]}),e.jsxs("div",{className:"bg-white backdrop-blur-sm border border-gray-200 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Hf,{className:"w-5 h-5 text-purple-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" "})]}),e.jsx("div",{className:"h-[300px]",children:e.jsx(aJ,{data:_,options:T})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white backdrop-blur-sm border border-gray-200 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Ga,{className:"w-5 h-5 text-purple-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" "})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[{label:"  AI",value:`${(u?.performance_metrics?.avg_response_time||0).toFixed(1)}`},{label:"  ",value:`${(u?.performance_metrics?.avg_acceptance_time||0).toFixed(1)}`},{label:" ",value:`${(u?.performance_metrics?.avg_development_time||0).toFixed(1)}`},{label:" ",value:`${(u?.performance_metrics?.time_estimation_accuracy||0).toFixed(1)}%`}].map((C,A)=>e.jsxs("div",{className:"bg-white rounded-xl p-4 hover:bg-gray-50 transition-all duration-300",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:C.value}),e.jsx("div",{className:"text-sm text-gray-600",children:C.label})]},A))}),e.jsx("div",{className:"space-y-4",children:[{label:"  AI",value:(u?.consultant_statistics?.avg_rating||0)*20,color:"bg-green-500"},{label:"  ",value:u?.conversion_funnel?.overall_conversion||0,color:"bg-blue-500"},{label:" ",value:u?.engagement_metrics?.retention_rate||0,color:"bg-cyan-500"}].map((C,A)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-700",children:C.label}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[C.value.toFixed(1),"%"]})]}),e.jsx("div",{className:"h-2 bg-gray-50 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${C.color} rounded-full transition-all duration-500`,style:{width:`${C.value}%`}})})]},A))})]}),e.jsxs("div",{className:"bg-white backdrop-blur-sm border border-gray-200 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Ph,{className:"w-5 h-5 text-purple-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" "})]}),e.jsx("div",{className:"space-y-4",children:[{label:"  (DAU)",value:u?.engagement_metrics?.daily_active_users||0,width:75},{label:"   ",value:u?.project_statistics?.new_projects||0,width:60},{label:" ",value:u?.project_statistics?.completed_projects||0,width:45},{label:" ",value:u?.consultant_statistics?.new_sessions||0,width:85},{label:"   ",value:O(u?.financial_report?.avg_check||0),width:70,isString:!0}].map((C,A)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:C.label}),e.jsx("div",{className:"h-8 bg-gray-50 rounded-lg overflow-hidden relative",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-emerald-500 transition-all duration-500",style:{width:`${C.width}%`}})})]}),e.jsx("div",{className:"text-lg font-bold text-gray-900 min-w-[80px] text-right",children:C.isString?C.value:z(C.value)})]},A))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white backdrop-blur-sm border border-gray-200 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Hf,{className:"w-5 h-5 text-purple-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"   "})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-600",children:""}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-600",children:""}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-600",children:""})]})}),e.jsx("tbody",{children:[{name:"@user123",projects:3,revenue:15e4},{name:"@company_bot",projects:2,revenue:12e4},{name:"@startup_xyz",projects:1,revenue:8e4},{name:"@ecommerce_pro",projects:2,revenue:75e3},{name:"@crypto_trader",projects:1,revenue:6e4}].map((C,A)=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-white transition-colors",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-gray-900 text-xs font-bold",children:A+1}),e.jsx("span",{className:"text-gray-900",children:C.name})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-300 rounded-lg text-sm",children:C.projects})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-gray-900 font-semibold",children:O(C.revenue)})})]},A))})]})})]}),e.jsxs("div",{className:"bg-white backdrop-blur-sm border border-gray-200 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Ue,{className:"w-5 h-5 text-purple-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"  "})]}),e.jsx("div",{className:"space-y-4",children:u?.consultant_statistics?.popular_topics&&Object.keys(u.consultant_statistics.popular_topics).length>0?Object.entries(u.consultant_statistics.popular_topics).sort(([,C],[,A])=>A-C).slice(0,5).map(([C,A],X)=>{const I=Math.max(...Object.values(u.consultant_statistics?.popular_topics||{})),V=A/I*100;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-700",children:C}),e.jsx("span",{className:"px-2 py-1 bg-purple-500/20 text-purple-300 rounded-lg text-xs font-semibold",children:A})]}),e.jsx("div",{className:"h-2 bg-gray-50 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-pink-500 rounded-full transition-all duration-500",style:{width:`${V}%`}})})]},X)}):e.jsx("p",{className:"text-center text-gray-600 py-8",children:"   "})})]})]}),e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:m.map(C=>e.jsx("div",{className:`px-4 py-3 rounded-xl shadow-lg backdrop-blur-sm border transition-all duration-300 ${C.type==="success"?"bg-green-500/20 border-green-500/50 text-green-300":C.type==="error"?"bg-red-500/20 border-red-500/50 text-red-300":"bg-blue-500/20 border-blue-500/50 text-blue-300"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[C.type==="success"?e.jsx(xt,{className:"w-4 h-4"}):C.type==="error"?e.jsx(Da,{className:"w-4 h-4"}):e.jsx(Ya,{className:"w-4 h-4"}),e.jsx("span",{children:C.message})]})},C.id))})]})},wh={getDashboardMetrics:async()=>(await fe.get("/admin/api/reports/dashboard-metrics")).data,getProjectsReport:async s=>{const t={};return s?.start_date&&(t.start_date=s.start_date),s?.end_date&&(t.end_date=s.end_date),s?.status&&(t.status=s.status),s?.executor_id&&(t.executor_id=s.executor_id),(await fe.get("/admin/api/reports/projects",{params:t})).data},getFinancialReport:async s=>{const t={};return s?.start_date&&(t.start_date=s.start_date),s?.end_date&&(t.end_date=s.end_date),(await fe.get("/admin/api/reports/financial",{params:t})).data},getExecutorReport:async s=>(await fe.get(`/admin/api/reports/executor/${s}`)).data,getQuickStats:async(s="month")=>(await fe.get("/admin/api/reports/quick-stats",{params:{period:s}})).data,getPnLReport:async(s="month",t,r)=>{const a={period:s};return t&&(a.start_date=t),r&&(a.end_date=r),(await fe.get("/admin/api/reports/pnl",{params:a})).data},exportToExcel:async(s,t)=>{const r={report_type:s};t?.start_date&&(r.start_date=t.start_date),t?.end_date&&(r.end_date=t.end_date),t?.status&&(r.status=t.status),t?.executor_id&&(r.executor_id=t.executor_id);const a=await fe.get("/admin/api/reports/export/excel",{params:r,responseType:"blob"}),n=window.URL.createObjectURL(new Blob([a.data])),i=document.createElement("a");return i.href=n,i.setAttribute("download",`${s}_report_${new Date().toISOString().split("T")[0]}.xlsx`),document.body.appendChild(i),i.click(),i.remove(),{success:!0}}};Im.register(e8,t8,UD,$m,HD,zD,ZD,JD,KD,YD);const iJ=()=>{const[s,t]=j.useState(!0),[r,a]=j.useState("overview"),[n,i]=j.useState("week"),[o,c]=j.useState(null),[u,h]=j.useState(null),[m,f]=j.useState(null),[p,v]=j.useState(null),[g,y]=j.useState([]),[w,N]=j.useState(""),[k,S]=j.useState(""),[_,T]=j.useState(""),[E,z]=j.useState(""),[O,C]=j.useState([]),A=j.useCallback((oe,ce="info")=>{const U=Date.now().toString();C(F=>[...F,{id:U,message:oe,type:ce}]),setTimeout(()=>{C(F=>F.filter(Z=>Z.id!==U))},4e3)},[]),X=j.useCallback(async()=>{try{const oe=await wh.getDashboardMetrics();oe.success&&c(oe.metrics)}catch(oe){console.error("Error loading dashboard metrics:",oe),A("   ","error")}},[A]),I=j.useCallback(async oe=>{try{const ce=await wh.getQuickStats(oe);ce.success&&h(ce.stats)}catch(ce){console.error("Error loading quick stats:",ce),A("   ","error")}},[A]),V=j.useCallback(async()=>{try{const oe={};w&&(oe.start_date=w),k&&(oe.end_date=k),_&&(oe.status=_),E&&(oe.executor_id=parseInt(E));const ce=await wh.getProjectsReport(oe);ce.success&&f(ce.report)}catch(oe){console.error("Error loading projects report:",oe),A("    ","error")}},[w,k,_,E,A]),R=j.useCallback(async()=>{try{const oe={};w&&(oe.start_date=w),k&&(oe.end_date=k);const ce=await wh.getFinancialReport(oe);ce.success&&v(ce.report)}catch(oe){console.error("Error loading financial report:",oe),A("   ","error")}},[w,k,A]);j.useEffect(()=>{(async()=>{t(!0),await Promise.all([X(),I(n)]),t(!1)})()},[X,I,n]),j.useEffect(()=>{r==="financial"?R():r==="projects"&&V()},[r,R,V]);const H=oe=>{i(oe),ee(oe),I(oe)},ee=oe=>{const ce=new Date;let U;switch(oe){case"today":U=ce;break;case"week":U=new Date(ce.getTime()-10080*60*1e3);break;case"month":U=new Date(ce.getFullYear(),ce.getMonth(),1);break;case"year":U=new Date(ce.getFullYear(),0,1);break;default:U=new Date(ce.getTime()-10080*60*1e3)}N(U.toISOString().split("T")[0]),S(ce.toISOString().split("T")[0])},se=()=>{r==="financial"?R():r==="projects"&&V()},W=async oe=>{try{const ce={};w&&(ce.start_date=w),k&&(ce.end_date=k),oe==="projects"&&_&&(ce.status=_),oe==="projects"&&E&&(ce.executor_id=parseInt(E)),await wh.exportToExcel(oe,ce),A("  ","success")}catch(ce){console.error("Error exporting report:",ce),A("  ","error")}},te=async()=>{t(!0),await Promise.all([X(),I(n)]),r==="financial"?await R():r==="projects"&&await V(),t(!1),A(" ","success")},J=oe=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",maximumFractionDigits:0}).format(oe),K=oe=>new Date(oe).toLocaleDateString("ru-RU",{year:"numeric",month:"short",day:"numeric"}),$=oe=>{const U={new:{label:"",className:"bg-blue-100 text-blue-700"},in_progress:{label:" ",className:"bg-yellow-100 text-yellow-700"},completed:{label:"",className:"bg-green-100 text-green-700"},overdue:{label:"",className:"bg-red-100 text-red-700"},cancelled:{label:"",className:"bg-gray-100 text-gray-700"}}[oe]||{label:oe,className:"bg-gray-100 text-gray-700"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${U.className}`,children:U.label})},ie=j.useMemo(()=>p?.monthly_data?{labels:p.monthly_data.map(oe=>oe.month),datasets:[{label:"",data:p.monthly_data.map(oe=>oe.income),borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",tension:.4,fill:!0},{label:"",data:p.monthly_data.map(oe=>oe.expense),borderColor:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",tension:.4,fill:!0}]}:{labels:[],datasets:[]},[p]),ne=j.useMemo(()=>{if(!p?.expense_categories)return{labels:[],datasets:[]};const oe=Object.keys(p.expense_categories),ce=Object.values(p.expense_categories);return{labels:oe,datasets:[{data:ce,backgroundColor:["#667eea","#764ba2","#f093fb","#f5576c","#4facfe","#00f2fe","#43e97b","#38f9d7"]}]}},[p]);return s&&!o?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx(Pt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"max-w-[2000px] mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"  "}),e.jsx("p",{className:"text-gray-600 mt-1",children:"    "})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("button",{onClick:te,disabled:s,className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-200 disabled:opacity-50",children:e.jsx(ls,{className:`w-5 h-5 ${s?"animate-spin":""}`})})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4 border border-gray-200",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"date",value:w,onChange:oe=>N(oe.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"}),e.jsx("span",{className:"text-gray-500",children:""}),e.jsx("input",{type:"date",value:k,onChange:oe=>S(oe.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"}),e.jsxs("button",{onClick:se,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-all",children:[e.jsx(wr,{className:"w-4 h-4"}),""]})]}),e.jsx("div",{className:"flex items-center gap-2 ml-auto",children:["today","week","month","year"].map(oe=>e.jsxs("button",{onClick:()=>H(oe),className:`px-4 py-2 rounded-lg transition-all ${n===oe?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:[oe==="today"&&"",oe==="week"&&"",oe==="month"&&"",oe==="year"&&""]},oe))})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"flex border-b border-gray-200",children:[{id:"overview",label:"",icon:vp},{id:"financial",label:"",icon:Qe},{id:"projects",label:"",icon:qa},{id:"executors",label:"",icon:it}].map(oe=>{const ce=oe.icon;return e.jsxs("button",{onClick:()=>a(oe.id),className:`flex-1 flex items-center justify-center gap-2 px-6 py-4 font-medium transition-all relative ${r===oe.id?"text-indigo-600 bg-indigo-50":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(ce,{className:"w-5 h-5"}),oe.label,r===oe.id&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-indigo-600 to-purple-600"})]},oe.id)})}),e.jsxs("div",{className:"p-6",children:[r==="overview"&&e.jsxs("div",{className:"space-y-6",children:[o&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl shadow-lg p-6 border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center shadow-lg",children:e.jsx(xt,{className:"w-6 h-6 text-white"})}),e.jsxs("span",{className:`flex items-center gap-1 text-sm font-medium ${o.changes.income_change>=0?"text-green-600":"text-red-600"}`,children:[o.changes.income_change>=0?e.jsx(E4,{className:"w-4 h-4"}):e.jsx(T4,{className:"w-4 h-4"}),Math.abs(o.changes.income_change).toFixed(1),"%"]})]}),e.jsx("div",{className:"text-3xl font-bold text-green-700 mb-1",children:J(o.current_month.income)}),e.jsx("div",{className:"text-sm text-gray-600",children:"  "})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 rounded-xl shadow-lg p-6 border border-red-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-red-500 to-rose-500 flex items-center justify-center shadow-lg",children:e.jsx(Da,{className:"w-6 h-6 text-white"})}),e.jsxs("span",{className:`flex items-center gap-1 text-sm font-medium ${o.changes.expense_change>=0?"text-red-600":"text-green-600"}`,children:[o.changes.expense_change>=0?e.jsx(E4,{className:"w-4 h-4"}):e.jsx(T4,{className:"w-4 h-4"}),Math.abs(o.changes.expense_change).toFixed(1),"%"]})]}),e.jsx("div",{className:"text-3xl font-bold text-red-700 mb-1",children:J(o.current_month.expense)}),e.jsx("div",{className:"text-sm text-gray-600",children:""})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl shadow-lg p-6 border border-blue-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center shadow-lg",children:e.jsx(Qe,{className:"w-6 h-6 text-white"})})}),e.jsx("div",{className:`text-3xl font-bold mb-1 ${o.current_month.profit>=0?"text-blue-700":"text-red-700"}`,children:J(o.current_month.profit)}),e.jsx("div",{className:"text-sm text-gray-600",children:""})]}),u&&e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 rounded-xl shadow-lg p-6 border border-purple-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-violet-500 flex items-center justify-center shadow-lg",children:e.jsx(qa,{className:"w-6 h-6 text-white"})})}),e.jsx("div",{className:"text-3xl font-bold text-purple-700 mb-1",children:u.projects.completed}),e.jsxs("div",{className:"text-sm text-gray-600",children:["  (",u.projects.completion_rate.toFixed(1),"% )"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"    "}),e.jsx("div",{className:"h-80",children:e.jsx(n8,{data:ie,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top"}},scales:{y:{beginAtZero:!0,ticks:{callback:function(oe){return J(oe)}}}}}})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:" "}),e.jsx("div",{className:"h-80",children:e.jsx(i8,{data:ne,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}})})]})]}),u&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(HF,{className:"w-5 h-5 text-yellow-500"})," "]}),e.jsxs("div",{className:"space-y-3",children:[u.top_clients.slice(0,5).map((oe,ce)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-yellow-100 text-yellow-700 text-xs font-bold",children:ce+1}),e.jsx("span",{className:"text-gray-700",children:oe.name})]}),e.jsx("span",{className:"font-semibold text-gray-900",children:J(oe.total_revenue)})]},ce)),u.top_clients.length===0&&e.jsx("div",{className:"text-center text-gray-500 py-4",children:" "})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Is,{className:"w-5 h-5 text-blue-500"})," "]}),e.jsx("div",{className:"space-y-3",children:u.projects&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-blue-50",children:[e.jsx("span",{className:"text-gray-700",children:" "}),e.jsx("span",{className:"font-semibold text-blue-700",children:u.projects.total})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-green-50",children:[e.jsx("span",{className:"text-gray-700",children:""}),e.jsx("span",{className:"font-semibold text-green-700",children:u.projects.completed})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-yellow-50",children:[e.jsx("span",{className:"text-gray-700",children:" "}),e.jsx("span",{className:"font-semibold text-yellow-700",children:u.projects.in_progress})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(it,{className:"w-5 h-5 text-green-500"})," "]}),e.jsxs("div",{className:"space-y-3",children:[u.top_executors.slice(0,5).map((oe,ce)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-green-100 text-green-700 text-xs font-bold",children:ce+1}),e.jsx("span",{className:"text-gray-700",children:oe.name})]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[oe.completed_count," "]})]},ce)),u.top_executors.length===0&&e.jsx("div",{className:"text-center text-gray-500 py-4",children:" "})]})]})]})]}),r==="financial"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl shadow-lg p-6 border border-indigo-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[e.jsx(Vr,{className:"w-5 h-5 text-indigo-600"}),"     (P&L)"]}),e.jsx("p",{className:"text-gray-600",children:"         "})]}),e.jsxs("a",{href:"/admin/reports/pnl-page",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg",children:[e.jsx(Gc,{className:"w-5 h-5"}),"  "]})]}),p&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg border border-gray-200",children:[e.jsx(xt,{className:"w-8 h-8 text-green-500 mx-auto mb-2"}),e.jsx("div",{className:"text-sm text-gray-600",children:""}),e.jsx("div",{className:"text-2xl font-bold text-green-700",children:J(p.summary.total_income)})]}),e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg border border-gray-200",children:[e.jsx(Da,{className:"w-8 h-8 text-red-500 mx-auto mb-2"}),e.jsx("div",{className:"text-sm text-gray-600",children:""}),e.jsx("div",{className:"text-2xl font-bold text-red-700",children:J(p.summary.total_expense)})]}),e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg border border-gray-200",children:[e.jsx(Vr,{className:"w-8 h-8 text-blue-500 mx-auto mb-2"}),e.jsx("div",{className:"text-sm text-gray-600",children:""}),e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:J(p.summary.profit)})]})]})]}),p&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:" "}),e.jsxs("button",{onClick:()=>W("financial"),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all",children:[e.jsx(Tt,{className:"w-4 h-4"}),"Excel"]})]}),p.monthly_data&&p.monthly_data.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 text-gray-600 font-semibold",children:""}),e.jsx("th",{className:"text-right py-3 px-4 text-gray-600 font-semibold",children:""}),e.jsx("th",{className:"text-right py-3 px-4 text-gray-600 font-semibold",children:""}),e.jsx("th",{className:"text-right py-3 px-4 text-gray-600 font-semibold",children:""}),e.jsx("th",{className:"text-right py-3 px-4 text-gray-600 font-semibold",children:""})]})}),e.jsx("tbody",{children:p.monthly_data.map((oe,ce)=>{const U=oe.income>0?oe.profit/oe.income*100:0;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 text-gray-700",children:oe.month}),e.jsx("td",{className:"py-3 px-4 text-right text-green-600 font-medium",children:J(oe.income)}),e.jsx("td",{className:"py-3 px-4 text-right text-red-600 font-medium",children:J(oe.expense)}),e.jsx("td",{className:`py-3 px-4 text-right font-medium ${oe.profit>=0?"text-green-600":"text-red-600"}`,children:J(oe.profit)}),e.jsxs("td",{className:"py-3 px-4 text-right text-gray-700",children:[U.toFixed(1),"%"]})]},ce)})})]})}):e.jsx("div",{className:"text-center text-gray-500 py-8",children:"    "})]})]}),r==="projects"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4 border border-gray-200",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("select",{value:_,onChange:oe=>T(oe.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"new",children:""}),e.jsx("option",{value:"in_progress",children:" "}),e.jsx("option",{value:"completed",children:""}),e.jsx("option",{value:"overdue",children:""})]}),e.jsx("select",{value:E,onChange:oe=>z(oe.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:e.jsx("option",{value:"",children:" "})})]})}),m&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"  "}),e.jsxs("button",{onClick:()=>W("projects"),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all",children:[e.jsx(Tt,{className:"w-4 h-4"}),"Excel"]})]}),m.projects.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 text-gray-600 font-semibold",children:""}),e.jsx("th",{className:"text-left py-3 px-4 text-gray-600 font-semibold",children:""}),e.jsx("th",{className:"text-left py-3 px-4 text-gray-600 font-semibold",children:""}),e.jsx("th",{className:"text-left py-3 px-4 text-gray-600 font-semibold",children:""}),e.jsx("th",{className:"text-right py-3 px-4 text-gray-600 font-semibold",children:""}),e.jsx("th",{className:"text-left py-3 px-4 text-gray-600 font-semibold",children:""}),e.jsx("th",{className:"text-left py-3 px-4 text-gray-600 font-semibold",children:""})]})}),e.jsx("tbody",{children:m.projects.map(oe=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 text-gray-700",children:oe.title}),e.jsx("td",{className:"py-3 px-4 text-gray-700",children:oe.client}),e.jsx("td",{className:"py-3 px-4 text-gray-700",children:oe.executor||"-"}),e.jsx("td",{className:"py-3 px-4",children:$(oe.status)}),e.jsx("td",{className:"py-3 px-4 text-right text-gray-700",children:J(oe.estimated_cost||0)}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500",style:{width:`${oe.completion_percentage}%`}})}),e.jsxs("span",{className:"text-sm text-gray-600 w-12",children:[oe.completion_percentage,"%"]})]})}),e.jsx("td",{className:"py-3 px-4 text-gray-700",children:oe.deadline?K(oe.deadline):"-"})]},oe.id))})]})}):e.jsx("div",{className:"text-center text-gray-500 py-8",children:" "})]})]}),r==="executors"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"  "}),e.jsx("div",{className:"text-center text-gray-500 py-8",children:"  "})]})})]})]})]}),e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:O.map(oe=>e.jsx("div",{className:`px-6 py-3 rounded-lg shadow-lg text-white ${oe.type==="success"?"bg-green-500":oe.type==="error"?"bg-red-500":"bg-blue-500"} animate-slide-in`,children:oe.message},oe.id))})]})},Ua={getEmployeesWithSettings:async()=>(await fe.get("/admin/notifications/api/employees")).data.employees||[],getEmployees:async()=>(await fe.get("/admin/api/users/api")).data.users||[],getEmployeeSettings:async s=>(await fe.get(`/admin/notifications/api/settings/${s}`)).data.settings,updateEmployeeSettings:async(s,t)=>(await fe.put(`/admin/notifications/api/settings/${s}`,t,{headers:{"Content-Type":"application/json"}})).data,getNotificationTypes:async()=>(await fe.get("/admin/notifications/api/types")).data.types,getQueueStats:async()=>(await fe.get("/admin/notifications/stats/queue")).data,getQueue:async s=>(await fe.get("/admin/notifications/queue",{params:s})).data,getLogs:async s=>(await fe.get("/admin/notifications/log",{params:s})).data,sendTestNotification:async s=>(await fe.post(`/admin/notifications/test/${s}`)).data,processQueue:async()=>(await fe.post("/admin/notifications/process-queue")).data,getStats:async(s=7)=>(await fe.get("/admin/notifications/stats",{params:{days:s}})).data.data,testAdminNotification:async()=>(await fe.post("/admin/api/notifications/test-admin",{message:"   React -"})).data,testErrorNotification:async()=>(await fe.post("/admin/api/notifications/test-error",{error:"   React -",context:{source:"react-admin-panel",timestamp:new Date().toISOString()}})).data,testDailyReport:async()=>(await fe.post("/admin/api/notifications/daily-report")).data,testAvitoNotification:async()=>(await fe.post("/admin/api/notifications/test-avito")).data,getProjects:async()=>(await fe.get("/admin/api/projects/")).data.projects||[],updateProjectStatus:async(s,t,r)=>(await fe.put(`/admin/api/projects/${s}/status`,{status:t,comment:r||"    React -"})).data,getBotStatus:async()=>(await fe.get("/admin/api/notifications/bot-status")).data},lJ=()=>{const[s,t]=j.useState([]),[r,a]=j.useState([]),[n,i]=j.useState(null),[o,c]=j.useState("in_progress"),[u,h]=j.useState(!0),[m,f]=j.useState({online:!1,checking:!0}),[p,v]=j.useState([]),[g,y]=j.useState({}),[w,N]=j.useState([]),k=j.useCallback((H,ee="info")=>{const se=Date.now();N(W=>[...W,{id:se,message:H,type:ee}]),setTimeout(()=>{N(W=>W.filter(te=>te.id!==se))},3e3)},[]),S=j.useCallback((H,ee="info")=>{const se={id:Date.now(),message:H,type:ee,timestamp:new Date().toLocaleString("ru-RU")};v(W=>[se,...W.slice(0,9)])},[]),_=j.useCallback(async()=>{try{h(!0);const[H,ee]=await Promise.all([Ua.getEmployees(),Ua.getProjects()]);t(H),a(ee);const se=H.map(async J=>{try{const K=await Ua.getEmployeeSettings(J.id);return{id:J.id,settings:K}}catch{return{id:J.id,settings:null}}}),W=await Promise.all(se),te={};W.forEach(({id:J,settings:K})=>{K&&(te[J]=K)}),y(te)}catch(H){console.error("Error loading data:",H),S("  ","error")}finally{h(!1)}},[S]),T=j.useCallback(async()=>{try{f(ee=>({...ee,checking:!0}));const H=await Ua.getBotStatus();f({online:H.success,username:H.bot_info?.username,checking:!1})}catch{f({online:!1,checking:!1})}},[]),E=j.useCallback(async()=>{try{S("   ...","info");const H=await Ua.testAdminNotification();H.success?(S("  ","success"),k(" ","success")):(S(`: ${H.message}`,"error"),k(" ","error"))}catch(H){console.error("Error:",H),S("  ","error"),k(" ","error")}},[S,k]),z=j.useCallback(async()=>{try{S("    ...","info");const H=await Ua.testErrorNotification();H.success?(S("   ","success"),k(" ","success")):(S(`: ${H.message}`,"error"),k(" ","error"))}catch(H){console.error("Error:",H),S("  ","error"),k(" ","error")}},[S,k]),O=j.useCallback(async()=>{try{S("  ...","info");const H=await Ua.testDailyReport();H.success?(S("  ","success"),k(" ","success")):(S(`: ${H.message}`,"error"),k(" ","error"))}catch(H){console.error("Error:",H),S("  ","error"),k(" ","error")}},[S,k]),C=j.useCallback(async()=>{try{S("  Avito ...","info");const H=await Ua.testAvitoNotification();H.success?(S("Avito  ","success"),k(" ","success")):(S(`: ${H.message}`,"error"),k(" ","error"))}catch(H){console.error("Error:",H),S("  Avito ","error"),k(" ","error")}},[S,k]),A=j.useCallback(async()=>{if(!n){k(" ","error"),S(" ","error");return}if(!r.find(ee=>ee.id===n)){k("  ","error");return}try{S(`    #${n}...`,"info");const ee=await Ua.updateProjectStatus(n,o,"    React -");ee.success?(S(`  #${n} `,"success"),k("  ","success")):(S(`: ${ee.message}`,"error"),k("  ","error"))}catch(ee){console.error("Error:",ee),S("  ","error"),k("  ","error")}},[n,o,r,S,k]),X=j.useCallback(async(H,ee,se)=>{try{y(W=>({...W,[H]:{...W[H],[ee]:se}})),S(` "${ee}" `,"success")}catch(W){console.error("Error updating setting:",W),S("  ","error")}},[S]),I=j.useCallback(async H=>{try{const ee=g[H];if(!ee)return;await Ua.updateEmployeeSettings(H,ee),S(" ","success"),k(" ","success")}catch(ee){console.error("Error saving settings:",ee),S("  ","error"),k(" ","error")}},[g,S,k]),V=j.useCallback(async H=>{try{const ee=await Ua.sendTestNotification(H);ee.success?(S("   ","success"),k(" ","success")):(S(`: ${ee.error}`,"error"),k(" ","error"))}catch(ee){console.error("Error:",ee),S("  ","error"),k(" ","error")}},[S,k]);j.useEffect(()=>{_(),T()},[_,T]);const R=[{value:"new",label:"",icon:""},{value:"review",label:" ",icon:""},{value:"accepted",label:"",icon:""},{value:"in_progress",label:" ",icon:""},{value:"testing",label:"",icon:""},{value:"completed",label:"",icon:""},{value:"cancelled",label:"",icon:""}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center shadow-lg",children:e.jsx(sa,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:" "}),e.jsx("p",{className:"text-sm text-gray-200",children:"    "})]})]})}),e.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[e.jsxs("div",{className:"col-span-8 space-y-6",children:[e.jsxs("div",{className:"bg-white/30 backdrop-blur-xl rounded-2xl border border-white/40 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(rr,{className:"w-6 h-6 text-blue-400"}),e.jsx("h2",{className:"text-xl font-bold text-white",children:" "})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:E,className:"px-6 py-4 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 rounded-xl text-white transition-all flex items-center justify-center gap-2 font-medium",children:[e.jsx(rr,{className:"w-5 h-5"})," "]}),e.jsxs("button",{onClick:z,className:"px-6 py-4 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 rounded-xl text-white transition-all flex items-center justify-center gap-2 font-medium",children:[e.jsx(dr,{className:"w-5 h-5"})," "]}),e.jsxs("button",{onClick:O,className:"px-6 py-4 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 rounded-xl text-white transition-all flex items-center justify-center gap-2 font-medium",children:[e.jsx(Vr,{className:"w-5 h-5"})," "]})]})]}),e.jsxs("div",{className:"bg-white/30 backdrop-blur-xl rounded-2xl border border-white/40 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Xa,{className:"w-6 h-6 text-orange-400"}),e.jsx("h2",{className:"text-xl font-bold text-white",children:" "})]}),e.jsxs("button",{onClick:C,className:"w-full px-6 py-4 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 rounded-xl text-white transition-all flex items-center justify-center gap-2 font-medium",children:[e.jsx(Xa,{className:"w-5 h-5"}),"   "]})]}),e.jsxs("div",{className:"bg-white/30 backdrop-blur-xl rounded-2xl border border-white/40 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(it,{className:"w-6 h-6 text-purple-400"}),e.jsx("h2",{className:"text-xl font-bold text-white",children:" "})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:" "}),e.jsxs("select",{value:n||"",onChange:H=>i(Number(H.target.value)),className:"w-full px-4 py-2 bg-white/30 border border-white/40 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"",children:" ..."}),r.map(H=>e.jsxs("option",{value:H.id,children:["#",H.id," - ",H.title]},H.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:" "}),e.jsx("select",{value:o,onChange:H=>c(H.target.value),className:"w-full px-4 py-2 bg-white/30 border border-white/40 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-purple-500",children:R.map(H=>e.jsxs("option",{value:H.value,children:[H.icon," ",H.label]},H.value))})]}),e.jsxs("button",{onClick:A,disabled:!n,className:"w-full px-6 py-3 bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 rounded-xl text-white transition-all flex items-center justify-center gap-2 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ls,{className:"w-5 h-5"}),"  "]})]})]}),e.jsxs("div",{className:"bg-white/30 backdrop-blur-xl rounded-2xl border border-white/40 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Ta,{className:"w-6 h-6 text-cyan-400"}),e.jsx("h2",{className:"text-xl font-bold text-white",children:"  "})]}),u?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx(Kc,{className:"w-6 h-6 animate-spin text-blue-500"})}):s.length===0?e.jsxs("div",{className:"text-center p-8 text-white",children:[e.jsx(it,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"  "})]}):e.jsx("div",{className:"space-y-4",children:s.map(H=>{const ee=g[H.id]||{},se=H.full_name?H.full_name.split(" ").map(W=>W[0]).join("").toUpperCase():"?";return e.jsxs("div",{className:"p-4 bg-white/30 rounded-xl border border-white/40 hover:bg-white/40 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-bold",children:se}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-white",children:H.full_name}),e.jsxs("p",{className:"text-sm text-white",children:[H.role,"  ",H.email]})]}),e.jsx("button",{onClick:()=>V(H.id),className:"px-3 py-1.5 bg-green-500 hover:bg-green-600 rounded-lg text-white text-sm transition-colors",children:""})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("label",{className:"flex items-center justify-between p-2 bg-white/30 rounded-lg",children:[e.jsx("span",{className:"text-sm text-white",children:" "}),e.jsx("input",{type:"checkbox",checked:ee.project_assigned||!1,onChange:W=>X(H.id,"project_assigned",W.target.checked),className:"rounded border-white/40"})]}),e.jsxs("label",{className:"flex items-center justify-between p-2 bg-white/30 rounded-lg",children:[e.jsx("span",{className:"text-sm text-white",children:""}),e.jsx("input",{type:"checkbox",checked:ee.project_deadline_reminder||!1,onChange:W=>X(H.id,"project_deadline_reminder",W.target.checked),className:"rounded border-white/40"})]}),e.jsxs("label",{className:"flex items-center justify-between p-2 bg-white/30 rounded-lg",children:[e.jsx("span",{className:"text-sm text-white",children:" "}),e.jsx("input",{type:"checkbox",checked:ee.project_status_changed||!1,onChange:W=>X(H.id,"project_status_changed",W.target.checked),className:"rounded border-white/40"})]}),e.jsxs("label",{className:"flex items-center justify-between p-2 bg-white/30 rounded-lg",children:[e.jsx("span",{className:"text-sm text-white",children:" "}),e.jsx("input",{type:"checkbox",checked:ee.project_overdue||!1,onChange:W=>X(H.id,"project_overdue",W.target.checked),className:"rounded border-white/40"})]})]}),e.jsxs("button",{onClick:()=>I(H.id),className:"w-full mt-3 px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 rounded-lg text-white transition-all flex items-center justify-center gap-2",children:[e.jsx(ut,{className:"w-4 h-4"})," "]})]},H.id)})})]})]}),e.jsxs("div",{className:"col-span-4 space-y-6",children:[e.jsxs("div",{className:"bg-white/30 backdrop-blur-xl rounded-2xl border border-white/40 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Ya,{className:"w-6 h-6 text-green-400"}),e.jsx("h2",{className:"text-lg font-bold text-white",children:" "})]}),e.jsxs("div",{className:`p-4 rounded-xl border mb-4 ${m.checking?"bg-blue-500/20 border-blue-500/40":m.online?"bg-green-500/20 border-green-500/40":"bg-red-500/20 border-red-500/40"}`,children:[e.jsx("div",{className:"flex items-center gap-2 text-white",children:m.checking?e.jsxs(e.Fragment,{children:[e.jsx(Kc,{className:"w-5 h-5 animate-spin"})," ..."]}):m.online?e.jsxs(e.Fragment,{children:[e.jsx(ut,{className:"w-5 h-5"})," "]}):e.jsxs(e.Fragment,{children:[e.jsx(Tl,{className:"w-5 h-5"})," "]})}),m.username&&e.jsxs("p",{className:"text-sm text-white mt-2",children:["@",m.username]})]}),e.jsxs("button",{onClick:T,className:"w-full px-4 py-2 bg-white/30 hover:bg-white/40 rounded-xl text-white transition-colors flex items-center justify-center gap-2",children:[e.jsx(ls,{className:"w-4 h-4"})," "]})]}),e.jsxs("div",{className:"bg-white/30 backdrop-blur-xl rounded-2xl border border-white/40 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Ve,{className:"w-6 h-6 text-purple-400"}),e.jsx("h2",{className:"text-lg font-bold text-white",children:" "})]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:p.length===0?e.jsx("p",{className:"text-sm text-white text-center py-8",children:"    "}):p.map(H=>e.jsxs("div",{className:`p-3 rounded-lg border-l-4 ${H.type==="success"?"bg-green-500/20 border-green-500":H.type==="error"?"bg-red-500/20 border-red-500":"bg-blue-500/20 border-blue-500"}`,children:[e.jsx("p",{className:"text-sm text-white",children:H.message}),e.jsx("p",{className:"text-xs text-white mt-1",children:H.timestamp})]},H.id))})]})]})]}),e.jsx("div",{className:"fixed bottom-4 right-4 space-y-2 z-50",children:w.map(H=>e.jsx("div",{className:`px-4 py-3 rounded-xl shadow-lg backdrop-blur-sm border ${H.type==="success"?"bg-green-500/90 border-green-400":H.type==="error"?"bg-red-500/90 border-red-400":"bg-blue-500/90 border-blue-400"} text-white`,children:H.message},H.id))})]})},yo={getSummary:async()=>(await fe.get("/admin/api/automation/summary")).data,checkOverdue:async()=>(await fe.post("/admin/api/automation/check-overdue")).data,checkUnpaid:async()=>(await fe.post("/admin/api/automation/check-unpaid")).data,runDailyChecks:async()=>(await fe.post("/admin/api/automation/run-daily")).data,sendNotification:async s=>(await fe.post("/admin/api/automation/send-notification",{message:s})).data,startScheduler:async()=>(await fe.post("/admin/api/automation/scheduler/start")).data,stopScheduler:async()=>(await fe.post("/admin/api/automation/scheduler/stop")).data,runTask:async s=>(await fe.post("/admin/api/automation/scheduler/run-task",{task_name:s})).data,getSchedulerStatus:async()=>(await fe.get("/admin/api/automation/scheduler/status")).data},oJ=()=>{const[s,t]=j.useState(null),[r,a]=j.useState(!1),[n,i]=j.useState([]),[o,c]=j.useState(!0),[u,h]=j.useState(null),m=j.useCallback((S,_="info")=>{h({message:S,type:_}),setTimeout(()=>h(null),3e3)},[]),f=j.useCallback((S,_="info")=>{i(T=>[{message:S,type:_,timestamp:new Date},...T].slice(0,50))},[]),p=j.useCallback(async()=>{try{c(!0);const S=await yo.getSummary();S.success&&(t(S.summary),a(S.scheduler_running),f(" ","success"))}catch{m("  ","error"),f("  ","error")}finally{c(!1)}},[m,f]);j.useEffect(()=>{p();const S=setInterval(p,3e4);return()=>clearInterval(S)},[p]);const v=async()=>{try{const S=r?await yo.stopScheduler():await yo.startScheduler();S.success&&(a(!r),f(S.message,"success"),m(S.message,"success"))}catch{m("  ","error"),f("  ","error")}},g=async S=>{try{const _=await yo.runTask(S);_.success?(f(_.message,"success"),m(_.message,"success"),setTimeout(p,2e3)):f(_.message,"warning")}catch{m("  ","error"),f("  ","error")}},y=async()=>{try{const S=await yo.checkOverdue();S.success&&(f(S.message,"success"),S.projects.length>0&&S.projects.forEach(_=>{f(` #${_.id} "${_.title}"   `,"warning")}),m(S.message,"success"),p())}catch{m("  ","error"),f("  ","error")}},w=async()=>{try{const S=await yo.checkUnpaid();if(S.success){let _="";if(S.unpaid_projects.length>0&&(_+=` : ${S.unpaid_projects.length}. `,S.unpaid_projects.forEach(T=>{f(` #${T.id} "${T.title}" -  ${T.remaining}`,"warning")})),S.unpaid_executors.length>0&&(_+=` : ${S.unpaid_executors.length}.`,S.unpaid_executors.forEach(T=>{f(` "${T.executor_name}" -  ${T.remaining}`,"warning")})),_)f(_,"info"),m(_,"info");else{const T="     ";f(T,"success"),m(T,"success")}p()}}catch{m("  ","error"),f("  ","error")}},N=async()=>{const S=prompt("  :");if(S)try{(await yo.sendNotification(S)).success?(f("  ","success"),m(" ","success")):(f("   ","error"),m(" ","error"))}catch{m("  ","error"),f("  ","error")}},k=S=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0,maximumFractionDigits:0}).format(S);return e.jsxs("div",{className:"p-8 max-w-[1920px] mx-auto",children:[u&&e.jsx("div",{className:`fixed top-4 right-4 z-50 px-6 py-3 rounded-lg shadow-lg ${u.type==="success"?"bg-green-500":u.type==="error"?"bg-red-500":"bg-blue-500"} text-white`,children:u.message}),e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-yellow-500 to-amber-600 flex items-center justify-center",children:e.jsx(Ga,{className:"w-6 h-6 text-white"})}),"  "]}),e.jsx("p",{className:"text-gray-500 mt-1",children:"    "})]})}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ve,{className:"w-6 h-6 text-gray-400"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:" "})]}),e.jsx("div",{className:`px-4 py-2 rounded-full flex items-center gap-2 ${r?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:r?e.jsxs(e.Fragment,{children:[e.jsx(Ya,{className:"w-4 h-4 animate-pulse"}),""]}):e.jsxs(e.Fragment,{children:[e.jsx(am,{className:"w-4 h-4"}),""]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:" :"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("span",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx(wt,{className:"w-4 h-4 text-gray-400"})," "]}),e.jsx("span",{className:"text-sm text-gray-500",children:"09:00"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("span",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx(Ve,{className:"w-4 h-4 text-gray-400"})," "]}),e.jsx("span",{className:"text-sm text-gray-500",children:" 4 "})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("span",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx(Qe,{className:"w-4 h-4 text-gray-400"})," "]}),e.jsx("span",{className:"text-sm text-gray-500",children:"18:00"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("span",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx(Ue,{className:"w-4 h-4 text-gray-400"})," "]}),e.jsx("span",{className:"text-sm text-gray-500",children:" 10:00"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:":"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:v,className:`w-full px-4 py-3 rounded-lg font-medium flex items-center justify-center gap-2 transition-all ${r?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:r?e.jsxs(e.Fragment,{children:[e.jsx(am,{className:"w-4 h-4"})," "]}):e.jsxs(e.Fragment,{children:[e.jsx(ji,{className:"w-4 h-4"})," "]})}),e.jsxs("button",{onClick:()=>g("daily_checks"),className:"w-full px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium flex items-center justify-center gap-2",children:[e.jsx(ji,{className:"w-4 h-4"}),"  "]}),e.jsxs("button",{onClick:()=>g("financial_status"),className:"w-full px-4 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium flex items-center justify-center gap-2",children:[e.jsx(Qe,{className:"w-4 h-4"})," "]}),e.jsxs("button",{onClick:()=>g("weekly_report"),className:"w-full px-4 py-3 bg-amber-600 hover:bg-amber-700 text-white rounded-lg font-medium flex items-center justify-center gap-2",children:[e.jsx(Ue,{className:"w-4 h-4"})," "]})]})]})]})]}),s&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-violet-500 to-purple-600 rounded-2xl p-6 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center",children:e.jsx(Ue,{className:"w-5 h-5"})}),e.jsx(xt,{className:"w-5 h-5 opacity-50"})]}),e.jsx("div",{className:"text-3xl font-bold mb-1",children:s.total_projects}),e.jsx("div",{className:"text-sm opacity-90",children:" "})]}),e.jsxs("div",{className:"bg-gradient-to-br from-pink-500 to-red-600 rounded-2xl p-6 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center",children:e.jsx(dr,{className:"w-5 h-5"})}),e.jsx(dr,{className:"w-5 h-5 opacity-50"})]}),e.jsx("div",{className:"text-3xl font-bold mb-1",children:s.overdue_count}),e.jsx("div",{className:"text-sm opacity-90",children:""})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-amber-600 rounded-2xl p-6 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center",children:e.jsx(Qe,{className:"w-5 h-5"})}),e.jsx(Qe,{className:"w-5 h-5 opacity-50"})]}),e.jsx("div",{className:"text-3xl font-bold mb-1",children:s.unpaid_projects_count}),e.jsx("div",{className:"text-sm opacity-90",children:""})]}),e.jsxs("div",{className:"bg-gradient-to-br from-cyan-500 to-blue-600 rounded-2xl p-6 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center",children:e.jsx(it,{className:"w-5 h-5"})}),e.jsx(it,{className:"w-5 h-5 opacity-50"})]}),e.jsx("div",{className:"text-3xl font-bold mb-1",children:s.unpaid_executors_count}),e.jsx("div",{className:"text-sm opacity-90",children:" "})]})]}),s&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-100 flex items-center justify-center",children:e.jsx(xt,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-blue-700 font-medium",children:"  "}),e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:k(s.total_unpaid_clients)})]})]})}),e.jsx("div",{className:"bg-orange-50 border-l-4 border-orange-500 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-orange-100 flex items-center justify-center",children:e.jsx(dr,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-orange-700 font-medium",children:"  "}),e.jsx("div",{className:"text-2xl font-bold text-orange-900",children:k(s.total_unpaid_executors)})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Hr,{className:"w-5 h-5 text-gray-400"})," "]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:y,className:"px-6 py-4 border-2 border-red-200 rounded-xl hover:bg-red-50 transition-colors text-red-700 font-medium flex items-center justify-center gap-2",children:[e.jsx(dr,{className:"w-5 h-5"})," "]}),e.jsxs("button",{onClick:w,className:"px-6 py-4 border-2 border-amber-200 rounded-xl hover:bg-amber-50 transition-colors text-amber-700 font-medium flex items-center justify-center gap-2",children:[e.jsx(Qe,{className:"w-5 h-5"})," "]}),e.jsxs("button",{onClick:N,className:"px-6 py-4 border-2 border-blue-200 rounded-xl hover:bg-blue-50 transition-colors text-blue-700 font-medium flex items-center justify-center gap-2",children:[e.jsx(rr,{className:"w-5 h-5"})," "]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Ya,{className:"w-5 h-5 text-gray-400"})," "]}),e.jsx("div",{className:"bg-gray-50 rounded-xl p-4 h-96 overflow-y-auto space-y-2",children:n.length===0?e.jsx("div",{className:"text-center text-gray-500 py-8",children:" "}):n.map((S,_)=>e.jsx("div",{className:`p-3 rounded-lg font-mono text-sm ${S.type==="error"?"bg-red-50 text-red-700 border-l-4 border-red-500":S.type==="warning"?"bg-yellow-50 text-yellow-700 border-l-4 border-yellow-500":S.type==="success"?"bg-green-50 text-green-700 border-l-4 border-green-500":"bg-white text-gray-700 border-l-4 border-blue-500"}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("span",{className:"flex-1",children:S.message}),e.jsx("span",{className:"text-xs opacity-70",children:S.timestamp.toLocaleTimeString("ru-RU")})]})},_))})]})]})},wa={getStats:async()=>(await fe.get("/admin/hosting/api/stats")).data,getServers:async s=>{const t=s?{status:s}:{};return(await fe.get("/admin/hosting/api/servers",{params:t})).data},getServer:async s=>(await fe.get(`/admin/hosting/api/server/${s}`)).data,createServer:async s=>(await fe.post("/admin/hosting/api/server",s)).data,updateServer:async(s,t)=>(await fe.put(`/admin/hosting/api/server/${s}`,t)).data,deleteServer:async s=>(await fe.delete(`/admin/hosting/api/server/${s}`)).data,createPayment:async s=>(await fe.post("/admin/hosting/api/payment",s)).data,getCalendar:async(s,t)=>{const r={};return s&&(r.month=s),t&&(r.year=t),(await fe.get("/admin/hosting/api/calendar",{params:r})).data},searchClients:async s=>(await fe.get("/admin/hosting/api/clients/search",{params:{q:s}})).data,getProjects:async()=>(await fe.get("/admin/hosting/api/projects")).data,getProjectData:async s=>(await fe.get(`/admin/hosting/api/project/${s}`)).data,syncWithTimeweb:async()=>(await fe.post("/admin/hosting/api/timeweb/sync-all")).data,getClientBalance:async s=>(await fe.get(`/admin/hosting/api/balance/${s}`)).data,addClientBalance:async(s,t,r)=>(await fe.post(`/admin/hosting/api/balance/${s}/add?amount=${t}${r?`&description=${encodeURIComponent(r)}`:""}`)).data,getClientTransactions:async(s,t=50)=>(await fe.get(`/admin/hosting/api/balance/${s}/transactions?limit=${t}`)).data,getLowBalanceClients:async(s=5)=>(await fe.get(`/admin/hosting/api/balance/low?days_threshold=${s}`)).data,getBalanceSummary:async()=>(await fe.get("/admin/hosting/api/balance/summary")).data},cJ=({projects:s,value:t,onChange:r,placeholder:a=" ",disabled:n=!1})=>{const[i,o]=j.useState(!1),[c,u]=j.useState(""),h=j.useRef(null),m=j.useRef(null),f=s.find(w=>w.id===t),p=s.filter(w=>w.title.toLowerCase().includes(c.toLowerCase()));console.log("SearchableProjectDropdown:",{totalProjects:s.length,filteredProjects:p.length,searchQuery:c,isOpen:i}),j.useEffect(()=>{const w=N=>{h.current&&!h.current.contains(N.target)&&o(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),j.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const v=()=>{n||(o(!i),u(""))},g=w=>{r(w),o(!1),u("")},y=w=>{w.stopPropagation(),r(null),u("")};return e.jsxs("div",{ref:h,className:"relative w-full",children:[e.jsxs("button",{type:"button",onClick:v,disabled:n,className:`w-full px-4 py-3 border-2 rounded-lg text-left flex items-center justify-between transition-all ${n?"bg-gray-100 border-gray-200 text-gray-400 cursor-not-allowed":i?"border-sky-500 ring-2 ring-sky-200":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("span",{className:f?"text-gray-800":"text-gray-400",children:f?e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:f.title}),e.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(#",f.id,")"]})]}):a}),e.jsxs("div",{className:"flex items-center gap-2",children:[f&&!n&&e.jsx(De,{className:"w-4 h-4 text-gray-400 hover:text-gray-600 cursor-pointer",onClick:y}),e.jsx(Ci,{className:`w-5 h-5 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})]}),i&&e.jsxs("div",{className:"absolute z-50 w-full mt-2 bg-white border-2 border-sky-500 rounded-lg shadow-xl max-h-[400px] overflow-hidden",children:[e.jsx("div",{className:"p-3 border-b border-gray-200 sticky top-0 bg-white",children:e.jsxs("div",{className:"relative",children:[e.jsx(Us,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{ref:m,type:"text",value:c,onChange:w=>u(w.target.value),placeholder:" ...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-200 focus:border-sky-500"})]})}),e.jsxs("div",{className:"max-h-[300px] overflow-y-auto",children:[e.jsx("button",{type:"button",onClick:()=>{r(null),o(!1)},className:`w-full px-4 py-3 text-left hover:bg-gray-50 transition-colors ${t?"text-gray-700":"bg-sky-50 text-sky-700"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-400"}),e.jsx("span",{className:"font-medium",children:"   "})]})}),p.length===0?e.jsxs("div",{className:"px-4 py-8 text-center text-gray-500",children:[e.jsx("p",{children:"  "}),c&&e.jsx("p",{className:"text-sm mt-1",children:"   "})]}):p.map(w=>e.jsx("button",{type:"button",onClick:()=>g(w.id),className:`w-full px-4 py-3 text-left hover:bg-gray-50 transition-colors border-b border-gray-100 last:border-0 ${t===w.id?"bg-sky-50":""}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${t===w.id?"bg-sky-500":"bg-gray-300"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`font-semibold truncate ${t===w.id?"text-sky-700":"text-gray-800"}`,children:w.title}),e.jsxs("span",{className:"text-xs text-gray-500",children:["#",w.id]})]}),e.jsx("div",{className:"flex items-center gap-2 mt-1 text-xs text-gray-500",children:e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 rounded",children:w.status==="in_progress"?" ":w.status==="new"?"":w.status==="review"?" ":w.status==="accepted"?"":w.status==="testing"?"":w.status})})]})]})},w.id))]})]})]})};function dJ({clientId:s,clientName:t,onBalanceUpdate:r}){const[a,n]=j.useState(null),[i,o]=j.useState(!1),[c,u]=j.useState(!1),[h,m]=j.useState(""),[f,p]=j.useState("");j.useEffect(()=>{s&&v()},[s]);const v=async()=>{if(s)try{o(!0);const T=await wa.getClientBalance(s);n(T.balance)}catch{console.log("Balance not found for client",s)}finally{o(!1)}},g=async()=>{if(!(!s||!h))try{await wa.addClientBalance(s,parseFloat(h),f),u(!1),m(""),p(""),v(),r?.()}catch(T){alert("  : "+T.message)}};if(!s)return e.jsx("div",{className:"text-sm text-gray-500",children:" Client ID"});if(i)return e.jsx("div",{className:"text-sm text-gray-500",children:"..."});const y=a?.days_remaining||0,w=a?.balance||0,N=a?.total_monthly_cost||0,k=()=>y===0?"text-red-600 bg-red-50":y<=3?"text-orange-600 bg-orange-50":y<=7?"text-yellow-600 bg-yellow-50":y>=999?"text-gray-500 bg-gray-50":"text-green-600 bg-green-50",S=()=>y===0?e.jsx(Ge,{className:"w-3.5 h-3.5"}):y<=7?e.jsx(Ge,{className:"w-3.5 h-3.5"}):e.jsx(xt,{className:"w-3.5 h-3.5"}),_=()=>y>=999?"":`${y} `;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-sm bg-gray-50 px-2 py-1 rounded",children:[e.jsx(pN,{className:"w-4 h-4 text-gray-500"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[w.toFixed(0),""]})]}),e.jsxs("div",{className:`flex items-center gap-1 text-xs font-semibold px-2 py-1 rounded ${k()}`,children:[S(),e.jsx("span",{children:_()})]}),e.jsx("button",{onClick:()=>u(!0),className:"p-1 hover:bg-blue-50 rounded transition-colors group",title:" ",children:e.jsx(We,{className:"w-4 h-4 text-blue-600 group-hover:text-blue-700"})})]}),N>0&&e.jsxs("div",{className:"text-xs text-gray-500",children:[N.toFixed(0),"/"]})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:[" : ",t]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"  ()"}),e.jsx("input",{type:"number",value:h,onChange:T=>m(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"4000",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" ()"}),e.jsx("input",{type:"text",value:f,onChange:T=>p(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:" "})]}),a&&N>0&&h&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-700 font-medium mb-1",children:[e.jsx(xt,{className:"w-4 h-4"}),""]}),e.jsxs("div",{className:"text-blue-600",children:[" : ",(w+parseFloat(h||"0")).toFixed(0),""]}),e.jsxs("div",{className:"text-blue-600",children:[" : ~",Math.floor((w+parseFloat(h||"0"))/(N/30))," "]})]})]}),e.jsxs("div",{className:"flex gap-2 mt-6",children:[e.jsx("button",{onClick:g,disabled:!h||parseFloat(h)<=0,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:""}),e.jsx("button",{onClick:()=>{u(!1),m(""),p("")},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:""})]})]})})]})}const uJ=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState([]),[n,i]=j.useState([]),[o,c]=j.useState(null),[u,h]=j.useState([]),[m,f]=j.useState(0),[p,v]=j.useState([]),[g,y]=j.useState(new Date().getMonth()+1),[w,N]=j.useState(new Date().getFullYear()),[k,S]=j.useState(""),[_,T]=j.useState(""),[E,z]=j.useState("next_payment"),[O,C]=j.useState(!1),[A,X]=j.useState(!1),[I,V]=j.useState(null),[R,H]=j.useState(null),[ee,se]=j.useState("servers"),[W,te]=j.useState([]),J=j.useCallback((M,B="info")=>{const ae=Date.now().toString();te(he=>[...he,{id:ae,message:M,type:B}]),setTimeout(()=>{te(he=>he.filter(xe=>xe.id!==ae))},4e3)},[]),K="hosting_data_cache",$=60*1e3,ie=j.useCallback(()=>{try{const M=localStorage.getItem(K);if(M){const{data:B,timestamp:ae}=JSON.parse(M),he=Date.now()-ae;return B.stats&&c(B.stats),B.servers&&(a(B.servers),i(B.servers)),B.projects&&h(B.projects),f(ae),console.log(` Loaded from cache (age: ${Math.round(he/1e3)}s)`),!0}}catch(M){console.error("Error loading from cache:",M)}return!1},[]),ne=j.useCallback(M=>{try{const B=Date.now();localStorage.setItem(K,JSON.stringify({data:M,timestamp:B})),f(B),console.log(" Saved to cache")}catch(B){console.error("Error saving to cache:",B)}},[]),oe=j.useCallback(async(M=!1)=>{try{M||t(!0);const[B,ae,he]=await Promise.all([wa.getStats(),wa.getServers(_||void 0),wa.getProjects()]),xe={};B.success&&(c(B.stats),xe.stats=B.stats),ae.success&&(a(ae.servers),i(ae.servers),xe.servers=ae.servers),he.success&&(h(he.projects),xe.projects=he.projects),ne(xe),M&&console.log(" Background update completed")}catch(B){console.error("Error loading hosting data:",B),M||J("  ","error")}finally{M||t(!1)}},[_,J,ne]),ce=j.useCallback(async()=>{try{const M=await wa.getCalendar(g,w);M.success&&v(M.calendar)}catch(M){console.error("Error loading calendar:",M),J("  ","error")}},[g,w,J]),U=j.useCallback(async()=>{try{J("  Timeweb Cloud...","info");const M=await wa.syncWithTimeweb();if(M.success){const B=` :  ${M.created_count},  ${M.updated_count}`;J(B,"success"),await oe(!1)}}catch(M){console.error("Error syncing with Timeweb:",M),J("   Timeweb Cloud","error")}},[oe,J]);j.useEffect(()=>{(async()=>{ie()?setTimeout(()=>oe(!0),100):await oe(!1)})()},[]),j.useEffect(()=>{const M=setInterval(()=>{console.log(" Auto-refresh triggered"),oe(!0)},$);return()=>clearInterval(M)},[$]),j.useEffect(()=>{ee==="calendar"&&ce()},[ee,ce]),j.useEffect(()=>{let M=[...r];if(k){const B=k.toLowerCase();M=M.filter(ae=>ae.client_name.toLowerCase().includes(B)||ae.server_name.toLowerCase().includes(B)||ae.client_company?.toLowerCase().includes(B)||ae.ip_address?.toLowerCase().includes(B))}_&&(M=M.filter(B=>B.status===_)),M.sort((B,ae)=>E==="next_payment"?new Date(B.next_payment_date).getTime()-new Date(ae.next_payment_date).getTime():E==="profit"?ae.profit_amount-B.profit_amount:E==="client_name"?B.client_name.localeCompare(ae.client_name):0),i(M)},[r,k,_,E]);const F=async M=>{try{const B=await wa.createServer(M);B.success&&(J(B.message,"success"),C(!1),V(null),oe(!1))}catch(B){console.error("Error creating server:",B),J(B.response?.data?.detail||"  ","error")}},Z=async(M,B)=>{try{const ae=await wa.updateServer(M,B);ae.success&&(J(ae.message,"success"),C(!1),V(null),oe(!1))}catch(ae){console.error("Error updating server:",ae),J(ae.response?.data?.detail||"  ","error")}},q=async M=>{if(confirm(` ,     "${M.server_name}"?`))try{const B=await wa.deleteServer(M.id);B.success&&(J(B.message,"success"),oe(!1))}catch(B){console.error("Error deleting server:",B),J(B.response?.data?.detail||"  ","error")}},Q=async M=>{try{const B=await wa.createPayment(M);B.success&&(J(B.message,"success"),X(!1),H(null),oe(!1))}catch(B){console.error("Error creating payment:",B),J(B.response?.data?.detail||"  ","error")}},le=M=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",maximumFractionDigits:0}).format(M),me=M=>new Date(M).toLocaleDateString("ru-RU",{year:"numeric",month:"2-digit",day:"2-digit"}),G=M=>{const B={active:"bg-green-100 text-green-800",overdue:"bg-red-100 text-red-800",suspended:"bg-yellow-100 text-yellow-800",closed:"bg-gray-100 text-gray-800"},ae={active:"",overdue:"",suspended:"",closed:""};return e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${B[M]}`,children:ae[M]})},ue=M=>{const B=new Date(M),ae=new Date;return Math.ceil((B.getTime()-ae.getTime())/(1e3*60*60*24))},Y=M=>{let B=g+M,ae=w;B>12?(B=1,ae++):B<1&&(B=12,ae--),y(B),N(ae)},L=M=>["","","","","","","","","","","",""][M-1];return s&&!o?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx(Pt,{className:"w-8 h-8 animate-spin text-sky-600"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"max-w-[2000px] mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-sky-600 to-blue-600 bg-clip-text text-transparent",children:""}),e.jsx("p",{className:"text-gray-600 mt-1",children:"   "})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[m>0&&e.jsxs("div",{className:"text-sm text-gray-500 mr-2",children:[":"," ",new Date(m).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit",second:"2-digit"})]}),e.jsxs("button",{onClick:()=>oe(!1),className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-200",disabled:s,children:[e.jsx(ls,{className:`w-5 h-5 ${s?"animate-spin":""}`}),""]}),e.jsxs("button",{onClick:U,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-500 text-white rounded-lg hover:from-emerald-600 hover:to-teal-600 transition-all shadow-md",title:"   Timeweb Cloud (  )",children:[e.jsx(Bh,{className:"w-5 h-5"}),"  Timeweb"]}),e.jsxs("button",{onClick:()=>{V(null),C(!0)},className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-sky-600 to-blue-600 text-white rounded-lg hover:from-sky-700 hover:to-blue-700 transition-all shadow-lg",children:[e.jsx(We,{className:"w-5 h-5"})," "]})]})]}),o&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 rounded-xl shadow-lg p-6 border border-purple-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-violet-500 flex items-center justify-center shadow-lg",children:e.jsx(xt,{className:"w-6 h-6 text-white"})})}),e.jsx("div",{className:"text-3xl font-bold text-purple-700 mb-1",children:le(o.profit_all_time)}),e.jsx("div",{className:"text-sm text-gray-600 uppercase tracking-wide",children:"   "})]}),e.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-rose-50 rounded-xl shadow-lg p-6 border border-pink-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-pink-500 to-rose-500 flex items-center justify-center shadow-lg",children:e.jsx(Qe,{className:"w-6 h-6 text-white"})})}),e.jsx("div",{className:"text-3xl font-bold text-pink-700 mb-1",children:le(o.profit_month)}),e.jsx("div",{className:"text-sm text-gray-600 uppercase tracking-wide",children:"  "})]}),e.jsxs("div",{className:"bg-gradient-to-br from-cyan-50 to-blue-50 rounded-xl shadow-lg p-6 border border-cyan-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-500 to-blue-500 flex items-center justify-center shadow-lg",children:e.jsx(bn,{className:"w-6 h-6 text-white"})})}),e.jsx("div",{className:"text-3xl font-bold text-cyan-700 mb-1",children:o.active_servers}),e.jsx("div",{className:"text-sm text-gray-600 uppercase tracking-wide",children:" "})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 rounded-xl shadow-lg p-6 border border-orange-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-orange-500 to-amber-500 flex items-center justify-center shadow-lg",children:e.jsx(dr,{className:"w-6 h-6 text-white"})})}),e.jsx("div",{className:"text-3xl font-bold text-orange-700 mb-1",children:o.overdue_count}),e.jsxs("div",{className:"text-sm text-gray-600 uppercase tracking-wide",children:[" (",le(o.overdue_sum),")"]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("div",{className:"flex",children:[e.jsxs("button",{onClick:()=>se("servers"),className:`flex items-center gap-2 px-6 py-4 font-semibold transition-all ${ee==="servers"?"border-b-2 border-sky-600 text-sky-600":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(bn,{className:"w-5 h-5"}),""]}),e.jsxs("button",{onClick:()=>se("calendar"),className:`flex items-center gap-2 px-6 py-4 font-semibold transition-all ${ee==="calendar"?"border-b-2 border-sky-600 text-sky-600":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(wt,{className:"w-5 h-5"})," "]})]})}),e.jsxs("div",{className:"p-6",children:[ee==="servers"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(wr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"  , , IP...",value:k,onChange:M=>S(M.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500"})]}),e.jsxs("select",{value:_,onChange:M=>T(M.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"active",children:""}),e.jsx("option",{value:"overdue",children:""}),e.jsx("option",{value:"suspended",children:""}),e.jsx("option",{value:"closed",children:""})]}),e.jsxs("select",{value:E,onChange:M=>z(M.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500",children:[e.jsx("option",{value:"next_payment",children:"  "}),e.jsx("option",{value:"profit",children:" "}),e.jsx("option",{value:"client_name",children:" "})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-800 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:" / "}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:" "}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:" "}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-center font-semibold",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:n.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:10,className:"px-6 py-12 text-center",children:[e.jsx(bn,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:" "}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"  "})]})}):n.map(M=>{const B=ue(M.next_payment_date),ae=B<0?"text-red-600 font-bold":B<=3?"text-yellow-600 font-bold":"text-gray-600";return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-800",children:M.client_name}),M.client_company&&e.jsx("div",{className:"text-sm text-gray-500",children:M.client_company})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(dJ,{clientId:M.client_id,clientName:M.client_name,onBalanceUpdate:()=>oe(!1)})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-800",children:M.server_name}),M.ip_address&&e.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-1",children:[e.jsx(Bh,{className:"w-3 h-3"}),M.ip_address]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-600",children:M.configuration||""})}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:me(M.start_date)}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-gray-800",children:[le(M.total_price),"/"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[".: ",le(M.cost_price)]})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-green-600 font-semibold",children:le(M.profit_amount)}),e.jsxs("div",{className:"text-xs text-gray-500",children:["(",M.profit_percent,"%)"]})]}),e.jsxs("td",{className:`px-6 py-4 ${ae}`,children:[e.jsx("div",{children:me(M.next_payment_date)}),e.jsx("div",{className:"text-xs",children:B>=0?` ${B} .`:` ${Math.abs(B)} .`})]}),e.jsx("td",{className:"px-6 py-4",children:G(M.status)}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>{H(M),X(!0)},className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:" ",children:e.jsx(lE,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{V(M),C(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"",children:e.jsx(sr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>q(M),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"",children:e.jsx(tt,{className:"w-4 h-4"})})]})})]},M.id)})})]})})]}),ee==="calendar"&&e.jsx(xJ,{events:p,month:g,year:w,onChangeMonth:Y,getMonthName:L,formatCurrency:le})]})]})]}),O&&e.jsx(hJ,{isOpen:O,onClose:()=>{C(!1),V(null)},onSave:I?Z:F,server:I,projects:u}),A&&R&&e.jsx(mJ,{isOpen:A,onClose:()=>{X(!1),H(null)},onSave:Q,server:R}),e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:W.map(M=>e.jsx("div",{className:`px-6 py-3 rounded-lg shadow-lg text-white ${M.type==="success"?"bg-green-500":M.type==="error"?"bg-red-500":M.type==="warning"?"bg-yellow-500":"bg-blue-500"} animate-slide-in`,children:M.message},M.id))})]})},hJ=({isOpen:s,onClose:t,onSave:r,server:a,projects:n})=>{const[i,o]=j.useState({project_id:a?.project_id||null,client_id:a?.client_id||null,client_name:a?.client_name||"",client_company:a?.client_company||null,client_telegram_id:a?.client_telegram_id||null,server_name:a?.server_name||"",configuration:a?.configuration||null,ip_address:a?.ip_address||null,cost_price:a?.cost_price||0,client_price:a?.client_price||0,service_fee:a?.service_fee||0,start_date:a?.start_date?a.start_date.split("T")[0]:new Date().toISOString().split("T")[0],next_payment_date:a?.next_payment_date?a.next_payment_date.split("T")[0]:new Date(Date.now()+2592e6).toISOString().split("T")[0],payment_period:a?.payment_period||"monthly",notes:a?.notes||null}),c=async h=>{if(!h){o({...i,project_id:null});return}try{const m=await wa.getProjectData(parseInt(h));m.success&&m.project&&o({...i,project_id:parseInt(h),client_name:m.project.client_name,client_telegram_id:m.project.client_telegram_id||null,server_name:i.server_name||`  "${m.project.title}"`})}catch(m){console.error("Error loading project data:",m)}},u=h=>{h.preventDefault();const m={...i,start_date:i.start_date+"T00:00:00",next_payment_date:i.next_payment_date+"T00:00:00"};a?r(a.id,m):r(m)};return s?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:a?" ":" "}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-all",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:u,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["   ()",n.length>0&&e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["( : ",n.length,")"]})]}),n.length===0?e.jsx("div",{className:"px-4 py-3 border-2 border-yellow-300 bg-yellow-50 rounded-lg text-sm text-yellow-800",children:" ..."}):e.jsx(cJ,{projects:n,value:i.project_id,onChange:h=>{c(h?h.toString():"")},placeholder:"     "}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"      "})]}),e.jsx("hr",{className:"my-4"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:i.client_name,onChange:h=>o({...i,client_name:h.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:i.client_company||"",onChange:h=>o({...i,client_company:h.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Telegram ID ( )"}),e.jsx("input",{type:"number",value:i.client_telegram_id||"",onChange:h=>o({...i,client_telegram_id:h.target.value?parseInt(h.target.value):null}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:i.server_name,onChange:h=>o({...i,server_name:h.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" (CPU, RAM, SSD)"}),e.jsx("textarea",{value:i.configuration||"",onChange:h=>o({...i,configuration:h.target.value}),rows:2,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none",placeholder:": 2 CPU, 4GB RAM, 50GB SSD"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"IP "}),e.jsx("input",{type:"text",value:i.ip_address||"",onChange:h=>o({...i,ip_address:h.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none",placeholder:"192.168.1.1"})]}),e.jsx("hr",{className:"my-4"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" (/) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",value:i.cost_price,onChange:h=>o({...i,cost_price:parseFloat(h.target.value)}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["   (/) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",value:i.client_price,onChange:h=>o({...i,client_price:parseFloat(h.target.value)}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  (/)"}),e.jsx("input",{type:"number",step:"0.01",value:i.service_fee,onChange:h=>o({...i,service_fee:parseFloat(h.target.value)}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["   ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:i.start_date,onChange:h=>o({...i,start_date:h.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:i.next_payment_date,onChange:h=>o({...i,next_payment_date:h.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:i.payment_period,onChange:h=>o({...i,payment_period:h.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none",required:!0,children:[e.jsx("option",{value:"monthly",children:""}),e.jsx("option",{value:"quarterly",children:"  3 "}),e.jsx("option",{value:"yearly",children:"  "})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:i.notes||"",onChange:h=>o({...i,notes:h.target.value}),rows:3,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:t,className:"flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all font-semibold",children:""}),e.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-gradient-to-r from-sky-600 to-blue-600 text-white rounded-lg hover:from-sky-700 hover:to-blue-700 transition-all font-semibold shadow-lg",children:a?"":""})]})]})]})}):null},mJ=({isOpen:s,onClose:t,onSave:r,server:a})=>{const[n,i]=j.useState({server_id:a.id,amount:a.total_price,payment_date:new Date().toISOString().slice(0,16),expected_date:a.next_payment_date,period_start:a.next_payment_date,period_end:a.next_payment_date,status:"paid",payment_method:null,notes:null}),o=c=>{c.preventDefault(),r(n)};return s?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full",children:[e.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between rounded-t-2xl",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:" "}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-all",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:o,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"bg-sky-50 rounded-lg p-4 mb-4",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:":"}),e.jsx("div",{className:"text-gray-600",children:a.server_name}),e.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[": ",a.client_name]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  () ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",value:n.amount,onChange:c=>i({...n,amount:parseFloat(c.target.value)}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["   ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"datetime-local",value:n.payment_date||"",onChange:c=>i({...n,payment_date:c.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsxs("select",{value:n.payment_method||"",onChange:c=>i({...n,payment_method:c.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"card",children:""}),e.jsx("option",{value:"bank",children:" "}),e.jsx("option",{value:"cash",children:""}),e.jsx("option",{value:"other",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"date",value:n.period_start.split("T")[0],onChange:c=>i({...n,period_start:c.target.value+"T00:00:00"}),className:"px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none",placeholder:""}),e.jsx("input",{type:"date",value:n.period_end.split("T")[0],onChange:c=>i({...n,period_end:c.target.value+"T00:00:00"}),className:"px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none",placeholder:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:n.notes||"",onChange:c=>i({...n,notes:c.target.value}),rows:2,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:t,className:"flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all font-semibold",children:""}),e.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all font-semibold shadow-lg",children:""})]})]})]})}):null},xJ=({events:s,month:t,year:r,onChangeMonth:a,getMonthName:n,formatCurrency:i})=>{const o={};s.forEach(y=>{o[y.date]||(o[y.date]=[]),o[y.date].push(y)});const c=new Date(r,t-1,1),h=new Date(r,t,0).getDate(),m=c.getDay()===0?6:c.getDay()-1,f=[];let p=Array(m).fill(null),v=1;for(;v<=h;)p.push(v),v++,p.length===7&&(f.push(p),p=[]);if(p.length>0){for(;p.length<7;)p.push(null);f.push(p)}const g=y=>({green:"bg-green-100 text-green-700 border-l-4 border-green-500",blue:"bg-blue-100 text-blue-700 border-l-4 border-blue-500",yellow:"bg-yellow-100 text-yellow-700 border-l-4 border-yellow-500",red:"bg-red-100 text-red-700 border-l-4 border-red-500"})[y]||"bg-gray-100 text-gray-700 border-l-4 border-gray-500";return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h5",{className:"text-xl font-bold text-gray-800",children:"  "}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>a(-1),className:"p-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:e.jsx(aE,{className:"w-5 h-5"})}),e.jsxs("div",{className:"px-6 py-2 bg-sky-50 rounded-lg font-semibold text-gray-800 min-w-[200px] text-center",children:[n(t)," ",r]}),e.jsx("button",{onClick:()=>a(1),className:"p-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:e.jsx(Sn,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:["","","","","","",""].map(y=>e.jsx("div",{className:"text-center font-bold text-gray-600 py-2",children:y},y))}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:f.map((y,w)=>y.map((N,k)=>{if(!N)return e.jsx("div",{className:"min-h-[100px] bg-gray-50 rounded-lg border border-gray-200"},`${w}-${k}`);const S=`${r}-${String(t).padStart(2,"0")}-${String(N).padStart(2,"0")}`,_=o[S]||[];return e.jsxs("div",{className:"min-h-[100px] bg-white rounded-lg border border-gray-200 p-2 hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"font-bold text-gray-700 mb-2",children:N}),e.jsx("div",{className:"space-y-1",children:_.map(T=>e.jsx("div",{className:`text-xs p-1 rounded ${g(T.color)}`,title:T.title,children:i(T.amount)},T.id))})]},`${w}-${k}`)}))}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 border-l-4 border-green-500 rounded",children:""}),e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 border-l-4 border-blue-500 rounded",children:""}),e.jsx("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-700 border-l-4 border-yellow-500 rounded",children:" (3 )"}),e.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-700 border-l-4 border-red-500 rounded",children:""})]})]})},Nh={getUserPermissions:async s=>(await fe.get(`/admin/permissions/user/${s}`)).data,updateUserPermissions:async(s,t)=>(await fe.post(`/admin/permissions/user/${s}/update`,{module_permissions:t})).data,getRoleTemplate:async s=>(await fe.get(`/admin/permissions/role/${s}/template`)).data,applyRoleTemplate:async(s,t)=>(await fe.post(`/admin/permissions/user/${s}/apply-role-template`,null,{params:{role_name:t}})).data,getStatistics:async()=>(await fe.get("/admin/permissions/statistics")).data,resetUserPermissions:async s=>(await fe.post(`/admin/permissions/user/${s}/reset`)).data,getUsers:async()=>(await fe.get("/admin/api/users/api")).data},Pp="/api/ui-permissions",fJ=async()=>(await fe.get(`${Pp}/structure`)).data.structure,pJ=async s=>(await fe.get(`${Pp}/user/${s}`)).data,gJ=async(s,t)=>(await fe.post(`${Pp}/user/${s}/update`,{permissions:t})).data,bJ=async s=>(await fe.post(`${Pp}/user/${s}/reset`)).data,yJ=(s,t)=>{const r=[];return Object.entries(s).forEach(([a,n])=>{const i={field:[],button:[],section:[],column:[],tab:[],action:[]};Object.entries(n.elements).forEach(([o,c])=>{const u=`${a}.${o}`,h=t[u],m=h?h.is_enabled:!0,f={id:o,name:c.name,enabled:m};c.type in i&&i[c.type].push(f)}),r.push({module:a,moduleName:n.name,elementsByType:i})}),r},vJ={field:Ue,button:YB,section:QB,column:RP,tab:mE,action:Ga},jJ={field:"",button:"",section:"",column:"",tab:"",action:""},wJ=({userId:s,username:t,onSave:r})=>{const[a,n]=j.useState(null),[i,o]=j.useState({}),[c,u]=j.useState(!0),[h,m]=j.useState(!1),[f,p]=j.useState(new Set),[v,g]=j.useState(!1);j.useEffect(()=>{y()},[s]);const y=async()=>{u(!0);try{const[O,C]=await Promise.all([fJ(),pJ(s)]);n(O),o(C.permissions),g(!1)}catch(O){console.error("  :",O)}finally{u(!1)}},w=O=>{const C=new Set(f);C.has(O)?C.delete(O):C.add(O),p(C)},N=(O,C)=>{const A=`${O}.${C}`,X=i[A]?.is_enabled??!0;o(I=>({...I,[A]:{...I[A],is_enabled:!X,element_type:I[A]?.element_type||"field"}})),g(!0)},k=(O,C)=>{if(!a)return;const A={...i},X=a[O]?.elements||{};Object.keys(X).forEach(I=>{const V=`${O}.${I}`;A[V]={is_enabled:C,element_type:X[I].type}}),o(A),g(!0)},S=async()=>{m(!0);try{const O={};Object.entries(i).forEach(([C,A])=>{O[C]=A.is_enabled}),await gJ(s,O),g(!1),r?.()}catch(O){console.error(" :",O),alert("    ")}finally{m(!1)}},_=async()=>{if(confirm(" ?        .")){m(!0);try{await bJ(s),await y(),r?.()}catch(O){console.error(" :",O),alert("    ")}finally{m(!1)}}},T=()=>{a&&p(new Set(Object.keys(a)))},E=()=>{p(new Set)};if(c)return e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})});if(!a)return e.jsx("div",{className:"text-center p-12 text-gray-600",children:"    "});const z=yJ(a,i);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"  "}),e.jsxs("p",{className:"text-sm text-gray-600",children:["    ,     ",t]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:T,className:"px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:" "}),e.jsx("button",{onClick:E,className:"px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:" "})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:S,disabled:!v||h,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${v&&!h?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:shadow-lg":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[e.jsx(Aa,{className:"w-4 h-4"}),h?"...":" "]}),e.jsxs("button",{onClick:_,disabled:h,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[e.jsx(Cn,{className:"w-4 h-4"})," ( )"]}),e.jsxs("button",{onClick:y,disabled:h,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[e.jsx(Cn,{className:"w-4 h-4"})," "]})]}),v&&e.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-sm text-yellow-800",children:"    "})]}),e.jsx("div",{className:"space-y-3",children:z.map(O=>{const C=f.has(O.module),A=Object.values(O.elementsByType).reduce((I,V)=>I+V.length,0),X=Object.values(O.elementsByType).reduce((I,V)=>I+V.filter(R=>R.enabled).length,0);return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-white border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>w(O.module),className:"flex items-center gap-3 flex-1 text-left",children:[C?e.jsx(jp,{className:"w-5 h-5 text-gray-500"}):e.jsx(Ci,{className:"w-5 h-5 text-gray-500"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:O.moduleName}),e.jsxs("p",{className:"text-sm text-gray-600",children:[X,"  ",A,"  "]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:I=>{I.stopPropagation(),k(O.module,!0)},className:"px-3 py-1 text-sm text-green-700 bg-green-50 hover:bg-green-100 rounded-lg transition-colors",children:[e.jsx(Vt,{className:"w-4 h-4 inline mr-1"})," "]}),e.jsxs("button",{onClick:I=>{I.stopPropagation(),k(O.module,!1)},className:"px-3 py-1 text-sm text-red-700 bg-red-50 hover:bg-red-100 rounded-lg transition-colors",children:[e.jsx(Ho,{className:"w-4 h-4 inline mr-1"})," "]})]})]})}),C&&e.jsx("div",{className:"p-4 space-y-4",children:Object.entries(O.elementsByType).map(([I,V])=>{if(V.length===0)return null;const R=vJ[I],H=jJ[I];return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(R,{className:"w-4 h-4 text-gray-500"}),e.jsx("h5",{className:"font-medium text-gray-700",children:H}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",V.length,")"]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:V.map(ee=>e.jsxs("button",{onClick:()=>N(O.module,ee.id),className:`flex items-center gap-2 p-2 rounded-lg border transition-all ${ee.enabled?"bg-green-50 border-green-200 text-green-900 hover:bg-green-100":"bg-red-50 border-red-200 text-red-900 hover:bg-red-100"}`,children:[ee.enabled?e.jsx(Hr,{className:"w-4 h-4 text-green-600 flex-shrink-0"}):e.jsx(Tl,{className:"w-4 h-4 text-red-600 flex-shrink-0"}),e.jsx("span",{className:"text-sm truncate",children:ee.name})]},ee.id))})]},I)})})]},O.module)})})]})},NJ={dashboard:"",projects:"",clients:"",leads:"",deals:"",finance:"",documents:"",reports:"",settings:"",users:"",avito:""},_J=()=>{const[s,t]=j.useState([]),[r,a]=j.useState(null),[n,i]=j.useState(null),[o,c]=j.useState(!1),[u,h]=j.useState(!1),[m,f]=j.useState(new Set),[p,v]=j.useState(null),[g,y]=j.useState("module");j.useEffect(()=>{w()},[]);const w=j.useCallback(async()=>{try{const X=await Nh.getUsers();if(X.success){const I=X.users.filter(V=>V.role!=="owner");t(I)}}catch(X){console.error("Error loading users:",X),k("  ","error")}},[]),N=j.useCallback(async X=>{c(!0);try{const I=await Nh.getUserPermissions(X);i(I),a(X)}catch(I){console.error("Error loading user permissions:",I),k("   ","error")}finally{c(!1)}},[]),k=j.useCallback((X,I)=>{v({message:X,type:I}),setTimeout(()=>v(null),4e3)},[]),S=j.useCallback(X=>{f(I=>{const V=new Set(I);return V.has(X)?V.delete(X):V.add(X),V})},[]),_=j.useCallback((X,I)=>{n&&i(V=>{if(!V)return V;const R={...V.module_permissions};if(R[X]||(R[X]={enabled:!1,permissions:{},data_access:{type:"none",can_view:!1,can_edit:!1,can_delete:!1,can_export:!1}}),R[X]={...R[X],enabled:I},!I){const H={};Object.keys(R[X].permissions).forEach(ee=>{H[ee]=!1}),R[X].permissions=H}return{...V,module_permissions:R}})},[n]),T=j.useCallback((X,I,V)=>{n&&i(R=>{if(!R)return R;const H={...R.module_permissions};return H[X]||(H[X]={enabled:!1,permissions:{},data_access:{type:"none",can_view:!1,can_edit:!1,can_delete:!1,can_export:!1}}),H[X]={...H[X],permissions:{...H[X].permissions,[I]:V}},{...R,module_permissions:H}})},[n]),E=j.useCallback((X,I,V)=>{n&&i(R=>{if(!R)return R;const H={...R.module_permissions};return H[X]||(H[X]={enabled:!1,permissions:{},data_access:{type:"none",can_view:!1,can_edit:!1,can_delete:!1,can_export:!1}}),H[X]={...H[X],data_access:{...H[X].data_access,[I]:V}},{...R,module_permissions:H}})},[n]),z=j.useCallback(async X=>{if(!r){k(" ","error");return}try{const I=await Nh.getRoleTemplate(X);i(V=>V&&{...V,module_permissions:I.modules}),k(`  "${I.name}"`,"success")}catch(I){console.error("Error applying template:",I),k("  ","error")}},[r,k]),O=j.useCallback(async()=>{if(!r||!n){k(" ","error");return}h(!0);try{const X=await Nh.updateUserPermissions(r,n.module_permissions);if(X.success)k("  !","success");else throw new Error(X.message)}catch(X){console.error("Error saving permissions:",X),k("  ","error")}finally{h(!1)}},[r,n,k]),C=j.useCallback(async()=>{if(!r){k(" ","error");return}if(confirm(" ,       ?"))try{const X=await Nh.resetUserPermissions(r);if(X.success)k("  ","success"),N(r);else throw new Error(X.message)}catch(X){console.error("Error resetting permissions:",X),k("  ","error")}},[r,k,N]),A=j.useMemo(()=>({view:" ",create:" ",edit:" ",delete:" ",export:" ",assign:" ",convert:" ",close:" ",contact:" ",reports:" ",manage:" ","system.manage":" ","permissions.manage":" ","widgets.manage":" ","messages.send":" ","chats.manage":" ","settings.edit":" ",generate:" ",sign:" ",schedule:" "}),[]);return e.jsxs("div",{className:"bg-gradient-to-br from-red-50 via-pink-50 to-red-100",children:[e.jsx("div",{className:"bg-gradient-to-r from-red-500 to-pink-600 text-white p-8 rounded-3xl shadow-2xl mb-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center",children:e.jsx(Or,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold",children:"  "}),e.jsx("p",{className:"text-red-100 mt-1",children:"     "})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-8 pb-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl p-6 border border-red-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(it,{className:"w-6 h-6 text-red-500"}),e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:""})]}),e.jsxs("div",{className:"space-y-3 max-h-[600px] overflow-y-auto",children:[s.map(X=>e.jsx("div",{onClick:()=>N(X.id),className:`
                    p-4 rounded-2xl cursor-pointer transition-all duration-300
                    ${r===X.id?"bg-gradient-to-r from-red-100 to-pink-100 border-2 border-red-500 shadow-lg":"bg-gray-50 hover:bg-gray-100 border-2 border-transparent"}
                  `,children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-red-500 to-pink-500 flex items-center justify-center text-white font-bold shadow-lg",children:X.username[0].toUpperCase()}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-gray-800",children:X.username}),e.jsxs("div",{className:`
                          text-xs px-2 py-1 rounded-full inline-block mt-1
                          ${X.role==="executor"?"bg-green-100 text-green-700":""}
                          ${X.role==="salesperson"?"bg-orange-100 text-orange-700":""}
                          ${X.role==="admin"?"bg-purple-100 text-purple-700":""}
                        `,children:[X.role==="executor"?" ":"",X.role==="salesperson"?" ":"",X.role==="admin"?" ":""]})]})]})})},X.id)),s.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx(it,{className:"w-16 h-16 mx-auto mb-4 opacity-30"}),e.jsx("h4",{className:"font-semibold text-gray-600",children:" "}),e.jsx("p",{className:"text-sm",children:'    ""'})]})]})]}),e.jsxs("div",{className:"lg:col-span-2 bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl p-6 border border-red-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ta,{className:"w-6 h-6 text-red-500"}),e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:" "})]}),r&&g==="module"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>z("executor"),className:"px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl hover:shadow-lg transition-all duration-300 flex items-center gap-2",children:[e.jsx(iE,{className:"w-4 h-4"}),""]}),e.jsxs("button",{onClick:()=>z("salesperson"),className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-amber-500 text-white rounded-xl hover:shadow-lg transition-all duration-300 flex items-center gap-2",children:[e.jsx(kn,{className:"w-4 h-4"}),""]})]})]}),r&&e.jsxs("div",{className:"flex gap-2 mb-6 border-b border-gray-200",children:[e.jsx("button",{onClick:()=>y("module"),className:`px-4 py-2 font-medium transition-all ${g==="module"?"text-red-600 border-b-2 border-red-600":"text-gray-600 hover:text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Or,{className:"w-4 h-4"})," "]})}),e.jsx("button",{onClick:()=>y("ui"),className:`px-4 py-2 font-medium transition-all ${g==="ui"?"text-red-600 border-b-2 border-red-600":"text-gray-600 hover:text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Jj,{className:"w-4 h-4"})," UI "]})})]}),o&&e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-red-200 border-t-red-500 rounded-full animate-spin mx-auto mb-4"}),e.jsx("h4",{className:"text-gray-600 font-semibold",children:"  ..."})]}),!o&&!n&&e.jsxs("div",{className:"text-center py-20 text-gray-400",children:[e.jsx(Or,{className:"w-16 h-16 mx-auto mb-4 opacity-30"}),e.jsx("h4",{className:"font-semibold text-gray-600",children:" "}),e.jsx("p",{className:"text-sm",children:"         "})]}),!o&&n&&g==="module"&&e.jsxs("div",{children:[e.jsx("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 rounded-2xl p-5 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-red-500 to-pink-500 flex items-center justify-center text-white font-bold shadow-lg",children:n.user.username[0].toUpperCase()}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800",children:n.user.username}),e.jsx("p",{className:"text-sm text-gray-600",children:n.user.email})]})]})}),e.jsx("div",{className:"space-y-4 max-h-[500px] overflow-y-auto",children:Object.entries(n.available_modules).map(([X,I])=>{const V=n.module_permissions[X]||{enabled:!1,permissions:{},data_access:{type:"none",can_view:!1,can_edit:!1,can_delete:!1,can_export:!1}},R=V.enabled,H=m.has(X);return e.jsxs("div",{className:`
                          rounded-2xl overflow-hidden border-2 transition-all duration-300
                          ${R?"border-green-500 bg-green-50":"border-gray-200 bg-gray-50"}
                        `,children:[e.jsx("div",{className:"p-4 cursor-pointer hover:bg-white/50 transition-colors",onClick:()=>S(X),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:"text-2xl",children:NJ[X]||""}),e.jsxs("div",{children:[e.jsx("h6",{className:"font-semibold text-gray-800",children:I.name}),e.jsx("small",{className:"text-gray-500",children:I.description})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:R,onChange:ee=>{ee.stopPropagation(),_(X,ee.target.checked)}}),e.jsx("div",{className:"w-14 h-7 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-green-500"})]}),H?e.jsx(jp,{className:"w-5 h-5 text-gray-400"}):e.jsx(Ci,{className:"w-5 h-5 text-gray-400"})]})]})}),H&&e.jsx("div",{className:"p-5 bg-white/70 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h6",{className:"font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(Or,{className:"w-4 h-4 text-red-500"}),""]}),e.jsx("div",{className:"space-y-2",children:I.permissions.map(ee=>{const se=V.permissions[ee]||!1;return e.jsxs("label",{className:"flex items-center justify-between p-3 bg-white rounded-xl hover:bg-gray-50 transition-colors cursor-pointer",children:[e.jsx("span",{className:"text-sm text-gray-700",children:A[ee]||ee}),e.jsx("input",{type:"checkbox",className:"w-5 h-5 text-green-500 rounded focus:ring-green-500",checked:se,onChange:W=>T(X,ee,W.target.checked)})]},ee)})})]}),e.jsxs("div",{children:[e.jsxs("h6",{className:"font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(Ta,{className:"w-4 h-4 text-red-500"}),"  "]}),e.jsxs("select",{className:"w-full p-3 bg-white border border-gray-300 rounded-xl mb-3 focus:ring-2 focus:ring-red-500 focus:border-transparent",value:V.data_access.type,onChange:ee=>E(X,"type",ee.target.value),children:[e.jsx("option",{value:"none",children:"  "}),e.jsx("option",{value:"own",children:"  "}),e.jsx("option",{value:"team",children:" "}),e.jsx("option",{value:"all",children:"  "})]}),e.jsx("div",{className:"space-y-2",children:["can_view","can_edit","can_delete","can_export"].map(ee=>e.jsxs("label",{className:"flex items-center justify-between p-3 bg-white rounded-xl hover:bg-gray-50 transition-colors cursor-pointer",children:[e.jsxs("span",{className:"text-sm text-gray-700",children:[ee==="can_view"&&" ",ee==="can_edit"&&" ",ee==="can_delete"&&" ",ee==="can_export"&&" "]}),e.jsx("input",{type:"checkbox",className:"w-5 h-5 text-green-500 rounded focus:ring-green-500",checked:V.data_access[ee],onChange:se=>E(X,ee,se.target.checked)})]},ee))})]})]})})]},X)})}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx("button",{onClick:O,disabled:u,className:"flex-1 px-6 py-4 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-2xl hover:shadow-xl transition-all duration-300 flex items-center justify-center gap-3 font-semibold disabled:opacity-50",children:u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Aa,{className:"w-5 h-5"})," "]})}),e.jsxs("button",{onClick:C,className:"px-6 py-4 bg-white border-2 border-red-300 text-red-600 rounded-2xl hover:bg-red-50 transition-all duration-300 flex items-center gap-3 font-semibold",children:[e.jsx(Cn,{className:"w-5 h-5"})," "]})]})]}),!o&&r&&g==="ui"&&e.jsx(wJ,{userId:r,username:n?.user.username||`User #${r}`,onSave:()=>{k(" UI   ","success")}})]})]})}),p&&e.jsx("div",{className:`
          fixed top-6 right-6 px-6 py-4 rounded-2xl shadow-2xl border-l-4 z-50
          animate-in slide-in-from-right duration-300
          ${p.type==="success"?"bg-white border-green-500":"bg-white border-red-500"}
        `,children:e.jsxs("div",{className:"flex items-center gap-3",children:[p.type==="success"?e.jsx(Hr,{className:"w-6 h-6 text-green-500"}):e.jsx(Ge,{className:"w-6 h-6 text-red-500"}),e.jsx("span",{className:"font-medium text-gray-800",children:p.message})]})})]})},vo={getUsers:async()=>(await fe.get("/admin/api/users/api")).data,getUser:async s=>(await fe.get(`/admin/api/users/${s}`)).data,createUser:async s=>(await fe.post("/admin/api/users/create",s)).data,updateUser:async(s,t)=>(await fe.put(`/admin/api/users/${s}`,t)).data,changePassword:async(s,t)=>(await fe.put(`/admin/api/users/${s}/password`,{password:t,new_password:t})).data,viewPassword:async s=>(await fe.get(`/admin/api/users/${s}/password/view`)).data,deactivateUser:async s=>(await fe.delete(`/admin/api/users/${s}`)).data,updateNotifications:async(s,t)=>(await fe.put(`/admin/api/users/${s}/notifications`,t)).data,toggleUserStatus:async(s,t)=>(await fe.put(`/admin/api/users/${s}`,{is_active:t})).data,getExecutors:async()=>(await fe.get("/admin/api/users/executors")).data},kJ=()=>{const[s,t]=j.useState([]),[r,a]=j.useState(""),[n,i]=j.useState(!1),[o,c]=j.useState(!1),[u,h]=j.useState(!1),[m,f]=j.useState(!1),[p,v]=j.useState(!1),[g,y]=j.useState(null),[w,N]=j.useState(null),[k,S]=j.useState(!1),[_,T]=j.useState(""),[E,z]=j.useState({username:"",password:"",email:"",first_name:"",last_name:"",role:"executor"}),[O,C]=j.useState({first_name:"",last_name:"",email:"",password:"",is_active:!0}),[A,X]=j.useState(""),[I,V]=j.useState("");j.useEffect(()=>{R()},[]);const R=j.useCallback(async()=>{i(!0);try{const F=await vo.getUsers();F.success&&t(F.users)}catch(F){console.error("Error loading users:",F),H("  ","error")}finally{i(!1)}},[]),H=j.useCallback((F,Z)=>{N({message:F,type:Z}),setTimeout(()=>N(null),4e3)},[]),ee=j.useMemo(()=>{if(!r)return s;const F=r.toLowerCase();return s.filter(Z=>Z.username.toLowerCase().includes(F)||Z.email?.toLowerCase().includes(F)||Z.first_name?.toLowerCase().includes(F)||Z.last_name?.toLowerCase().includes(F))},[s,r]),se=j.useMemo(()=>({total:s.length,owners:s.filter(F=>F.role==="owner").length,admins:s.filter(F=>F.role==="admin").length,executors:s.filter(F=>F.role==="executor").length,salespeople:s.filter(F=>F.role==="salesperson").length,timleads:s.filter(F=>F.role==="timlead").length}),[s]),W=j.useCallback(async()=>{if(!E.username||!E.password){H("  ","error");return}try{const F=await vo.createUser(E);F.success?(H("  ","success"),c(!1),z({username:"",password:"",email:"",first_name:"",last_name:"",role:"executor"}),R()):H(F.message||F.detail||"  ","error")}catch(F){console.error("Error creating user:",F),H(F.response?.data?.detail||"  ","error")}},[E,H,R]),te=j.useCallback(async F=>{y(F),C({first_name:F.first_name||"",last_name:F.last_name||"",email:F.email||"",password:"",is_active:F.is_active}),h(!0)},[]),J=j.useCallback(async()=>{if(g)try{const F=await vo.updateUser(g.id,O);F.success?(H("  ","success"),h(!1),y(null),R()):H(F.message||"  ","error")}catch(F){console.error("Error updating user:",F),H("  ","error")}},[g,O,H,R]),K=j.useCallback(F=>{y(F),X(""),V(""),f(!0)},[]),$=j.useCallback(async()=>{if(g){if(A!==I){H("  ","error");return}if(A.length<6){H("    6 ","error");return}try{const F=await vo.changePassword(g.id,A);F.success?(H("  ","success"),f(!1),y(null),X(""),V("")):H(F.message||"  ","error")}catch(F){console.error("Error changing password:",F),H("  ","error")}}},[g,A,I,H]),ie=j.useCallback(async F=>{try{const Z=await vo.viewPassword(F.id);Z.success?(T(Z.password),y(F),v(!0)):H(Z.message||"   ","error")}catch(Z){console.error("Error viewing password:",Z),H("   ","error")}},[H]),ne=j.useCallback(async F=>{try{const Z=await vo.toggleUserStatus(F.id,!F.is_active);Z.success?(H(F.is_active?" ":" ","success"),R()):H(Z.message||"  ","error")}catch(Z){console.error("Error toggling status:",Z),H("  ","error")}},[H,R]),oe=j.useCallback(async F=>{if(confirm(` ,     ${F.username}?`))try{const Z=await vo.deactivateUser(F.id);Z.success?(H(" ","success"),R()):H(Z.message||"  ","error")}catch(Z){console.error("Error deleting user:",Z),H("  ","error")}},[H,R]),ce=j.useCallback(()=>{navigator.clipboard.writeText(_),H("    ","success")},[_,H]),U=j.useCallback(F=>{switch(F){case"owner":return e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gradient-to-r from-purple-500 to-indigo-600 text-white rounded-full text-sm font-semibold",children:[e.jsx(PP,{className:"w-4 h-4"}),""]});case"admin":return e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gradient-to-r from-blue-500 to-cyan-600 text-white rounded-full text-sm font-semibold",children:[e.jsx(Or,{className:"w-4 h-4"}),""]});case"salesperson":return e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-full text-sm font-semibold",children:[e.jsx(kn,{className:"w-4 h-4"}),""]});case"timlead":return e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gradient-to-r from-orange-500 to-amber-600 text-white rounded-full text-sm font-semibold",children:[e.jsx(lt,{className:"w-4 h-4"}),""]});default:return e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gradient-to-r from-pink-500 to-rose-600 text-white rounded-full text-sm font-semibold",children:[e.jsx(lt,{className:"w-4 h-4"}),""]})}},[]);return e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 via-slate-50 to-gray-100",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-500 to-slate-600 text-white p-8 rounded-3xl shadow-2xl mb-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center",children:e.jsx(it,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold",children:" "}),e.jsx("p",{className:"text-gray-100 mt-1",children:"   "})]})]}),e.jsxs("button",{onClick:()=>c(!0),className:"px-6 py-3 bg-white text-gray-700 rounded-2xl hover:shadow-xl transition-all duration-300 flex items-center gap-3 font-semibold",children:[e.jsx(fN,{className:"w-5 h-5"})," "]})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-4 mt-8",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold",children:se.total}),e.jsx("div",{className:"text-sm text-gray-200 mt-1",children:""})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold",children:se.owners}),e.jsx("div",{className:"text-sm text-gray-200 mt-1",children:""})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold",children:se.admins}),e.jsx("div",{className:"text-sm text-gray-200 mt-1",children:""})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold",children:se.executors}),e.jsx("div",{className:"text-sm text-gray-200 mt-1",children:""})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold",children:se.salespeople}),e.jsx("div",{className:"text-sm text-gray-200 mt-1",children:""})]})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-8 pb-8",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-4 mb-6 border border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(Us,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"    username...",value:r,onChange:F=>a(F.target.value),className:"w-full pl-12 pr-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-500 focus:border-transparent"})]})}),e.jsx("div",{className:"space-y-4",children:n?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-gray-500 rounded-full animate-spin mx-auto mb-4"}),e.jsx("h4",{className:"text-gray-600 font-semibold",children:" ..."})]}):ee.length===0?e.jsxs("div",{className:"text-center py-20 text-gray-400",children:[e.jsx(it,{className:"w-16 h-16 mx-auto mb-4 opacity-30"}),e.jsx("h4",{className:"font-semibold text-gray-600",children:"  "}),e.jsx("p",{className:"text-sm",children:"     "})]}):ee.map(F=>e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6 border border-gray-200 hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-gray-500 to-slate-600 flex items-center justify-center text-white font-bold shadow-lg",children:F.username[0].toUpperCase()}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("h5",{className:"text-lg font-bold text-gray-800",children:F.first_name&&F.last_name?`${F.first_name} ${F.last_name}`:F.username}),e.jsx("div",{className:`
                          px-2 py-1 rounded-lg text-xs font-semibold
                          ${F.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}
                        `,children:F.is_active?e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Hr,{className:"w-3 h-3"}),""]}):e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ge,{className:"w-3 h-3"}),""]})})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["@",F.username]}),F.email&&e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:F.email})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:U(F.role)})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-700",children:F.tasks_count||0}),e.jsx("div",{className:"text-xs text-gray-500 uppercase",children:" "})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-700",children:F.active_tasks||0}),e.jsx("div",{className:"text-xs text-gray-500 uppercase",children:""})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-700",children:F.created_at?new Date(F.created_at).toLocaleDateString():"-"}),e.jsx("div",{className:"text-xs text-gray-500 uppercase",children:""})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[e.jsxs("button",{onClick:()=>te(F),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-colors flex items-center gap-2 text-sm font-semibold",children:[e.jsx(An,{className:"w-4 h-4"}),""]}),e.jsxs("button",{onClick:()=>ie(F),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-colors flex items-center gap-2 text-sm font-semibold",children:[e.jsx(Vt,{className:"w-4 h-4"})," "]}),e.jsxs("button",{onClick:()=>K(F),className:"px-4 py-2 bg-green-500 text-white rounded-xl hover:bg-green-600 transition-colors flex items-center gap-2 text-sm font-semibold",children:[e.jsx(Xj,{className:"w-4 h-4"})," "]}),F.role!=="owner"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ne(F),className:`px-4 py-2 rounded-xl transition-colors flex items-center gap-2 text-sm font-semibold ${F.is_active?"bg-amber-500 text-white hover:bg-amber-600":"bg-emerald-500 text-white hover:bg-emerald-600"}`,children:F.is_active?e.jsxs(e.Fragment,{children:[e.jsx(QF,{className:"w-4 h-4"}),""]}):e.jsxs(e.Fragment,{children:[e.jsx(KF,{className:"w-4 h-4"}),""]})}),e.jsxs("button",{onClick:()=>oe(F),className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors flex items-center gap-2 text-sm font-semibold",children:[e.jsx(tt,{className:"w-4 h-4"}),""]})]})]})]},F.id))})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full p-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:" "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Username *"}),e.jsx("input",{type:"text",value:E.username,onChange:F=>z({...E,username:F.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"password",value:E.password,onChange:F=>z({...E,password:F.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-500 focus:border-transparent"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:E.first_name,onChange:F=>z({...E,first_name:F.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:E.last_name,onChange:F=>z({...E,last_name:F.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:E.email,onChange:F=>z({...E,email:F.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:E.role,onChange:F=>z({...E,role:F.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-500 focus:border-transparent",children:[e.jsx("option",{value:"salesperson",children:""}),e.jsx("option",{value:"executor",children:""}),e.jsx("option",{value:"admin",children:""}),e.jsx("option",{value:"owner",children:""})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>c(!1),className:"flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-colors font-semibold",children:""}),e.jsx("button",{onClick:W,className:"flex-1 px-6 py-3 bg-gradient-to-r from-gray-500 to-slate-600 text-white rounded-xl hover:shadow-lg transition-all duration-300 font-semibold",children:""})]})]})}),u&&g&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full p-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:" "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Username"}),e.jsx("input",{type:"text",value:g.username,disabled:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl bg-gray-100"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:O.first_name,onChange:F=>C({...O,first_name:F.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:O.last_name,onChange:F=>C({...O,last_name:F.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:O.email,onChange:F=>C({...O,email:F.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-500 focus:border-transparent"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:O.is_active,onChange:F=>C({...O,is_active:F.target.checked}),className:"w-5 h-5 text-gray-500 rounded focus:ring-gray-500"}),e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:""})]})})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>h(!1),className:"flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-colors font-semibold",children:""}),e.jsx("button",{onClick:J,className:"flex-1 px-6 py-3 bg-gradient-to-r from-gray-500 to-slate-600 text-white rounded-xl hover:shadow-lg transition-all duration-300 font-semibold",children:""})]})]})}),m&&g&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full p-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:" "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:k?"text":"password",value:A,onChange:F=>X(F.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-500 focus:border-transparent pr-12"}),e.jsx("button",{onClick:()=>S(!k),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:k?e.jsx(Ho,{className:"w-5 h-5"}):e.jsx(Vt,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  *"}),e.jsx("input",{type:k?"text":"password",value:I,onChange:F=>V(F.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>f(!1),className:"flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-colors font-semibold",children:""}),e.jsx("button",{onClick:$,className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl hover:shadow-lg transition-all duration-300 font-semibold",children:" "})]})]})}),p&&g&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full p-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:" "}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-4 mb-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700 mb-2",children:[e.jsx(Ge,{className:"w-5 h-5"}),e.jsxs("span",{className:"font-semibold",children:[": ",g.username]})]})}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:_,readOnly:!0,className:"flex-1 px-4 py-3 border border-gray-300 rounded-xl bg-gray-50"}),e.jsx("button",{onClick:ce,className:"px-4 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-colors",children:""})]})}),e.jsxs("div",{className:"text-xs text-gray-500 mb-6",children:[e.jsx(Or,{className:"w-4 h-4 inline mr-1"}),"    "]}),e.jsx("button",{onClick:()=>v(!1),className:"w-full px-6 py-3 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-colors font-semibold",children:""})]})}),w&&e.jsx("div",{className:`
          fixed top-6 right-6 px-6 py-4 rounded-2xl shadow-2xl border-l-4 z-50
          animate-in slide-in-from-right duration-300
          ${w.type==="success"?"bg-white border-green-500":"bg-white border-red-500"}
        `,children:e.jsxs("div",{className:"flex items-center gap-3",children:[w.type==="success"?e.jsx(Hr,{className:"w-6 h-6 text-green-500"}):e.jsx(Ge,{className:"w-6 h-6 text-red-500"}),e.jsx("span",{className:"font-medium text-gray-800",children:w.message})]})})]})},SJ=()=>{const{theme:s,setTheme:t}=Cm(),[r,a]=j.useState("overview"),n=[{icon:lt,title:"",description:"  ",gradient:"from-blue-500 to-cyan-500"},{icon:sa,title:"",description:" ",gradient:"from-purple-500 to-pink-500"},{icon:Or,title:"",description:"   ",gradient:"from-green-500 to-emerald-500"},{icon:$4,title:" ",description:"  ",gradient:"from-orange-500 to-red-500"},{icon:tm,title:"  ",description:"   ",gradient:"from-indigo-500 to-purple-500"},{icon:Ta,title:"",description:"  ",gradient:"from-gray-500 to-gray-700"}];return e.jsxs("div",{className:"p-8 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:""}),e.jsx("p",{className:"text-gray-600",children:"    "})]}),e.jsxs("div",{className:"flex gap-2 border-b border-gray-200",children:[e.jsx("button",{onClick:()=>a("overview"),className:`px-6 py-3 font-semibold transition-all ${r==="overview"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,children:""}),e.jsxs("button",{onClick:()=>a("appearance"),className:`px-6 py-3 font-semibold transition-all flex items-center gap-2 ${r==="appearance"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx($4,{className:"w-4 h-4"})," "]})]}),r==="overview"&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map((i,o)=>{const c=i.icon;return e.jsxs("button",{onClick:()=>i.title===" "&&a("appearance"),className:"group bg-white rounded-2xl p-6 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-1 border border-gray-100 text-left",children:[e.jsx("div",{className:`w-14 h-14 rounded-2xl bg-gradient-to-br ${i.gradient} flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300 shadow-lg`,children:e.jsx(c,{className:"w-7 h-7 text-white"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2 group-hover:text-purple-600 transition-colors",children:i.title}),e.jsx("p",{className:"text-sm text-gray-600",children:i.description})]},o)})})}),r==="appearance"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"  "}),e.jsx("p",{className:"text-gray-600 mb-6",children:" ,    "}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.entries(W9).map(([i,o])=>e.jsxs("button",{onClick:()=>t(i),className:`relative bg-white rounded-xl p-6 border-2 transition-all duration-300 hover:shadow-lg ${s===i?"border-blue-600 ring-4 ring-blue-100":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg shadow-sm",style:{background:o.primary}}),e.jsx("div",{className:"w-12 h-12 rounded-lg shadow-sm",style:{background:o.secondary}}),e.jsx("div",{className:"w-12 h-12 rounded-lg shadow-sm",style:{background:o.accent}})]})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:o.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:o.description}),s===i&&e.jsx("div",{className:"absolute top-4 right-4 w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx(is,{className:"w-5 h-5 text-white"})})]},i))})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-600 via-pink-600 to-red-500 rounded-3xl p-8 text-white shadow-xl",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:" ?"}),e.jsx("p",{className:"text-purple-100 mb-4 max-w-xl",children:"          "}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{className:"bg-white text-purple-600 px-6 py-3 rounded-xl font-semibold hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5",children:""}),e.jsx("button",{className:"bg-white/20 backdrop-blur-sm text-white px-6 py-3 rounded-xl font-semibold hover:bg-white/30 transition-all duration-300",children:"  "})]})]}),e.jsx("div",{className:"hidden lg:block",children:e.jsx("div",{className:"w-32 h-32 bg-white/10 rounded-3xl flex items-center justify-center backdrop-blur-sm",children:e.jsx(Ta,{className:"w-16 h-16 text-white/80"})})})]})})]})},df=()=>{let s=localStorage.getItem("auth");if(!s){const a={username:"admin",password:"qwerty123"};localStorage.setItem("auth",JSON.stringify(a)),s=JSON.stringify(a)}const{username:t,password:r}=JSON.parse(s);return`Basic ${btoa(`${t}:${r}`)}`},CJ=()=>{const[s,t]=j.useState("record"),[r,a]=j.useState([]),[n,i]=j.useState(!1),[o,c]=j.useState(!1),[u,h]=j.useState(!1),[m,f]=j.useState(0),[p,v]=j.useState(""),[g,y]=j.useState(""),w=j.useRef(null),N=j.useRef(null),[k,S]=j.useState(null),[_,T]=j.useState(!1),[E,z]=j.useState(null),[O,C]=j.useState(!1),[A,X]=j.useState(null),[I,V]=j.useState(0),[R,H]=j.useState("");j.useEffect(()=>{const Q=window.SpeechRecognition||window.webkitSpeechRecognition;if(!Q){X("Web Speech API     .  Chrome  Edge.");return}const le=new Q;return le.continuous=!0,le.interimResults=!0,le.lang="ru-RU",le.maxAlternatives=1,le.onresult=me=>{console.log(" Recognition result received:",me);let G="",ue="";for(let Y=me.resultIndex;Y<me.results.length;Y++){const L=me.results[Y][0].transcript;me.results[Y].isFinal?(ue+=L+" ",console.log(" Final transcript:",L)):(G+=L,console.log(" Interim transcript:",L))}y(G),ue&&v(Y=>Y+ue)},le.onerror=me=>{console.error("Speech recognition error:",me.error),me.error==="no-speech"||me.error==="aborted"||X(` : ${me.error}`)},le.onend=()=>{if(o)try{le.start()}catch(me){console.log("Recognition restart failed:",me)}h(!1)},N.current=le,()=>{le&&le.stop()}},[o]),j.useEffect(()=>(o?w.current=setInterval(()=>{f(Q=>Q+1)},1e3):w.current&&clearInterval(w.current),()=>{w.current&&clearInterval(w.current)}),[o]);const ee=Q=>{const le=Math.floor(Q/3600),me=Math.floor(Q%3600/60),G=Q%60;return`${le.toString().padStart(2,"0")}:${me.toString().padStart(2,"0")}:${G.toString().padStart(2,"0")}`},se=async()=>{try{X(null),v(""),y(""),f(0),await navigator.mediaDevices.getUserMedia({audio:!0}),N.current&&(N.current.start(),c(!0),h(!0))}catch(Q){X("     .  ."),console.error("Error starting recording:",Q)}},W=()=>{N.current&&o&&(N.current.stop(),c(!1),h(!1))},te=()=>{v(""),y(""),f(0)},J=()=>{if(!p)return;const Q=new Blob([p],{type:"text/plain;charset=utf-8"}),le=URL.createObjectURL(Q),me=document.createElement("a");me.href=le,me.download=`transcript_${new Date().toISOString().split("T")[0]}.txt`,document.body.appendChild(me),me.click(),URL.revokeObjectURL(le),document.body.removeChild(me)},K=()=>{p&&navigator.clipboard.writeText(p).then(()=>{console.log("    ")}).catch(Q=>{console.error("  :",Q),X("   ")})},$=(Q,le)=>new Promise((me,G)=>{const ue=new XMLHttpRequest;ue.upload.addEventListener("progress",Y=>{if(Y.lengthComputable){const L=Math.round(Y.loaded/Y.total*100),M=(Y.loaded/(1024*1024)).toFixed(1),B=(Y.total/(1024*1024)).toFixed(1);V(L),H(` : ${M} MB  ${B} MB (${L}%)`)}}),ue.addEventListener("load",()=>{if(ue.status>=200&&ue.status<300)try{const Y=JSON.parse(ue.responseText);V(100),H(" ,  ..."),me(Y)}catch(Y){G(new Error("   : "+Y))}else try{const Y=JSON.parse(ue.responseText);G(new Error(`HTTP ${ue.status}: ${Y.detail||ue.statusText}`))}catch{G(new Error(`HTTP ${ue.status}: ${ue.statusText}`))}}),ue.addEventListener("error",()=>{G(new Error(" "))}),ue.addEventListener("abort",()=>{G(new Error(" "))}),ue.open("POST",Q),ue.setRequestHeader("Authorization",df()),ue.send(le)}),ie=async Q=>{if(Q){if(Q.size>10*1024*1024*1024){X("  .  : 10GB");return}z(null),S(Q),C(!0),X(null),V(0),H(" ...");try{const le=new FormData;le.append("video",Q);const me=await $(`${V0}/api/v1/transcription/upload-video`,le);z({task_id:me.task_id,status:"processing",progress:0}),V(100),H(" ..."),ne(me.task_id)}catch(le){const me=le?.message||"   ";X(me),C(!1),H(""),console.error("Error uploading file:",le)}}},ne=async Q=>{const le=setInterval(async()=>{try{const me=await fetch(`${V0}/api/v1/transcription/status/${Q}`,{headers:{Authorization:df()}});if(!me.ok)throw new Error("   ");const G=await me.json();z(G),G.status==="processing"?G.stage?H(G.stage):G.progress<20?H("   ..."):G.progress<40?H("  ..."):G.progress<70?H(" ..."):G.progress<90?H(" ..."):H(" ..."):G.status==="completed"?(H(G.stage||"!"),V(100)):G.status==="error"&&H(" "),(G.status==="completed"||G.status==="error")&&(clearInterval(le),C(!1),G.status==="error"&&(X(G.error||"   "),H("")))}catch(me){console.error("Error polling status:",me),clearInterval(le),C(!1),H(""),X("    ")}},2e3)},oe=Q=>{Q.preventDefault(),T(!0)},ce=Q=>{Q.preventDefault(),T(!1)},U=Q=>{Q.preventDefault(),T(!1);const le=Q.dataTransfer.files;if(le.length>0){const me=le[0];me.type.startsWith("video/")||me.type.startsWith("audio/")?ie(me):X(",     ")}},F=()=>{S(null)},Z=async(Q,le)=>{try{const G=await(await fetch(`${V0}${Q}`,{headers:{Authorization:df()}})).blob(),ue=window.URL.createObjectURL(G),Y=document.createElement("a");Y.href=ue,Y.download=le,document.body.appendChild(Y),Y.click(),window.URL.revokeObjectURL(ue),document.body.removeChild(Y)}catch(me){console.error("Error downloading file:",me),X("   ")}},q=async()=>{try{i(!0);const Q=await fetch(`${V0}/api/v1/transcription/list`,{headers:{Authorization:df()}});if(!Q.ok)throw new Error("Failed to load history");const le=await Q.json();a(le.transcriptions||[])}catch(Q){console.error("Error loading history:",Q)}finally{i(!1)}};return j.useEffect(()=>{s==="history"&&q()},[s]),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-normal text-gray-900 mb-2",children:" /"}),e.jsx("p",{className:"text-gray-600",children:"       "})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-lg mb-6",children:[e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsx("button",{onClick:()=>t("record"),className:`flex-1 px-6 py-4 text-center font-medium transition-all ${s==="record"?"text-purple-600 border-b-2 border-purple-600 bg-purple-50":"text-gray-600 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(rm,{className:"w-5 h-5"}),e.jsx("span",{children:"  "})]})}),e.jsx("button",{onClick:()=>t("upload"),className:`flex-1 px-6 py-4 text-center font-medium transition-all ${s==="upload"?"text-purple-600 border-b-2 border-purple-600 bg-purple-50":"text-gray-600 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(jn,{className:"w-5 h-5"}),e.jsx("span",{children:" "})]})}),e.jsx("button",{onClick:()=>t("history"),className:`flex-1 px-6 py-4 text-center font-medium transition-all ${s==="history"?"text-purple-600 border-b-2 border-purple-600 bg-purple-50":"text-gray-600 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Ve,{className:"w-5 h-5"}),e.jsx("span",{children:" "})]})})]}),e.jsxs("div",{className:"p-8",children:[s==="record"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 rounded-2xl p-8 border border-purple-200",children:e.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 text-4xl font-light text-gray-900",children:[e.jsx(Ve,{className:"w-8 h-8 text-purple-600"}),ee(m)]}),u&&e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-green-100 rounded-full",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-green-800",children:"..."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[o?e.jsxs("button",{onClick:W,className:"flex items-center gap-3 px-8 py-4 bg-red-600 text-white rounded-xl hover:bg-red-700 transition-all shadow-lg hover:shadow-xl animate-pulse",children:[e.jsx(wP,{className:"w-6 h-6"}),e.jsx("span",{className:"text-lg font-medium",children:""})]}):e.jsxs("button",{onClick:se,className:"flex items-center gap-3 px-8 py-4 bg-purple-600 text-white rounded-xl hover:bg-purple-700 transition-all shadow-lg hover:shadow-xl",children:[e.jsx(bP,{className:"w-6 h-6"}),e.jsx("span",{className:"text-lg font-medium",children:" "})]}),p&&!o&&e.jsxs("button",{onClick:te,className:"flex items-center gap-2 px-6 py-4 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-all",children:[e.jsx(tt,{className:"w-5 h-5"}),e.jsx("span",{children:""})]})]}),(p||g)&&e.jsx("div",{className:"w-full max-w-4xl",children:e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:" "}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:K,className:"flex items-center gap-2 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all",title:"   ",children:[e.jsx(er,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:""})]}),e.jsxs("button",{onClick:J,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-all",title:"  TXT",children:[e.jsx(Tt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:" TXT"})]})]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto bg-gray-50 rounded-lg p-4",children:e.jsxs("p",{className:"text-gray-900 whitespace-pre-wrap leading-relaxed",children:[p,g&&e.jsx("span",{className:"text-gray-500 italic",children:g})]})}),e.jsxs("div",{className:"mt-4 flex items-center justify-between text-sm text-gray-600",children:[e.jsxs("span",{children:[": ",p.length]}),e.jsxs("span",{children:[": ~",p.split(/\s+/).filter(Boolean).length]})]})]})})]})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ge,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-900",children:[e.jsx("p",{className:"font-medium mb-1",children:"  "}),e.jsxs("ul",{className:"list-disc list-inside text-blue-700 space-y-1",children:[e.jsx("li",{children:"      (   )"}),e.jsx("li",{children:"   Chrome  Edge "}),e.jsx("li",{children:"    "}),e.jsx("li",{children:"     TXT "})]})]})]})})]}),s==="upload"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{onDragOver:oe,onDragLeave:ce,onDrop:U,className:`border-2 border-dashed rounded-2xl p-12 text-center transition-all ${_?"border-purple-600 bg-purple-50":"border-gray-300 hover:border-gray-400 bg-gray-50"}`,children:[e.jsx("input",{type:"file",id:"file-upload",className:"hidden",accept:"video/*,audio/*,.m4a,.mp4,.mp3,.wav,.webm,.flac,.ogg",onChange:Q=>{const le=Q.target.files?.[0];le&&ie(le)},disabled:O}),e.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(Ef,{className:"w-10 h-10 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-medium text-gray-900 mb-1",children:"      "}),e.jsx("p",{className:"text-sm text-gray-600",children:": MP4, M4A, MP3, WAV, WebM, FLAC, OGG ( 10GB)"})]})]})]}),k&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ef,{className:"w-6 h-6 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-900",children:k.name}),e.jsxs("p",{className:"text-sm text-green-700",children:[(k.size/(1024*1024)).toFixed(2)," MB"]})]})]}),e.jsx("button",{onClick:F,disabled:O,className:"p-2 hover:bg-green-100 rounded-lg transition-all disabled:opacity-50",children:e.jsx(tt,{className:"w-5 h-5 text-green-700"})})]})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ge,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-900",children:[e.jsx("p",{className:"font-medium mb-1",children:" "}),e.jsxs("ul",{className:"list-disc list-inside text-blue-700 space-y-1",children:[e.jsx("li",{children:" : MP4, AVI, MOV, MP3, WAV  ."}),e.jsx("li",{children:"  : 10GB"}),e.jsx("li",{children:"     "})]})]})]})})]}),A&&e.jsx("div",{className:"mt-6 bg-red-50 border border-red-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ge,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-900",children:""}),e.jsx("p",{className:"text-sm text-red-700",children:A})]})]})}),O&&R&&!E&&e.jsx("div",{className:"mt-6 bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-xl p-6 shadow-lg",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pt,{className:"w-5 h-5 text-purple-600 animate-spin"}),e.jsx("span",{className:"text-lg font-medium text-gray-900",children:R})]}),I>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:" "}),e.jsxs("span",{className:"font-medium text-purple-600",children:[I,"%"]})]}),e.jsx("div",{className:"h-3 bg-white rounded-full overflow-hidden shadow-inner",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-purple-600 transition-all duration-300 ease-out",style:{width:`${I}%`}})})]})]})}),E&&e.jsx("div",{className:"mt-6 bg-white border border-gray-200 rounded-xl p-6 shadow-lg",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[E.status==="processing"&&e.jsxs(e.Fragment,{children:[e.jsx(Pt,{className:"w-6 h-6 text-purple-600 animate-spin"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-lg font-medium text-gray-900",children:"..."}),R&&I===100&&e.jsx("span",{className:"text-sm text-gray-600",children:R})]})]}),E.status==="completed"&&e.jsxs(e.Fragment,{children:[e.jsx(Hr,{className:"w-6 h-6 text-green-600"}),e.jsx("span",{className:"text-lg font-medium text-green-900",children:"!"})]}),E.status==="error"&&e.jsxs(e.Fragment,{children:[e.jsx(Ge,{className:"w-6 h-6 text-red-600"}),e.jsx("span",{className:"text-lg font-medium text-red-900",children:""})]})]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[E.progress,"%"]})]}),e.jsx("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-500 ${E.status==="completed"?"bg-gradient-to-r from-green-500 to-green-600":E.status==="error"?"bg-gradient-to-r from-red-500 to-red-600":"bg-gradient-to-r from-purple-500 to-purple-600"}`,style:{width:`${E.progress}%`}})}),E.status==="completed"&&E.result&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4",children:[e.jsxs("button",{onClick:()=>Z(E.result.docx_url,"transcription.docx"),className:"flex items-center justify-center gap-2 px-6 py-3 bg-purple-600 text-white rounded-xl hover:bg-purple-700 transition-all shadow-md hover:shadow-lg",children:[e.jsx(Tt,{className:"w-5 h-5"}),e.jsx("span",{children:" DOCX"})]}),e.jsxs("button",{onClick:()=>Z(E.result.audio_url,"audio.mp3"),className:"flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-all shadow-md hover:shadow-lg",children:[e.jsx(M4,{className:"w-5 h-5"}),e.jsx("span",{children:" "})]})]}),E.status==="completed"&&E.result&&e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:" :"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 max-h-64 overflow-y-auto",children:e.jsxs("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:[E.result.transcript.slice(0,500),E.result.transcript.length>500&&"..."]})})]})]})}),s==="history"&&e.jsx("div",{className:"space-y-6",children:n?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Pt,{className:"w-8 h-8 animate-spin text-purple-600"})}):r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ve,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600",children:"  "})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(Q=>e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ef,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:""})]}),e.jsx(Hr,{className:"w-5 h-5 text-green-600"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:new Date(Q.created_at).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}),e.jsxs("div",{className:"flex gap-4 text-sm text-gray-600 mb-4",children:[e.jsxs("span",{children:[": ",(Q.docx_size/1024).toFixed(1)," KB"]}),e.jsxs("span",{children:[": ",(Q.audio_size/1024/1024).toFixed(1)," MB"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>Z(Q.docx_url,`transcript_${Q.task_id.slice(0,8)}.docx`),className:"flex items-center justify-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:[e.jsx(Tt,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsxs("button",{onClick:()=>Z(Q.audio_url,`audio_${Q.task_id.slice(0,8)}.mp3`),className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[e.jsx(M4,{className:"w-4 h-4"}),e.jsx("span",{children:""})]})]})]},Q.task_id))})})]})]})]})};var TJ=Object.defineProperty,EJ=Object.defineProperties,AJ=Object.getOwnPropertyDescriptors,a3=Object.getOwnPropertySymbols,DJ=Object.prototype.hasOwnProperty,RJ=Object.prototype.propertyIsEnumerable,Ww=(s,t,r)=>t in s?TJ(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,kt=(s,t)=>{for(var r in t||(t={}))DJ.call(t,r)&&Ww(s,r,t[r]);if(a3)for(var r of a3(t))RJ.call(t,r)&&Ww(s,r,t[r]);return s},kd=(s,t)=>EJ(s,AJ(t)),Oe=(s,t,r)=>Ww(s,typeof t!="symbol"?t+"":t,r),MJ=(s,t,r)=>new Promise((a,n)=>{var i=u=>{try{c(r.next(u))}catch(h){n(h)}},o=u=>{try{c(r.throw(u))}catch(h){n(h)}},c=u=>u.done?a(u.value):Promise.resolve(u.value).then(i,o);c((r=r.apply(s,t)).next())});class hp{constructor(t){Oe(this,"rootKey"),this.rootKey=t}}const OJ=Object.seal({});class Pe extends hp{constructor(t){super(t),Oe(this,"root"),this.root=new Array}prepForXml(t){var r;t.stack.push(this);const a=this.root.map(n=>n instanceof hp?n.prepForXml(t):n).filter(n=>n!==void 0);return t.stack.pop(),{[this.rootKey]:a.length?a.length===1&&((r=a[0])!=null&&r._attr)?a[0]:a:OJ}}addChildElement(t){return this.root.push(t),this}}class Bp extends Pe{prepForXml(t){const r=super.prepForXml(t);if(r&&(typeof r[this.rootKey]!="object"||Object.keys(r[this.rootKey]).length))return r}}class rt extends hp{constructor(t){super("_attr"),Oe(this,"xmlKeys"),this.root=t}prepForXml(t){const r={};return Object.entries(this.root).forEach(([a,n])=>{if(n!==void 0){const i=this.xmlKeys&&this.xmlKeys[a]||a;r[i]=n}}),{_attr:r}}}class Fp extends hp{constructor(t){super("_attr"),this.root=t}prepForXml(t){return{_attr:Object.values(this.root).filter(({value:a})=>a!==void 0).reduce((a,{key:n,value:i})=>kd(kt({},a),{[n]:i}),{})}}}class Ns extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{val:"w:val",color:"w:color",fill:"w:fill",space:"w:space",sz:"w:sz",type:"w:type",rsidR:"w:rsidR",rsidRPr:"w:rsidRPr",rsidSect:"w:rsidSect",w:"w:w",h:"w:h",top:"w:top",right:"w:right",bottom:"w:bottom",left:"w:left",header:"w:header",footer:"w:footer",gutter:"w:gutter",linePitch:"w:linePitch",pos:"w:pos"})}}var vn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function l8(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Jy={},uf={exports:{}},n3;function R1(){if(n3)return uf.exports;n3=1;var s=typeof Reflect=="object"?Reflect:null,t=s&&typeof s.apply=="function"?s.apply:function(T,E,z){return Function.prototype.apply.call(T,E,z)},r;s&&typeof s.ownKeys=="function"?r=s.ownKeys:Object.getOwnPropertySymbols?r=function(T){return Object.getOwnPropertyNames(T).concat(Object.getOwnPropertySymbols(T))}:r=function(T){return Object.getOwnPropertyNames(T)};function a(_){console&&console.warn&&console.warn(_)}var n=Number.isNaN||function(T){return T!==T};function i(){i.init.call(this)}uf.exports=i,uf.exports.once=N,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function c(_){if(typeof _!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof _)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(_){if(typeof _!="number"||_<0||n(_))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+_+".");o=_}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(T){if(typeof T!="number"||T<0||n(T))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+T+".");return this._maxListeners=T,this};function u(_){return _._maxListeners===void 0?i.defaultMaxListeners:_._maxListeners}i.prototype.getMaxListeners=function(){return u(this)},i.prototype.emit=function(T){for(var E=[],z=1;z<arguments.length;z++)E.push(arguments[z]);var O=T==="error",C=this._events;if(C!==void 0)O=O&&C.error===void 0;else if(!O)return!1;if(O){var A;if(E.length>0&&(A=E[0]),A instanceof Error)throw A;var X=new Error("Unhandled error."+(A?" ("+A.message+")":""));throw X.context=A,X}var I=C[T];if(I===void 0)return!1;if(typeof I=="function")t(I,this,E);else for(var V=I.length,R=g(I,V),z=0;z<V;++z)t(R[z],this,E);return!0};function h(_,T,E,z){var O,C,A;if(c(E),C=_._events,C===void 0?(C=_._events=Object.create(null),_._eventsCount=0):(C.newListener!==void 0&&(_.emit("newListener",T,E.listener?E.listener:E),C=_._events),A=C[T]),A===void 0)A=C[T]=E,++_._eventsCount;else if(typeof A=="function"?A=C[T]=z?[E,A]:[A,E]:z?A.unshift(E):A.push(E),O=u(_),O>0&&A.length>O&&!A.warned){A.warned=!0;var X=new Error("Possible EventEmitter memory leak detected. "+A.length+" "+String(T)+" listeners added. Use emitter.setMaxListeners() to increase limit");X.name="MaxListenersExceededWarning",X.emitter=_,X.type=T,X.count=A.length,a(X)}return _}i.prototype.addListener=function(T,E){return h(this,T,E,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(T,E){return h(this,T,E,!0)};function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(_,T,E){var z={fired:!1,wrapFn:void 0,target:_,type:T,listener:E},O=m.bind(z);return O.listener=E,z.wrapFn=O,O}i.prototype.once=function(T,E){return c(E),this.on(T,f(this,T,E)),this},i.prototype.prependOnceListener=function(T,E){return c(E),this.prependListener(T,f(this,T,E)),this},i.prototype.removeListener=function(T,E){var z,O,C,A,X;if(c(E),O=this._events,O===void 0)return this;if(z=O[T],z===void 0)return this;if(z===E||z.listener===E)--this._eventsCount===0?this._events=Object.create(null):(delete O[T],O.removeListener&&this.emit("removeListener",T,z.listener||E));else if(typeof z!="function"){for(C=-1,A=z.length-1;A>=0;A--)if(z[A]===E||z[A].listener===E){X=z[A].listener,C=A;break}if(C<0)return this;C===0?z.shift():y(z,C),z.length===1&&(O[T]=z[0]),O.removeListener!==void 0&&this.emit("removeListener",T,X||E)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(T){var E,z,O;if(z=this._events,z===void 0)return this;if(z.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):z[T]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete z[T]),this;if(arguments.length===0){var C=Object.keys(z),A;for(O=0;O<C.length;++O)A=C[O],A!=="removeListener"&&this.removeAllListeners(A);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(E=z[T],typeof E=="function")this.removeListener(T,E);else if(E!==void 0)for(O=E.length-1;O>=0;O--)this.removeListener(T,E[O]);return this};function p(_,T,E){var z=_._events;if(z===void 0)return[];var O=z[T];return O===void 0?[]:typeof O=="function"?E?[O.listener||O]:[O]:E?w(O):g(O,O.length)}i.prototype.listeners=function(T){return p(this,T,!0)},i.prototype.rawListeners=function(T){return p(this,T,!1)},i.listenerCount=function(_,T){return typeof _.listenerCount=="function"?_.listenerCount(T):v.call(_,T)},i.prototype.listenerCount=v;function v(_){var T=this._events;if(T!==void 0){var E=T[_];if(typeof E=="function")return 1;if(E!==void 0)return E.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function g(_,T){for(var E=new Array(T),z=0;z<T;++z)E[z]=_[z];return E}function y(_,T){for(;T+1<_.length;T++)_[T]=_[T+1];_.pop()}function w(_){for(var T=new Array(_.length),E=0;E<T.length;++E)T[E]=_[E].listener||_[E];return T}function N(_,T){return new Promise(function(E,z){function O(A){_.removeListener(T,C),z(A)}function C(){typeof _.removeListener=="function"&&_.removeListener("error",O),E([].slice.call(arguments))}S(_,T,C,{once:!0}),T!=="error"&&k(_,O,{once:!0})})}function k(_,T,E){typeof _.on=="function"&&S(_,"error",T,E)}function S(_,T,E,z){if(typeof _.on=="function")z.once?_.once(T,E):_.on(T,E);else if(typeof _.addEventListener=="function")_.addEventListener(T,function O(C){z.once&&_.removeEventListener(T,O),E(C)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof _)}return uf.exports}var hf={exports:{}},i3;function Pl(){return i3||(i3=1,typeof Object.create=="function"?hf.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:hf.exports=function(t,r){if(r){t.super_=r;var a=function(){};a.prototype=r.prototype,t.prototype=new a,t.prototype.constructor=t}}),hf.exports}function LJ(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var o8={exports:{}},_s=o8.exports={},fn,pn;function Yw(){throw new Error("setTimeout has not been defined")}function Gw(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?fn=setTimeout:fn=Yw}catch{fn=Yw}try{typeof clearTimeout=="function"?pn=clearTimeout:pn=Gw}catch{pn=Gw}})();function c8(s){if(fn===setTimeout)return setTimeout(s,0);if((fn===Yw||!fn)&&setTimeout)return fn=setTimeout,setTimeout(s,0);try{return fn(s,0)}catch{try{return fn.call(null,s,0)}catch{return fn.call(this,s,0)}}}function PJ(s){if(pn===clearTimeout)return clearTimeout(s);if((pn===Gw||!pn)&&clearTimeout)return pn=clearTimeout,clearTimeout(s);try{return pn(s)}catch{try{return pn.call(null,s)}catch{return pn.call(this,s)}}}var pi=[],dd=!1,Mo,If=-1;function BJ(){!dd||!Mo||(dd=!1,Mo.length?pi=Mo.concat(pi):If=-1,pi.length&&d8())}function d8(){if(!dd){var s=c8(BJ);dd=!0;for(var t=pi.length;t;){for(Mo=pi,pi=[];++If<t;)Mo&&Mo[If].run();If=-1,t=pi.length}Mo=null,dd=!1,PJ(s)}}_s.nextTick=function(s){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];pi.push(new u8(s,t)),pi.length===1&&!dd&&c8(d8)};function u8(s,t){this.fun=s,this.array=t}u8.prototype.run=function(){this.fun.apply(null,this.array)};_s.title="browser";_s.browser=!0;_s.env={};_s.argv=[];_s.version="";_s.versions={};function Ei(){}_s.on=Ei;_s.addListener=Ei;_s.once=Ei;_s.off=Ei;_s.removeListener=Ei;_s.removeAllListeners=Ei;_s.emit=Ei;_s.prependListener=Ei;_s.prependOnceListener=Ei;_s.listeners=function(s){return[]};_s.binding=function(s){throw new Error("process.binding is not supported")};_s.cwd=function(){return"/"};_s.chdir=function(s){throw new Error("process.chdir is not supported")};_s.umask=function(){return 0};var FJ=o8.exports;const mt=LJ(FJ);var ev,l3;function h8(){return l3||(l3=1,ev=R1().EventEmitter),ev}var tv={},_h={},o3;function zJ(){if(o3)return _h;o3=1,_h.byteLength=c,_h.toByteArray=h,_h.fromByteArray=p;for(var s=[],t=[],r=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,i=a.length;n<i;++n)s[n]=a[n],t[a.charCodeAt(n)]=n;t[45]=62,t[95]=63;function o(v){var g=v.length;if(g%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=v.indexOf("=");y===-1&&(y=g);var w=y===g?0:4-y%4;return[y,w]}function c(v){var g=o(v),y=g[0],w=g[1];return(y+w)*3/4-w}function u(v,g,y){return(g+y)*3/4-y}function h(v){var g,y=o(v),w=y[0],N=y[1],k=new r(u(v,w,N)),S=0,_=N>0?w-4:w,T;for(T=0;T<_;T+=4)g=t[v.charCodeAt(T)]<<18|t[v.charCodeAt(T+1)]<<12|t[v.charCodeAt(T+2)]<<6|t[v.charCodeAt(T+3)],k[S++]=g>>16&255,k[S++]=g>>8&255,k[S++]=g&255;return N===2&&(g=t[v.charCodeAt(T)]<<2|t[v.charCodeAt(T+1)]>>4,k[S++]=g&255),N===1&&(g=t[v.charCodeAt(T)]<<10|t[v.charCodeAt(T+1)]<<4|t[v.charCodeAt(T+2)]>>2,k[S++]=g>>8&255,k[S++]=g&255),k}function m(v){return s[v>>18&63]+s[v>>12&63]+s[v>>6&63]+s[v&63]}function f(v,g,y){for(var w,N=[],k=g;k<y;k+=3)w=(v[k]<<16&16711680)+(v[k+1]<<8&65280)+(v[k+2]&255),N.push(m(w));return N.join("")}function p(v){for(var g,y=v.length,w=y%3,N=[],k=16383,S=0,_=y-w;S<_;S+=k)N.push(f(v,S,S+k>_?_:S+k));return w===1?(g=v[y-1],N.push(s[g>>2]+s[g<<4&63]+"==")):w===2&&(g=(v[y-2]<<8)+v[y-1],N.push(s[g>>10]+s[g>>4&63]+s[g<<2&63]+"=")),N.join("")}return _h}var mf={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var c3;function IJ(){return c3||(c3=1,mf.read=function(s,t,r,a,n){var i,o,c=n*8-a-1,u=(1<<c)-1,h=u>>1,m=-7,f=r?n-1:0,p=r?-1:1,v=s[t+f];for(f+=p,i=v&(1<<-m)-1,v>>=-m,m+=c;m>0;i=i*256+s[t+f],f+=p,m-=8);for(o=i&(1<<-m)-1,i>>=-m,m+=a;m>0;o=o*256+s[t+f],f+=p,m-=8);if(i===0)i=1-h;else{if(i===u)return o?NaN:(v?-1:1)*(1/0);o=o+Math.pow(2,a),i=i-h}return(v?-1:1)*o*Math.pow(2,i-a)},mf.write=function(s,t,r,a,n,i){var o,c,u,h=i*8-n-1,m=(1<<h)-1,f=m>>1,p=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=a?0:i-1,g=a?1:-1,y=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(c=isNaN(t)?1:0,o=m):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+f>=1?t+=p/u:t+=p*Math.pow(2,1-f),t*u>=2&&(o++,u/=2),o+f>=m?(c=0,o=m):o+f>=1?(c=(t*u-1)*Math.pow(2,n),o=o+f):(c=t*Math.pow(2,f-1)*Math.pow(2,n),o=0));n>=8;s[r+v]=c&255,v+=g,c/=256,n-=8);for(o=o<<n|c,h+=n;h>0;s[r+v]=o&255,v+=g,o/=256,h-=8);s[r+v-g]|=y*128}),mf}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var d3;function zp(){return d3||(d3=1,(function(s){var t=zJ(),r=IJ(),a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;s.Buffer=c,s.SlowBuffer=k,s.INSPECT_MAX_BYTES=50;var n=2147483647;s.kMaxLength=n,c.TYPED_ARRAY_SUPPORT=i(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{var Y=new Uint8Array(1),L={foo:function(){return 42}};return Object.setPrototypeOf(L,Uint8Array.prototype),Object.setPrototypeOf(Y,L),Y.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function o(Y){if(Y>n)throw new RangeError('The value "'+Y+'" is invalid for option "size"');var L=new Uint8Array(Y);return Object.setPrototypeOf(L,c.prototype),L}function c(Y,L,M){if(typeof Y=="number"){if(typeof L=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(Y)}return u(Y,L,M)}c.poolSize=8192;function u(Y,L,M){if(typeof Y=="string")return p(Y,L);if(ArrayBuffer.isView(Y))return g(Y);if(Y==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Y);if(me(Y,ArrayBuffer)||Y&&me(Y.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(me(Y,SharedArrayBuffer)||Y&&me(Y.buffer,SharedArrayBuffer)))return y(Y,L,M);if(typeof Y=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var B=Y.valueOf&&Y.valueOf();if(B!=null&&B!==Y)return c.from(B,L,M);var ae=w(Y);if(ae)return ae;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Y[Symbol.toPrimitive]=="function")return c.from(Y[Symbol.toPrimitive]("string"),L,M);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Y)}c.from=function(Y,L,M){return u(Y,L,M)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function h(Y){if(typeof Y!="number")throw new TypeError('"size" argument must be of type number');if(Y<0)throw new RangeError('The value "'+Y+'" is invalid for option "size"')}function m(Y,L,M){return h(Y),Y<=0?o(Y):L!==void 0?typeof M=="string"?o(Y).fill(L,M):o(Y).fill(L):o(Y)}c.alloc=function(Y,L,M){return m(Y,L,M)};function f(Y){return h(Y),o(Y<0?0:N(Y)|0)}c.allocUnsafe=function(Y){return f(Y)},c.allocUnsafeSlow=function(Y){return f(Y)};function p(Y,L){if((typeof L!="string"||L==="")&&(L="utf8"),!c.isEncoding(L))throw new TypeError("Unknown encoding: "+L);var M=S(Y,L)|0,B=o(M),ae=B.write(Y,L);return ae!==M&&(B=B.slice(0,ae)),B}function v(Y){for(var L=Y.length<0?0:N(Y.length)|0,M=o(L),B=0;B<L;B+=1)M[B]=Y[B]&255;return M}function g(Y){if(me(Y,Uint8Array)){var L=new Uint8Array(Y);return y(L.buffer,L.byteOffset,L.byteLength)}return v(Y)}function y(Y,L,M){if(L<0||Y.byteLength<L)throw new RangeError('"offset" is outside of buffer bounds');if(Y.byteLength<L+(M||0))throw new RangeError('"length" is outside of buffer bounds');var B;return L===void 0&&M===void 0?B=new Uint8Array(Y):M===void 0?B=new Uint8Array(Y,L):B=new Uint8Array(Y,L,M),Object.setPrototypeOf(B,c.prototype),B}function w(Y){if(c.isBuffer(Y)){var L=N(Y.length)|0,M=o(L);return M.length===0||Y.copy(M,0,0,L),M}if(Y.length!==void 0)return typeof Y.length!="number"||G(Y.length)?o(0):v(Y);if(Y.type==="Buffer"&&Array.isArray(Y.data))return v(Y.data)}function N(Y){if(Y>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return Y|0}function k(Y){return+Y!=Y&&(Y=0),c.alloc(+Y)}c.isBuffer=function(L){return L!=null&&L._isBuffer===!0&&L!==c.prototype},c.compare=function(L,M){if(me(L,Uint8Array)&&(L=c.from(L,L.offset,L.byteLength)),me(M,Uint8Array)&&(M=c.from(M,M.offset,M.byteLength)),!c.isBuffer(L)||!c.isBuffer(M))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(L===M)return 0;for(var B=L.length,ae=M.length,he=0,xe=Math.min(B,ae);he<xe;++he)if(L[he]!==M[he]){B=L[he],ae=M[he];break}return B<ae?-1:ae<B?1:0},c.isEncoding=function(L){switch(String(L).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(L,M){if(!Array.isArray(L))throw new TypeError('"list" argument must be an Array of Buffers');if(L.length===0)return c.alloc(0);var B;if(M===void 0)for(M=0,B=0;B<L.length;++B)M+=L[B].length;var ae=c.allocUnsafe(M),he=0;for(B=0;B<L.length;++B){var xe=L[B];if(me(xe,Uint8Array))he+xe.length>ae.length?c.from(xe).copy(ae,he):Uint8Array.prototype.set.call(ae,xe,he);else if(c.isBuffer(xe))xe.copy(ae,he);else throw new TypeError('"list" argument must be an Array of Buffers');he+=xe.length}return ae};function S(Y,L){if(c.isBuffer(Y))return Y.length;if(ArrayBuffer.isView(Y)||me(Y,ArrayBuffer))return Y.byteLength;if(typeof Y!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Y);var M=Y.length,B=arguments.length>2&&arguments[2]===!0;if(!B&&M===0)return 0;for(var ae=!1;;)switch(L){case"ascii":case"latin1":case"binary":return M;case"utf8":case"utf-8":return F(Y).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M*2;case"hex":return M>>>1;case"base64":return Q(Y).length;default:if(ae)return B?-1:F(Y).length;L=(""+L).toLowerCase(),ae=!0}}c.byteLength=S;function _(Y,L,M){var B=!1;if((L===void 0||L<0)&&(L=0),L>this.length||((M===void 0||M>this.length)&&(M=this.length),M<=0)||(M>>>=0,L>>>=0,M<=L))return"";for(Y||(Y="utf8");;)switch(Y){case"hex":return te(this,L,M);case"utf8":case"utf-8":return R(this,L,M);case"ascii":return se(this,L,M);case"latin1":case"binary":return W(this,L,M);case"base64":return V(this,L,M);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,L,M);default:if(B)throw new TypeError("Unknown encoding: "+Y);Y=(Y+"").toLowerCase(),B=!0}}c.prototype._isBuffer=!0;function T(Y,L,M){var B=Y[L];Y[L]=Y[M],Y[M]=B}c.prototype.swap16=function(){var L=this.length;if(L%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var M=0;M<L;M+=2)T(this,M,M+1);return this},c.prototype.swap32=function(){var L=this.length;if(L%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var M=0;M<L;M+=4)T(this,M,M+3),T(this,M+1,M+2);return this},c.prototype.swap64=function(){var L=this.length;if(L%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var M=0;M<L;M+=8)T(this,M,M+7),T(this,M+1,M+6),T(this,M+2,M+5),T(this,M+3,M+4);return this},c.prototype.toString=function(){var L=this.length;return L===0?"":arguments.length===0?R(this,0,L):_.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(L){if(!c.isBuffer(L))throw new TypeError("Argument must be a Buffer");return this===L?!0:c.compare(this,L)===0},c.prototype.inspect=function(){var L="",M=s.INSPECT_MAX_BYTES;return L=this.toString("hex",0,M).replace(/(.{2})/g,"$1 ").trim(),this.length>M&&(L+=" ... "),"<Buffer "+L+">"},a&&(c.prototype[a]=c.prototype.inspect),c.prototype.compare=function(L,M,B,ae,he){if(me(L,Uint8Array)&&(L=c.from(L,L.offset,L.byteLength)),!c.isBuffer(L))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof L);if(M===void 0&&(M=0),B===void 0&&(B=L?L.length:0),ae===void 0&&(ae=0),he===void 0&&(he=this.length),M<0||B>L.length||ae<0||he>this.length)throw new RangeError("out of range index");if(ae>=he&&M>=B)return 0;if(ae>=he)return-1;if(M>=B)return 1;if(M>>>=0,B>>>=0,ae>>>=0,he>>>=0,this===L)return 0;for(var xe=he-ae,_e=B-M,Te=Math.min(xe,_e),Ee=this.slice(ae,he),ze=L.slice(M,B),Ie=0;Ie<Te;++Ie)if(Ee[Ie]!==ze[Ie]){xe=Ee[Ie],_e=ze[Ie];break}return xe<_e?-1:_e<xe?1:0};function E(Y,L,M,B,ae){if(Y.length===0)return-1;if(typeof M=="string"?(B=M,M=0):M>2147483647?M=2147483647:M<-2147483648&&(M=-2147483648),M=+M,G(M)&&(M=ae?0:Y.length-1),M<0&&(M=Y.length+M),M>=Y.length){if(ae)return-1;M=Y.length-1}else if(M<0)if(ae)M=0;else return-1;if(typeof L=="string"&&(L=c.from(L,B)),c.isBuffer(L))return L.length===0?-1:z(Y,L,M,B,ae);if(typeof L=="number")return L=L&255,typeof Uint8Array.prototype.indexOf=="function"?ae?Uint8Array.prototype.indexOf.call(Y,L,M):Uint8Array.prototype.lastIndexOf.call(Y,L,M):z(Y,[L],M,B,ae);throw new TypeError("val must be string, number or Buffer")}function z(Y,L,M,B,ae){var he=1,xe=Y.length,_e=L.length;if(B!==void 0&&(B=String(B).toLowerCase(),B==="ucs2"||B==="ucs-2"||B==="utf16le"||B==="utf-16le")){if(Y.length<2||L.length<2)return-1;he=2,xe/=2,_e/=2,M/=2}function Te(xs,pr){return he===1?xs[pr]:xs.readUInt16BE(pr*he)}var Ee;if(ae){var ze=-1;for(Ee=M;Ee<xe;Ee++)if(Te(Y,Ee)===Te(L,ze===-1?0:Ee-ze)){if(ze===-1&&(ze=Ee),Ee-ze+1===_e)return ze*he}else ze!==-1&&(Ee-=Ee-ze),ze=-1}else for(M+_e>xe&&(M=xe-_e),Ee=M;Ee>=0;Ee--){for(var Ie=!0,Ye=0;Ye<_e;Ye++)if(Te(Y,Ee+Ye)!==Te(L,Ye)){Ie=!1;break}if(Ie)return Ee}return-1}c.prototype.includes=function(L,M,B){return this.indexOf(L,M,B)!==-1},c.prototype.indexOf=function(L,M,B){return E(this,L,M,B,!0)},c.prototype.lastIndexOf=function(L,M,B){return E(this,L,M,B,!1)};function O(Y,L,M,B){M=Number(M)||0;var ae=Y.length-M;B?(B=Number(B),B>ae&&(B=ae)):B=ae;var he=L.length;B>he/2&&(B=he/2);for(var xe=0;xe<B;++xe){var _e=parseInt(L.substr(xe*2,2),16);if(G(_e))return xe;Y[M+xe]=_e}return xe}function C(Y,L,M,B){return le(F(L,Y.length-M),Y,M,B)}function A(Y,L,M,B){return le(Z(L),Y,M,B)}function X(Y,L,M,B){return le(Q(L),Y,M,B)}function I(Y,L,M,B){return le(q(L,Y.length-M),Y,M,B)}c.prototype.write=function(L,M,B,ae){if(M===void 0)ae="utf8",B=this.length,M=0;else if(B===void 0&&typeof M=="string")ae=M,B=this.length,M=0;else if(isFinite(M))M=M>>>0,isFinite(B)?(B=B>>>0,ae===void 0&&(ae="utf8")):(ae=B,B=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var he=this.length-M;if((B===void 0||B>he)&&(B=he),L.length>0&&(B<0||M<0)||M>this.length)throw new RangeError("Attempt to write outside buffer bounds");ae||(ae="utf8");for(var xe=!1;;)switch(ae){case"hex":return O(this,L,M,B);case"utf8":case"utf-8":return C(this,L,M,B);case"ascii":case"latin1":case"binary":return A(this,L,M,B);case"base64":return X(this,L,M,B);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,L,M,B);default:if(xe)throw new TypeError("Unknown encoding: "+ae);ae=(""+ae).toLowerCase(),xe=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function V(Y,L,M){return L===0&&M===Y.length?t.fromByteArray(Y):t.fromByteArray(Y.slice(L,M))}function R(Y,L,M){M=Math.min(Y.length,M);for(var B=[],ae=L;ae<M;){var he=Y[ae],xe=null,_e=he>239?4:he>223?3:he>191?2:1;if(ae+_e<=M){var Te,Ee,ze,Ie;switch(_e){case 1:he<128&&(xe=he);break;case 2:Te=Y[ae+1],(Te&192)===128&&(Ie=(he&31)<<6|Te&63,Ie>127&&(xe=Ie));break;case 3:Te=Y[ae+1],Ee=Y[ae+2],(Te&192)===128&&(Ee&192)===128&&(Ie=(he&15)<<12|(Te&63)<<6|Ee&63,Ie>2047&&(Ie<55296||Ie>57343)&&(xe=Ie));break;case 4:Te=Y[ae+1],Ee=Y[ae+2],ze=Y[ae+3],(Te&192)===128&&(Ee&192)===128&&(ze&192)===128&&(Ie=(he&15)<<18|(Te&63)<<12|(Ee&63)<<6|ze&63,Ie>65535&&Ie<1114112&&(xe=Ie))}}xe===null?(xe=65533,_e=1):xe>65535&&(xe-=65536,B.push(xe>>>10&1023|55296),xe=56320|xe&1023),B.push(xe),ae+=_e}return ee(B)}var H=4096;function ee(Y){var L=Y.length;if(L<=H)return String.fromCharCode.apply(String,Y);for(var M="",B=0;B<L;)M+=String.fromCharCode.apply(String,Y.slice(B,B+=H));return M}function se(Y,L,M){var B="";M=Math.min(Y.length,M);for(var ae=L;ae<M;++ae)B+=String.fromCharCode(Y[ae]&127);return B}function W(Y,L,M){var B="";M=Math.min(Y.length,M);for(var ae=L;ae<M;++ae)B+=String.fromCharCode(Y[ae]);return B}function te(Y,L,M){var B=Y.length;(!L||L<0)&&(L=0),(!M||M<0||M>B)&&(M=B);for(var ae="",he=L;he<M;++he)ae+=ue[Y[he]];return ae}function J(Y,L,M){for(var B=Y.slice(L,M),ae="",he=0;he<B.length-1;he+=2)ae+=String.fromCharCode(B[he]+B[he+1]*256);return ae}c.prototype.slice=function(L,M){var B=this.length;L=~~L,M=M===void 0?B:~~M,L<0?(L+=B,L<0&&(L=0)):L>B&&(L=B),M<0?(M+=B,M<0&&(M=0)):M>B&&(M=B),M<L&&(M=L);var ae=this.subarray(L,M);return Object.setPrototypeOf(ae,c.prototype),ae};function K(Y,L,M){if(Y%1!==0||Y<0)throw new RangeError("offset is not uint");if(Y+L>M)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(L,M,B){L=L>>>0,M=M>>>0,B||K(L,M,this.length);for(var ae=this[L],he=1,xe=0;++xe<M&&(he*=256);)ae+=this[L+xe]*he;return ae},c.prototype.readUintBE=c.prototype.readUIntBE=function(L,M,B){L=L>>>0,M=M>>>0,B||K(L,M,this.length);for(var ae=this[L+--M],he=1;M>0&&(he*=256);)ae+=this[L+--M]*he;return ae},c.prototype.readUint8=c.prototype.readUInt8=function(L,M){return L=L>>>0,M||K(L,1,this.length),this[L]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(L,M){return L=L>>>0,M||K(L,2,this.length),this[L]|this[L+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(L,M){return L=L>>>0,M||K(L,2,this.length),this[L]<<8|this[L+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(L,M){return L=L>>>0,M||K(L,4,this.length),(this[L]|this[L+1]<<8|this[L+2]<<16)+this[L+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(L,M){return L=L>>>0,M||K(L,4,this.length),this[L]*16777216+(this[L+1]<<16|this[L+2]<<8|this[L+3])},c.prototype.readIntLE=function(L,M,B){L=L>>>0,M=M>>>0,B||K(L,M,this.length);for(var ae=this[L],he=1,xe=0;++xe<M&&(he*=256);)ae+=this[L+xe]*he;return he*=128,ae>=he&&(ae-=Math.pow(2,8*M)),ae},c.prototype.readIntBE=function(L,M,B){L=L>>>0,M=M>>>0,B||K(L,M,this.length);for(var ae=M,he=1,xe=this[L+--ae];ae>0&&(he*=256);)xe+=this[L+--ae]*he;return he*=128,xe>=he&&(xe-=Math.pow(2,8*M)),xe},c.prototype.readInt8=function(L,M){return L=L>>>0,M||K(L,1,this.length),this[L]&128?(255-this[L]+1)*-1:this[L]},c.prototype.readInt16LE=function(L,M){L=L>>>0,M||K(L,2,this.length);var B=this[L]|this[L+1]<<8;return B&32768?B|4294901760:B},c.prototype.readInt16BE=function(L,M){L=L>>>0,M||K(L,2,this.length);var B=this[L+1]|this[L]<<8;return B&32768?B|4294901760:B},c.prototype.readInt32LE=function(L,M){return L=L>>>0,M||K(L,4,this.length),this[L]|this[L+1]<<8|this[L+2]<<16|this[L+3]<<24},c.prototype.readInt32BE=function(L,M){return L=L>>>0,M||K(L,4,this.length),this[L]<<24|this[L+1]<<16|this[L+2]<<8|this[L+3]},c.prototype.readFloatLE=function(L,M){return L=L>>>0,M||K(L,4,this.length),r.read(this,L,!0,23,4)},c.prototype.readFloatBE=function(L,M){return L=L>>>0,M||K(L,4,this.length),r.read(this,L,!1,23,4)},c.prototype.readDoubleLE=function(L,M){return L=L>>>0,M||K(L,8,this.length),r.read(this,L,!0,52,8)},c.prototype.readDoubleBE=function(L,M){return L=L>>>0,M||K(L,8,this.length),r.read(this,L,!1,52,8)};function $(Y,L,M,B,ae,he){if(!c.isBuffer(Y))throw new TypeError('"buffer" argument must be a Buffer instance');if(L>ae||L<he)throw new RangeError('"value" argument is out of bounds');if(M+B>Y.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(L,M,B,ae){if(L=+L,M=M>>>0,B=B>>>0,!ae){var he=Math.pow(2,8*B)-1;$(this,L,M,B,he,0)}var xe=1,_e=0;for(this[M]=L&255;++_e<B&&(xe*=256);)this[M+_e]=L/xe&255;return M+B},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(L,M,B,ae){if(L=+L,M=M>>>0,B=B>>>0,!ae){var he=Math.pow(2,8*B)-1;$(this,L,M,B,he,0)}var xe=B-1,_e=1;for(this[M+xe]=L&255;--xe>=0&&(_e*=256);)this[M+xe]=L/_e&255;return M+B},c.prototype.writeUint8=c.prototype.writeUInt8=function(L,M,B){return L=+L,M=M>>>0,B||$(this,L,M,1,255,0),this[M]=L&255,M+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(L,M,B){return L=+L,M=M>>>0,B||$(this,L,M,2,65535,0),this[M]=L&255,this[M+1]=L>>>8,M+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(L,M,B){return L=+L,M=M>>>0,B||$(this,L,M,2,65535,0),this[M]=L>>>8,this[M+1]=L&255,M+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(L,M,B){return L=+L,M=M>>>0,B||$(this,L,M,4,4294967295,0),this[M+3]=L>>>24,this[M+2]=L>>>16,this[M+1]=L>>>8,this[M]=L&255,M+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(L,M,B){return L=+L,M=M>>>0,B||$(this,L,M,4,4294967295,0),this[M]=L>>>24,this[M+1]=L>>>16,this[M+2]=L>>>8,this[M+3]=L&255,M+4},c.prototype.writeIntLE=function(L,M,B,ae){if(L=+L,M=M>>>0,!ae){var he=Math.pow(2,8*B-1);$(this,L,M,B,he-1,-he)}var xe=0,_e=1,Te=0;for(this[M]=L&255;++xe<B&&(_e*=256);)L<0&&Te===0&&this[M+xe-1]!==0&&(Te=1),this[M+xe]=(L/_e>>0)-Te&255;return M+B},c.prototype.writeIntBE=function(L,M,B,ae){if(L=+L,M=M>>>0,!ae){var he=Math.pow(2,8*B-1);$(this,L,M,B,he-1,-he)}var xe=B-1,_e=1,Te=0;for(this[M+xe]=L&255;--xe>=0&&(_e*=256);)L<0&&Te===0&&this[M+xe+1]!==0&&(Te=1),this[M+xe]=(L/_e>>0)-Te&255;return M+B},c.prototype.writeInt8=function(L,M,B){return L=+L,M=M>>>0,B||$(this,L,M,1,127,-128),L<0&&(L=255+L+1),this[M]=L&255,M+1},c.prototype.writeInt16LE=function(L,M,B){return L=+L,M=M>>>0,B||$(this,L,M,2,32767,-32768),this[M]=L&255,this[M+1]=L>>>8,M+2},c.prototype.writeInt16BE=function(L,M,B){return L=+L,M=M>>>0,B||$(this,L,M,2,32767,-32768),this[M]=L>>>8,this[M+1]=L&255,M+2},c.prototype.writeInt32LE=function(L,M,B){return L=+L,M=M>>>0,B||$(this,L,M,4,2147483647,-2147483648),this[M]=L&255,this[M+1]=L>>>8,this[M+2]=L>>>16,this[M+3]=L>>>24,M+4},c.prototype.writeInt32BE=function(L,M,B){return L=+L,M=M>>>0,B||$(this,L,M,4,2147483647,-2147483648),L<0&&(L=4294967295+L+1),this[M]=L>>>24,this[M+1]=L>>>16,this[M+2]=L>>>8,this[M+3]=L&255,M+4};function ie(Y,L,M,B,ae,he){if(M+B>Y.length)throw new RangeError("Index out of range");if(M<0)throw new RangeError("Index out of range")}function ne(Y,L,M,B,ae){return L=+L,M=M>>>0,ae||ie(Y,L,M,4),r.write(Y,L,M,B,23,4),M+4}c.prototype.writeFloatLE=function(L,M,B){return ne(this,L,M,!0,B)},c.prototype.writeFloatBE=function(L,M,B){return ne(this,L,M,!1,B)};function oe(Y,L,M,B,ae){return L=+L,M=M>>>0,ae||ie(Y,L,M,8),r.write(Y,L,M,B,52,8),M+8}c.prototype.writeDoubleLE=function(L,M,B){return oe(this,L,M,!0,B)},c.prototype.writeDoubleBE=function(L,M,B){return oe(this,L,M,!1,B)},c.prototype.copy=function(L,M,B,ae){if(!c.isBuffer(L))throw new TypeError("argument should be a Buffer");if(B||(B=0),!ae&&ae!==0&&(ae=this.length),M>=L.length&&(M=L.length),M||(M=0),ae>0&&ae<B&&(ae=B),ae===B||L.length===0||this.length===0)return 0;if(M<0)throw new RangeError("targetStart out of bounds");if(B<0||B>=this.length)throw new RangeError("Index out of range");if(ae<0)throw new RangeError("sourceEnd out of bounds");ae>this.length&&(ae=this.length),L.length-M<ae-B&&(ae=L.length-M+B);var he=ae-B;return this===L&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(M,B,ae):Uint8Array.prototype.set.call(L,this.subarray(B,ae),M),he},c.prototype.fill=function(L,M,B,ae){if(typeof L=="string"){if(typeof M=="string"?(ae=M,M=0,B=this.length):typeof B=="string"&&(ae=B,B=this.length),ae!==void 0&&typeof ae!="string")throw new TypeError("encoding must be a string");if(typeof ae=="string"&&!c.isEncoding(ae))throw new TypeError("Unknown encoding: "+ae);if(L.length===1){var he=L.charCodeAt(0);(ae==="utf8"&&he<128||ae==="latin1")&&(L=he)}}else typeof L=="number"?L=L&255:typeof L=="boolean"&&(L=Number(L));if(M<0||this.length<M||this.length<B)throw new RangeError("Out of range index");if(B<=M)return this;M=M>>>0,B=B===void 0?this.length:B>>>0,L||(L=0);var xe;if(typeof L=="number")for(xe=M;xe<B;++xe)this[xe]=L;else{var _e=c.isBuffer(L)?L:c.from(L,ae),Te=_e.length;if(Te===0)throw new TypeError('The value "'+L+'" is invalid for argument "value"');for(xe=0;xe<B-M;++xe)this[xe+M]=_e[xe%Te]}return this};var ce=/[^+/0-9A-Za-z-_]/g;function U(Y){if(Y=Y.split("=")[0],Y=Y.trim().replace(ce,""),Y.length<2)return"";for(;Y.length%4!==0;)Y=Y+"=";return Y}function F(Y,L){L=L||1/0;for(var M,B=Y.length,ae=null,he=[],xe=0;xe<B;++xe){if(M=Y.charCodeAt(xe),M>55295&&M<57344){if(!ae){if(M>56319){(L-=3)>-1&&he.push(239,191,189);continue}else if(xe+1===B){(L-=3)>-1&&he.push(239,191,189);continue}ae=M;continue}if(M<56320){(L-=3)>-1&&he.push(239,191,189),ae=M;continue}M=(ae-55296<<10|M-56320)+65536}else ae&&(L-=3)>-1&&he.push(239,191,189);if(ae=null,M<128){if((L-=1)<0)break;he.push(M)}else if(M<2048){if((L-=2)<0)break;he.push(M>>6|192,M&63|128)}else if(M<65536){if((L-=3)<0)break;he.push(M>>12|224,M>>6&63|128,M&63|128)}else if(M<1114112){if((L-=4)<0)break;he.push(M>>18|240,M>>12&63|128,M>>6&63|128,M&63|128)}else throw new Error("Invalid code point")}return he}function Z(Y){for(var L=[],M=0;M<Y.length;++M)L.push(Y.charCodeAt(M)&255);return L}function q(Y,L){for(var M,B,ae,he=[],xe=0;xe<Y.length&&!((L-=2)<0);++xe)M=Y.charCodeAt(xe),B=M>>8,ae=M%256,he.push(ae),he.push(B);return he}function Q(Y){return t.toByteArray(U(Y))}function le(Y,L,M,B){for(var ae=0;ae<B&&!(ae+M>=L.length||ae>=Y.length);++ae)L[ae+M]=Y[ae];return ae}function me(Y,L){return Y instanceof L||Y!=null&&Y.constructor!=null&&Y.constructor.name!=null&&Y.constructor.name===L.name}function G(Y){return Y!==Y}var ue=(function(){for(var Y="0123456789abcdef",L=new Array(256),M=0;M<16;++M)for(var B=M*16,ae=0;ae<16;++ae)L[B+ae]=Y[M]+Y[ae];return L})()})(tv)),tv}var sv={},rv={},av,u3;function m8(){return u3||(u3=1,av=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),a=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(a)!=="[object Symbol]")return!1;var n=42;t[r]=n;for(var i in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var c=Object.getOwnPropertyDescriptor(t,r);if(c.value!==n||c.enumerable!==!0)return!1}return!0}),av}var nv,h3;function M1(){if(h3)return nv;h3=1;var s=m8();return nv=function(){return s()&&!!Symbol.toStringTag},nv}var iv,m3;function x8(){return m3||(m3=1,iv=Object),iv}var lv,x3;function $J(){return x3||(x3=1,lv=Error),lv}var ov,f3;function UJ(){return f3||(f3=1,ov=EvalError),ov}var cv,p3;function VJ(){return p3||(p3=1,cv=RangeError),cv}var dv,g3;function HJ(){return g3||(g3=1,dv=ReferenceError),dv}var uv,b3;function f8(){return b3||(b3=1,uv=SyntaxError),uv}var hv,y3;function Um(){return y3||(y3=1,hv=TypeError),hv}var mv,v3;function qJ(){return v3||(v3=1,mv=URIError),mv}var xv,j3;function WJ(){return j3||(j3=1,xv=Math.abs),xv}var fv,w3;function YJ(){return w3||(w3=1,fv=Math.floor),fv}var pv,N3;function GJ(){return N3||(N3=1,pv=Math.max),pv}var gv,_3;function KJ(){return _3||(_3=1,gv=Math.min),gv}var bv,k3;function XJ(){return k3||(k3=1,bv=Math.pow),bv}var yv,S3;function ZJ(){return S3||(S3=1,yv=Math.round),yv}var vv,C3;function QJ(){return C3||(C3=1,vv=Number.isNaN||function(t){return t!==t}),vv}var jv,T3;function JJ(){if(T3)return jv;T3=1;var s=QJ();return jv=function(r){return s(r)||r===0?r:r<0?-1:1},jv}var wv,E3;function eee(){return E3||(E3=1,wv=Object.getOwnPropertyDescriptor),wv}var Nv,A3;function Vm(){if(A3)return Nv;A3=1;var s=eee();if(s)try{s([],"length")}catch{s=null}return Nv=s,Nv}var _v,D3;function Ip(){if(D3)return _v;D3=1;var s=Object.defineProperty||!1;if(s)try{s({},"a",{value:1})}catch{s=!1}return _v=s,_v}var kv,R3;function tee(){if(R3)return kv;R3=1;var s=typeof Symbol<"u"&&Symbol,t=m8();return kv=function(){return typeof s!="function"||typeof Symbol!="function"||typeof s("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},kv}var Sv,M3;function p8(){return M3||(M3=1,Sv=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Sv}var Cv,O3;function g8(){if(O3)return Cv;O3=1;var s=x8();return Cv=s.getPrototypeOf||null,Cv}var Tv,L3;function see(){if(L3)return Tv;L3=1;var s="Function.prototype.bind called on incompatible ",t=Object.prototype.toString,r=Math.max,a="[object Function]",n=function(u,h){for(var m=[],f=0;f<u.length;f+=1)m[f]=u[f];for(var p=0;p<h.length;p+=1)m[p+u.length]=h[p];return m},i=function(u,h){for(var m=[],f=h,p=0;f<u.length;f+=1,p+=1)m[p]=u[f];return m},o=function(c,u){for(var h="",m=0;m<c.length;m+=1)h+=c[m],m+1<c.length&&(h+=u);return h};return Tv=function(u){var h=this;if(typeof h!="function"||t.apply(h)!==a)throw new TypeError(s+h);for(var m=i(arguments,1),f,p=function(){if(this instanceof f){var N=h.apply(this,n(m,arguments));return Object(N)===N?N:this}return h.apply(u,n(m,arguments))},v=r(0,h.length-m.length),g=[],y=0;y<v;y++)g[y]="$"+y;if(f=Function("binder","return function ("+o(g,",")+"){ return binder.apply(this,arguments); }")(p),h.prototype){var w=function(){};w.prototype=h.prototype,f.prototype=new w,w.prototype=null}return f},Tv}var Ev,P3;function Hm(){if(P3)return Ev;P3=1;var s=see();return Ev=Function.prototype.bind||s,Ev}var Av,B3;function O1(){return B3||(B3=1,Av=Function.prototype.call),Av}var Dv,F3;function b8(){return F3||(F3=1,Dv=Function.prototype.apply),Dv}var Rv,z3;function ree(){return z3||(z3=1,Rv=typeof Reflect<"u"&&Reflect&&Reflect.apply),Rv}var Mv,I3;function aee(){if(I3)return Mv;I3=1;var s=Hm(),t=b8(),r=O1(),a=ree();return Mv=a||s.call(r,t),Mv}var Ov,$3;function nee(){if($3)return Ov;$3=1;var s=Hm(),t=Um(),r=O1(),a=aee();return Ov=function(i){if(i.length<1||typeof i[0]!="function")throw new t("a function is required");return a(s,r,i)},Ov}var Lv,U3;function iee(){if(U3)return Lv;U3=1;var s=nee(),t=Vm(),r;try{r=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var a=!!r&&t&&t(Object.prototype,"__proto__"),n=Object,i=n.getPrototypeOf;return Lv=a&&typeof a.get=="function"?s([a.get]):typeof i=="function"?(function(c){return i(c==null?c:n(c))}):!1,Lv}var Pv,V3;function lee(){if(V3)return Pv;V3=1;var s=p8(),t=g8(),r=iee();return Pv=s?function(n){return s(n)}:t?function(n){if(!n||typeof n!="object"&&typeof n!="function")throw new TypeError("getProto: not an object");return t(n)}:r?function(n){return r(n)}:null,Pv}var Bv,H3;function oee(){if(H3)return Bv;H3=1;var s=Function.prototype.call,t=Object.prototype.hasOwnProperty,r=Hm();return Bv=r.call(s,t),Bv}var Fv,q3;function L1(){if(q3)return Fv;q3=1;var s,t=x8(),r=$J(),a=UJ(),n=VJ(),i=HJ(),o=f8(),c=Um(),u=qJ(),h=WJ(),m=YJ(),f=GJ(),p=KJ(),v=XJ(),g=ZJ(),y=JJ(),w=Function,N=function(Z){try{return w('"use strict"; return ('+Z+").constructor;")()}catch{}},k=Vm(),S=Ip(),_=function(){throw new c},T=k?(function(){try{return arguments.callee,_}catch{try{return k(arguments,"callee").get}catch{return _}}})():_,E=tee()(),z=lee(),O=g8(),C=p8(),A=b8(),X=O1(),I={},V=typeof Uint8Array>"u"||!z?s:z(Uint8Array),R={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?s:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?s:ArrayBuffer,"%ArrayIteratorPrototype%":E&&z?z([][Symbol.iterator]()):s,"%AsyncFromSyncIteratorPrototype%":s,"%AsyncFunction%":I,"%AsyncGenerator%":I,"%AsyncGeneratorFunction%":I,"%AsyncIteratorPrototype%":I,"%Atomics%":typeof Atomics>"u"?s:Atomics,"%BigInt%":typeof BigInt>"u"?s:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?s:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?s:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?s:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":r,"%eval%":eval,"%EvalError%":a,"%Float16Array%":typeof Float16Array>"u"?s:Float16Array,"%Float32Array%":typeof Float32Array>"u"?s:Float32Array,"%Float64Array%":typeof Float64Array>"u"?s:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?s:FinalizationRegistry,"%Function%":w,"%GeneratorFunction%":I,"%Int8Array%":typeof Int8Array>"u"?s:Int8Array,"%Int16Array%":typeof Int16Array>"u"?s:Int16Array,"%Int32Array%":typeof Int32Array>"u"?s:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":E&&z?z(z([][Symbol.iterator]())):s,"%JSON%":typeof JSON=="object"?JSON:s,"%Map%":typeof Map>"u"?s:Map,"%MapIteratorPrototype%":typeof Map>"u"||!E||!z?s:z(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":t,"%Object.getOwnPropertyDescriptor%":k,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?s:Promise,"%Proxy%":typeof Proxy>"u"?s:Proxy,"%RangeError%":n,"%ReferenceError%":i,"%Reflect%":typeof Reflect>"u"?s:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?s:Set,"%SetIteratorPrototype%":typeof Set>"u"||!E||!z?s:z(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?s:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":E&&z?z(""[Symbol.iterator]()):s,"%Symbol%":E?Symbol:s,"%SyntaxError%":o,"%ThrowTypeError%":T,"%TypedArray%":V,"%TypeError%":c,"%Uint8Array%":typeof Uint8Array>"u"?s:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?s:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?s:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?s:Uint32Array,"%URIError%":u,"%WeakMap%":typeof WeakMap>"u"?s:WeakMap,"%WeakRef%":typeof WeakRef>"u"?s:WeakRef,"%WeakSet%":typeof WeakSet>"u"?s:WeakSet,"%Function.prototype.call%":X,"%Function.prototype.apply%":A,"%Object.defineProperty%":S,"%Object.getPrototypeOf%":O,"%Math.abs%":h,"%Math.floor%":m,"%Math.max%":f,"%Math.min%":p,"%Math.pow%":v,"%Math.round%":g,"%Math.sign%":y,"%Reflect.getPrototypeOf%":C};if(z)try{null.error}catch(Z){var H=z(z(Z));R["%Error.prototype%"]=H}var ee=function Z(q){var Q;if(q==="%AsyncFunction%")Q=N("async function () {}");else if(q==="%GeneratorFunction%")Q=N("function* () {}");else if(q==="%AsyncGeneratorFunction%")Q=N("async function* () {}");else if(q==="%AsyncGenerator%"){var le=Z("%AsyncGeneratorFunction%");le&&(Q=le.prototype)}else if(q==="%AsyncIteratorPrototype%"){var me=Z("%AsyncGenerator%");me&&z&&(Q=z(me.prototype))}return R[q]=Q,Q},se={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},W=Hm(),te=oee(),J=W.call(X,Array.prototype.concat),K=W.call(A,Array.prototype.splice),$=W.call(X,String.prototype.replace),ie=W.call(X,String.prototype.slice),ne=W.call(X,RegExp.prototype.exec),oe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ce=/\\(\\)?/g,U=function(q){var Q=ie(q,0,1),le=ie(q,-1);if(Q==="%"&&le!=="%")throw new o("invalid intrinsic syntax, expected closing `%`");if(le==="%"&&Q!=="%")throw new o("invalid intrinsic syntax, expected opening `%`");var me=[];return $(q,oe,function(G,ue,Y,L){me[me.length]=Y?$(L,ce,"$1"):ue||G}),me},F=function(q,Q){var le=q,me;if(te(se,le)&&(me=se[le],le="%"+me[0]+"%"),te(R,le)){var G=R[le];if(G===I&&(G=ee(le)),typeof G>"u"&&!Q)throw new c("intrinsic "+q+" exists, but is not available. Please file an issue!");return{alias:me,name:le,value:G}}throw new o("intrinsic "+q+" does not exist!")};return Fv=function(q,Q){if(typeof q!="string"||q.length===0)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Q!="boolean")throw new c('"allowMissing" argument must be a boolean');if(ne(/^%?[^%]*%?$/,q)===null)throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var le=U(q),me=le.length>0?le[0]:"",G=F("%"+me+"%",Q),ue=G.name,Y=G.value,L=!1,M=G.alias;M&&(me=M[0],K(le,J([0,1],M)));for(var B=1,ae=!0;B<le.length;B+=1){var he=le[B],xe=ie(he,0,1),_e=ie(he,-1);if((xe==='"'||xe==="'"||xe==="`"||_e==='"'||_e==="'"||_e==="`")&&xe!==_e)throw new o("property names with quotes must have matching quotes");if((he==="constructor"||!ae)&&(L=!0),me+="."+he,ue="%"+me+"%",te(R,ue))Y=R[ue];else if(Y!=null){if(!(he in Y)){if(!Q)throw new c("base intrinsic for "+q+" exists, but the property is not available.");return}if(k&&B+1>=le.length){var Te=k(Y,he);ae=!!Te,ae&&"get"in Te&&!("originalValue"in Te.get)?Y=Te.get:Y=Y[he]}else ae=te(Y,he),Y=Y[he];ae&&!L&&(R[ue]=Y)}}return Y},Fv}var zv={exports:{}},Iv,W3;function cee(){if(W3)return Iv;W3=1;var s=Ip(),t=f8(),r=Um(),a=Vm();return Iv=function(i,o,c){if(!i||typeof i!="object"&&typeof i!="function")throw new r("`obj` must be an object or a function`");if(typeof o!="string"&&typeof o!="symbol")throw new r("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new r("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new r("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new r("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new r("`loose`, if provided, must be a boolean");var u=arguments.length>3?arguments[3]:null,h=arguments.length>4?arguments[4]:null,m=arguments.length>5?arguments[5]:null,f=arguments.length>6?arguments[6]:!1,p=!!a&&a(i,o);if(s)s(i,o,{configurable:m===null&&p?p.configurable:!m,enumerable:u===null&&p?p.enumerable:!u,value:c,writable:h===null&&p?p.writable:!h});else if(f||!u&&!h&&!m)i[o]=c;else throw new t("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Iv}var $v,Y3;function dee(){if(Y3)return $v;Y3=1;var s=Ip(),t=function(){return!!s};return t.hasArrayLengthDefineBug=function(){if(!s)return null;try{return s([],"length",{value:1}).length!==1}catch{return!0}},$v=t,$v}var Uv,G3;function uee(){if(G3)return Uv;G3=1;var s=L1(),t=cee(),r=dee()(),a=Vm(),n=Um(),i=s("%Math.floor%");return Uv=function(c,u){if(typeof c!="function")throw new n("`fn` is not a function");if(typeof u!="number"||u<0||u>4294967295||i(u)!==u)throw new n("`length` must be a positive 32-bit integer");var h=arguments.length>2&&!!arguments[2],m=!0,f=!0;if("length"in c&&a){var p=a(c,"length");p&&!p.configurable&&(m=!1),p&&!p.writable&&(f=!1)}return(m||f||!h)&&(r?t(c,"length",u,!0,!0):t(c,"length",u)),c},Uv}var K3;function y8(){return K3||(K3=1,(function(s){var t=Hm(),r=L1(),a=uee(),n=Um(),i=r("%Function.prototype.apply%"),o=r("%Function.prototype.call%"),c=r("%Reflect.apply%",!0)||t.call(o,i),u=Ip(),h=r("%Math.max%");s.exports=function(p){if(typeof p!="function")throw new n("a function is required");var v=c(t,o,arguments);return a(v,1+h(0,p.length-(arguments.length-1)),!0)};var m=function(){return c(t,i,arguments)};u?u(s.exports,"apply",{value:m}):s.exports.apply=m})(zv)),zv.exports}var Vv,X3;function v8(){if(X3)return Vv;X3=1;var s=L1(),t=y8(),r=t(s("String.prototype.indexOf"));return Vv=function(n,i){var o=s(n,!!i);return typeof o=="function"&&r(n,".prototype.")>-1?t(o):o},Vv}var Hv,Z3;function hee(){if(Z3)return Hv;Z3=1;var s=M1()(),t=v8(),r=t("Object.prototype.toString"),a=function(c){return s&&c&&typeof c=="object"&&Symbol.toStringTag in c?!1:r(c)==="[object Arguments]"},n=function(c){return a(c)?!0:c!==null&&typeof c=="object"&&typeof c.length=="number"&&c.length>=0&&r(c)!=="[object Array]"&&r(c.callee)==="[object Function]"},i=(function(){return a(arguments)})();return a.isLegacyArguments=n,Hv=i?a:n,Hv}var qv,Q3;function mee(){if(Q3)return qv;Q3=1;var s=Object.prototype.toString,t=Function.prototype.toString,r=/^\s*(?:function)?\*/,a=M1()(),n=Object.getPrototypeOf,i=function(){if(!a)return!1;try{return Function("return function*() {}")()}catch{}},o;return qv=function(u){if(typeof u!="function")return!1;if(r.test(t.call(u)))return!0;if(!a){var h=s.call(u);return h==="[object GeneratorFunction]"}if(!n)return!1;if(typeof o>"u"){var m=i();o=m?n(m):!1}return n(u)===o},qv}var Wv,J3;function xee(){if(J3)return Wv;J3=1;var s=Function.prototype.toString,t=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,r,a;if(typeof t=="function"&&typeof Object.defineProperty=="function")try{r=Object.defineProperty({},"length",{get:function(){throw a}}),a={},t(function(){throw 42},null,r)}catch(k){k!==a&&(t=null)}else t=null;var n=/^\s*class\b/,i=function(S){try{var _=s.call(S);return n.test(_)}catch{return!1}},o=function(S){try{return i(S)?!1:(s.call(S),!0)}catch{return!1}},c=Object.prototype.toString,u="[object Object]",h="[object Function]",m="[object GeneratorFunction]",f="[object HTMLAllCollection]",p="[object HTML document.all class]",v="[object HTMLCollection]",g=typeof Symbol=="function"&&!!Symbol.toStringTag,y=!(0 in[,]),w=function(){return!1};if(typeof document=="object"){var N=document.all;c.call(N)===c.call(document.all)&&(w=function(S){if((y||!S)&&(typeof S>"u"||typeof S=="object"))try{var _=c.call(S);return(_===f||_===p||_===v||_===u)&&S("")==null}catch{}return!1})}return Wv=t?function(S){if(w(S))return!0;if(!S||typeof S!="function"&&typeof S!="object")return!1;try{t(S,null,r)}catch(_){if(_!==a)return!1}return!i(S)&&o(S)}:function(S){if(w(S))return!0;if(!S||typeof S!="function"&&typeof S!="object")return!1;if(g)return o(S);if(i(S))return!1;var _=c.call(S);return _!==h&&_!==m&&!/^\[object HTML/.test(_)?!1:o(S)},Wv}var Yv,eC;function fee(){if(eC)return Yv;eC=1;var s=xee(),t=Object.prototype.toString,r=Object.prototype.hasOwnProperty,a=function(u,h,m){for(var f=0,p=u.length;f<p;f++)r.call(u,f)&&(m==null?h(u[f],f,u):h.call(m,u[f],f,u))},n=function(u,h,m){for(var f=0,p=u.length;f<p;f++)m==null?h(u.charAt(f),f,u):h.call(m,u.charAt(f),f,u)},i=function(u,h,m){for(var f in u)r.call(u,f)&&(m==null?h(u[f],f,u):h.call(m,u[f],f,u))},o=function(u,h,m){if(!s(h))throw new TypeError("iterator must be a function");var f;arguments.length>=3&&(f=m),t.call(u)==="[object Array]"?a(u,h,f):typeof u=="string"?n(u,h,f):i(u,h,f)};return Yv=o,Yv}var Gv,tC;function pee(){return tC||(tC=1,Gv=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),Gv}var Kv,sC;function gee(){if(sC)return Kv;sC=1;var s=pee(),t=typeof globalThis>"u"?vn:globalThis;return Kv=function(){for(var a=[],n=0;n<s.length;n++)typeof t[s[n]]=="function"&&(a[a.length]=s[n]);return a},Kv}var Xv,rC;function j8(){if(rC)return Xv;rC=1;var s=fee(),t=gee(),r=y8(),a=v8(),n=Vm(),i=a("Object.prototype.toString"),o=M1()(),c=typeof globalThis>"u"?vn:globalThis,u=t(),h=a("String.prototype.slice"),m=Object.getPrototypeOf,f=a("Array.prototype.indexOf",!0)||function(w,N){for(var k=0;k<w.length;k+=1)if(w[k]===N)return k;return-1},p={__proto__:null};o&&n&&m?s(u,function(y){var w=new c[y];if(Symbol.toStringTag in w){var N=m(w),k=n(N,Symbol.toStringTag);if(!k){var S=m(N);k=n(S,Symbol.toStringTag)}p["$"+y]=r(k.get)}}):s(u,function(y){var w=new c[y],N=w.slice||w.set;N&&(p["$"+y]=r(N))});var v=function(w){var N=!1;return s(p,function(k,S){if(!N)try{"$"+k(w)===S&&(N=h(S,1))}catch{}}),N},g=function(w){var N=!1;return s(p,function(k,S){if(!N)try{k(w),N=h(S,1)}catch{}}),N};return Xv=function(w){if(!w||typeof w!="object")return!1;if(!o){var N=h(i(w),8,-1);return f(u,N)>-1?N:N!=="Object"?!1:g(w)}return n?v(w):null},Xv}var Zv,aC;function bee(){if(aC)return Zv;aC=1;var s=j8();return Zv=function(r){return!!s(r)},Zv}var nC;function yee(){return nC||(nC=1,(function(s){var t=hee(),r=mee(),a=j8(),n=bee();function i(B){return B.call.bind(B)}var o=typeof BigInt<"u",c=typeof Symbol<"u",u=i(Object.prototype.toString),h=i(Number.prototype.valueOf),m=i(String.prototype.valueOf),f=i(Boolean.prototype.valueOf);if(o)var p=i(BigInt.prototype.valueOf);if(c)var v=i(Symbol.prototype.valueOf);function g(B,ae){if(typeof B!="object")return!1;try{return ae(B),!0}catch{return!1}}s.isArgumentsObject=t,s.isGeneratorFunction=r,s.isTypedArray=n;function y(B){return typeof Promise<"u"&&B instanceof Promise||B!==null&&typeof B=="object"&&typeof B.then=="function"&&typeof B.catch=="function"}s.isPromise=y;function w(B){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(B):n(B)||ie(B)}s.isArrayBufferView=w;function N(B){return a(B)==="Uint8Array"}s.isUint8Array=N;function k(B){return a(B)==="Uint8ClampedArray"}s.isUint8ClampedArray=k;function S(B){return a(B)==="Uint16Array"}s.isUint16Array=S;function _(B){return a(B)==="Uint32Array"}s.isUint32Array=_;function T(B){return a(B)==="Int8Array"}s.isInt8Array=T;function E(B){return a(B)==="Int16Array"}s.isInt16Array=E;function z(B){return a(B)==="Int32Array"}s.isInt32Array=z;function O(B){return a(B)==="Float32Array"}s.isFloat32Array=O;function C(B){return a(B)==="Float64Array"}s.isFloat64Array=C;function A(B){return a(B)==="BigInt64Array"}s.isBigInt64Array=A;function X(B){return a(B)==="BigUint64Array"}s.isBigUint64Array=X;function I(B){return u(B)==="[object Map]"}I.working=typeof Map<"u"&&I(new Map);function V(B){return typeof Map>"u"?!1:I.working?I(B):B instanceof Map}s.isMap=V;function R(B){return u(B)==="[object Set]"}R.working=typeof Set<"u"&&R(new Set);function H(B){return typeof Set>"u"?!1:R.working?R(B):B instanceof Set}s.isSet=H;function ee(B){return u(B)==="[object WeakMap]"}ee.working=typeof WeakMap<"u"&&ee(new WeakMap);function se(B){return typeof WeakMap>"u"?!1:ee.working?ee(B):B instanceof WeakMap}s.isWeakMap=se;function W(B){return u(B)==="[object WeakSet]"}W.working=typeof WeakSet<"u"&&W(new WeakSet);function te(B){return W(B)}s.isWeakSet=te;function J(B){return u(B)==="[object ArrayBuffer]"}J.working=typeof ArrayBuffer<"u"&&J(new ArrayBuffer);function K(B){return typeof ArrayBuffer>"u"?!1:J.working?J(B):B instanceof ArrayBuffer}s.isArrayBuffer=K;function $(B){return u(B)==="[object DataView]"}$.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&$(new DataView(new ArrayBuffer(1),0,1));function ie(B){return typeof DataView>"u"?!1:$.working?$(B):B instanceof DataView}s.isDataView=ie;var ne=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function oe(B){return u(B)==="[object SharedArrayBuffer]"}function ce(B){return typeof ne>"u"?!1:(typeof oe.working>"u"&&(oe.working=oe(new ne)),oe.working?oe(B):B instanceof ne)}s.isSharedArrayBuffer=ce;function U(B){return u(B)==="[object AsyncFunction]"}s.isAsyncFunction=U;function F(B){return u(B)==="[object Map Iterator]"}s.isMapIterator=F;function Z(B){return u(B)==="[object Set Iterator]"}s.isSetIterator=Z;function q(B){return u(B)==="[object Generator]"}s.isGeneratorObject=q;function Q(B){return u(B)==="[object WebAssembly.Module]"}s.isWebAssemblyCompiledModule=Q;function le(B){return g(B,h)}s.isNumberObject=le;function me(B){return g(B,m)}s.isStringObject=me;function G(B){return g(B,f)}s.isBooleanObject=G;function ue(B){return o&&g(B,p)}s.isBigIntObject=ue;function Y(B){return c&&g(B,v)}s.isSymbolObject=Y;function L(B){return le(B)||me(B)||G(B)||ue(B)||Y(B)}s.isBoxedPrimitive=L;function M(B){return typeof Uint8Array<"u"&&(K(B)||ce(B))}s.isAnyArrayBuffer=M,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(B){Object.defineProperty(s,B,{enumerable:!1,value:function(){throw new Error(B+" is not supported in userland")}})})})(rv)),rv}var Qv,iC;function vee(){return iC||(iC=1,Qv=function(t){return t&&typeof t=="object"&&typeof t.copy=="function"&&typeof t.fill=="function"&&typeof t.readUInt8=="function"}),Qv}var lC;function w8(){return lC||(lC=1,(function(s){var t=Object.getOwnPropertyDescriptors||function(ie){for(var ne=Object.keys(ie),oe={},ce=0;ce<ne.length;ce++)oe[ne[ce]]=Object.getOwnPropertyDescriptor(ie,ne[ce]);return oe},r=/%[sdj%]/g;s.format=function($){if(!T($)){for(var ie=[],ne=0;ne<arguments.length;ne++)ie.push(o(arguments[ne]));return ie.join(" ")}for(var ne=1,oe=arguments,ce=oe.length,U=String($).replace(r,function(Z){if(Z==="%%")return"%";if(ne>=ce)return Z;switch(Z){case"%s":return String(oe[ne++]);case"%d":return Number(oe[ne++]);case"%j":try{return JSON.stringify(oe[ne++])}catch{return"[Circular]"}default:return Z}}),F=oe[ne];ne<ce;F=oe[++ne])k(F)||!C(F)?U+=" "+F:U+=" "+o(F);return U},s.deprecate=function($,ie){if(typeof mt<"u"&&mt.noDeprecation===!0)return $;if(typeof mt>"u")return function(){return s.deprecate($,ie).apply(this,arguments)};var ne=!1;function oe(){if(!ne){if(mt.throwDeprecation)throw new Error(ie);mt.traceDeprecation?console.trace(ie):console.error(ie),ne=!0}return $.apply(this,arguments)}return oe};var a={},n=/^$/;if(mt.env.NODE_DEBUG){var i=mt.env.NODE_DEBUG;i=i.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),n=new RegExp("^"+i+"$","i")}s.debuglog=function($){if($=$.toUpperCase(),!a[$])if(n.test($)){var ie=mt.pid;a[$]=function(){var ne=s.format.apply(s,arguments);console.error("%s %d: %s",$,ie,ne)}}else a[$]=function(){};return a[$]};function o($,ie){var ne={seen:[],stylize:u};return arguments.length>=3&&(ne.depth=arguments[2]),arguments.length>=4&&(ne.colors=arguments[3]),N(ie)?ne.showHidden=ie:ie&&s._extend(ne,ie),z(ne.showHidden)&&(ne.showHidden=!1),z(ne.depth)&&(ne.depth=2),z(ne.colors)&&(ne.colors=!1),z(ne.customInspect)&&(ne.customInspect=!0),ne.colors&&(ne.stylize=c),m(ne,$,ne.depth)}s.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function c($,ie){var ne=o.styles[ie];return ne?"\x1B["+o.colors[ne][0]+"m"+$+"\x1B["+o.colors[ne][1]+"m":$}function u($,ie){return $}function h($){var ie={};return $.forEach(function(ne,oe){ie[ne]=!0}),ie}function m($,ie,ne){if($.customInspect&&ie&&I(ie.inspect)&&ie.inspect!==s.inspect&&!(ie.constructor&&ie.constructor.prototype===ie)){var oe=ie.inspect(ne,$);return T(oe)||(oe=m($,oe,ne)),oe}var ce=f($,ie);if(ce)return ce;var U=Object.keys(ie),F=h(U);if($.showHidden&&(U=Object.getOwnPropertyNames(ie)),X(ie)&&(U.indexOf("message")>=0||U.indexOf("description")>=0))return p(ie);if(U.length===0){if(I(ie)){var Z=ie.name?": "+ie.name:"";return $.stylize("[Function"+Z+"]","special")}if(O(ie))return $.stylize(RegExp.prototype.toString.call(ie),"regexp");if(A(ie))return $.stylize(Date.prototype.toString.call(ie),"date");if(X(ie))return p(ie)}var q="",Q=!1,le=["{","}"];if(w(ie)&&(Q=!0,le=["[","]"]),I(ie)){var me=ie.name?": "+ie.name:"";q=" [Function"+me+"]"}if(O(ie)&&(q=" "+RegExp.prototype.toString.call(ie)),A(ie)&&(q=" "+Date.prototype.toUTCString.call(ie)),X(ie)&&(q=" "+p(ie)),U.length===0&&(!Q||ie.length==0))return le[0]+q+le[1];if(ne<0)return O(ie)?$.stylize(RegExp.prototype.toString.call(ie),"regexp"):$.stylize("[Object]","special");$.seen.push(ie);var G;return Q?G=v($,ie,ne,F,U):G=U.map(function(ue){return g($,ie,ne,F,ue,Q)}),$.seen.pop(),y(G,q,le)}function f($,ie){if(z(ie))return $.stylize("undefined","undefined");if(T(ie)){var ne="'"+JSON.stringify(ie).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return $.stylize(ne,"string")}if(_(ie))return $.stylize(""+ie,"number");if(N(ie))return $.stylize(""+ie,"boolean");if(k(ie))return $.stylize("null","null")}function p($){return"["+Error.prototype.toString.call($)+"]"}function v($,ie,ne,oe,ce){for(var U=[],F=0,Z=ie.length;F<Z;++F)W(ie,String(F))?U.push(g($,ie,ne,oe,String(F),!0)):U.push("");return ce.forEach(function(q){q.match(/^\d+$/)||U.push(g($,ie,ne,oe,q,!0))}),U}function g($,ie,ne,oe,ce,U){var F,Z,q;if(q=Object.getOwnPropertyDescriptor(ie,ce)||{value:ie[ce]},q.get?q.set?Z=$.stylize("[Getter/Setter]","special"):Z=$.stylize("[Getter]","special"):q.set&&(Z=$.stylize("[Setter]","special")),W(oe,ce)||(F="["+ce+"]"),Z||($.seen.indexOf(q.value)<0?(k(ne)?Z=m($,q.value,null):Z=m($,q.value,ne-1),Z.indexOf(`
`)>-1&&(U?Z=Z.split(`
`).map(function(Q){return"  "+Q}).join(`
`).slice(2):Z=`
`+Z.split(`
`).map(function(Q){return"   "+Q}).join(`
`))):Z=$.stylize("[Circular]","special")),z(F)){if(U&&ce.match(/^\d+$/))return Z;F=JSON.stringify(""+ce),F.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(F=F.slice(1,-1),F=$.stylize(F,"name")):(F=F.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),F=$.stylize(F,"string"))}return F+": "+Z}function y($,ie,ne){var oe=$.reduce(function(ce,U){return U.indexOf(`
`)>=0,ce+U.replace(/\u001b\[\d\d?m/g,"").length+1},0);return oe>60?ne[0]+(ie===""?"":ie+`
 `)+" "+$.join(`,
  `)+" "+ne[1]:ne[0]+ie+" "+$.join(", ")+" "+ne[1]}s.types=yee();function w($){return Array.isArray($)}s.isArray=w;function N($){return typeof $=="boolean"}s.isBoolean=N;function k($){return $===null}s.isNull=k;function S($){return $==null}s.isNullOrUndefined=S;function _($){return typeof $=="number"}s.isNumber=_;function T($){return typeof $=="string"}s.isString=T;function E($){return typeof $=="symbol"}s.isSymbol=E;function z($){return $===void 0}s.isUndefined=z;function O($){return C($)&&R($)==="[object RegExp]"}s.isRegExp=O,s.types.isRegExp=O;function C($){return typeof $=="object"&&$!==null}s.isObject=C;function A($){return C($)&&R($)==="[object Date]"}s.isDate=A,s.types.isDate=A;function X($){return C($)&&(R($)==="[object Error]"||$ instanceof Error)}s.isError=X,s.types.isNativeError=X;function I($){return typeof $=="function"}s.isFunction=I;function V($){return $===null||typeof $=="boolean"||typeof $=="number"||typeof $=="string"||typeof $=="symbol"||typeof $>"u"}s.isPrimitive=V,s.isBuffer=vee();function R($){return Object.prototype.toString.call($)}function H($){return $<10?"0"+$.toString(10):$.toString(10)}var ee=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function se(){var $=new Date,ie=[H($.getHours()),H($.getMinutes()),H($.getSeconds())].join(":");return[$.getDate(),ee[$.getMonth()],ie].join(" ")}s.log=function(){console.log("%s - %s",se(),s.format.apply(s,arguments))},s.inherits=Pl(),s._extend=function($,ie){if(!ie||!C(ie))return $;for(var ne=Object.keys(ie),oe=ne.length;oe--;)$[ne[oe]]=ie[ne[oe]];return $};function W($,ie){return Object.prototype.hasOwnProperty.call($,ie)}var te=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;s.promisify=function(ie){if(typeof ie!="function")throw new TypeError('The "original" argument must be of type Function');if(te&&ie[te]){var ne=ie[te];if(typeof ne!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(ne,te,{value:ne,enumerable:!1,writable:!1,configurable:!0}),ne}function ne(){for(var oe,ce,U=new Promise(function(q,Q){oe=q,ce=Q}),F=[],Z=0;Z<arguments.length;Z++)F.push(arguments[Z]);F.push(function(q,Q){q?ce(q):oe(Q)});try{ie.apply(this,F)}catch(q){ce(q)}return U}return Object.setPrototypeOf(ne,Object.getPrototypeOf(ie)),te&&Object.defineProperty(ne,te,{value:ne,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(ne,t(ie))},s.promisify.custom=te;function J($,ie){if(!$){var ne=new Error("Promise was rejected with a falsy value");ne.reason=$,$=ne}return ie($)}function K($){if(typeof $!="function")throw new TypeError('The "original" argument must be of type Function');function ie(){for(var ne=[],oe=0;oe<arguments.length;oe++)ne.push(arguments[oe]);var ce=ne.pop();if(typeof ce!="function")throw new TypeError("The last argument must be of type Function");var U=this,F=function(){return ce.apply(U,arguments)};$.apply(this,ne).then(function(Z){mt.nextTick(F.bind(null,null,Z))},function(Z){mt.nextTick(J.bind(null,Z,F))})}return Object.setPrototypeOf(ie,Object.getPrototypeOf($)),Object.defineProperties(ie,t($)),ie}s.callbackify=K})(sv)),sv}var Jv,oC;function jee(){if(oC)return Jv;oC=1;function s(p,v){var g=Object.keys(p);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(p);v&&(y=y.filter(function(w){return Object.getOwnPropertyDescriptor(p,w).enumerable})),g.push.apply(g,y)}return g}function t(p){for(var v=1;v<arguments.length;v++){var g=arguments[v]!=null?arguments[v]:{};v%2?s(Object(g),!0).forEach(function(y){r(p,y,g[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(g)):s(Object(g)).forEach(function(y){Object.defineProperty(p,y,Object.getOwnPropertyDescriptor(g,y))})}return p}function r(p,v,g){return v in p?Object.defineProperty(p,v,{value:g,enumerable:!0,configurable:!0,writable:!0}):p[v]=g,p}function a(p,v){if(!(p instanceof v))throw new TypeError("Cannot call a class as a function")}function n(p,v){for(var g=0;g<v.length;g++){var y=v[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(p,y.key,y)}}function i(p,v,g){return v&&n(p.prototype,v),p}var o=zp(),c=o.Buffer,u=w8(),h=u.inspect,m=h&&h.custom||"inspect";function f(p,v,g){c.prototype.copy.call(p,v,g)}return Jv=(function(){function p(){a(this,p),this.head=null,this.tail=null,this.length=0}return i(p,[{key:"push",value:function(g){var y={data:g,next:null};this.length>0?this.tail.next=y:this.head=y,this.tail=y,++this.length}},{key:"unshift",value:function(g){var y={data:g,next:this.head};this.length===0&&(this.tail=y),this.head=y,++this.length}},{key:"shift",value:function(){if(this.length!==0){var g=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,g}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(g){if(this.length===0)return"";for(var y=this.head,w=""+y.data;y=y.next;)w+=g+y.data;return w}},{key:"concat",value:function(g){if(this.length===0)return c.alloc(0);for(var y=c.allocUnsafe(g>>>0),w=this.head,N=0;w;)f(w.data,y,N),N+=w.data.length,w=w.next;return y}},{key:"consume",value:function(g,y){var w;return g<this.head.data.length?(w=this.head.data.slice(0,g),this.head.data=this.head.data.slice(g)):g===this.head.data.length?w=this.shift():w=y?this._getString(g):this._getBuffer(g),w}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(g){var y=this.head,w=1,N=y.data;for(g-=N.length;y=y.next;){var k=y.data,S=g>k.length?k.length:g;if(S===k.length?N+=k:N+=k.slice(0,g),g-=S,g===0){S===k.length?(++w,y.next?this.head=y.next:this.head=this.tail=null):(this.head=y,y.data=k.slice(S));break}++w}return this.length-=w,N}},{key:"_getBuffer",value:function(g){var y=c.allocUnsafe(g),w=this.head,N=1;for(w.data.copy(y),g-=w.data.length;w=w.next;){var k=w.data,S=g>k.length?k.length:g;if(k.copy(y,y.length-g,0,S),g-=S,g===0){S===k.length?(++N,w.next?this.head=w.next:this.head=this.tail=null):(this.head=w,w.data=k.slice(S));break}++N}return this.length-=N,y}},{key:m,value:function(g,y){return h(this,t({},y,{depth:0,customInspect:!1}))}}]),p})(),Jv}var ej,cC;function N8(){if(cC)return ej;cC=1;function s(o,c){var u=this,h=this._readableState&&this._readableState.destroyed,m=this._writableState&&this._writableState.destroyed;return h||m?(c?c(o):o&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,mt.nextTick(n,this,o)):mt.nextTick(n,this,o)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(o||null,function(f){!c&&f?u._writableState?u._writableState.errorEmitted?mt.nextTick(r,u):(u._writableState.errorEmitted=!0,mt.nextTick(t,u,f)):mt.nextTick(t,u,f):c?(mt.nextTick(r,u),c(f)):mt.nextTick(r,u)}),this)}function t(o,c){n(o,c),r(o)}function r(o){o._writableState&&!o._writableState.emitClose||o._readableState&&!o._readableState.emitClose||o.emit("close")}function a(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function n(o,c){o.emit("error",c)}function i(o,c){var u=o._readableState,h=o._writableState;u&&u.autoDestroy||h&&h.autoDestroy?o.destroy(c):o.emit("error",c)}return ej={destroy:s,undestroy:a,errorOrDestroy:i},ej}var tj={},dC;function Id(){if(dC)return tj;dC=1;function s(c,u){c.prototype=Object.create(u.prototype),c.prototype.constructor=c,c.__proto__=u}var t={};function r(c,u,h){h||(h=Error);function m(p,v,g){return typeof u=="string"?u:u(p,v,g)}var f=(function(p){s(v,p);function v(g,y,w){return p.call(this,m(g,y,w))||this}return v})(h);f.prototype.name=h.name,f.prototype.code=c,t[c]=f}function a(c,u){if(Array.isArray(c)){var h=c.length;return c=c.map(function(m){return String(m)}),h>2?"one of ".concat(u," ").concat(c.slice(0,h-1).join(", "),", or ")+c[h-1]:h===2?"one of ".concat(u," ").concat(c[0]," or ").concat(c[1]):"of ".concat(u," ").concat(c[0])}else return"of ".concat(u," ").concat(String(c))}function n(c,u,h){return c.substr(0,u.length)===u}function i(c,u,h){return(h===void 0||h>c.length)&&(h=c.length),c.substring(h-u.length,h)===u}function o(c,u,h){return typeof h!="number"&&(h=0),h+u.length>c.length?!1:c.indexOf(u,h)!==-1}return r("ERR_INVALID_OPT_VALUE",function(c,u){return'The value "'+u+'" is invalid for option "'+c+'"'},TypeError),r("ERR_INVALID_ARG_TYPE",function(c,u,h){var m;typeof u=="string"&&n(u,"not ")?(m="must not be",u=u.replace(/^not /,"")):m="must be";var f;if(i(c," argument"))f="The ".concat(c," ").concat(m," ").concat(a(u,"type"));else{var p=o(c,".")?"property":"argument";f='The "'.concat(c,'" ').concat(p," ").concat(m," ").concat(a(u,"type"))}return f+=". Received type ".concat(typeof h),f},TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",function(c){return"The "+c+" method is not implemented"}),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",function(c){return"Cannot call "+c+" after a stream was destroyed"}),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",function(c){return"Unknown encoding: "+c},TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),tj.codes=t,tj}var sj,uC;function _8(){if(uC)return sj;uC=1;var s=Id().codes.ERR_INVALID_OPT_VALUE;function t(a,n,i){return a.highWaterMark!=null?a.highWaterMark:n?a[i]:null}function r(a,n,i,o){var c=t(n,o,i);if(c!=null){if(!(isFinite(c)&&Math.floor(c)===c)||c<0){var u=o?i:"highWaterMark";throw new s(u,c)}return Math.floor(c)}return a.objectMode?16:16*1024}return sj={getHighWaterMark:r},sj}var rj,hC;function wee(){if(hC)return rj;hC=1,rj=s;function s(r,a){if(t("noDeprecation"))return r;var n=!1;function i(){if(!n){if(t("throwDeprecation"))throw new Error(a);t("traceDeprecation")?console.trace(a):console.warn(a),n=!0}return r.apply(this,arguments)}return i}function t(r){try{if(!vn.localStorage)return!1}catch{return!1}var a=vn.localStorage[r];return a==null?!1:String(a).toLowerCase()==="true"}return rj}var aj,mC;function k8(){if(mC)return aj;mC=1,aj=O;function s(ce){var U=this;this.next=null,this.entry=null,this.finish=function(){oe(U,ce)}}var t;O.WritableState=E;var r={deprecate:wee()},a=h8(),n=zp().Buffer,i=vn.Uint8Array||function(){};function o(ce){return n.from(ce)}function c(ce){return n.isBuffer(ce)||ce instanceof i}var u=N8(),h=_8(),m=h.getHighWaterMark,f=Id().codes,p=f.ERR_INVALID_ARG_TYPE,v=f.ERR_METHOD_NOT_IMPLEMENTED,g=f.ERR_MULTIPLE_CALLBACK,y=f.ERR_STREAM_CANNOT_PIPE,w=f.ERR_STREAM_DESTROYED,N=f.ERR_STREAM_NULL_VALUES,k=f.ERR_STREAM_WRITE_AFTER_END,S=f.ERR_UNKNOWN_ENCODING,_=u.errorOrDestroy;Pl()(O,a);function T(){}function E(ce,U,F){t=t||Sd(),ce=ce||{},typeof F!="boolean"&&(F=U instanceof t),this.objectMode=!!ce.objectMode,F&&(this.objectMode=this.objectMode||!!ce.writableObjectMode),this.highWaterMark=m(this,ce,"writableHighWaterMark",F),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Z=ce.decodeStrings===!1;this.decodeStrings=!Z,this.defaultEncoding=ce.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(q){ee(U,q)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=ce.emitClose!==!1,this.autoDestroy=!!ce.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}E.prototype.getBuffer=function(){for(var U=this.bufferedRequest,F=[];U;)F.push(U),U=U.next;return F},(function(){try{Object.defineProperty(E.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var z;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(z=Function.prototype[Symbol.hasInstance],Object.defineProperty(O,Symbol.hasInstance,{value:function(U){return z.call(this,U)?!0:this!==O?!1:U&&U._writableState instanceof E}})):z=function(U){return U instanceof this};function O(ce){t=t||Sd();var U=this instanceof t;if(!U&&!z.call(O,this))return new O(ce);this._writableState=new E(ce,this,U),this.writable=!0,ce&&(typeof ce.write=="function"&&(this._write=ce.write),typeof ce.writev=="function"&&(this._writev=ce.writev),typeof ce.destroy=="function"&&(this._destroy=ce.destroy),typeof ce.final=="function"&&(this._final=ce.final)),a.call(this)}O.prototype.pipe=function(){_(this,new y)};function C(ce,U){var F=new k;_(ce,F),mt.nextTick(U,F)}function A(ce,U,F,Z){var q;return F===null?q=new N:typeof F!="string"&&!U.objectMode&&(q=new p("chunk",["string","Buffer"],F)),q?(_(ce,q),mt.nextTick(Z,q),!1):!0}O.prototype.write=function(ce,U,F){var Z=this._writableState,q=!1,Q=!Z.objectMode&&c(ce);return Q&&!n.isBuffer(ce)&&(ce=o(ce)),typeof U=="function"&&(F=U,U=null),Q?U="buffer":U||(U=Z.defaultEncoding),typeof F!="function"&&(F=T),Z.ending?C(this,F):(Q||A(this,Z,ce,F))&&(Z.pendingcb++,q=I(this,Z,Q,ce,U,F)),q},O.prototype.cork=function(){this._writableState.corked++},O.prototype.uncork=function(){var ce=this._writableState;ce.corked&&(ce.corked--,!ce.writing&&!ce.corked&&!ce.bufferProcessing&&ce.bufferedRequest&&te(this,ce))},O.prototype.setDefaultEncoding=function(U){if(typeof U=="string"&&(U=U.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((U+"").toLowerCase())>-1))throw new S(U);return this._writableState.defaultEncoding=U,this},Object.defineProperty(O.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function X(ce,U,F){return!ce.objectMode&&ce.decodeStrings!==!1&&typeof U=="string"&&(U=n.from(U,F)),U}Object.defineProperty(O.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function I(ce,U,F,Z,q,Q){if(!F){var le=X(U,Z,q);Z!==le&&(F=!0,q="buffer",Z=le)}var me=U.objectMode?1:Z.length;U.length+=me;var G=U.length<U.highWaterMark;if(G||(U.needDrain=!0),U.writing||U.corked){var ue=U.lastBufferedRequest;U.lastBufferedRequest={chunk:Z,encoding:q,isBuf:F,callback:Q,next:null},ue?ue.next=U.lastBufferedRequest:U.bufferedRequest=U.lastBufferedRequest,U.bufferedRequestCount+=1}else V(ce,U,!1,me,Z,q,Q);return G}function V(ce,U,F,Z,q,Q,le){U.writelen=Z,U.writecb=le,U.writing=!0,U.sync=!0,U.destroyed?U.onwrite(new w("write")):F?ce._writev(q,U.onwrite):ce._write(q,Q,U.onwrite),U.sync=!1}function R(ce,U,F,Z,q){--U.pendingcb,F?(mt.nextTick(q,Z),mt.nextTick(ie,ce,U),ce._writableState.errorEmitted=!0,_(ce,Z)):(q(Z),ce._writableState.errorEmitted=!0,_(ce,Z),ie(ce,U))}function H(ce){ce.writing=!1,ce.writecb=null,ce.length-=ce.writelen,ce.writelen=0}function ee(ce,U){var F=ce._writableState,Z=F.sync,q=F.writecb;if(typeof q!="function")throw new g;if(H(F),U)R(ce,F,Z,U,q);else{var Q=J(F)||ce.destroyed;!Q&&!F.corked&&!F.bufferProcessing&&F.bufferedRequest&&te(ce,F),Z?mt.nextTick(se,ce,F,Q,q):se(ce,F,Q,q)}}function se(ce,U,F,Z){F||W(ce,U),U.pendingcb--,Z(),ie(ce,U)}function W(ce,U){U.length===0&&U.needDrain&&(U.needDrain=!1,ce.emit("drain"))}function te(ce,U){U.bufferProcessing=!0;var F=U.bufferedRequest;if(ce._writev&&F&&F.next){var Z=U.bufferedRequestCount,q=new Array(Z),Q=U.corkedRequestsFree;Q.entry=F;for(var le=0,me=!0;F;)q[le]=F,F.isBuf||(me=!1),F=F.next,le+=1;q.allBuffers=me,V(ce,U,!0,U.length,q,"",Q.finish),U.pendingcb++,U.lastBufferedRequest=null,Q.next?(U.corkedRequestsFree=Q.next,Q.next=null):U.corkedRequestsFree=new s(U),U.bufferedRequestCount=0}else{for(;F;){var G=F.chunk,ue=F.encoding,Y=F.callback,L=U.objectMode?1:G.length;if(V(ce,U,!1,L,G,ue,Y),F=F.next,U.bufferedRequestCount--,U.writing)break}F===null&&(U.lastBufferedRequest=null)}U.bufferedRequest=F,U.bufferProcessing=!1}O.prototype._write=function(ce,U,F){F(new v("_write()"))},O.prototype._writev=null,O.prototype.end=function(ce,U,F){var Z=this._writableState;return typeof ce=="function"?(F=ce,ce=null,U=null):typeof U=="function"&&(F=U,U=null),ce!=null&&this.write(ce,U),Z.corked&&(Z.corked=1,this.uncork()),Z.ending||ne(this,Z,F),this},Object.defineProperty(O.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function J(ce){return ce.ending&&ce.length===0&&ce.bufferedRequest===null&&!ce.finished&&!ce.writing}function K(ce,U){ce._final(function(F){U.pendingcb--,F&&_(ce,F),U.prefinished=!0,ce.emit("prefinish"),ie(ce,U)})}function $(ce,U){!U.prefinished&&!U.finalCalled&&(typeof ce._final=="function"&&!U.destroyed?(U.pendingcb++,U.finalCalled=!0,mt.nextTick(K,ce,U)):(U.prefinished=!0,ce.emit("prefinish")))}function ie(ce,U){var F=J(U);if(F&&($(ce,U),U.pendingcb===0&&(U.finished=!0,ce.emit("finish"),U.autoDestroy))){var Z=ce._readableState;(!Z||Z.autoDestroy&&Z.endEmitted)&&ce.destroy()}return F}function ne(ce,U,F){U.ending=!0,ie(ce,U),F&&(U.finished?mt.nextTick(F):ce.once("finish",F)),U.ended=!0,ce.writable=!1}function oe(ce,U,F){var Z=ce.entry;for(ce.entry=null;Z;){var q=Z.callback;U.pendingcb--,q(F),Z=Z.next}U.corkedRequestsFree.next=ce}return Object.defineProperty(O.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(U){this._writableState&&(this._writableState.destroyed=U)}}),O.prototype.destroy=u.destroy,O.prototype._undestroy=u.undestroy,O.prototype._destroy=function(ce,U){U(ce)},aj}var nj,xC;function Sd(){if(xC)return nj;xC=1;var s=Object.keys||function(h){var m=[];for(var f in h)m.push(f);return m};nj=o;var t=S8(),r=k8();Pl()(o,t);for(var a=s(r.prototype),n=0;n<a.length;n++){var i=a[n];o.prototype[i]||(o.prototype[i]=r.prototype[i])}function o(h){if(!(this instanceof o))return new o(h);t.call(this,h),r.call(this,h),this.allowHalfOpen=!0,h&&(h.readable===!1&&(this.readable=!1),h.writable===!1&&(this.writable=!1),h.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",c)))}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function c(){this._writableState.ended||mt.nextTick(u,this)}function u(h){h.end()}return Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(m){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=m,this._writableState.destroyed=m)}}),nj}var ij={},xf={exports:{}},fC;function Nee(){return fC||(fC=1,(function(s,t){var r=zp(),a=r.Buffer;function n(o,c){for(var u in o)c[u]=o[u]}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?s.exports=r:(n(r,t),t.Buffer=i);function i(o,c,u){return a(o,c,u)}n(a,i),i.from=function(o,c,u){if(typeof o=="number")throw new TypeError("Argument must not be a number");return a(o,c,u)},i.alloc=function(o,c,u){if(typeof o!="number")throw new TypeError("Argument must be a number");var h=a(o);return c!==void 0?typeof u=="string"?h.fill(c,u):h.fill(c):h.fill(0),h},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return a(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(o)}})(xf,xf.exports)),xf.exports}var pC;function Kw(){if(pC)return ij;pC=1;var s=Nee().Buffer,t=s.isEncoding||function(N){switch(N=""+N,N&&N.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(N){if(!N)return"utf8";for(var k;;)switch(N){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return N;default:if(k)return;N=(""+N).toLowerCase(),k=!0}}function a(N){var k=r(N);if(typeof k!="string"&&(s.isEncoding===t||!t(N)))throw new Error("Unknown encoding: "+N);return k||N}ij.StringDecoder=n;function n(N){this.encoding=a(N);var k;switch(this.encoding){case"utf16le":this.text=f,this.end=p,k=4;break;case"utf8":this.fillLast=u,k=4;break;case"base64":this.text=v,this.end=g,k=3;break;default:this.write=y,this.end=w;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=s.allocUnsafe(k)}n.prototype.write=function(N){if(N.length===0)return"";var k,S;if(this.lastNeed){if(k=this.fillLast(N),k===void 0)return"";S=this.lastNeed,this.lastNeed=0}else S=0;return S<N.length?k?k+this.text(N,S):this.text(N,S):k||""},n.prototype.end=m,n.prototype.text=h,n.prototype.fillLast=function(N){if(this.lastNeed<=N.length)return N.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);N.copy(this.lastChar,this.lastTotal-this.lastNeed,0,N.length),this.lastNeed-=N.length};function i(N){return N<=127?0:N>>5===6?2:N>>4===14?3:N>>3===30?4:N>>6===2?-1:-2}function o(N,k,S){var _=k.length-1;if(_<S)return 0;var T=i(k[_]);return T>=0?(T>0&&(N.lastNeed=T-1),T):--_<S||T===-2?0:(T=i(k[_]),T>=0?(T>0&&(N.lastNeed=T-2),T):--_<S||T===-2?0:(T=i(k[_]),T>=0?(T>0&&(T===2?T=0:N.lastNeed=T-3),T):0))}function c(N,k,S){if((k[0]&192)!==128)return N.lastNeed=0,"";if(N.lastNeed>1&&k.length>1){if((k[1]&192)!==128)return N.lastNeed=1,"";if(N.lastNeed>2&&k.length>2&&(k[2]&192)!==128)return N.lastNeed=2,""}}function u(N){var k=this.lastTotal-this.lastNeed,S=c(this,N);if(S!==void 0)return S;if(this.lastNeed<=N.length)return N.copy(this.lastChar,k,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);N.copy(this.lastChar,k,0,N.length),this.lastNeed-=N.length}function h(N,k){var S=o(this,N,k);if(!this.lastNeed)return N.toString("utf8",k);this.lastTotal=S;var _=N.length-(S-this.lastNeed);return N.copy(this.lastChar,0,_),N.toString("utf8",k,_)}function m(N){var k=N&&N.length?this.write(N):"";return this.lastNeed?k+"":k}function f(N,k){if((N.length-k)%2===0){var S=N.toString("utf16le",k);if(S){var _=S.charCodeAt(S.length-1);if(_>=55296&&_<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=N[N.length-2],this.lastChar[1]=N[N.length-1],S.slice(0,-1)}return S}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=N[N.length-1],N.toString("utf16le",k,N.length-1)}function p(N){var k=N&&N.length?this.write(N):"";if(this.lastNeed){var S=this.lastTotal-this.lastNeed;return k+this.lastChar.toString("utf16le",0,S)}return k}function v(N,k){var S=(N.length-k)%3;return S===0?N.toString("base64",k):(this.lastNeed=3-S,this.lastTotal=3,S===1?this.lastChar[0]=N[N.length-1]:(this.lastChar[0]=N[N.length-2],this.lastChar[1]=N[N.length-1]),N.toString("base64",k,N.length-S))}function g(N){var k=N&&N.length?this.write(N):"";return this.lastNeed?k+this.lastChar.toString("base64",0,3-this.lastNeed):k}function y(N){return N.toString(this.encoding)}function w(N){return N&&N.length?this.write(N):""}return ij}var lj,gC;function P1(){if(gC)return lj;gC=1;var s=Id().codes.ERR_STREAM_PREMATURE_CLOSE;function t(i){var o=!1;return function(){if(!o){o=!0;for(var c=arguments.length,u=new Array(c),h=0;h<c;h++)u[h]=arguments[h];i.apply(this,u)}}}function r(){}function a(i){return i.setHeader&&typeof i.abort=="function"}function n(i,o,c){if(typeof o=="function")return n(i,null,o);o||(o={}),c=t(c||r);var u=o.readable||o.readable!==!1&&i.readable,h=o.writable||o.writable!==!1&&i.writable,m=function(){i.writable||p()},f=i._writableState&&i._writableState.finished,p=function(){h=!1,f=!0,u||c.call(i)},v=i._readableState&&i._readableState.endEmitted,g=function(){u=!1,v=!0,h||c.call(i)},y=function(S){c.call(i,S)},w=function(){var S;if(u&&!v)return(!i._readableState||!i._readableState.ended)&&(S=new s),c.call(i,S);if(h&&!f)return(!i._writableState||!i._writableState.ended)&&(S=new s),c.call(i,S)},N=function(){i.req.on("finish",p)};return a(i)?(i.on("complete",p),i.on("abort",w),i.req?N():i.on("request",N)):h&&!i._writableState&&(i.on("end",m),i.on("close",m)),i.on("end",g),i.on("finish",p),o.error!==!1&&i.on("error",y),i.on("close",w),function(){i.removeListener("complete",p),i.removeListener("abort",w),i.removeListener("request",N),i.req&&i.req.removeListener("finish",p),i.removeListener("end",m),i.removeListener("close",m),i.removeListener("finish",p),i.removeListener("end",g),i.removeListener("error",y),i.removeListener("close",w)}}return lj=n,lj}var oj,bC;function _ee(){if(bC)return oj;bC=1;var s;function t(N,k,S){return k in N?Object.defineProperty(N,k,{value:S,enumerable:!0,configurable:!0,writable:!0}):N[k]=S,N}var r=P1(),a=Symbol("lastResolve"),n=Symbol("lastReject"),i=Symbol("error"),o=Symbol("ended"),c=Symbol("lastPromise"),u=Symbol("handlePromise"),h=Symbol("stream");function m(N,k){return{value:N,done:k}}function f(N){var k=N[a];if(k!==null){var S=N[h].read();S!==null&&(N[c]=null,N[a]=null,N[n]=null,k(m(S,!1)))}}function p(N){mt.nextTick(f,N)}function v(N,k){return function(S,_){N.then(function(){if(k[o]){S(m(void 0,!0));return}k[u](S,_)},_)}}var g=Object.getPrototypeOf(function(){}),y=Object.setPrototypeOf((s={get stream(){return this[h]},next:function(){var k=this,S=this[i];if(S!==null)return Promise.reject(S);if(this[o])return Promise.resolve(m(void 0,!0));if(this[h].destroyed)return new Promise(function(z,O){mt.nextTick(function(){k[i]?O(k[i]):z(m(void 0,!0))})});var _=this[c],T;if(_)T=new Promise(v(_,this));else{var E=this[h].read();if(E!==null)return Promise.resolve(m(E,!1));T=new Promise(this[u])}return this[c]=T,T}},t(s,Symbol.asyncIterator,function(){return this}),t(s,"return",function(){var k=this;return new Promise(function(S,_){k[h].destroy(null,function(T){if(T){_(T);return}S(m(void 0,!0))})})}),s),g),w=function(k){var S,_=Object.create(y,(S={},t(S,h,{value:k,writable:!0}),t(S,a,{value:null,writable:!0}),t(S,n,{value:null,writable:!0}),t(S,i,{value:null,writable:!0}),t(S,o,{value:k._readableState.endEmitted,writable:!0}),t(S,u,{value:function(E,z){var O=_[h].read();O?(_[c]=null,_[a]=null,_[n]=null,E(m(O,!1))):(_[a]=E,_[n]=z)},writable:!0}),S));return _[c]=null,r(k,function(T){if(T&&T.code!=="ERR_STREAM_PREMATURE_CLOSE"){var E=_[n];E!==null&&(_[c]=null,_[a]=null,_[n]=null,E(T)),_[i]=T;return}var z=_[a];z!==null&&(_[c]=null,_[a]=null,_[n]=null,z(m(void 0,!0))),_[o]=!0}),k.on("readable",p.bind(null,_)),_};return oj=w,oj}var cj,yC;function kee(){return yC||(yC=1,cj=function(){throw new Error("Readable.from is not available in the browser")}),cj}var dj,vC;function S8(){if(vC)return dj;vC=1,dj=C;var s;C.ReadableState=O,R1().EventEmitter;var t=function(le,me){return le.listeners(me).length},r=h8(),a=zp().Buffer,n=vn.Uint8Array||function(){};function i(Q){return a.from(Q)}function o(Q){return a.isBuffer(Q)||Q instanceof n}var c=w8(),u;c&&c.debuglog?u=c.debuglog("stream"):u=function(){};var h=jee(),m=N8(),f=_8(),p=f.getHighWaterMark,v=Id().codes,g=v.ERR_INVALID_ARG_TYPE,y=v.ERR_STREAM_PUSH_AFTER_EOF,w=v.ERR_METHOD_NOT_IMPLEMENTED,N=v.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,k,S,_;Pl()(C,r);var T=m.errorOrDestroy,E=["error","close","destroy","pause","resume"];function z(Q,le,me){if(typeof Q.prependListener=="function")return Q.prependListener(le,me);!Q._events||!Q._events[le]?Q.on(le,me):Array.isArray(Q._events[le])?Q._events[le].unshift(me):Q._events[le]=[me,Q._events[le]]}function O(Q,le,me){s=s||Sd(),Q=Q||{},typeof me!="boolean"&&(me=le instanceof s),this.objectMode=!!Q.objectMode,me&&(this.objectMode=this.objectMode||!!Q.readableObjectMode),this.highWaterMark=p(this,Q,"readableHighWaterMark",me),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Q.emitClose!==!1,this.autoDestroy=!!Q.autoDestroy,this.destroyed=!1,this.defaultEncoding=Q.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Q.encoding&&(k||(k=Kw().StringDecoder),this.decoder=new k(Q.encoding),this.encoding=Q.encoding)}function C(Q){if(s=s||Sd(),!(this instanceof C))return new C(Q);var le=this instanceof s;this._readableState=new O(Q,this,le),this.readable=!0,Q&&(typeof Q.read=="function"&&(this._read=Q.read),typeof Q.destroy=="function"&&(this._destroy=Q.destroy)),r.call(this)}Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(le){this._readableState&&(this._readableState.destroyed=le)}}),C.prototype.destroy=m.destroy,C.prototype._undestroy=m.undestroy,C.prototype._destroy=function(Q,le){le(Q)},C.prototype.push=function(Q,le){var me=this._readableState,G;return me.objectMode?G=!0:typeof Q=="string"&&(le=le||me.defaultEncoding,le!==me.encoding&&(Q=a.from(Q,le),le=""),G=!0),A(this,Q,le,!1,G)},C.prototype.unshift=function(Q){return A(this,Q,null,!0,!1)};function A(Q,le,me,G,ue){u("readableAddChunk",le);var Y=Q._readableState;if(le===null)Y.reading=!1,ee(Q,Y);else{var L;if(ue||(L=I(Y,le)),L)T(Q,L);else if(Y.objectMode||le&&le.length>0)if(typeof le!="string"&&!Y.objectMode&&Object.getPrototypeOf(le)!==a.prototype&&(le=i(le)),G)Y.endEmitted?T(Q,new N):X(Q,Y,le,!0);else if(Y.ended)T(Q,new y);else{if(Y.destroyed)return!1;Y.reading=!1,Y.decoder&&!me?(le=Y.decoder.write(le),Y.objectMode||le.length!==0?X(Q,Y,le,!1):te(Q,Y)):X(Q,Y,le,!1)}else G||(Y.reading=!1,te(Q,Y))}return!Y.ended&&(Y.length<Y.highWaterMark||Y.length===0)}function X(Q,le,me,G){le.flowing&&le.length===0&&!le.sync?(le.awaitDrain=0,Q.emit("data",me)):(le.length+=le.objectMode?1:me.length,G?le.buffer.unshift(me):le.buffer.push(me),le.needReadable&&se(Q)),te(Q,le)}function I(Q,le){var me;return!o(le)&&typeof le!="string"&&le!==void 0&&!Q.objectMode&&(me=new g("chunk",["string","Buffer","Uint8Array"],le)),me}C.prototype.isPaused=function(){return this._readableState.flowing===!1},C.prototype.setEncoding=function(Q){k||(k=Kw().StringDecoder);var le=new k(Q);this._readableState.decoder=le,this._readableState.encoding=this._readableState.decoder.encoding;for(var me=this._readableState.buffer.head,G="";me!==null;)G+=le.write(me.data),me=me.next;return this._readableState.buffer.clear(),G!==""&&this._readableState.buffer.push(G),this._readableState.length=G.length,this};var V=1073741824;function R(Q){return Q>=V?Q=V:(Q--,Q|=Q>>>1,Q|=Q>>>2,Q|=Q>>>4,Q|=Q>>>8,Q|=Q>>>16,Q++),Q}function H(Q,le){return Q<=0||le.length===0&&le.ended?0:le.objectMode?1:Q!==Q?le.flowing&&le.length?le.buffer.head.data.length:le.length:(Q>le.highWaterMark&&(le.highWaterMark=R(Q)),Q<=le.length?Q:le.ended?le.length:(le.needReadable=!0,0))}C.prototype.read=function(Q){u("read",Q),Q=parseInt(Q,10);var le=this._readableState,me=Q;if(Q!==0&&(le.emittedReadable=!1),Q===0&&le.needReadable&&((le.highWaterMark!==0?le.length>=le.highWaterMark:le.length>0)||le.ended))return u("read: emitReadable",le.length,le.ended),le.length===0&&le.ended?F(this):se(this),null;if(Q=H(Q,le),Q===0&&le.ended)return le.length===0&&F(this),null;var G=le.needReadable;u("need readable",G),(le.length===0||le.length-Q<le.highWaterMark)&&(G=!0,u("length less than watermark",G)),le.ended||le.reading?(G=!1,u("reading or ended",G)):G&&(u("do read"),le.reading=!0,le.sync=!0,le.length===0&&(le.needReadable=!0),this._read(le.highWaterMark),le.sync=!1,le.reading||(Q=H(me,le)));var ue;return Q>0?ue=U(Q,le):ue=null,ue===null?(le.needReadable=le.length<=le.highWaterMark,Q=0):(le.length-=Q,le.awaitDrain=0),le.length===0&&(le.ended||(le.needReadable=!0),me!==Q&&le.ended&&F(this)),ue!==null&&this.emit("data",ue),ue};function ee(Q,le){if(u("onEofChunk"),!le.ended){if(le.decoder){var me=le.decoder.end();me&&me.length&&(le.buffer.push(me),le.length+=le.objectMode?1:me.length)}le.ended=!0,le.sync?se(Q):(le.needReadable=!1,le.emittedReadable||(le.emittedReadable=!0,W(Q)))}}function se(Q){var le=Q._readableState;u("emitReadable",le.needReadable,le.emittedReadable),le.needReadable=!1,le.emittedReadable||(u("emitReadable",le.flowing),le.emittedReadable=!0,mt.nextTick(W,Q))}function W(Q){var le=Q._readableState;u("emitReadable_",le.destroyed,le.length,le.ended),!le.destroyed&&(le.length||le.ended)&&(Q.emit("readable"),le.emittedReadable=!1),le.needReadable=!le.flowing&&!le.ended&&le.length<=le.highWaterMark,ce(Q)}function te(Q,le){le.readingMore||(le.readingMore=!0,mt.nextTick(J,Q,le))}function J(Q,le){for(;!le.reading&&!le.ended&&(le.length<le.highWaterMark||le.flowing&&le.length===0);){var me=le.length;if(u("maybeReadMore read 0"),Q.read(0),me===le.length)break}le.readingMore=!1}C.prototype._read=function(Q){T(this,new w("_read()"))},C.prototype.pipe=function(Q,le){var me=this,G=this._readableState;switch(G.pipesCount){case 0:G.pipes=Q;break;case 1:G.pipes=[G.pipes,Q];break;default:G.pipes.push(Q);break}G.pipesCount+=1,u("pipe count=%d opts=%j",G.pipesCount,le);var ue=(!le||le.end!==!1)&&Q!==mt.stdout&&Q!==mt.stderr,Y=ue?M:ze;G.endEmitted?mt.nextTick(Y):me.once("end",Y),Q.on("unpipe",L);function L(Ie,Ye){u("onunpipe"),Ie===me&&Ye&&Ye.hasUnpiped===!1&&(Ye.hasUnpiped=!0,he())}function M(){u("onend"),Q.end()}var B=K(me);Q.on("drain",B);var ae=!1;function he(){u("cleanup"),Q.removeListener("close",Te),Q.removeListener("finish",Ee),Q.removeListener("drain",B),Q.removeListener("error",_e),Q.removeListener("unpipe",L),me.removeListener("end",M),me.removeListener("end",ze),me.removeListener("data",xe),ae=!0,G.awaitDrain&&(!Q._writableState||Q._writableState.needDrain)&&B()}me.on("data",xe);function xe(Ie){u("ondata");var Ye=Q.write(Ie);u("dest.write",Ye),Ye===!1&&((G.pipesCount===1&&G.pipes===Q||G.pipesCount>1&&q(G.pipes,Q)!==-1)&&!ae&&(u("false write response, pause",G.awaitDrain),G.awaitDrain++),me.pause())}function _e(Ie){u("onerror",Ie),ze(),Q.removeListener("error",_e),t(Q,"error")===0&&T(Q,Ie)}z(Q,"error",_e);function Te(){Q.removeListener("finish",Ee),ze()}Q.once("close",Te);function Ee(){u("onfinish"),Q.removeListener("close",Te),ze()}Q.once("finish",Ee);function ze(){u("unpipe"),me.unpipe(Q)}return Q.emit("pipe",me),G.flowing||(u("pipe resume"),me.resume()),Q};function K(Q){return function(){var me=Q._readableState;u("pipeOnDrain",me.awaitDrain),me.awaitDrain&&me.awaitDrain--,me.awaitDrain===0&&t(Q,"data")&&(me.flowing=!0,ce(Q))}}C.prototype.unpipe=function(Q){var le=this._readableState,me={hasUnpiped:!1};if(le.pipesCount===0)return this;if(le.pipesCount===1)return Q&&Q!==le.pipes?this:(Q||(Q=le.pipes),le.pipes=null,le.pipesCount=0,le.flowing=!1,Q&&Q.emit("unpipe",this,me),this);if(!Q){var G=le.pipes,ue=le.pipesCount;le.pipes=null,le.pipesCount=0,le.flowing=!1;for(var Y=0;Y<ue;Y++)G[Y].emit("unpipe",this,{hasUnpiped:!1});return this}var L=q(le.pipes,Q);return L===-1?this:(le.pipes.splice(L,1),le.pipesCount-=1,le.pipesCount===1&&(le.pipes=le.pipes[0]),Q.emit("unpipe",this,me),this)},C.prototype.on=function(Q,le){var me=r.prototype.on.call(this,Q,le),G=this._readableState;return Q==="data"?(G.readableListening=this.listenerCount("readable")>0,G.flowing!==!1&&this.resume()):Q==="readable"&&!G.endEmitted&&!G.readableListening&&(G.readableListening=G.needReadable=!0,G.flowing=!1,G.emittedReadable=!1,u("on readable",G.length,G.reading),G.length?se(this):G.reading||mt.nextTick(ie,this)),me},C.prototype.addListener=C.prototype.on,C.prototype.removeListener=function(Q,le){var me=r.prototype.removeListener.call(this,Q,le);return Q==="readable"&&mt.nextTick($,this),me},C.prototype.removeAllListeners=function(Q){var le=r.prototype.removeAllListeners.apply(this,arguments);return(Q==="readable"||Q===void 0)&&mt.nextTick($,this),le};function $(Q){var le=Q._readableState;le.readableListening=Q.listenerCount("readable")>0,le.resumeScheduled&&!le.paused?le.flowing=!0:Q.listenerCount("data")>0&&Q.resume()}function ie(Q){u("readable nexttick read 0"),Q.read(0)}C.prototype.resume=function(){var Q=this._readableState;return Q.flowing||(u("resume"),Q.flowing=!Q.readableListening,ne(this,Q)),Q.paused=!1,this};function ne(Q,le){le.resumeScheduled||(le.resumeScheduled=!0,mt.nextTick(oe,Q,le))}function oe(Q,le){u("resume",le.reading),le.reading||Q.read(0),le.resumeScheduled=!1,Q.emit("resume"),ce(Q),le.flowing&&!le.reading&&Q.read(0)}C.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function ce(Q){var le=Q._readableState;for(u("flow",le.flowing);le.flowing&&Q.read()!==null;);}C.prototype.wrap=function(Q){var le=this,me=this._readableState,G=!1;Q.on("end",function(){if(u("wrapped end"),me.decoder&&!me.ended){var L=me.decoder.end();L&&L.length&&le.push(L)}le.push(null)}),Q.on("data",function(L){if(u("wrapped data"),me.decoder&&(L=me.decoder.write(L)),!(me.objectMode&&L==null)&&!(!me.objectMode&&(!L||!L.length))){var M=le.push(L);M||(G=!0,Q.pause())}});for(var ue in Q)this[ue]===void 0&&typeof Q[ue]=="function"&&(this[ue]=(function(M){return function(){return Q[M].apply(Q,arguments)}})(ue));for(var Y=0;Y<E.length;Y++)Q.on(E[Y],this.emit.bind(this,E[Y]));return this._read=function(L){u("wrapped _read",L),G&&(G=!1,Q.resume())},this},typeof Symbol=="function"&&(C.prototype[Symbol.asyncIterator]=function(){return S===void 0&&(S=_ee()),S(this)}),Object.defineProperty(C.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(C.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(C.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(le){this._readableState&&(this._readableState.flowing=le)}}),C._fromList=U,Object.defineProperty(C.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function U(Q,le){if(le.length===0)return null;var me;return le.objectMode?me=le.buffer.shift():!Q||Q>=le.length?(le.decoder?me=le.buffer.join(""):le.buffer.length===1?me=le.buffer.first():me=le.buffer.concat(le.length),le.buffer.clear()):me=le.buffer.consume(Q,le.decoder),me}function F(Q){var le=Q._readableState;u("endReadable",le.endEmitted),le.endEmitted||(le.ended=!0,mt.nextTick(Z,le,Q))}function Z(Q,le){if(u("endReadableNT",Q.endEmitted,Q.length),!Q.endEmitted&&Q.length===0&&(Q.endEmitted=!0,le.readable=!1,le.emit("end"),Q.autoDestroy)){var me=le._writableState;(!me||me.autoDestroy&&me.finished)&&le.destroy()}}typeof Symbol=="function"&&(C.from=function(Q,le){return _===void 0&&(_=kee()),_(C,Q,le)});function q(Q,le){for(var me=0,G=Q.length;me<G;me++)if(Q[me]===le)return me;return-1}return dj}var uj,jC;function C8(){if(jC)return uj;jC=1,uj=c;var s=Id().codes,t=s.ERR_METHOD_NOT_IMPLEMENTED,r=s.ERR_MULTIPLE_CALLBACK,a=s.ERR_TRANSFORM_ALREADY_TRANSFORMING,n=s.ERR_TRANSFORM_WITH_LENGTH_0,i=Sd();Pl()(c,i);function o(m,f){var p=this._transformState;p.transforming=!1;var v=p.writecb;if(v===null)return this.emit("error",new r);p.writechunk=null,p.writecb=null,f!=null&&this.push(f),v(m);var g=this._readableState;g.reading=!1,(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function c(m){if(!(this instanceof c))return new c(m);i.call(this,m),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,m&&(typeof m.transform=="function"&&(this._transform=m.transform),typeof m.flush=="function"&&(this._flush=m.flush)),this.on("prefinish",u)}function u(){var m=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(f,p){h(m,f,p)}):h(this,null,null)}c.prototype.push=function(m,f){return this._transformState.needTransform=!1,i.prototype.push.call(this,m,f)},c.prototype._transform=function(m,f,p){p(new t("_transform()"))},c.prototype._write=function(m,f,p){var v=this._transformState;if(v.writecb=p,v.writechunk=m,v.writeencoding=f,!v.transforming){var g=this._readableState;(v.needTransform||g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}},c.prototype._read=function(m){var f=this._transformState;f.writechunk!==null&&!f.transforming?(f.transforming=!0,this._transform(f.writechunk,f.writeencoding,f.afterTransform)):f.needTransform=!0},c.prototype._destroy=function(m,f){i.prototype._destroy.call(this,m,function(p){f(p)})};function h(m,f,p){if(f)return m.emit("error",f);if(p!=null&&m.push(p),m._writableState.length)throw new n;if(m._transformState.transforming)throw new a;return m.push(null)}return uj}var hj,wC;function See(){if(wC)return hj;wC=1,hj=t;var s=C8();Pl()(t,s);function t(r){if(!(this instanceof t))return new t(r);s.call(this,r)}return t.prototype._transform=function(r,a,n){n(null,r)},hj}var mj,NC;function Cee(){if(NC)return mj;NC=1;var s;function t(p){var v=!1;return function(){v||(v=!0,p.apply(void 0,arguments))}}var r=Id().codes,a=r.ERR_MISSING_ARGS,n=r.ERR_STREAM_DESTROYED;function i(p){if(p)throw p}function o(p){return p.setHeader&&typeof p.abort=="function"}function c(p,v,g,y){y=t(y);var w=!1;p.on("close",function(){w=!0}),s===void 0&&(s=P1()),s(p,{readable:v,writable:g},function(k){if(k)return y(k);w=!0,y()});var N=!1;return function(k){if(!w&&!N){if(N=!0,o(p))return p.abort();if(typeof p.destroy=="function")return p.destroy();y(k||new n("pipe"))}}}function u(p){p()}function h(p,v){return p.pipe(v)}function m(p){return!p.length||typeof p[p.length-1]!="function"?i:p.pop()}function f(){for(var p=arguments.length,v=new Array(p),g=0;g<p;g++)v[g]=arguments[g];var y=m(v);if(Array.isArray(v[0])&&(v=v[0]),v.length<2)throw new a("streams");var w,N=v.map(function(k,S){var _=S<v.length-1,T=S>0;return c(k,_,T,function(E){w||(w=E),E&&N.forEach(u),!_&&(N.forEach(u),y(w))})});return v.reduce(h)}return mj=f,mj}var xj,_C;function B1(){if(_C)return xj;_C=1,xj=r;var s=R1().EventEmitter,t=Pl();t(r,s),r.Readable=S8(),r.Writable=k8(),r.Duplex=Sd(),r.Transform=C8(),r.PassThrough=See(),r.finished=P1(),r.pipeline=Cee(),r.Stream=r;function r(){s.call(this)}return r.prototype.pipe=function(a,n){var i=this;function o(v){a.writable&&a.write(v)===!1&&i.pause&&i.pause()}i.on("data",o);function c(){i.readable&&i.resume&&i.resume()}a.on("drain",c),!a._isStdio&&(!n||n.end!==!1)&&(i.on("end",h),i.on("close",m));var u=!1;function h(){u||(u=!0,a.end())}function m(){u||(u=!0,typeof a.destroy=="function"&&a.destroy())}function f(v){if(p(),s.listenerCount(this,"error")===0)throw v}i.on("error",f),a.on("error",f);function p(){i.removeListener("data",o),a.removeListener("drain",c),i.removeListener("end",h),i.removeListener("close",m),i.removeListener("error",f),a.removeListener("error",f),i.removeListener("end",p),i.removeListener("close",p),a.removeListener("close",p)}return i.on("end",p),i.on("close",p),a.on("close",p),a.emit("pipe",i),a},xj}var kC;function Tee(){return kC||(kC=1,(function(s){(function(t){t.parser=function(U,F){return new a(U,F)},t.SAXParser=a,t.SAXStream=m,t.createStream=h,t.MAX_BUFFER_LENGTH=64*1024;var r=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function a(U,F){if(!(this instanceof a))return new a(U,F);var Z=this;i(Z),Z.q=Z.c="",Z.bufferCheckPosition=t.MAX_BUFFER_LENGTH,Z.opt=F||{},Z.opt.lowercase=Z.opt.lowercase||Z.opt.lowercasetags,Z.looseCase=Z.opt.lowercase?"toLowerCase":"toUpperCase",Z.tags=[],Z.closed=Z.closedRoot=Z.sawRoot=!1,Z.tag=Z.error=null,Z.strict=!!U,Z.noscript=!!(U||Z.opt.noscript),Z.state=C.BEGIN,Z.strictEntities=Z.opt.strictEntities,Z.ENTITIES=Z.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),Z.attribList=[],Z.opt.xmlns&&(Z.ns=Object.create(y)),Z.trackPosition=Z.opt.position!==!1,Z.trackPosition&&(Z.position=Z.line=Z.column=0),X(Z,"onready")}Object.create||(Object.create=function(U){function F(){}F.prototype=U;var Z=new F;return Z}),Object.keys||(Object.keys=function(U){var F=[];for(var Z in U)U.hasOwnProperty(Z)&&F.push(Z);return F});function n(U){for(var F=Math.max(t.MAX_BUFFER_LENGTH,10),Z=0,q=0,Q=r.length;q<Q;q++){var le=U[r[q]].length;if(le>F)switch(r[q]){case"textNode":V(U);break;case"cdata":I(U,"oncdata",U.cdata),U.cdata="";break;case"script":I(U,"onscript",U.script),U.script="";break;default:H(U,"Max buffer length exceeded: "+r[q])}Z=Math.max(Z,le)}var me=t.MAX_BUFFER_LENGTH-Z;U.bufferCheckPosition=me+U.position}function i(U){for(var F=0,Z=r.length;F<Z;F++)U[r[F]]=""}function o(U){V(U),U.cdata!==""&&(I(U,"oncdata",U.cdata),U.cdata=""),U.script!==""&&(I(U,"onscript",U.script),U.script="")}a.prototype={end:function(){ee(this)},write:ce,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var c;try{c=B1().Stream}catch{c=function(){}}var u=t.EVENTS.filter(function(U){return U!=="error"&&U!=="end"});function h(U,F){return new m(U,F)}function m(U,F){if(!(this instanceof m))return new m(U,F);c.apply(this),this._parser=new a(U,F),this.writable=!0,this.readable=!0;var Z=this;this._parser.onend=function(){Z.emit("end")},this._parser.onerror=function(q){Z.emit("error",q),Z._parser.error=null},this._decoder=null,u.forEach(function(q){Object.defineProperty(Z,"on"+q,{get:function(){return Z._parser["on"+q]},set:function(Q){if(!Q)return Z.removeAllListeners(q),Z._parser["on"+q]=Q,Q;Z.on(q,Q)},enumerable:!0,configurable:!1})})}m.prototype=Object.create(c.prototype,{constructor:{value:m}}),m.prototype.write=function(U){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(U)){if(!this._decoder){var F=Kw().StringDecoder;this._decoder=new F("utf8")}U=this._decoder.write(U)}return this._parser.write(U.toString()),this.emit("data",U),!0},m.prototype.end=function(U){return U&&U.length&&this.write(U),this._parser.end(),!0},m.prototype.on=function(U,F){var Z=this;return!Z._parser["on"+U]&&u.indexOf(U)!==-1&&(Z._parser["on"+U]=function(){var q=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);q.splice(0,0,U),Z.emit.apply(Z,q)}),c.prototype.on.call(Z,U,F)};var f="[CDATA[",p="DOCTYPE",v="http://www.w3.org/XML/1998/namespace",g="http://www.w3.org/2000/xmlns/",y={xml:v,xmlns:g},w=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,N=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,k=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,S=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function _(U){return U===" "||U===`
`||U==="\r"||U==="	"}function T(U){return U==='"'||U==="'"}function E(U){return U===">"||_(U)}function z(U,F){return U.test(F)}function O(U,F){return!z(U,F)}var C=0;t.STATE={BEGIN:C++,BEGIN_WHITESPACE:C++,TEXT:C++,TEXT_ENTITY:C++,OPEN_WAKA:C++,SGML_DECL:C++,SGML_DECL_QUOTED:C++,DOCTYPE:C++,DOCTYPE_QUOTED:C++,DOCTYPE_DTD:C++,DOCTYPE_DTD_QUOTED:C++,COMMENT_STARTING:C++,COMMENT:C++,COMMENT_ENDING:C++,COMMENT_ENDED:C++,CDATA:C++,CDATA_ENDING:C++,CDATA_ENDING_2:C++,PROC_INST:C++,PROC_INST_BODY:C++,PROC_INST_ENDING:C++,OPEN_TAG:C++,OPEN_TAG_SLASH:C++,ATTRIB:C++,ATTRIB_NAME:C++,ATTRIB_NAME_SAW_WHITE:C++,ATTRIB_VALUE:C++,ATTRIB_VALUE_QUOTED:C++,ATTRIB_VALUE_CLOSED:C++,ATTRIB_VALUE_UNQUOTED:C++,ATTRIB_VALUE_ENTITY_Q:C++,ATTRIB_VALUE_ENTITY_U:C++,CLOSE_TAG:C++,CLOSE_TAG_SAW_WHITE:C++,SCRIPT:C++,SCRIPT_ENDING:C++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(U){var F=t.ENTITIES[U],Z=typeof F=="number"?String.fromCharCode(F):F;t.ENTITIES[U]=Z});for(var A in t.STATE)t.STATE[t.STATE[A]]=A;C=t.STATE;function X(U,F,Z){U[F]&&U[F](Z)}function I(U,F,Z){U.textNode&&V(U),X(U,F,Z)}function V(U){U.textNode=R(U.opt,U.textNode),U.textNode&&X(U,"ontext",U.textNode),U.textNode=""}function R(U,F){return U.trim&&(F=F.trim()),U.normalize&&(F=F.replace(/\s+/g," ")),F}function H(U,F){return V(U),U.trackPosition&&(F+=`
Line: `+U.line+`
Column: `+U.column+`
Char: `+U.c),F=new Error(F),U.error=F,X(U,"onerror",F),U}function ee(U){return U.sawRoot&&!U.closedRoot&&se(U,"Unclosed root tag"),U.state!==C.BEGIN&&U.state!==C.BEGIN_WHITESPACE&&U.state!==C.TEXT&&H(U,"Unexpected end"),V(U),U.c="",U.closed=!0,X(U,"onend"),a.call(U,U.strict,U.opt),U}function se(U,F){if(typeof U!="object"||!(U instanceof a))throw new Error("bad call to strictFail");U.strict&&H(U,F)}function W(U){U.strict||(U.tagName=U.tagName[U.looseCase]());var F=U.tags[U.tags.length-1]||U,Z=U.tag={name:U.tagName,attributes:{}};U.opt.xmlns&&(Z.ns=F.ns),U.attribList.length=0,I(U,"onopentagstart",Z)}function te(U,F){var Z=U.indexOf(":"),q=Z<0?["",U]:U.split(":"),Q=q[0],le=q[1];return F&&U==="xmlns"&&(Q="xmlns",le=""),{prefix:Q,local:le}}function J(U){if(U.strict||(U.attribName=U.attribName[U.looseCase]()),U.attribList.indexOf(U.attribName)!==-1||U.tag.attributes.hasOwnProperty(U.attribName)){U.attribName=U.attribValue="";return}if(U.opt.xmlns){var F=te(U.attribName,!0),Z=F.prefix,q=F.local;if(Z==="xmlns")if(q==="xml"&&U.attribValue!==v)se(U,"xml: prefix must be bound to "+v+`
Actual: `+U.attribValue);else if(q==="xmlns"&&U.attribValue!==g)se(U,"xmlns: prefix must be bound to "+g+`
Actual: `+U.attribValue);else{var Q=U.tag,le=U.tags[U.tags.length-1]||U;Q.ns===le.ns&&(Q.ns=Object.create(le.ns)),Q.ns[q]=U.attribValue}U.attribList.push([U.attribName,U.attribValue])}else U.tag.attributes[U.attribName]=U.attribValue,I(U,"onattribute",{name:U.attribName,value:U.attribValue});U.attribName=U.attribValue=""}function K(U,F){if(U.opt.xmlns){var Z=U.tag,q=te(U.tagName);Z.prefix=q.prefix,Z.local=q.local,Z.uri=Z.ns[q.prefix]||"",Z.prefix&&!Z.uri&&(se(U,"Unbound namespace prefix: "+JSON.stringify(U.tagName)),Z.uri=q.prefix);var Q=U.tags[U.tags.length-1]||U;Z.ns&&Q.ns!==Z.ns&&Object.keys(Z.ns).forEach(function(xe){I(U,"onopennamespace",{prefix:xe,uri:Z.ns[xe]})});for(var le=0,me=U.attribList.length;le<me;le++){var G=U.attribList[le],ue=G[0],Y=G[1],L=te(ue,!0),M=L.prefix,B=L.local,ae=M===""?"":Z.ns[M]||"",he={name:ue,value:Y,prefix:M,local:B,uri:ae};M&&M!=="xmlns"&&!ae&&(se(U,"Unbound namespace prefix: "+JSON.stringify(M)),he.uri=M),U.tag.attributes[ue]=he,I(U,"onattribute",he)}U.attribList.length=0}U.tag.isSelfClosing=!!F,U.sawRoot=!0,U.tags.push(U.tag),I(U,"onopentag",U.tag),F||(!U.noscript&&U.tagName.toLowerCase()==="script"?U.state=C.SCRIPT:U.state=C.TEXT,U.tag=null,U.tagName=""),U.attribName=U.attribValue="",U.attribList.length=0}function $(U){if(!U.tagName){se(U,"Weird empty close tag."),U.textNode+="</>",U.state=C.TEXT;return}if(U.script){if(U.tagName!=="script"){U.script+="</"+U.tagName+">",U.tagName="",U.state=C.SCRIPT;return}I(U,"onscript",U.script),U.script=""}var F=U.tags.length,Z=U.tagName;U.strict||(Z=Z[U.looseCase]());for(var q=Z;F--;){var Q=U.tags[F];if(Q.name!==q)se(U,"Unexpected close tag");else break}if(F<0){se(U,"Unmatched closing tag: "+U.tagName),U.textNode+="</"+U.tagName+">",U.state=C.TEXT;return}U.tagName=Z;for(var le=U.tags.length;le-- >F;){var me=U.tag=U.tags.pop();U.tagName=U.tag.name,I(U,"onclosetag",U.tagName);var G={};for(var ue in me.ns)G[ue]=me.ns[ue];var Y=U.tags[U.tags.length-1]||U;U.opt.xmlns&&me.ns!==Y.ns&&Object.keys(me.ns).forEach(function(L){var M=me.ns[L];I(U,"onclosenamespace",{prefix:L,uri:M})})}F===0&&(U.closedRoot=!0),U.tagName=U.attribValue=U.attribName="",U.attribList.length=0,U.state=C.TEXT}function ie(U){var F=U.entity,Z=F.toLowerCase(),q,Q="";return U.ENTITIES[F]?U.ENTITIES[F]:U.ENTITIES[Z]?U.ENTITIES[Z]:(F=Z,F.charAt(0)==="#"&&(F.charAt(1)==="x"?(F=F.slice(2),q=parseInt(F,16),Q=q.toString(16)):(F=F.slice(1),q=parseInt(F,10),Q=q.toString(10))),F=F.replace(/^0+/,""),isNaN(q)||Q.toLowerCase()!==F?(se(U,"Invalid character entity"),"&"+U.entity+";"):String.fromCodePoint(q))}function ne(U,F){F==="<"?(U.state=C.OPEN_WAKA,U.startTagPosition=U.position):_(F)||(se(U,"Non-whitespace before first tag."),U.textNode=F,U.state=C.TEXT)}function oe(U,F){var Z="";return F<U.length&&(Z=U.charAt(F)),Z}function ce(U){var F=this;if(this.error)throw this.error;if(F.closed)return H(F,"Cannot write after close. Assign an onready handler.");if(U===null)return ee(F);typeof U=="object"&&(U=U.toString());for(var Z=0,q="";q=oe(U,Z++),F.c=q,!!q;)switch(F.trackPosition&&(F.position++,q===`
`?(F.line++,F.column=0):F.column++),F.state){case C.BEGIN:if(F.state=C.BEGIN_WHITESPACE,q==="\uFEFF")continue;ne(F,q);continue;case C.BEGIN_WHITESPACE:ne(F,q);continue;case C.TEXT:if(F.sawRoot&&!F.closedRoot){for(var Q=Z-1;q&&q!=="<"&&q!=="&";)q=oe(U,Z++),q&&F.trackPosition&&(F.position++,q===`
`?(F.line++,F.column=0):F.column++);F.textNode+=U.substring(Q,Z-1)}q==="<"&&!(F.sawRoot&&F.closedRoot&&!F.strict)?(F.state=C.OPEN_WAKA,F.startTagPosition=F.position):(!_(q)&&(!F.sawRoot||F.closedRoot)&&se(F,"Text data outside of root node."),q==="&"?F.state=C.TEXT_ENTITY:F.textNode+=q);continue;case C.SCRIPT:q==="<"?F.state=C.SCRIPT_ENDING:F.script+=q;continue;case C.SCRIPT_ENDING:q==="/"?F.state=C.CLOSE_TAG:(F.script+="<"+q,F.state=C.SCRIPT);continue;case C.OPEN_WAKA:if(q==="!")F.state=C.SGML_DECL,F.sgmlDecl="";else if(!_(q))if(z(w,q))F.state=C.OPEN_TAG,F.tagName=q;else if(q==="/")F.state=C.CLOSE_TAG,F.tagName="";else if(q==="?")F.state=C.PROC_INST,F.procInstName=F.procInstBody="";else{if(se(F,"Unencoded <"),F.startTagPosition+1<F.position){var le=F.position-F.startTagPosition;q=new Array(le).join(" ")+q}F.textNode+="<"+q,F.state=C.TEXT}continue;case C.SGML_DECL:(F.sgmlDecl+q).toUpperCase()===f?(I(F,"onopencdata"),F.state=C.CDATA,F.sgmlDecl="",F.cdata=""):F.sgmlDecl+q==="--"?(F.state=C.COMMENT,F.comment="",F.sgmlDecl=""):(F.sgmlDecl+q).toUpperCase()===p?(F.state=C.DOCTYPE,(F.doctype||F.sawRoot)&&se(F,"Inappropriately located doctype declaration"),F.doctype="",F.sgmlDecl=""):q===">"?(I(F,"onsgmldeclaration",F.sgmlDecl),F.sgmlDecl="",F.state=C.TEXT):(T(q)&&(F.state=C.SGML_DECL_QUOTED),F.sgmlDecl+=q);continue;case C.SGML_DECL_QUOTED:q===F.q&&(F.state=C.SGML_DECL,F.q=""),F.sgmlDecl+=q;continue;case C.DOCTYPE:q===">"?(F.state=C.TEXT,I(F,"ondoctype",F.doctype),F.doctype=!0):(F.doctype+=q,q==="["?F.state=C.DOCTYPE_DTD:T(q)&&(F.state=C.DOCTYPE_QUOTED,F.q=q));continue;case C.DOCTYPE_QUOTED:F.doctype+=q,q===F.q&&(F.q="",F.state=C.DOCTYPE);continue;case C.DOCTYPE_DTD:F.doctype+=q,q==="]"?F.state=C.DOCTYPE:T(q)&&(F.state=C.DOCTYPE_DTD_QUOTED,F.q=q);continue;case C.DOCTYPE_DTD_QUOTED:F.doctype+=q,q===F.q&&(F.state=C.DOCTYPE_DTD,F.q="");continue;case C.COMMENT:q==="-"?F.state=C.COMMENT_ENDING:F.comment+=q;continue;case C.COMMENT_ENDING:q==="-"?(F.state=C.COMMENT_ENDED,F.comment=R(F.opt,F.comment),F.comment&&I(F,"oncomment",F.comment),F.comment=""):(F.comment+="-"+q,F.state=C.COMMENT);continue;case C.COMMENT_ENDED:q!==">"?(se(F,"Malformed comment"),F.comment+="--"+q,F.state=C.COMMENT):F.state=C.TEXT;continue;case C.CDATA:q==="]"?F.state=C.CDATA_ENDING:F.cdata+=q;continue;case C.CDATA_ENDING:q==="]"?F.state=C.CDATA_ENDING_2:(F.cdata+="]"+q,F.state=C.CDATA);continue;case C.CDATA_ENDING_2:q===">"?(F.cdata&&I(F,"oncdata",F.cdata),I(F,"onclosecdata"),F.cdata="",F.state=C.TEXT):q==="]"?F.cdata+="]":(F.cdata+="]]"+q,F.state=C.CDATA);continue;case C.PROC_INST:q==="?"?F.state=C.PROC_INST_ENDING:_(q)?F.state=C.PROC_INST_BODY:F.procInstName+=q;continue;case C.PROC_INST_BODY:if(!F.procInstBody&&_(q))continue;q==="?"?F.state=C.PROC_INST_ENDING:F.procInstBody+=q;continue;case C.PROC_INST_ENDING:q===">"?(I(F,"onprocessinginstruction",{name:F.procInstName,body:F.procInstBody}),F.procInstName=F.procInstBody="",F.state=C.TEXT):(F.procInstBody+="?"+q,F.state=C.PROC_INST_BODY);continue;case C.OPEN_TAG:z(N,q)?F.tagName+=q:(W(F),q===">"?K(F):q==="/"?F.state=C.OPEN_TAG_SLASH:(_(q)||se(F,"Invalid character in tag name"),F.state=C.ATTRIB));continue;case C.OPEN_TAG_SLASH:q===">"?(K(F,!0),$(F)):(se(F,"Forward-slash in opening tag not followed by >"),F.state=C.ATTRIB);continue;case C.ATTRIB:if(_(q))continue;q===">"?K(F):q==="/"?F.state=C.OPEN_TAG_SLASH:z(w,q)?(F.attribName=q,F.attribValue="",F.state=C.ATTRIB_NAME):se(F,"Invalid attribute name");continue;case C.ATTRIB_NAME:q==="="?F.state=C.ATTRIB_VALUE:q===">"?(se(F,"Attribute without value"),F.attribValue=F.attribName,J(F),K(F)):_(q)?F.state=C.ATTRIB_NAME_SAW_WHITE:z(N,q)?F.attribName+=q:se(F,"Invalid attribute name");continue;case C.ATTRIB_NAME_SAW_WHITE:if(q==="=")F.state=C.ATTRIB_VALUE;else{if(_(q))continue;se(F,"Attribute without value"),F.tag.attributes[F.attribName]="",F.attribValue="",I(F,"onattribute",{name:F.attribName,value:""}),F.attribName="",q===">"?K(F):z(w,q)?(F.attribName=q,F.state=C.ATTRIB_NAME):(se(F,"Invalid attribute name"),F.state=C.ATTRIB)}continue;case C.ATTRIB_VALUE:if(_(q))continue;T(q)?(F.q=q,F.state=C.ATTRIB_VALUE_QUOTED):(se(F,"Unquoted attribute value"),F.state=C.ATTRIB_VALUE_UNQUOTED,F.attribValue=q);continue;case C.ATTRIB_VALUE_QUOTED:if(q!==F.q){q==="&"?F.state=C.ATTRIB_VALUE_ENTITY_Q:F.attribValue+=q;continue}J(F),F.q="",F.state=C.ATTRIB_VALUE_CLOSED;continue;case C.ATTRIB_VALUE_CLOSED:_(q)?F.state=C.ATTRIB:q===">"?K(F):q==="/"?F.state=C.OPEN_TAG_SLASH:z(w,q)?(se(F,"No whitespace between attributes"),F.attribName=q,F.attribValue="",F.state=C.ATTRIB_NAME):se(F,"Invalid attribute name");continue;case C.ATTRIB_VALUE_UNQUOTED:if(!E(q)){q==="&"?F.state=C.ATTRIB_VALUE_ENTITY_U:F.attribValue+=q;continue}J(F),q===">"?K(F):F.state=C.ATTRIB;continue;case C.CLOSE_TAG:if(F.tagName)q===">"?$(F):z(N,q)?F.tagName+=q:F.script?(F.script+="</"+F.tagName,F.tagName="",F.state=C.SCRIPT):(_(q)||se(F,"Invalid tagname in closing tag"),F.state=C.CLOSE_TAG_SAW_WHITE);else{if(_(q))continue;O(w,q)?F.script?(F.script+="</"+q,F.state=C.SCRIPT):se(F,"Invalid tagname in closing tag."):F.tagName=q}continue;case C.CLOSE_TAG_SAW_WHITE:if(_(q))continue;q===">"?$(F):se(F,"Invalid characters in closing tag");continue;case C.TEXT_ENTITY:case C.ATTRIB_VALUE_ENTITY_Q:case C.ATTRIB_VALUE_ENTITY_U:var me,G;switch(F.state){case C.TEXT_ENTITY:me=C.TEXT,G="textNode";break;case C.ATTRIB_VALUE_ENTITY_Q:me=C.ATTRIB_VALUE_QUOTED,G="attribValue";break;case C.ATTRIB_VALUE_ENTITY_U:me=C.ATTRIB_VALUE_UNQUOTED,G="attribValue";break}q===";"?(F[G]+=ie(F),F.entity="",F.state=me):z(F.entity.length?S:k,q)?F.entity+=q:(se(F,"Invalid character in entity name"),F[G]+="&"+F.entity+q,F.entity="",F.state=me);continue;default:throw new Error(F,"Unknown state: "+F.state)}return F.position>=F.bufferCheckPosition&&n(F),F}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||(function(){var U=String.fromCharCode,F=Math.floor,Z=function(){var q=16384,Q=[],le,me,G=-1,ue=arguments.length;if(!ue)return"";for(var Y="";++G<ue;){var L=Number(arguments[G]);if(!isFinite(L)||L<0||L>1114111||F(L)!==L)throw RangeError("Invalid code point: "+L);L<=65535?Q.push(L):(L-=65536,le=(L>>10)+55296,me=L%1024+56320,Q.push(le,me)),(G+1===ue||Q.length>q)&&(Y+=U.apply(null,Q),Q.length=0)}return Y};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:Z,configurable:!0,writable:!0}):String.fromCodePoint=Z})()})(s)})(Jy)),Jy}var fj,SC;function F1(){return SC||(SC=1,fj={isArray:function(s){return Array.isArray?Array.isArray(s):Object.prototype.toString.call(s)==="[object Array]"}}),fj}var pj,CC;function z1(){if(CC)return pj;CC=1;var s=F1().isArray;return pj={copyOptions:function(t){var r,a={};for(r in t)t.hasOwnProperty(r)&&(a[r]=t[r]);return a},ensureFlagExists:function(t,r){(!(t in r)||typeof r[t]!="boolean")&&(r[t]=!1)},ensureSpacesExists:function(t){(!("spaces"in t)||typeof t.spaces!="number"&&typeof t.spaces!="string")&&(t.spaces=0)},ensureAlwaysArrayExists:function(t){(!("alwaysArray"in t)||typeof t.alwaysArray!="boolean"&&!s(t.alwaysArray))&&(t.alwaysArray=!1)},ensureKeyExists:function(t,r){(!(t+"Key"in r)||typeof r[t+"Key"]!="string")&&(r[t+"Key"]=r.compact?"_"+t:t)},checkFnExists:function(t,r){return t+"Fn"in r}},pj}var gj,TC;function T8(){if(TC)return gj;TC=1;var s=Tee(),t=z1(),r=F1().isArray,a,n;function i(N){return a=t.copyOptions(N),t.ensureFlagExists("ignoreDeclaration",a),t.ensureFlagExists("ignoreInstruction",a),t.ensureFlagExists("ignoreAttributes",a),t.ensureFlagExists("ignoreText",a),t.ensureFlagExists("ignoreComment",a),t.ensureFlagExists("ignoreCdata",a),t.ensureFlagExists("ignoreDoctype",a),t.ensureFlagExists("compact",a),t.ensureFlagExists("alwaysChildren",a),t.ensureFlagExists("addParent",a),t.ensureFlagExists("trim",a),t.ensureFlagExists("nativeType",a),t.ensureFlagExists("nativeTypeAttributes",a),t.ensureFlagExists("sanitize",a),t.ensureFlagExists("instructionHasAttributes",a),t.ensureFlagExists("captureSpacesBetweenElements",a),t.ensureAlwaysArrayExists(a),t.ensureKeyExists("declaration",a),t.ensureKeyExists("instruction",a),t.ensureKeyExists("attributes",a),t.ensureKeyExists("text",a),t.ensureKeyExists("comment",a),t.ensureKeyExists("cdata",a),t.ensureKeyExists("doctype",a),t.ensureKeyExists("type",a),t.ensureKeyExists("name",a),t.ensureKeyExists("elements",a),t.ensureKeyExists("parent",a),t.checkFnExists("doctype",a),t.checkFnExists("instruction",a),t.checkFnExists("cdata",a),t.checkFnExists("comment",a),t.checkFnExists("text",a),t.checkFnExists("instructionName",a),t.checkFnExists("elementName",a),t.checkFnExists("attributeName",a),t.checkFnExists("attributeValue",a),t.checkFnExists("attributes",a),a}function o(N){var k=Number(N);if(!isNaN(k))return k;var S=N.toLowerCase();return S==="true"?!0:S==="false"?!1:N}function c(N,k){var S;if(a.compact){if(!n[a[N+"Key"]]&&(r(a.alwaysArray)?a.alwaysArray.indexOf(a[N+"Key"])!==-1:a.alwaysArray)&&(n[a[N+"Key"]]=[]),n[a[N+"Key"]]&&!r(n[a[N+"Key"]])&&(n[a[N+"Key"]]=[n[a[N+"Key"]]]),N+"Fn"in a&&typeof k=="string"&&(k=a[N+"Fn"](k,n)),N==="instruction"&&("instructionFn"in a||"instructionNameFn"in a)){for(S in k)if(k.hasOwnProperty(S))if("instructionFn"in a)k[S]=a.instructionFn(k[S],S,n);else{var _=k[S];delete k[S],k[a.instructionNameFn(S,_,n)]=_}}r(n[a[N+"Key"]])?n[a[N+"Key"]].push(k):n[a[N+"Key"]]=k}else{n[a.elementsKey]||(n[a.elementsKey]=[]);var T={};if(T[a.typeKey]=N,N==="instruction"){for(S in k)if(k.hasOwnProperty(S))break;T[a.nameKey]="instructionNameFn"in a?a.instructionNameFn(S,k,n):S,a.instructionHasAttributes?(T[a.attributesKey]=k[S][a.attributesKey],"instructionFn"in a&&(T[a.attributesKey]=a.instructionFn(T[a.attributesKey],S,n))):("instructionFn"in a&&(k[S]=a.instructionFn(k[S],S,n)),T[a.instructionKey]=k[S])}else N+"Fn"in a&&(k=a[N+"Fn"](k,n)),T[a[N+"Key"]]=k;a.addParent&&(T[a.parentKey]=n),n[a.elementsKey].push(T)}}function u(N){if("attributesFn"in a&&N&&(N=a.attributesFn(N,n)),(a.trim||"attributeValueFn"in a||"attributeNameFn"in a||a.nativeTypeAttributes)&&N){var k;for(k in N)if(N.hasOwnProperty(k)&&(a.trim&&(N[k]=N[k].trim()),a.nativeTypeAttributes&&(N[k]=o(N[k])),"attributeValueFn"in a&&(N[k]=a.attributeValueFn(N[k],k,n)),"attributeNameFn"in a)){var S=N[k];delete N[k],N[a.attributeNameFn(k,N[k],n)]=S}}return N}function h(N){var k={};if(N.body&&(N.name.toLowerCase()==="xml"||a.instructionHasAttributes)){for(var S=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g,_;(_=S.exec(N.body))!==null;)k[_[1]]=_[2]||_[3]||_[4];k=u(k)}if(N.name.toLowerCase()==="xml"){if(a.ignoreDeclaration)return;n[a.declarationKey]={},Object.keys(k).length&&(n[a.declarationKey][a.attributesKey]=k),a.addParent&&(n[a.declarationKey][a.parentKey]=n)}else{if(a.ignoreInstruction)return;a.trim&&(N.body=N.body.trim());var T={};a.instructionHasAttributes&&Object.keys(k).length?(T[N.name]={},T[N.name][a.attributesKey]=k):T[N.name]=N.body,c("instruction",T)}}function m(N,k){var S;if(typeof N=="object"&&(k=N.attributes,N=N.name),k=u(k),"elementNameFn"in a&&(N=a.elementNameFn(N,n)),a.compact){if(S={},!a.ignoreAttributes&&k&&Object.keys(k).length){S[a.attributesKey]={};var _;for(_ in k)k.hasOwnProperty(_)&&(S[a.attributesKey][_]=k[_])}!(N in n)&&(r(a.alwaysArray)?a.alwaysArray.indexOf(N)!==-1:a.alwaysArray)&&(n[N]=[]),n[N]&&!r(n[N])&&(n[N]=[n[N]]),r(n[N])?n[N].push(S):n[N]=S}else n[a.elementsKey]||(n[a.elementsKey]=[]),S={},S[a.typeKey]="element",S[a.nameKey]=N,!a.ignoreAttributes&&k&&Object.keys(k).length&&(S[a.attributesKey]=k),a.alwaysChildren&&(S[a.elementsKey]=[]),n[a.elementsKey].push(S);S[a.parentKey]=n,n=S}function f(N){a.ignoreText||!N.trim()&&!a.captureSpacesBetweenElements||(a.trim&&(N=N.trim()),a.nativeType&&(N=o(N)),a.sanitize&&(N=N.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),c("text",N))}function p(N){a.ignoreComment||(a.trim&&(N=N.trim()),c("comment",N))}function v(N){var k=n[a.parentKey];a.addParent||delete n[a.parentKey],n=k}function g(N){a.ignoreCdata||(a.trim&&(N=N.trim()),c("cdata",N))}function y(N){a.ignoreDoctype||(N=N.replace(/^ /,""),a.trim&&(N=N.trim()),c("doctype",N))}function w(N){N.note=N}return gj=function(N,k){var S=s.parser(!0,{}),_={};if(n=_,a=i(k),S.opt={strictEntities:!0},S.onopentag=m,S.ontext=f,S.oncomment=p,S.onclosetag=v,S.onerror=w,S.oncdata=g,S.ondoctype=y,S.onprocessinginstruction=h,S.write(N).close(),_[a.elementsKey]){var T=_[a.elementsKey];delete _[a.elementsKey],_[a.elementsKey]=T,delete _.text}return _},gj}var bj,EC;function Eee(){if(EC)return bj;EC=1;var s=z1(),t=T8();function r(a){var n=s.copyOptions(a);return s.ensureSpacesExists(n),n}return bj=function(a,n){var i,o,c,u;return i=r(n),o=t(a,i),u="compact"in i&&i.compact?"_parent":"parent","addParent"in i&&i.addParent?c=JSON.stringify(o,function(h,m){return h===u?"_":m},i.spaces):c=JSON.stringify(o,null,i.spaces),c.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},bj}var yj,AC;function E8(){if(AC)return yj;AC=1;var s=z1(),t=F1().isArray,r,a;function n(S){var _=s.copyOptions(S);return s.ensureFlagExists("ignoreDeclaration",_),s.ensureFlagExists("ignoreInstruction",_),s.ensureFlagExists("ignoreAttributes",_),s.ensureFlagExists("ignoreText",_),s.ensureFlagExists("ignoreComment",_),s.ensureFlagExists("ignoreCdata",_),s.ensureFlagExists("ignoreDoctype",_),s.ensureFlagExists("compact",_),s.ensureFlagExists("indentText",_),s.ensureFlagExists("indentCdata",_),s.ensureFlagExists("indentAttributes",_),s.ensureFlagExists("indentInstruction",_),s.ensureFlagExists("fullTagEmptyElement",_),s.ensureFlagExists("noQuotesForNativeAttributes",_),s.ensureSpacesExists(_),typeof _.spaces=="number"&&(_.spaces=Array(_.spaces+1).join(" ")),s.ensureKeyExists("declaration",_),s.ensureKeyExists("instruction",_),s.ensureKeyExists("attributes",_),s.ensureKeyExists("text",_),s.ensureKeyExists("comment",_),s.ensureKeyExists("cdata",_),s.ensureKeyExists("doctype",_),s.ensureKeyExists("type",_),s.ensureKeyExists("name",_),s.ensureKeyExists("elements",_),s.checkFnExists("doctype",_),s.checkFnExists("instruction",_),s.checkFnExists("cdata",_),s.checkFnExists("comment",_),s.checkFnExists("text",_),s.checkFnExists("instructionName",_),s.checkFnExists("elementName",_),s.checkFnExists("attributeName",_),s.checkFnExists("attributeValue",_),s.checkFnExists("attributes",_),s.checkFnExists("fullTagEmptyElement",_),_}function i(S,_,T){return(!T&&S.spaces?`
`:"")+Array(_+1).join(S.spaces)}function o(S,_,T){if(_.ignoreAttributes)return"";"attributesFn"in _&&(S=_.attributesFn(S,a,r));var E,z,O,C,A=[];for(E in S)S.hasOwnProperty(E)&&S[E]!==null&&S[E]!==void 0&&(C=_.noQuotesForNativeAttributes&&typeof S[E]!="string"?"":'"',z=""+S[E],z=z.replace(/"/g,"&quot;"),O="attributeNameFn"in _?_.attributeNameFn(E,z,a,r):E,A.push(_.spaces&&_.indentAttributes?i(_,T+1,!1):" "),A.push(O+"="+C+("attributeValueFn"in _?_.attributeValueFn(z,E,a,r):z)+C));return S&&Object.keys(S).length&&_.spaces&&_.indentAttributes&&A.push(i(_,T,!1)),A.join("")}function c(S,_,T){return r=S,a="xml",_.ignoreDeclaration?"":"<?xml"+o(S[_.attributesKey],_,T)+"?>"}function u(S,_,T){if(_.ignoreInstruction)return"";var E;for(E in S)if(S.hasOwnProperty(E))break;var z="instructionNameFn"in _?_.instructionNameFn(E,S[E],a,r):E;if(typeof S[E]=="object")return r=S,a=z,"<?"+z+o(S[E][_.attributesKey],_,T)+"?>";var O=S[E]?S[E]:"";return"instructionFn"in _&&(O=_.instructionFn(O,E,a,r)),"<?"+z+(O?" "+O:"")+"?>"}function h(S,_){return _.ignoreComment?"":"<!--"+("commentFn"in _?_.commentFn(S,a,r):S)+"-->"}function m(S,_){return _.ignoreCdata?"":"<![CDATA["+("cdataFn"in _?_.cdataFn(S,a,r):S.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function f(S,_){return _.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in _?_.doctypeFn(S,a,r):S)+">"}function p(S,_){return _.ignoreText?"":(S=""+S,S=S.replace(/&amp;/g,"&"),S=S.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in _?_.textFn(S,a,r):S)}function v(S,_){var T;if(S.elements&&S.elements.length)for(T=0;T<S.elements.length;++T)switch(S.elements[T][_.typeKey]){case"text":if(_.indentText)return!0;break;case"cdata":if(_.indentCdata)return!0;break;case"instruction":if(_.indentInstruction)return!0;break;case"doctype":case"comment":case"element":return!0;default:return!0}return!1}function g(S,_,T){r=S,a=S.name;var E=[],z="elementNameFn"in _?_.elementNameFn(S.name,S):S.name;E.push("<"+z),S[_.attributesKey]&&E.push(o(S[_.attributesKey],_,T));var O=S[_.elementsKey]&&S[_.elementsKey].length||S[_.attributesKey]&&S[_.attributesKey]["xml:space"]==="preserve";return O||("fullTagEmptyElementFn"in _?O=_.fullTagEmptyElementFn(S.name,S):O=_.fullTagEmptyElement),O?(E.push(">"),S[_.elementsKey]&&S[_.elementsKey].length&&(E.push(y(S[_.elementsKey],_,T+1)),r=S,a=S.name),E.push(_.spaces&&v(S,_)?`
`+Array(T+1).join(_.spaces):""),E.push("</"+z+">")):E.push("/>"),E.join("")}function y(S,_,T,E){return S.reduce(function(z,O){var C=i(_,T,E&&!z);switch(O.type){case"element":return z+C+g(O,_,T);case"comment":return z+C+h(O[_.commentKey],_);case"doctype":return z+C+f(O[_.doctypeKey],_);case"cdata":return z+(_.indentCdata?C:"")+m(O[_.cdataKey],_);case"text":return z+(_.indentText?C:"")+p(O[_.textKey],_);case"instruction":var A={};return A[O[_.nameKey]]=O[_.attributesKey]?O:O[_.instructionKey],z+(_.indentInstruction?C:"")+u(A,_,T)}},"")}function w(S,_,T){var E;for(E in S)if(S.hasOwnProperty(E))switch(E){case _.parentKey:case _.attributesKey:break;case _.textKey:if(_.indentText||T)return!0;break;case _.cdataKey:if(_.indentCdata||T)return!0;break;case _.instructionKey:if(_.indentInstruction||T)return!0;break;case _.doctypeKey:case _.commentKey:return!0;default:return!0}return!1}function N(S,_,T,E,z){r=S,a=_;var O="elementNameFn"in T?T.elementNameFn(_,S):_;if(typeof S>"u"||S===null||S==="")return"fullTagEmptyElementFn"in T&&T.fullTagEmptyElementFn(_,S)||T.fullTagEmptyElement?"<"+O+"></"+O+">":"<"+O+"/>";var C=[];if(_){if(C.push("<"+O),typeof S!="object")return C.push(">"+p(S,T)+"</"+O+">"),C.join("");S[T.attributesKey]&&C.push(o(S[T.attributesKey],T,E));var A=w(S,T,!0)||S[T.attributesKey]&&S[T.attributesKey]["xml:space"]==="preserve";if(A||("fullTagEmptyElementFn"in T?A=T.fullTagEmptyElementFn(_,S):A=T.fullTagEmptyElement),A)C.push(">");else return C.push("/>"),C.join("")}return C.push(k(S,T,E+1,!1)),r=S,a=_,_&&C.push((z?i(T,E,!1):"")+"</"+O+">"),C.join("")}function k(S,_,T,E){var z,O,C,A=[];for(O in S)if(S.hasOwnProperty(O))for(C=t(S[O])?S[O]:[S[O]],z=0;z<C.length;++z){switch(O){case _.declarationKey:A.push(c(C[z],_,T));break;case _.instructionKey:A.push((_.indentInstruction?i(_,T,E):"")+u(C[z],_,T));break;case _.attributesKey:case _.parentKey:break;case _.textKey:A.push((_.indentText?i(_,T,E):"")+p(C[z],_));break;case _.cdataKey:A.push((_.indentCdata?i(_,T,E):"")+m(C[z],_));break;case _.doctypeKey:A.push(i(_,T,E)+f(C[z],_));break;case _.commentKey:A.push(i(_,T,E)+h(C[z],_));break;default:A.push(i(_,T,E)+N(C[z],O,_,T,w(C[z],_)))}E=E&&!A.length}return A.join("")}return yj=function(S,_){_=n(_);var T=[];return r=S,a="_root_",_.compact?T.push(k(S,_,0,!0)):(S[_.declarationKey]&&T.push(c(S[_.declarationKey],_,0)),S[_.elementsKey]&&S[_.elementsKey].length&&T.push(y(S[_.elementsKey],_,0,!T.length))),T.join("")},yj}var vj,DC;function Aee(){if(DC)return vj;DC=1;var s=E8();return vj=function(t,r){t instanceof Buffer&&(t=t.toString());var a=null;if(typeof t=="string")try{a=JSON.parse(t)}catch{throw new Error("The JSON structure is invalid")}else a=t;return s(a,r)},vj}var jj,RC;function Dee(){if(RC)return jj;RC=1;var s=T8(),t=Eee(),r=E8(),a=Aee();return jj={xml2js:s,xml2json:t,js2xml:r,json2xml:a},jj}var A8=Dee();const I1=s=>{switch(s.type){case void 0:case"element":const t=new Mee(s.name,s.attributes),r=s.elements||[];for(const a of r){const n=I1(a);n!==void 0&&t.push(n)}return t;case"text":return s.text;default:return}};class Ree extends rt{}class Mee extends Pe{static fromXmlString(t){const r=A8.xml2js(t,{compact:!1});return I1(r)}constructor(t,r){super(t),r&&this.root.push(new Ree(r))}push(t){this.root.push(t)}}class Oee extends Pe{constructor(t){super(""),this._attr=t}prepForXml(t){return{_attr:this._attr}}}class D8 extends Pe{constructor(t,r){super(t),r&&(this.root=r.root)}}const Wr=s=>{if(isNaN(s))throw new Error(`Invalid value '${s}' specified. Must be an integer.`);return Math.floor(s)},$p=s=>{const t=Wr(s);if(t<0)throw new Error(`Invalid value '${s}' specified. Must be a positive integer.`);return t},R8=(s,t)=>{const r=t*2;if(s.length!==r||isNaN(+`0x${s}`))throw new Error(`Invalid hex value '${s}'. Expected ${r} digit hex value`);return s},MC=s=>R8(s,1),M8=s=>{const t=s.slice(-2),r=s.substring(0,s.length-2);return`${Number(r)}${t}`},O8=s=>{const t=M8(s);if(parseFloat(t)<0)throw new Error(`Invalid value '${t}' specified. Expected a positive number.`);return t},Cd=s=>{if(s==="auto")return s;const t=s.charAt(0)==="#"?s.substring(1):s;return R8(t,3)},Oo=s=>typeof s=="string"?M8(s):Wr(s),Lee=s=>typeof s=="string"?O8(s):$p(s),Wa=s=>typeof s=="string"?O8(s):$p(s),Pee=$p,Bee=$p,Fee=s=>s.toISOString();class Be extends Pe{constructor(t,r=!0){super(t),r!==!0&&this.root.push(new Ns({val:r}))}}class wj extends Pe{constructor(t,r){super(t),this.root.push(new Ns({val:Lee(r)}))}}class ud extends Pe{constructor(t,r){super(t),this.root.push(new Ns({val:r}))}}const kh=(s,t)=>new En({name:s,attributes:{value:{key:"w:val",value:t}}});class Jh extends Pe{constructor(t,r){super(t),this.root.push(new Ns({val:r}))}}class jo extends Pe{constructor(t,r){super(t),this.root.push(r)}}class En extends Pe{constructor({name:t,attributes:r,children:a}){super(t),r&&this.root.push(new Fp(r)),a&&this.root.push(...a)}}const lr={START:"start",CENTER:"center",END:"end",BOTH:"both",MEDIUM_KASHIDA:"mediumKashida",DISTRIBUTE:"distribute",NUM_TAB:"numTab",HIGH_KASHIDA:"highKashida",LOW_KASHIDA:"lowKashida",THAI_DISTRIBUTE:"thaiDistribute",LEFT:"left",RIGHT:"right",JUSTIFIED:"both"};class zee extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{val:"w:val"})}}class Iee extends Pe{constructor(t){super("w:jc"),this.root.push(new zee({val:t}))}}class us extends Pe{constructor(t,{color:r,size:a,space:n,style:i}){super(t),this.root.push(new $ee({style:i,color:r===void 0?void 0:Cd(r),size:a===void 0?void 0:Pee(a),space:n===void 0?void 0:Bee(n)}))}}class $ee extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{style:"w:val",color:"w:color",size:"w:sz",space:"w:space"})}}const $1={SINGLE:"single",NONE:"none"};class Uee extends Bp{constructor(t){super("w:pBdr"),t.top&&this.root.push(new us("w:top",t.top)),t.bottom&&this.root.push(new us("w:bottom",t.bottom)),t.left&&this.root.push(new us("w:left",t.left)),t.right&&this.root.push(new us("w:right",t.right))}}class Vee extends Pe{constructor(){super("w:pBdr");const t=new us("w:bottom",{color:"auto",space:1,style:$1.SINGLE,size:6});this.root.push(t)}}class Hee extends Pe{constructor({start:t,end:r,left:a,right:n,hanging:i,firstLine:o}){super("w:ind"),this.root.push(new Fp({start:{key:"w:start",value:t===void 0?void 0:Oo(t)},end:{key:"w:end",value:r===void 0?void 0:Oo(r)},left:{key:"w:left",value:a===void 0?void 0:Oo(a)},right:{key:"w:right",value:n===void 0?void 0:Oo(n)},hanging:{key:"w:hanging",value:i===void 0?void 0:Wa(i)},firstLine:{key:"w:firstLine",value:o===void 0?void 0:Wa(o)}}))}}let qee=class extends Pe{constructor(){super("w:br")}};const U1={BEGIN:"begin",END:"end",SEPARATE:"separate"};class V1 extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{type:"w:fldCharType",dirty:"w:dirty"})}}class ff extends Pe{constructor(t){super("w:fldChar"),this.root.push(new V1({type:U1.BEGIN,dirty:t}))}}class pf extends Pe{constructor(t){super("w:fldChar"),this.root.push(new V1({type:U1.SEPARATE,dirty:t}))}}class gf extends Pe{constructor(t){super("w:fldChar"),this.root.push(new V1({type:U1.END,dirty:t}))}}const Td={DEFAULT:"default",PRESERVE:"preserve"};class Ed extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{space:"xml:space"})}}class Wee extends Pe{constructor(){super("w:instrText"),this.root.push(new Ed({space:Td.PRESERVE})),this.root.push("PAGE")}}class Yee extends Pe{constructor(){super("w:instrText"),this.root.push(new Ed({space:Td.PRESERVE})),this.root.push("NUMPAGES")}}class Gee extends Pe{constructor(){super("w:instrText"),this.root.push(new Ed({space:Td.PRESERVE})),this.root.push("SECTIONPAGES")}}class Kee extends Pe{constructor(){super("w:instrText"),this.root.push(new Ed({space:Td.PRESERVE})),this.root.push("SECTION")}}class Xee extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{fill:"w:fill",color:"w:color",type:"w:val"})}}class L8 extends Pe{constructor({fill:t,color:r,type:a}){super("w:shd"),this.root.push(new Xee({fill:t===void 0?void 0:Cd(t),color:r===void 0?void 0:Cd(r),type:a}))}}class Zee extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{id:"w:id",author:"w:author",date:"w:date"})}}const Qee={DOT:"dot"};class Jee extends Pe{constructor(t){super("w:em"),this.root.push(new Ns({val:t}))}}class ete extends Jee{constructor(t=Qee.DOT){super(t)}}class tte extends Pe{constructor(t){super("w:spacing"),this.root.push(new Ns({val:Oo(t)}))}}class ste extends Pe{constructor(t){super("w:color"),this.root.push(new Ns({val:Cd(t)}))}}class rte extends Pe{constructor(t){super("w:highlight"),this.root.push(new Ns({val:t}))}}class ate extends Pe{constructor(t){super("w:highlightCs"),this.root.push(new Ns({val:t}))}}const nte=s=>new En({name:"w:lang",attributes:{value:{key:"w:val",value:s.value},eastAsia:{key:"w:eastAsia",value:s.eastAsia},bidirectional:{key:"w:bidi",value:s.bidirectional}}});class OC extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{ascii:"w:ascii",cs:"w:cs",eastAsia:"w:eastAsia",hAnsi:"w:hAnsi",hint:"w:hint"})}}class Nj extends Pe{constructor(t,r){if(super("w:rFonts"),typeof t=="string"){const a=t;this.root.push(new OC({ascii:a,cs:a,eastAsia:a,hAnsi:a,hint:r}))}else{const a=t;this.root.push(new OC(a))}}}let P8=class extends Pe{constructor(t){super("w:vertAlign"),this.root.push(new Ns({val:t}))}};class ite extends P8{constructor(){super("superscript")}}class lte extends P8{constructor(){super("subscript")}}const B8={SINGLE:"single"};class ote extends Pe{constructor(t=B8.SINGLE,r){super("w:u"),this.root.push(new Ns({val:t,color:r===void 0?void 0:Cd(r)}))}}class Qo extends Bp{constructor(t){var r,a;if(super("w:rPr"),!t)return;t.style&&this.push(new ud("w:rStyle",t.style)),t.font&&(typeof t.font=="string"?this.push(new Nj(t.font)):"name"in t.font?this.push(new Nj(t.font.name,t.font.hint)):this.push(new Nj(t.font))),t.bold!==void 0&&this.push(new Be("w:b",t.bold)),(t.boldComplexScript===void 0&&t.bold!==void 0||t.boldComplexScript)&&this.push(new Be("w:bCs",(r=t.boldComplexScript)!=null?r:t.bold)),t.italics!==void 0&&this.push(new Be("w:i",t.italics)),(t.italicsComplexScript===void 0&&t.italics!==void 0||t.italicsComplexScript)&&this.push(new Be("w:iCs",(a=t.italicsComplexScript)!=null?a:t.italics)),t.smallCaps!==void 0?this.push(new Be("w:smallCaps",t.smallCaps)):t.allCaps!==void 0&&this.push(new Be("w:caps",t.allCaps)),t.strike!==void 0&&this.push(new Be("w:strike",t.strike)),t.doubleStrike!==void 0&&this.push(new Be("w:dstrike",t.doubleStrike)),t.emboss!==void 0&&this.push(new Be("w:emboss",t.emboss)),t.imprint!==void 0&&this.push(new Be("w:imprint",t.imprint)),t.noProof!==void 0&&this.push(new Be("w:noProof",t.noProof)),t.snapToGrid!==void 0&&this.push(new Be("w:snapToGrid",t.snapToGrid)),t.vanish&&this.push(new Be("w:vanish",t.vanish)),t.color&&this.push(new ste(t.color)),t.characterSpacing&&this.push(new tte(t.characterSpacing)),t.scale!==void 0&&this.push(new Jh("w:w",t.scale)),t.kern&&this.push(new wj("w:kern",t.kern)),t.position&&this.push(new ud("w:position",t.position)),t.size!==void 0&&this.push(new wj("w:sz",t.size));const n=t.sizeComplexScript===void 0||t.sizeComplexScript===!0?t.size:t.sizeComplexScript;n&&this.push(new wj("w:szCs",n)),t.highlight&&this.push(new rte(t.highlight));const i=t.highlightComplexScript===void 0||t.highlightComplexScript===!0?t.highlight:t.highlightComplexScript;i&&this.push(new ate(i)),t.underline&&this.push(new ote(t.underline.type,t.underline.color)),t.effect&&this.push(new ud("w:effect",t.effect)),t.border&&this.push(new us("w:bdr",t.border)),t.shading&&this.push(new L8(t.shading)),t.subScript&&this.push(new lte),t.superScript&&this.push(new ite),t.rightToLeft!==void 0&&this.push(new Be("w:rtl",t.rightToLeft)),t.emphasisMark&&this.push(new ete(t.emphasisMark.type)),t.language&&this.push(nte(t.language)),t.specVanish&&this.push(new Be("w:specVanish",t.vanish)),t.math&&this.push(new Be("w:oMath",t.math)),t.revision&&this.push(new cte(t.revision))}push(t){this.root.push(t)}}class cte extends Pe{constructor(t){super("w:rPrChange"),this.root.push(new Zee({id:t.id,author:t.author,date:t.date})),this.addChildElement(new Qo(t))}}class LC extends Pe{constructor(t){var r;super("w:t"),typeof t=="string"?(this.root.push(new Ed({space:Td.PRESERVE})),this.root.push(t)):(this.root.push(new Ed({space:(r=t.space)!=null?r:Td.DEFAULT})),this.root.push(t.text))}}const bf={CURRENT:"CURRENT",TOTAL_PAGES:"TOTAL_PAGES",TOTAL_PAGES_IN_SECTION:"TOTAL_PAGES_IN_SECTION",CURRENT_SECTION:"SECTION"};class Up extends Pe{constructor(t){if(super("w:r"),Oe(this,"properties"),this.properties=new Qo(t),this.root.push(this.properties),t.break)for(let r=0;r<t.break;r++)this.root.push(new qee);if(t.children)for(const r of t.children){if(typeof r=="string"){switch(r){case bf.CURRENT:this.root.push(new ff),this.root.push(new Wee),this.root.push(new pf),this.root.push(new gf);break;case bf.TOTAL_PAGES:this.root.push(new ff),this.root.push(new Yee),this.root.push(new pf),this.root.push(new gf);break;case bf.TOTAL_PAGES_IN_SECTION:this.root.push(new ff),this.root.push(new Gee),this.root.push(new pf),this.root.push(new gf);break;case bf.CURRENT_SECTION:this.root.push(new ff),this.root.push(new Kee),this.root.push(new pf),this.root.push(new gf);break;default:this.root.push(new LC(r));break}continue}this.root.push(r)}else t.text!==void 0&&this.root.push(new LC(t.text))}}class At extends Up{constructor(t){super(typeof t=="string"?{text:t}:t)}}var _j={},Ut={},kj,PC;function qm(){if(PC)return kj;PC=1,kj=s;function s(t,r){if(!t)throw new Error(r||"Assertion failed")}return s.equal=function(r,a,n){if(r!=a)throw new Error(n||"Assertion failed: "+r+" != "+a)},kj}var BC;function Dn(){if(BC)return Ut;BC=1;var s=qm(),t=Pl();Ut.inherits=t;function r(I,V){return(I.charCodeAt(V)&64512)!==55296||V<0||V+1>=I.length?!1:(I.charCodeAt(V+1)&64512)===56320}function a(I,V){if(Array.isArray(I))return I.slice();if(!I)return[];var R=[];if(typeof I=="string")if(V){if(V==="hex")for(I=I.replace(/[^a-z0-9]+/ig,""),I.length%2!==0&&(I="0"+I),ee=0;ee<I.length;ee+=2)R.push(parseInt(I[ee]+I[ee+1],16))}else for(var H=0,ee=0;ee<I.length;ee++){var se=I.charCodeAt(ee);se<128?R[H++]=se:se<2048?(R[H++]=se>>6|192,R[H++]=se&63|128):r(I,ee)?(se=65536+((se&1023)<<10)+(I.charCodeAt(++ee)&1023),R[H++]=se>>18|240,R[H++]=se>>12&63|128,R[H++]=se>>6&63|128,R[H++]=se&63|128):(R[H++]=se>>12|224,R[H++]=se>>6&63|128,R[H++]=se&63|128)}else for(ee=0;ee<I.length;ee++)R[ee]=I[ee]|0;return R}Ut.toArray=a;function n(I){for(var V="",R=0;R<I.length;R++)V+=c(I[R].toString(16));return V}Ut.toHex=n;function i(I){var V=I>>>24|I>>>8&65280|I<<8&16711680|(I&255)<<24;return V>>>0}Ut.htonl=i;function o(I,V){for(var R="",H=0;H<I.length;H++){var ee=I[H];V==="little"&&(ee=i(ee)),R+=u(ee.toString(16))}return R}Ut.toHex32=o;function c(I){return I.length===1?"0"+I:I}Ut.zero2=c;function u(I){return I.length===7?"0"+I:I.length===6?"00"+I:I.length===5?"000"+I:I.length===4?"0000"+I:I.length===3?"00000"+I:I.length===2?"000000"+I:I.length===1?"0000000"+I:I}Ut.zero8=u;function h(I,V,R,H){var ee=R-V;s(ee%4===0);for(var se=new Array(ee/4),W=0,te=V;W<se.length;W++,te+=4){var J;H==="big"?J=I[te]<<24|I[te+1]<<16|I[te+2]<<8|I[te+3]:J=I[te+3]<<24|I[te+2]<<16|I[te+1]<<8|I[te],se[W]=J>>>0}return se}Ut.join32=h;function m(I,V){for(var R=new Array(I.length*4),H=0,ee=0;H<I.length;H++,ee+=4){var se=I[H];V==="big"?(R[ee]=se>>>24,R[ee+1]=se>>>16&255,R[ee+2]=se>>>8&255,R[ee+3]=se&255):(R[ee+3]=se>>>24,R[ee+2]=se>>>16&255,R[ee+1]=se>>>8&255,R[ee]=se&255)}return R}Ut.split32=m;function f(I,V){return I>>>V|I<<32-V}Ut.rotr32=f;function p(I,V){return I<<V|I>>>32-V}Ut.rotl32=p;function v(I,V){return I+V>>>0}Ut.sum32=v;function g(I,V,R){return I+V+R>>>0}Ut.sum32_3=g;function y(I,V,R,H){return I+V+R+H>>>0}Ut.sum32_4=y;function w(I,V,R,H,ee){return I+V+R+H+ee>>>0}Ut.sum32_5=w;function N(I,V,R,H){var ee=I[V],se=I[V+1],W=H+se>>>0,te=(W<H?1:0)+R+ee;I[V]=te>>>0,I[V+1]=W}Ut.sum64=N;function k(I,V,R,H){var ee=V+H>>>0,se=(ee<V?1:0)+I+R;return se>>>0}Ut.sum64_hi=k;function S(I,V,R,H){var ee=V+H;return ee>>>0}Ut.sum64_lo=S;function _(I,V,R,H,ee,se,W,te){var J=0,K=V;K=K+H>>>0,J+=K<V?1:0,K=K+se>>>0,J+=K<se?1:0,K=K+te>>>0,J+=K<te?1:0;var $=I+R+ee+W+J;return $>>>0}Ut.sum64_4_hi=_;function T(I,V,R,H,ee,se,W,te){var J=V+H+se+te;return J>>>0}Ut.sum64_4_lo=T;function E(I,V,R,H,ee,se,W,te,J,K){var $=0,ie=V;ie=ie+H>>>0,$+=ie<V?1:0,ie=ie+se>>>0,$+=ie<se?1:0,ie=ie+te>>>0,$+=ie<te?1:0,ie=ie+K>>>0,$+=ie<K?1:0;var ne=I+R+ee+W+J+$;return ne>>>0}Ut.sum64_5_hi=E;function z(I,V,R,H,ee,se,W,te,J,K){var $=V+H+se+te+K;return $>>>0}Ut.sum64_5_lo=z;function O(I,V,R){var H=V<<32-R|I>>>R;return H>>>0}Ut.rotr64_hi=O;function C(I,V,R){var H=I<<32-R|V>>>R;return H>>>0}Ut.rotr64_lo=C;function A(I,V,R){return I>>>R}Ut.shr64_hi=A;function X(I,V,R){var H=I<<32-R|V>>>R;return H>>>0}return Ut.shr64_lo=X,Ut}var Sj={},FC;function Wm(){if(FC)return Sj;FC=1;var s=Dn(),t=qm();function r(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return Sj.BlockHash=r,r.prototype.update=function(n,i){if(n=s.toArray(n,i),this.pending?this.pending=this.pending.concat(n):this.pending=n,this.pendingTotal+=n.length,this.pending.length>=this._delta8){n=this.pending;var o=n.length%this._delta8;this.pending=n.slice(n.length-o,n.length),this.pending.length===0&&(this.pending=null),n=s.join32(n,0,n.length-o,this.endian);for(var c=0;c<n.length;c+=this._delta32)this._update(n,c,c+this._delta32)}return this},r.prototype.digest=function(n){return this.update(this._pad()),t(this.pending===null),this._digest(n)},r.prototype._pad=function(){var n=this.pendingTotal,i=this._delta8,o=i-(n+this.padLength)%i,c=new Array(o+this.padLength);c[0]=128;for(var u=1;u<o;u++)c[u]=0;if(n<<=3,this.endian==="big"){for(var h=8;h<this.padLength;h++)c[u++]=0;c[u++]=0,c[u++]=0,c[u++]=0,c[u++]=0,c[u++]=n>>>24&255,c[u++]=n>>>16&255,c[u++]=n>>>8&255,c[u++]=n&255}else for(c[u++]=n&255,c[u++]=n>>>8&255,c[u++]=n>>>16&255,c[u++]=n>>>24&255,c[u++]=0,c[u++]=0,c[u++]=0,c[u++]=0,h=8;h<this.padLength;h++)c[u++]=0;return c},Sj}var wo={},un={},zC;function F8(){if(zC)return un;zC=1;var s=Dn(),t=s.rotr32;function r(m,f,p,v){if(m===0)return a(f,p,v);if(m===1||m===3)return i(f,p,v);if(m===2)return n(f,p,v)}un.ft_1=r;function a(m,f,p){return m&f^~m&p}un.ch32=a;function n(m,f,p){return m&f^m&p^f&p}un.maj32=n;function i(m,f,p){return m^f^p}un.p32=i;function o(m){return t(m,2)^t(m,13)^t(m,22)}un.s0_256=o;function c(m){return t(m,6)^t(m,11)^t(m,25)}un.s1_256=c;function u(m){return t(m,7)^t(m,18)^m>>>3}un.g0_256=u;function h(m){return t(m,17)^t(m,19)^m>>>10}return un.g1_256=h,un}var Cj,IC;function dte(){if(IC)return Cj;IC=1;var s=Dn(),t=Wm(),r=F8(),a=s.rotl32,n=s.sum32,i=s.sum32_5,o=r.ft_1,c=t.BlockHash,u=[1518500249,1859775393,2400959708,3395469782];function h(){if(!(this instanceof h))return new h;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return s.inherits(h,c),Cj=h,h.blockSize=512,h.outSize=160,h.hmacStrength=80,h.padLength=64,h.prototype._update=function(f,p){for(var v=this.W,g=0;g<16;g++)v[g]=f[p+g];for(;g<v.length;g++)v[g]=a(v[g-3]^v[g-8]^v[g-14]^v[g-16],1);var y=this.h[0],w=this.h[1],N=this.h[2],k=this.h[3],S=this.h[4];for(g=0;g<v.length;g++){var _=~~(g/20),T=i(a(y,5),o(_,w,N,k),S,v[g],u[_]);S=k,k=N,N=a(w,30),w=y,y=T}this.h[0]=n(this.h[0],y),this.h[1]=n(this.h[1],w),this.h[2]=n(this.h[2],N),this.h[3]=n(this.h[3],k),this.h[4]=n(this.h[4],S)},h.prototype._digest=function(f){return f==="hex"?s.toHex32(this.h,"big"):s.split32(this.h,"big")},Cj}var Tj,$C;function z8(){if($C)return Tj;$C=1;var s=Dn(),t=Wm(),r=F8(),a=qm(),n=s.sum32,i=s.sum32_4,o=s.sum32_5,c=r.ch32,u=r.maj32,h=r.s0_256,m=r.s1_256,f=r.g0_256,p=r.g1_256,v=t.BlockHash,g=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function y(){if(!(this instanceof y))return new y;v.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=g,this.W=new Array(64)}return s.inherits(y,v),Tj=y,y.blockSize=512,y.outSize=256,y.hmacStrength=192,y.padLength=64,y.prototype._update=function(N,k){for(var S=this.W,_=0;_<16;_++)S[_]=N[k+_];for(;_<S.length;_++)S[_]=i(p(S[_-2]),S[_-7],f(S[_-15]),S[_-16]);var T=this.h[0],E=this.h[1],z=this.h[2],O=this.h[3],C=this.h[4],A=this.h[5],X=this.h[6],I=this.h[7];for(a(this.k.length===S.length),_=0;_<S.length;_++){var V=o(I,m(C),c(C,A,X),this.k[_],S[_]),R=n(h(T),u(T,E,z));I=X,X=A,A=C,C=n(O,V),O=z,z=E,E=T,T=n(V,R)}this.h[0]=n(this.h[0],T),this.h[1]=n(this.h[1],E),this.h[2]=n(this.h[2],z),this.h[3]=n(this.h[3],O),this.h[4]=n(this.h[4],C),this.h[5]=n(this.h[5],A),this.h[6]=n(this.h[6],X),this.h[7]=n(this.h[7],I)},y.prototype._digest=function(N){return N==="hex"?s.toHex32(this.h,"big"):s.split32(this.h,"big")},Tj}var Ej,UC;function ute(){if(UC)return Ej;UC=1;var s=Dn(),t=z8();function r(){if(!(this instanceof r))return new r;t.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return s.inherits(r,t),Ej=r,r.blockSize=512,r.outSize=224,r.hmacStrength=192,r.padLength=64,r.prototype._digest=function(n){return n==="hex"?s.toHex32(this.h.slice(0,7),"big"):s.split32(this.h.slice(0,7),"big")},Ej}var Aj,VC;function I8(){if(VC)return Aj;VC=1;var s=Dn(),t=Wm(),r=qm(),a=s.rotr64_hi,n=s.rotr64_lo,i=s.shr64_hi,o=s.shr64_lo,c=s.sum64,u=s.sum64_hi,h=s.sum64_lo,m=s.sum64_4_hi,f=s.sum64_4_lo,p=s.sum64_5_hi,v=s.sum64_5_lo,g=t.BlockHash,y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function w(){if(!(this instanceof w))return new w;g.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=y,this.W=new Array(160)}s.inherits(w,g),Aj=w,w.blockSize=1024,w.outSize=512,w.hmacStrength=192,w.padLength=128,w.prototype._prepareBlock=function(R,H){for(var ee=this.W,se=0;se<32;se++)ee[se]=R[H+se];for(;se<ee.length;se+=2){var W=X(ee[se-4],ee[se-3]),te=I(ee[se-4],ee[se-3]),J=ee[se-14],K=ee[se-13],$=C(ee[se-30],ee[se-29]),ie=A(ee[se-30],ee[se-29]),ne=ee[se-32],oe=ee[se-31];ee[se]=m(W,te,J,K,$,ie,ne,oe),ee[se+1]=f(W,te,J,K,$,ie,ne,oe)}},w.prototype._update=function(R,H){this._prepareBlock(R,H);var ee=this.W,se=this.h[0],W=this.h[1],te=this.h[2],J=this.h[3],K=this.h[4],$=this.h[5],ie=this.h[6],ne=this.h[7],oe=this.h[8],ce=this.h[9],U=this.h[10],F=this.h[11],Z=this.h[12],q=this.h[13],Q=this.h[14],le=this.h[15];r(this.k.length===ee.length);for(var me=0;me<ee.length;me+=2){var G=Q,ue=le,Y=z(oe,ce),L=O(oe,ce),M=N(oe,ce,U,F,Z),B=k(oe,ce,U,F,Z,q),ae=this.k[me],he=this.k[me+1],xe=ee[me],_e=ee[me+1],Te=p(G,ue,Y,L,M,B,ae,he,xe,_e),Ee=v(G,ue,Y,L,M,B,ae,he,xe,_e);G=T(se,W),ue=E(se,W),Y=S(se,W,te,J,K),L=_(se,W,te,J,K,$);var ze=u(G,ue,Y,L),Ie=h(G,ue,Y,L);Q=Z,le=q,Z=U,q=F,U=oe,F=ce,oe=u(ie,ne,Te,Ee),ce=h(ne,ne,Te,Ee),ie=K,ne=$,K=te,$=J,te=se,J=W,se=u(Te,Ee,ze,Ie),W=h(Te,Ee,ze,Ie)}c(this.h,0,se,W),c(this.h,2,te,J),c(this.h,4,K,$),c(this.h,6,ie,ne),c(this.h,8,oe,ce),c(this.h,10,U,F),c(this.h,12,Z,q),c(this.h,14,Q,le)},w.prototype._digest=function(R){return R==="hex"?s.toHex32(this.h,"big"):s.split32(this.h,"big")};function N(V,R,H,ee,se){var W=V&H^~V&se;return W<0&&(W+=4294967296),W}function k(V,R,H,ee,se,W){var te=R&ee^~R&W;return te<0&&(te+=4294967296),te}function S(V,R,H,ee,se){var W=V&H^V&se^H&se;return W<0&&(W+=4294967296),W}function _(V,R,H,ee,se,W){var te=R&ee^R&W^ee&W;return te<0&&(te+=4294967296),te}function T(V,R){var H=a(V,R,28),ee=a(R,V,2),se=a(R,V,7),W=H^ee^se;return W<0&&(W+=4294967296),W}function E(V,R){var H=n(V,R,28),ee=n(R,V,2),se=n(R,V,7),W=H^ee^se;return W<0&&(W+=4294967296),W}function z(V,R){var H=a(V,R,14),ee=a(V,R,18),se=a(R,V,9),W=H^ee^se;return W<0&&(W+=4294967296),W}function O(V,R){var H=n(V,R,14),ee=n(V,R,18),se=n(R,V,9),W=H^ee^se;return W<0&&(W+=4294967296),W}function C(V,R){var H=a(V,R,1),ee=a(V,R,8),se=i(V,R,7),W=H^ee^se;return W<0&&(W+=4294967296),W}function A(V,R){var H=n(V,R,1),ee=n(V,R,8),se=o(V,R,7),W=H^ee^se;return W<0&&(W+=4294967296),W}function X(V,R){var H=a(V,R,19),ee=a(R,V,29),se=i(V,R,6),W=H^ee^se;return W<0&&(W+=4294967296),W}function I(V,R){var H=n(V,R,19),ee=n(R,V,29),se=o(V,R,6),W=H^ee^se;return W<0&&(W+=4294967296),W}return Aj}var Dj,HC;function hte(){if(HC)return Dj;HC=1;var s=Dn(),t=I8();function r(){if(!(this instanceof r))return new r;t.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return s.inherits(r,t),Dj=r,r.blockSize=1024,r.outSize=384,r.hmacStrength=192,r.padLength=128,r.prototype._digest=function(n){return n==="hex"?s.toHex32(this.h.slice(0,12),"big"):s.split32(this.h.slice(0,12),"big")},Dj}var qC;function mte(){return qC||(qC=1,wo.sha1=dte(),wo.sha224=ute(),wo.sha256=z8(),wo.sha384=hte(),wo.sha512=I8()),wo}var Rj={},WC;function xte(){if(WC)return Rj;WC=1;var s=Dn(),t=Wm(),r=s.rotl32,a=s.sum32,n=s.sum32_3,i=s.sum32_4,o=t.BlockHash;function c(){if(!(this instanceof c))return new c;o.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}s.inherits(c,o),Rj.ripemd160=c,c.blockSize=512,c.outSize=160,c.hmacStrength=192,c.padLength=64,c.prototype._update=function(w,N){for(var k=this.h[0],S=this.h[1],_=this.h[2],T=this.h[3],E=this.h[4],z=k,O=S,C=_,A=T,X=E,I=0;I<80;I++){var V=a(r(i(k,u(I,S,_,T),w[f[I]+N],h(I)),v[I]),E);k=E,E=T,T=r(_,10),_=S,S=V,V=a(r(i(z,u(79-I,O,C,A),w[p[I]+N],m(I)),g[I]),X),z=X,X=A,A=r(C,10),C=O,O=V}V=n(this.h[1],_,A),this.h[1]=n(this.h[2],T,X),this.h[2]=n(this.h[3],E,z),this.h[3]=n(this.h[4],k,O),this.h[4]=n(this.h[0],S,C),this.h[0]=V},c.prototype._digest=function(w){return w==="hex"?s.toHex32(this.h,"little"):s.split32(this.h,"little")};function u(y,w,N,k){return y<=15?w^N^k:y<=31?w&N|~w&k:y<=47?(w|~N)^k:y<=63?w&k|N&~k:w^(N|~k)}function h(y){return y<=15?0:y<=31?1518500249:y<=47?1859775393:y<=63?2400959708:2840853838}function m(y){return y<=15?1352829926:y<=31?1548603684:y<=47?1836072691:y<=63?2053994217:0}var f=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],p=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],v=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],g=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return Rj}var Mj,YC;function fte(){if(YC)return Mj;YC=1;var s=Dn(),t=qm();function r(a,n,i){if(!(this instanceof r))return new r(a,n,i);this.Hash=a,this.blockSize=a.blockSize/8,this.outSize=a.outSize/8,this.inner=null,this.outer=null,this._init(s.toArray(n,i))}return Mj=r,r.prototype._init=function(n){n.length>this.blockSize&&(n=new this.Hash().update(n).digest()),t(n.length<=this.blockSize);for(var i=n.length;i<this.blockSize;i++)n.push(0);for(i=0;i<n.length;i++)n[i]^=54;for(this.inner=new this.Hash().update(n),i=0;i<n.length;i++)n[i]^=106;this.outer=new this.Hash().update(n)},r.prototype.update=function(n,i){return this.inner.update(n,i),this},r.prototype.digest=function(n){return this.outer.update(this.inner.digest()),this.outer.digest(n)},Mj}var GC;function pte(){return GC||(GC=1,(function(s){var t=s;t.utils=Dn(),t.common=Wm(),t.sha=mte(),t.ripemd=xte(),t.hmac=fte(),t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160})(_j)),_j}pte();let gte="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",bte=(s,t=21)=>(r=t)=>{let a="",n=r|0;for(;n--;)a+=s[Math.random()*s.length|0];return a},yte=(s=21)=>{let t="",r=s|0;for(;r--;)t+=gte[Math.random()*64|0];return t};const Va=s=>Math.floor(s*72*20),H1=(s=0)=>{let t=s;return()=>++t},vte=()=>H1(),jte=()=>H1(1),wte=()=>H1(),Nte=()=>yte().toLowerCase(),Sh=s=>bte("1234567890abcdef",s)(),_te=()=>`${Sh(8)}-${Sh(4)}-${Sh(4)}-${Sh(4)}-${Sh(12)}`;class kte extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{xmlns:"xmlns"})}}class Ste extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{id:"Id",type:"Type",target:"Target",targetMode:"TargetMode"})}}const Cte={EXTERNAL:"External"};class Tte extends Pe{constructor(t,r,a,n){super("Relationship"),this.root.push(new Ste({id:t,type:r,target:a,targetMode:n}))}}class Jo extends Pe{constructor(){super("Relationships"),this.root.push(new kte({xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}))}createRelationship(t,r,a,n){const i=new Tte(`rId${t}`,r,a,n);return this.root.push(i),i}get RelationshipCount(){return this.root.length-1}}class Ete extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{id:"w:id",initials:"w:initials",author:"w:author",date:"w:date"})}}class Ate extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{"xmlns:cx":"xmlns:cx","xmlns:cx1":"xmlns:cx1","xmlns:cx2":"xmlns:cx2","xmlns:cx3":"xmlns:cx3","xmlns:cx4":"xmlns:cx4","xmlns:cx5":"xmlns:cx5","xmlns:cx6":"xmlns:cx6","xmlns:cx7":"xmlns:cx7","xmlns:cx8":"xmlns:cx8","xmlns:mc":"xmlns:mc","xmlns:aink":"xmlns:aink","xmlns:am3d":"xmlns:am3d","xmlns:o":"xmlns:o","xmlns:r":"xmlns:r","xmlns:m":"xmlns:m","xmlns:v":"xmlns:v","xmlns:wp14":"xmlns:wp14","xmlns:wp":"xmlns:wp","xmlns:w10":"xmlns:w10","xmlns:w":"xmlns:w","xmlns:w14":"xmlns:w14","xmlns:w15":"xmlns:w15","xmlns:w16cex":"xmlns:w16cex","xmlns:w16cid":"xmlns:w16cid","xmlns:w16":"xmlns:w16","xmlns:w16sdtdh":"xmlns:w16sdtdh","xmlns:w16se":"xmlns:w16se","xmlns:wpg":"xmlns:wpg","xmlns:wpi":"xmlns:wpi","xmlns:wne":"xmlns:wne","xmlns:wps":"xmlns:wps"})}}class Dte extends Pe{constructor({id:t,initials:r,author:a,date:n=new Date,children:i}){super("w:comment"),this.root.push(new Ete({id:t,initials:r,author:a,date:n.toISOString()}));for(const o of i)this.root.push(o)}}class Rte extends Pe{constructor({children:t}){super("w:comments"),Oe(this,"relationships"),this.root.push(new Ate({"xmlns:cx":"http://schemas.microsoft.com/office/drawing/2014/chartex","xmlns:cx1":"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex","xmlns:cx2":"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex","xmlns:cx3":"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex","xmlns:cx4":"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex","xmlns:cx5":"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex","xmlns:cx6":"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex","xmlns:cx7":"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex","xmlns:cx8":"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:aink":"http://schemas.microsoft.com/office/drawing/2016/ink","xmlns:am3d":"http://schemas.microsoft.com/office/drawing/2017/model3d","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:m":"http://schemas.openxmlformats.org/officeDocument/2006/math","xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:wp14":"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing","xmlns:wp":"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing","xmlns:w10":"urn:schemas-microsoft-com:office:word","xmlns:w":"http://schemas.openxmlformats.org/wordprocessingml/2006/main","xmlns:w14":"http://schemas.microsoft.com/office/word/2010/wordml","xmlns:w15":"http://schemas.microsoft.com/office/word/2012/wordml","xmlns:w16cex":"http://schemas.microsoft.com/office/word/2018/wordml/cex","xmlns:w16cid":"http://schemas.microsoft.com/office/word/2016/wordml/cid","xmlns:w16":"http://schemas.microsoft.com/office/word/2018/wordml","xmlns:w16sdtdh":"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash","xmlns:w16se":"http://schemas.microsoft.com/office/word/2015/wordml/symex","xmlns:wpg":"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup","xmlns:wpi":"http://schemas.microsoft.com/office/word/2010/wordprocessingInk","xmlns:wne":"http://schemas.microsoft.com/office/word/2006/wordml","xmlns:wps":"http://schemas.microsoft.com/office/word/2010/wordprocessingShape"}));for(const r of t)this.root.push(new Dte(r));this.relationships=new Jo}get Relationships(){return this.relationships}}class Mte extends Pe{constructor(){super("w:pageBreakBefore")}}const Xw={AUTO:"auto"};class Ote extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{after:"w:after",before:"w:before",line:"w:line",lineRule:"w:lineRule",beforeAutoSpacing:"w:beforeAutospacing",afterAutoSpacing:"w:afterAutospacing"})}}class Lte extends Pe{constructor(t){super("w:spacing"),this.root.push(new Ote(t))}}const wl={HEADING_1:"Heading1",HEADING_2:"Heading2",HEADING_3:"Heading3",HEADING_4:"Heading4",HEADING_5:"Heading5",HEADING_6:"Heading6",TITLE:"Title"};let yf=class extends Pe{constructor(t){super("w:pStyle"),this.root.push(new Ns({val:t}))}};class Pte extends Pe{constructor(t){super("w:tabs");for(const r of t)this.root.push(new Fte(r))}}const KC={LEFT:"left",RIGHT:"right"};class Bte extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{val:"w:val",pos:"w:pos",leader:"w:leader"})}}class Fte extends Pe{constructor({type:t,position:r,leader:a}){super("w:tab"),this.root.push(new Bte({val:t,pos:r,leader:a}))}}class Oj extends Pe{constructor(t,r){super("w:numPr"),this.root.push(new zte(r)),this.root.push(new Ite(t))}}class zte extends Pe{constructor(t){if(super("w:ilvl"),t>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new Ns({val:t}))}}class Ite extends Pe{constructor(t){super("w:numId"),this.root.push(new Ns({val:typeof t=="string"?`{${t}}`:t}))}}class $te extends Pe{constructor(){super(...arguments),Oe(this,"fileChild",Symbol())}}class Ute extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{id:"r:id",history:"w:history",anchor:"w:anchor"})}}class Vte extends Pe{constructor(t,r,a){super("w:hyperlink"),Oe(this,"linkId"),this.linkId=r;const n={history:1,anchor:a||void 0,id:a?void 0:`rId${this.linkId}`},i=new Ute(n);this.root.push(i),t.forEach(o=>{this.root.push(o)})}}class Hte extends Pe{constructor(t){super("w:externalHyperlink"),this.options=t}}class qte extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{id:"w:id",name:"w:name"})}}class Wte extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{id:"w:id"})}}class Yte{constructor(t){Oe(this,"bookmarkUniqueNumericId",wte()),Oe(this,"start"),Oe(this,"children"),Oe(this,"end");const r=this.bookmarkUniqueNumericId();this.start=new Gte(t.id,r),this.children=t.children,this.end=new Kte(r)}}class Gte extends Pe{constructor(t,r){super("w:bookmarkStart");const a=new qte({name:t,id:r});this.root.push(a)}}class Kte extends Pe{constructor(t){super("w:bookmarkEnd");const r=new Wte({id:t});this.root.push(r)}}class Xte extends Pe{constructor(t){super("w:outlineLvl"),this.level=t,this.root.push(new Ns({val:t}))}}const Zte={TOP:"top",CENTER:"center",BOTTOM:"bottom"};kd(kt({},Zte),{BOTH:"both"});class Qte extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{verticalAlign:"w:val"})}}class Jte extends Pe{constructor(t){super("w:vAlign"),this.root.push(new Qte({verticalAlign:t}))}}class ese extends Pe{constructor({space:t,count:r,separate:a,equalWidth:n,children:i}){super("w:cols"),this.root.push(new Fp({space:{key:"w:space",value:t===void 0?void 0:Wa(t)},count:{key:"w:num",value:r===void 0?void 0:Wr(r)},separate:{key:"w:sep",value:a},equalWidth:{key:"w:equalWidth",value:n}})),!n&&i&&i.forEach(o=>this.addChildElement(o))}}const tse=({type:s,linePitch:t,charSpace:r})=>new En({name:"w:docGrid",attributes:{type:{key:"w:type",value:s},linePitch:{key:"w:linePitch",value:Wr(t)},charSpace:{key:"w:charSpace",value:r?Wr(r):void 0}}}),hd={DEFAULT:"default",FIRST:"first",EVEN:"even"};class sse extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{type:"w:type",id:"r:id"})}}const XC={HEADER:"w:headerReference",FOOTER:"w:footerReference"};class Lj extends Pe{constructor(t,r){super(t),this.root.push(new sse({type:r.type||hd.DEFAULT,id:`rId${r.id}`}))}}const rse=({countBy:s,start:t,restart:r,distance:a})=>new En({name:"w:lnNumType",attributes:{countBy:{key:"w:countBy",value:s===void 0?void 0:Wr(s)},start:{key:"w:start",value:t===void 0?void 0:Wr(t)},restart:{key:"w:restart",value:r},distance:{key:"w:distance",value:a===void 0?void 0:Wa(a)}}});class ZC extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{display:"w:display",offsetFrom:"w:offsetFrom",zOrder:"w:zOrder"})}}class ase extends Bp{constructor(t){if(super("w:pgBorders"),!t)return this;t.pageBorders?this.root.push(new ZC({display:t.pageBorders.display,offsetFrom:t.pageBorders.offsetFrom,zOrder:t.pageBorders.zOrder})):this.root.push(new ZC({})),t.pageBorderTop&&this.root.push(new us("w:top",t.pageBorderTop)),t.pageBorderLeft&&this.root.push(new us("w:left",t.pageBorderLeft)),t.pageBorderBottom&&this.root.push(new us("w:bottom",t.pageBorderBottom)),t.pageBorderRight&&this.root.push(new us("w:right",t.pageBorderRight))}}class nse extends Pe{constructor(t,r,a,n,i,o,c){super("w:pgMar"),this.root.push(new Fp({top:{key:"w:top",value:Oo(t)},right:{key:"w:right",value:Wa(r)},bottom:{key:"w:bottom",value:Oo(a)},left:{key:"w:left",value:Wa(n)},header:{key:"w:header",value:Wa(i)},footer:{key:"w:footer",value:Wa(o)},gutter:{key:"w:gutter",value:Wa(c)}}))}}class ise extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{start:"w:start",formatType:"w:fmt",separator:"w:chapSep"})}}class lse extends Pe{constructor({start:t,formatType:r,separator:a}){super("w:pgNumType"),this.root.push(new ise({start:t===void 0?void 0:Wr(t),formatType:r,separator:a}))}}const Zw={PORTRAIT:"portrait",LANDSCAPE:"landscape"},ose=({width:s,height:t,orientation:r,code:a})=>{const n=Wa(s),i=Wa(t);return new En({name:"w:pgSz",attributes:{width:{key:"w:w",value:r===Zw.LANDSCAPE?i:n},height:{key:"w:h",value:r===Zw.LANDSCAPE?n:i},orientation:{key:"w:orient",value:r},code:{key:"w:code",value:a}}})};class cse extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{val:"w:val"})}}class dse extends Pe{constructor(t){super("w:textDirection"),this.root.push(new cse({val:t}))}}class use extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{val:"w:val"})}}class hse extends Pe{constructor(t){super("w:type"),this.root.push(new use({val:t}))}}const No={TOP:1440,RIGHT:1440,BOTTOM:1440,LEFT:1440,HEADER:708,FOOTER:708,GUTTER:0},Pj={WIDTH:11906,HEIGHT:16838,ORIENTATION:Zw.PORTRAIT};class mse extends Pe{constructor({page:{size:{width:t=Pj.WIDTH,height:r=Pj.HEIGHT,orientation:a=Pj.ORIENTATION}={},margin:{top:n=No.TOP,right:i=No.RIGHT,bottom:o=No.BOTTOM,left:c=No.LEFT,header:u=No.HEADER,footer:h=No.FOOTER,gutter:m=No.GUTTER}={},pageNumbers:f={},borders:p,textDirection:v}={},grid:{linePitch:g=360,charSpace:y,type:w}={},headerWrapperGroup:N={},footerWrapperGroup:k={},lineNumbers:S,titlePage:_,verticalAlign:T,column:E,type:z}={}){super("w:sectPr"),this.addHeaderFooterGroup(XC.HEADER,N),this.addHeaderFooterGroup(XC.FOOTER,k),z&&this.root.push(new hse(z)),this.root.push(ose({width:t,height:r,orientation:a})),this.root.push(new nse(n,i,o,c,u,h,m)),p&&this.root.push(new ase(p)),S&&this.root.push(rse(S)),this.root.push(new lse(f)),E&&this.root.push(new ese(E)),T&&this.root.push(new Jte(T)),_!==void 0&&this.root.push(new Be("w:titlePg",_)),v&&this.root.push(new dse(v)),this.root.push(tse({linePitch:g,charSpace:y,type:w}))}addHeaderFooterGroup(t,r){r.default&&this.root.push(new Lj(t,{type:hd.DEFAULT,id:r.default.View.ReferenceId})),r.first&&this.root.push(new Lj(t,{type:hd.FIRST,id:r.first.View.ReferenceId})),r.even&&this.root.push(new Lj(t,{type:hd.EVEN,id:r.even.View.ReferenceId}))}}class xse extends Pe{constructor(){super("w:body"),Oe(this,"sections",[])}addSection(t){const r=this.sections.pop();this.root.push(this.createSectionParagraph(r)),this.sections.push(new mse(t))}prepForXml(t){return this.sections.length===1&&(this.root.splice(0,1),this.root.push(this.sections.pop())),super.prepForXml(t)}push(t){this.root.push(t)}createSectionParagraph(t){const r=new gt({}),a=new Ad({});return a.push(t),r.addChildElement(a),r}}const QC={wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance",cx:"http://schemas.microsoft.com/office/drawing/2014/chartex",cx1:"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex",cx2:"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex",cx3:"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex",cx4:"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex",cx5:"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex",cx6:"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex",cx7:"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex",cx8:"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex",aink:"http://schemas.microsoft.com/office/drawing/2016/ink",am3d:"http://schemas.microsoft.com/office/drawing/2017/model3d",w16cex:"http://schemas.microsoft.com/office/word/2018/wordml/cex",w16cid:"http://schemas.microsoft.com/office/word/2016/wordml/cid",w16:"http://schemas.microsoft.com/office/word/2018/wordml",w16sdtdh:"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash",w16se:"http://schemas.microsoft.com/office/word/2015/wordml/symex"};class Vp extends rt{constructor(t,r){super(kt({Ignorable:r},Object.fromEntries(t.map(a=>[a,QC[a]])))),Oe(this,"xmlKeys",kt({Ignorable:"mc:Ignorable"},Object.fromEntries(Object.keys(QC).map(a=>[a,`xmlns:${a}`]))))}}class fse extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{color:"w:color",themeColor:"w:themeColor",themeShade:"w:themeShade",themeTint:"w:themeTint"})}}class pse extends Pe{constructor(t){super("w:background"),this.root.push(new fse({color:t.color===void 0?void 0:Cd(t.color),themeColor:t.themeColor,themeShade:t.themeShade===void 0?void 0:MC(t.themeShade),themeTint:t.themeTint===void 0?void 0:MC(t.themeTint)}))}}class gse extends Pe{constructor(t){super("w:document"),Oe(this,"body"),this.root.push(new Vp(["wpc","mc","o","r","m","v","wp14","wp","w10","w","w14","w15","wpg","wpi","wne","wps","cx","cx1","cx2","cx3","cx4","cx5","cx6","cx7","cx8","aink","am3d","w16cex","w16cid","w16","w16sdtdh","w16se"],"w14 w15 wp14")),this.body=new xse,t.background&&this.root.push(new pse(t.background)),this.root.push(this.body)}add(t){return this.body.push(t),this}get Body(){return this.body}}class $8{constructor(t){Oe(this,"document"),Oe(this,"relationships"),this.document=new gse(t),this.relationships=new Jo}get View(){return this.document}get Relationships(){return this.relationships}}class bse extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{val:"w:val"})}}class yse extends Pe{constructor(){super("w:wordWrap"),this.root.push(new bse({val:0}))}}const vse=s=>{var t,r;return new En({name:"w:framePr",attributes:{anchorLock:{key:"w:anchorLock",value:s.anchorLock},dropCap:{key:"w:dropCap",value:s.dropCap},width:{key:"w:w",value:s.width},height:{key:"w:h",value:s.height},x:{key:"w:x",value:s.position?s.position.x:void 0},y:{key:"w:y",value:s.position?s.position.y:void 0},anchorHorizontal:{key:"w:hAnchor",value:s.anchor.horizontal},anchorVertical:{key:"w:vAnchor",value:s.anchor.vertical},spaceHorizontal:{key:"w:hSpace",value:(t=s.space)==null?void 0:t.horizontal},spaceVertical:{key:"w:vSpace",value:(r=s.space)==null?void 0:r.vertical},rule:{key:"w:hRule",value:s.rule},alignmentX:{key:"w:xAlign",value:s.alignment?s.alignment.x:void 0},alignmentY:{key:"w:yAlign",value:s.alignment?s.alignment.y:void 0},lines:{key:"w:lines",value:s.lines},wrap:{key:"w:wrap",value:s.wrap}}})};class Ad extends Bp{constructor(t){var r,a;if(super("w:pPr"),Oe(this,"numberingReferences",[]),!t)return this;t.heading&&this.push(new yf(t.heading)),t.bullet&&this.push(new yf("ListParagraph")),t.numbering&&!t.style&&!t.heading&&(t.numbering.custom||this.push(new yf("ListParagraph"))),t.style&&this.push(new yf(t.style)),t.keepNext!==void 0&&this.push(new Be("w:keepNext",t.keepNext)),t.keepLines!==void 0&&this.push(new Be("w:keepLines",t.keepLines)),t.pageBreakBefore&&this.push(new Mte),t.frame&&this.push(vse(t.frame)),t.widowControl!==void 0&&this.push(new Be("w:widowControl",t.widowControl)),t.bullet&&this.push(new Oj(1,t.bullet.level)),t.numbering?(this.numberingReferences.push({reference:t.numbering.reference,instance:(r=t.numbering.instance)!=null?r:0}),this.push(new Oj(`${t.numbering.reference}-${(a=t.numbering.instance)!=null?a:0}`,t.numbering.level))):t.numbering===!1&&this.push(new Oj(0,0)),t.border&&this.push(new Uee(t.border)),t.thematicBreak&&this.push(new Vee),t.shading&&this.push(new L8(t.shading)),t.wordWrap&&this.push(new yse),t.overflowPunctuation&&this.push(new Be("w:overflowPunct",t.overflowPunctuation));const n=[...t.rightTabStop!==void 0?[{type:KC.RIGHT,position:t.rightTabStop}]:[],...t.tabStops?t.tabStops:[],...t.leftTabStop!==void 0?[{type:KC.LEFT,position:t.leftTabStop}]:[]];n.length>0&&this.push(new Pte(n)),t.bidirectional!==void 0&&this.push(new Be("w:bidi",t.bidirectional)),t.spacing&&this.push(new Lte(t.spacing)),t.indent&&this.push(new Hee(t.indent)),t.contextualSpacing!==void 0&&this.push(new Be("w:contextualSpacing",t.contextualSpacing)),t.alignment&&this.push(new Iee(t.alignment)),t.outlineLevel!==void 0&&this.push(new Xte(t.outlineLevel)),t.suppressLineNumbers!==void 0&&this.push(new Be("w:suppressLineNumbers",t.suppressLineNumbers)),t.autoSpaceEastAsianText!==void 0&&this.push(new Be("w:autoSpaceDN",t.autoSpaceEastAsianText)),t.run&&this.push(new Qo(t.run))}push(t){this.root.push(t)}prepForXml(t){if(t.viewWrapper instanceof $8)for(const r of this.numberingReferences)t.file.Numbering.createConcreteNumberingInstance(r.reference,r.instance);return super.prepForXml(t)}}class gt extends $te{constructor(t){if(super("w:p"),Oe(this,"properties"),typeof t=="string")return this.properties=new Ad({}),this.root.push(this.properties),this.root.push(new At(t)),this;if(this.properties=new Ad(t),this.root.push(this.properties),t.text&&this.root.push(new At(t.text)),t.children)for(const r of t.children){if(r instanceof Yte){this.root.push(r.start);for(const a of r.children)this.root.push(a);this.root.push(r.end);continue}this.root.push(r)}}prepForXml(t){for(const r of this.root)if(r instanceof Hte){const a=this.root.indexOf(r),n=new Vte(r.options.children,Nte());t.viewWrapper.Relationships.createRelationship(n.linkId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",r.options.link,Cte.EXTERNAL),this.root[a]=n}return super.prepForXml(t)}addRunToFront(t){return this.root.splice(1,0,t),this}}const qc={style:$1.NONE,size:0,color:"auto"},Wc={style:$1.SINGLE,size:4,color:"auto"};class jse extends Pe{constructor(t){super("w:tblBorders"),t.top?this.root.push(new us("w:top",t.top)):this.root.push(new us("w:top",Wc)),t.left?this.root.push(new us("w:left",t.left)):this.root.push(new us("w:left",Wc)),t.bottom?this.root.push(new us("w:bottom",t.bottom)):this.root.push(new us("w:bottom",Wc)),t.right?this.root.push(new us("w:right",t.right)):this.root.push(new us("w:right",Wc)),t.insideHorizontal?this.root.push(new us("w:insideH",t.insideHorizontal)):this.root.push(new us("w:insideH",Wc)),t.insideVertical?this.root.push(new us("w:insideV",t.insideVertical)):this.root.push(new us("w:insideV",Wc))}}Oe(jse,"NONE",{top:qc,bottom:qc,left:qc,right:qc,insideHorizontal:qc,insideVertical:qc});class wse extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{xmlns:"xmlns",vt:"xmlns:vt"})}}class Nse extends Pe{constructor(){super("Properties"),this.root.push(new wse({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"}))}}class _se extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{xmlns:"xmlns"})}}class kse extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{contentType:"ContentType",extension:"Extension"})}}class ii extends Pe{constructor(t,r){super("Default"),this.root.push(new kse({contentType:t,extension:r}))}}class Sse extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{contentType:"ContentType",partName:"PartName"})}}class ya extends Pe{constructor(t,r){super("Override"),this.root.push(new Sse({contentType:t,partName:r}))}}class Cse extends Pe{constructor(){super("Types"),this.root.push(new _se({xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"})),this.root.push(new ii("image/png","png")),this.root.push(new ii("image/jpeg","jpeg")),this.root.push(new ii("image/jpeg","jpg")),this.root.push(new ii("image/bmp","bmp")),this.root.push(new ii("image/gif","gif")),this.root.push(new ii("image/svg+xml","svg")),this.root.push(new ii("application/vnd.openxmlformats-package.relationships+xml","rels")),this.root.push(new ii("application/xml","xml")),this.root.push(new ii("application/vnd.openxmlformats-officedocument.obfuscatedFont","odttf")),this.root.push(new ya("application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml","/word/document.xml")),this.root.push(new ya("application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml","/word/styles.xml")),this.root.push(new ya("application/vnd.openxmlformats-package.core-properties+xml","/docProps/core.xml")),this.root.push(new ya("application/vnd.openxmlformats-officedocument.custom-properties+xml","/docProps/custom.xml")),this.root.push(new ya("application/vnd.openxmlformats-officedocument.extended-properties+xml","/docProps/app.xml")),this.root.push(new ya("application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml","/word/numbering.xml")),this.root.push(new ya("application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml","/word/footnotes.xml")),this.root.push(new ya("application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml","/word/settings.xml")),this.root.push(new ya("application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml","/word/comments.xml")),this.root.push(new ya("application/vnd.openxmlformats-officedocument.wordprocessingml.fontTable+xml","/word/fontTable.xml"))}addFooter(t){this.root.push(new ya("application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml",`/word/footer${t}.xml`))}addHeader(t){this.root.push(new ya("application/vnd.openxmlformats-officedocument.wordprocessingml.header+xml",`/word/header${t}.xml`))}}class Tse extends Pe{constructor(t){super("cp:coreProperties"),this.root.push(new Vp(["cp","dc","dcterms","dcmitype","xsi"])),t.title&&this.root.push(new jo("dc:title",t.title)),t.subject&&this.root.push(new jo("dc:subject",t.subject)),t.creator&&this.root.push(new jo("dc:creator",t.creator)),t.keywords&&this.root.push(new jo("cp:keywords",t.keywords)),t.description&&this.root.push(new jo("dc:description",t.description)),t.lastModifiedBy&&this.root.push(new jo("cp:lastModifiedBy",t.lastModifiedBy)),t.revision&&this.root.push(new jo("cp:revision",String(t.revision))),this.root.push(new JC("dcterms:created")),this.root.push(new JC("dcterms:modified"))}}class Ese extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{type:"xsi:type"})}}class JC extends Pe{constructor(t){super(t),this.root.push(new Ese({type:"dcterms:W3CDTF"})),this.root.push(Fee(new Date))}}class Ase extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{xmlns:"xmlns",vt:"xmlns:vt"})}}class Dse extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{fmtid:"fmtid",pid:"pid",name:"name"})}}class Rse extends Pe{constructor(t,r){super("property"),this.root.push(new Dse({fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:t.toString(),name:r.name})),this.root.push(new Mse(r.value))}}class Mse extends Pe{constructor(t){super("vt:lpwstr"),this.root.push(t)}}class Ose extends Pe{constructor(t){super("Properties"),Oe(this,"nextId"),Oe(this,"properties",[]),this.root.push(new Ase({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"})),this.nextId=2;for(const r of t)this.addCustomProperty(r)}prepForXml(t){return this.properties.forEach(r=>this.root.push(r)),super.prepForXml(t)}addCustomProperty(t){this.properties.push(new Rse(this.nextId++,t))}}const vf=({id:s,fontKey:t,subsetted:r},a)=>new En({name:a,attributes:kt({id:{key:"r:id",value:s}},t?{fontKey:{key:"w:fontKey",value:`{${t}}`}}:{}),children:[...r?[new Be("w:subsetted",r)]:[]]}),Lse=({name:s,altName:t,panose1:r,charset:a,family:n,notTrueType:i,pitch:o,sig:c,embedRegular:u,embedBold:h,embedItalic:m,embedBoldItalic:f})=>new En({name:"w:font",attributes:{name:{key:"w:name",value:s}},children:[...t?[kh("w:altName",t)]:[],...r?[kh("w:panose1",r)]:[],...a?[kh("w:charset",a)]:[],kh("w:family",n),...i?[new Be("w:notTrueType",i)]:[],kh("w:pitch",o),...c?[new En({name:"w:sig",attributes:{usb0:{key:"w:usb0",value:c.usb0},usb1:{key:"w:usb1",value:c.usb1},usb2:{key:"w:usb2",value:c.usb2},usb3:{key:"w:usb3",value:c.usb3},csb0:{key:"w:csb0",value:c.csb0},csb1:{key:"w:csb1",value:c.csb1}}})]:[],...u?[vf(u,"w:embedRegular")]:[],...h?[vf(h,"w:embedBold")]:[],...m?[vf(m,"w:embedItalic")]:[],...f?[vf(f,"w:embedBoldItalic")]:[]]}),Pse=({name:s,index:t,fontKey:r,characterSet:a})=>Lse({name:s,sig:{usb0:"E0002AFF",usb1:"C000247B",usb2:"00000009",usb3:"00000000",csb0:"000001FF",csb1:"00000000"},charset:a,family:"auto",pitch:"variable",embedRegular:{fontKey:r,id:`rId${t}`}}),Bse=s=>new En({name:"w:fonts",attributes:{mc:{key:"xmlns:mc",value:"http://schemas.openxmlformats.org/markup-compatibility/2006"},r:{key:"xmlns:r",value:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"},w:{key:"xmlns:w",value:"http://schemas.openxmlformats.org/wordprocessingml/2006/main"},w14:{key:"xmlns:w14",value:"http://schemas.microsoft.com/office/word/2010/wordml"},w15:{key:"xmlns:w15",value:"http://schemas.microsoft.com/office/word/2012/wordml"},w16cex:{key:"xmlns:w16cex",value:"http://schemas.microsoft.com/office/word/2018/wordml/cex"},w16cid:{key:"xmlns:w16cid",value:"http://schemas.microsoft.com/office/word/2016/wordml/cid"},w16:{key:"xmlns:w16",value:"http://schemas.microsoft.com/office/word/2018/wordml"},w16sdtdh:{key:"xmlns:w16sdtdh",value:"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash"},w16se:{key:"xmlns:w16se",value:"http://schemas.microsoft.com/office/word/2015/wordml/symex"},Ignorable:{key:"mc:Ignorable",value:"w14 w15 w16se w16cid w16 w16cex w16sdtdh"}},children:s.map((t,r)=>Pse({name:t.name,index:r+1,fontKey:t.fontKey}))});class Fse{constructor(t){Oe(this,"fontTable"),Oe(this,"relationships"),Oe(this,"fontOptionsWithKey",[]),this.options=t,this.fontOptionsWithKey=t.map(r=>kd(kt({},r),{fontKey:_te()})),this.fontTable=Bse(this.fontOptionsWithKey),this.relationships=new Jo;for(let r=0;r<t.length;r++)this.relationships.createRelationship(r+1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/font",`fonts/${t[r].name}.odttf`)}get View(){return this.fontTable}get Relationships(){return this.relationships}}class zse extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type"})}}let Ise=class extends D8{constructor(t,r){super("w:ftr",r),Oe(this,"refId"),this.refId=t,r||this.root.push(new zse({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape"}))}get ReferenceId(){return this.refId}add(t){this.root.push(t)}};class $se{constructor(t,r,a){Oe(this,"footer"),Oe(this,"relationships"),this.media=t,this.footer=new Ise(r,a),this.relationships=new Jo}add(t){this.footer.add(t)}addChildElement(t){this.footer.addChildElement(t)}get View(){return this.footer}get Relationships(){return this.relationships}get Media(){return this.media}}class Use extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{type:"w:type",id:"w:id"})}}class Vse extends Pe{constructor(){super("w:footnoteRef")}}class Hse extends Up{constructor(){super({style:"FootnoteReference"}),this.root.push(new Vse)}}const eT={SEPERATOR:"separator",CONTINUATION_SEPERATOR:"continuationSeparator"};class Bj extends Pe{constructor(t){super("w:footnote"),this.root.push(new Use({type:t.type,id:t.id}));for(let r=0;r<t.children.length;r++){const a=t.children[r];r===0&&a.addRunToFront(new Hse),this.root.push(a)}}}class qse extends Pe{constructor(){super("w:continuationSeparator")}}class Wse extends Up{constructor(){super({}),this.root.push(new qse)}}class Yse extends Pe{constructor(){super("w:separator")}}class Gse extends Up{constructor(){super({}),this.root.push(new Yse)}}class Kse extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"})}}class Xse extends Pe{constructor(){super("w:footnotes"),this.root.push(new Kse({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"}));const t=new Bj({id:-1,type:eT.SEPERATOR,children:[new gt({spacing:{after:0,line:240,lineRule:Xw.AUTO},children:[new Gse]})]});this.root.push(t);const r=new Bj({id:0,type:eT.CONTINUATION_SEPERATOR,children:[new gt({spacing:{after:0,line:240,lineRule:Xw.AUTO},children:[new Wse]})]});this.root.push(r)}createFootNote(t,r){const a=new Bj({id:t,children:r});this.root.push(a)}}class Zse{constructor(){Oe(this,"footnotess"),Oe(this,"relationships"),this.footnotess=new Xse,this.relationships=new Jo}get View(){return this.footnotess}get Relationships(){return this.relationships}}class Qse extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type",cx:"xmlns:cx",cx1:"xmlns:cx1",cx2:"xmlns:cx2",cx3:"xmlns:cx3",cx4:"xmlns:cx4",cx5:"xmlns:cx5",cx6:"xmlns:cx6",cx7:"xmlns:cx7",cx8:"xmlns:cx8",w16cid:"xmlns:w16cid",w16se:"xmlns:w16se"})}}let Jse=class extends D8{constructor(t,r){super("w:hdr",r),Oe(this,"refId"),this.refId=t,r||this.root.push(new Qse({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",cx:"http://schemas.microsoft.com/office/drawing/2014/chartex",cx1:"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex",cx2:"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex",cx3:"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex",cx4:"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex",cx5:"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex",cx6:"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex",cx7:"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex",cx8:"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex",w16cid:"http://schemas.microsoft.com/office/word/2016/wordml/cid",w16se:"http://schemas.microsoft.com/office/word/2015/wordml/symex"}))}get ReferenceId(){return this.refId}add(t){this.root.push(t)}};class ere{constructor(t,r,a){Oe(this,"header"),Oe(this,"relationships"),this.media=t,this.header=new Jse(r,a),this.relationships=new Jo}add(t){return this.header.add(t),this}addChildElement(t){this.header.addChildElement(t)}get View(){return this.header}get Relationships(){return this.relationships}get Media(){return this.media}}class tre{constructor(){Oe(this,"map"),this.map=new Map}addImage(t,r){this.map.set(t,r)}get Array(){return Array.from(this.map.values())}}const li={BULLET:"bullet"};class sre extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{ilvl:"w:ilvl",tentative:"w15:tentative"})}}class rre extends Pe{constructor(t){super("w:numFmt"),this.root.push(new Ns({val:t}))}}class are extends Pe{constructor(t){super("w:lvlText"),this.root.push(new Ns({val:t}))}}class nre extends Pe{constructor(t){super("w:lvlJc"),this.root.push(new Ns({val:t}))}}class ire extends Pe{constructor(t){super("w:suff"),this.root.push(new Ns({val:t}))}}class lre extends Pe{constructor(){super("w:isLgl")}}class ore extends Pe{constructor({level:t,format:r,text:a,alignment:n=lr.START,start:i=1,style:o,suffix:c,isLegalNumberingStyle:u}){if(super("w:lvl"),Oe(this,"paragraphProperties"),Oe(this,"runProperties"),this.root.push(new Jh("w:start",Wr(i))),r&&this.root.push(new rre(r)),c&&this.root.push(new ire(c)),u&&this.root.push(new lre),a&&this.root.push(new are(a)),this.root.push(new nre(n)),this.paragraphProperties=new Ad(o&&o.paragraph),this.runProperties=new Qo(o&&o.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties),t>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new sre({ilvl:Wr(t),tentative:1}))}}class cre extends ore{}class dre extends Pe{constructor(t){super("w:multiLevelType"),this.root.push(new Ns({val:t}))}}class ure extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{abstractNumId:"w:abstractNumId",restartNumberingAfterBreak:"w15:restartNumberingAfterBreak"})}}class tT extends Pe{constructor(t,r){super("w:abstractNum"),Oe(this,"id"),this.root.push(new ure({abstractNumId:Wr(t),restartNumberingAfterBreak:0})),this.root.push(new dre("hybridMultilevel")),this.id=t;for(const a of r)this.root.push(new cre(a))}}class hre extends Pe{constructor(t){super("w:abstractNumId"),this.root.push(new Ns({val:t}))}}class mre extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{numId:"w:numId"})}}class sT extends Pe{constructor(t){if(super("w:num"),Oe(this,"numId"),Oe(this,"reference"),Oe(this,"instance"),this.numId=t.numId,this.reference=t.reference,this.instance=t.instance,this.root.push(new mre({numId:Wr(t.numId)})),this.root.push(new hre(Wr(t.abstractNumId))),t.overrideLevels&&t.overrideLevels.length)for(const r of t.overrideLevels)this.root.push(new fre(r.num,r.start))}}class xre extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{ilvl:"w:ilvl"})}}class fre extends Pe{constructor(t,r){super("w:lvlOverride"),this.root.push(new xre({ilvl:t})),r!==void 0&&this.root.push(new gre(r))}}class pre extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{val:"w:val"})}}class gre extends Pe{constructor(t){super("w:startOverride"),this.root.push(new pre({val:t}))}}class bre extends Pe{constructor(t){super("w:numbering"),Oe(this,"abstractNumberingMap",new Map),Oe(this,"concreteNumberingMap",new Map),Oe(this,"referenceConfigMap",new Map),Oe(this,"abstractNumUniqueNumericId",vte()),Oe(this,"concreteNumUniqueNumericId",jte()),this.root.push(new Vp(["wpc","mc","o","r","m","v","wp14","wp","w10","w","w14","w15","wpg","wpi","wne","wps"],"w14 w15 wp14"));const r=new tT(this.abstractNumUniqueNumericId(),[{level:0,format:li.BULLET,text:"",alignment:lr.LEFT,style:{paragraph:{indent:{left:Va(.5),hanging:Va(.25)}}}},{level:1,format:li.BULLET,text:"",alignment:lr.LEFT,style:{paragraph:{indent:{left:Va(1),hanging:Va(.25)}}}},{level:2,format:li.BULLET,text:"",alignment:lr.LEFT,style:{paragraph:{indent:{left:2160,hanging:Va(.25)}}}},{level:3,format:li.BULLET,text:"",alignment:lr.LEFT,style:{paragraph:{indent:{left:2880,hanging:Va(.25)}}}},{level:4,format:li.BULLET,text:"",alignment:lr.LEFT,style:{paragraph:{indent:{left:3600,hanging:Va(.25)}}}},{level:5,format:li.BULLET,text:"",alignment:lr.LEFT,style:{paragraph:{indent:{left:4320,hanging:Va(.25)}}}},{level:6,format:li.BULLET,text:"",alignment:lr.LEFT,style:{paragraph:{indent:{left:5040,hanging:Va(.25)}}}},{level:7,format:li.BULLET,text:"",alignment:lr.LEFT,style:{paragraph:{indent:{left:5760,hanging:Va(.25)}}}},{level:8,format:li.BULLET,text:"",alignment:lr.LEFT,style:{paragraph:{indent:{left:6480,hanging:Va(.25)}}}}]);this.concreteNumberingMap.set("default-bullet-numbering",new sT({numId:1,abstractNumId:r.id,reference:"default-bullet-numbering",instance:0,overrideLevels:[{num:0,start:1}]})),this.abstractNumberingMap.set("default-bullet-numbering",r);for(const a of t.config)this.abstractNumberingMap.set(a.reference,new tT(this.abstractNumUniqueNumericId(),a.levels)),this.referenceConfigMap.set(a.reference,a.levels)}prepForXml(t){for(const r of this.abstractNumberingMap.values())this.root.push(r);for(const r of this.concreteNumberingMap.values())this.root.push(r);return super.prepForXml(t)}createConcreteNumberingInstance(t,r){const a=this.abstractNumberingMap.get(t);if(!a)return;const n=`${t}-${r}`;if(this.concreteNumberingMap.has(n))return;const i=this.referenceConfigMap.get(t),o=i&&i[0].start,c={numId:this.concreteNumUniqueNumericId(),abstractNumId:a.id,reference:t,instance:r,overrideLevels:[o&&Number.isInteger(o)?{num:0,start:o}:{num:0,start:1}]};this.concreteNumberingMap.set(n,new sT(c))}get ConcreteNumbering(){return Array.from(this.concreteNumberingMap.values())}get ReferenceConfig(){return Array.from(this.referenceConfigMap.values())}}class yre extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{version:"w:val",name:"w:name",uri:"w:uri"})}}class vre extends Pe{constructor(t){super("w:compatSetting"),this.root.push(new yre({version:t,uri:"http://schemas.microsoft.com/office/word",name:"compatibilityMode"}))}}class jre extends Pe{constructor(t){super("w:compat"),t.version&&this.root.push(new vre(t.version)),t.useSingleBorderforContiguousCells&&this.root.push(new Be("w:useSingleBorderforContiguousCells",t.useSingleBorderforContiguousCells)),t.wordPerfectJustification&&this.root.push(new Be("w:wpJustification",t.wordPerfectJustification)),t.noTabStopForHangingIndent&&this.root.push(new Be("w:noTabHangInd",t.noTabStopForHangingIndent)),t.noLeading&&this.root.push(new Be("w:noLeading",t.noLeading)),t.spaceForUnderline&&this.root.push(new Be("w:spaceForUL",t.spaceForUnderline)),t.noColumnBalance&&this.root.push(new Be("w:noColumnBalance",t.noColumnBalance)),t.balanceSingleByteDoubleByteWidth&&this.root.push(new Be("w:balanceSingleByteDoubleByteWidth",t.balanceSingleByteDoubleByteWidth)),t.noExtraLineSpacing&&this.root.push(new Be("w:noExtraLineSpacing",t.noExtraLineSpacing)),t.doNotLeaveBackslashAlone&&this.root.push(new Be("w:doNotLeaveBackslashAlone",t.doNotLeaveBackslashAlone)),t.underlineTrailingSpaces&&this.root.push(new Be("w:ulTrailSpace",t.underlineTrailingSpaces)),t.doNotExpandShiftReturn&&this.root.push(new Be("w:doNotExpandShiftReturn",t.doNotExpandShiftReturn)),t.spacingInWholePoints&&this.root.push(new Be("w:spacingInWholePoints",t.spacingInWholePoints)),t.lineWrapLikeWord6&&this.root.push(new Be("w:lineWrapLikeWord6",t.lineWrapLikeWord6)),t.printBodyTextBeforeHeader&&this.root.push(new Be("w:printBodyTextBeforeHeader",t.printBodyTextBeforeHeader)),t.printColorsBlack&&this.root.push(new Be("w:printColBlack",t.printColorsBlack)),t.spaceWidth&&this.root.push(new Be("w:wpSpaceWidth",t.spaceWidth)),t.showBreaksInFrames&&this.root.push(new Be("w:showBreaksInFrames",t.showBreaksInFrames)),t.subFontBySize&&this.root.push(new Be("w:subFontBySize",t.subFontBySize)),t.suppressBottomSpacing&&this.root.push(new Be("w:suppressBottomSpacing",t.suppressBottomSpacing)),t.suppressTopSpacing&&this.root.push(new Be("w:suppressTopSpacing",t.suppressTopSpacing)),t.suppressSpacingAtTopOfPage&&this.root.push(new Be("w:suppressSpacingAtTopOfPage",t.suppressSpacingAtTopOfPage)),t.suppressTopSpacingWP&&this.root.push(new Be("w:suppressTopSpacingWP",t.suppressTopSpacingWP)),t.suppressSpBfAfterPgBrk&&this.root.push(new Be("w:suppressSpBfAfterPgBrk",t.suppressSpBfAfterPgBrk)),t.swapBordersFacingPages&&this.root.push(new Be("w:swapBordersFacingPages",t.swapBordersFacingPages)),t.convertMailMergeEsc&&this.root.push(new Be("w:convMailMergeEsc",t.convertMailMergeEsc)),t.truncateFontHeightsLikeWP6&&this.root.push(new Be("w:truncateFontHeightsLikeWP6",t.truncateFontHeightsLikeWP6)),t.macWordSmallCaps&&this.root.push(new Be("w:mwSmallCaps",t.macWordSmallCaps)),t.usePrinterMetrics&&this.root.push(new Be("w:usePrinterMetrics",t.usePrinterMetrics)),t.doNotSuppressParagraphBorders&&this.root.push(new Be("w:doNotSuppressParagraphBorders",t.doNotSuppressParagraphBorders)),t.wrapTrailSpaces&&this.root.push(new Be("w:wrapTrailSpaces",t.wrapTrailSpaces)),t.footnoteLayoutLikeWW8&&this.root.push(new Be("w:footnoteLayoutLikeWW8",t.footnoteLayoutLikeWW8)),t.shapeLayoutLikeWW8&&this.root.push(new Be("w:shapeLayoutLikeWW8",t.shapeLayoutLikeWW8)),t.alignTablesRowByRow&&this.root.push(new Be("w:alignTablesRowByRow",t.alignTablesRowByRow)),t.forgetLastTabAlignment&&this.root.push(new Be("w:forgetLastTabAlignment",t.forgetLastTabAlignment)),t.adjustLineHeightInTable&&this.root.push(new Be("w:adjustLineHeightInTable",t.adjustLineHeightInTable)),t.autoSpaceLikeWord95&&this.root.push(new Be("w:autoSpaceLikeWord95",t.autoSpaceLikeWord95)),t.noSpaceRaiseLower&&this.root.push(new Be("w:noSpaceRaiseLower",t.noSpaceRaiseLower)),t.doNotUseHTMLParagraphAutoSpacing&&this.root.push(new Be("w:doNotUseHTMLParagraphAutoSpacing",t.doNotUseHTMLParagraphAutoSpacing)),t.layoutRawTableWidth&&this.root.push(new Be("w:layoutRawTableWidth",t.layoutRawTableWidth)),t.layoutTableRowsApart&&this.root.push(new Be("w:layoutTableRowsApart",t.layoutTableRowsApart)),t.useWord97LineBreakRules&&this.root.push(new Be("w:useWord97LineBreakRules",t.useWord97LineBreakRules)),t.doNotBreakWrappedTables&&this.root.push(new Be("w:doNotBreakWrappedTables",t.doNotBreakWrappedTables)),t.doNotSnapToGridInCell&&this.root.push(new Be("w:doNotSnapToGridInCell",t.doNotSnapToGridInCell)),t.selectFieldWithFirstOrLastCharacter&&this.root.push(new Be("w:selectFldWithFirstOrLastChar",t.selectFieldWithFirstOrLastCharacter)),t.applyBreakingRules&&this.root.push(new Be("w:applyBreakingRules",t.applyBreakingRules)),t.doNotWrapTextWithPunctuation&&this.root.push(new Be("w:doNotWrapTextWithPunct",t.doNotWrapTextWithPunctuation)),t.doNotUseEastAsianBreakRules&&this.root.push(new Be("w:doNotUseEastAsianBreakRules",t.doNotUseEastAsianBreakRules)),t.useWord2002TableStyleRules&&this.root.push(new Be("w:useWord2002TableStyleRules",t.useWord2002TableStyleRules)),t.growAutofit&&this.root.push(new Be("w:growAutofit",t.growAutofit)),t.useFELayout&&this.root.push(new Be("w:useFELayout",t.useFELayout)),t.useNormalStyleForList&&this.root.push(new Be("w:useNormalStyleForList",t.useNormalStyleForList)),t.doNotUseIndentAsNumberingTabStop&&this.root.push(new Be("w:doNotUseIndentAsNumberingTabStop",t.doNotUseIndentAsNumberingTabStop)),t.useAlternateEastAsianLineBreakRules&&this.root.push(new Be("w:useAltKinsokuLineBreakRules",t.useAlternateEastAsianLineBreakRules)),t.allowSpaceOfSameStyleInTable&&this.root.push(new Be("w:allowSpaceOfSameStyleInTable",t.allowSpaceOfSameStyleInTable)),t.doNotSuppressIndentation&&this.root.push(new Be("w:doNotSuppressIndentation",t.doNotSuppressIndentation)),t.doNotAutofitConstrainedTables&&this.root.push(new Be("w:doNotAutofitConstrainedTables",t.doNotAutofitConstrainedTables)),t.autofitToFirstFixedWidthCell&&this.root.push(new Be("w:autofitToFirstFixedWidthCell",t.autofitToFirstFixedWidthCell)),t.underlineTabInNumberingList&&this.root.push(new Be("w:underlineTabInNumList",t.underlineTabInNumberingList)),t.displayHangulFixedWidth&&this.root.push(new Be("w:displayHangulFixedWidth",t.displayHangulFixedWidth)),t.splitPgBreakAndParaMark&&this.root.push(new Be("w:splitPgBreakAndParaMark",t.splitPgBreakAndParaMark)),t.doNotVerticallyAlignCellWithSp&&this.root.push(new Be("w:doNotVertAlignCellWithSp",t.doNotVerticallyAlignCellWithSp)),t.doNotBreakConstrainedForcedTable&&this.root.push(new Be("w:doNotBreakConstrainedForcedTable",t.doNotBreakConstrainedForcedTable)),t.ignoreVerticalAlignmentInTextboxes&&this.root.push(new Be("w:doNotVertAlignInTxbx",t.ignoreVerticalAlignmentInTextboxes)),t.useAnsiKerningPairs&&this.root.push(new Be("w:useAnsiKerningPairs",t.useAnsiKerningPairs)),t.cachedColumnBalance&&this.root.push(new Be("w:cachedColBalance",t.cachedColumnBalance))}}class wre extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"})}}class Nre extends Pe{constructor(t){var r,a,n,i,o,c,u,h;super("w:settings"),this.root.push(new wre({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"})),this.root.push(new Be("w:displayBackgroundShape",!0)),t.trackRevisions!==void 0&&this.root.push(new Be("w:trackRevisions",t.trackRevisions)),t.evenAndOddHeaders!==void 0&&this.root.push(new Be("w:evenAndOddHeaders",t.evenAndOddHeaders)),t.updateFields!==void 0&&this.root.push(new Be("w:updateFields",t.updateFields)),t.defaultTabStop!==void 0&&this.root.push(new Jh("w:defaultTabStop",t.defaultTabStop)),((r=t.hyphenation)==null?void 0:r.autoHyphenation)!==void 0&&this.root.push(new Be("w:autoHyphenation",t.hyphenation.autoHyphenation)),((a=t.hyphenation)==null?void 0:a.hyphenationZone)!==void 0&&this.root.push(new Jh("w:hyphenationZone",t.hyphenation.hyphenationZone)),((n=t.hyphenation)==null?void 0:n.consecutiveHyphenLimit)!==void 0&&this.root.push(new Jh("w:consecutiveHyphenLimit",t.hyphenation.consecutiveHyphenLimit)),((i=t.hyphenation)==null?void 0:i.doNotHyphenateCaps)!==void 0&&this.root.push(new Be("w:doNotHyphenateCaps",t.hyphenation.doNotHyphenateCaps)),this.root.push(new jre(kd(kt({},(o=t.compatibility)!=null?o:{}),{version:(h=(u=(c=t.compatibility)==null?void 0:c.version)!=null?u:t.compatibilityModeVersion)!=null?h:15})))}}class U8 extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{val:"w:val"})}}class _re extends Pe{constructor(t){super("w:name"),this.root.push(new U8({val:t}))}}class kre extends Pe{constructor(t){super("w:uiPriority"),this.root.push(new U8({val:Wr(t)}))}}class Sre extends rt{constructor(){super(...arguments),Oe(this,"xmlKeys",{type:"w:type",styleId:"w:styleId",default:"w:default",customStyle:"w:customStyle"})}}class V8 extends Pe{constructor(t,r){super("w:style"),this.root.push(new Sre(t)),r.name&&this.root.push(new _re(r.name)),r.basedOn&&this.root.push(new ud("w:basedOn",r.basedOn)),r.next&&this.root.push(new ud("w:next",r.next)),r.link&&this.root.push(new ud("w:link",r.link)),r.uiPriority!==void 0&&this.root.push(new kre(r.uiPriority)),r.semiHidden!==void 0&&this.root.push(new Be("w:semiHidden",r.semiHidden)),r.unhideWhenUsed!==void 0&&this.root.push(new Be("w:unhideWhenUsed",r.unhideWhenUsed)),r.quickFormat!==void 0&&this.root.push(new Be("w:qFormat",r.quickFormat))}}class Hp extends V8{constructor(t){super({type:"paragraph",styleId:t.id},t),Oe(this,"paragraphProperties"),Oe(this,"runProperties"),this.paragraphProperties=new Ad(t.paragraph),this.runProperties=new Qo(t.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties)}}class qp extends V8{constructor(t){super({type:"character",styleId:t.id},kt({uiPriority:99,unhideWhenUsed:!0},t)),Oe(this,"runProperties"),this.runProperties=new Qo(t.run),this.root.push(this.runProperties)}}class Bl extends Hp{constructor(t){super(kt({basedOn:"Normal",next:"Normal",quickFormat:!0},t))}}class Cre extends Bl{constructor(t){super(kt({id:"Title",name:"Title"},t))}}class Tre extends Bl{constructor(t){super(kt({id:"Heading1",name:"Heading 1"},t))}}class Ere extends Bl{constructor(t){super(kt({id:"Heading2",name:"Heading 2"},t))}}class Are extends Bl{constructor(t){super(kt({id:"Heading3",name:"Heading 3"},t))}}class Dre extends Bl{constructor(t){super(kt({id:"Heading4",name:"Heading 4"},t))}}class Rre extends Bl{constructor(t){super(kt({id:"Heading5",name:"Heading 5"},t))}}class Mre extends Bl{constructor(t){super(kt({id:"Heading6",name:"Heading 6"},t))}}class Ore extends Bl{constructor(t){super(kt({id:"Strong",name:"Strong"},t))}}class Lre extends Hp{constructor(t){super(kt({id:"ListParagraph",name:"List Paragraph",basedOn:"Normal",quickFormat:!0},t))}}class Pre extends Hp{constructor(t){super(kt({id:"FootnoteText",name:"footnote text",link:"FootnoteTextChar",basedOn:"Normal",uiPriority:99,semiHidden:!0,unhideWhenUsed:!0,paragraph:{spacing:{after:0,line:240,lineRule:Xw.AUTO}},run:{size:20}},t))}}class Bre extends qp{constructor(t){super(kt({id:"FootnoteReference",name:"footnote reference",basedOn:"DefaultParagraphFont",semiHidden:!0,run:{superScript:!0}},t))}}class Fre extends qp{constructor(t){super(kt({id:"FootnoteTextChar",name:"Footnote Text Char",basedOn:"DefaultParagraphFont",link:"FootnoteText",semiHidden:!0,run:{size:20}},t))}}class zre extends qp{constructor(t){super(kt({id:"Hyperlink",name:"Hyperlink",basedOn:"DefaultParagraphFont",run:{color:"0563C1",underline:{type:B8.SINGLE}}},t))}}class Qw extends Pe{constructor(t){if(super("w:styles"),t.initialStyles&&this.root.push(t.initialStyles),t.importedStyles)for(const r of t.importedStyles)this.root.push(r);if(t.paragraphStyles)for(const r of t.paragraphStyles)this.root.push(new Hp(r));if(t.characterStyles)for(const r of t.characterStyles)this.root.push(new qp(r))}}class Ire extends Pe{constructor(t){super("w:pPrDefault"),this.root.push(new Ad(t))}}class $re extends Pe{constructor(t){super("w:rPrDefault"),this.root.push(new Qo(t))}}class Ure extends Pe{constructor(t){super("w:docDefaults"),Oe(this,"runPropertiesDefaults"),Oe(this,"paragraphPropertiesDefaults"),this.runPropertiesDefaults=new $re(t.run),this.paragraphPropertiesDefaults=new Ire(t.paragraph),this.root.push(this.runPropertiesDefaults),this.root.push(this.paragraphPropertiesDefaults)}}class Vre{newInstance(t){const r=A8.xml2js(t,{compact:!1});let a;for(const o of r.elements||[])o.name==="w:styles"&&(a=o);if(a===void 0)throw new Error("can not find styles element");const n=a.elements||[];return new Qw({initialStyles:new Oee(a.attributes),importedStyles:n.map(o=>I1(o))})}}class rT{newInstance(t={}){var r;return{initialStyles:new Vp(["mc","r","w","w14","w15"],"w14 w15"),importedStyles:[new Ure((r=t.document)!=null?r:{}),new Cre(kt({run:{size:56}},t.title)),new Tre(kt({run:{color:"2E74B5",size:32}},t.heading1)),new Ere(kt({run:{color:"2E74B5",size:26}},t.heading2)),new Are(kt({run:{color:"1F4D78",size:24}},t.heading3)),new Dre(kt({run:{color:"2E74B5",italics:!0}},t.heading4)),new Rre(kt({run:{color:"2E74B5"}},t.heading5)),new Mre(kt({run:{color:"1F4D78"}},t.heading6)),new Ore(kt({run:{bold:!0}},t.strong)),new Lre(t.listParagraph||{}),new zre(t.hyperlink||{}),new Bre(t.footnoteReference||{}),new Pre(t.footnoteText||{}),new Fre(t.footnoteTextChar||{})]}}}let H8=class{constructor(t){Oe(this,"currentRelationshipId",1),Oe(this,"documentWrapper"),Oe(this,"headers",[]),Oe(this,"footers",[]),Oe(this,"coreProperties"),Oe(this,"numbering"),Oe(this,"media"),Oe(this,"fileRelationships"),Oe(this,"footnotesWrapper"),Oe(this,"settings"),Oe(this,"contentTypes"),Oe(this,"customProperties"),Oe(this,"appProperties"),Oe(this,"styles"),Oe(this,"comments"),Oe(this,"fontWrapper");var r,a,n,i,o,c,u,h,m,f,p,v;if(this.coreProperties=new Tse(kd(kt({},t),{creator:(r=t.creator)!=null?r:"Un-named",revision:(a=t.revision)!=null?a:1,lastModifiedBy:(n=t.lastModifiedBy)!=null?n:"Un-named"})),this.numbering=new bre(t.numbering?t.numbering:{config:[]}),this.comments=new Rte((i=t.comments)!=null?i:{children:[]}),this.fileRelationships=new Jo,this.customProperties=new Ose((o=t.customProperties)!=null?o:[]),this.appProperties=new Nse,this.footnotesWrapper=new Zse,this.contentTypes=new Cse,this.documentWrapper=new $8({background:t.background}),this.settings=new Nre({compatibilityModeVersion:t.compatabilityModeVersion,compatibility:t.compatibility,evenAndOddHeaders:!!t.evenAndOddHeaderAndFooters,trackRevisions:(c=t.features)==null?void 0:c.trackRevisions,updateFields:(u=t.features)==null?void 0:u.updateFields,defaultTabStop:t.defaultTabStop,hyphenation:{autoHyphenation:(h=t.hyphenation)==null?void 0:h.autoHyphenation,hyphenationZone:(m=t.hyphenation)==null?void 0:m.hyphenationZone,consecutiveHyphenLimit:(f=t.hyphenation)==null?void 0:f.consecutiveHyphenLimit,doNotHyphenateCaps:(p=t.hyphenation)==null?void 0:p.doNotHyphenateCaps}}),this.media=new tre,t.externalStyles!==void 0){const g=new Vre;this.styles=g.newInstance(t.externalStyles)}else if(t.styles){const y=new rT().newInstance(t.styles.default);this.styles=new Qw(kt(kt({},y),t.styles))}else{const g=new rT;this.styles=new Qw(g.newInstance())}this.addDefaultRelationships();for(const g of t.sections)this.addSection(g);if(t.footnotes)for(const g in t.footnotes)this.footnotesWrapper.View.createFootNote(parseFloat(g),t.footnotes[g].children);this.fontWrapper=new Fse((v=t.fonts)!=null?v:[])}addSection({headers:t={},footers:r={},children:a,properties:n}){this.documentWrapper.View.Body.addSection(kd(kt({},n),{headerWrapperGroup:{default:t.default?this.createHeader(t.default):void 0,first:t.first?this.createHeader(t.first):void 0,even:t.even?this.createHeader(t.even):void 0},footerWrapperGroup:{default:r.default?this.createFooter(r.default):void 0,first:r.first?this.createFooter(r.first):void 0,even:r.even?this.createFooter(r.even):void 0}}));for(const i of a)this.documentWrapper.View.add(i)}createHeader(t){const r=new ere(this.media,this.currentRelationshipId++);for(const a of t.options.children)r.add(a);return this.addHeaderToDocument(r),r}createFooter(t){const r=new $se(this.media,this.currentRelationshipId++);for(const a of t.options.children)r.add(a);return this.addFooterToDocument(r),r}addHeaderToDocument(t,r=hd.DEFAULT){this.headers.push({header:t,type:r}),this.documentWrapper.Relationships.createRelationship(t.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/header",`header${this.headers.length}.xml`),this.contentTypes.addHeader(this.headers.length)}addFooterToDocument(t,r=hd.DEFAULT){this.footers.push({footer:t,type:r}),this.documentWrapper.Relationships.createRelationship(t.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footer",`footer${this.footers.length}.xml`),this.contentTypes.addFooter(this.footers.length)}addDefaultRelationships(){this.fileRelationships.createRelationship(1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument","word/document.xml"),this.fileRelationships.createRelationship(2,"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties","docProps/core.xml"),this.fileRelationships.createRelationship(3,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties","docProps/app.xml"),this.fileRelationships.createRelationship(4,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties","docProps/custom.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles","styles.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/numbering","numbering.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footnotes","footnotes.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/settings","settings.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments","comments.xml")}get Document(){return this.documentWrapper}get Styles(){return this.styles}get CoreProperties(){return this.coreProperties}get Numbering(){return this.numbering}get Media(){return this.media}get FileRelationships(){return this.fileRelationships}get Headers(){return this.headers.map(t=>t.header)}get Footers(){return this.footers.map(t=>t.footer)}get ContentTypes(){return this.contentTypes}get CustomProperties(){return this.customProperties}get AppProperties(){return this.appProperties}get FootNotes(){return this.footnotesWrapper}get Settings(){return this.settings}get Comments(){return this.comments}get FontTable(){return this.fontWrapper}};var Hre=B1();function jf(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Fj={exports:{}},aT;function qre(){return aT||(aT=1,(function(s,t){(function(r){s.exports=r()})(function(){return(function r(a,n,i){function o(h,m){if(!n[h]){if(!a[h]){var f=typeof jf=="function"&&jf;if(!m&&f)return f(h,!0);if(c)return c(h,!0);var p=new Error("Cannot find module '"+h+"'");throw p.code="MODULE_NOT_FOUND",p}var v=n[h]={exports:{}};a[h][0].call(v.exports,function(g){var y=a[h][1][g];return o(y||g)},v,v.exports,r,a,n,i)}return n[h].exports}for(var c=typeof jf=="function"&&jf,u=0;u<i.length;u++)o(i[u]);return o})({1:[function(r,a,n){var i=r("./utils"),o=r("./support"),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(u){for(var h,m,f,p,v,g,y,w=[],N=0,k=u.length,S=k,_=i.getTypeOf(u)!=="string";N<u.length;)S=k-N,f=_?(h=u[N++],m=N<k?u[N++]:0,N<k?u[N++]:0):(h=u.charCodeAt(N++),m=N<k?u.charCodeAt(N++):0,N<k?u.charCodeAt(N++):0),p=h>>2,v=(3&h)<<4|m>>4,g=1<S?(15&m)<<2|f>>6:64,y=2<S?63&f:64,w.push(c.charAt(p)+c.charAt(v)+c.charAt(g)+c.charAt(y));return w.join("")},n.decode=function(u){var h,m,f,p,v,g,y=0,w=0,N="data:";if(u.substr(0,N.length)===N)throw new Error("Invalid base64 input, it looks like a data url.");var k,S=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===c.charAt(64)&&S--,u.charAt(u.length-2)===c.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(k=o.uint8array?new Uint8Array(0|S):new Array(0|S);y<u.length;)h=c.indexOf(u.charAt(y++))<<2|(p=c.indexOf(u.charAt(y++)))>>4,m=(15&p)<<4|(v=c.indexOf(u.charAt(y++)))>>2,f=(3&v)<<6|(g=c.indexOf(u.charAt(y++))),k[w++]=h,v!==64&&(k[w++]=m),g!==64&&(k[w++]=f);return k}},{"./support":30,"./utils":32}],2:[function(r,a,n){var i=r("./external"),o=r("./stream/DataWorker"),c=r("./stream/Crc32Probe"),u=r("./stream/DataLengthProbe");function h(m,f,p,v,g){this.compressedSize=m,this.uncompressedSize=f,this.crc32=p,this.compression=v,this.compressedContent=g}h.prototype={getContentWorker:function(){var m=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),f=this;return m.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),m},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(m,f,p){return m.pipe(new c).pipe(new u("uncompressedSize")).pipe(f.compressWorker(p)).pipe(new u("compressedSize")).withStreamInfo("compression",f)},a.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,a,n){var i=r("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},n.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,a,n){var i=r("./utils"),o=(function(){for(var c,u=[],h=0;h<256;h++){c=h;for(var m=0;m<8;m++)c=1&c?3988292384^c>>>1:c>>>1;u[h]=c}return u})();a.exports=function(c,u){return c!==void 0&&c.length?i.getTypeOf(c)!=="string"?(function(h,m,f,p){var v=o,g=p+f;h^=-1;for(var y=p;y<g;y++)h=h>>>8^v[255&(h^m[y])];return-1^h})(0|u,c,c.length,0):(function(h,m,f,p){var v=o,g=p+f;h^=-1;for(var y=p;y<g;y++)h=h>>>8^v[255&(h^m.charCodeAt(y))];return-1^h})(0|u,c,c.length,0):0}},{"./utils":32}],5:[function(r,a,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(r,a,n){var i=null;i=typeof Promise<"u"?Promise:r("lie"),a.exports={Promise:i}},{lie:37}],7:[function(r,a,n){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=r("pako"),c=r("./utils"),u=r("./stream/GenericWorker"),h=i?"uint8array":"array";function m(f,p){u.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=p,this.meta={}}n.magic="\b\0",c.inherits(m,u),m.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(c.transformTo(h,f.data),!1)},m.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},m.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},m.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(p){f.push({data:p,meta:f.meta})}},n.compressWorker=function(f){return new m("Deflate",f)},n.uncompressWorker=function(){return new m("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,a,n){function i(v,g){var y,w="";for(y=0;y<g;y++)w+=String.fromCharCode(255&v),v>>>=8;return w}function o(v,g,y,w,N,k){var S,_,T=v.file,E=v.compression,z=k!==h.utf8encode,O=c.transformTo("string",k(T.name)),C=c.transformTo("string",h.utf8encode(T.name)),A=T.comment,X=c.transformTo("string",k(A)),I=c.transformTo("string",h.utf8encode(A)),V=C.length!==T.name.length,R=I.length!==A.length,H="",ee="",se="",W=T.dir,te=T.date,J={crc32:0,compressedSize:0,uncompressedSize:0};g&&!y||(J.crc32=v.crc32,J.compressedSize=v.compressedSize,J.uncompressedSize=v.uncompressedSize);var K=0;g&&(K|=8),z||!V&&!R||(K|=2048);var $=0,ie=0;W&&($|=16),N==="UNIX"?(ie=798,$|=(function(oe,ce){var U=oe;return oe||(U=ce?16893:33204),(65535&U)<<16})(T.unixPermissions,W)):(ie=20,$|=(function(oe){return 63&(oe||0)})(T.dosPermissions)),S=te.getUTCHours(),S<<=6,S|=te.getUTCMinutes(),S<<=5,S|=te.getUTCSeconds()/2,_=te.getUTCFullYear()-1980,_<<=4,_|=te.getUTCMonth()+1,_<<=5,_|=te.getUTCDate(),V&&(ee=i(1,1)+i(m(O),4)+C,H+="up"+i(ee.length,2)+ee),R&&(se=i(1,1)+i(m(X),4)+I,H+="uc"+i(se.length,2)+se);var ne="";return ne+=`
\0`,ne+=i(K,2),ne+=E.magic,ne+=i(S,2),ne+=i(_,2),ne+=i(J.crc32,4),ne+=i(J.compressedSize,4),ne+=i(J.uncompressedSize,4),ne+=i(O.length,2),ne+=i(H.length,2),{fileRecord:f.LOCAL_FILE_HEADER+ne+O+H,dirRecord:f.CENTRAL_FILE_HEADER+i(ie,2)+ne+i(X.length,2)+"\0\0\0\0"+i($,4)+i(w,4)+O+H+X}}var c=r("../utils"),u=r("../stream/GenericWorker"),h=r("../utf8"),m=r("../crc32"),f=r("../signature");function p(v,g,y,w){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=g,this.zipPlatform=y,this.encodeFileName=w,this.streamFiles=v,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}c.inherits(p,u),p.prototype.push=function(v){var g=v.meta.percent||0,y=this.entriesCount,w=this._sources.length;this.accumulate?this.contentBuffer.push(v):(this.bytesWritten+=v.data.length,u.prototype.push.call(this,{data:v.data,meta:{currentFile:this.currentFile,percent:y?(g+100*(y-w-1))/y:100}}))},p.prototype.openedSource=function(v){this.currentSourceOffset=this.bytesWritten,this.currentFile=v.file.name;var g=this.streamFiles&&!v.file.dir;if(g){var y=o(v,g,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:y.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(v){this.accumulate=!1;var g=this.streamFiles&&!v.file.dir,y=o(v,g,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(y.dirRecord),g)this.push({data:(function(w){return f.DATA_DESCRIPTOR+i(w.crc32,4)+i(w.compressedSize,4)+i(w.uncompressedSize,4)})(v),meta:{percent:100}});else for(this.push({data:y.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var v=this.bytesWritten,g=0;g<this.dirRecords.length;g++)this.push({data:this.dirRecords[g],meta:{percent:100}});var y=this.bytesWritten-v,w=(function(N,k,S,_,T){var E=c.transformTo("string",T(_));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(N,2)+i(N,2)+i(k,4)+i(S,4)+i(E.length,2)+E})(this.dirRecords.length,y,v,this.zipComment,this.encodeFileName);this.push({data:w,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(v){this._sources.push(v);var g=this;return v.on("data",function(y){g.processChunk(y)}),v.on("end",function(){g.closedSource(g.previous.streamInfo),g._sources.length?g.prepareNextSource():g.end()}),v.on("error",function(y){g.error(y)}),this},p.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(v){var g=this._sources;if(!u.prototype.error.call(this,v))return!1;for(var y=0;y<g.length;y++)try{g[y].error(v)}catch{}return!0},p.prototype.lock=function(){u.prototype.lock.call(this);for(var v=this._sources,g=0;g<v.length;g++)v[g].lock()},a.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,a,n){var i=r("../compressions"),o=r("./ZipFileWorker");n.generateWorker=function(c,u,h){var m=new o(u.streamFiles,h,u.platform,u.encodeFileName),f=0;try{c.forEach(function(p,v){f++;var g=(function(k,S){var _=k||S,T=i[_];if(!T)throw new Error(_+" is not a valid compression method !");return T})(v.options.compression,u.compression),y=v.options.compressionOptions||u.compressionOptions||{},w=v.dir,N=v.date;v._compressWorker(g,y).withStreamInfo("file",{name:p,dir:w,date:N,comment:v.comment||"",unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions}).pipe(m)}),m.entriesCount=f}catch(p){m.error(p)}return m}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,a,n){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var c in this)typeof this[c]!="function"&&(o[c]=this[c]);return o}}(i.prototype=r("./object")).loadAsync=r("./load"),i.support=r("./support"),i.defaults=r("./defaults"),i.version="3.10.1",i.loadAsync=function(o,c){return new i().loadAsync(o,c)},i.external=r("./external"),a.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,a,n){var i=r("./utils"),o=r("./external"),c=r("./utf8"),u=r("./zipEntries"),h=r("./stream/Crc32Probe"),m=r("./nodejsUtils");function f(p){return new o.Promise(function(v,g){var y=p.decompressed.getContentWorker().pipe(new h);y.on("error",function(w){g(w)}).on("end",function(){y.streamInfo.crc32!==p.decompressed.crc32?g(new Error("Corrupted zip : CRC32 mismatch")):v()}).resume()})}a.exports=function(p,v){var g=this;return v=i.extend(v||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:c.utf8decode}),m.isNode&&m.isStream(p)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",p,!0,v.optimizedBinaryString,v.base64).then(function(y){var w=new u(v);return w.load(y),w}).then(function(y){var w=[o.Promise.resolve(y)],N=y.files;if(v.checkCRC32)for(var k=0;k<N.length;k++)w.push(f(N[k]));return o.Promise.all(w)}).then(function(y){for(var w=y.shift(),N=w.files,k=0;k<N.length;k++){var S=N[k],_=S.fileNameStr,T=i.resolve(S.fileNameStr);g.file(T,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:v.createFolders}),S.dir||(g.file(T).unsafeOriginalName=_)}return w.zipComment.length&&(g.comment=w.zipComment),g})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,a,n){var i=r("../utils"),o=r("../stream/GenericWorker");function c(u,h){o.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(h)}i.inherits(c,o),c.prototype._bindStream=function(u){var h=this;(this._stream=u).pause(),u.on("data",function(m){h.push({data:m,meta:{percent:0}})}).on("error",function(m){h.isPaused?this.generatedError=m:h.error(m)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},c.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},c.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},a.exports=c},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,a,n){var i=r("readable-stream").Readable;function o(c,u,h){i.call(this,u),this._helper=c;var m=this;c.on("data",function(f,p){m.push(f)||m._helper.pause(),h&&h(p)}).on("error",function(f){m.emit("error",f)}).on("end",function(){m.push(null)})}r("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},a.exports=o},{"../utils":32,"readable-stream":16}],14:[function(r,a,n){a.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,o)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var o=new Buffer(i);return o.fill(0),o},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(r,a,n){function i(T,E,z){var O,C=c.getTypeOf(E),A=c.extend(z||{},m);A.date=A.date||new Date,A.compression!==null&&(A.compression=A.compression.toUpperCase()),typeof A.unixPermissions=="string"&&(A.unixPermissions=parseInt(A.unixPermissions,8)),A.unixPermissions&&16384&A.unixPermissions&&(A.dir=!0),A.dosPermissions&&16&A.dosPermissions&&(A.dir=!0),A.dir&&(T=N(T)),A.createFolders&&(O=w(T))&&k.call(this,O,!0);var X=C==="string"&&A.binary===!1&&A.base64===!1;z&&z.binary!==void 0||(A.binary=!X),(E instanceof f&&E.uncompressedSize===0||A.dir||!E||E.length===0)&&(A.base64=!1,A.binary=!0,E="",A.compression="STORE",C="string");var I=null;I=E instanceof f||E instanceof u?E:g.isNode&&g.isStream(E)?new y(T,E):c.prepareContent(T,E,A.binary,A.optimizedBinaryString,A.base64);var V=new p(T,I,A);this.files[T]=V}var o=r("./utf8"),c=r("./utils"),u=r("./stream/GenericWorker"),h=r("./stream/StreamHelper"),m=r("./defaults"),f=r("./compressedObject"),p=r("./zipObject"),v=r("./generate"),g=r("./nodejsUtils"),y=r("./nodejs/NodejsStreamInputAdapter"),w=function(T){T.slice(-1)==="/"&&(T=T.substring(0,T.length-1));var E=T.lastIndexOf("/");return 0<E?T.substring(0,E):""},N=function(T){return T.slice(-1)!=="/"&&(T+="/"),T},k=function(T,E){return E=E!==void 0?E:m.createFolders,T=N(T),this.files[T]||i.call(this,T,null,{dir:!0,createFolders:E}),this.files[T]};function S(T){return Object.prototype.toString.call(T)==="[object RegExp]"}var _={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(T){var E,z,O;for(E in this.files)O=this.files[E],(z=E.slice(this.root.length,E.length))&&E.slice(0,this.root.length)===this.root&&T(z,O)},filter:function(T){var E=[];return this.forEach(function(z,O){T(z,O)&&E.push(O)}),E},file:function(T,E,z){if(arguments.length!==1)return T=this.root+T,i.call(this,T,E,z),this;if(S(T)){var O=T;return this.filter(function(A,X){return!X.dir&&O.test(A)})}var C=this.files[this.root+T];return C&&!C.dir?C:null},folder:function(T){if(!T)return this;if(S(T))return this.filter(function(C,A){return A.dir&&T.test(C)});var E=this.root+T,z=k.call(this,E),O=this.clone();return O.root=z.name,O},remove:function(T){T=this.root+T;var E=this.files[T];if(E||(T.slice(-1)!=="/"&&(T+="/"),E=this.files[T]),E&&!E.dir)delete this.files[T];else for(var z=this.filter(function(C,A){return A.name.slice(0,T.length)===T}),O=0;O<z.length;O++)delete this.files[z[O].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(T){var E,z={};try{if((z=c.extend(T||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=z.type.toLowerCase(),z.compression=z.compression.toUpperCase(),z.type==="binarystring"&&(z.type="string"),!z.type)throw new Error("No output type specified.");c.checkSupport(z.type),z.platform!=="darwin"&&z.platform!=="freebsd"&&z.platform!=="linux"&&z.platform!=="sunos"||(z.platform="UNIX"),z.platform==="win32"&&(z.platform="DOS");var O=z.comment||this.comment||"";E=v.generateWorker(this,z,O)}catch(C){(E=new u("error")).error(C)}return new h(E,z.type||"string",z.mimeType)},generateAsync:function(T,E){return this.generateInternalStream(T).accumulate(E)},generateNodeStream:function(T,E){return(T=T||{}).type||(T.type="nodebuffer"),this.generateInternalStream(T).toNodejsStream(E)}};a.exports=_},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,a,n){a.exports=r("stream")},{stream:void 0}],17:[function(r,a,n){var i=r("./DataReader");function o(c){i.call(this,c);for(var u=0;u<this.data.length;u++)c[u]=255&c[u]}r("../utils").inherits(o,i),o.prototype.byteAt=function(c){return this.data[this.zero+c]},o.prototype.lastIndexOfSignature=function(c){for(var u=c.charCodeAt(0),h=c.charCodeAt(1),m=c.charCodeAt(2),f=c.charCodeAt(3),p=this.length-4;0<=p;--p)if(this.data[p]===u&&this.data[p+1]===h&&this.data[p+2]===m&&this.data[p+3]===f)return p-this.zero;return-1},o.prototype.readAndCheckSignature=function(c){var u=c.charCodeAt(0),h=c.charCodeAt(1),m=c.charCodeAt(2),f=c.charCodeAt(3),p=this.readData(4);return u===p[0]&&h===p[1]&&m===p[2]&&f===p[3]},o.prototype.readData=function(c){if(this.checkOffset(c),c===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,u},a.exports=o},{"../utils":32,"./DataReader":18}],18:[function(r,a,n){var i=r("../utils");function o(c){this.data=c,this.length=c.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(c){this.checkIndex(this.index+c)},checkIndex:function(c){if(this.length<this.zero+c||c<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+c+"). Corrupted zip ?")},setIndex:function(c){this.checkIndex(c),this.index=c},skip:function(c){this.setIndex(this.index+c)},byteAt:function(){},readInt:function(c){var u,h=0;for(this.checkOffset(c),u=this.index+c-1;u>=this.index;u--)h=(h<<8)+this.byteAt(u);return this.index+=c,h},readString:function(c){return i.transformTo("string",this.readData(c))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var c=this.readInt(4);return new Date(Date.UTC(1980+(c>>25&127),(c>>21&15)-1,c>>16&31,c>>11&31,c>>5&63,(31&c)<<1))}},a.exports=o},{"../utils":32}],19:[function(r,a,n){var i=r("./Uint8ArrayReader");function o(c){i.call(this,c)}r("../utils").inherits(o,i),o.prototype.readData=function(c){this.checkOffset(c);var u=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,u},a.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,a,n){var i=r("./DataReader");function o(c){i.call(this,c)}r("../utils").inherits(o,i),o.prototype.byteAt=function(c){return this.data.charCodeAt(this.zero+c)},o.prototype.lastIndexOfSignature=function(c){return this.data.lastIndexOf(c)-this.zero},o.prototype.readAndCheckSignature=function(c){return c===this.readData(4)},o.prototype.readData=function(c){this.checkOffset(c);var u=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,u},a.exports=o},{"../utils":32,"./DataReader":18}],21:[function(r,a,n){var i=r("./ArrayReader");function o(c){i.call(this,c)}r("../utils").inherits(o,i),o.prototype.readData=function(c){if(this.checkOffset(c),c===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+c);return this.index+=c,u},a.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(r,a,n){var i=r("../utils"),o=r("../support"),c=r("./ArrayReader"),u=r("./StringReader"),h=r("./NodeBufferReader"),m=r("./Uint8ArrayReader");a.exports=function(f){var p=i.getTypeOf(f);return i.checkSupport(p),p!=="string"||o.uint8array?p==="nodebuffer"?new h(f):o.uint8array?new m(i.transformTo("uint8array",f)):new c(i.transformTo("array",f)):new u(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,a,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,a,n){var i=r("./GenericWorker"),o=r("../utils");function c(u){i.call(this,"ConvertWorker to "+u),this.destType=u}o.inherits(c,i),c.prototype.processChunk=function(u){this.push({data:o.transformTo(this.destType,u.data),meta:u.meta})},a.exports=c},{"../utils":32,"./GenericWorker":28}],25:[function(r,a,n){var i=r("./GenericWorker"),o=r("../crc32");function c(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(c,i),c.prototype.processChunk=function(u){this.streamInfo.crc32=o(u.data,this.streamInfo.crc32||0),this.push(u)},a.exports=c},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,a,n){var i=r("../utils"),o=r("./GenericWorker");function c(u){o.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}i.inherits(c,o),c.prototype.processChunk=function(u){if(u){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+u.data.length}o.prototype.processChunk.call(this,u)},a.exports=c},{"../utils":32,"./GenericWorker":28}],27:[function(r,a,n){var i=r("../utils"),o=r("./GenericWorker");function c(u){o.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(m){h.dataIsReady=!0,h.data=m,h.max=m&&m.length||0,h.type=i.getTypeOf(m),h.isPaused||h._tickAndRepeat()},function(m){h.error(m)})}i.inherits(c,o),c.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},c.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},c.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},c.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,h);break;case"uint8array":u=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":u=this.data.slice(this.index,h)}return this.index=h,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},a.exports=c},{"../utils":32,"./GenericWorker":28}],28:[function(r,a,n){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,c){return this._listeners[o].push(c),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,c){if(this._listeners[o])for(var u=0;u<this._listeners[o].length;u++)this._listeners[o][u].call(this,c)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var c=this;return o.on("data",function(u){c.processChunk(u)}),o.on("end",function(){c.end()}),o.on("error",function(u){c.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,c){return this.extraStreamInfo[o]=c,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},a.exports=i},{}],29:[function(r,a,n){var i=r("../utils"),o=r("./ConvertWorker"),c=r("./GenericWorker"),u=r("../base64"),h=r("../support"),m=r("../external"),f=null;if(h.nodestream)try{f=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function p(g,y){return new m.Promise(function(w,N){var k=[],S=g._internalType,_=g._outputType,T=g._mimeType;g.on("data",function(E,z){k.push(E),y&&y(z)}).on("error",function(E){k=[],N(E)}).on("end",function(){try{var E=(function(z,O,C){switch(z){case"blob":return i.newBlob(i.transformTo("arraybuffer",O),C);case"base64":return u.encode(O);default:return i.transformTo(z,O)}})(_,(function(z,O){var C,A=0,X=null,I=0;for(C=0;C<O.length;C++)I+=O[C].length;switch(z){case"string":return O.join("");case"array":return Array.prototype.concat.apply([],O);case"uint8array":for(X=new Uint8Array(I),C=0;C<O.length;C++)X.set(O[C],A),A+=O[C].length;return X;case"nodebuffer":return Buffer.concat(O);default:throw new Error("concat : unsupported type '"+z+"'")}})(S,k),T);w(E)}catch(z){N(z)}k=[]}).resume()})}function v(g,y,w){var N=y;switch(y){case"blob":case"arraybuffer":N="uint8array";break;case"base64":N="string"}try{this._internalType=N,this._outputType=y,this._mimeType=w,i.checkSupport(N),this._worker=g.pipe(new o(N)),g.lock()}catch(k){this._worker=new c("error"),this._worker.error(k)}}v.prototype={accumulate:function(g){return p(this,g)},on:function(g,y){var w=this;return g==="data"?this._worker.on(g,function(N){y.call(w,N.data,N.meta)}):this._worker.on(g,function(){i.delay(y,arguments,w)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(g){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},g)}},a.exports=v},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,a,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=typeof Buffer<"u",n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var i=new ArrayBuffer(0);try{n.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),n.blob=o.getBlob("application/zip").size===0}catch{n.blob=!1}}}try{n.nodestream=!!r("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(r,a,n){for(var i=r("./utils"),o=r("./support"),c=r("./nodejsUtils"),u=r("./stream/GenericWorker"),h=new Array(256),m=0;m<256;m++)h[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;h[254]=h[254]=1;function f(){u.call(this,"utf-8 decode"),this.leftOver=null}function p(){u.call(this,"utf-8 encode")}n.utf8encode=function(v){return o.nodebuffer?c.newBufferFrom(v,"utf-8"):(function(g){var y,w,N,k,S,_=g.length,T=0;for(k=0;k<_;k++)(64512&(w=g.charCodeAt(k)))==55296&&k+1<_&&(64512&(N=g.charCodeAt(k+1)))==56320&&(w=65536+(w-55296<<10)+(N-56320),k++),T+=w<128?1:w<2048?2:w<65536?3:4;for(y=o.uint8array?new Uint8Array(T):new Array(T),k=S=0;S<T;k++)(64512&(w=g.charCodeAt(k)))==55296&&k+1<_&&(64512&(N=g.charCodeAt(k+1)))==56320&&(w=65536+(w-55296<<10)+(N-56320),k++),w<128?y[S++]=w:(w<2048?y[S++]=192|w>>>6:(w<65536?y[S++]=224|w>>>12:(y[S++]=240|w>>>18,y[S++]=128|w>>>12&63),y[S++]=128|w>>>6&63),y[S++]=128|63&w);return y})(v)},n.utf8decode=function(v){return o.nodebuffer?i.transformTo("nodebuffer",v).toString("utf-8"):(function(g){var y,w,N,k,S=g.length,_=new Array(2*S);for(y=w=0;y<S;)if((N=g[y++])<128)_[w++]=N;else if(4<(k=h[N]))_[w++]=65533,y+=k-1;else{for(N&=k===2?31:k===3?15:7;1<k&&y<S;)N=N<<6|63&g[y++],k--;1<k?_[w++]=65533:N<65536?_[w++]=N:(N-=65536,_[w++]=55296|N>>10&1023,_[w++]=56320|1023&N)}return _.length!==w&&(_.subarray?_=_.subarray(0,w):_.length=w),i.applyFromCharCode(_)})(v=i.transformTo(o.uint8array?"uint8array":"array",v))},i.inherits(f,u),f.prototype.processChunk=function(v){var g=i.transformTo(o.uint8array?"uint8array":"array",v.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var y=g;(g=new Uint8Array(y.length+this.leftOver.length)).set(this.leftOver,0),g.set(y,this.leftOver.length)}else g=this.leftOver.concat(g);this.leftOver=null}var w=(function(k,S){var _;for((S=S||k.length)>k.length&&(S=k.length),_=S-1;0<=_&&(192&k[_])==128;)_--;return _<0||_===0?S:_+h[k[_]]>S?_:S})(g),N=g;w!==g.length&&(o.uint8array?(N=g.subarray(0,w),this.leftOver=g.subarray(w,g.length)):(N=g.slice(0,w),this.leftOver=g.slice(w,g.length))),this.push({data:n.utf8decode(N),meta:v.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=f,i.inherits(p,u),p.prototype.processChunk=function(v){this.push({data:n.utf8encode(v.data),meta:v.meta})},n.Utf8EncodeWorker=p},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,a,n){var i=r("./support"),o=r("./base64"),c=r("./nodejsUtils"),u=r("./external");function h(y){return y}function m(y,w){for(var N=0;N<y.length;++N)w[N]=255&y.charCodeAt(N);return w}r("setimmediate"),n.newBlob=function(y,w){n.checkSupport("blob");try{return new Blob([y],{type:w})}catch{try{var N=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return N.append(y),N.getBlob(w)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(y,w,N){var k=[],S=0,_=y.length;if(_<=N)return String.fromCharCode.apply(null,y);for(;S<_;)w==="array"||w==="nodebuffer"?k.push(String.fromCharCode.apply(null,y.slice(S,Math.min(S+N,_)))):k.push(String.fromCharCode.apply(null,y.subarray(S,Math.min(S+N,_)))),S+=N;return k.join("")},stringifyByChar:function(y){for(var w="",N=0;N<y.length;N++)w+=String.fromCharCode(y[N]);return w},applyCanBeUsed:{uint8array:(function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,c.allocBuffer(1)).length===1}catch{return!1}})()}};function p(y){var w=65536,N=n.getTypeOf(y),k=!0;if(N==="uint8array"?k=f.applyCanBeUsed.uint8array:N==="nodebuffer"&&(k=f.applyCanBeUsed.nodebuffer),k)for(;1<w;)try{return f.stringifyByChunk(y,N,w)}catch{w=Math.floor(w/2)}return f.stringifyByChar(y)}function v(y,w){for(var N=0;N<y.length;N++)w[N]=y[N];return w}n.applyFromCharCode=p;var g={};g.string={string:h,array:function(y){return m(y,new Array(y.length))},arraybuffer:function(y){return g.string.uint8array(y).buffer},uint8array:function(y){return m(y,new Uint8Array(y.length))},nodebuffer:function(y){return m(y,c.allocBuffer(y.length))}},g.array={string:p,array:h,arraybuffer:function(y){return new Uint8Array(y).buffer},uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return c.newBufferFrom(y)}},g.arraybuffer={string:function(y){return p(new Uint8Array(y))},array:function(y){return v(new Uint8Array(y),new Array(y.byteLength))},arraybuffer:h,uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return c.newBufferFrom(new Uint8Array(y))}},g.uint8array={string:p,array:function(y){return v(y,new Array(y.length))},arraybuffer:function(y){return y.buffer},uint8array:h,nodebuffer:function(y){return c.newBufferFrom(y)}},g.nodebuffer={string:p,array:function(y){return v(y,new Array(y.length))},arraybuffer:function(y){return g.nodebuffer.uint8array(y).buffer},uint8array:function(y){return v(y,new Uint8Array(y.length))},nodebuffer:h},n.transformTo=function(y,w){if(w=w||"",!y)return w;n.checkSupport(y);var N=n.getTypeOf(w);return g[N][y](w)},n.resolve=function(y){for(var w=y.split("/"),N=[],k=0;k<w.length;k++){var S=w[k];S==="."||S===""&&k!==0&&k!==w.length-1||(S===".."?N.pop():N.push(S))}return N.join("/")},n.getTypeOf=function(y){return typeof y=="string"?"string":Object.prototype.toString.call(y)==="[object Array]"?"array":i.nodebuffer&&c.isBuffer(y)?"nodebuffer":i.uint8array&&y instanceof Uint8Array?"uint8array":i.arraybuffer&&y instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(y){if(!i[y.toLowerCase()])throw new Error(y+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(y){var w,N,k="";for(N=0;N<(y||"").length;N++)k+="\\x"+((w=y.charCodeAt(N))<16?"0":"")+w.toString(16).toUpperCase();return k},n.delay=function(y,w,N){setImmediate(function(){y.apply(N||null,w||[])})},n.inherits=function(y,w){function N(){}N.prototype=w.prototype,y.prototype=new N},n.extend=function(){var y,w,N={};for(y=0;y<arguments.length;y++)for(w in arguments[y])Object.prototype.hasOwnProperty.call(arguments[y],w)&&N[w]===void 0&&(N[w]=arguments[y][w]);return N},n.prepareContent=function(y,w,N,k,S){return u.Promise.resolve(w).then(function(_){return i.blob&&(_ instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(_))!==-1)&&typeof FileReader<"u"?new u.Promise(function(T,E){var z=new FileReader;z.onload=function(O){T(O.target.result)},z.onerror=function(O){E(O.target.error)},z.readAsArrayBuffer(_)}):_}).then(function(_){var T=n.getTypeOf(_);return T?(T==="arraybuffer"?_=n.transformTo("uint8array",_):T==="string"&&(S?_=o.decode(_):N&&k!==!0&&(_=(function(E){return m(E,i.uint8array?new Uint8Array(E.length):new Array(E.length))})(_))),_):u.Promise.reject(new Error("Can't read the data of '"+y+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,a,n){var i=r("./reader/readerFor"),o=r("./utils"),c=r("./signature"),u=r("./zipEntry"),h=r("./support");function m(f){this.files=[],this.loadOptions=f}m.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var p=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(p)+", expected "+o.pretty(f)+")")}},isSignature:function(f,p){var v=this.reader.index;this.reader.setIndex(f);var g=this.reader.readString(4)===p;return this.reader.setIndex(v),g},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),p=h.uint8array?"uint8array":"array",v=o.transformTo(p,f);this.zipComment=this.loadOptions.decodeFileName(v)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,p,v,g=this.zip64EndOfCentralSize-44;0<g;)f=this.reader.readInt(2),p=this.reader.readInt(4),v=this.reader.readData(p),this.zip64ExtensibleData[f]={id:f,length:p,value:v}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,p;for(f=0;f<this.files.length;f++)p=this.files[f],this.reader.setIndex(p.localHeaderOffset),this.checkSignature(c.LOCAL_FILE_HEADER),p.readLocalPart(this.reader),p.handleUTF8(),p.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(c.CENTRAL_FILE_HEADER);)(f=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(c.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,c.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var p=f;if(this.checkSignature(c.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,c.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var v=this.centralDirOffset+this.centralDirSize;this.zip64&&(v+=20,v+=12+this.zip64EndOfCentralSize);var g=p-v;if(0<g)this.isSignature(p,c.CENTRAL_FILE_HEADER)||(this.reader.zero=g);else if(g<0)throw new Error("Corrupted zip: missing "+Math.abs(g)+" bytes.")},prepareReader:function(f){this.reader=i(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},a.exports=m},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,a,n){var i=r("./reader/readerFor"),o=r("./utils"),c=r("./compressedObject"),u=r("./crc32"),h=r("./utf8"),m=r("./compressions"),f=r("./support");function p(v,g){this.options=v,this.loadOptions=g}p.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(v){var g,y;if(v.skip(22),this.fileNameLength=v.readInt(2),y=v.readInt(2),this.fileName=v.readData(this.fileNameLength),v.skip(y),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((g=(function(w){for(var N in m)if(Object.prototype.hasOwnProperty.call(m,N)&&m[N].magic===w)return m[N];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new c(this.compressedSize,this.uncompressedSize,this.crc32,g,v.readData(this.compressedSize))},readCentralPart:function(v){this.versionMadeBy=v.readInt(2),v.skip(2),this.bitFlag=v.readInt(2),this.compressionMethod=v.readString(2),this.date=v.readDate(),this.crc32=v.readInt(4),this.compressedSize=v.readInt(4),this.uncompressedSize=v.readInt(4);var g=v.readInt(2);if(this.extraFieldsLength=v.readInt(2),this.fileCommentLength=v.readInt(2),this.diskNumberStart=v.readInt(2),this.internalFileAttributes=v.readInt(2),this.externalFileAttributes=v.readInt(4),this.localHeaderOffset=v.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");v.skip(g),this.readExtraFields(v),this.parseZIP64ExtraField(v),this.fileComment=v.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var v=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),v==0&&(this.dosPermissions=63&this.externalFileAttributes),v==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var v=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=v.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=v.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=v.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=v.readInt(4))}},readExtraFields:function(v){var g,y,w,N=v.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});v.index+4<N;)g=v.readInt(2),y=v.readInt(2),w=v.readData(y),this.extraFields[g]={id:g,length:y,value:w};v.setIndex(N)},handleUTF8:function(){var v=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var g=this.findExtraFieldUnicodePath();if(g!==null)this.fileNameStr=g;else{var y=o.transformTo(v,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(y)}var w=this.findExtraFieldUnicodeComment();if(w!==null)this.fileCommentStr=w;else{var N=o.transformTo(v,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(N)}}},findExtraFieldUnicodePath:function(){var v=this.extraFields[28789];if(v){var g=i(v.value);return g.readInt(1)!==1||u(this.fileName)!==g.readInt(4)?null:h.utf8decode(g.readData(v.length-5))}return null},findExtraFieldUnicodeComment:function(){var v=this.extraFields[25461];if(v){var g=i(v.value);return g.readInt(1)!==1||u(this.fileComment)!==g.readInt(4)?null:h.utf8decode(g.readData(v.length-5))}return null}},a.exports=p},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,a,n){function i(g,y,w){this.name=g,this.dir=w.dir,this.date=w.date,this.comment=w.comment,this.unixPermissions=w.unixPermissions,this.dosPermissions=w.dosPermissions,this._data=y,this._dataBinary=w.binary,this.options={compression:w.compression,compressionOptions:w.compressionOptions}}var o=r("./stream/StreamHelper"),c=r("./stream/DataWorker"),u=r("./utf8"),h=r("./compressedObject"),m=r("./stream/GenericWorker");i.prototype={internalStream:function(g){var y=null,w="string";try{if(!g)throw new Error("No output type specified.");var N=(w=g.toLowerCase())==="string"||w==="text";w!=="binarystring"&&w!=="text"||(w="string"),y=this._decompressWorker();var k=!this._dataBinary;k&&!N&&(y=y.pipe(new u.Utf8EncodeWorker)),!k&&N&&(y=y.pipe(new u.Utf8DecodeWorker))}catch(S){(y=new m("error")).error(S)}return new o(y,w,"")},async:function(g,y){return this.internalStream(g).accumulate(y)},nodeStream:function(g,y){return this.internalStream(g||"nodebuffer").toNodejsStream(y)},_compressWorker:function(g,y){if(this._data instanceof h&&this._data.compression.magic===g.magic)return this._data.getCompressedWorker();var w=this._decompressWorker();return this._dataBinary||(w=w.pipe(new u.Utf8EncodeWorker)),h.createWorkerFrom(w,g,y)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof m?this._data:new c(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],p=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},v=0;v<f.length;v++)i.prototype[f[v]]=p;a.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,a,n){(function(i){var o,c,u=i.MutationObserver||i.WebKitMutationObserver;if(u){var h=0,m=new u(g),f=i.document.createTextNode("");m.observe(f,{characterData:!0}),o=function(){f.data=h=++h%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var y=i.document.createElement("script");y.onreadystatechange=function(){g(),y.onreadystatechange=null,y.parentNode.removeChild(y),y=null},i.document.documentElement.appendChild(y)}:function(){setTimeout(g,0)};else{var p=new i.MessageChannel;p.port1.onmessage=g,o=function(){p.port2.postMessage(0)}}var v=[];function g(){var y,w;c=!0;for(var N=v.length;N;){for(w=v,v=[],y=-1;++y<N;)w[y]();N=v.length}c=!1}a.exports=function(y){v.push(y)!==1||c||o()}}).call(this,typeof vn<"u"?vn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,a,n){var i=r("immediate");function o(){}var c={},u=["REJECTED"],h=["FULFILLED"],m=["PENDING"];function f(N){if(typeof N!="function")throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,N!==o&&y(this,N)}function p(N,k,S){this.promise=N,typeof k=="function"&&(this.onFulfilled=k,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function v(N,k,S){i(function(){var _;try{_=k(S)}catch(T){return c.reject(N,T)}_===N?c.reject(N,new TypeError("Cannot resolve promise with itself")):c.resolve(N,_)})}function g(N){var k=N&&N.then;if(N&&(typeof N=="object"||typeof N=="function")&&typeof k=="function")return function(){k.apply(N,arguments)}}function y(N,k){var S=!1;function _(z){S||(S=!0,c.reject(N,z))}function T(z){S||(S=!0,c.resolve(N,z))}var E=w(function(){k(T,_)});E.status==="error"&&_(E.value)}function w(N,k){var S={};try{S.value=N(k),S.status="success"}catch(_){S.status="error",S.value=_}return S}(a.exports=f).prototype.finally=function(N){if(typeof N!="function")return this;var k=this.constructor;return this.then(function(S){return k.resolve(N()).then(function(){return S})},function(S){return k.resolve(N()).then(function(){throw S})})},f.prototype.catch=function(N){return this.then(null,N)},f.prototype.then=function(N,k){if(typeof N!="function"&&this.state===h||typeof k!="function"&&this.state===u)return this;var S=new this.constructor(o);return this.state!==m?v(S,this.state===h?N:k,this.outcome):this.queue.push(new p(S,N,k)),S},p.prototype.callFulfilled=function(N){c.resolve(this.promise,N)},p.prototype.otherCallFulfilled=function(N){v(this.promise,this.onFulfilled,N)},p.prototype.callRejected=function(N){c.reject(this.promise,N)},p.prototype.otherCallRejected=function(N){v(this.promise,this.onRejected,N)},c.resolve=function(N,k){var S=w(g,k);if(S.status==="error")return c.reject(N,S.value);var _=S.value;if(_)y(N,_);else{N.state=h,N.outcome=k;for(var T=-1,E=N.queue.length;++T<E;)N.queue[T].callFulfilled(k)}return N},c.reject=function(N,k){N.state=u,N.outcome=k;for(var S=-1,_=N.queue.length;++S<_;)N.queue[S].callRejected(k);return N},f.resolve=function(N){return N instanceof this?N:c.resolve(new this(o),N)},f.reject=function(N){var k=new this(o);return c.reject(k,N)},f.all=function(N){var k=this;if(Object.prototype.toString.call(N)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=N.length,_=!1;if(!S)return this.resolve([]);for(var T=new Array(S),E=0,z=-1,O=new this(o);++z<S;)C(N[z],z);return O;function C(A,X){k.resolve(A).then(function(I){T[X]=I,++E!==S||_||(_=!0,c.resolve(O,T))},function(I){_||(_=!0,c.reject(O,I))})}},f.race=function(N){var k=this;if(Object.prototype.toString.call(N)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=N.length,_=!1;if(!S)return this.resolve([]);for(var T=-1,E=new this(o);++T<S;)z=N[T],k.resolve(z).then(function(O){_||(_=!0,c.resolve(E,O))},function(O){_||(_=!0,c.reject(E,O))});var z;return E}},{immediate:36}],38:[function(r,a,n){var i={};(0,r("./lib/utils/common").assign)(i,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),a.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,a,n){var i=r("./zlib/deflate"),o=r("./utils/common"),c=r("./utils/strings"),u=r("./zlib/messages"),h=r("./zlib/zstream"),m=Object.prototype.toString,f=0,p=-1,v=0,g=8;function y(N){if(!(this instanceof y))return new y(N);this.options=o.assign({level:p,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},N||{});var k=this.options;k.raw&&0<k.windowBits?k.windowBits=-k.windowBits:k.gzip&&0<k.windowBits&&k.windowBits<16&&(k.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var S=i.deflateInit2(this.strm,k.level,k.method,k.windowBits,k.memLevel,k.strategy);if(S!==f)throw new Error(u[S]);if(k.header&&i.deflateSetHeader(this.strm,k.header),k.dictionary){var _;if(_=typeof k.dictionary=="string"?c.string2buf(k.dictionary):m.call(k.dictionary)==="[object ArrayBuffer]"?new Uint8Array(k.dictionary):k.dictionary,(S=i.deflateSetDictionary(this.strm,_))!==f)throw new Error(u[S]);this._dict_set=!0}}function w(N,k){var S=new y(k);if(S.push(N,!0),S.err)throw S.msg||u[S.err];return S.result}y.prototype.push=function(N,k){var S,_,T=this.strm,E=this.options.chunkSize;if(this.ended)return!1;_=k===~~k?k:k===!0?4:0,typeof N=="string"?T.input=c.string2buf(N):m.call(N)==="[object ArrayBuffer]"?T.input=new Uint8Array(N):T.input=N,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new o.Buf8(E),T.next_out=0,T.avail_out=E),(S=i.deflate(T,_))!==1&&S!==f)return this.onEnd(S),!(this.ended=!0);T.avail_out!==0&&(T.avail_in!==0||_!==4&&_!==2)||(this.options.to==="string"?this.onData(c.buf2binstring(o.shrinkBuf(T.output,T.next_out))):this.onData(o.shrinkBuf(T.output,T.next_out)))}while((0<T.avail_in||T.avail_out===0)&&S!==1);return _===4?(S=i.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===f):_!==2||(this.onEnd(f),!(T.avail_out=0))},y.prototype.onData=function(N){this.chunks.push(N)},y.prototype.onEnd=function(N){N===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=N,this.msg=this.strm.msg},n.Deflate=y,n.deflate=w,n.deflateRaw=function(N,k){return(k=k||{}).raw=!0,w(N,k)},n.gzip=function(N,k){return(k=k||{}).gzip=!0,w(N,k)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,a,n){var i=r("./zlib/inflate"),o=r("./utils/common"),c=r("./utils/strings"),u=r("./zlib/constants"),h=r("./zlib/messages"),m=r("./zlib/zstream"),f=r("./zlib/gzheader"),p=Object.prototype.toString;function v(y){if(!(this instanceof v))return new v(y);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},y||{});var w=this.options;w.raw&&0<=w.windowBits&&w.windowBits<16&&(w.windowBits=-w.windowBits,w.windowBits===0&&(w.windowBits=-15)),!(0<=w.windowBits&&w.windowBits<16)||y&&y.windowBits||(w.windowBits+=32),15<w.windowBits&&w.windowBits<48&&(15&w.windowBits)==0&&(w.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var N=i.inflateInit2(this.strm,w.windowBits);if(N!==u.Z_OK)throw new Error(h[N]);this.header=new f,i.inflateGetHeader(this.strm,this.header)}function g(y,w){var N=new v(w);if(N.push(y,!0),N.err)throw N.msg||h[N.err];return N.result}v.prototype.push=function(y,w){var N,k,S,_,T,E,z=this.strm,O=this.options.chunkSize,C=this.options.dictionary,A=!1;if(this.ended)return!1;k=w===~~w?w:w===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof y=="string"?z.input=c.binstring2buf(y):p.call(y)==="[object ArrayBuffer]"?z.input=new Uint8Array(y):z.input=y,z.next_in=0,z.avail_in=z.input.length;do{if(z.avail_out===0&&(z.output=new o.Buf8(O),z.next_out=0,z.avail_out=O),(N=i.inflate(z,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&C&&(E=typeof C=="string"?c.string2buf(C):p.call(C)==="[object ArrayBuffer]"?new Uint8Array(C):C,N=i.inflateSetDictionary(this.strm,E)),N===u.Z_BUF_ERROR&&A===!0&&(N=u.Z_OK,A=!1),N!==u.Z_STREAM_END&&N!==u.Z_OK)return this.onEnd(N),!(this.ended=!0);z.next_out&&(z.avail_out!==0&&N!==u.Z_STREAM_END&&(z.avail_in!==0||k!==u.Z_FINISH&&k!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=c.utf8border(z.output,z.next_out),_=z.next_out-S,T=c.buf2string(z.output,S),z.next_out=_,z.avail_out=O-_,_&&o.arraySet(z.output,z.output,S,_,0),this.onData(T)):this.onData(o.shrinkBuf(z.output,z.next_out)))),z.avail_in===0&&z.avail_out===0&&(A=!0)}while((0<z.avail_in||z.avail_out===0)&&N!==u.Z_STREAM_END);return N===u.Z_STREAM_END&&(k=u.Z_FINISH),k===u.Z_FINISH?(N=i.inflateEnd(this.strm),this.onEnd(N),this.ended=!0,N===u.Z_OK):k!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(z.avail_out=0))},v.prototype.onData=function(y){this.chunks.push(y)},v.prototype.onEnd=function(y){y===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},n.Inflate=v,n.inflate=g,n.inflateRaw=function(y,w){return(w=w||{}).raw=!0,g(y,w)},n.ungzip=g},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,a,n){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(u){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var m=h.shift();if(m){if(typeof m!="object")throw new TypeError(m+"must be non-object");for(var f in m)m.hasOwnProperty(f)&&(u[f]=m[f])}}return u},n.shrinkBuf=function(u,h){return u.length===h?u:u.subarray?u.subarray(0,h):(u.length=h,u)};var o={arraySet:function(u,h,m,f,p){if(h.subarray&&u.subarray)u.set(h.subarray(m,m+f),p);else for(var v=0;v<f;v++)u[p+v]=h[m+v]},flattenChunks:function(u){var h,m,f,p,v,g;for(h=f=0,m=u.length;h<m;h++)f+=u[h].length;for(g=new Uint8Array(f),h=p=0,m=u.length;h<m;h++)v=u[h],g.set(v,p),p+=v.length;return g}},c={arraySet:function(u,h,m,f,p){for(var v=0;v<f;v++)u[p+v]=h[m+v]},flattenChunks:function(u){return[].concat.apply([],u)}};n.setTyped=function(u){u?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,o)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,c))},n.setTyped(i)},{}],42:[function(r,a,n){var i=r("./common"),o=!0,c=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{c=!1}for(var u=new i.Buf8(256),h=0;h<256;h++)u[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function m(f,p){if(p<65537&&(f.subarray&&c||!f.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(f,p));for(var v="",g=0;g<p;g++)v+=String.fromCharCode(f[g]);return v}u[254]=u[254]=1,n.string2buf=function(f){var p,v,g,y,w,N=f.length,k=0;for(y=0;y<N;y++)(64512&(v=f.charCodeAt(y)))==55296&&y+1<N&&(64512&(g=f.charCodeAt(y+1)))==56320&&(v=65536+(v-55296<<10)+(g-56320),y++),k+=v<128?1:v<2048?2:v<65536?3:4;for(p=new i.Buf8(k),y=w=0;w<k;y++)(64512&(v=f.charCodeAt(y)))==55296&&y+1<N&&(64512&(g=f.charCodeAt(y+1)))==56320&&(v=65536+(v-55296<<10)+(g-56320),y++),v<128?p[w++]=v:(v<2048?p[w++]=192|v>>>6:(v<65536?p[w++]=224|v>>>12:(p[w++]=240|v>>>18,p[w++]=128|v>>>12&63),p[w++]=128|v>>>6&63),p[w++]=128|63&v);return p},n.buf2binstring=function(f){return m(f,f.length)},n.binstring2buf=function(f){for(var p=new i.Buf8(f.length),v=0,g=p.length;v<g;v++)p[v]=f.charCodeAt(v);return p},n.buf2string=function(f,p){var v,g,y,w,N=p||f.length,k=new Array(2*N);for(v=g=0;v<N;)if((y=f[v++])<128)k[g++]=y;else if(4<(w=u[y]))k[g++]=65533,v+=w-1;else{for(y&=w===2?31:w===3?15:7;1<w&&v<N;)y=y<<6|63&f[v++],w--;1<w?k[g++]=65533:y<65536?k[g++]=y:(y-=65536,k[g++]=55296|y>>10&1023,k[g++]=56320|1023&y)}return m(k,g)},n.utf8border=function(f,p){var v;for((p=p||f.length)>f.length&&(p=f.length),v=p-1;0<=v&&(192&f[v])==128;)v--;return v<0||v===0?p:v+u[f[v]]>p?v:p}},{"./common":41}],43:[function(r,a,n){a.exports=function(i,o,c,u){for(var h=65535&i|0,m=i>>>16&65535|0,f=0;c!==0;){for(c-=f=2e3<c?2e3:c;m=m+(h=h+o[u++]|0)|0,--f;);h%=65521,m%=65521}return h|m<<16|0}},{}],44:[function(r,a,n){a.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,a,n){var i=(function(){for(var o,c=[],u=0;u<256;u++){o=u;for(var h=0;h<8;h++)o=1&o?3988292384^o>>>1:o>>>1;c[u]=o}return c})();a.exports=function(o,c,u,h){var m=i,f=h+u;o^=-1;for(var p=h;p<f;p++)o=o>>>8^m[255&(o^c[p])];return-1^o}},{}],46:[function(r,a,n){var i,o=r("../utils/common"),c=r("./trees"),u=r("./adler32"),h=r("./crc32"),m=r("./messages"),f=0,p=4,v=0,g=-2,y=-1,w=4,N=2,k=8,S=9,_=286,T=30,E=19,z=2*_+1,O=15,C=3,A=258,X=A+C+1,I=42,V=113,R=1,H=2,ee=3,se=4;function W(G,ue){return G.msg=m[ue],ue}function te(G){return(G<<1)-(4<G?9:0)}function J(G){for(var ue=G.length;0<=--ue;)G[ue]=0}function K(G){var ue=G.state,Y=ue.pending;Y>G.avail_out&&(Y=G.avail_out),Y!==0&&(o.arraySet(G.output,ue.pending_buf,ue.pending_out,Y,G.next_out),G.next_out+=Y,ue.pending_out+=Y,G.total_out+=Y,G.avail_out-=Y,ue.pending-=Y,ue.pending===0&&(ue.pending_out=0))}function $(G,ue){c._tr_flush_block(G,0<=G.block_start?G.block_start:-1,G.strstart-G.block_start,ue),G.block_start=G.strstart,K(G.strm)}function ie(G,ue){G.pending_buf[G.pending++]=ue}function ne(G,ue){G.pending_buf[G.pending++]=ue>>>8&255,G.pending_buf[G.pending++]=255&ue}function oe(G,ue){var Y,L,M=G.max_chain_length,B=G.strstart,ae=G.prev_length,he=G.nice_match,xe=G.strstart>G.w_size-X?G.strstart-(G.w_size-X):0,_e=G.window,Te=G.w_mask,Ee=G.prev,ze=G.strstart+A,Ie=_e[B+ae-1],Ye=_e[B+ae];G.prev_length>=G.good_match&&(M>>=2),he>G.lookahead&&(he=G.lookahead);do if(_e[(Y=ue)+ae]===Ye&&_e[Y+ae-1]===Ie&&_e[Y]===_e[B]&&_e[++Y]===_e[B+1]){B+=2,Y++;do;while(_e[++B]===_e[++Y]&&_e[++B]===_e[++Y]&&_e[++B]===_e[++Y]&&_e[++B]===_e[++Y]&&_e[++B]===_e[++Y]&&_e[++B]===_e[++Y]&&_e[++B]===_e[++Y]&&_e[++B]===_e[++Y]&&B<ze);if(L=A-(ze-B),B=ze-A,ae<L){if(G.match_start=ue,he<=(ae=L))break;Ie=_e[B+ae-1],Ye=_e[B+ae]}}while((ue=Ee[ue&Te])>xe&&--M!=0);return ae<=G.lookahead?ae:G.lookahead}function ce(G){var ue,Y,L,M,B,ae,he,xe,_e,Te,Ee=G.w_size;do{if(M=G.window_size-G.lookahead-G.strstart,G.strstart>=Ee+(Ee-X)){for(o.arraySet(G.window,G.window,Ee,Ee,0),G.match_start-=Ee,G.strstart-=Ee,G.block_start-=Ee,ue=Y=G.hash_size;L=G.head[--ue],G.head[ue]=Ee<=L?L-Ee:0,--Y;);for(ue=Y=Ee;L=G.prev[--ue],G.prev[ue]=Ee<=L?L-Ee:0,--Y;);M+=Ee}if(G.strm.avail_in===0)break;if(ae=G.strm,he=G.window,xe=G.strstart+G.lookahead,_e=M,Te=void 0,Te=ae.avail_in,_e<Te&&(Te=_e),Y=Te===0?0:(ae.avail_in-=Te,o.arraySet(he,ae.input,ae.next_in,Te,xe),ae.state.wrap===1?ae.adler=u(ae.adler,he,Te,xe):ae.state.wrap===2&&(ae.adler=h(ae.adler,he,Te,xe)),ae.next_in+=Te,ae.total_in+=Te,Te),G.lookahead+=Y,G.lookahead+G.insert>=C)for(B=G.strstart-G.insert,G.ins_h=G.window[B],G.ins_h=(G.ins_h<<G.hash_shift^G.window[B+1])&G.hash_mask;G.insert&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[B+C-1])&G.hash_mask,G.prev[B&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=B,B++,G.insert--,!(G.lookahead+G.insert<C)););}while(G.lookahead<X&&G.strm.avail_in!==0)}function U(G,ue){for(var Y,L;;){if(G.lookahead<X){if(ce(G),G.lookahead<X&&ue===f)return R;if(G.lookahead===0)break}if(Y=0,G.lookahead>=C&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+C-1])&G.hash_mask,Y=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart),Y!==0&&G.strstart-Y<=G.w_size-X&&(G.match_length=oe(G,Y)),G.match_length>=C)if(L=c._tr_tally(G,G.strstart-G.match_start,G.match_length-C),G.lookahead-=G.match_length,G.match_length<=G.max_lazy_match&&G.lookahead>=C){for(G.match_length--;G.strstart++,G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+C-1])&G.hash_mask,Y=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart,--G.match_length!=0;);G.strstart++}else G.strstart+=G.match_length,G.match_length=0,G.ins_h=G.window[G.strstart],G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+1])&G.hash_mask;else L=c._tr_tally(G,0,G.window[G.strstart]),G.lookahead--,G.strstart++;if(L&&($(G,!1),G.strm.avail_out===0))return R}return G.insert=G.strstart<C-1?G.strstart:C-1,ue===p?($(G,!0),G.strm.avail_out===0?ee:se):G.last_lit&&($(G,!1),G.strm.avail_out===0)?R:H}function F(G,ue){for(var Y,L,M;;){if(G.lookahead<X){if(ce(G),G.lookahead<X&&ue===f)return R;if(G.lookahead===0)break}if(Y=0,G.lookahead>=C&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+C-1])&G.hash_mask,Y=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart),G.prev_length=G.match_length,G.prev_match=G.match_start,G.match_length=C-1,Y!==0&&G.prev_length<G.max_lazy_match&&G.strstart-Y<=G.w_size-X&&(G.match_length=oe(G,Y),G.match_length<=5&&(G.strategy===1||G.match_length===C&&4096<G.strstart-G.match_start)&&(G.match_length=C-1)),G.prev_length>=C&&G.match_length<=G.prev_length){for(M=G.strstart+G.lookahead-C,L=c._tr_tally(G,G.strstart-1-G.prev_match,G.prev_length-C),G.lookahead-=G.prev_length-1,G.prev_length-=2;++G.strstart<=M&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+C-1])&G.hash_mask,Y=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart),--G.prev_length!=0;);if(G.match_available=0,G.match_length=C-1,G.strstart++,L&&($(G,!1),G.strm.avail_out===0))return R}else if(G.match_available){if((L=c._tr_tally(G,0,G.window[G.strstart-1]))&&$(G,!1),G.strstart++,G.lookahead--,G.strm.avail_out===0)return R}else G.match_available=1,G.strstart++,G.lookahead--}return G.match_available&&(L=c._tr_tally(G,0,G.window[G.strstart-1]),G.match_available=0),G.insert=G.strstart<C-1?G.strstart:C-1,ue===p?($(G,!0),G.strm.avail_out===0?ee:se):G.last_lit&&($(G,!1),G.strm.avail_out===0)?R:H}function Z(G,ue,Y,L,M){this.good_length=G,this.max_lazy=ue,this.nice_length=Y,this.max_chain=L,this.func=M}function q(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=k,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*z),this.dyn_dtree=new o.Buf16(2*(2*T+1)),this.bl_tree=new o.Buf16(2*(2*E+1)),J(this.dyn_ltree),J(this.dyn_dtree),J(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(O+1),this.heap=new o.Buf16(2*_+1),J(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*_+1),J(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Q(G){var ue;return G&&G.state?(G.total_in=G.total_out=0,G.data_type=N,(ue=G.state).pending=0,ue.pending_out=0,ue.wrap<0&&(ue.wrap=-ue.wrap),ue.status=ue.wrap?I:V,G.adler=ue.wrap===2?0:1,ue.last_flush=f,c._tr_init(ue),v):W(G,g)}function le(G){var ue=Q(G);return ue===v&&(function(Y){Y.window_size=2*Y.w_size,J(Y.head),Y.max_lazy_match=i[Y.level].max_lazy,Y.good_match=i[Y.level].good_length,Y.nice_match=i[Y.level].nice_length,Y.max_chain_length=i[Y.level].max_chain,Y.strstart=0,Y.block_start=0,Y.lookahead=0,Y.insert=0,Y.match_length=Y.prev_length=C-1,Y.match_available=0,Y.ins_h=0})(G.state),ue}function me(G,ue,Y,L,M,B){if(!G)return g;var ae=1;if(ue===y&&(ue=6),L<0?(ae=0,L=-L):15<L&&(ae=2,L-=16),M<1||S<M||Y!==k||L<8||15<L||ue<0||9<ue||B<0||w<B)return W(G,g);L===8&&(L=9);var he=new q;return(G.state=he).strm=G,he.wrap=ae,he.gzhead=null,he.w_bits=L,he.w_size=1<<he.w_bits,he.w_mask=he.w_size-1,he.hash_bits=M+7,he.hash_size=1<<he.hash_bits,he.hash_mask=he.hash_size-1,he.hash_shift=~~((he.hash_bits+C-1)/C),he.window=new o.Buf8(2*he.w_size),he.head=new o.Buf16(he.hash_size),he.prev=new o.Buf16(he.w_size),he.lit_bufsize=1<<M+6,he.pending_buf_size=4*he.lit_bufsize,he.pending_buf=new o.Buf8(he.pending_buf_size),he.d_buf=1*he.lit_bufsize,he.l_buf=3*he.lit_bufsize,he.level=ue,he.strategy=B,he.method=Y,le(G)}i=[new Z(0,0,0,0,function(G,ue){var Y=65535;for(Y>G.pending_buf_size-5&&(Y=G.pending_buf_size-5);;){if(G.lookahead<=1){if(ce(G),G.lookahead===0&&ue===f)return R;if(G.lookahead===0)break}G.strstart+=G.lookahead,G.lookahead=0;var L=G.block_start+Y;if((G.strstart===0||G.strstart>=L)&&(G.lookahead=G.strstart-L,G.strstart=L,$(G,!1),G.strm.avail_out===0)||G.strstart-G.block_start>=G.w_size-X&&($(G,!1),G.strm.avail_out===0))return R}return G.insert=0,ue===p?($(G,!0),G.strm.avail_out===0?ee:se):(G.strstart>G.block_start&&($(G,!1),G.strm.avail_out),R)}),new Z(4,4,8,4,U),new Z(4,5,16,8,U),new Z(4,6,32,32,U),new Z(4,4,16,16,F),new Z(8,16,32,32,F),new Z(8,16,128,128,F),new Z(8,32,128,256,F),new Z(32,128,258,1024,F),new Z(32,258,258,4096,F)],n.deflateInit=function(G,ue){return me(G,ue,k,15,8,0)},n.deflateInit2=me,n.deflateReset=le,n.deflateResetKeep=Q,n.deflateSetHeader=function(G,ue){return G&&G.state?G.state.wrap!==2?g:(G.state.gzhead=ue,v):g},n.deflate=function(G,ue){var Y,L,M,B;if(!G||!G.state||5<ue||ue<0)return G?W(G,g):g;if(L=G.state,!G.output||!G.input&&G.avail_in!==0||L.status===666&&ue!==p)return W(G,G.avail_out===0?-5:g);if(L.strm=G,Y=L.last_flush,L.last_flush=ue,L.status===I)if(L.wrap===2)G.adler=0,ie(L,31),ie(L,139),ie(L,8),L.gzhead?(ie(L,(L.gzhead.text?1:0)+(L.gzhead.hcrc?2:0)+(L.gzhead.extra?4:0)+(L.gzhead.name?8:0)+(L.gzhead.comment?16:0)),ie(L,255&L.gzhead.time),ie(L,L.gzhead.time>>8&255),ie(L,L.gzhead.time>>16&255),ie(L,L.gzhead.time>>24&255),ie(L,L.level===9?2:2<=L.strategy||L.level<2?4:0),ie(L,255&L.gzhead.os),L.gzhead.extra&&L.gzhead.extra.length&&(ie(L,255&L.gzhead.extra.length),ie(L,L.gzhead.extra.length>>8&255)),L.gzhead.hcrc&&(G.adler=h(G.adler,L.pending_buf,L.pending,0)),L.gzindex=0,L.status=69):(ie(L,0),ie(L,0),ie(L,0),ie(L,0),ie(L,0),ie(L,L.level===9?2:2<=L.strategy||L.level<2?4:0),ie(L,3),L.status=V);else{var ae=k+(L.w_bits-8<<4)<<8;ae|=(2<=L.strategy||L.level<2?0:L.level<6?1:L.level===6?2:3)<<6,L.strstart!==0&&(ae|=32),ae+=31-ae%31,L.status=V,ne(L,ae),L.strstart!==0&&(ne(L,G.adler>>>16),ne(L,65535&G.adler)),G.adler=1}if(L.status===69)if(L.gzhead.extra){for(M=L.pending;L.gzindex<(65535&L.gzhead.extra.length)&&(L.pending!==L.pending_buf_size||(L.gzhead.hcrc&&L.pending>M&&(G.adler=h(G.adler,L.pending_buf,L.pending-M,M)),K(G),M=L.pending,L.pending!==L.pending_buf_size));)ie(L,255&L.gzhead.extra[L.gzindex]),L.gzindex++;L.gzhead.hcrc&&L.pending>M&&(G.adler=h(G.adler,L.pending_buf,L.pending-M,M)),L.gzindex===L.gzhead.extra.length&&(L.gzindex=0,L.status=73)}else L.status=73;if(L.status===73)if(L.gzhead.name){M=L.pending;do{if(L.pending===L.pending_buf_size&&(L.gzhead.hcrc&&L.pending>M&&(G.adler=h(G.adler,L.pending_buf,L.pending-M,M)),K(G),M=L.pending,L.pending===L.pending_buf_size)){B=1;break}B=L.gzindex<L.gzhead.name.length?255&L.gzhead.name.charCodeAt(L.gzindex++):0,ie(L,B)}while(B!==0);L.gzhead.hcrc&&L.pending>M&&(G.adler=h(G.adler,L.pending_buf,L.pending-M,M)),B===0&&(L.gzindex=0,L.status=91)}else L.status=91;if(L.status===91)if(L.gzhead.comment){M=L.pending;do{if(L.pending===L.pending_buf_size&&(L.gzhead.hcrc&&L.pending>M&&(G.adler=h(G.adler,L.pending_buf,L.pending-M,M)),K(G),M=L.pending,L.pending===L.pending_buf_size)){B=1;break}B=L.gzindex<L.gzhead.comment.length?255&L.gzhead.comment.charCodeAt(L.gzindex++):0,ie(L,B)}while(B!==0);L.gzhead.hcrc&&L.pending>M&&(G.adler=h(G.adler,L.pending_buf,L.pending-M,M)),B===0&&(L.status=103)}else L.status=103;if(L.status===103&&(L.gzhead.hcrc?(L.pending+2>L.pending_buf_size&&K(G),L.pending+2<=L.pending_buf_size&&(ie(L,255&G.adler),ie(L,G.adler>>8&255),G.adler=0,L.status=V)):L.status=V),L.pending!==0){if(K(G),G.avail_out===0)return L.last_flush=-1,v}else if(G.avail_in===0&&te(ue)<=te(Y)&&ue!==p)return W(G,-5);if(L.status===666&&G.avail_in!==0)return W(G,-5);if(G.avail_in!==0||L.lookahead!==0||ue!==f&&L.status!==666){var he=L.strategy===2?(function(xe,_e){for(var Te;;){if(xe.lookahead===0&&(ce(xe),xe.lookahead===0)){if(_e===f)return R;break}if(xe.match_length=0,Te=c._tr_tally(xe,0,xe.window[xe.strstart]),xe.lookahead--,xe.strstart++,Te&&($(xe,!1),xe.strm.avail_out===0))return R}return xe.insert=0,_e===p?($(xe,!0),xe.strm.avail_out===0?ee:se):xe.last_lit&&($(xe,!1),xe.strm.avail_out===0)?R:H})(L,ue):L.strategy===3?(function(xe,_e){for(var Te,Ee,ze,Ie,Ye=xe.window;;){if(xe.lookahead<=A){if(ce(xe),xe.lookahead<=A&&_e===f)return R;if(xe.lookahead===0)break}if(xe.match_length=0,xe.lookahead>=C&&0<xe.strstart&&(Ee=Ye[ze=xe.strstart-1])===Ye[++ze]&&Ee===Ye[++ze]&&Ee===Ye[++ze]){Ie=xe.strstart+A;do;while(Ee===Ye[++ze]&&Ee===Ye[++ze]&&Ee===Ye[++ze]&&Ee===Ye[++ze]&&Ee===Ye[++ze]&&Ee===Ye[++ze]&&Ee===Ye[++ze]&&Ee===Ye[++ze]&&ze<Ie);xe.match_length=A-(Ie-ze),xe.match_length>xe.lookahead&&(xe.match_length=xe.lookahead)}if(xe.match_length>=C?(Te=c._tr_tally(xe,1,xe.match_length-C),xe.lookahead-=xe.match_length,xe.strstart+=xe.match_length,xe.match_length=0):(Te=c._tr_tally(xe,0,xe.window[xe.strstart]),xe.lookahead--,xe.strstart++),Te&&($(xe,!1),xe.strm.avail_out===0))return R}return xe.insert=0,_e===p?($(xe,!0),xe.strm.avail_out===0?ee:se):xe.last_lit&&($(xe,!1),xe.strm.avail_out===0)?R:H})(L,ue):i[L.level].func(L,ue);if(he!==ee&&he!==se||(L.status=666),he===R||he===ee)return G.avail_out===0&&(L.last_flush=-1),v;if(he===H&&(ue===1?c._tr_align(L):ue!==5&&(c._tr_stored_block(L,0,0,!1),ue===3&&(J(L.head),L.lookahead===0&&(L.strstart=0,L.block_start=0,L.insert=0))),K(G),G.avail_out===0))return L.last_flush=-1,v}return ue!==p?v:L.wrap<=0?1:(L.wrap===2?(ie(L,255&G.adler),ie(L,G.adler>>8&255),ie(L,G.adler>>16&255),ie(L,G.adler>>24&255),ie(L,255&G.total_in),ie(L,G.total_in>>8&255),ie(L,G.total_in>>16&255),ie(L,G.total_in>>24&255)):(ne(L,G.adler>>>16),ne(L,65535&G.adler)),K(G),0<L.wrap&&(L.wrap=-L.wrap),L.pending!==0?v:1)},n.deflateEnd=function(G){var ue;return G&&G.state?(ue=G.state.status)!==I&&ue!==69&&ue!==73&&ue!==91&&ue!==103&&ue!==V&&ue!==666?W(G,g):(G.state=null,ue===V?W(G,-3):v):g},n.deflateSetDictionary=function(G,ue){var Y,L,M,B,ae,he,xe,_e,Te=ue.length;if(!G||!G.state||(B=(Y=G.state).wrap)===2||B===1&&Y.status!==I||Y.lookahead)return g;for(B===1&&(G.adler=u(G.adler,ue,Te,0)),Y.wrap=0,Te>=Y.w_size&&(B===0&&(J(Y.head),Y.strstart=0,Y.block_start=0,Y.insert=0),_e=new o.Buf8(Y.w_size),o.arraySet(_e,ue,Te-Y.w_size,Y.w_size,0),ue=_e,Te=Y.w_size),ae=G.avail_in,he=G.next_in,xe=G.input,G.avail_in=Te,G.next_in=0,G.input=ue,ce(Y);Y.lookahead>=C;){for(L=Y.strstart,M=Y.lookahead-(C-1);Y.ins_h=(Y.ins_h<<Y.hash_shift^Y.window[L+C-1])&Y.hash_mask,Y.prev[L&Y.w_mask]=Y.head[Y.ins_h],Y.head[Y.ins_h]=L,L++,--M;);Y.strstart=L,Y.lookahead=C-1,ce(Y)}return Y.strstart+=Y.lookahead,Y.block_start=Y.strstart,Y.insert=Y.lookahead,Y.lookahead=0,Y.match_length=Y.prev_length=C-1,Y.match_available=0,G.next_in=he,G.input=xe,G.avail_in=ae,Y.wrap=B,v},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,a,n){a.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,a,n){a.exports=function(i,o){var c,u,h,m,f,p,v,g,y,w,N,k,S,_,T,E,z,O,C,A,X,I,V,R,H;c=i.state,u=i.next_in,R=i.input,h=u+(i.avail_in-5),m=i.next_out,H=i.output,f=m-(o-i.avail_out),p=m+(i.avail_out-257),v=c.dmax,g=c.wsize,y=c.whave,w=c.wnext,N=c.window,k=c.hold,S=c.bits,_=c.lencode,T=c.distcode,E=(1<<c.lenbits)-1,z=(1<<c.distbits)-1;e:do{S<15&&(k+=R[u++]<<S,S+=8,k+=R[u++]<<S,S+=8),O=_[k&E];t:for(;;){if(k>>>=C=O>>>24,S-=C,(C=O>>>16&255)===0)H[m++]=65535&O;else{if(!(16&C)){if((64&C)==0){O=_[(65535&O)+(k&(1<<C)-1)];continue t}if(32&C){c.mode=12;break e}i.msg="invalid literal/length code",c.mode=30;break e}A=65535&O,(C&=15)&&(S<C&&(k+=R[u++]<<S,S+=8),A+=k&(1<<C)-1,k>>>=C,S-=C),S<15&&(k+=R[u++]<<S,S+=8,k+=R[u++]<<S,S+=8),O=T[k&z];s:for(;;){if(k>>>=C=O>>>24,S-=C,!(16&(C=O>>>16&255))){if((64&C)==0){O=T[(65535&O)+(k&(1<<C)-1)];continue s}i.msg="invalid distance code",c.mode=30;break e}if(X=65535&O,S<(C&=15)&&(k+=R[u++]<<S,(S+=8)<C&&(k+=R[u++]<<S,S+=8)),v<(X+=k&(1<<C)-1)){i.msg="invalid distance too far back",c.mode=30;break e}if(k>>>=C,S-=C,(C=m-f)<X){if(y<(C=X-C)&&c.sane){i.msg="invalid distance too far back",c.mode=30;break e}if(V=N,(I=0)===w){if(I+=g-C,C<A){for(A-=C;H[m++]=N[I++],--C;);I=m-X,V=H}}else if(w<C){if(I+=g+w-C,(C-=w)<A){for(A-=C;H[m++]=N[I++],--C;);if(I=0,w<A){for(A-=C=w;H[m++]=N[I++],--C;);I=m-X,V=H}}}else if(I+=w-C,C<A){for(A-=C;H[m++]=N[I++],--C;);I=m-X,V=H}for(;2<A;)H[m++]=V[I++],H[m++]=V[I++],H[m++]=V[I++],A-=3;A&&(H[m++]=V[I++],1<A&&(H[m++]=V[I++]))}else{for(I=m-X;H[m++]=H[I++],H[m++]=H[I++],H[m++]=H[I++],2<(A-=3););A&&(H[m++]=H[I++],1<A&&(H[m++]=H[I++]))}break}}break}}while(u<h&&m<p);u-=A=S>>3,k&=(1<<(S-=A<<3))-1,i.next_in=u,i.next_out=m,i.avail_in=u<h?h-u+5:5-(u-h),i.avail_out=m<p?p-m+257:257-(m-p),c.hold=k,c.bits=S}},{}],49:[function(r,a,n){var i=r("../utils/common"),o=r("./adler32"),c=r("./crc32"),u=r("./inffast"),h=r("./inftrees"),m=1,f=2,p=0,v=-2,g=1,y=852,w=592;function N(I){return(I>>>24&255)+(I>>>8&65280)+((65280&I)<<8)+((255&I)<<24)}function k(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(I){var V;return I&&I.state?(V=I.state,I.total_in=I.total_out=V.total=0,I.msg="",V.wrap&&(I.adler=1&V.wrap),V.mode=g,V.last=0,V.havedict=0,V.dmax=32768,V.head=null,V.hold=0,V.bits=0,V.lencode=V.lendyn=new i.Buf32(y),V.distcode=V.distdyn=new i.Buf32(w),V.sane=1,V.back=-1,p):v}function _(I){var V;return I&&I.state?((V=I.state).wsize=0,V.whave=0,V.wnext=0,S(I)):v}function T(I,V){var R,H;return I&&I.state?(H=I.state,V<0?(R=0,V=-V):(R=1+(V>>4),V<48&&(V&=15)),V&&(V<8||15<V)?v:(H.window!==null&&H.wbits!==V&&(H.window=null),H.wrap=R,H.wbits=V,_(I))):v}function E(I,V){var R,H;return I?(H=new k,(I.state=H).window=null,(R=T(I,V))!==p&&(I.state=null),R):v}var z,O,C=!0;function A(I){if(C){var V;for(z=new i.Buf32(512),O=new i.Buf32(32),V=0;V<144;)I.lens[V++]=8;for(;V<256;)I.lens[V++]=9;for(;V<280;)I.lens[V++]=7;for(;V<288;)I.lens[V++]=8;for(h(m,I.lens,0,288,z,0,I.work,{bits:9}),V=0;V<32;)I.lens[V++]=5;h(f,I.lens,0,32,O,0,I.work,{bits:5}),C=!1}I.lencode=z,I.lenbits=9,I.distcode=O,I.distbits=5}function X(I,V,R,H){var ee,se=I.state;return se.window===null&&(se.wsize=1<<se.wbits,se.wnext=0,se.whave=0,se.window=new i.Buf8(se.wsize)),H>=se.wsize?(i.arraySet(se.window,V,R-se.wsize,se.wsize,0),se.wnext=0,se.whave=se.wsize):(H<(ee=se.wsize-se.wnext)&&(ee=H),i.arraySet(se.window,V,R-H,ee,se.wnext),(H-=ee)?(i.arraySet(se.window,V,R-H,H,0),se.wnext=H,se.whave=se.wsize):(se.wnext+=ee,se.wnext===se.wsize&&(se.wnext=0),se.whave<se.wsize&&(se.whave+=ee))),0}n.inflateReset=_,n.inflateReset2=T,n.inflateResetKeep=S,n.inflateInit=function(I){return E(I,15)},n.inflateInit2=E,n.inflate=function(I,V){var R,H,ee,se,W,te,J,K,$,ie,ne,oe,ce,U,F,Z,q,Q,le,me,G,ue,Y,L,M=0,B=new i.Buf8(4),ae=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!I||!I.state||!I.output||!I.input&&I.avail_in!==0)return v;(R=I.state).mode===12&&(R.mode=13),W=I.next_out,ee=I.output,J=I.avail_out,se=I.next_in,H=I.input,te=I.avail_in,K=R.hold,$=R.bits,ie=te,ne=J,ue=p;e:for(;;)switch(R.mode){case g:if(R.wrap===0){R.mode=13;break}for(;$<16;){if(te===0)break e;te--,K+=H[se++]<<$,$+=8}if(2&R.wrap&&K===35615){B[R.check=0]=255&K,B[1]=K>>>8&255,R.check=c(R.check,B,2,0),$=K=0,R.mode=2;break}if(R.flags=0,R.head&&(R.head.done=!1),!(1&R.wrap)||(((255&K)<<8)+(K>>8))%31){I.msg="incorrect header check",R.mode=30;break}if((15&K)!=8){I.msg="unknown compression method",R.mode=30;break}if($-=4,G=8+(15&(K>>>=4)),R.wbits===0)R.wbits=G;else if(G>R.wbits){I.msg="invalid window size",R.mode=30;break}R.dmax=1<<G,I.adler=R.check=1,R.mode=512&K?10:12,$=K=0;break;case 2:for(;$<16;){if(te===0)break e;te--,K+=H[se++]<<$,$+=8}if(R.flags=K,(255&R.flags)!=8){I.msg="unknown compression method",R.mode=30;break}if(57344&R.flags){I.msg="unknown header flags set",R.mode=30;break}R.head&&(R.head.text=K>>8&1),512&R.flags&&(B[0]=255&K,B[1]=K>>>8&255,R.check=c(R.check,B,2,0)),$=K=0,R.mode=3;case 3:for(;$<32;){if(te===0)break e;te--,K+=H[se++]<<$,$+=8}R.head&&(R.head.time=K),512&R.flags&&(B[0]=255&K,B[1]=K>>>8&255,B[2]=K>>>16&255,B[3]=K>>>24&255,R.check=c(R.check,B,4,0)),$=K=0,R.mode=4;case 4:for(;$<16;){if(te===0)break e;te--,K+=H[se++]<<$,$+=8}R.head&&(R.head.xflags=255&K,R.head.os=K>>8),512&R.flags&&(B[0]=255&K,B[1]=K>>>8&255,R.check=c(R.check,B,2,0)),$=K=0,R.mode=5;case 5:if(1024&R.flags){for(;$<16;){if(te===0)break e;te--,K+=H[se++]<<$,$+=8}R.length=K,R.head&&(R.head.extra_len=K),512&R.flags&&(B[0]=255&K,B[1]=K>>>8&255,R.check=c(R.check,B,2,0)),$=K=0}else R.head&&(R.head.extra=null);R.mode=6;case 6:if(1024&R.flags&&(te<(oe=R.length)&&(oe=te),oe&&(R.head&&(G=R.head.extra_len-R.length,R.head.extra||(R.head.extra=new Array(R.head.extra_len)),i.arraySet(R.head.extra,H,se,oe,G)),512&R.flags&&(R.check=c(R.check,H,oe,se)),te-=oe,se+=oe,R.length-=oe),R.length))break e;R.length=0,R.mode=7;case 7:if(2048&R.flags){if(te===0)break e;for(oe=0;G=H[se+oe++],R.head&&G&&R.length<65536&&(R.head.name+=String.fromCharCode(G)),G&&oe<te;);if(512&R.flags&&(R.check=c(R.check,H,oe,se)),te-=oe,se+=oe,G)break e}else R.head&&(R.head.name=null);R.length=0,R.mode=8;case 8:if(4096&R.flags){if(te===0)break e;for(oe=0;G=H[se+oe++],R.head&&G&&R.length<65536&&(R.head.comment+=String.fromCharCode(G)),G&&oe<te;);if(512&R.flags&&(R.check=c(R.check,H,oe,se)),te-=oe,se+=oe,G)break e}else R.head&&(R.head.comment=null);R.mode=9;case 9:if(512&R.flags){for(;$<16;){if(te===0)break e;te--,K+=H[se++]<<$,$+=8}if(K!==(65535&R.check)){I.msg="header crc mismatch",R.mode=30;break}$=K=0}R.head&&(R.head.hcrc=R.flags>>9&1,R.head.done=!0),I.adler=R.check=0,R.mode=12;break;case 10:for(;$<32;){if(te===0)break e;te--,K+=H[se++]<<$,$+=8}I.adler=R.check=N(K),$=K=0,R.mode=11;case 11:if(R.havedict===0)return I.next_out=W,I.avail_out=J,I.next_in=se,I.avail_in=te,R.hold=K,R.bits=$,2;I.adler=R.check=1,R.mode=12;case 12:if(V===5||V===6)break e;case 13:if(R.last){K>>>=7&$,$-=7&$,R.mode=27;break}for(;$<3;){if(te===0)break e;te--,K+=H[se++]<<$,$+=8}switch(R.last=1&K,$-=1,3&(K>>>=1)){case 0:R.mode=14;break;case 1:if(A(R),R.mode=20,V!==6)break;K>>>=2,$-=2;break e;case 2:R.mode=17;break;case 3:I.msg="invalid block type",R.mode=30}K>>>=2,$-=2;break;case 14:for(K>>>=7&$,$-=7&$;$<32;){if(te===0)break e;te--,K+=H[se++]<<$,$+=8}if((65535&K)!=(K>>>16^65535)){I.msg="invalid stored block lengths",R.mode=30;break}if(R.length=65535&K,$=K=0,R.mode=15,V===6)break e;case 15:R.mode=16;case 16:if(oe=R.length){if(te<oe&&(oe=te),J<oe&&(oe=J),oe===0)break e;i.arraySet(ee,H,se,oe,W),te-=oe,se+=oe,J-=oe,W+=oe,R.length-=oe;break}R.mode=12;break;case 17:for(;$<14;){if(te===0)break e;te--,K+=H[se++]<<$,$+=8}if(R.nlen=257+(31&K),K>>>=5,$-=5,R.ndist=1+(31&K),K>>>=5,$-=5,R.ncode=4+(15&K),K>>>=4,$-=4,286<R.nlen||30<R.ndist){I.msg="too many length or distance symbols",R.mode=30;break}R.have=0,R.mode=18;case 18:for(;R.have<R.ncode;){for(;$<3;){if(te===0)break e;te--,K+=H[se++]<<$,$+=8}R.lens[ae[R.have++]]=7&K,K>>>=3,$-=3}for(;R.have<19;)R.lens[ae[R.have++]]=0;if(R.lencode=R.lendyn,R.lenbits=7,Y={bits:R.lenbits},ue=h(0,R.lens,0,19,R.lencode,0,R.work,Y),R.lenbits=Y.bits,ue){I.msg="invalid code lengths set",R.mode=30;break}R.have=0,R.mode=19;case 19:for(;R.have<R.nlen+R.ndist;){for(;Z=(M=R.lencode[K&(1<<R.lenbits)-1])>>>16&255,q=65535&M,!((F=M>>>24)<=$);){if(te===0)break e;te--,K+=H[se++]<<$,$+=8}if(q<16)K>>>=F,$-=F,R.lens[R.have++]=q;else{if(q===16){for(L=F+2;$<L;){if(te===0)break e;te--,K+=H[se++]<<$,$+=8}if(K>>>=F,$-=F,R.have===0){I.msg="invalid bit length repeat",R.mode=30;break}G=R.lens[R.have-1],oe=3+(3&K),K>>>=2,$-=2}else if(q===17){for(L=F+3;$<L;){if(te===0)break e;te--,K+=H[se++]<<$,$+=8}$-=F,G=0,oe=3+(7&(K>>>=F)),K>>>=3,$-=3}else{for(L=F+7;$<L;){if(te===0)break e;te--,K+=H[se++]<<$,$+=8}$-=F,G=0,oe=11+(127&(K>>>=F)),K>>>=7,$-=7}if(R.have+oe>R.nlen+R.ndist){I.msg="invalid bit length repeat",R.mode=30;break}for(;oe--;)R.lens[R.have++]=G}}if(R.mode===30)break;if(R.lens[256]===0){I.msg="invalid code -- missing end-of-block",R.mode=30;break}if(R.lenbits=9,Y={bits:R.lenbits},ue=h(m,R.lens,0,R.nlen,R.lencode,0,R.work,Y),R.lenbits=Y.bits,ue){I.msg="invalid literal/lengths set",R.mode=30;break}if(R.distbits=6,R.distcode=R.distdyn,Y={bits:R.distbits},ue=h(f,R.lens,R.nlen,R.ndist,R.distcode,0,R.work,Y),R.distbits=Y.bits,ue){I.msg="invalid distances set",R.mode=30;break}if(R.mode=20,V===6)break e;case 20:R.mode=21;case 21:if(6<=te&&258<=J){I.next_out=W,I.avail_out=J,I.next_in=se,I.avail_in=te,R.hold=K,R.bits=$,u(I,ne),W=I.next_out,ee=I.output,J=I.avail_out,se=I.next_in,H=I.input,te=I.avail_in,K=R.hold,$=R.bits,R.mode===12&&(R.back=-1);break}for(R.back=0;Z=(M=R.lencode[K&(1<<R.lenbits)-1])>>>16&255,q=65535&M,!((F=M>>>24)<=$);){if(te===0)break e;te--,K+=H[se++]<<$,$+=8}if(Z&&(240&Z)==0){for(Q=F,le=Z,me=q;Z=(M=R.lencode[me+((K&(1<<Q+le)-1)>>Q)])>>>16&255,q=65535&M,!(Q+(F=M>>>24)<=$);){if(te===0)break e;te--,K+=H[se++]<<$,$+=8}K>>>=Q,$-=Q,R.back+=Q}if(K>>>=F,$-=F,R.back+=F,R.length=q,Z===0){R.mode=26;break}if(32&Z){R.back=-1,R.mode=12;break}if(64&Z){I.msg="invalid literal/length code",R.mode=30;break}R.extra=15&Z,R.mode=22;case 22:if(R.extra){for(L=R.extra;$<L;){if(te===0)break e;te--,K+=H[se++]<<$,$+=8}R.length+=K&(1<<R.extra)-1,K>>>=R.extra,$-=R.extra,R.back+=R.extra}R.was=R.length,R.mode=23;case 23:for(;Z=(M=R.distcode[K&(1<<R.distbits)-1])>>>16&255,q=65535&M,!((F=M>>>24)<=$);){if(te===0)break e;te--,K+=H[se++]<<$,$+=8}if((240&Z)==0){for(Q=F,le=Z,me=q;Z=(M=R.distcode[me+((K&(1<<Q+le)-1)>>Q)])>>>16&255,q=65535&M,!(Q+(F=M>>>24)<=$);){if(te===0)break e;te--,K+=H[se++]<<$,$+=8}K>>>=Q,$-=Q,R.back+=Q}if(K>>>=F,$-=F,R.back+=F,64&Z){I.msg="invalid distance code",R.mode=30;break}R.offset=q,R.extra=15&Z,R.mode=24;case 24:if(R.extra){for(L=R.extra;$<L;){if(te===0)break e;te--,K+=H[se++]<<$,$+=8}R.offset+=K&(1<<R.extra)-1,K>>>=R.extra,$-=R.extra,R.back+=R.extra}if(R.offset>R.dmax){I.msg="invalid distance too far back",R.mode=30;break}R.mode=25;case 25:if(J===0)break e;if(oe=ne-J,R.offset>oe){if((oe=R.offset-oe)>R.whave&&R.sane){I.msg="invalid distance too far back",R.mode=30;break}ce=oe>R.wnext?(oe-=R.wnext,R.wsize-oe):R.wnext-oe,oe>R.length&&(oe=R.length),U=R.window}else U=ee,ce=W-R.offset,oe=R.length;for(J<oe&&(oe=J),J-=oe,R.length-=oe;ee[W++]=U[ce++],--oe;);R.length===0&&(R.mode=21);break;case 26:if(J===0)break e;ee[W++]=R.length,J--,R.mode=21;break;case 27:if(R.wrap){for(;$<32;){if(te===0)break e;te--,K|=H[se++]<<$,$+=8}if(ne-=J,I.total_out+=ne,R.total+=ne,ne&&(I.adler=R.check=R.flags?c(R.check,ee,ne,W-ne):o(R.check,ee,ne,W-ne)),ne=J,(R.flags?K:N(K))!==R.check){I.msg="incorrect data check",R.mode=30;break}$=K=0}R.mode=28;case 28:if(R.wrap&&R.flags){for(;$<32;){if(te===0)break e;te--,K+=H[se++]<<$,$+=8}if(K!==(4294967295&R.total)){I.msg="incorrect length check",R.mode=30;break}$=K=0}R.mode=29;case 29:ue=1;break e;case 30:ue=-3;break e;case 31:return-4;case 32:default:return v}return I.next_out=W,I.avail_out=J,I.next_in=se,I.avail_in=te,R.hold=K,R.bits=$,(R.wsize||ne!==I.avail_out&&R.mode<30&&(R.mode<27||V!==4))&&X(I,I.output,I.next_out,ne-I.avail_out)?(R.mode=31,-4):(ie-=I.avail_in,ne-=I.avail_out,I.total_in+=ie,I.total_out+=ne,R.total+=ne,R.wrap&&ne&&(I.adler=R.check=R.flags?c(R.check,ee,ne,I.next_out-ne):o(R.check,ee,ne,I.next_out-ne)),I.data_type=R.bits+(R.last?64:0)+(R.mode===12?128:0)+(R.mode===20||R.mode===15?256:0),(ie==0&&ne===0||V===4)&&ue===p&&(ue=-5),ue)},n.inflateEnd=function(I){if(!I||!I.state)return v;var V=I.state;return V.window&&(V.window=null),I.state=null,p},n.inflateGetHeader=function(I,V){var R;return I&&I.state?(2&(R=I.state).wrap)==0?v:((R.head=V).done=!1,p):v},n.inflateSetDictionary=function(I,V){var R,H=V.length;return I&&I.state?(R=I.state).wrap!==0&&R.mode!==11?v:R.mode===11&&o(1,V,H,0)!==R.check?-3:X(I,V,H,H)?(R.mode=31,-4):(R.havedict=1,p):v},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,a,n){var i=r("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];a.exports=function(m,f,p,v,g,y,w,N){var k,S,_,T,E,z,O,C,A,X=N.bits,I=0,V=0,R=0,H=0,ee=0,se=0,W=0,te=0,J=0,K=0,$=null,ie=0,ne=new i.Buf16(16),oe=new i.Buf16(16),ce=null,U=0;for(I=0;I<=15;I++)ne[I]=0;for(V=0;V<v;V++)ne[f[p+V]]++;for(ee=X,H=15;1<=H&&ne[H]===0;H--);if(H<ee&&(ee=H),H===0)return g[y++]=20971520,g[y++]=20971520,N.bits=1,0;for(R=1;R<H&&ne[R]===0;R++);for(ee<R&&(ee=R),I=te=1;I<=15;I++)if(te<<=1,(te-=ne[I])<0)return-1;if(0<te&&(m===0||H!==1))return-1;for(oe[1]=0,I=1;I<15;I++)oe[I+1]=oe[I]+ne[I];for(V=0;V<v;V++)f[p+V]!==0&&(w[oe[f[p+V]]++]=V);if(z=m===0?($=ce=w,19):m===1?($=o,ie-=257,ce=c,U-=257,256):($=u,ce=h,-1),I=R,E=y,W=V=K=0,_=-1,T=(J=1<<(se=ee))-1,m===1&&852<J||m===2&&592<J)return 1;for(;;){for(O=I-W,A=w[V]<z?(C=0,w[V]):w[V]>z?(C=ce[U+w[V]],$[ie+w[V]]):(C=96,0),k=1<<I-W,R=S=1<<se;g[E+(K>>W)+(S-=k)]=O<<24|C<<16|A|0,S!==0;);for(k=1<<I-1;K&k;)k>>=1;if(k!==0?(K&=k-1,K+=k):K=0,V++,--ne[I]==0){if(I===H)break;I=f[p+w[V]]}if(ee<I&&(K&T)!==_){for(W===0&&(W=ee),E+=R,te=1<<(se=I-W);se+W<H&&!((te-=ne[se+W])<=0);)se++,te<<=1;if(J+=1<<se,m===1&&852<J||m===2&&592<J)return 1;g[_=K&T]=ee<<24|se<<16|E-y|0}}return K!==0&&(g[E+K]=I-W<<24|64<<16|0),N.bits=ee,0}},{"../utils/common":41}],51:[function(r,a,n){a.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,a,n){var i=r("../utils/common"),o=0,c=1;function u(M){for(var B=M.length;0<=--B;)M[B]=0}var h=0,m=29,f=256,p=f+1+m,v=30,g=19,y=2*p+1,w=15,N=16,k=7,S=256,_=16,T=17,E=18,z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],O=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],X=new Array(2*(p+2));u(X);var I=new Array(2*v);u(I);var V=new Array(512);u(V);var R=new Array(256);u(R);var H=new Array(m);u(H);var ee,se,W,te=new Array(v);function J(M,B,ae,he,xe){this.static_tree=M,this.extra_bits=B,this.extra_base=ae,this.elems=he,this.max_length=xe,this.has_stree=M&&M.length}function K(M,B){this.dyn_tree=M,this.max_code=0,this.stat_desc=B}function $(M){return M<256?V[M]:V[256+(M>>>7)]}function ie(M,B){M.pending_buf[M.pending++]=255&B,M.pending_buf[M.pending++]=B>>>8&255}function ne(M,B,ae){M.bi_valid>N-ae?(M.bi_buf|=B<<M.bi_valid&65535,ie(M,M.bi_buf),M.bi_buf=B>>N-M.bi_valid,M.bi_valid+=ae-N):(M.bi_buf|=B<<M.bi_valid&65535,M.bi_valid+=ae)}function oe(M,B,ae){ne(M,ae[2*B],ae[2*B+1])}function ce(M,B){for(var ae=0;ae|=1&M,M>>>=1,ae<<=1,0<--B;);return ae>>>1}function U(M,B,ae){var he,xe,_e=new Array(w+1),Te=0;for(he=1;he<=w;he++)_e[he]=Te=Te+ae[he-1]<<1;for(xe=0;xe<=B;xe++){var Ee=M[2*xe+1];Ee!==0&&(M[2*xe]=ce(_e[Ee]++,Ee))}}function F(M){var B;for(B=0;B<p;B++)M.dyn_ltree[2*B]=0;for(B=0;B<v;B++)M.dyn_dtree[2*B]=0;for(B=0;B<g;B++)M.bl_tree[2*B]=0;M.dyn_ltree[2*S]=1,M.opt_len=M.static_len=0,M.last_lit=M.matches=0}function Z(M){8<M.bi_valid?ie(M,M.bi_buf):0<M.bi_valid&&(M.pending_buf[M.pending++]=M.bi_buf),M.bi_buf=0,M.bi_valid=0}function q(M,B,ae,he){var xe=2*B,_e=2*ae;return M[xe]<M[_e]||M[xe]===M[_e]&&he[B]<=he[ae]}function Q(M,B,ae){for(var he=M.heap[ae],xe=ae<<1;xe<=M.heap_len&&(xe<M.heap_len&&q(B,M.heap[xe+1],M.heap[xe],M.depth)&&xe++,!q(B,he,M.heap[xe],M.depth));)M.heap[ae]=M.heap[xe],ae=xe,xe<<=1;M.heap[ae]=he}function le(M,B,ae){var he,xe,_e,Te,Ee=0;if(M.last_lit!==0)for(;he=M.pending_buf[M.d_buf+2*Ee]<<8|M.pending_buf[M.d_buf+2*Ee+1],xe=M.pending_buf[M.l_buf+Ee],Ee++,he===0?oe(M,xe,B):(oe(M,(_e=R[xe])+f+1,B),(Te=z[_e])!==0&&ne(M,xe-=H[_e],Te),oe(M,_e=$(--he),ae),(Te=O[_e])!==0&&ne(M,he-=te[_e],Te)),Ee<M.last_lit;);oe(M,S,B)}function me(M,B){var ae,he,xe,_e=B.dyn_tree,Te=B.stat_desc.static_tree,Ee=B.stat_desc.has_stree,ze=B.stat_desc.elems,Ie=-1;for(M.heap_len=0,M.heap_max=y,ae=0;ae<ze;ae++)_e[2*ae]!==0?(M.heap[++M.heap_len]=Ie=ae,M.depth[ae]=0):_e[2*ae+1]=0;for(;M.heap_len<2;)_e[2*(xe=M.heap[++M.heap_len]=Ie<2?++Ie:0)]=1,M.depth[xe]=0,M.opt_len--,Ee&&(M.static_len-=Te[2*xe+1]);for(B.max_code=Ie,ae=M.heap_len>>1;1<=ae;ae--)Q(M,_e,ae);for(xe=ze;ae=M.heap[1],M.heap[1]=M.heap[M.heap_len--],Q(M,_e,1),he=M.heap[1],M.heap[--M.heap_max]=ae,M.heap[--M.heap_max]=he,_e[2*xe]=_e[2*ae]+_e[2*he],M.depth[xe]=(M.depth[ae]>=M.depth[he]?M.depth[ae]:M.depth[he])+1,_e[2*ae+1]=_e[2*he+1]=xe,M.heap[1]=xe++,Q(M,_e,1),2<=M.heap_len;);M.heap[--M.heap_max]=M.heap[1],(function(Ye,xs){var pr,Vs,be,Le,He,Ze,et=xs.dyn_tree,bt=xs.max_code,Yr=xs.stat_desc.static_tree,Ja=xs.stat_desc.has_stree,Nr=xs.stat_desc.extra_bits,_r=xs.stat_desc.extra_base,oa=xs.stat_desc.max_length,gr=0;for(Le=0;Le<=w;Le++)Ye.bl_count[Le]=0;for(et[2*Ye.heap[Ye.heap_max]+1]=0,pr=Ye.heap_max+1;pr<y;pr++)oa<(Le=et[2*et[2*(Vs=Ye.heap[pr])+1]+1]+1)&&(Le=oa,gr++),et[2*Vs+1]=Le,bt<Vs||(Ye.bl_count[Le]++,He=0,_r<=Vs&&(He=Nr[Vs-_r]),Ze=et[2*Vs],Ye.opt_len+=Ze*(Le+He),Ja&&(Ye.static_len+=Ze*(Yr[2*Vs+1]+He)));if(gr!==0){do{for(Le=oa-1;Ye.bl_count[Le]===0;)Le--;Ye.bl_count[Le]--,Ye.bl_count[Le+1]+=2,Ye.bl_count[oa]--,gr-=2}while(0<gr);for(Le=oa;Le!==0;Le--)for(Vs=Ye.bl_count[Le];Vs!==0;)bt<(be=Ye.heap[--pr])||(et[2*be+1]!==Le&&(Ye.opt_len+=(Le-et[2*be+1])*et[2*be],et[2*be+1]=Le),Vs--)}})(M,B),U(_e,Ie,M.bl_count)}function G(M,B,ae){var he,xe,_e=-1,Te=B[1],Ee=0,ze=7,Ie=4;for(Te===0&&(ze=138,Ie=3),B[2*(ae+1)+1]=65535,he=0;he<=ae;he++)xe=Te,Te=B[2*(he+1)+1],++Ee<ze&&xe===Te||(Ee<Ie?M.bl_tree[2*xe]+=Ee:xe!==0?(xe!==_e&&M.bl_tree[2*xe]++,M.bl_tree[2*_]++):Ee<=10?M.bl_tree[2*T]++:M.bl_tree[2*E]++,_e=xe,Ie=(Ee=0)===Te?(ze=138,3):xe===Te?(ze=6,3):(ze=7,4))}function ue(M,B,ae){var he,xe,_e=-1,Te=B[1],Ee=0,ze=7,Ie=4;for(Te===0&&(ze=138,Ie=3),he=0;he<=ae;he++)if(xe=Te,Te=B[2*(he+1)+1],!(++Ee<ze&&xe===Te)){if(Ee<Ie)for(;oe(M,xe,M.bl_tree),--Ee!=0;);else xe!==0?(xe!==_e&&(oe(M,xe,M.bl_tree),Ee--),oe(M,_,M.bl_tree),ne(M,Ee-3,2)):Ee<=10?(oe(M,T,M.bl_tree),ne(M,Ee-3,3)):(oe(M,E,M.bl_tree),ne(M,Ee-11,7));_e=xe,Ie=(Ee=0)===Te?(ze=138,3):xe===Te?(ze=6,3):(ze=7,4)}}u(te);var Y=!1;function L(M,B,ae,he){ne(M,(h<<1)+(he?1:0),3),(function(xe,_e,Te,Ee){Z(xe),ie(xe,Te),ie(xe,~Te),i.arraySet(xe.pending_buf,xe.window,_e,Te,xe.pending),xe.pending+=Te})(M,B,ae)}n._tr_init=function(M){Y||((function(){var B,ae,he,xe,_e,Te=new Array(w+1);for(xe=he=0;xe<m-1;xe++)for(H[xe]=he,B=0;B<1<<z[xe];B++)R[he++]=xe;for(R[he-1]=xe,xe=_e=0;xe<16;xe++)for(te[xe]=_e,B=0;B<1<<O[xe];B++)V[_e++]=xe;for(_e>>=7;xe<v;xe++)for(te[xe]=_e<<7,B=0;B<1<<O[xe]-7;B++)V[256+_e++]=xe;for(ae=0;ae<=w;ae++)Te[ae]=0;for(B=0;B<=143;)X[2*B+1]=8,B++,Te[8]++;for(;B<=255;)X[2*B+1]=9,B++,Te[9]++;for(;B<=279;)X[2*B+1]=7,B++,Te[7]++;for(;B<=287;)X[2*B+1]=8,B++,Te[8]++;for(U(X,p+1,Te),B=0;B<v;B++)I[2*B+1]=5,I[2*B]=ce(B,5);ee=new J(X,z,f+1,p,w),se=new J(I,O,0,v,w),W=new J(new Array(0),C,0,g,k)})(),Y=!0),M.l_desc=new K(M.dyn_ltree,ee),M.d_desc=new K(M.dyn_dtree,se),M.bl_desc=new K(M.bl_tree,W),M.bi_buf=0,M.bi_valid=0,F(M)},n._tr_stored_block=L,n._tr_flush_block=function(M,B,ae,he){var xe,_e,Te=0;0<M.level?(M.strm.data_type===2&&(M.strm.data_type=(function(Ee){var ze,Ie=4093624447;for(ze=0;ze<=31;ze++,Ie>>>=1)if(1&Ie&&Ee.dyn_ltree[2*ze]!==0)return o;if(Ee.dyn_ltree[18]!==0||Ee.dyn_ltree[20]!==0||Ee.dyn_ltree[26]!==0)return c;for(ze=32;ze<f;ze++)if(Ee.dyn_ltree[2*ze]!==0)return c;return o})(M)),me(M,M.l_desc),me(M,M.d_desc),Te=(function(Ee){var ze;for(G(Ee,Ee.dyn_ltree,Ee.l_desc.max_code),G(Ee,Ee.dyn_dtree,Ee.d_desc.max_code),me(Ee,Ee.bl_desc),ze=g-1;3<=ze&&Ee.bl_tree[2*A[ze]+1]===0;ze--);return Ee.opt_len+=3*(ze+1)+5+5+4,ze})(M),xe=M.opt_len+3+7>>>3,(_e=M.static_len+3+7>>>3)<=xe&&(xe=_e)):xe=_e=ae+5,ae+4<=xe&&B!==-1?L(M,B,ae,he):M.strategy===4||_e===xe?(ne(M,2+(he?1:0),3),le(M,X,I)):(ne(M,4+(he?1:0),3),(function(Ee,ze,Ie,Ye){var xs;for(ne(Ee,ze-257,5),ne(Ee,Ie-1,5),ne(Ee,Ye-4,4),xs=0;xs<Ye;xs++)ne(Ee,Ee.bl_tree[2*A[xs]+1],3);ue(Ee,Ee.dyn_ltree,ze-1),ue(Ee,Ee.dyn_dtree,Ie-1)})(M,M.l_desc.max_code+1,M.d_desc.max_code+1,Te+1),le(M,M.dyn_ltree,M.dyn_dtree)),F(M),he&&Z(M)},n._tr_tally=function(M,B,ae){return M.pending_buf[M.d_buf+2*M.last_lit]=B>>>8&255,M.pending_buf[M.d_buf+2*M.last_lit+1]=255&B,M.pending_buf[M.l_buf+M.last_lit]=255&ae,M.last_lit++,B===0?M.dyn_ltree[2*ae]++:(M.matches++,B--,M.dyn_ltree[2*(R[ae]+f+1)]++,M.dyn_dtree[2*$(B)]++),M.last_lit===M.lit_bufsize-1},n._tr_align=function(M){ne(M,2,3),oe(M,S,X),(function(B){B.bi_valid===16?(ie(B,B.bi_buf),B.bi_buf=0,B.bi_valid=0):8<=B.bi_valid&&(B.pending_buf[B.pending++]=255&B.bi_buf,B.bi_buf>>=8,B.bi_valid-=8)})(M)}},{"../utils/common":41}],53:[function(r,a,n){a.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,a,n){(function(i){(function(o,c){if(!o.setImmediate){var u,h,m,f,p=1,v={},g=!1,y=o.document,w=Object.getPrototypeOf&&Object.getPrototypeOf(o);w=w&&w.setTimeout?w:o,u={}.toString.call(o.process)==="[object process]"?function(_){mt.nextTick(function(){k(_)})}:(function(){if(o.postMessage&&!o.importScripts){var _=!0,T=o.onmessage;return o.onmessage=function(){_=!1},o.postMessage("","*"),o.onmessage=T,_}})()?(f="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",S,!1):o.attachEvent("onmessage",S),function(_){o.postMessage(f+_,"*")}):o.MessageChannel?((m=new MessageChannel).port1.onmessage=function(_){k(_.data)},function(_){m.port2.postMessage(_)}):y&&"onreadystatechange"in y.createElement("script")?(h=y.documentElement,function(_){var T=y.createElement("script");T.onreadystatechange=function(){k(_),T.onreadystatechange=null,h.removeChild(T),T=null},h.appendChild(T)}):function(_){setTimeout(k,0,_)},w.setImmediate=function(_){typeof _!="function"&&(_=new Function(""+_));for(var T=new Array(arguments.length-1),E=0;E<T.length;E++)T[E]=arguments[E+1];var z={callback:_,args:T};return v[p]=z,u(p),p++},w.clearImmediate=N}function N(_){delete v[_]}function k(_){if(g)setTimeout(k,0,_);else{var T=v[_];if(T){g=!0;try{(function(E){var z=E.callback,O=E.args;switch(O.length){case 0:z();break;case 1:z(O[0]);break;case 2:z(O[0],O[1]);break;case 3:z(O[0],O[1],O[2]);break;default:z.apply(c,O)}})(T)}finally{N(_),g=!1}}}}function S(_){_.source===o&&typeof _.data=="string"&&_.data.indexOf(f)===0&&k(+_.data.slice(f.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof vn<"u"?vn:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Fj)),Fj.exports}var Wre=qre();const Yre=l8(Wre);var Ch={exports:{}},zj,nT;function Gre(){if(nT)return zj;nT=1;var s={"&":"&amp;",'"':"&quot;","'":"&apos;","<":"&lt;",">":"&gt;"};function t(r){return r&&r.replace?r.replace(/([&"<>'])/g,function(a,n){return s[n]}):r}return zj=t,zj}var iT;function Kre(){if(iT)return Ch.exports;iT=1;var s=Gre(),t=B1().Stream,r="    ";function a(h,m){typeof m!="object"&&(m={indent:m});var f=m.stream?new t:null,p="",v=!1,g=m.indent?m.indent===!0?r:m.indent:"",y=!0;function w(T){y?mt.nextTick(T):T()}function N(T,E){if(E!==void 0&&(p+=E),T&&!v&&(f=f||new t,v=!0),T&&v){var z=p;w(function(){f.emit("data",z)}),p=""}}function k(T,E){c(N,o(T,g,g?1:0),E)}function S(){if(f){var T=p;w(function(){f.emit("data",T),f.emit("end"),f.readable=!1,f.emit("close")})}}function _(T){var E=T.encoding||"UTF-8",z={version:"1.0",encoding:E};T.standalone&&(z.standalone=T.standalone),k({"?xml":{_attr:z}}),p=p.replace("/>","?>")}return w(function(){y=!1}),m.declaration&&_(m.declaration),h&&h.forEach?h.forEach(function(T,E){var z;E+1===h.length&&(z=S),k(T,z)}):k(h,S),f?(f.readable=!0,f):p}function n(){var h=Array.prototype.slice.call(arguments),m={_elem:o(h)};return m.push=function(f){if(!this.append)throw new Error("not assigned to a parent!");var p=this,v=this._elem.indent;c(this.append,o(f,v,this._elem.icount+(v?1:0)),function(){p.append(!0)})},m.close=function(f){f!==void 0&&this.push(f),this.end&&this.end()},m}function i(h,m){return new Array(m||0).join(h||"")}function o(h,m,f){f=f||0;var p=i(m,f),v,g=h,y=!1;if(typeof h=="object"){var w=Object.keys(h);if(v=w[0],g=h[v],g&&g._elem)return g._elem.name=v,g._elem.icount=f,g._elem.indent=m,g._elem.indents=p,g._elem.interrupt=g,g._elem}var N=[],k=[],S;function _(T){var E=Object.keys(T);E.forEach(function(z){N.push(u(z,T[z]))})}switch(typeof g){case"object":if(g===null)break;g._attr&&_(g._attr),g._cdata&&k.push(("<![CDATA["+g._cdata).replace(/\]\]>/g,"]]]]><![CDATA[>")+"]]>"),g.forEach&&(S=!1,k.push(""),g.forEach(function(T){if(typeof T=="object"){var E=Object.keys(T)[0];E=="_attr"?_(T._attr):k.push(o(T,m,f+1))}else k.pop(),S=!0,k.push(s(T))}),S||k.push(""));break;default:k.push(s(g))}return{name:v,interrupt:y,attributes:N,content:k,icount:f,indents:p,indent:m}}function c(h,m,f){if(typeof m!="object")return h(!1,m);var p=m.interrupt?1:m.content.length;function v(){for(;m.content.length;){var y=m.content.shift();if(y!==void 0){if(g(y))return;c(h,y)}}h(!1,(p>1?m.indents:"")+(m.name?"</"+m.name+">":"")+(m.indent&&!f?`
`:"")),f&&f()}function g(y){return y.interrupt?(y.interrupt.append=h,y.interrupt.end=v,y.interrupt=!1,h(!0),!0):!1}if(h(!1,m.indents+(m.name?"<"+m.name:"")+(m.attributes.length?" "+m.attributes.join(" "):"")+(p?m.name?">":"":m.name?"/>":"")+(m.indent&&p>1?`
`:"")),!p)return h(!1,m.indent?`
`:"");g(m)||v()}function u(h,m){return h+'="'+s(m)+'"'}return Ch.exports=a,Ch.exports.element=Ch.exports.Element=n,Ch.exports}var Xre=Kre();const ds=l8(Xre),Th=0,Ij=32,Zre=32,Qre=(s,t)=>{const r=t.replace(/-/g,"");if(r.length!==Zre)throw new Error(`Error: Cannot extract GUID from font filename: ${t}`);const n=r.replace(/(..)/g,"$1 ").trim().split(" ").map(u=>parseInt(u,16));n.reverse();const o=s.slice(Th,Ij).map((u,h)=>u^n[h%n.length]),c=new Uint8Array(Th+o.length+Math.max(0,s.length-Ij));return c.set(s.slice(0,Th)),c.set(o,Th),c.set(s.slice(Ij),Th+o.length),c};class Jre{format(t,r={stack:[]}){const a=t.prepForXml(r);if(a)return a;throw Error("XMLComponent did not format correctly")}}class eae{replace(t,r,a){let n=t;return r.forEach((i,o)=>{n=n.replace(new RegExp(`{${i.fileName}}`,"g"),(a+o).toString())}),n}getMediaData(t,r){return r.Array.filter(a=>t.search(`{${a.fileName}}`)>0)}}class tae{replace(t,r){let a=t;for(const n of r)a=a.replace(new RegExp(`{${n.reference}-${n.instance}}`,"g"),n.numId.toString());return a}}class sae{constructor(){Oe(this,"formatter"),Oe(this,"imageReplacer"),Oe(this,"numberingReplacer"),this.formatter=new Jre,this.imageReplacer=new eae,this.numberingReplacer=new tae}compile(t,r,a=[]){const n=new Yre,i=this.xmlifyFile(t,r),o=new Map(Object.entries(i));for(const[,c]of o)if(Array.isArray(c))for(const u of c)n.file(u.path,u.data);else n.file(c.path,c.data);for(const c of a)n.file(c.path,c.data);for(const c of t.Media.Array)c.type!=="svg"?n.file(`word/media/${c.fileName}`,c.data):(n.file(`word/media/${c.fileName}`,c.data),n.file(`word/media/${c.fallback.fileName}`,c.fallback.data));for(const{data:c,name:u,fontKey:h}of t.FontTable.fontOptionsWithKey){const[m]=u.split(".");n.file(`word/fonts/${m}.odttf`,Qre(c,h))}return n}xmlifyFile(t,r){const a=t.Document.Relationships.RelationshipCount+1,n=ds(this.formatter.format(t.Document.View,{viewWrapper:t.Document,file:t,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),i=t.Comments.Relationships.RelationshipCount+1,o=ds(this.formatter.format(t.Comments,{viewWrapper:{View:t.Comments,Relationships:t.Comments.Relationships},file:t,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),c=this.imageReplacer.getMediaData(n,t.Media),u=this.imageReplacer.getMediaData(o,t.Media);return{Relationships:{data:(c.forEach((h,m)=>{t.Document.Relationships.createRelationship(a+m,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${h.fileName}`)}),t.Document.Relationships.createRelationship(t.Document.Relationships.RelationshipCount+1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/fontTable","fontTable.xml"),ds(this.formatter.format(t.Document.Relationships,{viewWrapper:t.Document,file:t,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}})),path:"word/_rels/document.xml.rels"},Document:{data:(()=>{const h=this.imageReplacer.replace(n,c,a);return this.numberingReplacer.replace(h,t.Numbering.ConcreteNumbering)})(),path:"word/document.xml"},Styles:{data:(()=>{const h=ds(this.formatter.format(t.Styles,{viewWrapper:t.Document,file:t,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}});return this.numberingReplacer.replace(h,t.Numbering.ConcreteNumbering)})(),path:"word/styles.xml"},Properties:{data:ds(this.formatter.format(t.CoreProperties,{viewWrapper:t.Document,file:t,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/core.xml"},Numbering:{data:ds(this.formatter.format(t.Numbering,{viewWrapper:t.Document,file:t,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/numbering.xml"},FileRelationships:{data:ds(this.formatter.format(t.FileRelationships,{viewWrapper:t.Document,file:t,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:"_rels/.rels"},HeaderRelationships:t.Headers.map((h,m)=>{const f=ds(this.formatter.format(h.View,{viewWrapper:h,file:t,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(f,t.Media).forEach((v,g)=>{h.Relationships.createRelationship(g,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${v.fileName}`)}),{data:ds(this.formatter.format(h.Relationships,{viewWrapper:h,file:t,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:`word/_rels/header${m+1}.xml.rels`}}),FooterRelationships:t.Footers.map((h,m)=>{const f=ds(this.formatter.format(h.View,{viewWrapper:h,file:t,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(f,t.Media).forEach((v,g)=>{h.Relationships.createRelationship(g,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${v.fileName}`)}),{data:ds(this.formatter.format(h.Relationships,{viewWrapper:h,file:t,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:`word/_rels/footer${m+1}.xml.rels`}}),Headers:t.Headers.map((h,m)=>{const f=ds(this.formatter.format(h.View,{viewWrapper:h,file:t,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),p=this.imageReplacer.getMediaData(f,t.Media),v=this.imageReplacer.replace(f,p,0);return{data:this.numberingReplacer.replace(v,t.Numbering.ConcreteNumbering),path:`word/header${m+1}.xml`}}),Footers:t.Footers.map((h,m)=>{const f=ds(this.formatter.format(h.View,{viewWrapper:h,file:t,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),p=this.imageReplacer.getMediaData(f,t.Media),v=this.imageReplacer.replace(f,p,0);return{data:this.numberingReplacer.replace(v,t.Numbering.ConcreteNumbering),path:`word/footer${m+1}.xml`}}),ContentTypes:{data:ds(this.formatter.format(t.ContentTypes,{viewWrapper:t.Document,file:t,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:"[Content_Types].xml"},CustomProperties:{data:ds(this.formatter.format(t.CustomProperties,{viewWrapper:t.Document,file:t,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/custom.xml"},AppProperties:{data:ds(this.formatter.format(t.AppProperties,{viewWrapper:t.Document,file:t,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/app.xml"},FootNotes:{data:ds(this.formatter.format(t.FootNotes.View,{viewWrapper:t.FootNotes,file:t,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:"word/footnotes.xml"},FootNotesRelationships:{data:ds(this.formatter.format(t.FootNotes.Relationships,{viewWrapper:t.FootNotes,file:t,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:"word/_rels/footnotes.xml.rels"},Settings:{data:ds(this.formatter.format(t.Settings,{viewWrapper:t.Document,file:t,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/settings.xml"},Comments:{data:(()=>{const h=this.imageReplacer.replace(o,u,i);return this.numberingReplacer.replace(h,t.Numbering.ConcreteNumbering)})(),path:"word/comments.xml"},CommentsRelationships:{data:(u.forEach((h,m)=>{t.Comments.Relationships.createRelationship(i+m,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${h.fileName}`)}),ds(this.formatter.format(t.Comments.Relationships,{viewWrapper:{View:t.Comments,Relationships:t.Comments.Relationships},file:t,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}})),path:"word/_rels/comments.xml.rels"},FontTable:{data:ds(this.formatter.format(t.FontTable.View,{viewWrapper:t.Document,file:t,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/fontTable.xml"},FontTableRelationships:{data:ds(this.formatter.format(t.FontTable.Relationships,{viewWrapper:t.Document,file:t,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:"word/_rels/fontTable.xml.rels"}}}}const rae={WITH_2_BLANKS:"  "},lT=s=>s===!0?rae.WITH_2_BLANKS:s===!1?void 0:s,q8=class Yc{static pack(t,r,a){return MJ(this,arguments,function*(n,i,o,c=[]){return this.compiler.compile(n,lT(o),c).generateAsync({type:i,mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})})}static toString(t,r,a=[]){return Yc.pack(t,"string",r,a)}static toBuffer(t,r,a=[]){return Yc.pack(t,"nodebuffer",r,a)}static toBase64String(t,r,a=[]){return Yc.pack(t,"base64",r,a)}static toBlob(t,r,a=[]){return Yc.pack(t,"blob",r,a)}static toArrayBuffer(t,r,a=[]){return Yc.pack(t,"arraybuffer",r,a)}static toStream(t,r,a=[]){const n=new Hre.Stream;return this.compiler.compile(t,lT(r),a).generateAsync({type:"nodebuffer",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"}).then(o=>{n.emit("data",o),n.emit("end")}),n}};Oe(q8,"compiler",new sae);let W8=q8;var $f={exports:{}},aae=$f.exports,oT;function nae(){return oT||(oT=1,(function(s,t){(function(r,a){a()})(aae,function(){function r(h,m){return typeof m>"u"?m={autoBom:!1}:typeof m!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),m={autoBom:!m}),m.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function a(h,m,f){var p=new XMLHttpRequest;p.open("GET",h),p.responseType="blob",p.onload=function(){u(p.response,m,f)},p.onerror=function(){console.error("could not download file")},p.send()}function n(h){var m=new XMLHttpRequest;m.open("HEAD",h,!1);try{m.send()}catch{}return 200<=m.status&&299>=m.status}function i(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var m=document.createEvent("MouseEvents");m.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(m)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof O0=="object"&&O0.global===O0?O0:void 0,c=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(h,m,f){var p=o.URL||o.webkitURL,v=document.createElement("a");m=m||h.name||"download",v.download=m,v.rel="noopener",typeof h=="string"?(v.href=h,v.origin===location.origin?i(v):n(v.href)?a(h,m,f):i(v,v.target="_blank")):(v.href=p.createObjectURL(h),setTimeout(function(){p.revokeObjectURL(v.href)},4e4),setTimeout(function(){i(v)},0))}:"msSaveOrOpenBlob"in navigator?function(h,m,f){if(m=m||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(r(h,f),m);else if(n(h))a(h,m,f);else{var p=document.createElement("a");p.href=h,p.target="_blank",setTimeout(function(){i(p)})}}:function(h,m,f,p){if(p=p||open("","_blank"),p&&(p.document.title=p.document.body.innerText="downloading..."),typeof h=="string")return a(h,m,f);var v=h.type==="application/octet-stream",g=/constructor/i.test(o.HTMLElement)||o.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||v&&g||c)&&typeof FileReader<"u"){var w=new FileReader;w.onloadend=function(){var S=w.result;S=y?S:S.replace(/^data:[^;]*;/,"data:attachment/file;"),p?p.location.href=S:location=S,p=null},w.readAsDataURL(h)}else{var N=o.URL||o.webkitURL,k=N.createObjectURL(h);p?p.location=k:location.href=k,p=null,setTimeout(function(){N.revokeObjectURL(k)},4e4)}});o.saveAs=u.saveAs=u,s.exports=u})})($f)),$f.exports}var Y8=nae();const cT=s=>{const r=s.replace(/\*\*([^*]+)\*\*/g,"$1").replace(/\*([^*]+)\*/g,"$1").trim().split(`
`).filter(a=>a.trim());return e.jsx("div",{className:"space-y-2",children:r.map((a,n)=>{const i=a.trim(),o=i.match(/^(?:[\u{1F300}-\u{1F9FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}])?\s*([--A-Za-z\s]+):\s*(.+)$/u);if(o){const[,c,u]=o,h=i.match(/^([\u{1F300}-\u{1F9FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}])/u),m=h?h[1]+" ":"";return e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-gray-900",children:m}),e.jsxs("span",{className:"font-semibold text-gray-700",children:[c,":"]})," ",e.jsx("span",{className:"text-gray-900",children:u})]},n)}return e.jsx("div",{className:"text-gray-900",children:i},n)})})},Eh="ai_call_persistent_state",iae=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState(!1),[n,i]=j.useState(!1),[o,c]=j.useState("client"),[u,h]=j.useState([]),[m,f]=j.useState(""),[p,v]=j.useState(""),[g,y]=j.useState([]),[w,N]=j.useState(null),[k,S]=j.useState({duration:0,messagesCount:0,questionsDetected:0,suggestionsGenerated:0}),_=j.useRef(null),T=j.useRef(null),E=j.useRef(null),z=j.useRef(null),O=j.useRef(!1),[C,A]=j.useState(!1),[X,I]=j.useState(null),V=()=>{if(!s){localStorage.removeItem(Eh);return}const F={isCallActive:s,currentSpeaker:o,messages:u.map(Z=>({...Z,timestamp:Z.timestamp.toISOString()})),suggestions:g.map(Z=>({...Z,timestamp:Z.timestamp.toISOString()})),callStats:k,startTime:Date.now()-k.duration*1e3};localStorage.setItem(Eh,JSON.stringify(F))},R=()=>{const F=localStorage.getItem(Eh);if(!F)return!1;try{const Z=JSON.parse(F);c(Z.currentSpeaker),h(Z.messages.map(Q=>({...Q,timestamp:new Date(Q.timestamp)}))),y(Z.suggestions.map(Q=>({...Q,timestamp:new Date(Q.timestamp)})));const q=Math.floor((Date.now()-Z.startTime)/1e3);return S({...Z.callStats,duration:q}),!0}catch(Z){return console.error("Error restoring state:",Z),localStorage.removeItem(Eh),!1}};j.useEffect(()=>{R()&&(console.log("   "),t(!0),O.current=!0,H(),setTimeout(()=>{J()},500))},[]),j.useEffect(()=>{V()},[s,u,g,k,o]),j.useEffect(()=>{const F=window.SpeechRecognition||window.webkitSpeechRecognition;if(!F){I("Web Speech API     .  Chrome  Edge.");return}const Z=new F;return Z.continuous=!0,Z.interimResults=!0,Z.lang="ru-RU",Z.maxAlternatives=1,Z.onresult=q=>{console.log(" Recognition result received:",q);let Q="",le="";for(let me=q.resultIndex;me<q.results.length;me++){const G=q.results[me][0].transcript;q.results[me].isFinal?(le+=G+" ",console.log(" Final transcript:",G)):(Q+=G,console.log(" Interim transcript:",G))}v(Q),le&&(console.log(" Sending final text to AI:",le.trim()),f(me=>me+le),se(le.trim()))},Z.onerror=q=>{console.error("Speech recognition error:",q.error),q.error==="no-speech"||q.error==="aborted"||I(` : ${q.error}`)},Z.onend=()=>{if(s&&!n)try{Z.start()}catch(q){console.log("Recognition restart failed:",q)}},T.current=Z,()=>{Z&&Z.stop()}},[s,n]),j.useEffect(()=>(s?E.current=setInterval(()=>{S(F=>({...F,duration:F.duration+1}))},1e3):E.current&&clearInterval(E.current),()=>{E.current&&clearInterval(E.current)}),[s]),j.useEffect(()=>{z.current?.scrollIntoView({behavior:"smooth"})},[u,w]);const H=()=>{try{const F=localStorage.getItem("auth");if(!F){I("   ");return}const{username:Z,password:q}=JSON.parse(F),Q=btoa(`${Z}:${q}`),le=window.location.protocol==="https:"?"wss:":"ws:",me=window.location.host,G=`${le}//${me}/ws/voice-assistant?auth=${Q}`;console.log("Connecting to WebSocket:",G);const ue=new WebSocket(G);ue.onopen=()=>{console.log("WebSocket connected"),A(!0),I(null)},ue.onmessage=Y=>{try{const L=JSON.parse(Y.data);ee(L)}catch(L){console.error("Error parsing WebSocket message:",L)}},ue.onerror=Y=>{console.error("WebSocket error:",Y),I("    AI"),A(!1)},ue.onclose=()=>{console.log("WebSocket disconnected"),A(!1),O.current?(console.log("Will reconnect in 3 seconds..."),setTimeout(()=>{H()},3e3)):console.log("Call not active, will not reconnect")},_.current=ue}catch(F){console.error("Error connecting to WebSocket:",F),I("     AI")}},ee=F=>{if(F.type==="suggestion"){const Z={id:Date.now().toString(),question:F.question,answer:F.answer,category:F.category||"general",confidence:F.confidence||.8,timestamp:new Date};y(q=>[Z,...q]),N(Z),S(q=>({...q,suggestionsGenerated:q.suggestionsGenerated+1})),setTimeout(()=>{N(q=>q?.id===Z.id?null:q)},3e4)}else F.type==="question_detected"&&S(Z=>({...Z,questionsDetected:Z.questionsDetected+1}))},se=F=>{if(!F.trim())return;const Z={id:Date.now().toString(),type:o,text:F,timestamp:new Date};h(q=>[...q,Z]),S(q=>({...q,messagesCount:q.messagesCount+1})),_.current&&_.current.readyState===WebSocket.OPEN?_.current.send(JSON.stringify({type:"speech",text:F,timestamp:new Date().toISOString(),speaker:o})):console.warn("WebSocket not connected, message not sent to AI"),f("")},W=()=>{t(!0),O.current=!0,h([]),y([]),N(null),S({duration:0,messagesCount:0,questionsDetected:0,suggestionsGenerated:0}),I(null),H(),J()},te=()=>{t(!1),O.current=!1,K(),_.current&&(_.current.close(),_.current=null),A(!1),localStorage.removeItem(Eh)},J=()=>{if(T.current&&!r)try{T.current.start(),a(!0),i(!1)}catch(F){console.error("Error starting recognition:",F)}},K=()=>{T.current&&r&&(T.current.stop(),a(!1))},$=()=>{n?J():(K(),i(!0))},ie=F=>{y(Z=>Z.map(q=>q.id===F.id?{...q,used:!0}:q)),N(null)},ne=()=>{N(null)},oe=()=>{h([]),y([]),N(null)},ce=async()=>{try{const F=new Date,Z=F.toLocaleDateString("ru-RU"),q=F.toLocaleTimeString("ru-RU"),Q=new H8({sections:[{children:[new gt({text:" AI ",heading:wl.HEADING_1,alignment:lr.CENTER}),new gt({text:`: ${Z} ${q}`,alignment:lr.CENTER}),new gt({text:`: ${U(k.duration)}`,alignment:lr.CENTER}),new gt({text:""}),new gt({text:" ",heading:wl.HEADING_2}),new gt({children:[new At({text:": ",bold:!0}),new At({text:`${k.messagesCount}`})]}),new gt({children:[new At({text:" : ",bold:!0}),new At({text:`${k.questionsDetected}`})]}),new gt({children:[new At({text:"  AI: ",bold:!0}),new At({text:`${k.suggestionsGenerated}`})]}),new gt({text:""}),new gt({text:"",heading:wl.HEADING_2}),...u.map(me=>new gt({children:[new At({text:me.type==="client"?": ":": ",bold:!0,color:me.type==="client"?"2563EB":"9333EA"}),new At({text:me.text}),new At({text:` (${me.timestamp.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})})`,italics:!0,color:"6B7280"})]})),new gt({text:""}),new gt({text:" AI",heading:wl.HEADING_2}),...g.map(me=>[new gt({children:[new At({text:": ",bold:!0}),new At({text:me.question,italics:!0})]}),new gt({children:[new At({text:": ",bold:!0}),new At({text:me.answer})]}),new gt({children:[new At({text:": ",bold:!0}),new At({text:me.category}),new At({text:" | "}),new At({text:me.used?" ":" ",color:me.used?"10B981":"6B7280"})]}),new gt({text:""})]).flat()]}]}),le=await W8.toBlob(Q);Y8.saveAs(le,`call_${F.toISOString().split("T")[0]}_${F.getHours()}-${F.getMinutes()}.docx`)}catch(F){console.error("Error saving conversation:",F),I("   ")}},U=F=>{const Z=Math.floor(F/3600),q=Math.floor(F%3600/60),Q=F%60;return`${Z>0?Z.toString().padStart(2,"0")+":":""}${q.toString().padStart(2,"0")}:${Q.toString().padStart(2,"0")}`};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 p-6",children:[s&&e.jsx("div",{className:"mb-6 bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-400 rounded-xl p-4 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-green-900",children:" "}),e.jsx("p",{className:"text-sm text-green-700",children:"     -  "})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-green-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"w-4 h-4"}),e.jsx("span",{className:"font-mono",children:U(k.duration)})]}),r&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rm,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{children:""})]})]})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-normal text-gray-900 mb-2",children:"AI "}),e.jsx("p",{className:"text-gray-600",children:"     AI    "})]}),X&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ge,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-900",children:""}),e.jsx("p",{className:"text-sm text-red-700",children:X})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(bi,{className:"w-5 h-5 text-purple-600"})," "]}),s?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 rounded-xl p-4 border border-purple-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:""}),e.jsxs("div",{className:"flex items-center gap-2 text-2xl font-light text-gray-900",children:[e.jsx(Ve,{className:"w-5 h-5 text-purple-600"}),U(k.duration)]})]})}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"AI "}),e.jsx("div",{className:"flex items-center gap-2",children:C?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-green-700 font-medium",children:""})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),e.jsx("span",{className:"text-red-700 font-medium",children:""})]})})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:""}),e.jsx("div",{className:"flex items-center gap-2",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-green-700 font-medium",children:""})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full"}),e.jsx("span",{className:"text-gray-700 font-medium",children:""})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:$,className:`flex items-center justify-center gap-2 px-4 py-3 rounded-xl transition-all ${n?"bg-red-600 text-white hover:bg-red-700":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[n?e.jsx(xE,{className:"w-5 h-5"}):e.jsx(rm,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:n?"":""})]}),e.jsxs("button",{onClick:te,className:"flex items-center justify-center gap-2 px-4 py-3 bg-red-600 text-white rounded-xl hover:bg-red-700 transition-all",children:[e.jsx(pE,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:""})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl p-4 border border-indigo-200",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-2 text-center",children:" :"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("button",{onClick:()=>c("client"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${o==="client"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-50"}`,children:" "}),e.jsx("button",{onClick:()=>c("salesperson"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${o==="salesperson"?"bg-green-600 text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-50"}`,children:" "})]})]})]}):e.jsxs("button",{onClick:W,className:"w-full flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl hover:from-green-700 hover:to-emerald-700 transition-all shadow-lg hover:shadow-xl",children:[e.jsx(bi,{className:"w-6 h-6"}),e.jsx("span",{className:"text-lg font-medium",children:" "})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Vr,{className:"w-5 h-5 text-blue-600"}),""]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-700",children:""}),e.jsx("span",{className:"text-lg font-semibold text-blue-600",children:k.messagesCount})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-700",children:""}),e.jsx("span",{className:"text-lg font-semibold text-purple-600",children:k.questionsDetected})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-700",children:""}),e.jsx("span",{className:"text-lg font-semibold text-green-600",children:k.suggestionsGenerated})]})]})]}),u.length>0&&e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-lg p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:""}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:ce,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-all",children:[e.jsx(Tt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:" "})]}),e.jsxs("button",{onClick:oe,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-all",children:[e.jsx(tt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:" "})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-lg flex flex-col h-[calc(100vh-200px)]",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-medium text-gray-900 flex items-center gap-2",children:[e.jsx(Os,{className:"w-5 h-5 text-purple-600"}),""]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[u.length===0&&!s&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[e.jsx(bi,{className:"w-16 h-16 text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500",children:" ,   "})]}),u.map(F=>e.jsxs("div",{className:`flex gap-3 ${F.type==="salesperson"?"justify-end":"justify-start"}`,children:[F.type==="client"&&e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0",children:e.jsx(lt,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{className:`max-w-[75%] rounded-2xl px-4 py-3 ${F.type==="salesperson"?"bg-purple-600 text-white":F.isQuestion?"bg-yellow-50 text-gray-900 border-2 border-yellow-300":"bg-gray-100 text-gray-900"}`,children:[e.jsx("p",{className:"text-sm",children:F.text}),e.jsx("p",{className:`text-xs mt-1 ${F.type==="salesperson"?"text-purple-200":"text-gray-500"}`,children:F.timestamp.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})})]}),F.type==="salesperson"&&e.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center flex-shrink-0",children:e.jsx(lt,{className:"w-4 h-4 text-purple-600"})})]},F.id)),(m||p)&&e.jsxs("div",{className:"flex gap-3 justify-start",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0",children:e.jsx(lt,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{className:"max-w-[75%] rounded-2xl px-4 py-3 bg-gray-100 text-gray-900 border-2 border-purple-300",children:[e.jsxs("p",{className:"text-sm",children:[m,e.jsx("span",{className:"text-gray-500 italic",children:p})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"..."})]})]}),e.jsx("div",{ref:z})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-lg flex flex-col h-[calc(100vh-200px)]",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-medium text-gray-900 flex items-center gap-2",children:[e.jsx(Zj,{className:"w-5 h-5 text-yellow-600"}),"AI "]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[w&&e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 border-2 border-yellow-400 rounded-xl p-4 shadow-lg animate-pulse-subtle",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Zj,{className:"w-5 h-5 text-yellow-600"}),e.jsx("span",{className:"text-sm font-medium text-yellow-900",children:" "})]}),e.jsx("button",{onClick:ne,className:"p-1 hover:bg-yellow-100 rounded transition-all",children:e.jsx(Tl,{className:"w-4 h-4 text-yellow-700"})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-yellow-700 mb-1 font-medium",children:" :"}),e.jsxs("p",{className:"text-sm text-yellow-900 italic",children:['"',w.question,'"']})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-green-700 mb-1 font-medium",children:" :"}),e.jsx("div",{className:"text-sm text-gray-900 bg-white rounded-lg p-3",children:cT(w.answer)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-yellow-700",children:[": ",w.category]}),e.jsxs("button",{onClick:()=>ie(w),className:"flex items-center gap-1 px-3 py-1 bg-green-600 text-white text-xs rounded-lg hover:bg-green-700 transition-all",children:[e.jsx(Hr,{className:"w-3 h-3"}),""]})]})]}),g.length===0&&!w&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[e.jsx(Tf,{className:"w-16 h-16 text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"    "})]}),g.filter(F=>F.id!==w?.id).map(F=>e.jsxs("div",{className:`border rounded-xl p-4 transition-all ${F.used?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200 hover:border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("span",{className:"text-xs text-gray-600",children:F.timestamp.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})}),F.used&&e.jsx(Hr,{className:"w-4 h-4 text-green-600"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-xs text-gray-700 mb-1",children:":"}),e.jsxs("p",{className:"text-sm text-gray-900 italic",children:['"',F.question,'"']})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-700 mb-1",children:":"}),e.jsx("div",{className:"text-sm text-gray-900",children:cT(F.answer)})]})]},F.id))]})]})]}),e.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ge,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-900",children:[e.jsx("p",{className:"font-medium mb-1",children:"  "}),e.jsxs("ul",{className:"list-disc list-inside text-blue-700 space-y-1",children:[e.jsx("li",{children:' " "     '}),e.jsx("li",{children:"    -    "}),e.jsx("li",{children:"AI       "}),e.jsx("li",{children:"       "}),e.jsx("li",{children:"     "})]})]})]})})]})},wf={greeting:{label:"",color:"bg-blue-100 text-blue-700 border-blue-300",emoji:""},discovery:{label:" ",color:"bg-purple-100 text-purple-700 border-purple-300",emoji:""},presentation:{label:"",color:"bg-indigo-100 text-indigo-700 border-indigo-300",emoji:""},pricing:{label:" ",color:"bg-yellow-100 text-yellow-700 border-yellow-300",emoji:""},objection:{label:"",color:"bg-orange-100 text-orange-700 border-orange-300",emoji:""},closing:{label:" ",color:"bg-green-100 text-green-700 border-green-300",emoji:""}},$j={unknown:{label:"",color:"bg-gray-100 text-gray-700"},newbie:{label:"",color:"bg-blue-100 text-blue-700"},technical:{label:"",color:"bg-purple-100 text-purple-700"},business:{label:"",color:"bg-green-100 text-green-700"},toxic:{label:"",color:"bg-red-100 text-red-700"}},lae=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState(!1),[n,i]=j.useState(!1),[o,c]=j.useState("client"),[u,h]=j.useState([]),[m,f]=j.useState(""),[p,v]=j.useState(""),[g,y]=j.useState(null),[w,N]=j.useState([]),[k,S]=j.useState(new Set),[_,T]=j.useState(null),[E,z]=j.useState({duration:0,messagesCount:0,questionsDetected:0,suggestionsGenerated:0}),O=j.useRef(null),C=j.useRef(null),A=j.useRef(null),X=j.useRef(null),I=j.useRef(!1),[V,R]=j.useState(!1),[H,ee]=j.useState(null);j.useEffect(()=>{X.current?.scrollIntoView({behavior:"smooth"})},[u,g]),j.useEffect(()=>{const F=window.SpeechRecognition||window.webkitSpeechRecognition;if(!F){ee("Web Speech API     .  Chrome  Edge.");return}const Z=new F;return Z.continuous=!0,Z.interimResults=!0,Z.lang="ru-RU",Z.maxAlternatives=1,Z.onresult=q=>{let Q="",le="";for(let me=q.resultIndex;me<q.results.length;me++){const G=q.results[me][0].transcript;q.results[me].isFinal?le+=G+" ":Q+=G}v(Q),le&&(f(me=>me+le),te(le.trim()))},Z.onerror=q=>{q.error!=="no-speech"&&q.error!=="aborted"&&ee(` : ${q.error}`)},Z.onend=()=>{if(s&&!n)try{Z.start()}catch(q){console.log("Recognition restart failed:",q)}},C.current=Z,()=>{Z&&Z.stop()}},[s,n]),j.useEffect(()=>(s?A.current=setInterval(()=>{z(F=>({...F,duration:F.duration+1}))},1e3):A.current&&clearInterval(A.current),()=>{A.current&&clearInterval(A.current)}),[s]);const se=()=>{try{const F=localStorage.getItem("auth");if(!F){ee("   ");return}const{username:Z,password:q}=JSON.parse(F),Q=btoa(`${Z}:${q}`),le=window.location.protocol==="https:"?"wss:":"ws:",me=window.location.host,G=`${le}//${me}/ws/voice-assistant-v2?auth=${Q}`;console.log("Connecting to V2 WebSocket:",G);const ue=new WebSocket(G);ue.onopen=()=>{console.log("V2 WebSocket connected"),R(!0),ee(null)},ue.onmessage=Y=>{try{const L=JSON.parse(Y.data);W(L)}catch(L){console.error("Error parsing WebSocket message:",L)}},ue.onerror=Y=>{console.error("WebSocket error:",Y),ee("    AI"),R(!1)},ue.onclose=()=>{console.log("WebSocket disconnected"),R(!1),I.current&&setTimeout(()=>{se()},3e3)},O.current=ue}catch(F){console.error("Error connecting to WebSocket:",F),ee("     AI")}},W=F=>{if(console.log("[V2] Received:",F.type),F.type==="connected")console.log("[V2] Connected:",F.message);else if(F.type==="suggestion_v2"){const Z={reply_now:F.reply_now||"",next_steps:F.next_steps||[],explanation:F.explanation||"",context:F.context,timestamp:new Date};y(Z),N(q=>[Z,...q]),S(new Set),F.context&&T(F.context),z(q=>({...q,suggestionsGenerated:q.suggestionsGenerated+1}))}else F.type==="context_data"&&T(F.context)},te=F=>{if(!F.trim())return;const Z={id:Date.now().toString(),type:o,text:F,timestamp:new Date};h(q=>[...q,Z]),z(q=>({...q,messagesCount:q.messagesCount+1})),O.current&&O.current.readyState===WebSocket.OPEN?O.current.send(JSON.stringify({type:"speech",text:F,timestamp:new Date().toISOString(),speaker:o})):console.warn("WebSocket not connected"),f("")},J=()=>{t(!0),I.current=!0,h([]),N([]),y(null),T(null),z({duration:0,messagesCount:0,questionsDetected:0,suggestionsGenerated:0}),ee(null),se(),$()},K=()=>{t(!1),I.current=!1,ie(),O.current&&(O.current.close(),O.current=null),R(!1)},$=()=>{if(C.current&&!r)try{C.current.start(),a(!0),i(!1)}catch(F){console.error("Error starting recognition:",F)}},ie=()=>{C.current&&r&&(C.current.stop(),a(!1))},ne=()=>{n?$():(ie(),i(!0))},oe=F=>{S(Z=>{const q=new Set(Z);return q.has(F)?q.delete(F):q.add(F),q})},ce=async()=>{try{const F=new Date,Z=F.toLocaleDateString("ru-RU"),q=F.toLocaleTimeString("ru-RU"),Q=new H8({sections:[{children:[new gt({text:" AI  V2",heading:wl.HEADING_1,alignment:lr.CENTER}),new gt({text:`: ${Z} ${q}`,alignment:lr.CENTER}),new gt({text:`: ${U(E.duration)}`,alignment:lr.CENTER}),new gt({text:""}),new gt({text:" ",heading:wl.HEADING_2}),..._?[new gt({children:[new At({text:": ",bold:!0}),new At({text:wf[_.stage].label})]}),new gt({children:[new At({text:" : ",bold:!0}),new At({text:$j[_.client_type].label})]}),new gt({children:[new At({text:": ",bold:!0}),new At({text:_.requirements.join(", ")||""})]}),new gt({text:""})]:[],new gt({text:"",heading:wl.HEADING_2}),...u.map(me=>new gt({children:[new At({text:me.type==="client"?": ":": ",bold:!0,color:me.type==="client"?"2563EB":"9333EA"}),new At({text:me.text})]})),new gt({text:""}),new gt({text:" AI",heading:wl.HEADING_2}),...w.map(me=>[new gt({children:[new At({text:" : ",bold:!0}),new At({text:me.reply_now})]}),new gt({children:[new At({text:": ",bold:!0})]}),...me.next_steps.map(G=>new gt({text:`   ${G}`})),new gt({text:""})]).flat()]}]}),le=await W8.toBlob(Q);Y8.saveAs(le,`ai_call_v2_${F.toISOString().split("T")[0]}_${F.getHours()}-${F.getMinutes()}.docx`)}catch(F){console.error("Error saving conversation:",F),ee("   ")}},U=F=>{const Z=Math.floor(F/3600),q=Math.floor(F%3600/60),Q=F%60;return`${Z>0?Z.toString().padStart(2,"0")+":":""}${q.toString().padStart(2,"0")}:${Q.toString().padStart(2,"0")}`};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-normal text-gray-900 mb-2",children:"AI  V2 ( )"}),e.jsx("p",{className:"text-gray-600",children:" AI-      "})]}),H&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ge,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-900",children:""}),e.jsx("p",{className:"text-sm text-red-700",children:H})]})]})}),s&&_&&e.jsx("div",{className:"mb-6 bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-400 rounded-xl p-4 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-green-900",children:" "}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${wf[_.stage].color}`,children:[wf[_.stage].emoji," ",wf[_.stage].label]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${$j[_.client_type].color}`,children:$j[_.client_type].label})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-green-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"w-4 h-4"}),e.jsx("span",{className:"font-mono",children:U(E.duration)})]}),r&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rm,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{children:""})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[e.jsxs("div",{className:"col-span-3 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(bi,{className:"w-5 h-5 text-purple-600"}),""]}),s?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:ne,className:`flex items-center justify-center gap-2 px-4 py-3 rounded-xl transition-all ${n?"bg-red-600 text-white hover:bg-red-700":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:n?e.jsx(xE,{className:"w-5 h-5"}):e.jsx(rm,{className:"w-5 h-5"})}),e.jsx("button",{onClick:K,className:"flex items-center justify-center gap-2 px-4 py-3 bg-red-600 text-white rounded-xl hover:bg-red-700 transition-all",children:e.jsx(pE,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl p-4 border border-indigo-200",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-2 text-center",children:" :"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("button",{onClick:()=>c("client"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${o==="client"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-50"}`,children:""}),e.jsx("button",{onClick:()=>c("salesperson"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${o==="salesperson"?"bg-green-600 text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-50"}`,children:""})]})]})]}):e.jsxs("button",{onClick:J,className:"w-full flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl hover:from-green-700 hover:to-emerald-700 transition-all shadow-lg",children:[e.jsx(bi,{className:"w-6 h-6"}),e.jsx("span",{className:"text-lg font-medium",children:" "})]})]}),_&&e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-lg p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:" "}),e.jsxs("div",{className:"space-y-4",children:[_.requirements.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Qj,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:":"})]}),e.jsx("div",{className:"space-y-1",children:_.requirements.map((F,Z)=>e.jsxs("div",{className:"text-sm text-gray-600 pl-6",children:[" ",F]},Z))})]}),_.budget_signals.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Qe,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:":"})]}),e.jsx("div",{className:"space-y-1",children:_.budget_signals.map((F,Z)=>e.jsxs("div",{className:"text-sm text-gray-600 pl-6",children:[" ",F]},Z))})]}),_.red_flags.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Af,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"text-sm font-medium text-red-700",children:" :"})]}),e.jsx("div",{className:"space-y-1",children:_.red_flags.map((F,Z)=>e.jsxs("div",{className:"text-sm text-red-600 pl-6",children:[" ",F]},Z))})]})]})]}),u.length>0&&e.jsx("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-lg p-6",children:e.jsxs("button",{onClick:ce,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-all",children:[e.jsx(Tt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:""})]})})]}),e.jsxs("div",{className:"col-span-5 bg-white rounded-2xl border border-gray-200 shadow-lg flex flex-col h-[calc(100vh-200px)]",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-medium text-gray-900 flex items-center gap-2",children:[e.jsx(Os,{className:"w-5 h-5 text-purple-600"}),""]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[u.length===0&&!s&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[e.jsx(bi,{className:"w-16 h-16 text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500",children:" "})]}),u.map(F=>e.jsxs("div",{className:`flex gap-3 ${F.type==="salesperson"?"justify-end":"justify-start"}`,children:[F.type==="client"&&e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0",children:e.jsx(lt,{className:"w-4 h-4 text-blue-600"})}),e.jsx("div",{className:`max-w-[75%] rounded-2xl px-4 py-3 ${F.type==="salesperson"?"bg-purple-600 text-white":"bg-gray-100 text-gray-900"}`,children:e.jsx("p",{className:"text-sm",children:F.text})}),F.type==="salesperson"&&e.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center flex-shrink-0",children:e.jsx(lt,{className:"w-4 h-4 text-purple-600"})})]},F.id)),(m||p)&&e.jsxs("div",{className:"flex gap-3 justify-start",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0",children:e.jsx(lt,{className:"w-4 h-4 text-blue-600"})}),e.jsx("div",{className:"max-w-[75%] rounded-2xl px-4 py-3 bg-gray-100 text-gray-900 border-2 border-purple-300",children:e.jsxs("p",{className:"text-sm",children:[m,e.jsx("span",{className:"text-gray-500 italic",children:p})]})})]}),e.jsx("div",{ref:X})]})]}),e.jsxs("div",{className:"col-span-4 space-y-6",children:[g&&e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-400 rounded-xl p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Lr,{className:"w-6 h-6 text-green-600"}),e.jsx("h3",{className:"text-lg font-bold text-green-900",children:"  "})]}),e.jsx("p",{className:"text-gray-900 text-base leading-relaxed",children:g.reply_now})]}),g&&g.next_steps.length>0&&e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-300 rounded-xl p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(xt,{className:"w-6 h-6 text-blue-600"}),e.jsx("h3",{className:"text-lg font-bold text-blue-900",children:"  2-3 "})]}),e.jsx("div",{className:"space-y-3",children:g.next_steps.map((F,Z)=>e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:k.has(Z),onChange:()=>oe(Z),className:"mt-1 rounded border-blue-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:`text-sm ${k.has(Z)?"line-through text-gray-500":"text-gray-900"}`,children:F})]},Z))})]}),g&&g.explanation&&e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-amber-50 border-2 border-yellow-300 rounded-xl p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(vP,{className:"w-6 h-6 text-yellow-600"}),e.jsx("h3",{className:"text-lg font-bold text-yellow-900",children:"  "})]}),e.jsx("p",{className:"text-gray-900 text-sm leading-relaxed",children:g.explanation})]}),!g&&s&&e.jsx("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-lg p-8",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[e.jsx(Zj,{className:"w-16 h-16 text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"    "})]})})]})]})]})},dT={Book:e.jsx(qL,{className:"w-6 h-6"}),CheckSquare:e.jsx(Ds,{className:"w-6 h-6"}),Users:e.jsx(it,{className:"w-6 h-6"}),CalendarCheck:e.jsx(ZL,{className:"w-6 h-6"}),TrendingUp:e.jsx(xt,{className:"w-6 h-6"}),FileText:e.jsx(Ue,{className:"w-6 h-6"}),Settings:e.jsx(Ta,{className:"w-6 h-6"}),Shield:e.jsx(Or,{className:"w-6 h-6"})},oae=()=>{const[s,t]=j.useState([]),[r,a]=j.useState(!0),[n,i]=j.useState(null),[o,c]=j.useState({title:"",content:"",icon:"",allowed_roles:[]}),[u,h]=j.useState(!1),[m,f]=j.useState("");j.useEffect(()=>{v(),p()},[]);const p=async()=>{const N=localStorage.getItem("auth");if(N)try{const k=JSON.parse(N);if(k.role){f(k.role);return}console.log("Role not in localStorage, fetching from server...");const _=(await fe.get("/admin/api/auth/me")).data.role;k.role=_,localStorage.setItem("auth",JSON.stringify(k)),f(_),console.log("User role fetched and saved:",_)}catch(k){console.error("Error loading user role:",k)}},v=async()=>{try{a(!0);const N=await fe.get("/admin/api/timlead-regulations/");t(N.data)}catch(N){console.error("Error loading regulations:",N)}finally{a(!1)}},g=N=>{i(N),c({title:N.title,content:N.content,icon:N.icon,allowed_roles:N.allowed_roles||[]})},y=async()=>{if(n)try{h(!0),await fe.put(`/admin/api/timlead-regulations/${n.id}`,o),await v(),i(null)}catch(N){console.error("Error saving regulation:",N),alert(N.response?.data?.detail||"  ")}finally{h(!1)}},w=m==="owner";return r?e.jsx("div",{className:"p-6 flex items-center justify-center",children:e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(SP,{className:"w-8 h-8 text-purple-600"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"  "})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-blue-500 rounded-full p-1 mt-0.5",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-blue-900 dark:text-blue-100",children:"  :"}),e.jsxs("p",{className:"text-blue-800 dark:text-blue-200 mt-1",children:["        .",w&&"     ."]})]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(N=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-gray-700 hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4 pb-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-purple-500 to-purple-700 flex items-center justify-center text-white flex-shrink-0",children:dT[N.icon]||e.jsx(Ue,{className:"w-6 h-6"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:N.title})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1.5 text-sm font-medium rounded-md ${N.content.includes(" ")?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200":"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200"}`,children:[e.jsx(Ve,{className:"w-4 h-4"}),N.content.includes(" ")?" ":""]})}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed mb-6 min-h-[60px]",children:N.content.length>150?`${N.content.substring(0,150)}...`:N.content}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>g(N),className:"flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(Vt,{className:"w-4 h-4"}),""]}),w&&e.jsxs("button",{onClick:()=>g(N),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg text-sm font-medium hover:bg-purple-700 transition-colors",children:[e.jsx(An,{className:"w-4 h-4"}),""]})]})]},N.id))}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:w?" ":" "}),e.jsx("button",{onClick:()=>i(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(De,{className:"w-6 h-6 text-gray-500 dark:text-gray-400"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:" "}),e.jsx("input",{type:"text",value:o.title,onChange:N=>c({...o,title:N.target.value}),disabled:!w,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white disabled:bg-gray-100 dark:disabled:bg-gray-600 disabled:cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsx("textarea",{value:o.content,onChange:N=>c({...o,content:N.target.value}),disabled:!w,rows:15,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white disabled:bg-gray-100 dark:disabled:bg-gray-600 disabled:cursor-not-allowed font-mono text-sm",placeholder:"  ..."})]}),w&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsx("select",{value:o.icon,onChange:N=>c({...o,icon:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:Object.keys(dT).map(N=>e.jsx("option",{value:N,children:N},N))})]}),w&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"  "}),e.jsx("div",{className:"space-y-2",children:[{value:"owner",label:""},{value:"admin",label:""},{value:"timlead",label:""},{value:"executor",label:""},{value:"salesperson",label:""},{value:"developer",label:""}].map(N=>e.jsxs("label",{className:"flex items-center gap-3 p-3 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:o.allowed_roles.includes(N.value),onChange:k=>{k.target.checked?c({...o,allowed_roles:[...o.allowed_roles,N.value]}):c({...o,allowed_roles:o.allowed_roles.filter(S=>S!==N.value)})},className:"w-5 h-5 text-purple-600 rounded focus:ring-2 focus:ring-purple-500"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:N.label})]},N.value))}),e.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:" ,     "})]})]}),w&&e.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>i(null),disabled:u,className:"px-6 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg font-medium transition-colors disabled:opacity-50",children:""}),e.jsx("button",{onClick:y,disabled:u,className:"px-6 py-2 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Aa,{className:"w-4 h-4"}),""]})})]})]})})]})};function cae(){return e.jsx(Y9,{children:e.jsx(q9,{children:e.jsx(_L,{children:e.jsx(L9,{basename:"/admin",children:e.jsxs(h9,{children:[e.jsx(nt,{path:"/login",element:e.jsx(DI,{})}),e.jsx(nt,{element:e.jsx(AI,{}),children:e.jsxs(nt,{path:"/",element:e.jsx(EI,{}),children:[e.jsx(nt,{index:!0,element:e.jsx(wk,{})}),e.jsx(nt,{path:"dashboard",element:e.jsx(wk,{})}),e.jsx(nt,{path:"projects",element:e.jsx(_Y,{})}),e.jsxs(nt,{path:"projects/:projectId",element:e.jsx(kY,{}),children:[e.jsx(nt,{index:!0,element:e.jsx(wT,{to:"overview",replace:!0})}),e.jsx(nt,{path:"overview",element:e.jsx(SY,{})}),e.jsx(nt,{path:"tasks",element:e.jsx(CY,{})}),e.jsx(nt,{path:"revisions",element:e.jsx(TY,{})}),e.jsx(nt,{path:"chat",element:e.jsx(EY,{})}),e.jsx(nt,{path:"documents",element:e.jsx(AY,{})}),e.jsx(nt,{path:"finance",element:e.jsx(DY,{})}),e.jsx(nt,{path:"hosting",element:e.jsx(RY,{})})]}),e.jsx(nt,{path:"project-files",element:e.jsx(iG,{})}),e.jsx(nt,{path:"tasks",element:e.jsx(IY,{})}),e.jsx(nt,{path:"tasks-archive",element:e.jsx(oG,{})}),e.jsx(nt,{path:"my-tasks",element:e.jsx(dG,{})}),e.jsx(nt,{path:"revisions",element:e.jsx($Y,{})}),e.jsx(nt,{path:"clients",element:e.jsx(VY,{})}),e.jsx(nt,{path:"leads",element:e.jsx(HY,{})}),e.jsx(nt,{path:"deals",element:e.jsx(KY,{})}),e.jsx(nt,{path:"contractors",element:e.jsx(aG,{})}),e.jsx(nt,{path:"chats",element:e.jsx(uG,{})}),e.jsx(nt,{path:"chats/:chatId",element:e.jsx(hG,{})}),e.jsx(nt,{path:"avito",element:e.jsx(mG,{})}),e.jsx(nt,{path:"documents",element:e.jsx(xG,{})}),e.jsx(nt,{path:"portfolio",element:e.jsx(fG,{})}),e.jsx(nt,{path:"finance",element:e.jsx(pG,{})}),e.jsx(nt,{path:"services",element:e.jsx(yG,{})}),e.jsx(nt,{path:"analytics",element:e.jsx(nJ,{})}),e.jsx(nt,{path:"reports",element:e.jsx(iJ,{})}),e.jsx(nt,{path:"notifications",element:e.jsx(lJ,{})}),e.jsx(nt,{path:"automation",element:e.jsx(oJ,{})}),e.jsx(nt,{path:"hosting",element:e.jsx(uJ,{})}),e.jsx(nt,{path:"permissions",element:e.jsx(_J,{})}),e.jsx(nt,{path:"users",element:e.jsx(kJ,{})}),e.jsx(nt,{path:"settings",element:e.jsx(SJ,{})}),e.jsx(nt,{path:"transcription",element:e.jsx(CJ,{})}),e.jsx(nt,{path:"ai-calls",element:e.jsx(iae,{})}),e.jsx(nt,{path:"ai-calls-v2",element:e.jsx(lae,{})}),e.jsx(nt,{path:"timlead-regulations",element:e.jsx(oae,{})})]})})]})})})})})}jM.createRoot(document.getElementById("root")).render(e.jsx(j.StrictMode,{children:e.jsx(cae,{})}));
