(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var D0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function uM(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Zb={exports:{}},lh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y5;function hM(){if(Y5)return lh;Y5=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(a,n,i){var o=null;if(i!==void 0&&(o=""+i),n.key!==void 0&&(o=""+n.key),"key"in n){i={};for(var c in n)c!=="key"&&(i[c]=n[c])}else i=n;return n=i.ref,{$$typeof:s,type:a,key:o,ref:n!==void 0?n:null,props:i}}return lh.Fragment=t,lh.jsx=r,lh.jsxs=r,lh}var G5;function mM(){return G5||(G5=1,Zb.exports=hM()),Zb.exports}var e=mM(),Qb={exports:{}},Je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K5;function xM(){if(K5)return Je;K5=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),p=Symbol.iterator;function j(K){return K===null||typeof K!="object"?null:(K=p&&K[p]||K["@@iterator"],typeof K=="function"?K:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function N(K,$,le){this.props=K,this.context=$,this.refs=y,this.updater=le||g}N.prototype.isReactComponent={},N.prototype.setState=function(K,$){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,$,"setState")},N.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function S(){}S.prototype=N.prototype;function k(K,$,le){this.props=K,this.context=$,this.refs=y,this.updater=le||g}var _=k.prototype=new S;_.constructor=k,v(_,N.prototype),_.isPureReactComponent=!0;var T=Array.isArray;function E(){}var z={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function C(K,$,le){var ie=le.ref;return{$$typeof:s,type:K,key:$,ref:ie!==void 0?ie:null,props:le}}function A(K,$){return C(K.type,$,K.props)}function Z(K){return typeof K=="object"&&K!==null&&K.$$typeof===s}function I(K){var $={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(le){return $[le]})}var V=/\/+/g;function R(K,$){return typeof K=="object"&&K!==null&&K.key!=null?I(""+K.key):$.toString(36)}function q(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(E,E):(K.status="pending",K.then(function($){K.status==="pending"&&(K.status="fulfilled",K.value=$)},function($){K.status==="pending"&&(K.status="rejected",K.reason=$)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function J(K,$,le,ie,oe){var de=typeof K;(de==="undefined"||de==="boolean")&&(K=null);var U=!1;if(K===null)U=!0;else switch(de){case"bigint":case"string":case"number":U=!0;break;case"object":switch(K.$$typeof){case s:case t:U=!0;break;case m:return U=K._init,J(U(K._payload),$,le,ie,oe)}}if(U)return oe=oe(K),U=ie===""?"."+R(K,0):ie,T(oe)?(le="",U!=null&&(le=U.replace(V,"$&/")+"/"),J(oe,$,le,"",function(W){return W})):oe!=null&&(Z(oe)&&(oe=A(oe,le+(oe.key==null||K&&K.key===oe.key?"":(""+oe.key).replace(V,"$&/")+"/")+U)),$.push(oe)),1;U=0;var F=ie===""?".":ie+":";if(T(K))for(var Q=0;Q<K.length;Q++)ie=K[Q],de=F+R(ie,Q),U+=J(ie,$,le,de,oe);else if(Q=j(K),typeof Q=="function")for(K=Q.call(K),Q=0;!(ie=K.next()).done;)ie=ie.value,de=F+R(ie,Q++),U+=J(ie,$,le,de,oe);else if(de==="object"){if(typeof K.then=="function")return J(q(K),$,le,ie,oe);throw $=String(K),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return U}function se(K,$,le){if(K==null)return K;var ie=[],oe=0;return J(K,ie,"","",function(de){return $.call(le,de,oe++)}),ie}function Y(K){if(K._status===-1){var $=K._result;$=$(),$.then(function(le){(K._status===0||K._status===-1)&&(K._status=1,K._result=le)},function(le){(K._status===0||K._status===-1)&&(K._status=2,K._result=le)}),K._status===-1&&(K._status=0,K._result=$)}if(K._status===1)return K._result.default;throw K._result}var ee=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)},te={map:se,forEach:function(K,$,le){se(K,function(){$.apply(this,arguments)},le)},count:function(K){var $=0;return se(K,function(){$++}),$},toArray:function(K){return se(K,function($){return $})||[]},only:function(K){if(!Z(K))throw Error("React.Children.only expected to receive a single React element child.");return K}};return Je.Activity=f,Je.Children=te,Je.Component=N,Je.Fragment=r,Je.Profiler=n,Je.PureComponent=k,Je.StrictMode=a,Je.Suspense=u,Je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,Je.__COMPILER_RUNTIME={__proto__:null,c:function(K){return z.H.useMemoCache(K)}},Je.cache=function(K){return function(){return K.apply(null,arguments)}},Je.cacheSignal=function(){return null},Je.cloneElement=function(K,$,le){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var ie=v({},K.props),oe=K.key;if($!=null)for(de in $.key!==void 0&&(oe=""+$.key),$)!M.call($,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&$.ref===void 0||(ie[de]=$[de]);var de=arguments.length-2;if(de===1)ie.children=le;else if(1<de){for(var U=Array(de),F=0;F<de;F++)U[F]=arguments[F+2];ie.children=U}return C(K.type,oe,ie)},Je.createContext=function(K){return K={$$typeof:o,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:i,_context:K},K},Je.createElement=function(K,$,le){var ie,oe={},de=null;if($!=null)for(ie in $.key!==void 0&&(de=""+$.key),$)M.call($,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(oe[ie]=$[ie]);var U=arguments.length-2;if(U===1)oe.children=le;else if(1<U){for(var F=Array(U),Q=0;Q<U;Q++)F[Q]=arguments[Q+2];oe.children=F}if(K&&K.defaultProps)for(ie in U=K.defaultProps,U)oe[ie]===void 0&&(oe[ie]=U[ie]);return C(K,de,oe)},Je.createRef=function(){return{current:null}},Je.forwardRef=function(K){return{$$typeof:c,render:K}},Je.isValidElement=Z,Je.lazy=function(K){return{$$typeof:m,_payload:{_status:-1,_result:K},_init:Y}},Je.memo=function(K,$){return{$$typeof:h,type:K,compare:$===void 0?null:$}},Je.startTransition=function(K){var $=z.T,le={};z.T=le;try{var ie=K(),oe=z.S;oe!==null&&oe(le,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(E,ee)}catch(de){ee(de)}finally{$!==null&&le.types!==null&&($.types=le.types),z.T=$}},Je.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},Je.use=function(K){return z.H.use(K)},Je.useActionState=function(K,$,le){return z.H.useActionState(K,$,le)},Je.useCallback=function(K,$){return z.H.useCallback(K,$)},Je.useContext=function(K){return z.H.useContext(K)},Je.useDebugValue=function(){},Je.useDeferredValue=function(K,$){return z.H.useDeferredValue(K,$)},Je.useEffect=function(K,$){return z.H.useEffect(K,$)},Je.useEffectEvent=function(K){return z.H.useEffectEvent(K)},Je.useId=function(){return z.H.useId()},Je.useImperativeHandle=function(K,$,le){return z.H.useImperativeHandle(K,$,le)},Je.useInsertionEffect=function(K,$){return z.H.useInsertionEffect(K,$)},Je.useLayoutEffect=function(K,$){return z.H.useLayoutEffect(K,$)},Je.useMemo=function(K,$){return z.H.useMemo(K,$)},Je.useOptimistic=function(K,$){return z.H.useOptimistic(K,$)},Je.useReducer=function(K,$,le){return z.H.useReducer(K,$,le)},Je.useRef=function(K){return z.H.useRef(K)},Je.useState=function(K){return z.H.useState(K)},Je.useSyncExternalStore=function(K,$,le){return z.H.useSyncExternalStore(K,$,le)},Je.useTransition=function(){return z.H.useTransition()},Je.version="19.2.0",Je}var X5;function Qw(){return X5||(X5=1,Qb.exports=xM()),Qb.exports}var w=Qw();const hl=uM(w);var Jb={exports:{}},oh={},ey={exports:{}},ty={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z5;function fM(){return Z5||(Z5=1,(function(s){function t(J,se){var Y=J.length;J.push(se);e:for(;0<Y;){var ee=Y-1>>>1,te=J[ee];if(0<n(te,se))J[ee]=se,J[Y]=te,Y=ee;else break e}}function r(J){return J.length===0?null:J[0]}function a(J){if(J.length===0)return null;var se=J[0],Y=J.pop();if(Y!==se){J[0]=Y;e:for(var ee=0,te=J.length,K=te>>>1;ee<K;){var $=2*(ee+1)-1,le=J[$],ie=$+1,oe=J[ie];if(0>n(le,Y))ie<te&&0>n(oe,le)?(J[ee]=oe,J[ie]=Y,ee=ie):(J[ee]=le,J[$]=Y,ee=$);else if(ie<te&&0>n(oe,Y))J[ee]=oe,J[ie]=Y,ee=ie;else break e}}return se}function n(J,se){var Y=J.sortIndex-se.sortIndex;return Y!==0?Y:J.id-se.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;s.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();s.unstable_now=function(){return o.now()-c}}var u=[],h=[],m=1,f=null,p=3,j=!1,g=!1,v=!1,y=!1,N=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function _(J){for(var se=r(h);se!==null;){if(se.callback===null)a(h);else if(se.startTime<=J)a(h),se.sortIndex=se.expirationTime,t(u,se);else break;se=r(h)}}function T(J){if(v=!1,_(J),!g)if(r(u)!==null)g=!0,E||(E=!0,I());else{var se=r(h);se!==null&&q(T,se.startTime-J)}}var E=!1,z=-1,M=5,C=-1;function A(){return y?!0:!(s.unstable_now()-C<M)}function Z(){if(y=!1,E){var J=s.unstable_now();C=J;var se=!0;try{e:{g=!1,v&&(v=!1,S(z),z=-1),j=!0;var Y=p;try{t:{for(_(J),f=r(u);f!==null&&!(f.expirationTime>J&&A());){var ee=f.callback;if(typeof ee=="function"){f.callback=null,p=f.priorityLevel;var te=ee(f.expirationTime<=J);if(J=s.unstable_now(),typeof te=="function"){f.callback=te,_(J),se=!0;break t}f===r(u)&&a(u),_(J)}else a(u);f=r(u)}if(f!==null)se=!0;else{var K=r(h);K!==null&&q(T,K.startTime-J),se=!1}}break e}finally{f=null,p=Y,j=!1}se=void 0}}finally{se?I():E=!1}}}var I;if(typeof k=="function")I=function(){k(Z)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,R=V.port2;V.port1.onmessage=Z,I=function(){R.postMessage(null)}}else I=function(){N(Z,0)};function q(J,se){z=N(function(){J(s.unstable_now())},se)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(J){J.callback=null},s.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<J?Math.floor(1e3/J):5},s.unstable_getCurrentPriorityLevel=function(){return p},s.unstable_next=function(J){switch(p){case 1:case 2:case 3:var se=3;break;default:se=p}var Y=p;p=se;try{return J()}finally{p=Y}},s.unstable_requestPaint=function(){y=!0},s.unstable_runWithPriority=function(J,se){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var Y=p;p=J;try{return se()}finally{p=Y}},s.unstable_scheduleCallback=function(J,se,Y){var ee=s.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ee+Y:ee):Y=ee,J){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=Y+te,J={id:m++,callback:se,priorityLevel:J,startTime:Y,expirationTime:te,sortIndex:-1},Y>ee?(J.sortIndex=Y,t(h,J),r(u)===null&&J===r(h)&&(v?(S(z),z=-1):v=!0,q(T,Y-ee))):(J.sortIndex=te,t(u,J),g||j||(g=!0,E||(E=!0,I()))),J},s.unstable_shouldYield=A,s.unstable_wrapCallback=function(J){var se=p;return function(){var Y=p;p=se;try{return J.apply(this,arguments)}finally{p=Y}}}})(ty)),ty}var Q5;function pM(){return Q5||(Q5=1,ey.exports=fM()),ey.exports}var sy={exports:{}},er={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J5;function gM(){if(J5)return er;J5=1;var s=Qw();function t(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var a={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},n=Symbol.for("react.portal");function i(u,h,m){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:f==null?null:""+f,children:u,containerInfo:h,implementation:m}}var o=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return er.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,er.createPortal=function(u,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return i(u,h,null,m)},er.flushSync=function(u){var h=o.T,m=a.p;try{if(o.T=null,a.p=2,u)return u()}finally{o.T=h,a.p=m,a.d.f()}},er.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,a.d.C(u,h))},er.prefetchDNS=function(u){typeof u=="string"&&a.d.D(u)},er.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var m=h.as,f=c(m,h.crossOrigin),p=typeof h.integrity=="string"?h.integrity:void 0,j=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?a.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:f,integrity:p,fetchPriority:j}):m==="script"&&a.d.X(u,{crossOrigin:f,integrity:p,fetchPriority:j,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},er.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=c(h.as,h.crossOrigin);a.d.M(u,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&a.d.M(u)},er.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,f=c(m,h.crossOrigin);a.d.L(u,m,{crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},er.preloadModule=function(u,h){if(typeof u=="string")if(h){var m=c(h.as,h.crossOrigin);a.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else a.d.m(u)},er.requestFormReset=function(u){a.d.r(u)},er.unstable_batchedUpdates=function(u,h){return u(h)},er.useFormState=function(u,h,m){return o.H.useFormState(u,h,m)},er.useFormStatus=function(){return o.H.useHostTransitionStatus()},er.version="19.2.0",er}var e4;function bM(){if(e4)return sy.exports;e4=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),sy.exports=gM(),sy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t4;function yM(){if(t4)return oh;t4=1;var s=pM(),t=Qw(),r=bM();function a(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)d+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function i(l){var d=l,x=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(x=d.return),l=d.return;while(l)}return d.tag===3?x:null}function o(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function c(l){if(l.tag===31){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function u(l){if(i(l)!==l)throw Error(a(188))}function h(l){var d=l.alternate;if(!d){if(d=i(l),d===null)throw Error(a(188));return d!==l?null:l}for(var x=l,b=d;;){var D=x.return;if(D===null)break;var P=D.alternate;if(P===null){if(b=D.return,b!==null){x=b;continue}break}if(D.child===P.child){for(P=D.child;P;){if(P===x)return u(D),l;if(P===b)return u(D),d;P=P.sibling}throw Error(a(188))}if(x.return!==b.return)x=D,b=P;else{for(var ae=!1,ue=D.child;ue;){if(ue===x){ae=!0,x=D,b=P;break}if(ue===b){ae=!0,b=D,x=P;break}ue=ue.sibling}if(!ae){for(ue=P.child;ue;){if(ue===x){ae=!0,x=P,b=D;break}if(ue===b){ae=!0,b=P,x=D;break}ue=ue.sibling}if(!ae)throw Error(a(189))}}if(x.alternate!==b)throw Error(a(190))}if(x.tag!==3)throw Error(a(188));return x.stateNode.current===x?l:d}function m(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=m(l),d!==null)return d;l=l.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),S=Symbol.for("react.consumer"),k=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),A=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function I(l){return l===null||typeof l!="object"?null:(l=Z&&l[Z]||l["@@iterator"],typeof l=="function"?l:null)}var V=Symbol.for("react.client.reference");function R(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===V?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case v:return"Fragment";case N:return"Profiler";case y:return"StrictMode";case T:return"Suspense";case E:return"SuspenseList";case C:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case g:return"Portal";case k:return l.displayName||"Context";case S:return(l._context.displayName||"Context")+".Consumer";case _:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case z:return d=l.displayName||null,d!==null?d:R(l.type)||"Memo";case M:d=l._payload,l=l._init;try{return R(l(d))}catch{}}return null}var q=Array.isArray,J=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},ee=[],te=-1;function K(l){return{current:l}}function $(l){0>te||(l.current=ee[te],ee[te]=null,te--)}function le(l,d){te++,ee[te]=l.current,l.current=d}var ie=K(null),oe=K(null),de=K(null),U=K(null);function F(l,d){switch(le(de,d),le(oe,l),le(ie,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?p5(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=p5(d),l=g5(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}$(ie),le(ie,l)}function Q(){$(ie),$(oe),$(de)}function W(l){l.memoizedState!==null&&le(U,l);var d=ie.current,x=g5(d,l.type);d!==x&&(le(oe,l),le(ie,x))}function H(l){oe.current===l&&($(ie),$(oe)),U.current===l&&($(U),rh._currentValue=Y)}var re,he;function G(l){if(re===void 0)try{throw Error()}catch(x){var d=x.stack.trim().match(/\n( *(at )?)/);re=d&&d[1]||"",he=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+re+l+he}var ce=!1;function X(l,d){if(!l||ce)return"";ce=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(d){var Re=function(){throw Error()};if(Object.defineProperty(Re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Re,[])}catch(Se){var Ne=Se}Reflect.construct(l,[],Re)}else{try{Re.call()}catch(Se){Ne=Se}l.call(Re.prototype)}}else{try{throw Error()}catch(Se){Ne=Se}(Re=l())&&typeof Re.catch=="function"&&Re.catch(function(){})}}catch(Se){if(Se&&Ne&&typeof Se.stack=="string")return[Se.stack,Ne.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var D=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");D&&D.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var P=b.DetermineComponentFrameRoot(),ae=P[0],ue=P[1];if(ae&&ue){var pe=ae.split(`
`),je=ue.split(`
`);for(D=b=0;b<pe.length&&!pe[b].includes("DetermineComponentFrameRoot");)b++;for(;D<je.length&&!je[D].includes("DetermineComponentFrameRoot");)D++;if(b===pe.length||D===je.length)for(b=pe.length-1,D=je.length-1;1<=b&&0<=D&&pe[b]!==je[D];)D--;for(;1<=b&&0<=D;b--,D--)if(pe[b]!==je[D]){if(b!==1||D!==1)do if(b--,D--,0>D||pe[b]!==je[D]){var Ee=`
`+pe[b].replace(" at new "," at ");return l.displayName&&Ee.includes("<anonymous>")&&(Ee=Ee.replace("<anonymous>",l.displayName)),Ee}while(1<=b&&0<=D);break}}}finally{ce=!1,Error.prepareStackTrace=x}return(x=l?l.displayName||l.name:"")?G(x):""}function O(l,d){switch(l.tag){case 26:case 27:case 5:return G(l.type);case 16:return G("Lazy");case 13:return l.child!==d&&d!==null?G("Suspense Fallback"):G("Suspense");case 19:return G("SuspenseList");case 0:case 15:return X(l.type,!1);case 11:return X(l.type.render,!1);case 1:return X(l.type,!0);case 31:return G("Activity");default:return""}}function L(l){try{var d="",x=null;do d+=O(l,x),x=l,l=l.return;while(l);return d}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}var B=Object.prototype.hasOwnProperty,ne=s.unstable_scheduleCallback,me=s.unstable_cancelCallback,xe=s.unstable_shouldYield,_e=s.unstable_requestPaint,Ce=s.unstable_now,Te=s.unstable_getCurrentPriorityLevel,Be=s.unstable_ImmediatePriority,ze=s.unstable_UserBlockingPriority,We=s.unstable_NormalPriority,Ds=s.unstable_LowPriority,Ur=s.unstable_IdlePriority,br=s.log,Ea=s.unstable_setDisableYieldValue,_t=null,ds=null;function yr(l){if(typeof br=="function"&&Ea(l),ds&&typeof ds.setStrictMode=="function")try{ds.setStrictMode(_t,l)}catch{}}var zt=Math.clz32?Math.clz32:Qo,Cn=Math.log,Zo=Math.LN2;function Qo(l){return l>>>=0,l===0?32:31-(Cn(l)/Zo|0)|0}var Tn=256,En=262144,ra=4194304;function hr(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Ll(l,d,x){var b=l.pendingLanes;if(b===0)return 0;var D=0,P=l.suspendedLanes,ae=l.pingedLanes;l=l.warmLanes;var ue=b&134217727;return ue!==0?(b=ue&~P,b!==0?D=hr(b):(ae&=ue,ae!==0?D=hr(ae):x||(x=ue&~l,x!==0&&(D=hr(x))))):(ue=b&~P,ue!==0?D=hr(ue):ae!==0?D=hr(ae):x||(x=b&~l,x!==0&&(D=hr(x)))),D===0?0:d!==0&&d!==D&&(d&P)===0&&(P=D&-D,x=d&-d,P>=x||P===32&&(x&4194048)!==0)?d:D}function Js(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function Ci(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hm(){var l=ra;return ra<<=1,(ra&62914560)===0&&(ra=4194304),l}function $d(l){for(var d=[],x=0;31>x;x++)d.push(l);return d}function Vt(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function Ud(l,d,x,b,D,P){var ae=l.pendingLanes;l.pendingLanes=x,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=x,l.entangledLanes&=x,l.errorRecoveryDisabledLanes&=x,l.shellSuspendCounter=0;var ue=l.entanglements,pe=l.expirationTimes,je=l.hiddenUpdates;for(x=ae&~x;0<x;){var Ee=31-zt(x),Re=1<<Ee;ue[Ee]=0,pe[Ee]=-1;var Ne=je[Ee];if(Ne!==null)for(je[Ee]=null,Ee=0;Ee<Ne.length;Ee++){var Se=Ne[Ee];Se!==null&&(Se.lane&=-536870913)}x&=~Re}b!==0&&qm(l,b,0),P!==0&&D===0&&l.tag!==0&&(l.suspendedLanes|=P&~(ae&~d))}function qm(l,d,x){l.pendingLanes|=d,l.suspendedLanes&=~d;var b=31-zt(d);l.entangledLanes|=d,l.entanglements[b]=l.entanglements[b]|1073741824|x&261930}function Vd(l,d){var x=l.entangledLanes|=d;for(l=l.entanglements;x;){var b=31-zt(x),D=1<<b;D&d|l[b]&d&&(l[b]|=d),x&=~D}}function Wm(l,d){var x=d&-d;return x=(x&42)!==0?1:Pl(x),(x&(l.suspendedLanes|d))!==0?0:x}function Pl(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Hd(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function qd(){var l=se.p;return l!==0?l:(l=window.event,l===void 0?32:I5(l.type))}function Jo(l,d){var x=se.p;try{return se.p=l,d()}finally{se.p=x}}var Ga=Math.random().toString(36).slice(2),Rs="__reactFiber$"+Ga,$s="__reactProps$"+Ga,An="__reactContainer$"+Ga,Wd="__reactEvents$"+Ga,qp="__reactListeners$"+Ga,Ym="__reactHandles$"+Ga,Gm="__reactResources$"+Ga,Dn="__reactMarker$"+Ga;function Yd(l){delete l[Rs],delete l[$s],delete l[Wd],delete l[qp],delete l[Ym]}function Rn(l){var d=l[Rs];if(d)return d;for(var x=l.parentNode;x;){if(d=x[An]||x[Rs]){if(x=d.alternate,d.child!==null||x!==null&&x.child!==null)for(l=_5(l);l!==null;){if(x=l[Rs])return x;l=_5(l)}return d}l=x,x=l.parentNode}return null}function Mn(l){if(l=l[Rs]||l[An]){var d=l.tag;if(d===5||d===6||d===13||d===31||d===26||d===27||d===3)return l}return null}function Bl(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(a(33))}function Ti(l){var d=l[Gm];return d||(d=l[Gm]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function us(l){l[Dn]=!0}var Gd=new Set,Km={};function On(l,d){Ln(l,d),Ln(l+"Capture",d)}function Ln(l,d){for(Km[l]=d,l=0;l<d.length;l++)Gd.add(d[l])}var Xm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zm={},Qm={};function Jm(l){return B.call(Qm,l)?!0:B.call(Zm,l)?!1:Xm.test(l)?Qm[l]=!0:(Zm[l]=!0,!1)}function Fl(l,d,x){if(Jm(d))if(x===null)l.removeAttribute(d);else{switch(typeof x){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var b=d.toLowerCase().slice(0,5);if(b!=="data-"&&b!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+x)}}function ec(l,d,x){if(x===null)l.removeAttribute(d);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+x)}}function Aa(l,d,x,b){if(b===null)l.removeAttribute(x);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(x);return}l.setAttributeNS(d,x,""+b)}}function mr(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Kd(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function Wp(l,d,x){var b=Object.getOwnPropertyDescriptor(l.constructor.prototype,d);if(!l.hasOwnProperty(d)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var D=b.get,P=b.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return D.call(this)},set:function(ae){x=""+ae,P.call(this,ae)}}),Object.defineProperty(l,d,{enumerable:b.enumerable}),{getValue:function(){return x},setValue:function(ae){x=""+ae},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function Xd(l){if(!l._valueTracker){var d=Kd(l)?"checked":"value";l._valueTracker=Wp(l,d,""+l[d])}}function Zd(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var x=d.getValue(),b="";return l&&(b=Kd(l)?l.checked?"true":"false":l.value),l=b,l!==x?(d.setValue(l),!0):!1}function zl(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Yp=/[\n"\\]/g;function vr(l){return l.replace(Yp,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function tc(l,d,x,b,D,P,ae,ue){l.name="",ae!=null&&typeof ae!="function"&&typeof ae!="symbol"&&typeof ae!="boolean"?l.type=ae:l.removeAttribute("type"),d!=null?ae==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+mr(d)):l.value!==""+mr(d)&&(l.value=""+mr(d)):ae!=="submit"&&ae!=="reset"||l.removeAttribute("value"),d!=null?Jd(l,ae,mr(d)):x!=null?Jd(l,ae,mr(x)):b!=null&&l.removeAttribute("value"),D==null&&P!=null&&(l.defaultChecked=!!P),D!=null&&(l.checked=D&&typeof D!="function"&&typeof D!="symbol"),ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"?l.name=""+mr(ue):l.removeAttribute("name")}function Qd(l,d,x,b,D,P,ae,ue){if(P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(l.type=P),d!=null||x!=null){if(!(P!=="submit"&&P!=="reset"||d!=null)){Xd(l);return}x=x!=null?""+mr(x):"",d=d!=null?""+mr(d):x,ue||d===l.value||(l.value=d),l.defaultValue=d}b=b??D,b=typeof b!="function"&&typeof b!="symbol"&&!!b,l.checked=ue?l.checked:!!b,l.defaultChecked=!!b,ae!=null&&typeof ae!="function"&&typeof ae!="symbol"&&typeof ae!="boolean"&&(l.name=ae),Xd(l)}function Jd(l,d,x){d==="number"&&zl(l.ownerDocument)===l||l.defaultValue===""+x||(l.defaultValue=""+x)}function Ei(l,d,x,b){if(l=l.options,d){d={};for(var D=0;D<x.length;D++)d["$"+x[D]]=!0;for(x=0;x<l.length;x++)D=d.hasOwnProperty("$"+l[x].value),l[x].selected!==D&&(l[x].selected=D),D&&b&&(l[x].defaultSelected=!0)}else{for(x=""+mr(x),d=null,D=0;D<l.length;D++){if(l[D].value===x){l[D].selected=!0,b&&(l[D].defaultSelected=!0);return}d!==null||l[D].disabled||(d=l[D])}d!==null&&(d.selected=!0)}}function eu(l,d,x){if(d!=null&&(d=""+mr(d),d!==l.value&&(l.value=d),x==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=x!=null?""+mr(x):""}function tu(l,d,x,b){if(d==null){if(b!=null){if(x!=null)throw Error(a(92));if(q(b)){if(1<b.length)throw Error(a(93));b=b[0]}x=b}x==null&&(x=""),d=x}x=mr(d),l.defaultValue=x,b=l.textContent,b===x&&b!==""&&b!==null&&(l.value=b),Xd(l)}function Ai(l,d){if(d){var x=l.firstChild;if(x&&x===l.lastChild&&x.nodeType===3){x.nodeValue=d;return}}l.textContent=d}var Gp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function su(l,d,x){var b=d.indexOf("--")===0;x==null||typeof x=="boolean"||x===""?b?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":b?l.setProperty(d,x):typeof x!="number"||x===0||Gp.has(d)?d==="float"?l.cssFloat=x:l[d]=(""+x).trim():l[d]=x+"px"}function ru(l,d,x){if(d!=null&&typeof d!="object")throw Error(a(62));if(l=l.style,x!=null){for(var b in x)!x.hasOwnProperty(b)||d!=null&&d.hasOwnProperty(b)||(b.indexOf("--")===0?l.setProperty(b,""):b==="float"?l.cssFloat="":l[b]="");for(var D in d)b=d[D],d.hasOwnProperty(D)&&x[D]!==b&&su(l,D,b)}else for(var P in d)d.hasOwnProperty(P)&&su(l,P,d[P])}function au(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ex=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Il(l){return ex.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function Da(){}var nu=null;function sc(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Pn=null,Di=null;function tx(l){var d=Mn(l);if(d&&(l=d.stateNode)){var x=l[$s]||null;e:switch(l=d.stateNode,d.type){case"input":if(tc(l,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name),d=x.name,x.type==="radio"&&d!=null){for(x=l;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll('input[name="'+vr(""+d)+'"][type="radio"]'),d=0;d<x.length;d++){var b=x[d];if(b!==l&&b.form===l.form){var D=b[$s]||null;if(!D)throw Error(a(90));tc(b,D.value,D.defaultValue,D.defaultValue,D.checked,D.defaultChecked,D.type,D.name)}}for(d=0;d<x.length;d++)b=x[d],b.form===l.form&&Zd(b)}break e;case"textarea":eu(l,x.value,x.defaultValue);break e;case"select":d=x.value,d!=null&&Ei(l,!!x.multiple,d,!1)}}}var rc=!1;function iu(l,d,x){if(rc)return l(d,x);rc=!0;try{var b=l(d);return b}finally{if(rc=!1,(Pn!==null||Di!==null)&&(c0(),Pn&&(d=Pn,l=Di,Di=Pn=null,tx(d),l)))for(d=0;d<l.length;d++)tx(l[d])}}function $l(l,d){var x=l.stateNode;if(x===null)return null;var b=x[$s]||null;if(b===null)return null;x=b[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(l=l.type,b=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!b;break e;default:l=!1}if(l)return null;if(x&&typeof x!="function")throw Error(a(231,d,typeof x));return x}var Ra=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ac=!1;if(Ra)try{var Ri={};Object.defineProperty(Ri,"passive",{get:function(){ac=!0}}),window.addEventListener("test",Ri,Ri),window.removeEventListener("test",Ri,Ri)}catch{ac=!1}var Ka=null,lu=null,Ul=null;function ou(){if(Ul)return Ul;var l,d=lu,x=d.length,b,D="value"in Ka?Ka.value:Ka.textContent,P=D.length;for(l=0;l<x&&d[l]===D[l];l++);var ae=x-l;for(b=1;b<=ae&&d[x-b]===D[P-b];b++);return Ul=D.slice(l,1<b?1-b:void 0)}function nc(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function ic(){return!0}function cu(){return!1}function Us(l){function d(x,b,D,P,ae){this._reactName=x,this._targetInst=D,this.type=b,this.nativeEvent=P,this.target=ae,this.currentTarget=null;for(var ue in l)l.hasOwnProperty(ue)&&(x=l[ue],this[ue]=x?x(P):P[ue]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?ic:cu,this.isPropagationStopped=cu,this}return f(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=ic)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=ic)},persist:function(){},isPersistent:ic}),d}var Bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lc=Us(Bn),Mi=f({},Bn,{view:0,detail:0}),sx=Us(Mi),du,uu,Oi,Vl=f({},Mi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oc,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Oi&&(Oi&&l.type==="mousemove"?(du=l.screenX-Oi.screenX,uu=l.screenY-Oi.screenY):uu=du=0,Oi=l),du)},movementY:function(l){return"movementY"in l?l.movementY:uu}}),rx=Us(Vl),Xp=f({},Vl,{dataTransfer:0}),ax=Us(Xp),nx=f({},Mi,{relatedTarget:0}),hu=Us(nx),Zp=f({},Bn,{animationName:0,elapsedTime:0,pseudoElement:0}),ix=Us(Zp),lx=f({},Bn,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Qp=Us(lx),Jp=f({},Bn,{data:0}),mu=Us(Jp),ox={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cx(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=tg[l])?!!d[l]:!1}function oc(){return cx}var sg=f({},Mi,{key:function(l){if(l.key){var d=ox[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=nc(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?eg[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oc,charCode:function(l){return l.type==="keypress"?nc(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?nc(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),rg=Us(sg),dx=f({},Vl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xu=Us(dx),ag=f({},Mi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oc}),ng=Us(ag),ux=f({},Bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),hx=Us(ux),ig=f({},Vl,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),lg=Us(ig),mx=f({},Bn,{newState:0,oldState:0}),xx=Us(mx),og=[9,13,27,32],fu=Ra&&"CompositionEvent"in window,Li=null;Ra&&"documentMode"in document&&(Li=document.documentMode);var fx=Ra&&"TextEvent"in window&&!Li,px=Ra&&(!fu||Li&&8<Li&&11>=Li),gx=" ",pu=!1;function gu(l,d){switch(l){case"keyup":return og.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bx(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Pi=!1;function yx(l,d){switch(l){case"compositionend":return bx(d);case"keypress":return d.which!==32?null:(pu=!0,gx);case"textInput":return l=d.data,l===gx&&pu?null:l;default:return null}}function vx(l,d){if(Pi)return l==="compositionend"||!fu&&gu(l,d)?(l=ou(),Ul=lu=Ka=null,Pi=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return px&&d.locale!=="ko"?null:d.data;default:return null}}var cg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jx(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!cg[l.type]:d==="textarea"}function bu(l,d,x,b){Pn?Di?Di.push(b):Di=[b]:Pn=b,d=p0(d,"onChange"),0<d.length&&(x=new lc("onChange","change",null,x,b),l.push({event:x,listeners:d}))}var Bi=null,Hl=null;function dg(l){d5(l,0)}function ql(l){var d=Bl(l);if(Zd(d))return l}function Zt(l,d){if(l==="change")return d}var wx=!1;if(Ra){var Ms;if(Ra){var Ma="oninput"in document;if(!Ma){var Fi=document.createElement("div");Fi.setAttribute("oninput","return;"),Ma=typeof Fi.oninput=="function"}Ms=Ma}else Ms=!1;wx=Ms&&(!document.documentMode||9<document.documentMode)}function yu(){Bi&&(Bi.detachEvent("onpropertychange",zi),Hl=Bi=null)}function zi(l){if(l.propertyName==="value"&&ql(Hl)){var d=[];bu(d,Hl,l,sc(l)),iu(dg,d)}}function Nx(l,d,x){l==="focusin"?(yu(),Bi=d,Hl=x,Bi.attachEvent("onpropertychange",zi)):l==="focusout"&&yu()}function Wl(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return ql(Hl)}function _x(l,d){if(l==="click")return ql(d)}function Xa(l,d){if(l==="input"||l==="change")return ql(d)}function kx(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var Rt=typeof Object.is=="function"?Object.is:kx;function Yl(l,d){if(Rt(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var x=Object.keys(l),b=Object.keys(d);if(x.length!==b.length)return!1;for(b=0;b<x.length;b++){var D=x[b];if(!B.call(d,D)||!Rt(l[D],d[D]))return!1}return!0}function Sx(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function vu(l,d){var x=Sx(l);l=0;for(var b;x;){if(x.nodeType===3){if(b=l+x.textContent.length,l<=d&&b>=d)return{node:x,offset:d-l};l=b}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=Sx(x)}}function ju(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?ju(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function wu(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=zl(l.document);d instanceof l.HTMLIFrameElement;){try{var x=typeof d.contentWindow.location.href=="string"}catch{x=!1}if(x)l=d.contentWindow;else break;d=zl(l.document)}return d}function cc(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var Nu=Ra&&"documentMode"in document&&11>=document.documentMode,Fn=null,dc=null,Ii=null,_u=!1;function ku(l,d,x){var b=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;_u||Fn==null||Fn!==zl(b)||(b=Fn,"selectionStart"in b&&cc(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),Ii&&Yl(Ii,b)||(Ii=b,b=p0(dc,"onSelect"),0<b.length&&(d=new lc("onSelect","select",null,d,x),l.push({event:d,listeners:b}),d.target=Fn)))}function zn(l,d){var x={};return x[l.toLowerCase()]=d.toLowerCase(),x["Webkit"+l]="webkit"+d,x["Moz"+l]="moz"+d,x}var $i={animationend:zn("Animation","AnimationEnd"),animationiteration:zn("Animation","AnimationIteration"),animationstart:zn("Animation","AnimationStart"),transitionrun:zn("Transition","TransitionRun"),transitionstart:zn("Transition","TransitionStart"),transitioncancel:zn("Transition","TransitionCancel"),transitionend:zn("Transition","TransitionEnd")},Su={},Cx={};Ra&&(Cx=document.createElement("div").style,"AnimationEvent"in window||(delete $i.animationend.animation,delete $i.animationiteration.animation,delete $i.animationstart.animation),"TransitionEvent"in window||delete $i.transitionend.transition);function In(l){if(Su[l])return Su[l];if(!$i[l])return l;var d=$i[l],x;for(x in d)if(d.hasOwnProperty(x)&&x in Cx)return Su[l]=d[x];return l}var Cu=In("animationend"),uc=In("animationiteration"),Tx=In("animationstart"),ug=In("transitionrun"),Tu=In("transitionstart"),H1=In("transitioncancel"),Ex=In("transitionend"),Ax=new Map,ye="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ye.push("scrollEnd");function Pe(l,d){Ax.set(l,d),On(d,[l])}var Ye=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},Mt=[],js=0,Za=0;function Gl(){for(var l=js,d=Za=js=0;d<l;){var x=Mt[d];Mt[d++]=null;var b=Mt[d];Mt[d++]=null;var D=Mt[d];Mt[d++]=null;var P=Mt[d];if(Mt[d++]=null,b!==null&&D!==null){var ae=b.pending;ae===null?D.next=D:(D.next=ae.next,ae.next=D),b.pending=D}P!==0&&q1(x,D,P)}}function Dx(l,d,x,b){Mt[js++]=l,Mt[js++]=d,Mt[js++]=x,Mt[js++]=b,Za|=b,l.lanes|=b,l=l.alternate,l!==null&&(l.lanes|=b)}function hg(l,d,x,b){return Dx(l,d,x,b),Rx(l)}function Kl(l,d){return Dx(l,null,null,d),Rx(l)}function q1(l,d,x){l.lanes|=x;var b=l.alternate;b!==null&&(b.lanes|=x);for(var D=!1,P=l.return;P!==null;)P.childLanes|=x,b=P.alternate,b!==null&&(b.childLanes|=x),P.tag===22&&(l=P.stateNode,l===null||l._visibility&1||(D=!0)),l=P,P=P.return;return l.tag===3?(P=l.stateNode,D&&d!==null&&(D=31-zt(x),l=P.hiddenUpdates,b=l[D],b===null?l[D]=[d]:b.push(d),d.lane=x|536870912),P):null}function Rx(l){if(50<Xu)throw Xu=0,jb=null,Error(a(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var hc={};function G8(l,d,x,b){this.tag=l,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vr(l,d,x,b){return new G8(l,d,x,b)}function mg(l){return l=l.prototype,!(!l||!l.isReactComponent)}function $n(l,d){var x=l.alternate;return x===null?(x=Vr(l.tag,d,l.key,l.mode),x.elementType=l.elementType,x.type=l.type,x.stateNode=l.stateNode,x.alternate=l,l.alternate=x):(x.pendingProps=d,x.type=l.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=l.flags&65011712,x.childLanes=l.childLanes,x.lanes=l.lanes,x.child=l.child,x.memoizedProps=l.memoizedProps,x.memoizedState=l.memoizedState,x.updateQueue=l.updateQueue,d=l.dependencies,x.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},x.sibling=l.sibling,x.index=l.index,x.ref=l.ref,x.refCleanup=l.refCleanup,x}function W1(l,d){l.flags&=65011714;var x=l.alternate;return x===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=x.childLanes,l.lanes=x.lanes,l.child=x.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=x.memoizedProps,l.memoizedState=x.memoizedState,l.updateQueue=x.updateQueue,l.type=x.type,d=x.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function Mx(l,d,x,b,D,P){var ae=0;if(b=l,typeof l=="function")mg(l)&&(ae=1);else if(typeof l=="string")ae=JR(l,x,ie.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case C:return l=Vr(31,x,d,D),l.elementType=C,l.lanes=P,l;case v:return Xl(x.children,D,P,d);case y:ae=8,D|=24;break;case N:return l=Vr(12,x,d,D|2),l.elementType=N,l.lanes=P,l;case T:return l=Vr(13,x,d,D),l.elementType=T,l.lanes=P,l;case E:return l=Vr(19,x,d,D),l.elementType=E,l.lanes=P,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case k:ae=10;break e;case S:ae=9;break e;case _:ae=11;break e;case z:ae=14;break e;case M:ae=16,b=null;break e}ae=29,x=Error(a(130,l===null?"null":typeof l,"")),b=null}return d=Vr(ae,x,d,D),d.elementType=l,d.type=b,d.lanes=P,d}function Xl(l,d,x,b){return l=Vr(7,l,b,d),l.lanes=x,l}function xg(l,d,x){return l=Vr(6,l,null,d),l.lanes=x,l}function Y1(l){var d=Vr(18,null,null,0);return d.stateNode=l,d}function fg(l,d,x){return d=Vr(4,l.children!==null?l.children:[],l.key,d),d.lanes=x,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var G1=new WeakMap;function aa(l,d){if(typeof l=="object"&&l!==null){var x=G1.get(l);return x!==void 0?x:(d={value:l,source:d,stack:L(d)},G1.set(l,d),d)}return{value:l,source:d,stack:L(d)}}var mc=[],xc=0,Ox=null,Eu=0,na=[],ia=0,Ui=null,Qa=1,Ja="";function Un(l,d){mc[xc++]=Eu,mc[xc++]=Ox,Ox=l,Eu=d}function K1(l,d,x){na[ia++]=Qa,na[ia++]=Ja,na[ia++]=Ui,Ui=l;var b=Qa;l=Ja;var D=32-zt(b)-1;b&=~(1<<D),x+=1;var P=32-zt(d)+D;if(30<P){var ae=D-D%5;P=(b&(1<<ae)-1).toString(32),b>>=ae,D-=ae,Qa=1<<32-zt(d)+D|x<<D|b,Ja=P+l}else Qa=1<<P|x<<D|b,Ja=l}function pg(l){l.return!==null&&(Un(l,1),K1(l,1,0))}function gg(l){for(;l===Ox;)Ox=mc[--xc],mc[xc]=null,Eu=mc[--xc],mc[xc]=null;for(;l===Ui;)Ui=na[--ia],na[ia]=null,Ja=na[--ia],na[ia]=null,Qa=na[--ia],na[ia]=null}function X1(l,d){na[ia++]=Qa,na[ia++]=Ja,na[ia++]=Ui,Qa=d.id,Ja=d.overflow,Ui=l}var Vs=null,Ht=null,gt=!1,Vi=null,la=!1,bg=Error(a(519));function Hi(l){var d=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Au(aa(d,l)),bg}function Z1(l){var d=l.stateNode,x=l.type,b=l.memoizedProps;switch(d[Rs]=l,d[$s]=b,x){case"dialog":ut("cancel",d),ut("close",d);break;case"iframe":case"object":case"embed":ut("load",d);break;case"video":case"audio":for(x=0;x<Qu.length;x++)ut(Qu[x],d);break;case"source":ut("error",d);break;case"img":case"image":case"link":ut("error",d),ut("load",d);break;case"details":ut("toggle",d);break;case"input":ut("invalid",d),Qd(d,b.value,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name,!0);break;case"select":ut("invalid",d);break;case"textarea":ut("invalid",d),tu(d,b.value,b.defaultValue,b.children)}x=b.children,typeof x!="string"&&typeof x!="number"&&typeof x!="bigint"||d.textContent===""+x||b.suppressHydrationWarning===!0||x5(d.textContent,x)?(b.popover!=null&&(ut("beforetoggle",d),ut("toggle",d)),b.onScroll!=null&&ut("scroll",d),b.onScrollEnd!=null&&ut("scrollend",d),b.onClick!=null&&(d.onclick=Da),d=!0):d=!1,d||Hi(l,!0)}function Q1(l){for(Vs=l.return;Vs;)switch(Vs.tag){case 5:case 31:case 13:la=!1;return;case 27:case 3:la=!0;return;default:Vs=Vs.return}}function fc(l){if(l!==Vs)return!1;if(!gt)return Q1(l),gt=!0,!1;var d=l.tag,x;if((x=d!==3&&d!==27)&&((x=d===5)&&(x=l.type,x=!(x!=="form"&&x!=="button")||Pb(l.type,l.memoizedProps)),x=!x),x&&Ht&&Hi(l),Q1(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(a(317));Ht=N5(l)}else if(d===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(a(317));Ht=N5(l)}else d===27?(d=Ht,al(l.type)?(l=$b,$b=null,Ht=l):Ht=d):Ht=Vs?ca(l.stateNode.nextSibling):null;return!0}function Zl(){Ht=Vs=null,gt=!1}function yg(){var l=Vi;return l!==null&&(_r===null?_r=l:_r.push.apply(_r,l),Vi=null),l}function Au(l){Vi===null?Vi=[l]:Vi.push(l)}var vg=K(null),Ql=null,Vn=null;function qi(l,d,x){le(vg,d._currentValue),d._currentValue=x}function Hn(l){l._currentValue=vg.current,$(vg)}function jg(l,d,x){for(;l!==null;){var b=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,b!==null&&(b.childLanes|=d)):b!==null&&(b.childLanes&d)!==d&&(b.childLanes|=d),l===x)break;l=l.return}}function wg(l,d,x,b){var D=l.child;for(D!==null&&(D.return=l);D!==null;){var P=D.dependencies;if(P!==null){var ae=D.child;P=P.firstContext;e:for(;P!==null;){var ue=P;P=D;for(var pe=0;pe<d.length;pe++)if(ue.context===d[pe]){P.lanes|=x,ue=P.alternate,ue!==null&&(ue.lanes|=x),jg(P.return,x,l),b||(ae=null);break e}P=ue.next}}else if(D.tag===18){if(ae=D.return,ae===null)throw Error(a(341));ae.lanes|=x,P=ae.alternate,P!==null&&(P.lanes|=x),jg(ae,x,l),ae=null}else ae=D.child;if(ae!==null)ae.return=D;else for(ae=D;ae!==null;){if(ae===l){ae=null;break}if(D=ae.sibling,D!==null){D.return=ae.return,ae=D;break}ae=ae.return}D=ae}}function pc(l,d,x,b){l=null;for(var D=d,P=!1;D!==null;){if(!P){if((D.flags&524288)!==0)P=!0;else if((D.flags&262144)!==0)break}if(D.tag===10){var ae=D.alternate;if(ae===null)throw Error(a(387));if(ae=ae.memoizedProps,ae!==null){var ue=D.type;Rt(D.pendingProps.value,ae.value)||(l!==null?l.push(ue):l=[ue])}}else if(D===U.current){if(ae=D.alternate,ae===null)throw Error(a(387));ae.memoizedState.memoizedState!==D.memoizedState.memoizedState&&(l!==null?l.push(rh):l=[rh])}D=D.return}l!==null&&wg(d,l,x,b),d.flags|=262144}function Lx(l){for(l=l.firstContext;l!==null;){if(!Rt(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Jl(l){Ql=l,Vn=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Hs(l){return J1(Ql,l)}function Px(l,d){return Ql===null&&Jl(l),J1(l,d)}function J1(l,d){var x=d._currentValue;if(d={context:d,memoizedValue:x,next:null},Vn===null){if(l===null)throw Error(a(308));Vn=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else Vn=Vn.next=d;return x}var K8=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(x,b){l.push(b)}};this.abort=function(){d.aborted=!0,l.forEach(function(x){return x()})}},X8=s.unstable_scheduleCallback,Z8=s.unstable_NormalPriority,ws={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ng(){return{controller:new K8,data:new Map,refCount:0}}function Du(l){l.refCount--,l.refCount===0&&X8(Z8,function(){l.controller.abort()})}var Ru=null,_g=0,gc=0,bc=null;function Q8(l,d){if(Ru===null){var x=Ru=[];_g=0,gc=Cb(),bc={status:"pending",value:void 0,then:function(b){x.push(b)}}}return _g++,d.then(e2,e2),d}function e2(){if(--_g===0&&Ru!==null){bc!==null&&(bc.status="fulfilled");var l=Ru;Ru=null,gc=0,bc=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function J8(l,d){var x=[],b={status:"pending",value:null,reason:null,then:function(D){x.push(D)}};return l.then(function(){b.status="fulfilled",b.value=d;for(var D=0;D<x.length;D++)(0,x[D])(d)},function(D){for(b.status="rejected",b.reason=D,D=0;D<x.length;D++)(0,x[D])(void 0)}),b}var t2=J.S;J.S=function(l,d){F_=Ce(),typeof d=="object"&&d!==null&&typeof d.then=="function"&&Q8(l,d),t2!==null&&t2(l,d)};var eo=K(null);function kg(){var l=eo.current;return l!==null?l:It.pooledCache}function Bx(l,d){d===null?le(eo,eo.current):le(eo,d.pool)}function s2(){var l=kg();return l===null?null:{parent:ws._currentValue,pool:l}}var yc=Error(a(460)),Sg=Error(a(474)),Fx=Error(a(542)),zx={then:function(){}};function r2(l){return l=l.status,l==="fulfilled"||l==="rejected"}function a2(l,d,x){switch(x=l[x],x===void 0?l.push(d):x!==d&&(d.then(Da,Da),d=x),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,i2(l),l;default:if(typeof d.status=="string")d.then(Da,Da);else{if(l=It,l!==null&&100<l.shellSuspendCounter)throw Error(a(482));l=d,l.status="pending",l.then(function(b){if(d.status==="pending"){var D=d;D.status="fulfilled",D.value=b}},function(b){if(d.status==="pending"){var D=d;D.status="rejected",D.reason=b}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,i2(l),l}throw so=d,yc}}function to(l){try{var d=l._init;return d(l._payload)}catch(x){throw x!==null&&typeof x=="object"&&typeof x.then=="function"?(so=x,yc):x}}var so=null;function n2(){if(so===null)throw Error(a(459));var l=so;return so=null,l}function i2(l){if(l===yc||l===Fx)throw Error(a(483))}var vc=null,Mu=0;function Ix(l){var d=Mu;return Mu+=1,vc===null&&(vc=[]),a2(vc,l,d)}function Ou(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function $x(l,d){throw d.$$typeof===p?Error(a(525)):(l=Object.prototype.toString.call(d),Error(a(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function l2(l){function d(be,ge){if(l){var ve=be.deletions;ve===null?(be.deletions=[ge],be.flags|=16):ve.push(ge)}}function x(be,ge){if(!l)return null;for(;ge!==null;)d(be,ge),ge=ge.sibling;return null}function b(be){for(var ge=new Map;be!==null;)be.key!==null?ge.set(be.key,be):ge.set(be.index,be),be=be.sibling;return ge}function D(be,ge){return be=$n(be,ge),be.index=0,be.sibling=null,be}function P(be,ge,ve){return be.index=ve,l?(ve=be.alternate,ve!==null?(ve=ve.index,ve<ge?(be.flags|=67108866,ge):ve):(be.flags|=67108866,ge)):(be.flags|=1048576,ge)}function ae(be){return l&&be.alternate===null&&(be.flags|=67108866),be}function ue(be,ge,ve,De){return ge===null||ge.tag!==6?(ge=xg(ve,be.mode,De),ge.return=be,ge):(ge=D(ge,ve),ge.return=be,ge)}function pe(be,ge,ve,De){var He=ve.type;return He===v?Ee(be,ge,ve.props.children,De,ve.key):ge!==null&&(ge.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===M&&to(He)===ge.type)?(ge=D(ge,ve.props),Ou(ge,ve),ge.return=be,ge):(ge=Mx(ve.type,ve.key,ve.props,null,be.mode,De),Ou(ge,ve),ge.return=be,ge)}function je(be,ge,ve,De){return ge===null||ge.tag!==4||ge.stateNode.containerInfo!==ve.containerInfo||ge.stateNode.implementation!==ve.implementation?(ge=fg(ve,be.mode,De),ge.return=be,ge):(ge=D(ge,ve.children||[]),ge.return=be,ge)}function Ee(be,ge,ve,De,He){return ge===null||ge.tag!==7?(ge=Xl(ve,be.mode,De,He),ge.return=be,ge):(ge=D(ge,ve),ge.return=be,ge)}function Re(be,ge,ve){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return ge=xg(""+ge,be.mode,ve),ge.return=be,ge;if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case j:return ve=Mx(ge.type,ge.key,ge.props,null,be.mode,ve),Ou(ve,ge),ve.return=be,ve;case g:return ge=fg(ge,be.mode,ve),ge.return=be,ge;case M:return ge=to(ge),Re(be,ge,ve)}if(q(ge)||I(ge))return ge=Xl(ge,be.mode,ve,null),ge.return=be,ge;if(typeof ge.then=="function")return Re(be,Ix(ge),ve);if(ge.$$typeof===k)return Re(be,Px(be,ge),ve);$x(be,ge)}return null}function Ne(be,ge,ve,De){var He=ge!==null?ge.key:null;if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return He!==null?null:ue(be,ge,""+ve,De);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case j:return ve.key===He?pe(be,ge,ve,De):null;case g:return ve.key===He?je(be,ge,ve,De):null;case M:return ve=to(ve),Ne(be,ge,ve,De)}if(q(ve)||I(ve))return He!==null?null:Ee(be,ge,ve,De,null);if(typeof ve.then=="function")return Ne(be,ge,Ix(ve),De);if(ve.$$typeof===k)return Ne(be,ge,Px(be,ve),De);$x(be,ve)}return null}function Se(be,ge,ve,De,He){if(typeof De=="string"&&De!==""||typeof De=="number"||typeof De=="bigint")return be=be.get(ve)||null,ue(ge,be,""+De,He);if(typeof De=="object"&&De!==null){switch(De.$$typeof){case j:return be=be.get(De.key===null?ve:De.key)||null,pe(ge,be,De,He);case g:return be=be.get(De.key===null?ve:De.key)||null,je(ge,be,De,He);case M:return De=to(De),Se(be,ge,ve,De,He)}if(q(De)||I(De))return be=be.get(ve)||null,Ee(ge,be,De,He,null);if(typeof De.then=="function")return Se(be,ge,ve,Ix(De),He);if(De.$$typeof===k)return Se(be,ge,ve,Px(ge,De),He);$x(ge,De)}return null}function Fe(be,ge,ve,De){for(var He=null,vt=null,$e=ge,nt=ge=0,xt=null;$e!==null&&nt<ve.length;nt++){$e.index>nt?(xt=$e,$e=null):xt=$e.sibling;var jt=Ne(be,$e,ve[nt],De);if(jt===null){$e===null&&($e=xt);break}l&&$e&&jt.alternate===null&&d(be,$e),ge=P(jt,ge,nt),vt===null?He=jt:vt.sibling=jt,vt=jt,$e=xt}if(nt===ve.length)return x(be,$e),gt&&Un(be,nt),He;if($e===null){for(;nt<ve.length;nt++)$e=Re(be,ve[nt],De),$e!==null&&(ge=P($e,ge,nt),vt===null?He=$e:vt.sibling=$e,vt=$e);return gt&&Un(be,nt),He}for($e=b($e);nt<ve.length;nt++)xt=Se($e,be,nt,ve[nt],De),xt!==null&&(l&&xt.alternate!==null&&$e.delete(xt.key===null?nt:xt.key),ge=P(xt,ge,nt),vt===null?He=xt:vt.sibling=xt,vt=xt);return l&&$e.forEach(function(cl){return d(be,cl)}),gt&&Un(be,nt),He}function Ke(be,ge,ve,De){if(ve==null)throw Error(a(151));for(var He=null,vt=null,$e=ge,nt=ge=0,xt=null,jt=ve.next();$e!==null&&!jt.done;nt++,jt=ve.next()){$e.index>nt?(xt=$e,$e=null):xt=$e.sibling;var cl=Ne(be,$e,jt.value,De);if(cl===null){$e===null&&($e=xt);break}l&&$e&&cl.alternate===null&&d(be,$e),ge=P(cl,ge,nt),vt===null?He=cl:vt.sibling=cl,vt=cl,$e=xt}if(jt.done)return x(be,$e),gt&&Un(be,nt),He;if($e===null){for(;!jt.done;nt++,jt=ve.next())jt=Re(be,jt.value,De),jt!==null&&(ge=P(jt,ge,nt),vt===null?He=jt:vt.sibling=jt,vt=jt);return gt&&Un(be,nt),He}for($e=b($e);!jt.done;nt++,jt=ve.next())jt=Se($e,be,nt,jt.value,De),jt!==null&&(l&&jt.alternate!==null&&$e.delete(jt.key===null?nt:jt.key),ge=P(jt,ge,nt),vt===null?He=jt:vt.sibling=jt,vt=jt);return l&&$e.forEach(function(dM){return d(be,dM)}),gt&&Un(be,nt),He}function Pt(be,ge,ve,De){if(typeof ve=="object"&&ve!==null&&ve.type===v&&ve.key===null&&(ve=ve.props.children),typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case j:e:{for(var He=ve.key;ge!==null;){if(ge.key===He){if(He=ve.type,He===v){if(ge.tag===7){x(be,ge.sibling),De=D(ge,ve.props.children),De.return=be,be=De;break e}}else if(ge.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===M&&to(He)===ge.type){x(be,ge.sibling),De=D(ge,ve.props),Ou(De,ve),De.return=be,be=De;break e}x(be,ge);break}else d(be,ge);ge=ge.sibling}ve.type===v?(De=Xl(ve.props.children,be.mode,De,ve.key),De.return=be,be=De):(De=Mx(ve.type,ve.key,ve.props,null,be.mode,De),Ou(De,ve),De.return=be,be=De)}return ae(be);case g:e:{for(He=ve.key;ge!==null;){if(ge.key===He)if(ge.tag===4&&ge.stateNode.containerInfo===ve.containerInfo&&ge.stateNode.implementation===ve.implementation){x(be,ge.sibling),De=D(ge,ve.children||[]),De.return=be,be=De;break e}else{x(be,ge);break}else d(be,ge);ge=ge.sibling}De=fg(ve,be.mode,De),De.return=be,be=De}return ae(be);case M:return ve=to(ve),Pt(be,ge,ve,De)}if(q(ve))return Fe(be,ge,ve,De);if(I(ve)){if(He=I(ve),typeof He!="function")throw Error(a(150));return ve=He.call(ve),Ke(be,ge,ve,De)}if(typeof ve.then=="function")return Pt(be,ge,Ix(ve),De);if(ve.$$typeof===k)return Pt(be,ge,Px(be,ve),De);$x(be,ve)}return typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint"?(ve=""+ve,ge!==null&&ge.tag===6?(x(be,ge.sibling),De=D(ge,ve),De.return=be,be=De):(x(be,ge),De=xg(ve,be.mode,De),De.return=be,be=De),ae(be)):x(be,ge)}return function(be,ge,ve,De){try{Mu=0;var He=Pt(be,ge,ve,De);return vc=null,He}catch($e){if($e===yc||$e===Fx)throw $e;var vt=Vr(29,$e,null,be.mode);return vt.lanes=De,vt.return=be,vt}finally{}}}var ro=l2(!0),o2=l2(!1),Wi=!1;function Cg(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Tg(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Yi(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Gi(l,d,x){var b=l.updateQueue;if(b===null)return null;if(b=b.shared,(Nt&2)!==0){var D=b.pending;return D===null?d.next=d:(d.next=D.next,D.next=d),b.pending=d,d=Rx(l),q1(l,null,x),d}return Dx(l,b,d,x),Rx(l)}function Lu(l,d,x){if(d=d.updateQueue,d!==null&&(d=d.shared,(x&4194048)!==0)){var b=d.lanes;b&=l.pendingLanes,x|=b,d.lanes=x,Vd(l,x)}}function Eg(l,d){var x=l.updateQueue,b=l.alternate;if(b!==null&&(b=b.updateQueue,x===b)){var D=null,P=null;if(x=x.firstBaseUpdate,x!==null){do{var ae={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};P===null?D=P=ae:P=P.next=ae,x=x.next}while(x!==null);P===null?D=P=d:P=P.next=d}else D=P=d;x={baseState:b.baseState,firstBaseUpdate:D,lastBaseUpdate:P,shared:b.shared,callbacks:b.callbacks},l.updateQueue=x;return}l=x.lastBaseUpdate,l===null?x.firstBaseUpdate=d:l.next=d,x.lastBaseUpdate=d}var Ag=!1;function Pu(){if(Ag){var l=bc;if(l!==null)throw l}}function Bu(l,d,x,b){Ag=!1;var D=l.updateQueue;Wi=!1;var P=D.firstBaseUpdate,ae=D.lastBaseUpdate,ue=D.shared.pending;if(ue!==null){D.shared.pending=null;var pe=ue,je=pe.next;pe.next=null,ae===null?P=je:ae.next=je,ae=pe;var Ee=l.alternate;Ee!==null&&(Ee=Ee.updateQueue,ue=Ee.lastBaseUpdate,ue!==ae&&(ue===null?Ee.firstBaseUpdate=je:ue.next=je,Ee.lastBaseUpdate=pe))}if(P!==null){var Re=D.baseState;ae=0,Ee=je=pe=null,ue=P;do{var Ne=ue.lane&-536870913,Se=Ne!==ue.lane;if(Se?(mt&Ne)===Ne:(b&Ne)===Ne){Ne!==0&&Ne===gc&&(Ag=!0),Ee!==null&&(Ee=Ee.next={lane:0,tag:ue.tag,payload:ue.payload,callback:null,next:null});e:{var Fe=l,Ke=ue;Ne=d;var Pt=x;switch(Ke.tag){case 1:if(Fe=Ke.payload,typeof Fe=="function"){Re=Fe.call(Pt,Re,Ne);break e}Re=Fe;break e;case 3:Fe.flags=Fe.flags&-65537|128;case 0:if(Fe=Ke.payload,Ne=typeof Fe=="function"?Fe.call(Pt,Re,Ne):Fe,Ne==null)break e;Re=f({},Re,Ne);break e;case 2:Wi=!0}}Ne=ue.callback,Ne!==null&&(l.flags|=64,Se&&(l.flags|=8192),Se=D.callbacks,Se===null?D.callbacks=[Ne]:Se.push(Ne))}else Se={lane:Ne,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null},Ee===null?(je=Ee=Se,pe=Re):Ee=Ee.next=Se,ae|=Ne;if(ue=ue.next,ue===null){if(ue=D.shared.pending,ue===null)break;Se=ue,ue=Se.next,Se.next=null,D.lastBaseUpdate=Se,D.shared.pending=null}}while(!0);Ee===null&&(pe=Re),D.baseState=pe,D.firstBaseUpdate=je,D.lastBaseUpdate=Ee,P===null&&(D.shared.lanes=0),Ji|=ae,l.lanes=ae,l.memoizedState=Re}}function c2(l,d){if(typeof l!="function")throw Error(a(191,l));l.call(d)}function d2(l,d){var x=l.callbacks;if(x!==null)for(l.callbacks=null,l=0;l<x.length;l++)c2(x[l],d)}var jc=K(null),Ux=K(0);function u2(l,d){l=Jn,le(Ux,l),le(jc,d),Jn=l|d.baseLanes}function Dg(){le(Ux,Jn),le(jc,jc.current)}function Rg(){Jn=Ux.current,$(jc),$(Ux)}var Hr=K(null),oa=null;function Ki(l){var d=l.alternate;le(hs,hs.current&1),le(Hr,l),oa===null&&(d===null||jc.current!==null||d.memoizedState!==null)&&(oa=l)}function Mg(l){le(hs,hs.current),le(Hr,l),oa===null&&(oa=l)}function h2(l){l.tag===22?(le(hs,hs.current),le(Hr,l),oa===null&&(oa=l)):Xi()}function Xi(){le(hs,hs.current),le(Hr,Hr.current)}function qr(l){$(Hr),oa===l&&(oa=null),$(hs)}var hs=K(0);function Vx(l){for(var d=l;d!==null;){if(d.tag===13){var x=d.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||zb(x)||Ib(x)))return d}else if(d.tag===19&&(d.memoizedProps.revealOrder==="forwards"||d.memoizedProps.revealOrder==="backwards"||d.memoizedProps.revealOrder==="unstable_legacy-backwards"||d.memoizedProps.revealOrder==="together")){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var qn=0,rt=null,Ot=null,Ns=null,Hx=!1,wc=!1,ao=!1,qx=0,Fu=0,Nc=null,eR=0;function as(){throw Error(a(321))}function Og(l,d){if(d===null)return!1;for(var x=0;x<d.length&&x<l.length;x++)if(!Rt(l[x],d[x]))return!1;return!0}function Lg(l,d,x,b,D,P){return qn=P,rt=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,J.H=l===null||l.memoizedState===null?K2:Xg,ao=!1,P=x(b,D),ao=!1,wc&&(P=x2(d,x,b,D)),m2(l),P}function m2(l){J.H=$u;var d=Ot!==null&&Ot.next!==null;if(qn=0,Ns=Ot=rt=null,Hx=!1,Fu=0,Nc=null,d)throw Error(a(300));l===null||_s||(l=l.dependencies,l!==null&&Lx(l)&&(_s=!0))}function x2(l,d,x,b){rt=l;var D=0;do{if(wc&&(Nc=null),Fu=0,wc=!1,25<=D)throw Error(a(301));if(D+=1,Ns=Ot=null,l.updateQueue!=null){var P=l.updateQueue;P.lastEffect=null,P.events=null,P.stores=null,P.memoCache!=null&&(P.memoCache.index=0)}J.H=X2,P=d(x,b)}while(wc);return P}function tR(){var l=J.H,d=l.useState()[0];return d=typeof d.then=="function"?zu(d):d,l=l.useState()[0],(Ot!==null?Ot.memoizedState:null)!==l&&(rt.flags|=1024),d}function Pg(){var l=qx!==0;return qx=0,l}function Bg(l,d,x){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~x}function Fg(l){if(Hx){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}Hx=!1}qn=0,Ns=Ot=rt=null,wc=!1,Fu=qx=0,Nc=null}function xr(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ns===null?rt.memoizedState=Ns=l:Ns=Ns.next=l,Ns}function ms(){if(Ot===null){var l=rt.alternate;l=l!==null?l.memoizedState:null}else l=Ot.next;var d=Ns===null?rt.memoizedState:Ns.next;if(d!==null)Ns=d,Ot=l;else{if(l===null)throw rt.alternate===null?Error(a(467)):Error(a(310));Ot=l,l={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},Ns===null?rt.memoizedState=Ns=l:Ns=Ns.next=l}return Ns}function Wx(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zu(l){var d=Fu;return Fu+=1,Nc===null&&(Nc=[]),l=a2(Nc,l,d),d=rt,(Ns===null?d.memoizedState:Ns.next)===null&&(d=d.alternate,J.H=d===null||d.memoizedState===null?K2:Xg),l}function Yx(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return zu(l);if(l.$$typeof===k)return Hs(l)}throw Error(a(438,String(l)))}function zg(l){var d=null,x=rt.updateQueue;if(x!==null&&(d=x.memoCache),d==null){var b=rt.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(d={data:b.data.map(function(D){return D.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),x===null&&(x=Wx(),rt.updateQueue=x),x.memoCache=d,x=d.data[d.index],x===void 0)for(x=d.data[d.index]=Array(l),b=0;b<l;b++)x[b]=A;return d.index++,x}function Wn(l,d){return typeof d=="function"?d(l):d}function Gx(l){var d=ms();return Ig(d,Ot,l)}function Ig(l,d,x){var b=l.queue;if(b===null)throw Error(a(311));b.lastRenderedReducer=x;var D=l.baseQueue,P=b.pending;if(P!==null){if(D!==null){var ae=D.next;D.next=P.next,P.next=ae}d.baseQueue=D=P,b.pending=null}if(P=l.baseState,D===null)l.memoizedState=P;else{d=D.next;var ue=ae=null,pe=null,je=d,Ee=!1;do{var Re=je.lane&-536870913;if(Re!==je.lane?(mt&Re)===Re:(qn&Re)===Re){var Ne=je.revertLane;if(Ne===0)pe!==null&&(pe=pe.next={lane:0,revertLane:0,gesture:null,action:je.action,hasEagerState:je.hasEagerState,eagerState:je.eagerState,next:null}),Re===gc&&(Ee=!0);else if((qn&Ne)===Ne){je=je.next,Ne===gc&&(Ee=!0);continue}else Re={lane:0,revertLane:je.revertLane,gesture:null,action:je.action,hasEagerState:je.hasEagerState,eagerState:je.eagerState,next:null},pe===null?(ue=pe=Re,ae=P):pe=pe.next=Re,rt.lanes|=Ne,Ji|=Ne;Re=je.action,ao&&x(P,Re),P=je.hasEagerState?je.eagerState:x(P,Re)}else Ne={lane:Re,revertLane:je.revertLane,gesture:je.gesture,action:je.action,hasEagerState:je.hasEagerState,eagerState:je.eagerState,next:null},pe===null?(ue=pe=Ne,ae=P):pe=pe.next=Ne,rt.lanes|=Re,Ji|=Re;je=je.next}while(je!==null&&je!==d);if(pe===null?ae=P:pe.next=ue,!Rt(P,l.memoizedState)&&(_s=!0,Ee&&(x=bc,x!==null)))throw x;l.memoizedState=P,l.baseState=ae,l.baseQueue=pe,b.lastRenderedState=P}return D===null&&(b.lanes=0),[l.memoizedState,b.dispatch]}function $g(l){var d=ms(),x=d.queue;if(x===null)throw Error(a(311));x.lastRenderedReducer=l;var b=x.dispatch,D=x.pending,P=d.memoizedState;if(D!==null){x.pending=null;var ae=D=D.next;do P=l(P,ae.action),ae=ae.next;while(ae!==D);Rt(P,d.memoizedState)||(_s=!0),d.memoizedState=P,d.baseQueue===null&&(d.baseState=P),x.lastRenderedState=P}return[P,b]}function f2(l,d,x){var b=rt,D=ms(),P=gt;if(P){if(x===void 0)throw Error(a(407));x=x()}else x=d();var ae=!Rt((Ot||D).memoizedState,x);if(ae&&(D.memoizedState=x,_s=!0),D=D.queue,Hg(b2.bind(null,b,D,l),[l]),D.getSnapshot!==d||ae||Ns!==null&&Ns.memoizedState.tag&1){if(b.flags|=2048,_c(9,{destroy:void 0},g2.bind(null,b,D,x,d),null),It===null)throw Error(a(349));P||(qn&127)!==0||p2(b,d,x)}return x}function p2(l,d,x){l.flags|=16384,l={getSnapshot:d,value:x},d=rt.updateQueue,d===null?(d=Wx(),rt.updateQueue=d,d.stores=[l]):(x=d.stores,x===null?d.stores=[l]:x.push(l))}function g2(l,d,x,b){d.value=x,d.getSnapshot=b,y2(d)&&v2(l)}function b2(l,d,x){return x(function(){y2(d)&&v2(l)})}function y2(l){var d=l.getSnapshot;l=l.value;try{var x=d();return!Rt(l,x)}catch{return!0}}function v2(l){var d=Kl(l,2);d!==null&&kr(d,l,2)}function Ug(l){var d=xr();if(typeof l=="function"){var x=l;if(l=x(),ao){yr(!0);try{x()}finally{yr(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wn,lastRenderedState:l},d}function j2(l,d,x,b){return l.baseState=x,Ig(l,Ot,typeof b=="function"?b:Wn)}function sR(l,d,x,b,D){if(Zx(l))throw Error(a(485));if(l=d.action,l!==null){var P={payload:D,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ae){P.listeners.push(ae)}};J.T!==null?x(!0):P.isTransition=!1,b(P),x=d.pending,x===null?(P.next=d.pending=P,w2(d,P)):(P.next=x.next,d.pending=x.next=P)}}function w2(l,d){var x=d.action,b=d.payload,D=l.state;if(d.isTransition){var P=J.T,ae={};J.T=ae;try{var ue=x(D,b),pe=J.S;pe!==null&&pe(ae,ue),N2(l,d,ue)}catch(je){Vg(l,d,je)}finally{P!==null&&ae.types!==null&&(P.types=ae.types),J.T=P}}else try{P=x(D,b),N2(l,d,P)}catch(je){Vg(l,d,je)}}function N2(l,d,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(b){_2(l,d,b)},function(b){return Vg(l,d,b)}):_2(l,d,x)}function _2(l,d,x){d.status="fulfilled",d.value=x,k2(d),l.state=x,d=l.pending,d!==null&&(x=d.next,x===d?l.pending=null:(x=x.next,d.next=x,w2(l,x)))}function Vg(l,d,x){var b=l.pending;if(l.pending=null,b!==null){b=b.next;do d.status="rejected",d.reason=x,k2(d),d=d.next;while(d!==b)}l.action=null}function k2(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function S2(l,d){return d}function C2(l,d){if(gt){var x=It.formState;if(x!==null){e:{var b=rt;if(gt){if(Ht){t:{for(var D=Ht,P=la;D.nodeType!==8;){if(!P){D=null;break t}if(D=ca(D.nextSibling),D===null){D=null;break t}}P=D.data,D=P==="F!"||P==="F"?D:null}if(D){Ht=ca(D.nextSibling),b=D.data==="F!";break e}}Hi(b)}b=!1}b&&(d=x[0])}}return x=xr(),x.memoizedState=x.baseState=d,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:S2,lastRenderedState:d},x.queue=b,x=W2.bind(null,rt,b),b.dispatch=x,b=Ug(!1),P=Kg.bind(null,rt,!1,b.queue),b=xr(),D={state:d,dispatch:null,action:l,pending:null},b.queue=D,x=sR.bind(null,rt,D,P,x),D.dispatch=x,b.memoizedState=l,[d,x,!1]}function T2(l){var d=ms();return E2(d,Ot,l)}function E2(l,d,x){if(d=Ig(l,d,S2)[0],l=Gx(Wn)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var b=zu(d)}catch(ae){throw ae===yc?Fx:ae}else b=d;d=ms();var D=d.queue,P=D.dispatch;return x!==d.memoizedState&&(rt.flags|=2048,_c(9,{destroy:void 0},rR.bind(null,D,x),null)),[b,P,l]}function rR(l,d){l.action=d}function A2(l){var d=ms(),x=Ot;if(x!==null)return E2(d,x,l);ms(),d=d.memoizedState,x=ms();var b=x.queue.dispatch;return x.memoizedState=l,[d,b,!1]}function _c(l,d,x,b){return l={tag:l,create:x,deps:b,inst:d,next:null},d=rt.updateQueue,d===null&&(d=Wx(),rt.updateQueue=d),x=d.lastEffect,x===null?d.lastEffect=l.next=l:(b=x.next,x.next=l,l.next=b,d.lastEffect=l),l}function D2(){return ms().memoizedState}function Kx(l,d,x,b){var D=xr();rt.flags|=l,D.memoizedState=_c(1|d,{destroy:void 0},x,b===void 0?null:b)}function Xx(l,d,x,b){var D=ms();b=b===void 0?null:b;var P=D.memoizedState.inst;Ot!==null&&b!==null&&Og(b,Ot.memoizedState.deps)?D.memoizedState=_c(d,P,x,b):(rt.flags|=l,D.memoizedState=_c(1|d,P,x,b))}function R2(l,d){Kx(8390656,8,l,d)}function Hg(l,d){Xx(2048,8,l,d)}function aR(l){rt.flags|=4;var d=rt.updateQueue;if(d===null)d=Wx(),rt.updateQueue=d,d.events=[l];else{var x=d.events;x===null?d.events=[l]:x.push(l)}}function M2(l){var d=ms().memoizedState;return aR({ref:d,nextImpl:l}),function(){if((Nt&2)!==0)throw Error(a(440));return d.impl.apply(void 0,arguments)}}function O2(l,d){return Xx(4,2,l,d)}function L2(l,d){return Xx(4,4,l,d)}function P2(l,d){if(typeof d=="function"){l=l();var x=d(l);return function(){typeof x=="function"?x():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function B2(l,d,x){x=x!=null?x.concat([l]):null,Xx(4,4,P2.bind(null,d,l),x)}function qg(){}function F2(l,d){var x=ms();d=d===void 0?null:d;var b=x.memoizedState;return d!==null&&Og(d,b[1])?b[0]:(x.memoizedState=[l,d],l)}function z2(l,d){var x=ms();d=d===void 0?null:d;var b=x.memoizedState;if(d!==null&&Og(d,b[1]))return b[0];if(b=l(),ao){yr(!0);try{l()}finally{yr(!1)}}return x.memoizedState=[b,d],b}function Wg(l,d,x){return x===void 0||(qn&1073741824)!==0&&(mt&261930)===0?l.memoizedState=d:(l.memoizedState=x,l=I_(),rt.lanes|=l,Ji|=l,x)}function I2(l,d,x,b){return Rt(x,d)?x:jc.current!==null?(l=Wg(l,x,b),Rt(l,d)||(_s=!0),l):(qn&42)===0||(qn&1073741824)!==0&&(mt&261930)===0?(_s=!0,l.memoizedState=x):(l=I_(),rt.lanes|=l,Ji|=l,d)}function $2(l,d,x,b,D){var P=se.p;se.p=P!==0&&8>P?P:8;var ae=J.T,ue={};J.T=ue,Kg(l,!1,d,x);try{var pe=D(),je=J.S;if(je!==null&&je(ue,pe),pe!==null&&typeof pe=="object"&&typeof pe.then=="function"){var Ee=J8(pe,b);Iu(l,d,Ee,Gr(l))}else Iu(l,d,b,Gr(l))}catch(Re){Iu(l,d,{then:function(){},status:"rejected",reason:Re},Gr())}finally{se.p=P,ae!==null&&ue.types!==null&&(ae.types=ue.types),J.T=ae}}function nR(){}function Yg(l,d,x,b){if(l.tag!==5)throw Error(a(476));var D=U2(l).queue;$2(l,D,d,Y,x===null?nR:function(){return V2(l),x(b)})}function U2(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wn,lastRenderedState:Y},next:null};var x={};return d.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wn,lastRenderedState:x},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function V2(l){var d=U2(l);d.next===null&&(d=l.alternate.memoizedState),Iu(l,d.next.queue,{},Gr())}function Gg(){return Hs(rh)}function H2(){return ms().memoizedState}function q2(){return ms().memoizedState}function iR(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var x=Gr();l=Yi(x);var b=Gi(d,l,x);b!==null&&(kr(b,d,x),Lu(b,d,x)),d={cache:Ng()},l.payload=d;return}d=d.return}}function lR(l,d,x){var b=Gr();x={lane:b,revertLane:0,gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},Zx(l)?Y2(d,x):(x=hg(l,d,x,b),x!==null&&(kr(x,l,b),G2(x,d,b)))}function W2(l,d,x){var b=Gr();Iu(l,d,x,b)}function Iu(l,d,x,b){var D={lane:b,revertLane:0,gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null};if(Zx(l))Y2(d,D);else{var P=l.alternate;if(l.lanes===0&&(P===null||P.lanes===0)&&(P=d.lastRenderedReducer,P!==null))try{var ae=d.lastRenderedState,ue=P(ae,x);if(D.hasEagerState=!0,D.eagerState=ue,Rt(ue,ae))return Dx(l,d,D,0),It===null&&Gl(),!1}catch{}finally{}if(x=hg(l,d,D,b),x!==null)return kr(x,l,b),G2(x,d,b),!0}return!1}function Kg(l,d,x,b){if(b={lane:2,revertLane:Cb(),gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null},Zx(l)){if(d)throw Error(a(479))}else d=hg(l,x,b,2),d!==null&&kr(d,l,2)}function Zx(l){var d=l.alternate;return l===rt||d!==null&&d===rt}function Y2(l,d){wc=Hx=!0;var x=l.pending;x===null?d.next=d:(d.next=x.next,x.next=d),l.pending=d}function G2(l,d,x){if((x&4194048)!==0){var b=d.lanes;b&=l.pendingLanes,x|=b,d.lanes=x,Vd(l,x)}}var $u={readContext:Hs,use:Yx,useCallback:as,useContext:as,useEffect:as,useImperativeHandle:as,useLayoutEffect:as,useInsertionEffect:as,useMemo:as,useReducer:as,useRef:as,useState:as,useDebugValue:as,useDeferredValue:as,useTransition:as,useSyncExternalStore:as,useId:as,useHostTransitionStatus:as,useFormState:as,useActionState:as,useOptimistic:as,useMemoCache:as,useCacheRefresh:as};$u.useEffectEvent=as;var K2={readContext:Hs,use:Yx,useCallback:function(l,d){return xr().memoizedState=[l,d===void 0?null:d],l},useContext:Hs,useEffect:R2,useImperativeHandle:function(l,d,x){x=x!=null?x.concat([l]):null,Kx(4194308,4,P2.bind(null,d,l),x)},useLayoutEffect:function(l,d){return Kx(4194308,4,l,d)},useInsertionEffect:function(l,d){Kx(4,2,l,d)},useMemo:function(l,d){var x=xr();d=d===void 0?null:d;var b=l();if(ao){yr(!0);try{l()}finally{yr(!1)}}return x.memoizedState=[b,d],b},useReducer:function(l,d,x){var b=xr();if(x!==void 0){var D=x(d);if(ao){yr(!0);try{x(d)}finally{yr(!1)}}}else D=d;return b.memoizedState=b.baseState=D,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:D},b.queue=l,l=l.dispatch=lR.bind(null,rt,l),[b.memoizedState,l]},useRef:function(l){var d=xr();return l={current:l},d.memoizedState=l},useState:function(l){l=Ug(l);var d=l.queue,x=W2.bind(null,rt,d);return d.dispatch=x,[l.memoizedState,x]},useDebugValue:qg,useDeferredValue:function(l,d){var x=xr();return Wg(x,l,d)},useTransition:function(){var l=Ug(!1);return l=$2.bind(null,rt,l.queue,!0,!1),xr().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,x){var b=rt,D=xr();if(gt){if(x===void 0)throw Error(a(407));x=x()}else{if(x=d(),It===null)throw Error(a(349));(mt&127)!==0||p2(b,d,x)}D.memoizedState=x;var P={value:x,getSnapshot:d};return D.queue=P,R2(b2.bind(null,b,P,l),[l]),b.flags|=2048,_c(9,{destroy:void 0},g2.bind(null,b,P,x,d),null),x},useId:function(){var l=xr(),d=It.identifierPrefix;if(gt){var x=Ja,b=Qa;x=(b&~(1<<32-zt(b)-1)).toString(32)+x,d="_"+d+"R_"+x,x=qx++,0<x&&(d+="H"+x.toString(32)),d+="_"}else x=eR++,d="_"+d+"r_"+x.toString(32)+"_";return l.memoizedState=d},useHostTransitionStatus:Gg,useFormState:C2,useActionState:C2,useOptimistic:function(l){var d=xr();d.memoizedState=d.baseState=l;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=x,d=Kg.bind(null,rt,!0,x),x.dispatch=d,[l,d]},useMemoCache:zg,useCacheRefresh:function(){return xr().memoizedState=iR.bind(null,rt)},useEffectEvent:function(l){var d=xr(),x={impl:l};return d.memoizedState=x,function(){if((Nt&2)!==0)throw Error(a(440));return x.impl.apply(void 0,arguments)}}},Xg={readContext:Hs,use:Yx,useCallback:F2,useContext:Hs,useEffect:Hg,useImperativeHandle:B2,useInsertionEffect:O2,useLayoutEffect:L2,useMemo:z2,useReducer:Gx,useRef:D2,useState:function(){return Gx(Wn)},useDebugValue:qg,useDeferredValue:function(l,d){var x=ms();return I2(x,Ot.memoizedState,l,d)},useTransition:function(){var l=Gx(Wn)[0],d=ms().memoizedState;return[typeof l=="boolean"?l:zu(l),d]},useSyncExternalStore:f2,useId:H2,useHostTransitionStatus:Gg,useFormState:T2,useActionState:T2,useOptimistic:function(l,d){var x=ms();return j2(x,Ot,l,d)},useMemoCache:zg,useCacheRefresh:q2};Xg.useEffectEvent=M2;var X2={readContext:Hs,use:Yx,useCallback:F2,useContext:Hs,useEffect:Hg,useImperativeHandle:B2,useInsertionEffect:O2,useLayoutEffect:L2,useMemo:z2,useReducer:$g,useRef:D2,useState:function(){return $g(Wn)},useDebugValue:qg,useDeferredValue:function(l,d){var x=ms();return Ot===null?Wg(x,l,d):I2(x,Ot.memoizedState,l,d)},useTransition:function(){var l=$g(Wn)[0],d=ms().memoizedState;return[typeof l=="boolean"?l:zu(l),d]},useSyncExternalStore:f2,useId:H2,useHostTransitionStatus:Gg,useFormState:A2,useActionState:A2,useOptimistic:function(l,d){var x=ms();return Ot!==null?j2(x,Ot,l,d):(x.baseState=l,[l,x.queue.dispatch])},useMemoCache:zg,useCacheRefresh:q2};X2.useEffectEvent=M2;function Zg(l,d,x,b){d=l.memoizedState,x=x(b,d),x=x==null?d:f({},d,x),l.memoizedState=x,l.lanes===0&&(l.updateQueue.baseState=x)}var Qg={enqueueSetState:function(l,d,x){l=l._reactInternals;var b=Gr(),D=Yi(b);D.payload=d,x!=null&&(D.callback=x),d=Gi(l,D,b),d!==null&&(kr(d,l,b),Lu(d,l,b))},enqueueReplaceState:function(l,d,x){l=l._reactInternals;var b=Gr(),D=Yi(b);D.tag=1,D.payload=d,x!=null&&(D.callback=x),d=Gi(l,D,b),d!==null&&(kr(d,l,b),Lu(d,l,b))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var x=Gr(),b=Yi(x);b.tag=2,d!=null&&(b.callback=d),d=Gi(l,b,x),d!==null&&(kr(d,l,x),Lu(d,l,x))}};function Z2(l,d,x,b,D,P,ae){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(b,P,ae):d.prototype&&d.prototype.isPureReactComponent?!Yl(x,b)||!Yl(D,P):!0}function Q2(l,d,x,b){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(x,b),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(x,b),d.state!==l&&Qg.enqueueReplaceState(d,d.state,null)}function no(l,d){var x=d;if("ref"in d){x={};for(var b in d)b!=="ref"&&(x[b]=d[b])}if(l=l.defaultProps){x===d&&(x=f({},x));for(var D in l)x[D]===void 0&&(x[D]=l[D])}return x}function J2(l){Ye(l)}function e_(l){console.error(l)}function t_(l){Ye(l)}function Qx(l,d){try{var x=l.onUncaughtError;x(d.value,{componentStack:d.stack})}catch(b){setTimeout(function(){throw b})}}function s_(l,d,x){try{var b=l.onCaughtError;b(x.value,{componentStack:x.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(D){setTimeout(function(){throw D})}}function Jg(l,d,x){return x=Yi(x),x.tag=3,x.payload={element:null},x.callback=function(){Qx(l,d)},x}function r_(l){return l=Yi(l),l.tag=3,l}function a_(l,d,x,b){var D=x.type.getDerivedStateFromError;if(typeof D=="function"){var P=b.value;l.payload=function(){return D(P)},l.callback=function(){s_(d,x,b)}}var ae=x.stateNode;ae!==null&&typeof ae.componentDidCatch=="function"&&(l.callback=function(){s_(d,x,b),typeof D!="function"&&(el===null?el=new Set([this]):el.add(this));var ue=b.stack;this.componentDidCatch(b.value,{componentStack:ue!==null?ue:""})})}function oR(l,d,x,b,D){if(x.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(d=x.alternate,d!==null&&pc(d,x,D,!0),x=Hr.current,x!==null){switch(x.tag){case 31:case 13:return oa===null?d0():x.alternate===null&&ns===0&&(ns=3),x.flags&=-257,x.flags|=65536,x.lanes=D,b===zx?x.flags|=16384:(d=x.updateQueue,d===null?x.updateQueue=new Set([b]):d.add(b),_b(l,b,D)),!1;case 22:return x.flags|=65536,b===zx?x.flags|=16384:(d=x.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([b])},x.updateQueue=d):(x=d.retryQueue,x===null?d.retryQueue=new Set([b]):x.add(b)),_b(l,b,D)),!1}throw Error(a(435,x.tag))}return _b(l,b,D),d0(),!1}if(gt)return d=Hr.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=D,b!==bg&&(l=Error(a(422),{cause:b}),Au(aa(l,x)))):(b!==bg&&(d=Error(a(423),{cause:b}),Au(aa(d,x))),l=l.current.alternate,l.flags|=65536,D&=-D,l.lanes|=D,b=aa(b,x),D=Jg(l.stateNode,b,D),Eg(l,D),ns!==4&&(ns=2)),!1;var P=Error(a(520),{cause:b});if(P=aa(P,x),Ku===null?Ku=[P]:Ku.push(P),ns!==4&&(ns=2),d===null)return!0;b=aa(b,x),x=d;do{switch(x.tag){case 3:return x.flags|=65536,l=D&-D,x.lanes|=l,l=Jg(x.stateNode,b,l),Eg(x,l),!1;case 1:if(d=x.type,P=x.stateNode,(x.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(el===null||!el.has(P))))return x.flags|=65536,D&=-D,x.lanes|=D,D=r_(D),a_(D,l,x,b),Eg(x,D),!1}x=x.return}while(x!==null);return!1}var eb=Error(a(461)),_s=!1;function qs(l,d,x,b){d.child=l===null?o2(d,null,x,b):ro(d,l.child,x,b)}function n_(l,d,x,b,D){x=x.render;var P=d.ref;if("ref"in b){var ae={};for(var ue in b)ue!=="ref"&&(ae[ue]=b[ue])}else ae=b;return Jl(d),b=Lg(l,d,x,ae,P,D),ue=Pg(),l!==null&&!_s?(Bg(l,d,D),Yn(l,d,D)):(gt&&ue&&pg(d),d.flags|=1,qs(l,d,b,D),d.child)}function i_(l,d,x,b,D){if(l===null){var P=x.type;return typeof P=="function"&&!mg(P)&&P.defaultProps===void 0&&x.compare===null?(d.tag=15,d.type=P,l_(l,d,P,b,D)):(l=Mx(x.type,null,b,d,d.mode,D),l.ref=d.ref,l.return=d,d.child=l)}if(P=l.child,!ob(l,D)){var ae=P.memoizedProps;if(x=x.compare,x=x!==null?x:Yl,x(ae,b)&&l.ref===d.ref)return Yn(l,d,D)}return d.flags|=1,l=$n(P,b),l.ref=d.ref,l.return=d,d.child=l}function l_(l,d,x,b,D){if(l!==null){var P=l.memoizedProps;if(Yl(P,b)&&l.ref===d.ref)if(_s=!1,d.pendingProps=b=P,ob(l,D))(l.flags&131072)!==0&&(_s=!0);else return d.lanes=l.lanes,Yn(l,d,D)}return tb(l,d,x,b,D)}function o_(l,d,x,b){var D=b.children,P=l!==null?l.memoizedState:null;if(l===null&&d.stateNode===null&&(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),b.mode==="hidden"){if((d.flags&128)!==0){if(P=P!==null?P.baseLanes|x:x,l!==null){for(b=d.child=l.child,D=0;b!==null;)D=D|b.lanes|b.childLanes,b=b.sibling;b=D&~P}else b=0,d.child=null;return c_(l,d,P,x,b)}if((x&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&Bx(d,P!==null?P.cachePool:null),P!==null?u2(d,P):Dg(),h2(d);else return b=d.lanes=536870912,c_(l,d,P!==null?P.baseLanes|x:x,x,b)}else P!==null?(Bx(d,P.cachePool),u2(d,P),Xi(),d.memoizedState=null):(l!==null&&Bx(d,null),Dg(),Xi());return qs(l,d,D,x),d.child}function Uu(l,d){return l!==null&&l.tag===22||d.stateNode!==null||(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.sibling}function c_(l,d,x,b,D){var P=kg();return P=P===null?null:{parent:ws._currentValue,pool:P},d.memoizedState={baseLanes:x,cachePool:P},l!==null&&Bx(d,null),Dg(),h2(d),l!==null&&pc(l,d,b,!0),d.childLanes=D,null}function Jx(l,d){return d=t0({mode:d.mode,children:d.children},l.mode),d.ref=l.ref,l.child=d,d.return=l,d}function d_(l,d,x){return ro(d,l.child,null,x),l=Jx(d,d.pendingProps),l.flags|=2,qr(d),d.memoizedState=null,l}function cR(l,d,x){var b=d.pendingProps,D=(d.flags&128)!==0;if(d.flags&=-129,l===null){if(gt){if(b.mode==="hidden")return l=Jx(d,b),d.lanes=536870912,Uu(null,l);if(Mg(d),(l=Ht)?(l=w5(l,la),l=l!==null&&l.data==="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:Ui!==null?{id:Qa,overflow:Ja}:null,retryLane:536870912,hydrationErrors:null},x=Y1(l),x.return=d,d.child=x,Vs=d,Ht=null)):l=null,l===null)throw Hi(d);return d.lanes=536870912,null}return Jx(d,b)}var P=l.memoizedState;if(P!==null){var ae=P.dehydrated;if(Mg(d),D)if(d.flags&256)d.flags&=-257,d=d_(l,d,x);else if(d.memoizedState!==null)d.child=l.child,d.flags|=128,d=null;else throw Error(a(558));else if(_s||pc(l,d,x,!1),D=(x&l.childLanes)!==0,_s||D){if(b=It,b!==null&&(ae=Wm(b,x),ae!==0&&ae!==P.retryLane))throw P.retryLane=ae,Kl(l,ae),kr(b,l,ae),eb;d0(),d=d_(l,d,x)}else l=P.treeContext,Ht=ca(ae.nextSibling),Vs=d,gt=!0,Vi=null,la=!1,l!==null&&X1(d,l),d=Jx(d,b),d.flags|=4096;return d}return l=$n(l.child,{mode:b.mode,children:b.children}),l.ref=d.ref,d.child=l,l.return=d,l}function e0(l,d){var x=d.ref;if(x===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof x!="function"&&typeof x!="object")throw Error(a(284));(l===null||l.ref!==x)&&(d.flags|=4194816)}}function tb(l,d,x,b,D){return Jl(d),x=Lg(l,d,x,b,void 0,D),b=Pg(),l!==null&&!_s?(Bg(l,d,D),Yn(l,d,D)):(gt&&b&&pg(d),d.flags|=1,qs(l,d,x,D),d.child)}function u_(l,d,x,b,D,P){return Jl(d),d.updateQueue=null,x=x2(d,b,x,D),m2(l),b=Pg(),l!==null&&!_s?(Bg(l,d,P),Yn(l,d,P)):(gt&&b&&pg(d),d.flags|=1,qs(l,d,x,P),d.child)}function h_(l,d,x,b,D){if(Jl(d),d.stateNode===null){var P=hc,ae=x.contextType;typeof ae=="object"&&ae!==null&&(P=Hs(ae)),P=new x(b,P),d.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,P.updater=Qg,d.stateNode=P,P._reactInternals=d,P=d.stateNode,P.props=b,P.state=d.memoizedState,P.refs={},Cg(d),ae=x.contextType,P.context=typeof ae=="object"&&ae!==null?Hs(ae):hc,P.state=d.memoizedState,ae=x.getDerivedStateFromProps,typeof ae=="function"&&(Zg(d,x,ae,b),P.state=d.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(ae=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),ae!==P.state&&Qg.enqueueReplaceState(P,P.state,null),Bu(d,b,P,D),Pu(),P.state=d.memoizedState),typeof P.componentDidMount=="function"&&(d.flags|=4194308),b=!0}else if(l===null){P=d.stateNode;var ue=d.memoizedProps,pe=no(x,ue);P.props=pe;var je=P.context,Ee=x.contextType;ae=hc,typeof Ee=="object"&&Ee!==null&&(ae=Hs(Ee));var Re=x.getDerivedStateFromProps;Ee=typeof Re=="function"||typeof P.getSnapshotBeforeUpdate=="function",ue=d.pendingProps!==ue,Ee||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(ue||je!==ae)&&Q2(d,P,b,ae),Wi=!1;var Ne=d.memoizedState;P.state=Ne,Bu(d,b,P,D),Pu(),je=d.memoizedState,ue||Ne!==je||Wi?(typeof Re=="function"&&(Zg(d,x,Re,b),je=d.memoizedState),(pe=Wi||Z2(d,x,pe,b,Ne,je,ae))?(Ee||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(d.flags|=4194308)):(typeof P.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=b,d.memoizedState=je),P.props=b,P.state=je,P.context=ae,b=pe):(typeof P.componentDidMount=="function"&&(d.flags|=4194308),b=!1)}else{P=d.stateNode,Tg(l,d),ae=d.memoizedProps,Ee=no(x,ae),P.props=Ee,Re=d.pendingProps,Ne=P.context,je=x.contextType,pe=hc,typeof je=="object"&&je!==null&&(pe=Hs(je)),ue=x.getDerivedStateFromProps,(je=typeof ue=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(ae!==Re||Ne!==pe)&&Q2(d,P,b,pe),Wi=!1,Ne=d.memoizedState,P.state=Ne,Bu(d,b,P,D),Pu();var Se=d.memoizedState;ae!==Re||Ne!==Se||Wi||l!==null&&l.dependencies!==null&&Lx(l.dependencies)?(typeof ue=="function"&&(Zg(d,x,ue,b),Se=d.memoizedState),(Ee=Wi||Z2(d,x,Ee,b,Ne,Se,pe)||l!==null&&l.dependencies!==null&&Lx(l.dependencies))?(je||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(b,Se,pe),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(b,Se,pe)),typeof P.componentDidUpdate=="function"&&(d.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof P.componentDidUpdate!="function"||ae===l.memoizedProps&&Ne===l.memoizedState||(d.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||ae===l.memoizedProps&&Ne===l.memoizedState||(d.flags|=1024),d.memoizedProps=b,d.memoizedState=Se),P.props=b,P.state=Se,P.context=pe,b=Ee):(typeof P.componentDidUpdate!="function"||ae===l.memoizedProps&&Ne===l.memoizedState||(d.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||ae===l.memoizedProps&&Ne===l.memoizedState||(d.flags|=1024),b=!1)}return P=b,e0(l,d),b=(d.flags&128)!==0,P||b?(P=d.stateNode,x=b&&typeof x.getDerivedStateFromError!="function"?null:P.render(),d.flags|=1,l!==null&&b?(d.child=ro(d,l.child,null,D),d.child=ro(d,null,x,D)):qs(l,d,x,D),d.memoizedState=P.state,l=d.child):l=Yn(l,d,D),l}function m_(l,d,x,b){return Zl(),d.flags|=256,qs(l,d,x,b),d.child}var sb={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function rb(l){return{baseLanes:l,cachePool:s2()}}function ab(l,d,x){return l=l!==null?l.childLanes&~x:0,d&&(l|=Yr),l}function x_(l,d,x){var b=d.pendingProps,D=!1,P=(d.flags&128)!==0,ae;if((ae=P)||(ae=l!==null&&l.memoizedState===null?!1:(hs.current&2)!==0),ae&&(D=!0,d.flags&=-129),ae=(d.flags&32)!==0,d.flags&=-33,l===null){if(gt){if(D?Ki(d):Xi(),(l=Ht)?(l=w5(l,la),l=l!==null&&l.data!=="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:Ui!==null?{id:Qa,overflow:Ja}:null,retryLane:536870912,hydrationErrors:null},x=Y1(l),x.return=d,d.child=x,Vs=d,Ht=null)):l=null,l===null)throw Hi(d);return Ib(l)?d.lanes=32:d.lanes=536870912,null}var ue=b.children;return b=b.fallback,D?(Xi(),D=d.mode,ue=t0({mode:"hidden",children:ue},D),b=Xl(b,D,x,null),ue.return=d,b.return=d,ue.sibling=b,d.child=ue,b=d.child,b.memoizedState=rb(x),b.childLanes=ab(l,ae,x),d.memoizedState=sb,Uu(null,b)):(Ki(d),nb(d,ue))}var pe=l.memoizedState;if(pe!==null&&(ue=pe.dehydrated,ue!==null)){if(P)d.flags&256?(Ki(d),d.flags&=-257,d=ib(l,d,x)):d.memoizedState!==null?(Xi(),d.child=l.child,d.flags|=128,d=null):(Xi(),ue=b.fallback,D=d.mode,b=t0({mode:"visible",children:b.children},D),ue=Xl(ue,D,x,null),ue.flags|=2,b.return=d,ue.return=d,b.sibling=ue,d.child=b,ro(d,l.child,null,x),b=d.child,b.memoizedState=rb(x),b.childLanes=ab(l,ae,x),d.memoizedState=sb,d=Uu(null,b));else if(Ki(d),Ib(ue)){if(ae=ue.nextSibling&&ue.nextSibling.dataset,ae)var je=ae.dgst;ae=je,b=Error(a(419)),b.stack="",b.digest=ae,Au({value:b,source:null,stack:null}),d=ib(l,d,x)}else if(_s||pc(l,d,x,!1),ae=(x&l.childLanes)!==0,_s||ae){if(ae=It,ae!==null&&(b=Wm(ae,x),b!==0&&b!==pe.retryLane))throw pe.retryLane=b,Kl(l,b),kr(ae,l,b),eb;zb(ue)||d0(),d=ib(l,d,x)}else zb(ue)?(d.flags|=192,d.child=l.child,d=null):(l=pe.treeContext,Ht=ca(ue.nextSibling),Vs=d,gt=!0,Vi=null,la=!1,l!==null&&X1(d,l),d=nb(d,b.children),d.flags|=4096);return d}return D?(Xi(),ue=b.fallback,D=d.mode,pe=l.child,je=pe.sibling,b=$n(pe,{mode:"hidden",children:b.children}),b.subtreeFlags=pe.subtreeFlags&65011712,je!==null?ue=$n(je,ue):(ue=Xl(ue,D,x,null),ue.flags|=2),ue.return=d,b.return=d,b.sibling=ue,d.child=b,Uu(null,b),b=d.child,ue=l.child.memoizedState,ue===null?ue=rb(x):(D=ue.cachePool,D!==null?(pe=ws._currentValue,D=D.parent!==pe?{parent:pe,pool:pe}:D):D=s2(),ue={baseLanes:ue.baseLanes|x,cachePool:D}),b.memoizedState=ue,b.childLanes=ab(l,ae,x),d.memoizedState=sb,Uu(l.child,b)):(Ki(d),x=l.child,l=x.sibling,x=$n(x,{mode:"visible",children:b.children}),x.return=d,x.sibling=null,l!==null&&(ae=d.deletions,ae===null?(d.deletions=[l],d.flags|=16):ae.push(l)),d.child=x,d.memoizedState=null,x)}function nb(l,d){return d=t0({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function t0(l,d){return l=Vr(22,l,null,d),l.lanes=0,l}function ib(l,d,x){return ro(d,l.child,null,x),l=nb(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function f_(l,d,x){l.lanes|=d;var b=l.alternate;b!==null&&(b.lanes|=d),jg(l.return,d,x)}function lb(l,d,x,b,D,P){var ae=l.memoizedState;ae===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:b,tail:x,tailMode:D,treeForkCount:P}:(ae.isBackwards=d,ae.rendering=null,ae.renderingStartTime=0,ae.last=b,ae.tail=x,ae.tailMode=D,ae.treeForkCount=P)}function p_(l,d,x){var b=d.pendingProps,D=b.revealOrder,P=b.tail;b=b.children;var ae=hs.current,ue=(ae&2)!==0;if(ue?(ae=ae&1|2,d.flags|=128):ae&=1,le(hs,ae),qs(l,d,b,x),b=gt?Eu:0,!ue&&l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&f_(l,x,d);else if(l.tag===19)f_(l,x,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(D){case"forwards":for(x=d.child,D=null;x!==null;)l=x.alternate,l!==null&&Vx(l)===null&&(D=x),x=x.sibling;x=D,x===null?(D=d.child,d.child=null):(D=x.sibling,x.sibling=null),lb(d,!1,D,x,P,b);break;case"backwards":case"unstable_legacy-backwards":for(x=null,D=d.child,d.child=null;D!==null;){if(l=D.alternate,l!==null&&Vx(l)===null){d.child=D;break}l=D.sibling,D.sibling=x,x=D,D=l}lb(d,!0,x,null,P,b);break;case"together":lb(d,!1,null,null,void 0,b);break;default:d.memoizedState=null}return d.child}function Yn(l,d,x){if(l!==null&&(d.dependencies=l.dependencies),Ji|=d.lanes,(x&d.childLanes)===0)if(l!==null){if(pc(l,d,x,!1),(x&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(a(153));if(d.child!==null){for(l=d.child,x=$n(l,l.pendingProps),d.child=x,x.return=d;l.sibling!==null;)l=l.sibling,x=x.sibling=$n(l,l.pendingProps),x.return=d;x.sibling=null}return d.child}function ob(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&Lx(l)))}function dR(l,d,x){switch(d.tag){case 3:F(d,d.stateNode.containerInfo),qi(d,ws,l.memoizedState.cache),Zl();break;case 27:case 5:W(d);break;case 4:F(d,d.stateNode.containerInfo);break;case 10:qi(d,d.type,d.memoizedProps.value);break;case 31:if(d.memoizedState!==null)return d.flags|=128,Mg(d),null;break;case 13:var b=d.memoizedState;if(b!==null)return b.dehydrated!==null?(Ki(d),d.flags|=128,null):(x&d.child.childLanes)!==0?x_(l,d,x):(Ki(d),l=Yn(l,d,x),l!==null?l.sibling:null);Ki(d);break;case 19:var D=(l.flags&128)!==0;if(b=(x&d.childLanes)!==0,b||(pc(l,d,x,!1),b=(x&d.childLanes)!==0),D){if(b)return p_(l,d,x);d.flags|=128}if(D=d.memoizedState,D!==null&&(D.rendering=null,D.tail=null,D.lastEffect=null),le(hs,hs.current),b)break;return null;case 22:return d.lanes=0,o_(l,d,x,d.pendingProps);case 24:qi(d,ws,l.memoizedState.cache)}return Yn(l,d,x)}function g_(l,d,x){if(l!==null)if(l.memoizedProps!==d.pendingProps)_s=!0;else{if(!ob(l,x)&&(d.flags&128)===0)return _s=!1,dR(l,d,x);_s=(l.flags&131072)!==0}else _s=!1,gt&&(d.flags&1048576)!==0&&K1(d,Eu,d.index);switch(d.lanes=0,d.tag){case 16:e:{var b=d.pendingProps;if(l=to(d.elementType),d.type=l,typeof l=="function")mg(l)?(b=no(l,b),d.tag=1,d=h_(null,d,l,b,x)):(d.tag=0,d=tb(null,d,l,b,x));else{if(l!=null){var D=l.$$typeof;if(D===_){d.tag=11,d=n_(null,d,l,b,x);break e}else if(D===z){d.tag=14,d=i_(null,d,l,b,x);break e}}throw d=R(l)||l,Error(a(306,d,""))}}return d;case 0:return tb(l,d,d.type,d.pendingProps,x);case 1:return b=d.type,D=no(b,d.pendingProps),h_(l,d,b,D,x);case 3:e:{if(F(d,d.stateNode.containerInfo),l===null)throw Error(a(387));b=d.pendingProps;var P=d.memoizedState;D=P.element,Tg(l,d),Bu(d,b,null,x);var ae=d.memoizedState;if(b=ae.cache,qi(d,ws,b),b!==P.cache&&wg(d,[ws],x,!0),Pu(),b=ae.element,P.isDehydrated)if(P={element:b,isDehydrated:!1,cache:ae.cache},d.updateQueue.baseState=P,d.memoizedState=P,d.flags&256){d=m_(l,d,b,x);break e}else if(b!==D){D=aa(Error(a(424)),d),Au(D),d=m_(l,d,b,x);break e}else{switch(l=d.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Ht=ca(l.firstChild),Vs=d,gt=!0,Vi=null,la=!0,x=o2(d,null,b,x),d.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling}else{if(Zl(),b===D){d=Yn(l,d,x);break e}qs(l,d,b,x)}d=d.child}return d;case 26:return e0(l,d),l===null?(x=T5(d.type,null,d.pendingProps,null))?d.memoizedState=x:gt||(x=d.type,l=d.pendingProps,b=g0(de.current).createElement(x),b[Rs]=d,b[$s]=l,Ws(b,x,l),us(b),d.stateNode=b):d.memoizedState=T5(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return W(d),l===null&&gt&&(b=d.stateNode=k5(d.type,d.pendingProps,de.current),Vs=d,la=!0,D=Ht,al(d.type)?($b=D,Ht=ca(b.firstChild)):Ht=D),qs(l,d,d.pendingProps.children,x),e0(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&gt&&((D=b=Ht)&&(b=IR(b,d.type,d.pendingProps,la),b!==null?(d.stateNode=b,Vs=d,Ht=ca(b.firstChild),la=!1,D=!0):D=!1),D||Hi(d)),W(d),D=d.type,P=d.pendingProps,ae=l!==null?l.memoizedProps:null,b=P.children,Pb(D,P)?b=null:ae!==null&&Pb(D,ae)&&(d.flags|=32),d.memoizedState!==null&&(D=Lg(l,d,tR,null,null,x),rh._currentValue=D),e0(l,d),qs(l,d,b,x),d.child;case 6:return l===null&&gt&&((l=x=Ht)&&(x=$R(x,d.pendingProps,la),x!==null?(d.stateNode=x,Vs=d,Ht=null,l=!0):l=!1),l||Hi(d)),null;case 13:return x_(l,d,x);case 4:return F(d,d.stateNode.containerInfo),b=d.pendingProps,l===null?d.child=ro(d,null,b,x):qs(l,d,b,x),d.child;case 11:return n_(l,d,d.type,d.pendingProps,x);case 7:return qs(l,d,d.pendingProps,x),d.child;case 8:return qs(l,d,d.pendingProps.children,x),d.child;case 12:return qs(l,d,d.pendingProps.children,x),d.child;case 10:return b=d.pendingProps,qi(d,d.type,b.value),qs(l,d,b.children,x),d.child;case 9:return D=d.type._context,b=d.pendingProps.children,Jl(d),D=Hs(D),b=b(D),d.flags|=1,qs(l,d,b,x),d.child;case 14:return i_(l,d,d.type,d.pendingProps,x);case 15:return l_(l,d,d.type,d.pendingProps,x);case 19:return p_(l,d,x);case 31:return cR(l,d,x);case 22:return o_(l,d,x,d.pendingProps);case 24:return Jl(d),b=Hs(ws),l===null?(D=kg(),D===null&&(D=It,P=Ng(),D.pooledCache=P,P.refCount++,P!==null&&(D.pooledCacheLanes|=x),D=P),d.memoizedState={parent:b,cache:D},Cg(d),qi(d,ws,D)):((l.lanes&x)!==0&&(Tg(l,d),Bu(d,null,null,x),Pu()),D=l.memoizedState,P=d.memoizedState,D.parent!==b?(D={parent:b,cache:b},d.memoizedState=D,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=D),qi(d,ws,b)):(b=P.cache,qi(d,ws,b),b!==D.cache&&wg(d,[ws],x,!0))),qs(l,d,d.pendingProps.children,x),d.child;case 29:throw d.pendingProps}throw Error(a(156,d.tag))}function Gn(l){l.flags|=4}function cb(l,d,x,b,D){if((d=(l.mode&32)!==0)&&(d=!1),d){if(l.flags|=16777216,(D&335544128)===D)if(l.stateNode.complete)l.flags|=8192;else if(H_())l.flags|=8192;else throw so=zx,Sg}else l.flags&=-16777217}function b_(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!M5(d))if(H_())l.flags|=8192;else throw so=zx,Sg}function s0(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?Hm():536870912,l.lanes|=d,Tc|=d)}function Vu(l,d){if(!gt)switch(l.tailMode){case"hidden":d=l.tail;for(var x=null;d!==null;)d.alternate!==null&&(x=d),d=d.sibling;x===null?l.tail=null:x.sibling=null;break;case"collapsed":x=l.tail;for(var b=null;x!==null;)x.alternate!==null&&(b=x),x=x.sibling;b===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:b.sibling=null}}function qt(l){var d=l.alternate!==null&&l.alternate.child===l.child,x=0,b=0;if(d)for(var D=l.child;D!==null;)x|=D.lanes|D.childLanes,b|=D.subtreeFlags&65011712,b|=D.flags&65011712,D.return=l,D=D.sibling;else for(D=l.child;D!==null;)x|=D.lanes|D.childLanes,b|=D.subtreeFlags,b|=D.flags,D.return=l,D=D.sibling;return l.subtreeFlags|=b,l.childLanes=x,d}function uR(l,d,x){var b=d.pendingProps;switch(gg(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(d),null;case 1:return qt(d),null;case 3:return x=d.stateNode,b=null,l!==null&&(b=l.memoizedState.cache),d.memoizedState.cache!==b&&(d.flags|=2048),Hn(ws),Q(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(l===null||l.child===null)&&(fc(d)?Gn(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,yg())),qt(d),null;case 26:var D=d.type,P=d.memoizedState;return l===null?(Gn(d),P!==null?(qt(d),b_(d,P)):(qt(d),cb(d,D,null,b,x))):P?P!==l.memoizedState?(Gn(d),qt(d),b_(d,P)):(qt(d),d.flags&=-16777217):(l=l.memoizedProps,l!==b&&Gn(d),qt(d),cb(d,D,l,b,x)),null;case 27:if(H(d),x=de.current,D=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==b&&Gn(d);else{if(!b){if(d.stateNode===null)throw Error(a(166));return qt(d),null}l=ie.current,fc(d)?Z1(d):(l=k5(D,b,x),d.stateNode=l,Gn(d))}return qt(d),null;case 5:if(H(d),D=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==b&&Gn(d);else{if(!b){if(d.stateNode===null)throw Error(a(166));return qt(d),null}if(P=ie.current,fc(d))Z1(d);else{var ae=g0(de.current);switch(P){case 1:P=ae.createElementNS("http://www.w3.org/2000/svg",D);break;case 2:P=ae.createElementNS("http://www.w3.org/1998/Math/MathML",D);break;default:switch(D){case"svg":P=ae.createElementNS("http://www.w3.org/2000/svg",D);break;case"math":P=ae.createElementNS("http://www.w3.org/1998/Math/MathML",D);break;case"script":P=ae.createElement("div"),P.innerHTML="<script><\/script>",P=P.removeChild(P.firstChild);break;case"select":P=typeof b.is=="string"?ae.createElement("select",{is:b.is}):ae.createElement("select"),b.multiple?P.multiple=!0:b.size&&(P.size=b.size);break;default:P=typeof b.is=="string"?ae.createElement(D,{is:b.is}):ae.createElement(D)}}P[Rs]=d,P[$s]=b;e:for(ae=d.child;ae!==null;){if(ae.tag===5||ae.tag===6)P.appendChild(ae.stateNode);else if(ae.tag!==4&&ae.tag!==27&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===d)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===d)break e;ae=ae.return}ae.sibling.return=ae.return,ae=ae.sibling}d.stateNode=P;e:switch(Ws(P,D,b),D){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}b&&Gn(d)}}return qt(d),cb(d,d.type,l===null?null:l.memoizedProps,d.pendingProps,x),null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==b&&Gn(d);else{if(typeof b!="string"&&d.stateNode===null)throw Error(a(166));if(l=de.current,fc(d)){if(l=d.stateNode,x=d.memoizedProps,b=null,D=Vs,D!==null)switch(D.tag){case 27:case 5:b=D.memoizedProps}l[Rs]=d,l=!!(l.nodeValue===x||b!==null&&b.suppressHydrationWarning===!0||x5(l.nodeValue,x)),l||Hi(d,!0)}else l=g0(l).createTextNode(b),l[Rs]=d,d.stateNode=l}return qt(d),null;case 31:if(x=d.memoizedState,l===null||l.memoizedState!==null){if(b=fc(d),x!==null){if(l===null){if(!b)throw Error(a(318));if(l=d.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(a(557));l[Rs]=d}else Zl(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;qt(d),l=!1}else x=yg(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=x),l=!0;if(!l)return d.flags&256?(qr(d),d):(qr(d),null);if((d.flags&128)!==0)throw Error(a(558))}return qt(d),null;case 13:if(b=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(D=fc(d),b!==null&&b.dehydrated!==null){if(l===null){if(!D)throw Error(a(318));if(D=d.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(a(317));D[Rs]=d}else Zl(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;qt(d),D=!1}else D=yg(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=D),D=!0;if(!D)return d.flags&256?(qr(d),d):(qr(d),null)}return qr(d),(d.flags&128)!==0?(d.lanes=x,d):(x=b!==null,l=l!==null&&l.memoizedState!==null,x&&(b=d.child,D=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(D=b.alternate.memoizedState.cachePool.pool),P=null,b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(P=b.memoizedState.cachePool.pool),P!==D&&(b.flags|=2048)),x!==l&&x&&(d.child.flags|=8192),s0(d,d.updateQueue),qt(d),null);case 4:return Q(),l===null&&Db(d.stateNode.containerInfo),qt(d),null;case 10:return Hn(d.type),qt(d),null;case 19:if($(hs),b=d.memoizedState,b===null)return qt(d),null;if(D=(d.flags&128)!==0,P=b.rendering,P===null)if(D)Vu(b,!1);else{if(ns!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(P=Vx(l),P!==null){for(d.flags|=128,Vu(b,!1),l=P.updateQueue,d.updateQueue=l,s0(d,l),d.subtreeFlags=0,l=x,x=d.child;x!==null;)W1(x,l),x=x.sibling;return le(hs,hs.current&1|2),gt&&Un(d,b.treeForkCount),d.child}l=l.sibling}b.tail!==null&&Ce()>l0&&(d.flags|=128,D=!0,Vu(b,!1),d.lanes=4194304)}else{if(!D)if(l=Vx(P),l!==null){if(d.flags|=128,D=!0,l=l.updateQueue,d.updateQueue=l,s0(d,l),Vu(b,!0),b.tail===null&&b.tailMode==="hidden"&&!P.alternate&&!gt)return qt(d),null}else 2*Ce()-b.renderingStartTime>l0&&x!==536870912&&(d.flags|=128,D=!0,Vu(b,!1),d.lanes=4194304);b.isBackwards?(P.sibling=d.child,d.child=P):(l=b.last,l!==null?l.sibling=P:d.child=P,b.last=P)}return b.tail!==null?(l=b.tail,b.rendering=l,b.tail=l.sibling,b.renderingStartTime=Ce(),l.sibling=null,x=hs.current,le(hs,D?x&1|2:x&1),gt&&Un(d,b.treeForkCount),l):(qt(d),null);case 22:case 23:return qr(d),Rg(),b=d.memoizedState!==null,l!==null?l.memoizedState!==null!==b&&(d.flags|=8192):b&&(d.flags|=8192),b?(x&536870912)!==0&&(d.flags&128)===0&&(qt(d),d.subtreeFlags&6&&(d.flags|=8192)):qt(d),x=d.updateQueue,x!==null&&s0(d,x.retryQueue),x=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(x=l.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==x&&(d.flags|=2048),l!==null&&$(eo),null;case 24:return x=null,l!==null&&(x=l.memoizedState.cache),d.memoizedState.cache!==x&&(d.flags|=2048),Hn(ws),qt(d),null;case 25:return null;case 30:return null}throw Error(a(156,d.tag))}function hR(l,d){switch(gg(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return Hn(ws),Q(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return H(d),null;case 31:if(d.memoizedState!==null){if(qr(d),d.alternate===null)throw Error(a(340));Zl()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 13:if(qr(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(a(340));Zl()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return $(hs),null;case 4:return Q(),null;case 10:return Hn(d.type),null;case 22:case 23:return qr(d),Rg(),l!==null&&$(eo),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return Hn(ws),null;case 25:return null;default:return null}}function y_(l,d){switch(gg(d),d.tag){case 3:Hn(ws),Q();break;case 26:case 27:case 5:H(d);break;case 4:Q();break;case 31:d.memoizedState!==null&&qr(d);break;case 13:qr(d);break;case 19:$(hs);break;case 10:Hn(d.type);break;case 22:case 23:qr(d),Rg(),l!==null&&$(eo);break;case 24:Hn(ws)}}function Hu(l,d){try{var x=d.updateQueue,b=x!==null?x.lastEffect:null;if(b!==null){var D=b.next;x=D;do{if((x.tag&l)===l){b=void 0;var P=x.create,ae=x.inst;b=P(),ae.destroy=b}x=x.next}while(x!==D)}}catch(ue){Tt(d,d.return,ue)}}function Zi(l,d,x){try{var b=d.updateQueue,D=b!==null?b.lastEffect:null;if(D!==null){var P=D.next;b=P;do{if((b.tag&l)===l){var ae=b.inst,ue=ae.destroy;if(ue!==void 0){ae.destroy=void 0,D=d;var pe=x,je=ue;try{je()}catch(Ee){Tt(D,pe,Ee)}}}b=b.next}while(b!==P)}}catch(Ee){Tt(d,d.return,Ee)}}function v_(l){var d=l.updateQueue;if(d!==null){var x=l.stateNode;try{d2(d,x)}catch(b){Tt(l,l.return,b)}}}function j_(l,d,x){x.props=no(l.type,l.memoizedProps),x.state=l.memoizedState;try{x.componentWillUnmount()}catch(b){Tt(l,d,b)}}function qu(l,d){try{var x=l.ref;if(x!==null){switch(l.tag){case 26:case 27:case 5:var b=l.stateNode;break;case 30:b=l.stateNode;break;default:b=l.stateNode}typeof x=="function"?l.refCleanup=x(b):x.current=b}}catch(D){Tt(l,d,D)}}function en(l,d){var x=l.ref,b=l.refCleanup;if(x!==null)if(typeof b=="function")try{b()}catch(D){Tt(l,d,D)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(D){Tt(l,d,D)}else x.current=null}function w_(l){var d=l.type,x=l.memoizedProps,b=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":x.autoFocus&&b.focus();break e;case"img":x.src?b.src=x.src:x.srcSet&&(b.srcset=x.srcSet)}}catch(D){Tt(l,l.return,D)}}function db(l,d,x){try{var b=l.stateNode;OR(b,l.type,x,d),b[$s]=d}catch(D){Tt(l,l.return,D)}}function N_(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&al(l.type)||l.tag===4}function ub(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||N_(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&al(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function hb(l,d,x){var b=l.tag;if(b===5||b===6)l=l.stateNode,d?(x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x).insertBefore(l,d):(d=x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x,d.appendChild(l),x=x._reactRootContainer,x!=null||d.onclick!==null||(d.onclick=Da));else if(b!==4&&(b===27&&al(l.type)&&(x=l.stateNode,d=null),l=l.child,l!==null))for(hb(l,d,x),l=l.sibling;l!==null;)hb(l,d,x),l=l.sibling}function r0(l,d,x){var b=l.tag;if(b===5||b===6)l=l.stateNode,d?x.insertBefore(l,d):x.appendChild(l);else if(b!==4&&(b===27&&al(l.type)&&(x=l.stateNode),l=l.child,l!==null))for(r0(l,d,x),l=l.sibling;l!==null;)r0(l,d,x),l=l.sibling}function __(l){var d=l.stateNode,x=l.memoizedProps;try{for(var b=l.type,D=d.attributes;D.length;)d.removeAttributeNode(D[0]);Ws(d,b,x),d[Rs]=l,d[$s]=x}catch(P){Tt(l,l.return,P)}}var Kn=!1,ks=!1,mb=!1,k_=typeof WeakSet=="function"?WeakSet:Set,zs=null;function mR(l,d){if(l=l.containerInfo,Ob=_0,l=wu(l),cc(l)){if("selectionStart"in l)var x={start:l.selectionStart,end:l.selectionEnd};else e:{x=(x=l.ownerDocument)&&x.defaultView||window;var b=x.getSelection&&x.getSelection();if(b&&b.rangeCount!==0){x=b.anchorNode;var D=b.anchorOffset,P=b.focusNode;b=b.focusOffset;try{x.nodeType,P.nodeType}catch{x=null;break e}var ae=0,ue=-1,pe=-1,je=0,Ee=0,Re=l,Ne=null;t:for(;;){for(var Se;Re!==x||D!==0&&Re.nodeType!==3||(ue=ae+D),Re!==P||b!==0&&Re.nodeType!==3||(pe=ae+b),Re.nodeType===3&&(ae+=Re.nodeValue.length),(Se=Re.firstChild)!==null;)Ne=Re,Re=Se;for(;;){if(Re===l)break t;if(Ne===x&&++je===D&&(ue=ae),Ne===P&&++Ee===b&&(pe=ae),(Se=Re.nextSibling)!==null)break;Re=Ne,Ne=Re.parentNode}Re=Se}x=ue===-1||pe===-1?null:{start:ue,end:pe}}else x=null}x=x||{start:0,end:0}}else x=null;for(Lb={focusedElem:l,selectionRange:x},_0=!1,zs=d;zs!==null;)if(d=zs,l=d.child,(d.subtreeFlags&1028)!==0&&l!==null)l.return=d,zs=l;else for(;zs!==null;){switch(d=zs,P=d.alternate,l=d.flags,d.tag){case 0:if((l&4)!==0&&(l=d.updateQueue,l=l!==null?l.events:null,l!==null))for(x=0;x<l.length;x++)D=l[x],D.ref.impl=D.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&P!==null){l=void 0,x=d,D=P.memoizedProps,P=P.memoizedState,b=x.stateNode;try{var Fe=no(x.type,D);l=b.getSnapshotBeforeUpdate(Fe,P),b.__reactInternalSnapshotBeforeUpdate=l}catch(Ke){Tt(x,x.return,Ke)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,x=l.nodeType,x===9)Fb(l);else if(x===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":Fb(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(a(163))}if(l=d.sibling,l!==null){l.return=d.return,zs=l;break}zs=d.return}}function S_(l,d,x){var b=x.flags;switch(x.tag){case 0:case 11:case 15:Zn(l,x),b&4&&Hu(5,x);break;case 1:if(Zn(l,x),b&4)if(l=x.stateNode,d===null)try{l.componentDidMount()}catch(ae){Tt(x,x.return,ae)}else{var D=no(x.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(D,d,l.__reactInternalSnapshotBeforeUpdate)}catch(ae){Tt(x,x.return,ae)}}b&64&&v_(x),b&512&&qu(x,x.return);break;case 3:if(Zn(l,x),b&64&&(l=x.updateQueue,l!==null)){if(d=null,x.child!==null)switch(x.child.tag){case 27:case 5:d=x.child.stateNode;break;case 1:d=x.child.stateNode}try{d2(l,d)}catch(ae){Tt(x,x.return,ae)}}break;case 27:d===null&&b&4&&__(x);case 26:case 5:Zn(l,x),d===null&&b&4&&w_(x),b&512&&qu(x,x.return);break;case 12:Zn(l,x);break;case 31:Zn(l,x),b&4&&E_(l,x);break;case 13:Zn(l,x),b&4&&A_(l,x),b&64&&(l=x.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(x=wR.bind(null,x),UR(l,x))));break;case 22:if(b=x.memoizedState!==null||Kn,!b){d=d!==null&&d.memoizedState!==null||ks,D=Kn;var P=ks;Kn=b,(ks=d)&&!P?Qn(l,x,(x.subtreeFlags&8772)!==0):Zn(l,x),Kn=D,ks=P}break;case 30:break;default:Zn(l,x)}}function C_(l){var d=l.alternate;d!==null&&(l.alternate=null,C_(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&Yd(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Yt=null,jr=!1;function Xn(l,d,x){for(x=x.child;x!==null;)T_(l,d,x),x=x.sibling}function T_(l,d,x){if(ds&&typeof ds.onCommitFiberUnmount=="function")try{ds.onCommitFiberUnmount(_t,x)}catch{}switch(x.tag){case 26:ks||en(x,d),Xn(l,d,x),x.memoizedState?x.memoizedState.count--:x.stateNode&&(x=x.stateNode,x.parentNode.removeChild(x));break;case 27:ks||en(x,d);var b=Yt,D=jr;al(x.type)&&(Yt=x.stateNode,jr=!1),Xn(l,d,x),eh(x.stateNode),Yt=b,jr=D;break;case 5:ks||en(x,d);case 6:if(b=Yt,D=jr,Yt=null,Xn(l,d,x),Yt=b,jr=D,Yt!==null)if(jr)try{(Yt.nodeType===9?Yt.body:Yt.nodeName==="HTML"?Yt.ownerDocument.body:Yt).removeChild(x.stateNode)}catch(P){Tt(x,d,P)}else try{Yt.removeChild(x.stateNode)}catch(P){Tt(x,d,P)}break;case 18:Yt!==null&&(jr?(l=Yt,v5(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,x.stateNode),Pc(l)):v5(Yt,x.stateNode));break;case 4:b=Yt,D=jr,Yt=x.stateNode.containerInfo,jr=!0,Xn(l,d,x),Yt=b,jr=D;break;case 0:case 11:case 14:case 15:Zi(2,x,d),ks||Zi(4,x,d),Xn(l,d,x);break;case 1:ks||(en(x,d),b=x.stateNode,typeof b.componentWillUnmount=="function"&&j_(x,d,b)),Xn(l,d,x);break;case 21:Xn(l,d,x);break;case 22:ks=(b=ks)||x.memoizedState!==null,Xn(l,d,x),ks=b;break;default:Xn(l,d,x)}}function E_(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{Pc(l)}catch(x){Tt(d,d.return,x)}}}function A_(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Pc(l)}catch(x){Tt(d,d.return,x)}}function xR(l){switch(l.tag){case 31:case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new k_),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new k_),d;default:throw Error(a(435,l.tag))}}function a0(l,d){var x=xR(l);d.forEach(function(b){if(!x.has(b)){x.add(b);var D=NR.bind(null,l,b);b.then(D,D)}})}function wr(l,d){var x=d.deletions;if(x!==null)for(var b=0;b<x.length;b++){var D=x[b],P=l,ae=d,ue=ae;e:for(;ue!==null;){switch(ue.tag){case 27:if(al(ue.type)){Yt=ue.stateNode,jr=!1;break e}break;case 5:Yt=ue.stateNode,jr=!1;break e;case 3:case 4:Yt=ue.stateNode.containerInfo,jr=!0;break e}ue=ue.return}if(Yt===null)throw Error(a(160));T_(P,ae,D),Yt=null,jr=!1,P=D.alternate,P!==null&&(P.return=null),D.return=null}if(d.subtreeFlags&13886)for(d=d.child;d!==null;)D_(d,l),d=d.sibling}var Oa=null;function D_(l,d){var x=l.alternate,b=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:wr(d,l),Nr(l),b&4&&(Zi(3,l,l.return),Hu(3,l),Zi(5,l,l.return));break;case 1:wr(d,l),Nr(l),b&512&&(ks||x===null||en(x,x.return)),b&64&&Kn&&(l=l.updateQueue,l!==null&&(b=l.callbacks,b!==null&&(x=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=x===null?b:x.concat(b))));break;case 26:var D=Oa;if(wr(d,l),Nr(l),b&512&&(ks||x===null||en(x,x.return)),b&4){var P=x!==null?x.memoizedState:null;if(b=l.memoizedState,x===null)if(b===null)if(l.stateNode===null){e:{b=l.type,x=l.memoizedProps,D=D.ownerDocument||D;t:switch(b){case"title":P=D.getElementsByTagName("title")[0],(!P||P[Dn]||P[Rs]||P.namespaceURI==="http://www.w3.org/2000/svg"||P.hasAttribute("itemprop"))&&(P=D.createElement(b),D.head.insertBefore(P,D.querySelector("head > title"))),Ws(P,b,x),P[Rs]=l,us(P),b=P;break e;case"link":var ae=D5("link","href",D).get(b+(x.href||""));if(ae){for(var ue=0;ue<ae.length;ue++)if(P=ae[ue],P.getAttribute("href")===(x.href==null||x.href===""?null:x.href)&&P.getAttribute("rel")===(x.rel==null?null:x.rel)&&P.getAttribute("title")===(x.title==null?null:x.title)&&P.getAttribute("crossorigin")===(x.crossOrigin==null?null:x.crossOrigin)){ae.splice(ue,1);break t}}P=D.createElement(b),Ws(P,b,x),D.head.appendChild(P);break;case"meta":if(ae=D5("meta","content",D).get(b+(x.content||""))){for(ue=0;ue<ae.length;ue++)if(P=ae[ue],P.getAttribute("content")===(x.content==null?null:""+x.content)&&P.getAttribute("name")===(x.name==null?null:x.name)&&P.getAttribute("property")===(x.property==null?null:x.property)&&P.getAttribute("http-equiv")===(x.httpEquiv==null?null:x.httpEquiv)&&P.getAttribute("charset")===(x.charSet==null?null:x.charSet)){ae.splice(ue,1);break t}}P=D.createElement(b),Ws(P,b,x),D.head.appendChild(P);break;default:throw Error(a(468,b))}P[Rs]=l,us(P),b=P}l.stateNode=b}else R5(D,l.type,l.stateNode);else l.stateNode=A5(D,b,l.memoizedProps);else P!==b?(P===null?x.stateNode!==null&&(x=x.stateNode,x.parentNode.removeChild(x)):P.count--,b===null?R5(D,l.type,l.stateNode):A5(D,b,l.memoizedProps)):b===null&&l.stateNode!==null&&db(l,l.memoizedProps,x.memoizedProps)}break;case 27:wr(d,l),Nr(l),b&512&&(ks||x===null||en(x,x.return)),x!==null&&b&4&&db(l,l.memoizedProps,x.memoizedProps);break;case 5:if(wr(d,l),Nr(l),b&512&&(ks||x===null||en(x,x.return)),l.flags&32){D=l.stateNode;try{Ai(D,"")}catch(Fe){Tt(l,l.return,Fe)}}b&4&&l.stateNode!=null&&(D=l.memoizedProps,db(l,D,x!==null?x.memoizedProps:D)),b&1024&&(mb=!0);break;case 6:if(wr(d,l),Nr(l),b&4){if(l.stateNode===null)throw Error(a(162));b=l.memoizedProps,x=l.stateNode;try{x.nodeValue=b}catch(Fe){Tt(l,l.return,Fe)}}break;case 3:if(v0=null,D=Oa,Oa=b0(d.containerInfo),wr(d,l),Oa=D,Nr(l),b&4&&x!==null&&x.memoizedState.isDehydrated)try{Pc(d.containerInfo)}catch(Fe){Tt(l,l.return,Fe)}mb&&(mb=!1,R_(l));break;case 4:b=Oa,Oa=b0(l.stateNode.containerInfo),wr(d,l),Nr(l),Oa=b;break;case 12:wr(d,l),Nr(l);break;case 31:wr(d,l),Nr(l),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,a0(l,b)));break;case 13:wr(d,l),Nr(l),l.child.flags&8192&&l.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(i0=Ce()),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,a0(l,b)));break;case 22:D=l.memoizedState!==null;var pe=x!==null&&x.memoizedState!==null,je=Kn,Ee=ks;if(Kn=je||D,ks=Ee||pe,wr(d,l),ks=Ee,Kn=je,Nr(l),b&8192)e:for(d=l.stateNode,d._visibility=D?d._visibility&-2:d._visibility|1,D&&(x===null||pe||Kn||ks||io(l)),x=null,d=l;;){if(d.tag===5||d.tag===26){if(x===null){pe=x=d;try{if(P=pe.stateNode,D)ae=P.style,typeof ae.setProperty=="function"?ae.setProperty("display","none","important"):ae.display="none";else{ue=pe.stateNode;var Re=pe.memoizedProps.style,Ne=Re!=null&&Re.hasOwnProperty("display")?Re.display:null;ue.style.display=Ne==null||typeof Ne=="boolean"?"":(""+Ne).trim()}}catch(Fe){Tt(pe,pe.return,Fe)}}}else if(d.tag===6){if(x===null){pe=d;try{pe.stateNode.nodeValue=D?"":pe.memoizedProps}catch(Fe){Tt(pe,pe.return,Fe)}}}else if(d.tag===18){if(x===null){pe=d;try{var Se=pe.stateNode;D?j5(Se,!0):j5(pe.stateNode,!1)}catch(Fe){Tt(pe,pe.return,Fe)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;x===d&&(x=null),d=d.return}x===d&&(x=null),d.sibling.return=d.return,d=d.sibling}b&4&&(b=l.updateQueue,b!==null&&(x=b.retryQueue,x!==null&&(b.retryQueue=null,a0(l,x))));break;case 19:wr(d,l),Nr(l),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,a0(l,b)));break;case 30:break;case 21:break;default:wr(d,l),Nr(l)}}function Nr(l){var d=l.flags;if(d&2){try{for(var x,b=l.return;b!==null;){if(N_(b)){x=b;break}b=b.return}if(x==null)throw Error(a(160));switch(x.tag){case 27:var D=x.stateNode,P=ub(l);r0(l,P,D);break;case 5:var ae=x.stateNode;x.flags&32&&(Ai(ae,""),x.flags&=-33);var ue=ub(l);r0(l,ue,ae);break;case 3:case 4:var pe=x.stateNode.containerInfo,je=ub(l);hb(l,je,pe);break;default:throw Error(a(161))}}catch(Ee){Tt(l,l.return,Ee)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function R_(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;R_(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function Zn(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)S_(l,d.alternate,d),d=d.sibling}function io(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:Zi(4,d,d.return),io(d);break;case 1:en(d,d.return);var x=d.stateNode;typeof x.componentWillUnmount=="function"&&j_(d,d.return,x),io(d);break;case 27:eh(d.stateNode);case 26:case 5:en(d,d.return),io(d);break;case 22:d.memoizedState===null&&io(d);break;case 30:io(d);break;default:io(d)}l=l.sibling}}function Qn(l,d,x){for(x=x&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var b=d.alternate,D=l,P=d,ae=P.flags;switch(P.tag){case 0:case 11:case 15:Qn(D,P,x),Hu(4,P);break;case 1:if(Qn(D,P,x),b=P,D=b.stateNode,typeof D.componentDidMount=="function")try{D.componentDidMount()}catch(je){Tt(b,b.return,je)}if(b=P,D=b.updateQueue,D!==null){var ue=b.stateNode;try{var pe=D.shared.hiddenCallbacks;if(pe!==null)for(D.shared.hiddenCallbacks=null,D=0;D<pe.length;D++)c2(pe[D],ue)}catch(je){Tt(b,b.return,je)}}x&&ae&64&&v_(P),qu(P,P.return);break;case 27:__(P);case 26:case 5:Qn(D,P,x),x&&b===null&&ae&4&&w_(P),qu(P,P.return);break;case 12:Qn(D,P,x);break;case 31:Qn(D,P,x),x&&ae&4&&E_(D,P);break;case 13:Qn(D,P,x),x&&ae&4&&A_(D,P);break;case 22:P.memoizedState===null&&Qn(D,P,x),qu(P,P.return);break;case 30:break;default:Qn(D,P,x)}d=d.sibling}}function xb(l,d){var x=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(x=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==x&&(l!=null&&l.refCount++,x!=null&&Du(x))}function fb(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&Du(l))}function La(l,d,x,b){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)M_(l,d,x,b),d=d.sibling}function M_(l,d,x,b){var D=d.flags;switch(d.tag){case 0:case 11:case 15:La(l,d,x,b),D&2048&&Hu(9,d);break;case 1:La(l,d,x,b);break;case 3:La(l,d,x,b),D&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&Du(l)));break;case 12:if(D&2048){La(l,d,x,b),l=d.stateNode;try{var P=d.memoizedProps,ae=P.id,ue=P.onPostCommit;typeof ue=="function"&&ue(ae,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(pe){Tt(d,d.return,pe)}}else La(l,d,x,b);break;case 31:La(l,d,x,b);break;case 13:La(l,d,x,b);break;case 23:break;case 22:P=d.stateNode,ae=d.alternate,d.memoizedState!==null?P._visibility&2?La(l,d,x,b):Wu(l,d):P._visibility&2?La(l,d,x,b):(P._visibility|=2,kc(l,d,x,b,(d.subtreeFlags&10256)!==0||!1)),D&2048&&xb(ae,d);break;case 24:La(l,d,x,b),D&2048&&fb(d.alternate,d);break;default:La(l,d,x,b)}}function kc(l,d,x,b,D){for(D=D&&((d.subtreeFlags&10256)!==0||!1),d=d.child;d!==null;){var P=l,ae=d,ue=x,pe=b,je=ae.flags;switch(ae.tag){case 0:case 11:case 15:kc(P,ae,ue,pe,D),Hu(8,ae);break;case 23:break;case 22:var Ee=ae.stateNode;ae.memoizedState!==null?Ee._visibility&2?kc(P,ae,ue,pe,D):Wu(P,ae):(Ee._visibility|=2,kc(P,ae,ue,pe,D)),D&&je&2048&&xb(ae.alternate,ae);break;case 24:kc(P,ae,ue,pe,D),D&&je&2048&&fb(ae.alternate,ae);break;default:kc(P,ae,ue,pe,D)}d=d.sibling}}function Wu(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var x=l,b=d,D=b.flags;switch(b.tag){case 22:Wu(x,b),D&2048&&xb(b.alternate,b);break;case 24:Wu(x,b),D&2048&&fb(b.alternate,b);break;default:Wu(x,b)}d=d.sibling}}var Yu=8192;function Sc(l,d,x){if(l.subtreeFlags&Yu)for(l=l.child;l!==null;)O_(l,d,x),l=l.sibling}function O_(l,d,x){switch(l.tag){case 26:Sc(l,d,x),l.flags&Yu&&l.memoizedState!==null&&eM(x,Oa,l.memoizedState,l.memoizedProps);break;case 5:Sc(l,d,x);break;case 3:case 4:var b=Oa;Oa=b0(l.stateNode.containerInfo),Sc(l,d,x),Oa=b;break;case 22:l.memoizedState===null&&(b=l.alternate,b!==null&&b.memoizedState!==null?(b=Yu,Yu=16777216,Sc(l,d,x),Yu=b):Sc(l,d,x));break;default:Sc(l,d,x)}}function L_(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function Gu(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var x=0;x<d.length;x++){var b=d[x];zs=b,B_(b,l)}L_(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)P_(l),l=l.sibling}function P_(l){switch(l.tag){case 0:case 11:case 15:Gu(l),l.flags&2048&&Zi(9,l,l.return);break;case 3:Gu(l);break;case 12:Gu(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,n0(l)):Gu(l);break;default:Gu(l)}}function n0(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var x=0;x<d.length;x++){var b=d[x];zs=b,B_(b,l)}L_(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:Zi(8,d,d.return),n0(d);break;case 22:x=d.stateNode,x._visibility&2&&(x._visibility&=-3,n0(d));break;default:n0(d)}l=l.sibling}}function B_(l,d){for(;zs!==null;){var x=zs;switch(x.tag){case 0:case 11:case 15:Zi(8,x,d);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var b=x.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:Du(x.memoizedState.cache)}if(b=x.child,b!==null)b.return=x,zs=b;else e:for(x=l;zs!==null;){b=zs;var D=b.sibling,P=b.return;if(C_(b),b===x){zs=null;break e}if(D!==null){D.return=P,zs=D;break e}zs=P}}}var fR={getCacheForType:function(l){var d=Hs(ws),x=d.data.get(l);return x===void 0&&(x=l(),d.data.set(l,x)),x},cacheSignal:function(){return Hs(ws).controller.signal}},pR=typeof WeakMap=="function"?WeakMap:Map,Nt=0,It=null,dt=null,mt=0,Ct=0,Wr=null,Qi=!1,Cc=!1,pb=!1,Jn=0,ns=0,Ji=0,lo=0,gb=0,Yr=0,Tc=0,Ku=null,_r=null,bb=!1,i0=0,F_=0,l0=1/0,o0=null,el=null,Os=0,tl=null,Ec=null,ei=0,yb=0,vb=null,z_=null,Xu=0,jb=null;function Gr(){return(Nt&2)!==0&&mt!==0?mt&-mt:J.T!==null?Cb():qd()}function I_(){if(Yr===0)if((mt&536870912)===0||gt){var l=En;En<<=1,(En&3932160)===0&&(En=262144),Yr=l}else Yr=536870912;return l=Hr.current,l!==null&&(l.flags|=32),Yr}function kr(l,d,x){(l===It&&(Ct===2||Ct===9)||l.cancelPendingCommit!==null)&&(Ac(l,0),sl(l,mt,Yr,!1)),Vt(l,x),((Nt&2)===0||l!==It)&&(l===It&&((Nt&2)===0&&(lo|=x),ns===4&&sl(l,mt,Yr,!1)),tn(l))}function $_(l,d,x){if((Nt&6)!==0)throw Error(a(327));var b=!x&&(d&127)===0&&(d&l.expiredLanes)===0||Js(l,d),D=b?yR(l,d):Nb(l,d,!0),P=b;do{if(D===0){Cc&&!b&&sl(l,d,0,!1);break}else{if(x=l.current.alternate,P&&!gR(x)){D=Nb(l,d,!1),P=!1;continue}if(D===2){if(P=d,l.errorRecoveryDisabledLanes&P)var ae=0;else ae=l.pendingLanes&-536870913,ae=ae!==0?ae:ae&536870912?536870912:0;if(ae!==0){d=ae;e:{var ue=l;D=Ku;var pe=ue.current.memoizedState.isDehydrated;if(pe&&(Ac(ue,ae).flags|=256),ae=Nb(ue,ae,!1),ae!==2){if(pb&&!pe){ue.errorRecoveryDisabledLanes|=P,lo|=P,D=4;break e}P=_r,_r=D,P!==null&&(_r===null?_r=P:_r.push.apply(_r,P))}D=ae}if(P=!1,D!==2)continue}}if(D===1){Ac(l,0),sl(l,d,0,!0);break}e:{switch(b=l,P=D,P){case 0:case 1:throw Error(a(345));case 4:if((d&4194048)!==d)break;case 6:sl(b,d,Yr,!Qi);break e;case 2:_r=null;break;case 3:case 5:break;default:throw Error(a(329))}if((d&62914560)===d&&(D=i0+300-Ce(),10<D)){if(sl(b,d,Yr,!Qi),Ll(b,0,!0)!==0)break e;ei=d,b.timeoutHandle=b5(U_.bind(null,b,x,_r,o0,bb,d,Yr,lo,Tc,Qi,P,"Throttled",-0,0),D);break e}U_(b,x,_r,o0,bb,d,Yr,lo,Tc,Qi,P,null,-0,0)}}break}while(!0);tn(l)}function U_(l,d,x,b,D,P,ae,ue,pe,je,Ee,Re,Ne,Se){if(l.timeoutHandle=-1,Re=d.subtreeFlags,Re&8192||(Re&16785408)===16785408){Re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Da},O_(d,P,Re);var Fe=(P&62914560)===P?i0-Ce():(P&4194048)===P?F_-Ce():0;if(Fe=tM(Re,Fe),Fe!==null){ei=P,l.cancelPendingCommit=Fe(X_.bind(null,l,d,P,x,b,D,ae,ue,pe,Ee,Re,null,Ne,Se)),sl(l,P,ae,!je);return}}X_(l,d,P,x,b,D,ae,ue,pe)}function gR(l){for(var d=l;;){var x=d.tag;if((x===0||x===11||x===15)&&d.flags&16384&&(x=d.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var b=0;b<x.length;b++){var D=x[b],P=D.getSnapshot;D=D.value;try{if(!Rt(P(),D))return!1}catch{return!1}}if(x=d.child,d.subtreeFlags&16384&&x!==null)x.return=d,d=x;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function sl(l,d,x,b){d&=~gb,d&=~lo,l.suspendedLanes|=d,l.pingedLanes&=~d,b&&(l.warmLanes|=d),b=l.expirationTimes;for(var D=d;0<D;){var P=31-zt(D),ae=1<<P;b[P]=-1,D&=~ae}x!==0&&qm(l,x,d)}function c0(){return(Nt&6)===0?(Zu(0),!1):!0}function wb(){if(dt!==null){if(Ct===0)var l=dt.return;else l=dt,Vn=Ql=null,Fg(l),vc=null,Mu=0,l=dt;for(;l!==null;)y_(l.alternate,l),l=l.return;dt=null}}function Ac(l,d){var x=l.timeoutHandle;x!==-1&&(l.timeoutHandle=-1,BR(x)),x=l.cancelPendingCommit,x!==null&&(l.cancelPendingCommit=null,x()),ei=0,wb(),It=l,dt=x=$n(l.current,null),mt=d,Ct=0,Wr=null,Qi=!1,Cc=Js(l,d),pb=!1,Tc=Yr=gb=lo=Ji=ns=0,_r=Ku=null,bb=!1,(d&8)!==0&&(d|=d&32);var b=l.entangledLanes;if(b!==0)for(l=l.entanglements,b&=d;0<b;){var D=31-zt(b),P=1<<D;d|=l[D],b&=~P}return Jn=d,Gl(),x}function V_(l,d){rt=null,J.H=$u,d===yc||d===Fx?(d=n2(),Ct=3):d===Sg?(d=n2(),Ct=4):Ct=d===eb?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,Wr=d,dt===null&&(ns=1,Qx(l,aa(d,l.current)))}function H_(){var l=Hr.current;return l===null?!0:(mt&4194048)===mt?oa===null:(mt&62914560)===mt||(mt&536870912)!==0?l===oa:!1}function q_(){var l=J.H;return J.H=$u,l===null?$u:l}function W_(){var l=J.A;return J.A=fR,l}function d0(){ns=4,Qi||(mt&4194048)!==mt&&Hr.current!==null||(Cc=!0),(Ji&134217727)===0&&(lo&134217727)===0||It===null||sl(It,mt,Yr,!1)}function Nb(l,d,x){var b=Nt;Nt|=2;var D=q_(),P=W_();(It!==l||mt!==d)&&(o0=null,Ac(l,d)),d=!1;var ae=ns;e:do try{if(Ct!==0&&dt!==null){var ue=dt,pe=Wr;switch(Ct){case 8:wb(),ae=6;break e;case 3:case 2:case 9:case 6:Hr.current===null&&(d=!0);var je=Ct;if(Ct=0,Wr=null,Dc(l,ue,pe,je),x&&Cc){ae=0;break e}break;default:je=Ct,Ct=0,Wr=null,Dc(l,ue,pe,je)}}bR(),ae=ns;break}catch(Ee){V_(l,Ee)}while(!0);return d&&l.shellSuspendCounter++,Vn=Ql=null,Nt=b,J.H=D,J.A=P,dt===null&&(It=null,mt=0,Gl()),ae}function bR(){for(;dt!==null;)Y_(dt)}function yR(l,d){var x=Nt;Nt|=2;var b=q_(),D=W_();It!==l||mt!==d?(o0=null,l0=Ce()+500,Ac(l,d)):Cc=Js(l,d);e:do try{if(Ct!==0&&dt!==null){d=dt;var P=Wr;t:switch(Ct){case 1:Ct=0,Wr=null,Dc(l,d,P,1);break;case 2:case 9:if(r2(P)){Ct=0,Wr=null,G_(d);break}d=function(){Ct!==2&&Ct!==9||It!==l||(Ct=7),tn(l)},P.then(d,d);break e;case 3:Ct=7;break e;case 4:Ct=5;break e;case 7:r2(P)?(Ct=0,Wr=null,G_(d)):(Ct=0,Wr=null,Dc(l,d,P,7));break;case 5:var ae=null;switch(dt.tag){case 26:ae=dt.memoizedState;case 5:case 27:var ue=dt;if(ae?M5(ae):ue.stateNode.complete){Ct=0,Wr=null;var pe=ue.sibling;if(pe!==null)dt=pe;else{var je=ue.return;je!==null?(dt=je,u0(je)):dt=null}break t}}Ct=0,Wr=null,Dc(l,d,P,5);break;case 6:Ct=0,Wr=null,Dc(l,d,P,6);break;case 8:wb(),ns=6;break e;default:throw Error(a(462))}}vR();break}catch(Ee){V_(l,Ee)}while(!0);return Vn=Ql=null,J.H=b,J.A=D,Nt=x,dt!==null?0:(It=null,mt=0,Gl(),ns)}function vR(){for(;dt!==null&&!xe();)Y_(dt)}function Y_(l){var d=g_(l.alternate,l,Jn);l.memoizedProps=l.pendingProps,d===null?u0(l):dt=d}function G_(l){var d=l,x=d.alternate;switch(d.tag){case 15:case 0:d=u_(x,d,d.pendingProps,d.type,void 0,mt);break;case 11:d=u_(x,d,d.pendingProps,d.type.render,d.ref,mt);break;case 5:Fg(d);default:y_(x,d),d=dt=W1(d,Jn),d=g_(x,d,Jn)}l.memoizedProps=l.pendingProps,d===null?u0(l):dt=d}function Dc(l,d,x,b){Vn=Ql=null,Fg(d),vc=null,Mu=0;var D=d.return;try{if(oR(l,D,d,x,mt)){ns=1,Qx(l,aa(x,l.current)),dt=null;return}}catch(P){if(D!==null)throw dt=D,P;ns=1,Qx(l,aa(x,l.current)),dt=null;return}d.flags&32768?(gt||b===1?l=!0:Cc||(mt&536870912)!==0?l=!1:(Qi=l=!0,(b===2||b===9||b===3||b===6)&&(b=Hr.current,b!==null&&b.tag===13&&(b.flags|=16384))),K_(d,l)):u0(d)}function u0(l){var d=l;do{if((d.flags&32768)!==0){K_(d,Qi);return}l=d.return;var x=uR(d.alternate,d,Jn);if(x!==null){dt=x;return}if(d=d.sibling,d!==null){dt=d;return}dt=d=l}while(d!==null);ns===0&&(ns=5)}function K_(l,d){do{var x=hR(l.alternate,l);if(x!==null){x.flags&=32767,dt=x;return}if(x=l.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!d&&(l=l.sibling,l!==null)){dt=l;return}dt=l=x}while(l!==null);ns=6,dt=null}function X_(l,d,x,b,D,P,ae,ue,pe){l.cancelPendingCommit=null;do h0();while(Os!==0);if((Nt&6)!==0)throw Error(a(327));if(d!==null){if(d===l.current)throw Error(a(177));if(P=d.lanes|d.childLanes,P|=Za,Ud(l,x,P,ae,ue,pe),l===It&&(dt=It=null,mt=0),Ec=d,tl=l,ei=x,yb=P,vb=D,z_=b,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,_R(We,function(){return t5(),null})):(l.callbackNode=null,l.callbackPriority=0),b=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||b){b=J.T,J.T=null,D=se.p,se.p=2,ae=Nt,Nt|=4;try{mR(l,d,x)}finally{Nt=ae,se.p=D,J.T=b}}Os=1,Z_(),Q_(),J_()}}function Z_(){if(Os===1){Os=0;var l=tl,d=Ec,x=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||x){x=J.T,J.T=null;var b=se.p;se.p=2;var D=Nt;Nt|=4;try{D_(d,l);var P=Lb,ae=wu(l.containerInfo),ue=P.focusedElem,pe=P.selectionRange;if(ae!==ue&&ue&&ue.ownerDocument&&ju(ue.ownerDocument.documentElement,ue)){if(pe!==null&&cc(ue)){var je=pe.start,Ee=pe.end;if(Ee===void 0&&(Ee=je),"selectionStart"in ue)ue.selectionStart=je,ue.selectionEnd=Math.min(Ee,ue.value.length);else{var Re=ue.ownerDocument||document,Ne=Re&&Re.defaultView||window;if(Ne.getSelection){var Se=Ne.getSelection(),Fe=ue.textContent.length,Ke=Math.min(pe.start,Fe),Pt=pe.end===void 0?Ke:Math.min(pe.end,Fe);!Se.extend&&Ke>Pt&&(ae=Pt,Pt=Ke,Ke=ae);var be=vu(ue,Ke),ge=vu(ue,Pt);if(be&&ge&&(Se.rangeCount!==1||Se.anchorNode!==be.node||Se.anchorOffset!==be.offset||Se.focusNode!==ge.node||Se.focusOffset!==ge.offset)){var ve=Re.createRange();ve.setStart(be.node,be.offset),Se.removeAllRanges(),Ke>Pt?(Se.addRange(ve),Se.extend(ge.node,ge.offset)):(ve.setEnd(ge.node,ge.offset),Se.addRange(ve))}}}}for(Re=[],Se=ue;Se=Se.parentNode;)Se.nodeType===1&&Re.push({element:Se,left:Se.scrollLeft,top:Se.scrollTop});for(typeof ue.focus=="function"&&ue.focus(),ue=0;ue<Re.length;ue++){var De=Re[ue];De.element.scrollLeft=De.left,De.element.scrollTop=De.top}}_0=!!Ob,Lb=Ob=null}finally{Nt=D,se.p=b,J.T=x}}l.current=d,Os=2}}function Q_(){if(Os===2){Os=0;var l=tl,d=Ec,x=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||x){x=J.T,J.T=null;var b=se.p;se.p=2;var D=Nt;Nt|=4;try{S_(l,d.alternate,d)}finally{Nt=D,se.p=b,J.T=x}}Os=3}}function J_(){if(Os===4||Os===3){Os=0,_e();var l=tl,d=Ec,x=ei,b=z_;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?Os=5:(Os=0,Ec=tl=null,e5(l,l.pendingLanes));var D=l.pendingLanes;if(D===0&&(el=null),Hd(x),d=d.stateNode,ds&&typeof ds.onCommitFiberRoot=="function")try{ds.onCommitFiberRoot(_t,d,void 0,(d.current.flags&128)===128)}catch{}if(b!==null){d=J.T,D=se.p,se.p=2,J.T=null;try{for(var P=l.onRecoverableError,ae=0;ae<b.length;ae++){var ue=b[ae];P(ue.value,{componentStack:ue.stack})}}finally{J.T=d,se.p=D}}(ei&3)!==0&&h0(),tn(l),D=l.pendingLanes,(x&261930)!==0&&(D&42)!==0?l===jb?Xu++:(Xu=0,jb=l):Xu=0,Zu(0)}}function e5(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,Du(d)))}function h0(){return Z_(),Q_(),J_(),t5()}function t5(){if(Os!==5)return!1;var l=tl,d=yb;yb=0;var x=Hd(ei),b=J.T,D=se.p;try{se.p=32>x?32:x,J.T=null,x=vb,vb=null;var P=tl,ae=ei;if(Os=0,Ec=tl=null,ei=0,(Nt&6)!==0)throw Error(a(331));var ue=Nt;if(Nt|=4,P_(P.current),M_(P,P.current,ae,x),Nt=ue,Zu(0,!1),ds&&typeof ds.onPostCommitFiberRoot=="function")try{ds.onPostCommitFiberRoot(_t,P)}catch{}return!0}finally{se.p=D,J.T=b,e5(l,d)}}function s5(l,d,x){d=aa(x,d),d=Jg(l.stateNode,d,2),l=Gi(l,d,2),l!==null&&(Vt(l,2),tn(l))}function Tt(l,d,x){if(l.tag===3)s5(l,l,x);else for(;d!==null;){if(d.tag===3){s5(d,l,x);break}else if(d.tag===1){var b=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(el===null||!el.has(b))){l=aa(x,l),x=r_(2),b=Gi(d,x,2),b!==null&&(a_(x,b,d,l),Vt(b,2),tn(b));break}}d=d.return}}function _b(l,d,x){var b=l.pingCache;if(b===null){b=l.pingCache=new pR;var D=new Set;b.set(d,D)}else D=b.get(d),D===void 0&&(D=new Set,b.set(d,D));D.has(x)||(pb=!0,D.add(x),l=jR.bind(null,l,d,x),d.then(l,l))}function jR(l,d,x){var b=l.pingCache;b!==null&&b.delete(d),l.pingedLanes|=l.suspendedLanes&x,l.warmLanes&=~x,It===l&&(mt&x)===x&&(ns===4||ns===3&&(mt&62914560)===mt&&300>Ce()-i0?(Nt&2)===0&&Ac(l,0):gb|=x,Tc===mt&&(Tc=0)),tn(l)}function r5(l,d){d===0&&(d=Hm()),l=Kl(l,d),l!==null&&(Vt(l,d),tn(l))}function wR(l){var d=l.memoizedState,x=0;d!==null&&(x=d.retryLane),r5(l,x)}function NR(l,d){var x=0;switch(l.tag){case 31:case 13:var b=l.stateNode,D=l.memoizedState;D!==null&&(x=D.retryLane);break;case 19:b=l.stateNode;break;case 22:b=l.stateNode._retryCache;break;default:throw Error(a(314))}b!==null&&b.delete(d),r5(l,x)}function _R(l,d){return ne(l,d)}var m0=null,Rc=null,kb=!1,x0=!1,Sb=!1,rl=0;function tn(l){l!==Rc&&l.next===null&&(Rc===null?m0=Rc=l:Rc=Rc.next=l),x0=!0,kb||(kb=!0,SR())}function Zu(l,d){if(!Sb&&x0){Sb=!0;do for(var x=!1,b=m0;b!==null;){if(l!==0){var D=b.pendingLanes;if(D===0)var P=0;else{var ae=b.suspendedLanes,ue=b.pingedLanes;P=(1<<31-zt(42|l)+1)-1,P&=D&~(ae&~ue),P=P&201326741?P&201326741|1:P?P|2:0}P!==0&&(x=!0,l5(b,P))}else P=mt,P=Ll(b,b===It?P:0,b.cancelPendingCommit!==null||b.timeoutHandle!==-1),(P&3)===0||Js(b,P)||(x=!0,l5(b,P));b=b.next}while(x);Sb=!1}}function kR(){a5()}function a5(){x0=kb=!1;var l=0;rl!==0&&PR()&&(l=rl);for(var d=Ce(),x=null,b=m0;b!==null;){var D=b.next,P=n5(b,d);P===0?(b.next=null,x===null?m0=D:x.next=D,D===null&&(Rc=x)):(x=b,(l!==0||(P&3)!==0)&&(x0=!0)),b=D}Os!==0&&Os!==5||Zu(l),rl!==0&&(rl=0)}function n5(l,d){for(var x=l.suspendedLanes,b=l.pingedLanes,D=l.expirationTimes,P=l.pendingLanes&-62914561;0<P;){var ae=31-zt(P),ue=1<<ae,pe=D[ae];pe===-1?((ue&x)===0||(ue&b)!==0)&&(D[ae]=Ci(ue,d)):pe<=d&&(l.expiredLanes|=ue),P&=~ue}if(d=It,x=mt,x=Ll(l,l===d?x:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b=l.callbackNode,x===0||l===d&&(Ct===2||Ct===9)||l.cancelPendingCommit!==null)return b!==null&&b!==null&&me(b),l.callbackNode=null,l.callbackPriority=0;if((x&3)===0||Js(l,x)){if(d=x&-x,d===l.callbackPriority)return d;switch(b!==null&&me(b),Hd(x)){case 2:case 8:x=ze;break;case 32:x=We;break;case 268435456:x=Ur;break;default:x=We}return b=i5.bind(null,l),x=ne(x,b),l.callbackPriority=d,l.callbackNode=x,d}return b!==null&&b!==null&&me(b),l.callbackPriority=2,l.callbackNode=null,2}function i5(l,d){if(Os!==0&&Os!==5)return l.callbackNode=null,l.callbackPriority=0,null;var x=l.callbackNode;if(h0()&&l.callbackNode!==x)return null;var b=mt;return b=Ll(l,l===It?b:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b===0?null:($_(l,b,d),n5(l,Ce()),l.callbackNode!=null&&l.callbackNode===x?i5.bind(null,l):null)}function l5(l,d){if(h0())return null;$_(l,d,!0)}function SR(){FR(function(){(Nt&6)!==0?ne(Be,kR):a5()})}function Cb(){if(rl===0){var l=gc;l===0&&(l=Tn,Tn<<=1,(Tn&261888)===0&&(Tn=256)),rl=l}return rl}function o5(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Il(""+l)}function c5(l,d){var x=d.ownerDocument.createElement("input");return x.name=d.name,x.value=d.value,l.id&&x.setAttribute("form",l.id),d.parentNode.insertBefore(x,d),l=new FormData(l),x.parentNode.removeChild(x),l}function CR(l,d,x,b,D){if(d==="submit"&&x&&x.stateNode===D){var P=o5((D[$s]||null).action),ae=b.submitter;ae&&(d=(d=ae[$s]||null)?o5(d.formAction):ae.getAttribute("formAction"),d!==null&&(P=d,ae=null));var ue=new lc("action","action",null,b,D);l.push({event:ue,listeners:[{instance:null,listener:function(){if(b.defaultPrevented){if(rl!==0){var pe=ae?c5(D,ae):new FormData(D);Yg(x,{pending:!0,data:pe,method:D.method,action:P},null,pe)}}else typeof P=="function"&&(ue.preventDefault(),pe=ae?c5(D,ae):new FormData(D),Yg(x,{pending:!0,data:pe,method:D.method,action:P},P,pe))},currentTarget:D}]})}}for(var Tb=0;Tb<ye.length;Tb++){var Eb=ye[Tb],TR=Eb.toLowerCase(),ER=Eb[0].toUpperCase()+Eb.slice(1);Pe(TR,"on"+ER)}Pe(Cu,"onAnimationEnd"),Pe(uc,"onAnimationIteration"),Pe(Tx,"onAnimationStart"),Pe("dblclick","onDoubleClick"),Pe("focusin","onFocus"),Pe("focusout","onBlur"),Pe(ug,"onTransitionRun"),Pe(Tu,"onTransitionStart"),Pe(H1,"onTransitionCancel"),Pe(Ex,"onTransitionEnd"),Ln("onMouseEnter",["mouseout","mouseover"]),Ln("onMouseLeave",["mouseout","mouseover"]),Ln("onPointerEnter",["pointerout","pointerover"]),Ln("onPointerLeave",["pointerout","pointerover"]),On("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),On("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),On("onBeforeInput",["compositionend","keypress","textInput","paste"]),On("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),On("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),On("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qu));function d5(l,d){d=(d&4)!==0;for(var x=0;x<l.length;x++){var b=l[x],D=b.event;b=b.listeners;e:{var P=void 0;if(d)for(var ae=b.length-1;0<=ae;ae--){var ue=b[ae],pe=ue.instance,je=ue.currentTarget;if(ue=ue.listener,pe!==P&&D.isPropagationStopped())break e;P=ue,D.currentTarget=je;try{P(D)}catch(Ee){Ye(Ee)}D.currentTarget=null,P=pe}else for(ae=0;ae<b.length;ae++){if(ue=b[ae],pe=ue.instance,je=ue.currentTarget,ue=ue.listener,pe!==P&&D.isPropagationStopped())break e;P=ue,D.currentTarget=je;try{P(D)}catch(Ee){Ye(Ee)}D.currentTarget=null,P=pe}}}}function ut(l,d){var x=d[Wd];x===void 0&&(x=d[Wd]=new Set);var b=l+"__bubble";x.has(b)||(u5(d,l,2,!1),x.add(b))}function Ab(l,d,x){var b=0;d&&(b|=4),u5(x,l,b,d)}var f0="_reactListening"+Math.random().toString(36).slice(2);function Db(l){if(!l[f0]){l[f0]=!0,Gd.forEach(function(x){x!=="selectionchange"&&(AR.has(x)||Ab(x,!1,l),Ab(x,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[f0]||(d[f0]=!0,Ab("selectionchange",!1,d))}}function u5(l,d,x,b){switch(I5(d)){case 2:var D=aM;break;case 8:D=nM;break;default:D=Wb}x=D.bind(null,d,x,l),D=void 0,!ac||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(D=!0),b?D!==void 0?l.addEventListener(d,x,{capture:!0,passive:D}):l.addEventListener(d,x,!0):D!==void 0?l.addEventListener(d,x,{passive:D}):l.addEventListener(d,x,!1)}function Rb(l,d,x,b,D){var P=b;if((d&1)===0&&(d&2)===0&&b!==null)e:for(;;){if(b===null)return;var ae=b.tag;if(ae===3||ae===4){var ue=b.stateNode.containerInfo;if(ue===D)break;if(ae===4)for(ae=b.return;ae!==null;){var pe=ae.tag;if((pe===3||pe===4)&&ae.stateNode.containerInfo===D)return;ae=ae.return}for(;ue!==null;){if(ae=Rn(ue),ae===null)return;if(pe=ae.tag,pe===5||pe===6||pe===26||pe===27){b=P=ae;continue e}ue=ue.parentNode}}b=b.return}iu(function(){var je=P,Ee=sc(x),Re=[];e:{var Ne=Ax.get(l);if(Ne!==void 0){var Se=lc,Fe=l;switch(l){case"keypress":if(nc(x)===0)break e;case"keydown":case"keyup":Se=rg;break;case"focusin":Fe="focus",Se=hu;break;case"focusout":Fe="blur",Se=hu;break;case"beforeblur":case"afterblur":Se=hu;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Se=rx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Se=ax;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Se=ng;break;case Cu:case uc:case Tx:Se=ix;break;case Ex:Se=hx;break;case"scroll":case"scrollend":Se=sx;break;case"wheel":Se=lg;break;case"copy":case"cut":case"paste":Se=Qp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Se=xu;break;case"toggle":case"beforetoggle":Se=xx}var Ke=(d&4)!==0,Pt=!Ke&&(l==="scroll"||l==="scrollend"),be=Ke?Ne!==null?Ne+"Capture":null:Ne;Ke=[];for(var ge=je,ve;ge!==null;){var De=ge;if(ve=De.stateNode,De=De.tag,De!==5&&De!==26&&De!==27||ve===null||be===null||(De=$l(ge,be),De!=null&&Ke.push(Ju(ge,De,ve))),Pt)break;ge=ge.return}0<Ke.length&&(Ne=new Se(Ne,Fe,null,x,Ee),Re.push({event:Ne,listeners:Ke}))}}if((d&7)===0){e:{if(Ne=l==="mouseover"||l==="pointerover",Se=l==="mouseout"||l==="pointerout",Ne&&x!==nu&&(Fe=x.relatedTarget||x.fromElement)&&(Rn(Fe)||Fe[An]))break e;if((Se||Ne)&&(Ne=Ee.window===Ee?Ee:(Ne=Ee.ownerDocument)?Ne.defaultView||Ne.parentWindow:window,Se?(Fe=x.relatedTarget||x.toElement,Se=je,Fe=Fe?Rn(Fe):null,Fe!==null&&(Pt=i(Fe),Ke=Fe.tag,Fe!==Pt||Ke!==5&&Ke!==27&&Ke!==6)&&(Fe=null)):(Se=null,Fe=je),Se!==Fe)){if(Ke=rx,De="onMouseLeave",be="onMouseEnter",ge="mouse",(l==="pointerout"||l==="pointerover")&&(Ke=xu,De="onPointerLeave",be="onPointerEnter",ge="pointer"),Pt=Se==null?Ne:Bl(Se),ve=Fe==null?Ne:Bl(Fe),Ne=new Ke(De,ge+"leave",Se,x,Ee),Ne.target=Pt,Ne.relatedTarget=ve,De=null,Rn(Ee)===je&&(Ke=new Ke(be,ge+"enter",Fe,x,Ee),Ke.target=ve,Ke.relatedTarget=Pt,De=Ke),Pt=De,Se&&Fe)t:{for(Ke=DR,be=Se,ge=Fe,ve=0,De=be;De;De=Ke(De))ve++;De=0;for(var He=ge;He;He=Ke(He))De++;for(;0<ve-De;)be=Ke(be),ve--;for(;0<De-ve;)ge=Ke(ge),De--;for(;ve--;){if(be===ge||ge!==null&&be===ge.alternate){Ke=be;break t}be=Ke(be),ge=Ke(ge)}Ke=null}else Ke=null;Se!==null&&h5(Re,Ne,Se,Ke,!1),Fe!==null&&Pt!==null&&h5(Re,Pt,Fe,Ke,!0)}}e:{if(Ne=je?Bl(je):window,Se=Ne.nodeName&&Ne.nodeName.toLowerCase(),Se==="select"||Se==="input"&&Ne.type==="file")var vt=Zt;else if(jx(Ne))if(wx)vt=Xa;else{vt=Wl;var $e=Nx}else Se=Ne.nodeName,!Se||Se.toLowerCase()!=="input"||Ne.type!=="checkbox"&&Ne.type!=="radio"?je&&au(je.elementType)&&(vt=Zt):vt=_x;if(vt&&(vt=vt(l,je))){bu(Re,vt,x,Ee);break e}$e&&$e(l,Ne,je),l==="focusout"&&je&&Ne.type==="number"&&je.memoizedProps.value!=null&&Jd(Ne,"number",Ne.value)}switch($e=je?Bl(je):window,l){case"focusin":(jx($e)||$e.contentEditable==="true")&&(Fn=$e,dc=je,Ii=null);break;case"focusout":Ii=dc=Fn=null;break;case"mousedown":_u=!0;break;case"contextmenu":case"mouseup":case"dragend":_u=!1,ku(Re,x,Ee);break;case"selectionchange":if(Nu)break;case"keydown":case"keyup":ku(Re,x,Ee)}var nt;if(fu)e:{switch(l){case"compositionstart":var xt="onCompositionStart";break e;case"compositionend":xt="onCompositionEnd";break e;case"compositionupdate":xt="onCompositionUpdate";break e}xt=void 0}else Pi?gu(l,x)&&(xt="onCompositionEnd"):l==="keydown"&&x.keyCode===229&&(xt="onCompositionStart");xt&&(px&&x.locale!=="ko"&&(Pi||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&Pi&&(nt=ou()):(Ka=Ee,lu="value"in Ka?Ka.value:Ka.textContent,Pi=!0)),$e=p0(je,xt),0<$e.length&&(xt=new mu(xt,l,null,x,Ee),Re.push({event:xt,listeners:$e}),nt?xt.data=nt:(nt=bx(x),nt!==null&&(xt.data=nt)))),(nt=fx?yx(l,x):vx(l,x))&&(xt=p0(je,"onBeforeInput"),0<xt.length&&($e=new mu("onBeforeInput","beforeinput",null,x,Ee),Re.push({event:$e,listeners:xt}),$e.data=nt)),CR(Re,l,je,x,Ee)}d5(Re,d)})}function Ju(l,d,x){return{instance:l,listener:d,currentTarget:x}}function p0(l,d){for(var x=d+"Capture",b=[];l!==null;){var D=l,P=D.stateNode;if(D=D.tag,D!==5&&D!==26&&D!==27||P===null||(D=$l(l,x),D!=null&&b.unshift(Ju(l,D,P)),D=$l(l,d),D!=null&&b.push(Ju(l,D,P))),l.tag===3)return b;l=l.return}return[]}function DR(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function h5(l,d,x,b,D){for(var P=d._reactName,ae=[];x!==null&&x!==b;){var ue=x,pe=ue.alternate,je=ue.stateNode;if(ue=ue.tag,pe!==null&&pe===b)break;ue!==5&&ue!==26&&ue!==27||je===null||(pe=je,D?(je=$l(x,P),je!=null&&ae.unshift(Ju(x,je,pe))):D||(je=$l(x,P),je!=null&&ae.push(Ju(x,je,pe)))),x=x.return}ae.length!==0&&l.push({event:d,listeners:ae})}var RR=/\r\n?/g,MR=/\u0000|\uFFFD/g;function m5(l){return(typeof l=="string"?l:""+l).replace(RR,`
`).replace(MR,"")}function x5(l,d){return d=m5(d),m5(l)===d}function Lt(l,d,x,b,D,P){switch(x){case"children":typeof b=="string"?d==="body"||d==="textarea"&&b===""||Ai(l,b):(typeof b=="number"||typeof b=="bigint")&&d!=="body"&&Ai(l,""+b);break;case"className":ec(l,"class",b);break;case"tabIndex":ec(l,"tabindex",b);break;case"dir":case"role":case"viewBox":case"width":case"height":ec(l,x,b);break;case"style":ru(l,b,P);break;case"data":if(d!=="object"){ec(l,"data",b);break}case"src":case"href":if(b===""&&(d!=="a"||x!=="href")){l.removeAttribute(x);break}if(b==null||typeof b=="function"||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(x);break}b=Il(""+b),l.setAttribute(x,b);break;case"action":case"formAction":if(typeof b=="function"){l.setAttribute(x,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof P=="function"&&(x==="formAction"?(d!=="input"&&Lt(l,d,"name",D.name,D,null),Lt(l,d,"formEncType",D.formEncType,D,null),Lt(l,d,"formMethod",D.formMethod,D,null),Lt(l,d,"formTarget",D.formTarget,D,null)):(Lt(l,d,"encType",D.encType,D,null),Lt(l,d,"method",D.method,D,null),Lt(l,d,"target",D.target,D,null)));if(b==null||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(x);break}b=Il(""+b),l.setAttribute(x,b);break;case"onClick":b!=null&&(l.onclick=Da);break;case"onScroll":b!=null&&ut("scroll",l);break;case"onScrollEnd":b!=null&&ut("scrollend",l);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(a(61));if(x=b.__html,x!=null){if(D.children!=null)throw Error(a(60));l.innerHTML=x}}break;case"multiple":l.multiple=b&&typeof b!="function"&&typeof b!="symbol";break;case"muted":l.muted=b&&typeof b!="function"&&typeof b!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(b==null||typeof b=="function"||typeof b=="boolean"||typeof b=="symbol"){l.removeAttribute("xlink:href");break}x=Il(""+b),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",x);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(x,""+b):l.removeAttribute(x);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":b&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(x,""):l.removeAttribute(x);break;case"capture":case"download":b===!0?l.setAttribute(x,""):b!==!1&&b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(x,b):l.removeAttribute(x);break;case"cols":case"rows":case"size":case"span":b!=null&&typeof b!="function"&&typeof b!="symbol"&&!isNaN(b)&&1<=b?l.setAttribute(x,b):l.removeAttribute(x);break;case"rowSpan":case"start":b==null||typeof b=="function"||typeof b=="symbol"||isNaN(b)?l.removeAttribute(x):l.setAttribute(x,b);break;case"popover":ut("beforetoggle",l),ut("toggle",l),Fl(l,"popover",b);break;case"xlinkActuate":Aa(l,"http://www.w3.org/1999/xlink","xlink:actuate",b);break;case"xlinkArcrole":Aa(l,"http://www.w3.org/1999/xlink","xlink:arcrole",b);break;case"xlinkRole":Aa(l,"http://www.w3.org/1999/xlink","xlink:role",b);break;case"xlinkShow":Aa(l,"http://www.w3.org/1999/xlink","xlink:show",b);break;case"xlinkTitle":Aa(l,"http://www.w3.org/1999/xlink","xlink:title",b);break;case"xlinkType":Aa(l,"http://www.w3.org/1999/xlink","xlink:type",b);break;case"xmlBase":Aa(l,"http://www.w3.org/XML/1998/namespace","xml:base",b);break;case"xmlLang":Aa(l,"http://www.w3.org/XML/1998/namespace","xml:lang",b);break;case"xmlSpace":Aa(l,"http://www.w3.org/XML/1998/namespace","xml:space",b);break;case"is":Fl(l,"is",b);break;case"innerText":case"textContent":break;default:(!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(x=Kp.get(x)||x,Fl(l,x,b))}}function Mb(l,d,x,b,D,P){switch(x){case"style":ru(l,b,P);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(a(61));if(x=b.__html,x!=null){if(D.children!=null)throw Error(a(60));l.innerHTML=x}}break;case"children":typeof b=="string"?Ai(l,b):(typeof b=="number"||typeof b=="bigint")&&Ai(l,""+b);break;case"onScroll":b!=null&&ut("scroll",l);break;case"onScrollEnd":b!=null&&ut("scrollend",l);break;case"onClick":b!=null&&(l.onclick=Da);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Km.hasOwnProperty(x))e:{if(x[0]==="o"&&x[1]==="n"&&(D=x.endsWith("Capture"),d=x.slice(2,D?x.length-7:void 0),P=l[$s]||null,P=P!=null?P[x]:null,typeof P=="function"&&l.removeEventListener(d,P,D),typeof b=="function")){typeof P!="function"&&P!==null&&(x in l?l[x]=null:l.hasAttribute(x)&&l.removeAttribute(x)),l.addEventListener(d,b,D);break e}x in l?l[x]=b:b===!0?l.setAttribute(x,""):Fl(l,x,b)}}}function Ws(l,d,x){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ut("error",l),ut("load",l);var b=!1,D=!1,P;for(P in x)if(x.hasOwnProperty(P)){var ae=x[P];if(ae!=null)switch(P){case"src":b=!0;break;case"srcSet":D=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,d));default:Lt(l,d,P,ae,x,null)}}D&&Lt(l,d,"srcSet",x.srcSet,x,null),b&&Lt(l,d,"src",x.src,x,null);return;case"input":ut("invalid",l);var ue=P=ae=D=null,pe=null,je=null;for(b in x)if(x.hasOwnProperty(b)){var Ee=x[b];if(Ee!=null)switch(b){case"name":D=Ee;break;case"type":ae=Ee;break;case"checked":pe=Ee;break;case"defaultChecked":je=Ee;break;case"value":P=Ee;break;case"defaultValue":ue=Ee;break;case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(a(137,d));break;default:Lt(l,d,b,Ee,x,null)}}Qd(l,P,ue,pe,je,ae,D,!1);return;case"select":ut("invalid",l),b=ae=P=null;for(D in x)if(x.hasOwnProperty(D)&&(ue=x[D],ue!=null))switch(D){case"value":P=ue;break;case"defaultValue":ae=ue;break;case"multiple":b=ue;default:Lt(l,d,D,ue,x,null)}d=P,x=ae,l.multiple=!!b,d!=null?Ei(l,!!b,d,!1):x!=null&&Ei(l,!!b,x,!0);return;case"textarea":ut("invalid",l),P=D=b=null;for(ae in x)if(x.hasOwnProperty(ae)&&(ue=x[ae],ue!=null))switch(ae){case"value":b=ue;break;case"defaultValue":D=ue;break;case"children":P=ue;break;case"dangerouslySetInnerHTML":if(ue!=null)throw Error(a(91));break;default:Lt(l,d,ae,ue,x,null)}tu(l,b,D,P);return;case"option":for(pe in x)if(x.hasOwnProperty(pe)&&(b=x[pe],b!=null))switch(pe){case"selected":l.selected=b&&typeof b!="function"&&typeof b!="symbol";break;default:Lt(l,d,pe,b,x,null)}return;case"dialog":ut("beforetoggle",l),ut("toggle",l),ut("cancel",l),ut("close",l);break;case"iframe":case"object":ut("load",l);break;case"video":case"audio":for(b=0;b<Qu.length;b++)ut(Qu[b],l);break;case"image":ut("error",l),ut("load",l);break;case"details":ut("toggle",l);break;case"embed":case"source":case"link":ut("error",l),ut("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(je in x)if(x.hasOwnProperty(je)&&(b=x[je],b!=null))switch(je){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,d));default:Lt(l,d,je,b,x,null)}return;default:if(au(d)){for(Ee in x)x.hasOwnProperty(Ee)&&(b=x[Ee],b!==void 0&&Mb(l,d,Ee,b,x,void 0));return}}for(ue in x)x.hasOwnProperty(ue)&&(b=x[ue],b!=null&&Lt(l,d,ue,b,x,null))}function OR(l,d,x,b){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var D=null,P=null,ae=null,ue=null,pe=null,je=null,Ee=null;for(Se in x){var Re=x[Se];if(x.hasOwnProperty(Se)&&Re!=null)switch(Se){case"checked":break;case"value":break;case"defaultValue":pe=Re;default:b.hasOwnProperty(Se)||Lt(l,d,Se,null,b,Re)}}for(var Ne in b){var Se=b[Ne];if(Re=x[Ne],b.hasOwnProperty(Ne)&&(Se!=null||Re!=null))switch(Ne){case"type":P=Se;break;case"name":D=Se;break;case"checked":je=Se;break;case"defaultChecked":Ee=Se;break;case"value":ae=Se;break;case"defaultValue":ue=Se;break;case"children":case"dangerouslySetInnerHTML":if(Se!=null)throw Error(a(137,d));break;default:Se!==Re&&Lt(l,d,Ne,Se,b,Re)}}tc(l,ae,ue,pe,je,Ee,P,D);return;case"select":Se=ae=ue=Ne=null;for(P in x)if(pe=x[P],x.hasOwnProperty(P)&&pe!=null)switch(P){case"value":break;case"multiple":Se=pe;default:b.hasOwnProperty(P)||Lt(l,d,P,null,b,pe)}for(D in b)if(P=b[D],pe=x[D],b.hasOwnProperty(D)&&(P!=null||pe!=null))switch(D){case"value":Ne=P;break;case"defaultValue":ue=P;break;case"multiple":ae=P;default:P!==pe&&Lt(l,d,D,P,b,pe)}d=ue,x=ae,b=Se,Ne!=null?Ei(l,!!x,Ne,!1):!!b!=!!x&&(d!=null?Ei(l,!!x,d,!0):Ei(l,!!x,x?[]:"",!1));return;case"textarea":Se=Ne=null;for(ue in x)if(D=x[ue],x.hasOwnProperty(ue)&&D!=null&&!b.hasOwnProperty(ue))switch(ue){case"value":break;case"children":break;default:Lt(l,d,ue,null,b,D)}for(ae in b)if(D=b[ae],P=x[ae],b.hasOwnProperty(ae)&&(D!=null||P!=null))switch(ae){case"value":Ne=D;break;case"defaultValue":Se=D;break;case"children":break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(a(91));break;default:D!==P&&Lt(l,d,ae,D,b,P)}eu(l,Ne,Se);return;case"option":for(var Fe in x)if(Ne=x[Fe],x.hasOwnProperty(Fe)&&Ne!=null&&!b.hasOwnProperty(Fe))switch(Fe){case"selected":l.selected=!1;break;default:Lt(l,d,Fe,null,b,Ne)}for(pe in b)if(Ne=b[pe],Se=x[pe],b.hasOwnProperty(pe)&&Ne!==Se&&(Ne!=null||Se!=null))switch(pe){case"selected":l.selected=Ne&&typeof Ne!="function"&&typeof Ne!="symbol";break;default:Lt(l,d,pe,Ne,b,Se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ke in x)Ne=x[Ke],x.hasOwnProperty(Ke)&&Ne!=null&&!b.hasOwnProperty(Ke)&&Lt(l,d,Ke,null,b,Ne);for(je in b)if(Ne=b[je],Se=x[je],b.hasOwnProperty(je)&&Ne!==Se&&(Ne!=null||Se!=null))switch(je){case"children":case"dangerouslySetInnerHTML":if(Ne!=null)throw Error(a(137,d));break;default:Lt(l,d,je,Ne,b,Se)}return;default:if(au(d)){for(var Pt in x)Ne=x[Pt],x.hasOwnProperty(Pt)&&Ne!==void 0&&!b.hasOwnProperty(Pt)&&Mb(l,d,Pt,void 0,b,Ne);for(Ee in b)Ne=b[Ee],Se=x[Ee],!b.hasOwnProperty(Ee)||Ne===Se||Ne===void 0&&Se===void 0||Mb(l,d,Ee,Ne,b,Se);return}}for(var be in x)Ne=x[be],x.hasOwnProperty(be)&&Ne!=null&&!b.hasOwnProperty(be)&&Lt(l,d,be,null,b,Ne);for(Re in b)Ne=b[Re],Se=x[Re],!b.hasOwnProperty(Re)||Ne===Se||Ne==null&&Se==null||Lt(l,d,Re,Ne,b,Se)}function f5(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function LR(){if(typeof performance.getEntriesByType=="function"){for(var l=0,d=0,x=performance.getEntriesByType("resource"),b=0;b<x.length;b++){var D=x[b],P=D.transferSize,ae=D.initiatorType,ue=D.duration;if(P&&ue&&f5(ae)){for(ae=0,ue=D.responseEnd,b+=1;b<x.length;b++){var pe=x[b],je=pe.startTime;if(je>ue)break;var Ee=pe.transferSize,Re=pe.initiatorType;Ee&&f5(Re)&&(pe=pe.responseEnd,ae+=Ee*(pe<ue?1:(ue-je)/(pe-je)))}if(--b,d+=8*(P+ae)/(D.duration/1e3),l++,10<l)break}}if(0<l)return d/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var Ob=null,Lb=null;function g0(l){return l.nodeType===9?l:l.ownerDocument}function p5(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function g5(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function Pb(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Bb=null;function PR(){var l=window.event;return l&&l.type==="popstate"?l===Bb?!1:(Bb=l,!0):(Bb=null,!1)}var b5=typeof setTimeout=="function"?setTimeout:void 0,BR=typeof clearTimeout=="function"?clearTimeout:void 0,y5=typeof Promise=="function"?Promise:void 0,FR=typeof queueMicrotask=="function"?queueMicrotask:typeof y5<"u"?function(l){return y5.resolve(null).then(l).catch(zR)}:b5;function zR(l){setTimeout(function(){throw l})}function al(l){return l==="head"}function v5(l,d){var x=d,b=0;do{var D=x.nextSibling;if(l.removeChild(x),D&&D.nodeType===8)if(x=D.data,x==="/$"||x==="/&"){if(b===0){l.removeChild(D),Pc(d);return}b--}else if(x==="$"||x==="$?"||x==="$~"||x==="$!"||x==="&")b++;else if(x==="html")eh(l.ownerDocument.documentElement);else if(x==="head"){x=l.ownerDocument.head,eh(x);for(var P=x.firstChild;P;){var ae=P.nextSibling,ue=P.nodeName;P[Dn]||ue==="SCRIPT"||ue==="STYLE"||ue==="LINK"&&P.rel.toLowerCase()==="stylesheet"||x.removeChild(P),P=ae}}else x==="body"&&eh(l.ownerDocument.body);x=D}while(x);Pc(d)}function j5(l,d){var x=l;l=0;do{var b=x.nextSibling;if(x.nodeType===1?d?(x._stashedDisplay=x.style.display,x.style.display="none"):(x.style.display=x._stashedDisplay||"",x.getAttribute("style")===""&&x.removeAttribute("style")):x.nodeType===3&&(d?(x._stashedText=x.nodeValue,x.nodeValue=""):x.nodeValue=x._stashedText||""),b&&b.nodeType===8)if(x=b.data,x==="/$"){if(l===0)break;l--}else x!=="$"&&x!=="$?"&&x!=="$~"&&x!=="$!"||l++;x=b}while(x)}function Fb(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var x=d;switch(d=d.nextSibling,x.nodeName){case"HTML":case"HEAD":case"BODY":Fb(x),Yd(x);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(x.rel.toLowerCase()==="stylesheet")continue}l.removeChild(x)}}function IR(l,d,x,b){for(;l.nodeType===1;){var D=x;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!b&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(b){if(!l[Dn])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(P=l.getAttribute("rel"),P==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(P!==D.rel||l.getAttribute("href")!==(D.href==null||D.href===""?null:D.href)||l.getAttribute("crossorigin")!==(D.crossOrigin==null?null:D.crossOrigin)||l.getAttribute("title")!==(D.title==null?null:D.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(P=l.getAttribute("src"),(P!==(D.src==null?null:D.src)||l.getAttribute("type")!==(D.type==null?null:D.type)||l.getAttribute("crossorigin")!==(D.crossOrigin==null?null:D.crossOrigin))&&P&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var P=D.name==null?null:""+D.name;if(D.type==="hidden"&&l.getAttribute("name")===P)return l}else return l;if(l=ca(l.nextSibling),l===null)break}return null}function $R(l,d,x){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!x||(l=ca(l.nextSibling),l===null))return null;return l}function w5(l,d){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!d||(l=ca(l.nextSibling),l===null))return null;return l}function zb(l){return l.data==="$?"||l.data==="$~"}function Ib(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function UR(l,d){var x=l.ownerDocument;if(l.data==="$~")l._reactRetry=d;else if(l.data!=="$?"||x.readyState!=="loading")d();else{var b=function(){d(),x.removeEventListener("DOMContentLoaded",b)};x.addEventListener("DOMContentLoaded",b),l._reactRetry=b}}function ca(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"||d==="F!"||d==="F")break;if(d==="/$"||d==="/&")return null}}return l}var $b=null;function N5(l){l=l.nextSibling;for(var d=0;l;){if(l.nodeType===8){var x=l.data;if(x==="/$"||x==="/&"){if(d===0)return ca(l.nextSibling);d--}else x!=="$"&&x!=="$!"&&x!=="$?"&&x!=="$~"&&x!=="&"||d++}l=l.nextSibling}return null}function _5(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var x=l.data;if(x==="$"||x==="$!"||x==="$?"||x==="$~"||x==="&"){if(d===0)return l;d--}else x!=="/$"&&x!=="/&"||d++}l=l.previousSibling}return null}function k5(l,d,x){switch(d=g0(x),l){case"html":if(l=d.documentElement,!l)throw Error(a(452));return l;case"head":if(l=d.head,!l)throw Error(a(453));return l;case"body":if(l=d.body,!l)throw Error(a(454));return l;default:throw Error(a(451))}}function eh(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);Yd(l)}var da=new Map,S5=new Set;function b0(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var ti=se.d;se.d={f:VR,r:HR,D:qR,C:WR,L:YR,m:GR,X:XR,S:KR,M:ZR};function VR(){var l=ti.f(),d=c0();return l||d}function HR(l){var d=Mn(l);d!==null&&d.tag===5&&d.type==="form"?V2(d):ti.r(l)}var Mc=typeof document>"u"?null:document;function C5(l,d,x){var b=Mc;if(b&&typeof d=="string"&&d){var D=vr(d);D='link[rel="'+l+'"][href="'+D+'"]',typeof x=="string"&&(D+='[crossorigin="'+x+'"]'),S5.has(D)||(S5.add(D),l={rel:l,crossOrigin:x,href:d},b.querySelector(D)===null&&(d=b.createElement("link"),Ws(d,"link",l),us(d),b.head.appendChild(d)))}}function qR(l){ti.D(l),C5("dns-prefetch",l,null)}function WR(l,d){ti.C(l,d),C5("preconnect",l,d)}function YR(l,d,x){ti.L(l,d,x);var b=Mc;if(b&&l&&d){var D='link[rel="preload"][as="'+vr(d)+'"]';d==="image"&&x&&x.imageSrcSet?(D+='[imagesrcset="'+vr(x.imageSrcSet)+'"]',typeof x.imageSizes=="string"&&(D+='[imagesizes="'+vr(x.imageSizes)+'"]')):D+='[href="'+vr(l)+'"]';var P=D;switch(d){case"style":P=Oc(l);break;case"script":P=Lc(l)}da.has(P)||(l=f({rel:"preload",href:d==="image"&&x&&x.imageSrcSet?void 0:l,as:d},x),da.set(P,l),b.querySelector(D)!==null||d==="style"&&b.querySelector(th(P))||d==="script"&&b.querySelector(sh(P))||(d=b.createElement("link"),Ws(d,"link",l),us(d),b.head.appendChild(d)))}}function GR(l,d){ti.m(l,d);var x=Mc;if(x&&l){var b=d&&typeof d.as=="string"?d.as:"script",D='link[rel="modulepreload"][as="'+vr(b)+'"][href="'+vr(l)+'"]',P=D;switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":P=Lc(l)}if(!da.has(P)&&(l=f({rel:"modulepreload",href:l},d),da.set(P,l),x.querySelector(D)===null)){switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(x.querySelector(sh(P)))return}b=x.createElement("link"),Ws(b,"link",l),us(b),x.head.appendChild(b)}}}function KR(l,d,x){ti.S(l,d,x);var b=Mc;if(b&&l){var D=Ti(b).hoistableStyles,P=Oc(l);d=d||"default";var ae=D.get(P);if(!ae){var ue={loading:0,preload:null};if(ae=b.querySelector(th(P)))ue.loading=5;else{l=f({rel:"stylesheet",href:l,"data-precedence":d},x),(x=da.get(P))&&Ub(l,x);var pe=ae=b.createElement("link");us(pe),Ws(pe,"link",l),pe._p=new Promise(function(je,Ee){pe.onload=je,pe.onerror=Ee}),pe.addEventListener("load",function(){ue.loading|=1}),pe.addEventListener("error",function(){ue.loading|=2}),ue.loading|=4,y0(ae,d,b)}ae={type:"stylesheet",instance:ae,count:1,state:ue},D.set(P,ae)}}}function XR(l,d){ti.X(l,d);var x=Mc;if(x&&l){var b=Ti(x).hoistableScripts,D=Lc(l),P=b.get(D);P||(P=x.querySelector(sh(D)),P||(l=f({src:l,async:!0},d),(d=da.get(D))&&Vb(l,d),P=x.createElement("script"),us(P),Ws(P,"link",l),x.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},b.set(D,P))}}function ZR(l,d){ti.M(l,d);var x=Mc;if(x&&l){var b=Ti(x).hoistableScripts,D=Lc(l),P=b.get(D);P||(P=x.querySelector(sh(D)),P||(l=f({src:l,async:!0,type:"module"},d),(d=da.get(D))&&Vb(l,d),P=x.createElement("script"),us(P),Ws(P,"link",l),x.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},b.set(D,P))}}function T5(l,d,x,b){var D=(D=de.current)?b0(D):null;if(!D)throw Error(a(446));switch(l){case"meta":case"title":return null;case"style":return typeof x.precedence=="string"&&typeof x.href=="string"?(d=Oc(x.href),x=Ti(D).hoistableStyles,b=x.get(d),b||(b={type:"style",instance:null,count:0,state:null},x.set(d,b)),b):{type:"void",instance:null,count:0,state:null};case"link":if(x.rel==="stylesheet"&&typeof x.href=="string"&&typeof x.precedence=="string"){l=Oc(x.href);var P=Ti(D).hoistableStyles,ae=P.get(l);if(ae||(D=D.ownerDocument||D,ae={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},P.set(l,ae),(P=D.querySelector(th(l)))&&!P._p&&(ae.instance=P,ae.state.loading=5),da.has(l)||(x={rel:"preload",as:"style",href:x.href,crossOrigin:x.crossOrigin,integrity:x.integrity,media:x.media,hrefLang:x.hrefLang,referrerPolicy:x.referrerPolicy},da.set(l,x),P||QR(D,l,x,ae.state))),d&&b===null)throw Error(a(528,""));return ae}if(d&&b!==null)throw Error(a(529,""));return null;case"script":return d=x.async,x=x.src,typeof x=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=Lc(x),x=Ti(D).hoistableScripts,b=x.get(d),b||(b={type:"script",instance:null,count:0,state:null},x.set(d,b)),b):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,l))}}function Oc(l){return'href="'+vr(l)+'"'}function th(l){return'link[rel="stylesheet"]['+l+"]"}function E5(l){return f({},l,{"data-precedence":l.precedence,precedence:null})}function QR(l,d,x,b){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?b.loading=1:(d=l.createElement("link"),b.preload=d,d.addEventListener("load",function(){return b.loading|=1}),d.addEventListener("error",function(){return b.loading|=2}),Ws(d,"link",x),us(d),l.head.appendChild(d))}function Lc(l){return'[src="'+vr(l)+'"]'}function sh(l){return"script[async]"+l}function A5(l,d,x){if(d.count++,d.instance===null)switch(d.type){case"style":var b=l.querySelector('style[data-href~="'+vr(x.href)+'"]');if(b)return d.instance=b,us(b),b;var D=f({},x,{"data-href":x.href,"data-precedence":x.precedence,href:null,precedence:null});return b=(l.ownerDocument||l).createElement("style"),us(b),Ws(b,"style",D),y0(b,x.precedence,l),d.instance=b;case"stylesheet":D=Oc(x.href);var P=l.querySelector(th(D));if(P)return d.state.loading|=4,d.instance=P,us(P),P;b=E5(x),(D=da.get(D))&&Ub(b,D),P=(l.ownerDocument||l).createElement("link"),us(P);var ae=P;return ae._p=new Promise(function(ue,pe){ae.onload=ue,ae.onerror=pe}),Ws(P,"link",b),d.state.loading|=4,y0(P,x.precedence,l),d.instance=P;case"script":return P=Lc(x.src),(D=l.querySelector(sh(P)))?(d.instance=D,us(D),D):(b=x,(D=da.get(P))&&(b=f({},x),Vb(b,D)),l=l.ownerDocument||l,D=l.createElement("script"),us(D),Ws(D,"link",b),l.head.appendChild(D),d.instance=D);case"void":return null;default:throw Error(a(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(b=d.instance,d.state.loading|=4,y0(b,x.precedence,l));return d.instance}function y0(l,d,x){for(var b=x.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),D=b.length?b[b.length-1]:null,P=D,ae=0;ae<b.length;ae++){var ue=b[ae];if(ue.dataset.precedence===d)P=ue;else if(P!==D)break}P?P.parentNode.insertBefore(l,P.nextSibling):(d=x.nodeType===9?x.head:x,d.insertBefore(l,d.firstChild))}function Ub(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function Vb(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var v0=null;function D5(l,d,x){if(v0===null){var b=new Map,D=v0=new Map;D.set(x,b)}else D=v0,b=D.get(x),b||(b=new Map,D.set(x,b));if(b.has(l))return b;for(b.set(l,null),x=x.getElementsByTagName(l),D=0;D<x.length;D++){var P=x[D];if(!(P[Dn]||P[Rs]||l==="link"&&P.getAttribute("rel")==="stylesheet")&&P.namespaceURI!=="http://www.w3.org/2000/svg"){var ae=P.getAttribute(d)||"";ae=l+ae;var ue=b.get(ae);ue?ue.push(P):b.set(ae,[P])}}return b}function R5(l,d,x){l=l.ownerDocument||l,l.head.insertBefore(x,d==="title"?l.querySelector("head > title"):null)}function JR(l,d,x){if(x===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return l=d.disabled,typeof d.precedence=="string"&&l==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function M5(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function eM(l,d,x,b){if(x.type==="stylesheet"&&(typeof b.media!="string"||matchMedia(b.media).matches!==!1)&&(x.state.loading&4)===0){if(x.instance===null){var D=Oc(b.href),P=d.querySelector(th(D));if(P){d=P._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(l.count++,l=j0.bind(l),d.then(l,l)),x.state.loading|=4,x.instance=P,us(P);return}P=d.ownerDocument||d,b=E5(b),(D=da.get(D))&&Ub(b,D),P=P.createElement("link"),us(P);var ae=P;ae._p=new Promise(function(ue,pe){ae.onload=ue,ae.onerror=pe}),Ws(P,"link",b),x.instance=P}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(x,d),(d=x.state.preload)&&(x.state.loading&3)===0&&(l.count++,x=j0.bind(l),d.addEventListener("load",x),d.addEventListener("error",x))}}var Hb=0;function tM(l,d){return l.stylesheets&&l.count===0&&N0(l,l.stylesheets),0<l.count||0<l.imgCount?function(x){var b=setTimeout(function(){if(l.stylesheets&&N0(l,l.stylesheets),l.unsuspend){var P=l.unsuspend;l.unsuspend=null,P()}},6e4+d);0<l.imgBytes&&Hb===0&&(Hb=62500*LR());var D=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&N0(l,l.stylesheets),l.unsuspend)){var P=l.unsuspend;l.unsuspend=null,P()}},(l.imgBytes>Hb?50:800)+d);return l.unsuspend=x,function(){l.unsuspend=null,clearTimeout(b),clearTimeout(D)}}:null}function j0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)N0(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var w0=null;function N0(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,w0=new Map,d.forEach(sM,l),w0=null,j0.call(l))}function sM(l,d){if(!(d.state.loading&4)){var x=w0.get(l);if(x)var b=x.get(null);else{x=new Map,w0.set(l,x);for(var D=l.querySelectorAll("link[data-precedence],style[data-precedence]"),P=0;P<D.length;P++){var ae=D[P];(ae.nodeName==="LINK"||ae.getAttribute("media")!=="not all")&&(x.set(ae.dataset.precedence,ae),b=ae)}b&&x.set(null,b)}D=d.instance,ae=D.getAttribute("data-precedence"),P=x.get(ae)||b,P===b&&x.set(null,D),x.set(ae,D),this.count++,b=j0.bind(this),D.addEventListener("load",b),D.addEventListener("error",b),P?P.parentNode.insertBefore(D,P.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(D,l.firstChild)),d.state.loading|=4}}var rh={$$typeof:k,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function rM(l,d,x,b,D,P,ae,ue,pe){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$d(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$d(0),this.hiddenUpdates=$d(null),this.identifierPrefix=b,this.onUncaughtError=D,this.onCaughtError=P,this.onRecoverableError=ae,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=pe,this.incompleteTransitions=new Map}function O5(l,d,x,b,D,P,ae,ue,pe,je,Ee,Re){return l=new rM(l,d,x,ae,pe,je,Ee,Re,ue),d=1,P===!0&&(d|=24),P=Vr(3,null,null,d),l.current=P,P.stateNode=l,d=Ng(),d.refCount++,l.pooledCache=d,d.refCount++,P.memoizedState={element:b,isDehydrated:x,cache:d},Cg(P),l}function L5(l){return l?(l=hc,l):hc}function P5(l,d,x,b,D,P){D=L5(D),b.context===null?b.context=D:b.pendingContext=D,b=Yi(d),b.payload={element:x},P=P===void 0?null:P,P!==null&&(b.callback=P),x=Gi(l,b,d),x!==null&&(kr(x,l,d),Lu(x,l,d))}function B5(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var x=l.retryLane;l.retryLane=x!==0&&x<d?x:d}}function qb(l,d){B5(l,d),(l=l.alternate)&&B5(l,d)}function F5(l){if(l.tag===13||l.tag===31){var d=Kl(l,67108864);d!==null&&kr(d,l,67108864),qb(l,67108864)}}function z5(l){if(l.tag===13||l.tag===31){var d=Gr();d=Pl(d);var x=Kl(l,d);x!==null&&kr(x,l,d),qb(l,d)}}var _0=!0;function aM(l,d,x,b){var D=J.T;J.T=null;var P=se.p;try{se.p=2,Wb(l,d,x,b)}finally{se.p=P,J.T=D}}function nM(l,d,x,b){var D=J.T;J.T=null;var P=se.p;try{se.p=8,Wb(l,d,x,b)}finally{se.p=P,J.T=D}}function Wb(l,d,x,b){if(_0){var D=Yb(b);if(D===null)Rb(l,d,b,k0,x),$5(l,b);else if(lM(D,l,d,x,b))b.stopPropagation();else if($5(l,b),d&4&&-1<iM.indexOf(l)){for(;D!==null;){var P=Mn(D);if(P!==null)switch(P.tag){case 3:if(P=P.stateNode,P.current.memoizedState.isDehydrated){var ae=hr(P.pendingLanes);if(ae!==0){var ue=P;for(ue.pendingLanes|=2,ue.entangledLanes|=2;ae;){var pe=1<<31-zt(ae);ue.entanglements[1]|=pe,ae&=~pe}tn(P),(Nt&6)===0&&(l0=Ce()+500,Zu(0))}}break;case 31:case 13:ue=Kl(P,2),ue!==null&&kr(ue,P,2),c0(),qb(P,2)}if(P=Yb(b),P===null&&Rb(l,d,b,k0,x),P===D)break;D=P}D!==null&&b.stopPropagation()}else Rb(l,d,b,null,x)}}function Yb(l){return l=sc(l),Gb(l)}var k0=null;function Gb(l){if(k0=null,l=Rn(l),l!==null){var d=i(l);if(d===null)l=null;else{var x=d.tag;if(x===13){if(l=o(d),l!==null)return l;l=null}else if(x===31){if(l=c(d),l!==null)return l;l=null}else if(x===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return k0=l,null}function I5(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Te()){case Be:return 2;case ze:return 8;case We:case Ds:return 32;case Ur:return 268435456;default:return 32}default:return 32}}var Kb=!1,nl=null,il=null,ll=null,ah=new Map,nh=new Map,ol=[],iM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $5(l,d){switch(l){case"focusin":case"focusout":nl=null;break;case"dragenter":case"dragleave":il=null;break;case"mouseover":case"mouseout":ll=null;break;case"pointerover":case"pointerout":ah.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":nh.delete(d.pointerId)}}function ih(l,d,x,b,D,P){return l===null||l.nativeEvent!==P?(l={blockedOn:d,domEventName:x,eventSystemFlags:b,nativeEvent:P,targetContainers:[D]},d!==null&&(d=Mn(d),d!==null&&F5(d)),l):(l.eventSystemFlags|=b,d=l.targetContainers,D!==null&&d.indexOf(D)===-1&&d.push(D),l)}function lM(l,d,x,b,D){switch(d){case"focusin":return nl=ih(nl,l,d,x,b,D),!0;case"dragenter":return il=ih(il,l,d,x,b,D),!0;case"mouseover":return ll=ih(ll,l,d,x,b,D),!0;case"pointerover":var P=D.pointerId;return ah.set(P,ih(ah.get(P)||null,l,d,x,b,D)),!0;case"gotpointercapture":return P=D.pointerId,nh.set(P,ih(nh.get(P)||null,l,d,x,b,D)),!0}return!1}function U5(l){var d=Rn(l.target);if(d!==null){var x=i(d);if(x!==null){if(d=x.tag,d===13){if(d=o(x),d!==null){l.blockedOn=d,Jo(l.priority,function(){z5(x)});return}}else if(d===31){if(d=c(x),d!==null){l.blockedOn=d,Jo(l.priority,function(){z5(x)});return}}else if(d===3&&x.stateNode.current.memoizedState.isDehydrated){l.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}l.blockedOn=null}function S0(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var x=Yb(l.nativeEvent);if(x===null){x=l.nativeEvent;var b=new x.constructor(x.type,x);nu=b,x.target.dispatchEvent(b),nu=null}else return d=Mn(x),d!==null&&F5(d),l.blockedOn=x,!1;d.shift()}return!0}function V5(l,d,x){S0(l)&&x.delete(d)}function oM(){Kb=!1,nl!==null&&S0(nl)&&(nl=null),il!==null&&S0(il)&&(il=null),ll!==null&&S0(ll)&&(ll=null),ah.forEach(V5),nh.forEach(V5)}function C0(l,d){l.blockedOn===d&&(l.blockedOn=null,Kb||(Kb=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,oM)))}var T0=null;function H5(l){T0!==l&&(T0=l,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){T0===l&&(T0=null);for(var d=0;d<l.length;d+=3){var x=l[d],b=l[d+1],D=l[d+2];if(typeof b!="function"){if(Gb(b||x)===null)continue;break}var P=Mn(x);P!==null&&(l.splice(d,3),d-=3,Yg(P,{pending:!0,data:D,method:x.method,action:b},b,D))}}))}function Pc(l){function d(pe){return C0(pe,l)}nl!==null&&C0(nl,l),il!==null&&C0(il,l),ll!==null&&C0(ll,l),ah.forEach(d),nh.forEach(d);for(var x=0;x<ol.length;x++){var b=ol[x];b.blockedOn===l&&(b.blockedOn=null)}for(;0<ol.length&&(x=ol[0],x.blockedOn===null);)U5(x),x.blockedOn===null&&ol.shift();if(x=(l.ownerDocument||l).$$reactFormReplay,x!=null)for(b=0;b<x.length;b+=3){var D=x[b],P=x[b+1],ae=D[$s]||null;if(typeof P=="function")ae||H5(x);else if(ae){var ue=null;if(P&&P.hasAttribute("formAction")){if(D=P,ae=P[$s]||null)ue=ae.formAction;else if(Gb(D)!==null)continue}else ue=ae.action;typeof ue=="function"?x[b+1]=ue:(x.splice(b,3),b-=3),H5(x)}}}function q5(){function l(P){P.canIntercept&&P.info==="react-transition"&&P.intercept({handler:function(){return new Promise(function(ae){return D=ae})},focusReset:"manual",scroll:"manual"})}function d(){D!==null&&(D(),D=null),b||setTimeout(x,20)}function x(){if(!b&&!navigation.transition){var P=navigation.currentEntry;P&&P.url!=null&&navigation.navigate(P.url,{state:P.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var b=!1,D=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",d),navigation.addEventListener("navigateerror",d),setTimeout(x,100),function(){b=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",d),navigation.removeEventListener("navigateerror",d),D!==null&&(D(),D=null)}}}function Xb(l){this._internalRoot=l}E0.prototype.render=Xb.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(a(409));var x=d.current,b=Gr();P5(x,b,l,d,null,null)},E0.prototype.unmount=Xb.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;P5(l.current,2,null,l,null,null),c0(),d[An]=null}};function E0(l){this._internalRoot=l}E0.prototype.unstable_scheduleHydration=function(l){if(l){var d=qd();l={blockedOn:null,target:l,priority:d};for(var x=0;x<ol.length&&d!==0&&d<ol[x].priority;x++);ol.splice(x,0,l),x===0&&U5(l)}};var W5=t.version;if(W5!=="19.2.0")throw Error(a(527,W5,"19.2.0"));se.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(a(188)):(l=Object.keys(l).join(","),Error(a(268,l)));return l=h(d),l=l!==null?m(l):null,l=l===null?null:l.stateNode,l};var cM={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var A0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!A0.isDisabled&&A0.supportsFiber)try{_t=A0.inject(cM),ds=A0}catch{}}return oh.createRoot=function(l,d){if(!n(l))throw Error(a(299));var x=!1,b="",D=J2,P=e_,ae=t_;return d!=null&&(d.unstable_strictMode===!0&&(x=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onUncaughtError!==void 0&&(D=d.onUncaughtError),d.onCaughtError!==void 0&&(P=d.onCaughtError),d.onRecoverableError!==void 0&&(ae=d.onRecoverableError)),d=O5(l,1,!1,null,null,x,b,null,D,P,ae,q5),l[An]=d.current,Db(l),new Xb(d)},oh.hydrateRoot=function(l,d,x){if(!n(l))throw Error(a(299));var b=!1,D="",P=J2,ae=e_,ue=t_,pe=null;return x!=null&&(x.unstable_strictMode===!0&&(b=!0),x.identifierPrefix!==void 0&&(D=x.identifierPrefix),x.onUncaughtError!==void 0&&(P=x.onUncaughtError),x.onCaughtError!==void 0&&(ae=x.onCaughtError),x.onRecoverableError!==void 0&&(ue=x.onRecoverableError),x.formState!==void 0&&(pe=x.formState)),d=O5(l,1,!0,d,x??null,b,D,pe,P,ae,ue,q5),d.context=L5(null),x=d.current,b=Gr(),b=Pl(b),D=Yi(b),D.callback=null,Gi(x,D,b),x=b,d.current.lanes=x,Vt(d,x),tn(d),l[An]=d.current,Db(l),new E0(d)},oh.version="19.2.0",oh}var s4;function vM(){if(s4)return Jb.exports;s4=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Jb.exports=yM(),Jb.exports}var jM=vM();/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var r4="popstate";function wM(s={}){function t(a,n){let{pathname:i,search:o,hash:c}=a.location;return $j("",{pathname:i,search:o,hash:c},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(a,n){return typeof n=="string"?n:Jh(n)}return _M(t,r,null,s)}function Xt(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function Va(s,t){if(!s){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function NM(){return Math.random().toString(36).substring(2,10)}function a4(s,t){return{usr:s.state,key:s.key,idx:t}}function $j(s,t,r=null,a){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof t=="string"?Dd(t):t,state:r,key:t&&t.key||a||NM()}}function Jh({pathname:s="/",search:t="",hash:r=""}){return t&&t!=="?"&&(s+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(s+=r.charAt(0)==="#"?r:"#"+r),s}function Dd(s){let t={};if(s){let r=s.indexOf("#");r>=0&&(t.hash=s.substring(r),s=s.substring(0,r));let a=s.indexOf("?");a>=0&&(t.search=s.substring(a),s=s.substring(0,a)),s&&(t.pathname=s)}return t}function _M(s,t,r,a={}){let{window:n=document.defaultView,v5Compat:i=!1}=a,o=n.history,c="POP",u=null,h=m();h==null&&(h=0,o.replaceState({...o.state,idx:h},""));function m(){return(o.state||{idx:null}).idx}function f(){c="POP";let y=m(),N=y==null?null:y-h;h=y,u&&u({action:c,location:v.location,delta:N})}function p(y,N){c="PUSH";let S=$j(v.location,y,N);h=m()+1;let k=a4(S,h),_=v.createHref(S);try{o.pushState(k,"",_)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;n.location.assign(_)}i&&u&&u({action:c,location:v.location,delta:1})}function j(y,N){c="REPLACE";let S=$j(v.location,y,N);h=m();let k=a4(S,h),_=v.createHref(S);o.replaceState(k,"",_),i&&u&&u({action:c,location:v.location,delta:0})}function g(y){return kM(y)}let v={get action(){return c},get location(){return s(n,o)},listen(y){if(u)throw new Error("A history only accepts one active listener");return n.addEventListener(r4,f),u=y,()=>{n.removeEventListener(r4,f),u=null}},createHref(y){return t(n,y)},createURL:g,encodeLocation(y){let N=g(y);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:p,replace:j,go(y){return o.go(y)}};return v}function kM(s,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Xt(r,"No window.location.(origin|href) available to create URL");let a=typeof s=="string"?s:Jh(s);return a=a.replace(/ $/,"%20"),!t&&a.startsWith("//")&&(a=r+a),new URL(a,r)}function uT(s,t,r="/"){return SM(s,t,r,!1)}function SM(s,t,r,a){let n=typeof t=="string"?Dd(t):t,i=pi(n.pathname||"/",r);if(i==null)return null;let o=hT(s);CM(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let h=FM(i);c=PM(o[u],h,a)}return c}function hT(s,t=[],r=[],a="",n=!1){let i=(o,c,u=n,h)=>{let m={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(a)&&u)return;Xt(m.relativePath.startsWith(a),`Absolute route path "${m.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(a.length)}let f=xi([a,m.relativePath]),p=r.concat(m);o.children&&o.children.length>0&&(Xt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),hT(o.children,t,p,f,u)),!(o.path==null&&!o.index)&&t.push({path:f,score:OM(f,o.index),routesMeta:p})};return s.forEach((o,c)=>{if(o.path===""||!o.path?.includes("?"))i(o,c);else for(let u of mT(o.path))i(o,c,!0,u)}),t}function mT(s){let t=s.split("/");if(t.length===0)return[];let[r,...a]=t,n=r.endsWith("?"),i=r.replace(/\?$/,"");if(a.length===0)return n?[i,""]:[i];let o=mT(a.join("/")),c=[];return c.push(...o.map(u=>u===""?i:[i,u].join("/"))),n&&c.push(...o),c.map(u=>s.startsWith("/")&&u===""?"/":u)}function CM(s){s.sort((t,r)=>t.score!==r.score?r.score-t.score:LM(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}var TM=/^:[\w-]+$/,EM=3,AM=2,DM=1,RM=10,MM=-2,n4=s=>s==="*";function OM(s,t){let r=s.split("/"),a=r.length;return r.some(n4)&&(a+=MM),t&&(a+=AM),r.filter(n=>!n4(n)).reduce((n,i)=>n+(TM.test(i)?EM:i===""?DM:RM),a)}function LM(s,t){return s.length===t.length&&s.slice(0,-1).every((a,n)=>a===t[n])?s[s.length-1]-t[t.length-1]:0}function PM(s,t,r=!1){let{routesMeta:a}=s,n={},i="/",o=[];for(let c=0;c<a.length;++c){let u=a[c],h=c===a.length-1,m=i==="/"?t:t.slice(i.length)||"/",f=zf({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},m),p=u.route;if(!f&&h&&r&&!a[a.length-1].route.index&&(f=zf({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},m)),!f)return null;Object.assign(n,f.params),o.push({params:n,pathname:xi([i,f.pathname]),pathnameBase:UM(xi([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=xi([i,f.pathnameBase]))}return o}function zf(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[r,a]=BM(s.path,s.caseSensitive,s.end),n=t.match(r);if(!n)return null;let i=n[0],o=i.replace(/(.)\/+$/,"$1"),c=n.slice(1);return{params:a.reduce((h,{paramName:m,isOptional:f},p)=>{if(m==="*"){let g=c[p]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const j=c[p];return f&&!j?h[m]=void 0:h[m]=(j||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:o,pattern:s}}function BM(s,t=!1,r=!0){Va(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let a=[],n="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(a.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(a.push({paramName:"*"}),n+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":s!==""&&s!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),a]}function FM(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Va(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),s}}function pi(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=s.charAt(r);return a&&a!=="/"?null:s.slice(r)||"/"}function zM(s,t="/"){let{pathname:r,search:a="",hash:n=""}=typeof s=="string"?Dd(s):s;return{pathname:r?r.startsWith("/")?r:IM(r,t):t,search:VM(a),hash:HM(n)}}function IM(s,t){let r=t.replace(/\/+$/,"").split("/");return s.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function ry(s,t,r,a){return`Cannot include a '${s}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function $M(s){return s.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Jw(s){let t=$M(s);return t.map((r,a)=>a===t.length-1?r.pathname:r.pathnameBase)}function eN(s,t,r,a=!1){let n;typeof s=="string"?n=Dd(s):(n={...s},Xt(!n.pathname||!n.pathname.includes("?"),ry("?","pathname","search",n)),Xt(!n.pathname||!n.pathname.includes("#"),ry("#","pathname","hash",n)),Xt(!n.search||!n.search.includes("#"),ry("#","search","hash",n)));let i=s===""||n.pathname==="",o=i?"/":n.pathname,c;if(o==null)c=r;else{let f=t.length-1;if(!a&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;n.pathname=p.join("/")}c=f>=0?t[f]:"/"}let u=zM(n,c),h=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(h||m)&&(u.pathname+="/"),u}var xi=s=>s.join("/").replace(/\/\/+/g,"/"),UM=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),VM=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,HM=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function qM(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var xT=["POST","PUT","PATCH","DELETE"];new Set(xT);var WM=["GET",...xT];new Set(WM);var Rd=w.createContext(null);Rd.displayName="DataRouter";var dp=w.createContext(null);dp.displayName="DataRouterState";w.createContext(!1);var fT=w.createContext({isTransitioning:!1});fT.displayName="ViewTransition";var YM=w.createContext(new Map);YM.displayName="Fetchers";var GM=w.createContext(null);GM.displayName="Await";var qa=w.createContext(null);qa.displayName="Navigation";var _m=w.createContext(null);_m.displayName="Location";var Ta=w.createContext({outlet:null,matches:[],isDataRoute:!1});Ta.displayName="Route";var tN=w.createContext(null);tN.displayName="RouteError";function KM(s,{relative:t}={}){Xt(Md(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:a}=w.useContext(qa),{hash:n,pathname:i,search:o}=km(s,{relative:t}),c=i;return r!=="/"&&(c=i==="/"?r:xi([r,i])),a.createHref({pathname:c,search:o,hash:n})}function Md(){return w.useContext(_m)!=null}function Ni(){return Xt(Md(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(_m).location}var pT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function gT(s){w.useContext(qa).static||w.useLayoutEffect(s)}function Wa(){let{isDataRoute:s}=w.useContext(Ta);return s?c9():XM()}function XM(){Xt(Md(),"useNavigate() may be used only in the context of a <Router> component.");let s=w.useContext(Rd),{basename:t,navigator:r}=w.useContext(qa),{matches:a}=w.useContext(Ta),{pathname:n}=Ni(),i=JSON.stringify(Jw(a)),o=w.useRef(!1);return gT(()=>{o.current=!0}),w.useCallback((u,h={})=>{if(Va(o.current,pT),!o.current)return;if(typeof u=="number"){r.go(u);return}let m=eN(u,JSON.parse(i),n,h.relative==="path");s==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:xi([t,m.pathname])),(h.replace?r.replace:r.push)(m,h.state,h)},[t,r,i,n,s])}var bT=w.createContext(null);function Wo(){return w.useContext(bT)}function ZM(s){let t=w.useContext(Ta).outlet;return w.useMemo(()=>t&&w.createElement(bT.Provider,{value:s},t),[t,s])}function yT(){let{matches:s}=w.useContext(Ta),t=s[s.length-1];return t?t.params:{}}function km(s,{relative:t}={}){let{matches:r}=w.useContext(Ta),{pathname:a}=Ni(),n=JSON.stringify(Jw(r));return w.useMemo(()=>eN(s,JSON.parse(n),a,t==="path"),[s,n,a,t])}function QM(s,t){return vT(s,t)}function vT(s,t,r,a,n){Xt(Md(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=w.useContext(qa),{matches:o}=w.useContext(Ta),c=o[o.length-1],u=c?c.params:{},h=c?c.pathname:"/",m=c?c.pathnameBase:"/",f=c&&c.route;{let S=f&&f.path||"";jT(h,!f||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let p=Ni(),j;if(t){let S=typeof t=="string"?Dd(t):t;Xt(m==="/"||S.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${S.pathname}" was given in the \`location\` prop.`),j=S}else j=p;let g=j.pathname||"/",v=g;if(m!=="/"){let S=m.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(S.length).join("/")}let y=uT(s,{pathname:v});Va(f||y!=null,`No routes matched location "${j.pathname}${j.search}${j.hash}" `),Va(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${j.pathname}${j.search}${j.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=r9(y&&y.map(S=>Object.assign({},S,{params:Object.assign({},u,S.params),pathname:xi([m,i.encodeLocation?i.encodeLocation(S.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?m:xi([m,i.encodeLocation?i.encodeLocation(S.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathnameBase])})),o,r,a,n);return t&&N?w.createElement(_m.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...j},navigationType:"POP"}},N):N}function JM(){let s=o9(),t=qM(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),r=s instanceof Error?s.stack:null,a="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:a},i={padding:"2px 4px",backgroundColor:a},o=null;return console.error("Error handled by React Router default ErrorBoundary:",s),o=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:i},"ErrorBoundary")," or"," ",w.createElement("code",{style:i},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),r?w.createElement("pre",{style:n},r):null,o)}var e9=w.createElement(JM,null),t9=class extends w.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,t){return t.location!==s.location||t.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:t.error,location:t.location,revalidation:s.revalidation||t.revalidation}}componentDidCatch(s,t){this.props.unstable_onError?this.props.unstable_onError(s,t):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?w.createElement(Ta.Provider,{value:this.props.routeContext},w.createElement(tN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function s9({routeContext:s,match:t,children:r}){let a=w.useContext(Rd);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),w.createElement(Ta.Provider,{value:s},r)}function r9(s,t=[],r=null,a=null,n=null){if(s==null){if(!r)return null;if(r.errors)s=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)s=r.matches;else return null}let i=s,o=r?.errors;if(o!=null){let h=i.findIndex(m=>m.route.id&&o?.[m.route.id]!==void 0);Xt(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,h+1))}let c=!1,u=-1;if(r)for(let h=0;h<i.length;h++){let m=i[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=h),m.route.id){let{loaderData:f,errors:p}=r,j=m.route.loader&&!f.hasOwnProperty(m.route.id)&&(!p||p[m.route.id]===void 0);if(m.route.lazy||j){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((h,m,f)=>{let p,j=!1,g=null,v=null;r&&(p=o&&m.route.id?o[m.route.id]:void 0,g=m.route.errorElement||e9,c&&(u<0&&f===0?(jT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),j=!0,v=null):u===f&&(j=!0,v=m.route.hydrateFallbackElement||null)));let y=t.concat(i.slice(0,f+1)),N=()=>{let S;return p?S=g:j?S=v:m.route.Component?S=w.createElement(m.route.Component,null):m.route.element?S=m.route.element:S=h,w.createElement(s9,{match:m,routeContext:{outlet:h,matches:y,isDataRoute:r!=null},children:S})};return r&&(m.route.ErrorBoundary||m.route.errorElement||f===0)?w.createElement(t9,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:N(),routeContext:{outlet:null,matches:y,isDataRoute:!0},unstable_onError:a}):N()},null)}function sN(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function a9(s){let t=w.useContext(Rd);return Xt(t,sN(s)),t}function n9(s){let t=w.useContext(dp);return Xt(t,sN(s)),t}function i9(s){let t=w.useContext(Ta);return Xt(t,sN(s)),t}function rN(s){let t=i9(s),r=t.matches[t.matches.length-1];return Xt(r.route.id,`${s} can only be used on routes that contain a unique "id"`),r.route.id}function l9(){return rN("useRouteId")}function o9(){let s=w.useContext(tN),t=n9("useRouteError"),r=rN("useRouteError");return s!==void 0?s:t.errors?.[r]}function c9(){let{router:s}=a9("useNavigate"),t=rN("useNavigate"),r=w.useRef(!1);return gT(()=>{r.current=!0}),w.useCallback(async(n,i={})=>{Va(r.current,pT),r.current&&(typeof n=="number"?s.navigate(n):await s.navigate(n,{fromRouteId:t,...i}))},[s,t])}var i4={};function jT(s,t,r){!t&&!i4[s]&&(i4[s]=!0,Va(!1,r))}w.memo(d9);function d9({routes:s,future:t,state:r,unstable_onError:a}){return vT(s,void 0,r,a,t)}function wT({to:s,replace:t,state:r,relative:a}){Xt(Md(),"<Navigate> may be used only in the context of a <Router> component.");let{static:n}=w.useContext(qa);Va(!n,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=w.useContext(Ta),{pathname:o}=Ni(),c=Wa(),u=eN(s,Jw(i),o,a==="path"),h=JSON.stringify(u);return w.useEffect(()=>{c(JSON.parse(h),{replace:t,state:r,relative:a})},[c,h,a,t,r]),null}function aN(s){return ZM(s.context)}function et(s){Xt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function u9({basename:s="/",children:t=null,location:r,navigationType:a="POP",navigator:n,static:i=!1}){Xt(!Md(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=s.replace(/^\/*/,"/"),c=w.useMemo(()=>({basename:o,navigator:n,static:i,future:{}}),[o,n,i]);typeof r=="string"&&(r=Dd(r));let{pathname:u="/",search:h="",hash:m="",state:f=null,key:p="default"}=r,j=w.useMemo(()=>{let g=pi(u,o);return g==null?null:{location:{pathname:g,search:h,hash:m,state:f,key:p},navigationType:a}},[o,u,h,m,f,p,a]);return Va(j!=null,`<Router basename="${o}"> is not able to match the URL "${u}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:w.createElement(qa.Provider,{value:c},w.createElement(_m.Provider,{children:t,value:j}))}function h9({children:s,location:t}){return QM(Uj(s),t)}function Uj(s,t=[]){let r=[];return w.Children.forEach(s,(a,n)=>{if(!w.isValidElement(a))return;let i=[...t,n];if(a.type===w.Fragment){r.push.apply(r,Uj(a.props.children,i));return}Xt(a.type===et,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Xt(!a.props.index||!a.props.children,"An index route cannot have child routes.");let o={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=Uj(a.props.children,i)),r.push(o)}),r}var vf="get",jf="application/x-www-form-urlencoded";function up(s){return s!=null&&typeof s.tagName=="string"}function m9(s){return up(s)&&s.tagName.toLowerCase()==="button"}function x9(s){return up(s)&&s.tagName.toLowerCase()==="form"}function f9(s){return up(s)&&s.tagName.toLowerCase()==="input"}function p9(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function g9(s,t){return s.button===0&&(!t||t==="_self")&&!p9(s)}var R0=null;function b9(){if(R0===null)try{new FormData(document.createElement("form"),0),R0=!1}catch{R0=!0}return R0}var y9=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ay(s){return s!=null&&!y9.has(s)?(Va(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${jf}"`),null):s}function v9(s,t){let r,a,n,i,o;if(x9(s)){let c=s.getAttribute("action");a=c?pi(c,t):null,r=s.getAttribute("method")||vf,n=ay(s.getAttribute("enctype"))||jf,i=new FormData(s)}else if(m9(s)||f9(s)&&(s.type==="submit"||s.type==="image")){let c=s.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=s.getAttribute("formaction")||c.getAttribute("action");if(a=u?pi(u,t):null,r=s.getAttribute("formmethod")||c.getAttribute("method")||vf,n=ay(s.getAttribute("formenctype"))||ay(c.getAttribute("enctype"))||jf,i=new FormData(c,s),!b9()){let{name:h,type:m,value:f}=s;if(m==="image"){let p=h?`${h}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else h&&i.append(h,f)}}else{if(up(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=vf,a=null,n=jf,o=s}return i&&n==="text/plain"&&(o=i,i=void 0),{action:a,method:r.toLowerCase(),encType:n,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function nN(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function j9(s,t,r){let a=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return a.pathname==="/"?a.pathname=`_root.${r}`:t&&pi(a.pathname,t)==="/"?a.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${r}`,a}async function w9(s,t){if(s.id in t)return t[s.id];try{let r=await import(s.module);return t[s.id]=r,r}catch(r){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function N9(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function _9(s,t,r){let a=await Promise.all(s.map(async n=>{let i=t.routes[n.route.id];if(i){let o=await w9(i,r);return o.links?o.links():[]}return[]}));return T9(a.flat(1).filter(N9).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function l4(s,t,r,a,n,i){let o=(u,h)=>r[h]?u.route.id!==r[h].route.id:!0,c=(u,h)=>r[h].pathname!==u.pathname||r[h].route.path?.endsWith("*")&&r[h].params["*"]!==u.params["*"];return i==="assets"?t.filter((u,h)=>o(u,h)||c(u,h)):i==="data"?t.filter((u,h)=>{let m=a.routes[u.route.id];if(!m||!m.hasLoader)return!1;if(o(u,h)||c(u,h))return!0;if(u.route.shouldRevalidate){let f=u.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function k9(s,t,{includeHydrateFallback:r}={}){return S9(s.map(a=>{let n=t.routes[a.route.id];if(!n)return[];let i=[n.module];return n.clientActionModule&&(i=i.concat(n.clientActionModule)),n.clientLoaderModule&&(i=i.concat(n.clientLoaderModule)),r&&n.hydrateFallbackModule&&(i=i.concat(n.hydrateFallbackModule)),n.imports&&(i=i.concat(n.imports)),i}).flat(1))}function S9(s){return[...new Set(s)]}function C9(s){let t={},r=Object.keys(s).sort();for(let a of r)t[a]=s[a];return t}function T9(s,t){let r=new Set;return new Set(t),s.reduce((a,n)=>{let i=JSON.stringify(C9(n));return r.has(i)||(r.add(i),a.push({key:i,link:n})),a},[])}function NT(){let s=w.useContext(Rd);return nN(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function E9(){let s=w.useContext(dp);return nN(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var iN=w.createContext(void 0);iN.displayName="FrameworkContext";function _T(){let s=w.useContext(iN);return nN(s,"You must render this element inside a <HydratedRouter> element"),s}function A9(s,t){let r=w.useContext(iN),[a,n]=w.useState(!1),[i,o]=w.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:h,onMouseLeave:m,onTouchStart:f}=t,p=w.useRef(null);w.useEffect(()=>{if(s==="render"&&o(!0),s==="viewport"){let v=N=>{N.forEach(S=>{o(S.isIntersecting)})},y=new IntersectionObserver(v,{threshold:.5});return p.current&&y.observe(p.current),()=>{y.disconnect()}}},[s]),w.useEffect(()=>{if(a){let v=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(v)}}},[a]);let j=()=>{n(!0)},g=()=>{n(!1),o(!1)};return r?s!=="intent"?[i,p,{}]:[i,p,{onFocus:ch(c,j),onBlur:ch(u,g),onMouseEnter:ch(h,j),onMouseLeave:ch(m,g),onTouchStart:ch(f,j)}]:[!1,p,{}]}function ch(s,t){return r=>{s&&s(r),r.defaultPrevented||t(r)}}function D9({page:s,...t}){let{router:r}=NT(),a=w.useMemo(()=>uT(r.routes,s,r.basename),[r.routes,s,r.basename]);return a?w.createElement(M9,{page:s,matches:a,...t}):null}function R9(s){let{manifest:t,routeModules:r}=_T(),[a,n]=w.useState([]);return w.useEffect(()=>{let i=!1;return _9(s,t,r).then(o=>{i||n(o)}),()=>{i=!0}},[s,t,r]),a}function M9({page:s,matches:t,...r}){let a=Ni(),{manifest:n,routeModules:i}=_T(),{basename:o}=NT(),{loaderData:c,matches:u}=E9(),h=w.useMemo(()=>l4(s,t,u,n,a,"data"),[s,t,u,n,a]),m=w.useMemo(()=>l4(s,t,u,n,a,"assets"),[s,t,u,n,a]),f=w.useMemo(()=>{if(s===a.pathname+a.search+a.hash)return[];let g=new Set,v=!1;if(t.forEach(N=>{let S=n.routes[N.route.id];!S||!S.hasLoader||(!h.some(k=>k.route.id===N.route.id)&&N.route.id in c&&i[N.route.id]?.shouldRevalidate||S.hasClientLoader?v=!0:g.add(N.route.id))}),g.size===0)return[];let y=j9(s,o,"data");return v&&g.size>0&&y.searchParams.set("_routes",t.filter(N=>g.has(N.route.id)).map(N=>N.route.id).join(",")),[y.pathname+y.search]},[o,c,a,n,h,t,s,i]),p=w.useMemo(()=>k9(m,n),[m,n]),j=R9(m);return w.createElement(w.Fragment,null,f.map(g=>w.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...r})),p.map(g=>w.createElement("link",{key:g,rel:"modulepreload",href:g,...r})),j.map(({key:g,link:v})=>w.createElement("link",{key:g,nonce:r.nonce,...v})))}function O9(...s){return t=>{s.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var kT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{kT&&(window.__reactRouterVersion="7.9.5")}catch{}function L9({basename:s,children:t,window:r}){let a=w.useRef();a.current==null&&(a.current=wM({window:r,v5Compat:!0}));let n=a.current,[i,o]=w.useState({action:n.action,location:n.location}),c=w.useCallback(u=>{w.startTransition(()=>o(u))},[o]);return w.useLayoutEffect(()=>n.listen(c),[n,c]),w.createElement(u9,{basename:s,children:t,location:i.location,navigationType:i.action,navigator:n})}var ST=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lN=w.forwardRef(function({onClick:t,discover:r="render",prefetch:a="none",relative:n,reloadDocument:i,replace:o,state:c,target:u,to:h,preventScrollReset:m,viewTransition:f,...p},j){let{basename:g}=w.useContext(qa),v=typeof h=="string"&&ST.test(h),y,N=!1;if(typeof h=="string"&&v&&(y=h,kT))try{let C=new URL(window.location.href),A=h.startsWith("//")?new URL(C.protocol+h):new URL(h),Z=pi(A.pathname,g);A.origin===C.origin&&Z!=null?h=Z+A.search+A.hash:N=!0}catch{Va(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=KM(h,{relative:n}),[k,_,T]=A9(a,p),E=F9(h,{replace:o,state:c,target:u,preventScrollReset:m,relative:n,viewTransition:f});function z(C){t&&t(C),C.defaultPrevented||E(C)}let M=w.createElement("a",{...p,...T,href:y||S,onClick:N||i?t:z,ref:O9(j,_),target:u,"data-discover":!v&&r==="render"?"true":void 0});return k&&!v?w.createElement(w.Fragment,null,M,w.createElement(D9,{page:S})):M});lN.displayName="Link";var CT=w.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:a="",end:n=!1,style:i,to:o,viewTransition:c,children:u,...h},m){let f=km(o,{relative:h.relative}),p=Ni(),j=w.useContext(dp),{navigator:g,basename:v}=w.useContext(qa),y=j!=null&&V9(f)&&c===!0,N=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,S=p.pathname,k=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;r||(S=S.toLowerCase(),k=k?k.toLowerCase():null,N=N.toLowerCase()),k&&v&&(k=pi(k,v)||k);const _=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let T=S===N||!n&&S.startsWith(N)&&S.charAt(_)==="/",E=k!=null&&(k===N||!n&&k.startsWith(N)&&k.charAt(N.length)==="/"),z={isActive:T,isPending:E,isTransitioning:y},M=T?t:void 0,C;typeof a=="function"?C=a(z):C=[a,T?"active":null,E?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let A=typeof i=="function"?i(z):i;return w.createElement(lN,{...h,"aria-current":M,className:C,ref:m,style:A,to:o,viewTransition:c},typeof u=="function"?u(z):u)});CT.displayName="NavLink";var P9=w.forwardRef(({discover:s="render",fetcherKey:t,navigate:r,reloadDocument:a,replace:n,state:i,method:o=vf,action:c,onSubmit:u,relative:h,preventScrollReset:m,viewTransition:f,...p},j)=>{let g=$9(),v=U9(c,{relative:h}),y=o.toLowerCase()==="get"?"get":"post",N=typeof c=="string"&&ST.test(c),S=k=>{if(u&&u(k),k.defaultPrevented)return;k.preventDefault();let _=k.nativeEvent.submitter,T=_?.getAttribute("formmethod")||o;g(_||k.currentTarget,{fetcherKey:t,method:T,navigate:r,replace:n,state:i,relative:h,preventScrollReset:m,viewTransition:f})};return w.createElement("form",{ref:j,method:y,action:v,onSubmit:a?u:S,...p,"data-discover":!N&&s==="render"?"true":void 0})});P9.displayName="Form";function B9(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function TT(s){let t=w.useContext(Rd);return Xt(t,B9(s)),t}function F9(s,{target:t,replace:r,state:a,preventScrollReset:n,relative:i,viewTransition:o}={}){let c=Wa(),u=Ni(),h=km(s,{relative:i});return w.useCallback(m=>{if(g9(m,t)){m.preventDefault();let f=r!==void 0?r:Jh(u)===Jh(h);c(s,{replace:f,state:a,preventScrollReset:n,relative:i,viewTransition:o})}},[u,c,h,r,a,t,s,n,i,o])}var z9=0,I9=()=>`__${String(++z9)}__`;function $9(){let{router:s}=TT("useSubmit"),{basename:t}=w.useContext(qa),r=l9();return w.useCallback(async(a,n={})=>{let{action:i,method:o,encType:c,formData:u,body:h}=v9(a,t);if(n.navigate===!1){let m=n.fetcherKey||I9();await s.fetch(m,r,n.action||i,{preventScrollReset:n.preventScrollReset,formData:u,body:h,formMethod:n.method||o,formEncType:n.encType||c,flushSync:n.flushSync})}else await s.navigate(n.action||i,{preventScrollReset:n.preventScrollReset,formData:u,body:h,formMethod:n.method||o,formEncType:n.encType||c,replace:n.replace,state:n.state,fromRouteId:r,flushSync:n.flushSync,viewTransition:n.viewTransition})},[s,t,r])}function U9(s,{relative:t}={}){let{basename:r}=w.useContext(qa),a=w.useContext(Ta);Xt(a,"useFormAction must be used inside a RouteContext");let[n]=a.matches.slice(-1),i={...km(s||".",{relative:t})},o=Ni();if(s==null){i.search=o.search;let c=new URLSearchParams(i.search),u=c.getAll("index");if(u.some(m=>m==="")){c.delete("index"),u.filter(f=>f).forEach(f=>c.append("index",f));let m=c.toString();i.search=m?`?${m}`:""}}return(!s||s===".")&&n.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:xi([r,i.pathname])),Jh(i)}function V9(s,{relative:t}={}){let r=w.useContext(fT);Xt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=TT("useViewTransitionState"),n=km(s,{relative:t});if(!r.isTransitioning)return!1;let i=pi(r.currentLocation.pathname,a)||r.currentLocation.pathname,o=pi(r.nextLocation.pathname,a)||r.nextLocation.pathname;return zf(n.pathname,o)!=null||zf(n.pathname,i)!=null}const ET=w.createContext(void 0),H9=s=>{switch(s){case"colorful":return{text:"text-gray-900",card:"bg-white",border:"border-gray-200",input:"bg-white",primary:"bg-blue-600",hover:"hover:bg-gray-50"};case"monochrome":return{text:"text-gray-900",card:"bg-white",border:"border-gray-300",input:"bg-gray-50",primary:"bg-gray-700",hover:"hover:bg-gray-100"};case"dark":return{text:"text-gray-100",card:"bg-gray-800",border:"border-gray-700",input:"bg-gray-700",primary:"bg-gray-600",hover:"hover:bg-gray-700"};case"blue":return{text:"text-gray-900",card:"bg-white",border:"border-blue-200",input:"bg-blue-50",primary:"bg-blue-600",hover:"hover:bg-blue-50"};case"green":return{text:"text-gray-900",card:"bg-white",border:"border-green-200",input:"bg-green-50",primary:"bg-green-600",hover:"hover:bg-green-50"}}},hp=()=>{const s=w.useContext(ET);if(!s)throw new Error("useTheme must be used within ThemeProvider");return s},q9=({children:s})=>{const[t,r]=w.useState(()=>localStorage.getItem("admin-theme")||"colorful"),a=H9(t);w.useEffect(()=>{document.body.className=`theme-${t}`,localStorage.setItem("admin-theme",t)},[t]);const n=i=>{r(i)};return e.jsx(ET.Provider,{value:{theme:t,setTheme:n,currentTheme:a},children:s})},W9={colorful:{name:"",description:"     ",primary:"#3b82f6",secondary:"#6366f1",accent:"#8b5cf6"},monochrome:{name:"-",description:"  ",primary:"#374151",secondary:"#6b7280",accent:"#9ca3af"},dark:{name:"",description:"      ",primary:"#1f2937",secondary:"#374151",accent:"#4b5563"},blue:{name:"",description:"  ",primary:"#0ea5e9",secondary:"#0284c7",accent:"#0369a1"},green:{name:"",description:"  ",primary:"#10b981",secondary:"#059669",accent:"#047857"}},o4=[{name:"Inter",value:"Inter",description:"  ",category:"normal"},{name:"Roboto",value:"Roboto",description:"  ",category:"normal"},{name:"Open Sans",value:"Open Sans",description:"  ",category:"normal"},{name:"Poppins",value:"Poppins",description:" ",category:"normal"},{name:"Montserrat",value:"Montserrat",description:" ",category:"normal"},{name:"Nunito",value:"Nunito",description:" ",category:"normal"},{name:"IBM Plex Sans",value:"IBM Plex Sans",description:" ",category:"normal"},{name:"Manrope",value:"Manrope",description:" ",category:"normal"},{name:"Space Grotesk",value:"Space Grotesk",description:" ",category:"normal"},{name:"Red Hat Display",value:"Red Hat Display",description:" Tech",category:"normal"},{name:"Archivo",value:"Archivo",description:" ",category:"normal"},{name:"Public Sans",value:"Public Sans",description:" ",category:"normal"},{name:"Rubik",value:"Rubik",description:" ",category:"normal"},{name:"Quicksand",value:"Quicksand",description:" ",category:"normal"},{name:"Raleway",value:"Raleway",description:" ",category:"normal"},{name:"Source Sans 3",value:"Source Sans 3",description:" Adobe Systems",category:"normal"},{name:"Jost",value:"Jost",description:" Futura-style",category:"normal"},{name:"Karla",value:"Karla",description:" ",category:"normal"},{name:"PT Sans",value:"PT Sans",description:" ",category:"normal"},{name:"Fira Sans",value:"Fira Sans",description:" ",category:"normal"},{name:"Ubuntu",value:"Ubuntu",description:" Ubuntu",category:"normal"},{name:"Exo 2",value:"Exo 2",description:" ",category:"normal"},{name:"Press Start 2P",value:"Press Start 2P",description:"8-  ",category:"strange"},{name:"Comfortaa",value:"Comfortaa",description:" ",category:"strange"},{name:"Philosopher",value:"Philosopher",description:" ",category:"strange"},{name:"Play",value:"Play",description:" ",category:"strange"},{name:"Podkova",value:"Podkova",description:"  ",category:"strange"},{name:"Cuprum",value:"Cuprum",description:" ",category:"strange"},{name:"Bad Script",value:"Bad Script",description:" ",category:"strange"},{name:"Lobster",value:"Lobster",description:" ",category:"strange"},{name:"Pacifico",value:"Pacifico",description:" ",category:"strange"},{name:"Stalinist One",value:"Stalinist One",description:" ",category:"strange"},{name:"Underdog",value:"Underdog",description:" ",category:"strange"},{name:"Yeseva One",value:"Yeseva One",description:" ",category:"strange"},{name:"Marck Script",value:"Marck Script",description:" ",category:"strange"},{name:"Kelly Slab",value:"Kelly Slab",description:" ",category:"strange"},{name:"Ruslan Display",value:"Ruslan Display",description:" ",category:"strange"}],AT=w.createContext(void 0),Y9=({children:s})=>{const[t,r]=w.useState(()=>localStorage.getItem("selectedFont")||"IBM Plex Sans");w.useEffect(()=>{document.body.style.fontFamily=`'${t}', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif`,localStorage.setItem("selectedFont",t)},[t]);const a=n=>{r(n)};return e.jsx(AT.Provider,{value:{currentFont:t,setFont:a},children:s})},G9=()=>{const s=w.useContext(AT);if(!s)throw new Error("useFont must be used within FontProvider");return s};function DT(s,t){return function(){return s.apply(t,arguments)}}const{toString:K9}=Object.prototype,{getPrototypeOf:oN}=Object,{iterator:mp,toStringTag:RT}=Symbol,xp=(s=>t=>{const r=K9.call(t);return s[r]||(s[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Ya=s=>(s=s.toLowerCase(),t=>xp(t)===s),fp=s=>t=>typeof t===s,{isArray:Od}=Array,md=fp("undefined");function Sm(s){return s!==null&&!md(s)&&s.constructor!==null&&!md(s.constructor)&&Rr(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const MT=Ya("ArrayBuffer");function X9(s){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(s):t=s&&s.buffer&&MT(s.buffer),t}const Z9=fp("string"),Rr=fp("function"),OT=fp("number"),Cm=s=>s!==null&&typeof s=="object",Q9=s=>s===!0||s===!1,wf=s=>{if(xp(s)!=="object")return!1;const t=oN(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(RT in s)&&!(mp in s)},J9=s=>{if(!Cm(s)||Sm(s))return!1;try{return Object.keys(s).length===0&&Object.getPrototypeOf(s)===Object.prototype}catch{return!1}},eO=Ya("Date"),tO=Ya("File"),sO=Ya("Blob"),rO=Ya("FileList"),aO=s=>Cm(s)&&Rr(s.pipe),nO=s=>{let t;return s&&(typeof FormData=="function"&&s instanceof FormData||Rr(s.append)&&((t=xp(s))==="formdata"||t==="object"&&Rr(s.toString)&&s.toString()==="[object FormData]"))},iO=Ya("URLSearchParams"),[lO,oO,cO,dO]=["ReadableStream","Request","Response","Headers"].map(Ya),uO=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Tm(s,t,{allOwnKeys:r=!1}={}){if(s===null||typeof s>"u")return;let a,n;if(typeof s!="object"&&(s=[s]),Od(s))for(a=0,n=s.length;a<n;a++)t.call(null,s[a],a,s);else{if(Sm(s))return;const i=r?Object.getOwnPropertyNames(s):Object.keys(s),o=i.length;let c;for(a=0;a<o;a++)c=i[a],t.call(null,s[c],c,s)}}function LT(s,t){if(Sm(s))return null;t=t.toLowerCase();const r=Object.keys(s);let a=r.length,n;for(;a-- >0;)if(n=r[a],t===n.toLowerCase())return n;return null}const ko=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,PT=s=>!md(s)&&s!==ko;function Vj(){const{caseless:s,skipUndefined:t}=PT(this)&&this||{},r={},a=(n,i)=>{const o=s&&LT(r,i)||i;wf(r[o])&&wf(n)?r[o]=Vj(r[o],n):wf(n)?r[o]=Vj({},n):Od(n)?r[o]=n.slice():(!t||!md(n))&&(r[o]=n)};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&Tm(arguments[n],a);return r}const hO=(s,t,r,{allOwnKeys:a}={})=>(Tm(t,(n,i)=>{r&&Rr(n)?s[i]=DT(n,r):s[i]=n},{allOwnKeys:a}),s),mO=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),xO=(s,t,r,a)=>{s.prototype=Object.create(t.prototype,a),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:t.prototype}),r&&Object.assign(s.prototype,r)},fO=(s,t,r,a)=>{let n,i,o;const c={};if(t=t||{},s==null)return t;do{for(n=Object.getOwnPropertyNames(s),i=n.length;i-- >0;)o=n[i],(!a||a(o,s,t))&&!c[o]&&(t[o]=s[o],c[o]=!0);s=r!==!1&&oN(s)}while(s&&(!r||r(s,t))&&s!==Object.prototype);return t},pO=(s,t,r)=>{s=String(s),(r===void 0||r>s.length)&&(r=s.length),r-=t.length;const a=s.indexOf(t,r);return a!==-1&&a===r},gO=s=>{if(!s)return null;if(Od(s))return s;let t=s.length;if(!OT(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=s[t];return r},bO=(s=>t=>s&&t instanceof s)(typeof Uint8Array<"u"&&oN(Uint8Array)),yO=(s,t)=>{const a=(s&&s[mp]).call(s);let n;for(;(n=a.next())&&!n.done;){const i=n.value;t.call(s,i[0],i[1])}},vO=(s,t)=>{let r;const a=[];for(;(r=s.exec(t))!==null;)a.push(r);return a},jO=Ya("HTMLFormElement"),wO=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,a,n){return a.toUpperCase()+n}),c4=(({hasOwnProperty:s})=>(t,r)=>s.call(t,r))(Object.prototype),NO=Ya("RegExp"),BT=(s,t)=>{const r=Object.getOwnPropertyDescriptors(s),a={};Tm(r,(n,i)=>{let o;(o=t(n,i,s))!==!1&&(a[i]=o||n)}),Object.defineProperties(s,a)},_O=s=>{BT(s,(t,r)=>{if(Rr(s)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const a=s[r];if(Rr(a)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},kO=(s,t)=>{const r={},a=n=>{n.forEach(i=>{r[i]=!0})};return Od(s)?a(s):a(String(s).split(t)),r},SO=()=>{},CO=(s,t)=>s!=null&&Number.isFinite(s=+s)?s:t;function TO(s){return!!(s&&Rr(s.append)&&s[RT]==="FormData"&&s[mp])}const EO=s=>{const t=new Array(10),r=(a,n)=>{if(Cm(a)){if(t.indexOf(a)>=0)return;if(Sm(a))return a;if(!("toJSON"in a)){t[n]=a;const i=Od(a)?[]:{};return Tm(a,(o,c)=>{const u=r(o,n+1);!md(u)&&(i[c]=u)}),t[n]=void 0,i}}return a};return r(s,0)},AO=Ya("AsyncFunction"),DO=s=>s&&(Cm(s)||Rr(s))&&Rr(s.then)&&Rr(s.catch),FT=((s,t)=>s?setImmediate:t?((r,a)=>(ko.addEventListener("message",({source:n,data:i})=>{n===ko&&i===r&&a.length&&a.shift()()},!1),n=>{a.push(n),ko.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Rr(ko.postMessage)),RO=typeof queueMicrotask<"u"?queueMicrotask.bind(ko):typeof process<"u"&&process.nextTick||FT,MO=s=>s!=null&&Rr(s[mp]),ke={isArray:Od,isArrayBuffer:MT,isBuffer:Sm,isFormData:nO,isArrayBufferView:X9,isString:Z9,isNumber:OT,isBoolean:Q9,isObject:Cm,isPlainObject:wf,isEmptyObject:J9,isReadableStream:lO,isRequest:oO,isResponse:cO,isHeaders:dO,isUndefined:md,isDate:eO,isFile:tO,isBlob:sO,isRegExp:NO,isFunction:Rr,isStream:aO,isURLSearchParams:iO,isTypedArray:bO,isFileList:rO,forEach:Tm,merge:Vj,extend:hO,trim:uO,stripBOM:mO,inherits:xO,toFlatObject:fO,kindOf:xp,kindOfTest:Ya,endsWith:pO,toArray:gO,forEachEntry:yO,matchAll:vO,isHTMLForm:jO,hasOwnProperty:c4,hasOwnProp:c4,reduceDescriptors:BT,freezeMethods:_O,toObjectSet:kO,toCamelCase:wO,noop:SO,toFiniteNumber:CO,findKey:LT,global:ko,isContextDefined:PT,isSpecCompliantForm:TO,toJSONObject:EO,isAsyncFn:AO,isThenable:DO,setImmediate:FT,asap:RO,isIterable:MO};function at(s,t,r,a,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),a&&(this.request=a),n&&(this.response=n,this.status=n.status?n.status:null)}ke.inherits(at,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ke.toJSONObject(this.config),code:this.code,status:this.status}}});const zT=at.prototype,IT={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{IT[s]={value:s}});Object.defineProperties(at,IT);Object.defineProperty(zT,"isAxiosError",{value:!0});at.from=(s,t,r,a,n,i)=>{const o=Object.create(zT);ke.toFlatObject(s,o,function(m){return m!==Error.prototype},h=>h!=="isAxiosError");const c=s&&s.message?s.message:"Error",u=t==null&&s?s.code:t;return at.call(o,c,u,r,a,n),s&&o.cause==null&&Object.defineProperty(o,"cause",{value:s,configurable:!0}),o.name=s&&s.name||"Error",i&&Object.assign(o,i),o};const OO=null;function Hj(s){return ke.isPlainObject(s)||ke.isArray(s)}function $T(s){return ke.endsWith(s,"[]")?s.slice(0,-2):s}function d4(s,t,r){return s?s.concat(t).map(function(n,i){return n=$T(n),!r&&i?"["+n+"]":n}).join(r?".":""):t}function LO(s){return ke.isArray(s)&&!s.some(Hj)}const PO=ke.toFlatObject(ke,{},null,function(t){return/^is[A-Z]/.test(t)});function pp(s,t,r){if(!ke.isObject(s))throw new TypeError("target must be an object");t=t||new FormData,r=ke.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,y){return!ke.isUndefined(y[v])});const a=r.metaTokens,n=r.visitor||m,i=r.dots,o=r.indexes,u=(r.Blob||typeof Blob<"u"&&Blob)&&ke.isSpecCompliantForm(t);if(!ke.isFunction(n))throw new TypeError("visitor must be a function");function h(g){if(g===null)return"";if(ke.isDate(g))return g.toISOString();if(ke.isBoolean(g))return g.toString();if(!u&&ke.isBlob(g))throw new at("Blob is not supported. Use a Buffer instead.");return ke.isArrayBuffer(g)||ke.isTypedArray(g)?u&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function m(g,v,y){let N=g;if(g&&!y&&typeof g=="object"){if(ke.endsWith(v,"{}"))v=a?v:v.slice(0,-2),g=JSON.stringify(g);else if(ke.isArray(g)&&LO(g)||(ke.isFileList(g)||ke.endsWith(v,"[]"))&&(N=ke.toArray(g)))return v=$T(v),N.forEach(function(k,_){!(ke.isUndefined(k)||k===null)&&t.append(o===!0?d4([v],_,i):o===null?v:v+"[]",h(k))}),!1}return Hj(g)?!0:(t.append(d4(y,v,i),h(g)),!1)}const f=[],p=Object.assign(PO,{defaultVisitor:m,convertValue:h,isVisitable:Hj});function j(g,v){if(!ke.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+v.join("."));f.push(g),ke.forEach(g,function(N,S){(!(ke.isUndefined(N)||N===null)&&n.call(t,N,ke.isString(S)?S.trim():S,v,p))===!0&&j(N,v?v.concat(S):[S])}),f.pop()}}if(!ke.isObject(s))throw new TypeError("data must be an object");return j(s),t}function u4(s){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(a){return t[a]})}function cN(s,t){this._pairs=[],s&&pp(s,this,t)}const UT=cN.prototype;UT.append=function(t,r){this._pairs.push([t,r])};UT.toString=function(t){const r=t?function(a){return t.call(this,a,u4)}:u4;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function BO(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function VT(s,t,r){if(!t)return s;const a=r&&r.encode||BO;ke.isFunction(r)&&(r={serialize:r});const n=r&&r.serialize;let i;if(n?i=n(t,r):i=ke.isURLSearchParams(t)?t.toString():new cN(t,r).toString(a),i){const o=s.indexOf("#");o!==-1&&(s=s.slice(0,o)),s+=(s.indexOf("?")===-1?"?":"&")+i}return s}class h4{constructor(){this.handlers=[]}use(t,r,a){return this.handlers.push({fulfilled:t,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ke.forEach(this.handlers,function(a){a!==null&&t(a)})}}const HT={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},FO=typeof URLSearchParams<"u"?URLSearchParams:cN,zO=typeof FormData<"u"?FormData:null,IO=typeof Blob<"u"?Blob:null,$O={isBrowser:!0,classes:{URLSearchParams:FO,FormData:zO,Blob:IO},protocols:["http","https","file","blob","url","data"]},dN=typeof window<"u"&&typeof document<"u",qj=typeof navigator=="object"&&navigator||void 0,UO=dN&&(!qj||["ReactNative","NativeScript","NS"].indexOf(qj.product)<0),VO=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",HO=dN&&window.location.href||"http://localhost",qO=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:dN,hasStandardBrowserEnv:UO,hasStandardBrowserWebWorkerEnv:VO,navigator:qj,origin:HO},Symbol.toStringTag,{value:"Module"})),rr={...qO,...$O};function WO(s,t){return pp(s,new rr.classes.URLSearchParams,{visitor:function(r,a,n,i){return rr.isNode&&ke.isBuffer(r)?(this.append(a,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function YO(s){return ke.matchAll(/\w+|\[(\w*)]/g,s).map(t=>t[0]==="[]"?"":t[1]||t[0])}function GO(s){const t={},r=Object.keys(s);let a;const n=r.length;let i;for(a=0;a<n;a++)i=r[a],t[i]=s[i];return t}function qT(s){function t(r,a,n,i){let o=r[i++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),u=i>=r.length;return o=!o&&ke.isArray(n)?n.length:o,u?(ke.hasOwnProp(n,o)?n[o]=[n[o],a]:n[o]=a,!c):((!n[o]||!ke.isObject(n[o]))&&(n[o]=[]),t(r,a,n[o],i)&&ke.isArray(n[o])&&(n[o]=GO(n[o])),!c)}if(ke.isFormData(s)&&ke.isFunction(s.entries)){const r={};return ke.forEachEntry(s,(a,n)=>{t(YO(a),n,r,0)}),r}return null}function KO(s,t,r){if(ke.isString(s))try{return(t||JSON.parse)(s),ke.trim(s)}catch(a){if(a.name!=="SyntaxError")throw a}return(r||JSON.stringify)(s)}const Em={transitional:HT,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const a=r.getContentType()||"",n=a.indexOf("application/json")>-1,i=ke.isObject(t);if(i&&ke.isHTMLForm(t)&&(t=new FormData(t)),ke.isFormData(t))return n?JSON.stringify(qT(t)):t;if(ke.isArrayBuffer(t)||ke.isBuffer(t)||ke.isStream(t)||ke.isFile(t)||ke.isBlob(t)||ke.isReadableStream(t))return t;if(ke.isArrayBufferView(t))return t.buffer;if(ke.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(i){if(a.indexOf("application/x-www-form-urlencoded")>-1)return WO(t,this.formSerializer).toString();if((c=ke.isFileList(t))||a.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return pp(c?{"files[]":t}:t,u&&new u,this.formSerializer)}}return i||n?(r.setContentType("application/json",!1),KO(t)):t}],transformResponse:[function(t){const r=this.transitional||Em.transitional,a=r&&r.forcedJSONParsing,n=this.responseType==="json";if(ke.isResponse(t)||ke.isReadableStream(t))return t;if(t&&ke.isString(t)&&(a&&!this.responseType||n)){const o=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(t,this.parseReviver)}catch(c){if(o)throw c.name==="SyntaxError"?at.from(c,at.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:rr.classes.FormData,Blob:rr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ke.forEach(["delete","get","head","post","put","patch"],s=>{Em.headers[s]={}});const XO=ke.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ZO=s=>{const t={};let r,a,n;return s&&s.split(`
`).forEach(function(o){n=o.indexOf(":"),r=o.substring(0,n).trim().toLowerCase(),a=o.substring(n+1).trim(),!(!r||t[r]&&XO[r])&&(r==="set-cookie"?t[r]?t[r].push(a):t[r]=[a]:t[r]=t[r]?t[r]+", "+a:a)}),t},m4=Symbol("internals");function dh(s){return s&&String(s).trim().toLowerCase()}function Nf(s){return s===!1||s==null?s:ke.isArray(s)?s.map(Nf):String(s)}function QO(s){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=r.exec(s);)t[a[1]]=a[2];return t}const JO=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function ny(s,t,r,a,n){if(ke.isFunction(a))return a.call(this,t,r);if(n&&(t=r),!!ke.isString(t)){if(ke.isString(a))return t.indexOf(a)!==-1;if(ke.isRegExp(a))return a.test(t)}}function eL(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,a)=>r.toUpperCase()+a)}function tL(s,t){const r=ke.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(s,a+r,{value:function(n,i,o){return this[a].call(this,t,n,i,o)},configurable:!0})})}let Mr=class{constructor(t){t&&this.set(t)}set(t,r,a){const n=this;function i(c,u,h){const m=dh(u);if(!m)throw new Error("header name must be a non-empty string");const f=ke.findKey(n,m);(!f||n[f]===void 0||h===!0||h===void 0&&n[f]!==!1)&&(n[f||u]=Nf(c))}const o=(c,u)=>ke.forEach(c,(h,m)=>i(h,m,u));if(ke.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(ke.isString(t)&&(t=t.trim())&&!JO(t))o(ZO(t),r);else if(ke.isObject(t)&&ke.isIterable(t)){let c={},u,h;for(const m of t){if(!ke.isArray(m))throw TypeError("Object iterator must return a key-value pair");c[h=m[0]]=(u=c[h])?ke.isArray(u)?[...u,m[1]]:[u,m[1]]:m[1]}o(c,r)}else t!=null&&i(r,t,a);return this}get(t,r){if(t=dh(t),t){const a=ke.findKey(this,t);if(a){const n=this[a];if(!r)return n;if(r===!0)return QO(n);if(ke.isFunction(r))return r.call(this,n,a);if(ke.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=dh(t),t){const a=ke.findKey(this,t);return!!(a&&this[a]!==void 0&&(!r||ny(this,this[a],a,r)))}return!1}delete(t,r){const a=this;let n=!1;function i(o){if(o=dh(o),o){const c=ke.findKey(a,o);c&&(!r||ny(a,a[c],c,r))&&(delete a[c],n=!0)}}return ke.isArray(t)?t.forEach(i):i(t),n}clear(t){const r=Object.keys(this);let a=r.length,n=!1;for(;a--;){const i=r[a];(!t||ny(this,this[i],i,t,!0))&&(delete this[i],n=!0)}return n}normalize(t){const r=this,a={};return ke.forEach(this,(n,i)=>{const o=ke.findKey(a,i);if(o){r[o]=Nf(n),delete r[i];return}const c=t?eL(i):String(i).trim();c!==i&&delete r[i],r[c]=Nf(n),a[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return ke.forEach(this,(a,n)=>{a!=null&&a!==!1&&(r[n]=t&&ke.isArray(a)?a.join(", "):a)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const a=new this(t);return r.forEach(n=>a.set(n)),a}static accessor(t){const a=(this[m4]=this[m4]={accessors:{}}).accessors,n=this.prototype;function i(o){const c=dh(o);a[c]||(tL(n,o),a[c]=!0)}return ke.isArray(t)?t.forEach(i):i(t),this}};Mr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ke.reduceDescriptors(Mr.prototype,({value:s},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>s,set(a){this[r]=a}}});ke.freezeMethods(Mr);function iy(s,t){const r=this||Em,a=t||r,n=Mr.from(a.headers);let i=a.data;return ke.forEach(s,function(c){i=c.call(r,i,n.normalize(),t?t.status:void 0)}),n.normalize(),i}function WT(s){return!!(s&&s.__CANCEL__)}function Ld(s,t,r){at.call(this,s??"canceled",at.ERR_CANCELED,t,r),this.name="CanceledError"}ke.inherits(Ld,at,{__CANCEL__:!0});function YT(s,t,r){const a=r.config.validateStatus;!r.status||!a||a(r.status)?s(r):t(new at("Request failed with status code "+r.status,[at.ERR_BAD_REQUEST,at.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function sL(s){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return t&&t[1]||""}function rL(s,t){s=s||10;const r=new Array(s),a=new Array(s);let n=0,i=0,o;return t=t!==void 0?t:1e3,function(u){const h=Date.now(),m=a[i];o||(o=h),r[n]=u,a[n]=h;let f=i,p=0;for(;f!==n;)p+=r[f++],f=f%s;if(n=(n+1)%s,n===i&&(i=(i+1)%s),h-o<t)return;const j=m&&h-m;return j?Math.round(p*1e3/j):void 0}}function aL(s,t){let r=0,a=1e3/t,n,i;const o=(h,m=Date.now())=>{r=m,n=null,i&&(clearTimeout(i),i=null),s(...h)};return[(...h)=>{const m=Date.now(),f=m-r;f>=a?o(h,m):(n=h,i||(i=setTimeout(()=>{i=null,o(n)},a-f)))},()=>n&&o(n)]}const If=(s,t,r=3)=>{let a=0;const n=rL(50,250);return aL(i=>{const o=i.loaded,c=i.lengthComputable?i.total:void 0,u=o-a,h=n(u),m=o<=c;a=o;const f={loaded:o,total:c,progress:c?o/c:void 0,bytes:u,rate:h||void 0,estimated:h&&c&&m?(c-o)/h:void 0,event:i,lengthComputable:c!=null,[t?"download":"upload"]:!0};s(f)},r)},x4=(s,t)=>{const r=s!=null;return[a=>t[0]({lengthComputable:r,total:s,loaded:a}),t[1]]},f4=s=>(...t)=>ke.asap(()=>s(...t)),nL=rr.hasStandardBrowserEnv?((s,t)=>r=>(r=new URL(r,rr.origin),s.protocol===r.protocol&&s.host===r.host&&(t||s.port===r.port)))(new URL(rr.origin),rr.navigator&&/(msie|trident)/i.test(rr.navigator.userAgent)):()=>!0,iL=rr.hasStandardBrowserEnv?{write(s,t,r,a,n,i,o){if(typeof document>"u")return;const c=[`${s}=${encodeURIComponent(t)}`];ke.isNumber(r)&&c.push(`expires=${new Date(r).toUTCString()}`),ke.isString(a)&&c.push(`path=${a}`),ke.isString(n)&&c.push(`domain=${n}`),i===!0&&c.push("secure"),ke.isString(o)&&c.push(`SameSite=${o}`),document.cookie=c.join("; ")},read(s){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+s+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(s){this.write(s,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function lL(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function oL(s,t){return t?s.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):s}function GT(s,t,r){let a=!lL(t);return s&&(a||r==!1)?oL(s,t):t}const p4=s=>s instanceof Mr?{...s}:s;function Io(s,t){t=t||{};const r={};function a(h,m,f,p){return ke.isPlainObject(h)&&ke.isPlainObject(m)?ke.merge.call({caseless:p},h,m):ke.isPlainObject(m)?ke.merge({},m):ke.isArray(m)?m.slice():m}function n(h,m,f,p){if(ke.isUndefined(m)){if(!ke.isUndefined(h))return a(void 0,h,f,p)}else return a(h,m,f,p)}function i(h,m){if(!ke.isUndefined(m))return a(void 0,m)}function o(h,m){if(ke.isUndefined(m)){if(!ke.isUndefined(h))return a(void 0,h)}else return a(void 0,m)}function c(h,m,f){if(f in t)return a(h,m);if(f in s)return a(void 0,h)}const u={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(h,m,f)=>n(p4(h),p4(m),f,!0)};return ke.forEach(Object.keys({...s,...t}),function(m){const f=u[m]||n,p=f(s[m],t[m],m);ke.isUndefined(p)&&f!==c||(r[m]=p)}),r}const KT=s=>{const t=Io({},s);let{data:r,withXSRFToken:a,xsrfHeaderName:n,xsrfCookieName:i,headers:o,auth:c}=t;if(t.headers=o=Mr.from(o),t.url=VT(GT(t.baseURL,t.url,t.allowAbsoluteUrls),s.params,s.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),ke.isFormData(r)){if(rr.hasStandardBrowserEnv||rr.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(ke.isFunction(r.getHeaders)){const u=r.getHeaders(),h=["content-type","content-length"];Object.entries(u).forEach(([m,f])=>{h.includes(m.toLowerCase())&&o.set(m,f)})}}if(rr.hasStandardBrowserEnv&&(a&&ke.isFunction(a)&&(a=a(t)),a||a!==!1&&nL(t.url))){const u=n&&i&&iL.read(i);u&&o.set(n,u)}return t},cL=typeof XMLHttpRequest<"u",dL=cL&&function(s){return new Promise(function(r,a){const n=KT(s);let i=n.data;const o=Mr.from(n.headers).normalize();let{responseType:c,onUploadProgress:u,onDownloadProgress:h}=n,m,f,p,j,g;function v(){j&&j(),g&&g(),n.cancelToken&&n.cancelToken.unsubscribe(m),n.signal&&n.signal.removeEventListener("abort",m)}let y=new XMLHttpRequest;y.open(n.method.toUpperCase(),n.url,!0),y.timeout=n.timeout;function N(){if(!y)return;const k=Mr.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),T={data:!c||c==="text"||c==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:k,config:s,request:y};YT(function(z){r(z),v()},function(z){a(z),v()},T),y=null}"onloadend"in y?y.onloadend=N:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(N)},y.onabort=function(){y&&(a(new at("Request aborted",at.ECONNABORTED,s,y)),y=null)},y.onerror=function(_){const T=_&&_.message?_.message:"Network Error",E=new at(T,at.ERR_NETWORK,s,y);E.event=_||null,a(E),y=null},y.ontimeout=function(){let _=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const T=n.transitional||HT;n.timeoutErrorMessage&&(_=n.timeoutErrorMessage),a(new at(_,T.clarifyTimeoutError?at.ETIMEDOUT:at.ECONNABORTED,s,y)),y=null},i===void 0&&o.setContentType(null),"setRequestHeader"in y&&ke.forEach(o.toJSON(),function(_,T){y.setRequestHeader(T,_)}),ke.isUndefined(n.withCredentials)||(y.withCredentials=!!n.withCredentials),c&&c!=="json"&&(y.responseType=n.responseType),h&&([p,g]=If(h,!0),y.addEventListener("progress",p)),u&&y.upload&&([f,j]=If(u),y.upload.addEventListener("progress",f),y.upload.addEventListener("loadend",j)),(n.cancelToken||n.signal)&&(m=k=>{y&&(a(!k||k.type?new Ld(null,s,y):k),y.abort(),y=null)},n.cancelToken&&n.cancelToken.subscribe(m),n.signal&&(n.signal.aborted?m():n.signal.addEventListener("abort",m)));const S=sL(n.url);if(S&&rr.protocols.indexOf(S)===-1){a(new at("Unsupported protocol "+S+":",at.ERR_BAD_REQUEST,s));return}y.send(i||null)})},uL=(s,t)=>{const{length:r}=s=s?s.filter(Boolean):[];if(t||r){let a=new AbortController,n;const i=function(h){if(!n){n=!0,c();const m=h instanceof Error?h:this.reason;a.abort(m instanceof at?m:new Ld(m instanceof Error?m.message:m))}};let o=t&&setTimeout(()=>{o=null,i(new at(`timeout ${t} of ms exceeded`,at.ETIMEDOUT))},t);const c=()=>{s&&(o&&clearTimeout(o),o=null,s.forEach(h=>{h.unsubscribe?h.unsubscribe(i):h.removeEventListener("abort",i)}),s=null)};s.forEach(h=>h.addEventListener("abort",i));const{signal:u}=a;return u.unsubscribe=()=>ke.asap(c),u}},hL=function*(s,t){let r=s.byteLength;if(r<t){yield s;return}let a=0,n;for(;a<r;)n=a+t,yield s.slice(a,n),a=n},mL=async function*(s,t){for await(const r of xL(s))yield*hL(r,t)},xL=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const t=s.getReader();try{for(;;){const{done:r,value:a}=await t.read();if(r)break;yield a}}finally{await t.cancel()}},g4=(s,t,r,a)=>{const n=mL(s,t);let i=0,o,c=u=>{o||(o=!0,a&&a(u))};return new ReadableStream({async pull(u){try{const{done:h,value:m}=await n.next();if(h){c(),u.close();return}let f=m.byteLength;if(r){let p=i+=f;r(p)}u.enqueue(new Uint8Array(m))}catch(h){throw c(h),h}},cancel(u){return c(u),n.return()}},{highWaterMark:2})},b4=64*1024,{isFunction:M0}=ke,fL=(({Request:s,Response:t})=>({Request:s,Response:t}))(ke.global),{ReadableStream:y4,TextEncoder:v4}=ke.global,j4=(s,...t)=>{try{return!!s(...t)}catch{return!1}},pL=s=>{s=ke.merge.call({skipUndefined:!0},fL,s);const{fetch:t,Request:r,Response:a}=s,n=t?M0(t):typeof fetch=="function",i=M0(r),o=M0(a);if(!n)return!1;const c=n&&M0(y4),u=n&&(typeof v4=="function"?(g=>v=>g.encode(v))(new v4):async g=>new Uint8Array(await new r(g).arrayBuffer())),h=i&&c&&j4(()=>{let g=!1;const v=new r(rr.origin,{body:new y4,method:"POST",get duplex(){return g=!0,"half"}}).headers.has("Content-Type");return g&&!v}),m=o&&c&&j4(()=>ke.isReadableStream(new a("").body)),f={stream:m&&(g=>g.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(g=>{!f[g]&&(f[g]=(v,y)=>{let N=v&&v[g];if(N)return N.call(v);throw new at(`Response type '${g}' is not supported`,at.ERR_NOT_SUPPORT,y)})});const p=async g=>{if(g==null)return 0;if(ke.isBlob(g))return g.size;if(ke.isSpecCompliantForm(g))return(await new r(rr.origin,{method:"POST",body:g}).arrayBuffer()).byteLength;if(ke.isArrayBufferView(g)||ke.isArrayBuffer(g))return g.byteLength;if(ke.isURLSearchParams(g)&&(g=g+""),ke.isString(g))return(await u(g)).byteLength},j=async(g,v)=>{const y=ke.toFiniteNumber(g.getContentLength());return y??p(v)};return async g=>{let{url:v,method:y,data:N,signal:S,cancelToken:k,timeout:_,onDownloadProgress:T,onUploadProgress:E,responseType:z,headers:M,withCredentials:C="same-origin",fetchOptions:A}=KT(g),Z=t||fetch;z=z?(z+"").toLowerCase():"text";let I=uL([S,k&&k.toAbortSignal()],_),V=null;const R=I&&I.unsubscribe&&(()=>{I.unsubscribe()});let q;try{if(E&&h&&y!=="get"&&y!=="head"&&(q=await j(M,N))!==0){let K=new r(v,{method:"POST",body:N,duplex:"half"}),$;if(ke.isFormData(N)&&($=K.headers.get("content-type"))&&M.setContentType($),K.body){const[le,ie]=x4(q,If(f4(E)));N=g4(K.body,b4,le,ie)}}ke.isString(C)||(C=C?"include":"omit");const J=i&&"credentials"in r.prototype,se={...A,signal:I,method:y.toUpperCase(),headers:M.normalize().toJSON(),body:N,duplex:"half",credentials:J?C:void 0};V=i&&new r(v,se);let Y=await(i?Z(V,A):Z(v,se));const ee=m&&(z==="stream"||z==="response");if(m&&(T||ee&&R)){const K={};["status","statusText","headers"].forEach(oe=>{K[oe]=Y[oe]});const $=ke.toFiniteNumber(Y.headers.get("content-length")),[le,ie]=T&&x4($,If(f4(T),!0))||[];Y=new a(g4(Y.body,b4,le,()=>{ie&&ie(),R&&R()}),K)}z=z||"text";let te=await f[ke.findKey(f,z)||"text"](Y,g);return!ee&&R&&R(),await new Promise((K,$)=>{YT(K,$,{data:te,headers:Mr.from(Y.headers),status:Y.status,statusText:Y.statusText,config:g,request:V})})}catch(J){throw R&&R(),J&&J.name==="TypeError"&&/Load failed|fetch/i.test(J.message)?Object.assign(new at("Network Error",at.ERR_NETWORK,g,V),{cause:J.cause||J}):at.from(J,J&&J.code,g,V)}}},gL=new Map,XT=s=>{let t=s&&s.env||{};const{fetch:r,Request:a,Response:n}=t,i=[a,n,r];let o=i.length,c=o,u,h,m=gL;for(;c--;)u=i[c],h=m.get(u),h===void 0&&m.set(u,h=c?new Map:pL(t)),m=h;return h};XT();const uN={http:OO,xhr:dL,fetch:{get:XT}};ke.forEach(uN,(s,t)=>{if(s){try{Object.defineProperty(s,"name",{value:t})}catch{}Object.defineProperty(s,"adapterName",{value:t})}});const w4=s=>`- ${s}`,bL=s=>ke.isFunction(s)||s===null||s===!1;function yL(s,t){s=ke.isArray(s)?s:[s];const{length:r}=s;let a,n;const i={};for(let o=0;o<r;o++){a=s[o];let c;if(n=a,!bL(a)&&(n=uN[(c=String(a)).toLowerCase()],n===void 0))throw new at(`Unknown adapter '${c}'`);if(n&&(ke.isFunction(n)||(n=n.get(t))))break;i[c||"#"+o]=n}if(!n){const o=Object.entries(i).map(([u,h])=>`adapter ${u} `+(h===!1?"is not supported by the environment":"is not available in the build"));let c=r?o.length>1?`since :
`+o.map(w4).join(`
`):" "+w4(o[0]):"as no adapter specified";throw new at("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return n}const ZT={getAdapter:yL,adapters:uN};function ly(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new Ld(null,s)}function N4(s){return ly(s),s.headers=Mr.from(s.headers),s.data=iy.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),ZT.getAdapter(s.adapter||Em.adapter,s)(s).then(function(a){return ly(s),a.data=iy.call(s,s.transformResponse,a),a.headers=Mr.from(a.headers),a},function(a){return WT(a)||(ly(s),a&&a.response&&(a.response.data=iy.call(s,s.transformResponse,a.response),a.response.headers=Mr.from(a.response.headers))),Promise.reject(a)})}const QT="1.13.1",gp={};["object","boolean","number","function","string","symbol"].forEach((s,t)=>{gp[s]=function(a){return typeof a===s||"a"+(t<1?"n ":" ")+s}});const _4={};gp.transitional=function(t,r,a){function n(i,o){return"[Axios v"+QT+"] Transitional option '"+i+"'"+o+(a?". "+a:"")}return(i,o,c)=>{if(t===!1)throw new at(n(o," has been removed"+(r?" in "+r:"")),at.ERR_DEPRECATED);return r&&!_4[o]&&(_4[o]=!0,console.warn(n(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,o,c):!0}};gp.spelling=function(t){return(r,a)=>(console.warn(`${a} is likely a misspelling of ${t}`),!0)};function vL(s,t,r){if(typeof s!="object")throw new at("options must be an object",at.ERR_BAD_OPTION_VALUE);const a=Object.keys(s);let n=a.length;for(;n-- >0;){const i=a[n],o=t[i];if(o){const c=s[i],u=c===void 0||o(c,i,s);if(u!==!0)throw new at("option "+i+" must be "+u,at.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new at("Unknown option "+i,at.ERR_BAD_OPTION)}}const _f={assertOptions:vL,validators:gp},sn=_f.validators;let Ro=class{constructor(t){this.defaults=t||{},this.interceptors={request:new h4,response:new h4}}async request(t,r){try{return await this._request(t,r)}catch(a){if(a instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{a.stack?i&&!String(a.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+i):a.stack=i}catch{}}throw a}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Io(this.defaults,r);const{transitional:a,paramsSerializer:n,headers:i}=r;a!==void 0&&_f.assertOptions(a,{silentJSONParsing:sn.transitional(sn.boolean),forcedJSONParsing:sn.transitional(sn.boolean),clarifyTimeoutError:sn.transitional(sn.boolean)},!1),n!=null&&(ke.isFunction(n)?r.paramsSerializer={serialize:n}:_f.assertOptions(n,{encode:sn.function,serialize:sn.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),_f.assertOptions(r,{baseUrl:sn.spelling("baseURL"),withXsrfToken:sn.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&ke.merge(i.common,i[r.method]);i&&ke.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),r.headers=Mr.concat(o,i);const c=[];let u=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(r)===!1||(u=u&&v.synchronous,c.unshift(v.fulfilled,v.rejected))});const h=[];this.interceptors.response.forEach(function(v){h.push(v.fulfilled,v.rejected)});let m,f=0,p;if(!u){const g=[N4.bind(this),void 0];for(g.unshift(...c),g.push(...h),p=g.length,m=Promise.resolve(r);f<p;)m=m.then(g[f++],g[f++]);return m}p=c.length;let j=r;for(;f<p;){const g=c[f++],v=c[f++];try{j=g(j)}catch(y){v.call(this,y);break}}try{m=N4.call(this,j)}catch(g){return Promise.reject(g)}for(f=0,p=h.length;f<p;)m=m.then(h[f++],h[f++]);return m}getUri(t){t=Io(this.defaults,t);const r=GT(t.baseURL,t.url,t.allowAbsoluteUrls);return VT(r,t.params,t.paramsSerializer)}};ke.forEach(["delete","get","head","options"],function(t){Ro.prototype[t]=function(r,a){return this.request(Io(a||{},{method:t,url:r,data:(a||{}).data}))}});ke.forEach(["post","put","patch"],function(t){function r(a){return function(i,o,c){return this.request(Io(c||{},{method:t,headers:a?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Ro.prototype[t]=r(),Ro.prototype[t+"Form"]=r(!0)});let jL=class JT{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const a=this;this.promise.then(n=>{if(!a._listeners)return;let i=a._listeners.length;for(;i-- >0;)a._listeners[i](n);a._listeners=null}),this.promise.then=n=>{let i;const o=new Promise(c=>{a.subscribe(c),i=c}).then(n);return o.cancel=function(){a.unsubscribe(i)},o},t(function(i,o,c){a.reason||(a.reason=new Ld(i,o,c),r(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=a=>{t.abort(a)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new JT(function(n){t=n}),cancel:t}}};function wL(s){return function(r){return s.apply(null,r)}}function NL(s){return ke.isObject(s)&&s.isAxiosError===!0}const Wj={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Wj).forEach(([s,t])=>{Wj[t]=s});function eE(s){const t=new Ro(s),r=DT(Ro.prototype.request,t);return ke.extend(r,Ro.prototype,t,{allOwnKeys:!0}),ke.extend(r,t,null,{allOwnKeys:!0}),r.create=function(n){return eE(Io(s,n))},r}const bs=eE(Em);bs.Axios=Ro;bs.CanceledError=Ld;bs.CancelToken=jL;bs.isCancel=WT;bs.VERSION=QT;bs.toFormData=pp;bs.AxiosError=at;bs.Cancel=bs.CanceledError;bs.all=function(t){return Promise.all(t)};bs.spread=wL;bs.isAxiosError=NL;bs.mergeConfig=Io;bs.AxiosHeaders=Mr;bs.formToJSON=s=>qT(ke.isHTMLForm(s)?new FormData(s):s);bs.getAdapter=ZT.getAdapter;bs.HttpStatusCode=Wj;bs.default=bs;const{Axios:uae,AxiosError:hae,CanceledError:mae,isCancel:xae,CancelToken:fae,VERSION:pae,all:gae,Cancel:bae,isAxiosError:yae,spread:vae,toFormData:jae,AxiosHeaders:wae,HttpStatusCode:Nae,formToJSON:_ae,getAdapter:kae,mergeConfig:Sae}=bs,k4={baseURL:"",timeout:1e4},fe=bs.create({baseURL:k4.baseURL,timeout:k4.timeout,headers:{"Content-Type":"application/json"}});fe.interceptors.request.use(s=>{const t=localStorage.getItem("auth");if(t)try{const{username:r,password:a}=JSON.parse(t),n=`Basic ${btoa(`${r}:${a}`)}`;s.headers.Authorization=n,console.log(" Auth added for:",r)}catch(r){console.error(" Error parsing auth from localStorage:",r)}else console.log(" No auth in localStorage - request will be unauthorized");return s},s=>(console.error(" Axios interceptor error:",s),Promise.reject(s)));fe.interceptors.response.use(s=>s,s=>{if(s.response?.status===401&&(console.error(" 401 Unauthorized - redirecting to login"),localStorage.removeItem("auth"),!window.location.pathname.includes("/login"))){const t="/admin/login";window.location.href=t}return Promise.reject(s)});const ps={async getDashboardMetrics(){return(await fe.get("/admin/reports/dashboard-metrics")).data},async getFinanceCategories(s){return(await fe.get(`/admin/finance/categories?type=${s}`)).data},async createTransaction(s){return(await fe.post("/admin/finance/transactions",s)).data},async sendDailyReport(){return(await fe.post("/admin/api/reports/daily")).data},async clearCache(){return(await fe.post("/admin/api/cache/clear")).data},async getProjects(s=!1){return(await fe.get(`/admin/api/projects/?show_archived=${s}`)).data},async getProjectStatistics(s=!1){return(await fe.get(`/admin/api/projects/statistics?show_archived=${s}`)).data},async getProject(s){return(await fe.get(`/admin/api/projects/${s}`)).data},async createProject(s){const t=new FormData;return Object.keys(s).forEach(a=>{s[a]!==null&&s[a]!==void 0&&s[a]!==""&&t.append(a,s[a])}),(await fe.post("/admin/api/projects/create",t,{headers:{"Content-Type":"multipart/form-data"}})).data},async updateProject(s,t){return(await fe.put(`/admin/api/projects/${s}`,t)).data},async deleteProject(s){return(await fe.delete(`/admin/api/projects/${s}`)).data},async archiveProject(s){return(await fe.post(`/admin/api/projects/${s}/archive`)).data},async completeProject(s){return(await fe.post(`/admin/api/projects/${s}/complete`)).data},async updateProjectStatus(s,t,r){return(await fe.put(`/admin/api/projects/${s}/status`,{status:t,comment:r})).data},async getProjectFiles(s){return(await fe.get(`/admin/api/projects/${s}/files`)).data},async uploadProjectFile(s,t){const r=new FormData;return r.append("file",t),(await fe.post(`/admin/api/projects/${s}/files`,r,{headers:{"Content-Type":"multipart/form-data"}})).data},async downloadProjectFile(s,t){return(await fe.get(`/admin/api/projects/${s}/files/${t}`,{responseType:"blob"})).data},async deleteProjectFile(s,t){return(await fe.delete(`/admin/api/projects/${s}/files/${t}`)).data},async exportProjects(){return(await fe.get("/admin/api/export/projects")).data},async getRecentProjects(){return(await fe.get("/admin/projects/recent")).data},async getExecutors(){return(await fe.get("/admin/api/users/executors")).data},async getClients(){return(await fe.get("/admin/api/clients/simple")).data},async getRecentUsers(){return(await fe.get("/admin/users/recent")).data},async sendMessageToClient(s,t){return(await fe.post("/admin/api/send-message",{telegram_id:s,message:t})).data},async getStatistics(){return(await fe.get("/admin/reports/statistics")).data},async getProjectsChartData(){return(await fe.get("/admin/reports/projects-chart")).data},async getStatusChartData(){return(await fe.get("/admin/reports/status-chart")).data}},tE=w.createContext(void 0),_L=({children:s})=>{const[t,r]=w.useState(null),[a,n]=w.useState(!0);w.useEffect(()=>{(()=>{try{const g=localStorage.getItem("auth");if(g){const v=JSON.parse(g);r({username:v.username,role:v.role,email:v.email,firstName:v.firstName,lastName:v.lastName})}}catch(g){console.error("Error loading user from localStorage:",g),localStorage.removeItem("auth")}finally{n(!1)}})()},[]);const p={user:t,isAuthenticated:!!t,isLoading:a,login:async(j,g)=>{try{const v=await fe.post("/admin/api/auth/login",{username:j,password:g});if(v.status===200&&v.data.success){const{user:y}=v.data,N=y.role?.toUpperCase()||"EXECUTOR",S={username:j,password:g,role:N,firstName:y.first_name,lastName:y.last_name,email:y.email};localStorage.setItem("auth",JSON.stringify(S)),r({id:y.id,username:j,role:N,email:y.email,firstName:y.first_name,lastName:y.last_name,telegramId:y.telegram_id})}else throw new Error("Login failed")}catch(v){throw console.error("Login error:",v),v}},logout:()=>{localStorage.removeItem("auth"),r(null);const j="/admin";window.location.href=j+"/login"},isOwner:()=>t?.role==="OWNER",isTeamlead:()=>t?.role==="TEAMLEAD",isExecutor:()=>t?.role==="EXECUTOR",isClient:()=>t?.role==="CLIENT",hasRole:j=>t?Array.isArray(j)?j.includes(t.role):t.role===j:!1};return e.jsx(tE.Provider,{value:p,children:s})},bp=()=>{const s=w.useContext(tE);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),SL=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,a)=>a?a.toUpperCase():r.toLowerCase()),S4=s=>{const t=SL(s);return t.charAt(0).toUpperCase()+t.slice(1)},sE=(...s)=>s.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim(),CL=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var TL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=w.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:n="",children:i,iconNode:o,...c},u)=>w.createElement("svg",{ref:u,...TL,width:t,height:t,stroke:s,strokeWidth:a?Number(r)*24/Number(t):r,className:sE("lucide",n),...!i&&!CL(c)&&{"aria-hidden":"true"},...c},[...o.map(([h,m])=>w.createElement(h,m)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=(s,t)=>{const r=w.forwardRef(({className:a,...n},i)=>w.createElement(EL,{ref:i,iconNode:t,className:sE(`lucide-${kL(S4(s))}`,`lucide-${s}`,a),...n}));return r.displayName=S4(s),r};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],yn=we("activity",AL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],_l=we("archive",DL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],C4=we("arrow-down",RL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],rE=we("arrow-left",ML);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],LL=we("arrow-right",OL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],T4=we("arrow-up",PL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],$f=we("award",BL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],zL=we("banknote",FL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Zr=we("bell",IL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],UL=we("book-marked",$L);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],E4=we("book-open",VL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],qL=we("book",HL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],kf=we("bot",WL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YL=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],vn=we("briefcase",YL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],O0=we("bug",GL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],A4=we("building-2",KL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],ZL=we("calendar-check",XL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],pt=we("calendar",QL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Fr=we("chart-column",JL);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eP=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]],tP=we("chart-no-axes-column-increasing",eP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sP=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],Lh=we("chart-no-axes-column",sP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rP=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],yp=we("chart-pie",rP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ss=we("check",aP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nP=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],_i=we("chevron-down",nP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],aE=we("chevron-left",iP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],jn=we("chevron-right",lP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],vp=we("chevron-up",oP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],dP=we("circle-arrow-down",cP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],qe=we("circle-alert",uP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}],["path",{d:"M8 12h8",key:"1wcyev"}]],Yj=we("circle-arrow-right",hP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],xP=we("circle-arrow-up",mP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fP=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],it=we("circle-check-big",fP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],zr=we("circle-check",pP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gP=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],bP=we("circle-play",gP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],vP=we("circle-question-mark",yP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]],wP=we("circle-stop",jP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],nE=we("circle",NP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],kl=we("circle-x",_P);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kP=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],SP=we("clipboard-check",kP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CP=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ue=we("clock",CP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TP=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],EP=we("cloud",TP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AP=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],iE=we("code",AP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]],RP=we("columns-2",DP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Ks=we("copy",MP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OP=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],lE=we("credit-card",OP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],PP=we("crown",LP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BP=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Ge=we("dollar-sign",BP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FP=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],wt=we("download",FP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zP=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Gc=we("external-link",zP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IP=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],$o=we("eye-off",IP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ft=we("eye",$P);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UP=[["path",{d:"M13.659 22H18a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v11.5",key:"4pqfef"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 12v-1",key:"1ej8lb"}],["path",{d:"M8 18v-2",key:"qcmpov"}],["path",{d:"M8 7V6",key:"1nbb54"}],["circle",{cx:"8",cy:"20",r:"2",key:"ckkr5m"}]],D4=we("file-archive",UP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VP=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]],HP=we("file-code",VP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qP=[["path",{d:"M4 6.835V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2h-.343",key:"1vfytu"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M2 19a2 2 0 0 1 4 0v1a2 2 0 0 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 0 1-4 0v-1a2 2 0 0 1 4 0",key:"1etmh7"}]],R4=we("file-headphone",qP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WP=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],YP=we("file-image",WP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GP=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M15.033 13.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56v-4.704a.645.645 0 0 1 .967-.56z",key:"1tzo1f"}]],Sf=we("file-play",GP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KP=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],M4=we("file-spreadsheet",KP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XP=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ie=we("file-text",XP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZP=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],Tr=we("file",ZP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QP=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],Cf=we("flag",QP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JP=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],eB=we("flame",JP);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tB=[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]],Ia=we("folder-kanban",tB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sB=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],oy=we("folder-open",sB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rB=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Gj=we("folder",rB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aB=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],gr=we("funnel",aB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nB=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],O4=we("git-branch",nB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iB=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],L4=we("git-compare",iB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lB=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],oE=we("github",lB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],em=we("globe",oB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cB=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],cE=we("grid-3x3",cB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dB=[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]],P4=we("handshake",dB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uB=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],hB=we("hash",uB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mB=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],B4=we("heart",mB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xB=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],fB=we("history",xB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pB=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],dE=we("house",pB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gB=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],tm=we("image",gB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],uE=we("info",bB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yB=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Kj=we("key",yB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vB=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],jB=we("keyboard",vB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wB=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],NB=we("layers",wB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _B=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],hN=we("layout-grid",_B);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kB=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Xj=we("lightbulb",kB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SB=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],vl=we("link",SB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CB=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]],cy=we("list-checks",CB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TB=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]],Zj=we("list-todo",TB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EB=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Am=we("list",EB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AB=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Dt=we("loader-circle",AB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DB=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Kc=we("loader",DB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RB=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],MB=we("lock-open",RB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OB=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Uf=we("lock",OB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LB=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],hE=we("log-out",LB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PB=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],F4=we("log-in",PB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BB=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],gi=we("mail",BB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FB=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],zB=we("maximize-2",FB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IB=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],mE=we("menu",IB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $B=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Ha=we("message-circle",$B);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UB=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Es=we("message-square",UB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VB=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],xE=we("mic-off",VB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HB=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],sm=we("mic",HB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qB=[["path",{d:"M5 12h14",key:"1ays0h"}]],z4=we("minus",qB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WB=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],YB=we("mouse-pointer",WB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GB=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],Ph=we("network",GB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KB=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],fE=we("package",KB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XB=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],I4=we("palette",XB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZB=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],QB=we("panels-top-left",ZB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JB=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],rd=we("paperclip",JB);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],rm=we("pause",eF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Zs=we("pen",tF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=[["path",{d:"M10.1 13.9a14 14 0 0 0 3.732 2.668 1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2 18 18 0 0 1-12.728-5.272",key:"1wngk7"}],["path",{d:"M22 2 2 22",key:"y4kqgn"}],["path",{d:"M4.76 13.582A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 .244.473",key:"10hv5p"}]],pE=we("phone-off",sF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],fi=we("phone",rF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],$4=we("pin",aF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],bi=we("play",nF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iF=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]],U4=we("plug",iF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lF=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ve=we("plus",lF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],rs=we("refresh-cw",oF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],dF=we("repeat",cF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uF=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],wn=we("rotate-ccw",uF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],mF=we("rotate-cw",hF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ka=we("save",xF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fF=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Fs=we("search",fF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Qs=we("send",pF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gF=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],hn=we("server",gF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Na=we("settings",bF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],mN=we("share-2",yF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vF=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Er=we("shield",vF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],Qj=we("sliders-vertical",jF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ar=we("square-check-big",wF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],kn=we("square-pen",NF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Jj=we("square",_F);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kF=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Ps=we("star",kF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],CF=we("table",SF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],di=we("tag",TF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Ar=we("target",EF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],DF=we("test-tube",AF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RF=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],V4=we("thumbs-down",RF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],Bh=we("thumbs-up",MF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],gE=we("toggle-left",OF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LF=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],PF=we("toggle-right",LF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BF=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Xe=we("trash-2",BF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["rect",{width:"3",height:"9",x:"7",y:"7",key:"14n3xi"}],["rect",{width:"3",height:"5",x:"14",y:"7",key:"s4azjd"}]],zF=we("trello",FF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Sa=we("trending-down",IF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $F=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],ct=we("trending-up",$F);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ir=we("triangle-alert",UF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],HF=we("trophy",VF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qF=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Vf=we("type",qF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WF=[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]],H4=we("unlink",WF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YF=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],fn=we("upload",YF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GF=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],KF=we("user-check",GF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],xN=we("user-plus",XF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],QF=we("user-x",ZF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JF=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],st=we("user",JF);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ez=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],tt=we("users",ez);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tz=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],L0=we("video",tz);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sz=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],fN=we("wallet",sz);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rz=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ae=we("x",rz);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const az=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],nz=we("zoom-in",az);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iz=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ua=we("zap",iz);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lz=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],oz=we("zoom-out",lz);function li(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function bE(s,t){s.prototype=Object.create(t.prototype),s.prototype.constructor=s,s.__proto__=t}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var ea={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},xd={duration:.5,overwrite:!1,delay:0},pN,Xs,Gt,ba=1e8,Ut=1/ba,ew=Math.PI*2,cz=ew/4,dz=0,yE=Math.sqrt,uz=Math.cos,hz=Math.sin,Is=function(t){return typeof t=="string"},cs=function(t){return typeof t=="function"},yi=function(t){return typeof t=="number"},gN=function(t){return typeof t>"u"},Nn=function(t){return typeof t=="object"},Or=function(t){return t!==!1},bN=function(){return typeof window<"u"},P0=function(t){return cs(t)||Is(t)},vE=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},dr=Array.isArray,tw=/(?:-?\.?\d|\.)+/gi,jE=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Xc=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,dy=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,wE=/[+-]=-?[.\d]+/,NE=/[^,'"\[\]\s]+/gi,mz=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Qt,on,sw,yN,ta={},Hf={},_E,kE=function(t){return(Hf=fd(t,ta))&&Ir},vN=function(t,r){return console.warn("Invalid property",t,"set to",r,"Missing plugin? gsap.registerPlugin()")},am=function(t,r){return!r&&console.warn(t)},SE=function(t,r){return t&&(ta[t]=r)&&Hf&&(Hf[t]=r)||ta},nm=function(){return 0},xz={suppressEvents:!0,isStart:!0,kill:!1},Tf={suppressEvents:!0,kill:!1},fz={suppressEvents:!0},jN={},jl=[],rw={},CE,Kr={},uy={},q4=30,Ef=[],wN="",NN=function(t){var r=t[0],a,n;if(Nn(r)||cs(r)||(t=[t]),!(a=(r._gsap||{}).harness)){for(n=Ef.length;n--&&!Ef[n].targetTest(r););a=Ef[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new ZE(t[n],a)))||t.splice(n,1);return t},Mo=function(t){return t._gsap||NN(ya(t))[0]._gsap},TE=function(t,r,a){return(a=t[r])&&cs(a)?t[r]():gN(a)&&t.getAttribute&&t.getAttribute(r)||a},Lr=function(t,r){return(t=t.split(",")).forEach(r)||t},fs=function(t){return Math.round(t*1e5)/1e5||0},Ts=function(t){return Math.round(t*1e7)/1e7||0},ad=function(t,r){var a=r.charAt(0),n=parseFloat(r.substr(2));return t=parseFloat(t),a==="+"?t+n:a==="-"?t-n:a==="*"?t*n:t/n},pz=function(t,r){for(var a=r.length,n=0;t.indexOf(r[n])<0&&++n<a;);return n<a},qf=function(){var t=jl.length,r=jl.slice(0),a,n;for(rw={},jl.length=0,a=0;a<t;a++)n=r[a],n&&n._lazy&&(n.render(n._lazy[0],n._lazy[1],!0)._lazy=0)},_N=function(t){return!!(t._initted||t._startAt||t.add)},EE=function(t,r,a,n){jl.length&&!Xs&&qf(),t.render(r,a,!!(Xs&&r<0&&_N(t))),jl.length&&!Xs&&qf()},AE=function(t){var r=parseFloat(t);return(r||r===0)&&(t+"").match(NE).length<2?r:Is(t)?t.trim():t},DE=function(t){return t},sa=function(t,r){for(var a in r)a in t||(t[a]=r[a]);return t},gz=function(t){return function(r,a){for(var n in a)n in r||n==="duration"&&t||n==="ease"||(r[n]=a[n])}},fd=function(t,r){for(var a in r)t[a]=r[a];return t},W4=function s(t,r){for(var a in r)a!=="__proto__"&&a!=="constructor"&&a!=="prototype"&&(t[a]=Nn(r[a])?s(t[a]||(t[a]={}),r[a]):r[a]);return t},Wf=function(t,r){var a={},n;for(n in t)n in r||(a[n]=t[n]);return a},Fh=function(t){var r=t.parent||Qt,a=t.keyframes?gz(dr(t.keyframes)):sa;if(Or(t.inherit))for(;r;)a(t,r.vars.defaults),r=r.parent||r._dp;return t},bz=function(t,r){for(var a=t.length,n=a===r.length;n&&a--&&t[a]===r[a];);return a<0},RE=function(t,r,a,n,i){var o=t[n],c;if(i)for(c=r[i];o&&o[i]>c;)o=o._prev;return o?(r._next=o._next,o._next=r):(r._next=t[a],t[a]=r),r._next?r._next._prev=r:t[n]=r,r._prev=o,r.parent=r._dp=t,r},jp=function(t,r,a,n){a===void 0&&(a="_first"),n===void 0&&(n="_last");var i=r._prev,o=r._next;i?i._next=o:t[a]===r&&(t[a]=o),o?o._prev=i:t[n]===r&&(t[n]=i),r._next=r._prev=r.parent=null},Sl=function(t,r){t.parent&&(!r||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},Oo=function(t,r){if(t&&(!r||r._end>t._dur||r._start<0))for(var a=t;a;)a._dirty=1,a=a.parent;return t},yz=function(t){for(var r=t.parent;r&&r.parent;)r._dirty=1,r.totalDuration(),r=r.parent;return t},aw=function(t,r,a,n){return t._startAt&&(Xs?t._startAt.revert(Tf):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(r,!0,n))},vz=function s(t){return!t||t._ts&&s(t.parent)},Y4=function(t){return t._repeat?pd(t._tTime,t=t.duration()+t._rDelay)*t:0},pd=function(t,r){var a=Math.floor(t=Ts(t/r));return t&&a===t?a-1:a},Yf=function(t,r){return(t-r._start)*r._ts+(r._ts>=0?0:r._dirty?r.totalDuration():r._tDur)},wp=function(t){return t._end=Ts(t._start+(t._tDur/Math.abs(t._ts||t._rts||Ut)||0))},Np=function(t,r){var a=t._dp;return a&&a.smoothChildTiming&&t._ts&&(t._start=Ts(a._time-(t._ts>0?r/t._ts:((t._dirty?t.totalDuration():t._tDur)-r)/-t._ts)),wp(t),a._dirty||Oo(a,t)),t},ME=function(t,r){var a;if((r._time||!r._dur&&r._initted||r._start<t._time&&(r._dur||!r.add))&&(a=Yf(t.rawTime(),r),(!r._dur||Dm(0,r.totalDuration(),a)-r._tTime>Ut)&&r.render(a,!0)),Oo(t,r)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(a=t;a._dp;)a.rawTime()>=0&&a.totalTime(a._tTime),a=a._dp;t._zTime=-Ut}},un=function(t,r,a,n){return r.parent&&Sl(r),r._start=Ts((yi(a)?a:a||t!==Qt?fa(t,a,r):t._time)+r._delay),r._end=Ts(r._start+(r.totalDuration()/Math.abs(r.timeScale())||0)),RE(t,r,"_first","_last",t._sort?"_start":0),nw(r)||(t._recent=r),n||ME(t,r),t._ts<0&&Np(t,t._tTime),t},OE=function(t,r){return(ta.ScrollTrigger||vN("scrollTrigger",r))&&ta.ScrollTrigger.create(r,t)},LE=function(t,r,a,n,i){if(SN(t,r,i),!t._initted)return 1;if(!a&&t._pt&&!Xs&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&CE!==Qr.frame)return jl.push(t),t._lazy=[i,n],1},jz=function s(t){var r=t.parent;return r&&r._ts&&r._initted&&!r._lock&&(r.rawTime()<0||s(r))},nw=function(t){var r=t.data;return r==="isFromStart"||r==="isStart"},wz=function(t,r,a,n){var i=t.ratio,o=r<0||!r&&(!t._start&&jz(t)&&!(!t._initted&&nw(t))||(t._ts<0||t._dp._ts<0)&&!nw(t))?0:1,c=t._rDelay,u=0,h,m,f;if(c&&t._repeat&&(u=Dm(0,t._tDur,r),m=pd(u,c),t._yoyo&&m&1&&(o=1-o),m!==pd(t._tTime,c)&&(i=1-o,t.vars.repeatRefresh&&t._initted&&t.invalidate())),o!==i||Xs||n||t._zTime===Ut||!r&&t._zTime){if(!t._initted&&LE(t,r,n,a,u))return;for(f=t._zTime,t._zTime=r||(a?Ut:0),a||(a=r&&!f),t.ratio=o,t._from&&(o=1-o),t._time=0,t._tTime=u,h=t._pt;h;)h.r(o,h.d),h=h._next;r<0&&aw(t,r,a,!0),t._onUpdate&&!a&&Jr(t,"onUpdate"),u&&t._repeat&&!a&&t.parent&&Jr(t,"onRepeat"),(r>=t._tDur||r<0)&&t.ratio===o&&(o&&Sl(t,1),!a&&!Xs&&(Jr(t,o?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=r)},Nz=function(t,r,a){var n;if(a>r)for(n=t._first;n&&n._start<=a;){if(n.data==="isPause"&&n._start>r)return n;n=n._next}else for(n=t._last;n&&n._start>=a;){if(n.data==="isPause"&&n._start<r)return n;n=n._prev}},gd=function(t,r,a,n){var i=t._repeat,o=Ts(r)||0,c=t._tTime/t._tDur;return c&&!n&&(t._time*=o/t._dur),t._dur=o,t._tDur=i?i<0?1e10:Ts(o*(i+1)+t._rDelay*i):o,c>0&&!n&&Np(t,t._tTime=t._tDur*c),t.parent&&wp(t),a||Oo(t.parent,t),t},G4=function(t){return t instanceof fr?Oo(t):gd(t,t._dur)},_z={_start:0,endTime:nm,totalDuration:nm},fa=function s(t,r,a){var n=t.labels,i=t._recent||_z,o=t.duration()>=ba?i.endTime(!1):t._dur,c,u,h;return Is(r)&&(isNaN(r)||r in n)?(u=r.charAt(0),h=r.substr(-1)==="%",c=r.indexOf("="),u==="<"||u===">"?(c>=0&&(r=r.replace(/=/,"")),(u==="<"?i._start:i.endTime(i._repeat>=0))+(parseFloat(r.substr(1))||0)*(h?(c<0?i:a).totalDuration()/100:1)):c<0?(r in n||(n[r]=o),n[r]):(u=parseFloat(r.charAt(c-1)+r.substr(c+1)),h&&a&&(u=u/100*(dr(a)?a[0]:a).totalDuration()),c>1?s(t,r.substr(0,c-1),a)+u:o+u)):r==null?o:+r},zh=function(t,r,a){var n=yi(r[1]),i=(n?2:1)+(t<2?0:1),o=r[i],c,u;if(n&&(o.duration=r[1]),o.parent=a,t){for(c=o,u=a;u&&!("immediateRender"in c);)c=u.vars.defaults||{},u=Or(u.vars.inherit)&&u.parent;o.immediateRender=Or(c.immediateRender),t<2?o.runBackwards=1:o.startAt=r[i-1]}return new Cs(r[0],o,r[i+1])},Dl=function(t,r){return t||t===0?r(t):r},Dm=function(t,r,a){return a<t?t:a>r?r:a},nr=function(t,r){return!Is(t)||!(r=mz.exec(t))?"":r[1]},kz=function(t,r,a){return Dl(a,function(n){return Dm(t,r,n)})},iw=[].slice,PE=function(t,r){return t&&Nn(t)&&"length"in t&&(!r&&!t.length||t.length-1 in t&&Nn(t[0]))&&!t.nodeType&&t!==on},Sz=function(t,r,a){return a===void 0&&(a=[]),t.forEach(function(n){var i;return Is(n)&&!r||PE(n,1)?(i=a).push.apply(i,ya(n)):a.push(n)})||a},ya=function(t,r,a){return Gt&&!r&&Gt.selector?Gt.selector(t):Is(t)&&!a&&(sw||!bd())?iw.call((r||yN).querySelectorAll(t),0):dr(t)?Sz(t,a):PE(t)?iw.call(t,0):t?[t]:[]},lw=function(t){return t=ya(t)[0]||am("Invalid scope")||{},function(r){var a=t.current||t.nativeElement||t;return ya(r,a.querySelectorAll?a:a===t?am("Invalid scope")||yN.createElement("div"):t)}},BE=function(t){return t.sort(function(){return .5-Math.random()})},FE=function(t){if(cs(t))return t;var r=Nn(t)?t:{each:t},a=Lo(r.ease),n=r.from||0,i=parseFloat(r.base)||0,o={},c=n>0&&n<1,u=isNaN(n)||c,h=r.axis,m=n,f=n;return Is(n)?m=f={center:.5,edges:.5,end:1}[n]||0:!c&&u&&(m=n[0],f=n[1]),function(p,j,g){var v=(g||r).length,y=o[v],N,S,k,_,T,E,z,M,C;if(!y){if(C=r.grid==="auto"?0:(r.grid||[1,ba])[1],!C){for(z=-ba;z<(z=g[C++].getBoundingClientRect().left)&&C<v;);C<v&&C--}for(y=o[v]=[],N=u?Math.min(C,v)*m-.5:n%C,S=C===ba?0:u?v*f/C-.5:n/C|0,z=0,M=ba,E=0;E<v;E++)k=E%C-N,_=S-(E/C|0),y[E]=T=h?Math.abs(h==="y"?_:k):yE(k*k+_*_),T>z&&(z=T),T<M&&(M=T);n==="random"&&BE(y),y.max=z-M,y.min=M,y.v=v=(parseFloat(r.amount)||parseFloat(r.each)*(C>v?v-1:h?h==="y"?v/C:C:Math.max(C,v/C))||0)*(n==="edges"?-1:1),y.b=v<0?i-v:i,y.u=nr(r.amount||r.each)||0,a=a&&v<0?GE(a):a}return v=(y[p]-y.min)/y.max||0,Ts(y.b+(a?a(v):v)*y.v)+y.u}},ow=function(t){var r=Math.pow(10,((t+"").split(".")[1]||"").length);return function(a){var n=Ts(Math.round(parseFloat(a)/t)*t*r);return(n-n%1)/r+(yi(a)?0:nr(a))}},zE=function(t,r){var a=dr(t),n,i;return!a&&Nn(t)&&(n=a=t.radius||ba,t.values?(t=ya(t.values),(i=!yi(t[0]))&&(n*=n)):t=ow(t.increment)),Dl(r,a?cs(t)?function(o){return i=t(o),Math.abs(i-o)<=n?i:o}:function(o){for(var c=parseFloat(i?o.x:o),u=parseFloat(i?o.y:0),h=ba,m=0,f=t.length,p,j;f--;)i?(p=t[f].x-c,j=t[f].y-u,p=p*p+j*j):p=Math.abs(t[f]-c),p<h&&(h=p,m=f);return m=!n||h<=n?t[m]:o,i||m===o||yi(o)?m:m+nr(o)}:ow(t))},IE=function(t,r,a,n){return Dl(dr(t)?!r:a===!0?!!(a=0):!n,function(){return dr(t)?t[~~(Math.random()*t.length)]:(a=a||1e-5)&&(n=a<1?Math.pow(10,(a+"").length-2):1)&&Math.floor(Math.round((t-a/2+Math.random()*(r-t+a*.99))/a)*a*n)/n})},Cz=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return function(n){return r.reduce(function(i,o){return o(i)},n)}},Tz=function(t,r){return function(a){return t(parseFloat(a))+(r||nr(a))}},Ez=function(t,r,a){return UE(t,r,0,1,a)},$E=function(t,r,a){return Dl(a,function(n){return t[~~r(n)]})},Az=function s(t,r,a){var n=r-t;return dr(t)?$E(t,s(0,t.length),r):Dl(a,function(i){return(n+(i-t)%n)%n+t})},Dz=function s(t,r,a){var n=r-t,i=n*2;return dr(t)?$E(t,s(0,t.length-1),r):Dl(a,function(o){return o=(i+(o-t)%i)%i||0,t+(o>n?i-o:o)})},im=function(t){for(var r=0,a="",n,i,o,c;~(n=t.indexOf("random(",r));)o=t.indexOf(")",n),c=t.charAt(n+7)==="[",i=t.substr(n+7,o-n-7).match(c?NE:tw),a+=t.substr(r,n-r)+IE(c?i:+i[0],c?0:+i[1],+i[2]||1e-5),r=o+1;return a+t.substr(r,t.length-r)},UE=function(t,r,a,n,i){var o=r-t,c=n-a;return Dl(i,function(u){return a+((u-t)/o*c||0)})},Rz=function s(t,r,a,n){var i=isNaN(t+r)?0:function(j){return(1-j)*t+j*r};if(!i){var o=Is(t),c={},u,h,m,f,p;if(a===!0&&(n=1)&&(a=null),o)t={p:t},r={p:r};else if(dr(t)&&!dr(r)){for(m=[],f=t.length,p=f-2,h=1;h<f;h++)m.push(s(t[h-1],t[h]));f--,i=function(g){g*=f;var v=Math.min(p,~~g);return m[v](g-v)},a=r}else n||(t=fd(dr(t)?[]:{},t));if(!m){for(u in r)kN.call(c,t,u,"get",r[u]);i=function(g){return EN(g,c)||(o?t.p:t)}}}return Dl(a,i)},K4=function(t,r,a){var n=t.labels,i=ba,o,c,u;for(o in n)c=n[o]-r,c<0==!!a&&c&&i>(c=Math.abs(c))&&(u=o,i=c);return u},Jr=function(t,r,a){var n=t.vars,i=n[r],o=Gt,c=t._ctx,u,h,m;if(i)return u=n[r+"Params"],h=n.callbackScope||t,a&&jl.length&&qf(),c&&(Gt=c),m=u?i.apply(h,u):i.call(h),Gt=o,m},Eh=function(t){return Sl(t),t.scrollTrigger&&t.scrollTrigger.kill(!!Xs),t.progress()<1&&Jr(t,"onInterrupt"),t},Zc,VE=[],HE=function(t){if(t)if(t=!t.name&&t.default||t,bN()||t.headless){var r=t.name,a=cs(t),n=r&&!a&&t.init?function(){this._props=[]}:t,i={init:nm,render:EN,add:kN,kill:Gz,modifier:Yz,rawVars:0},o={targetTest:0,get:0,getSetter:TN,aliases:{},register:0};if(bd(),t!==n){if(Kr[r])return;sa(n,sa(Wf(t,i),o)),fd(n.prototype,fd(i,Wf(t,o))),Kr[n.prop=r]=n,t.targetTest&&(Ef.push(n),jN[r]=1),r=(r==="css"?"CSS":r.charAt(0).toUpperCase()+r.substr(1))+"Plugin"}SE(r,n),t.register&&t.register(Ir,n,Pr)}else VE.push(t)},$t=255,Ah={aqua:[0,$t,$t],lime:[0,$t,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,$t],navy:[0,0,128],white:[$t,$t,$t],olive:[128,128,0],yellow:[$t,$t,0],orange:[$t,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[$t,0,0],pink:[$t,192,203],cyan:[0,$t,$t],transparent:[$t,$t,$t,0]},hy=function(t,r,a){return t+=t<0?1:t>1?-1:0,(t*6<1?r+(a-r)*t*6:t<.5?a:t*3<2?r+(a-r)*(2/3-t)*6:r)*$t+.5|0},qE=function(t,r,a){var n=t?yi(t)?[t>>16,t>>8&$t,t&$t]:0:Ah.black,i,o,c,u,h,m,f,p,j,g;if(!n){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),Ah[t])n=Ah[t];else if(t.charAt(0)==="#"){if(t.length<6&&(i=t.charAt(1),o=t.charAt(2),c=t.charAt(3),t="#"+i+i+o+o+c+c+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return n=parseInt(t.substr(1,6),16),[n>>16,n>>8&$t,n&$t,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),n=[t>>16,t>>8&$t,t&$t]}else if(t.substr(0,3)==="hsl"){if(n=g=t.match(tw),!r)u=+n[0]%360/360,h=+n[1]/100,m=+n[2]/100,o=m<=.5?m*(h+1):m+h-m*h,i=m*2-o,n.length>3&&(n[3]*=1),n[0]=hy(u+1/3,i,o),n[1]=hy(u,i,o),n[2]=hy(u-1/3,i,o);else if(~t.indexOf("="))return n=t.match(jE),a&&n.length<4&&(n[3]=1),n}else n=t.match(tw)||Ah.transparent;n=n.map(Number)}return r&&!g&&(i=n[0]/$t,o=n[1]/$t,c=n[2]/$t,f=Math.max(i,o,c),p=Math.min(i,o,c),m=(f+p)/2,f===p?u=h=0:(j=f-p,h=m>.5?j/(2-f-p):j/(f+p),u=f===i?(o-c)/j+(o<c?6:0):f===o?(c-i)/j+2:(i-o)/j+4,u*=60),n[0]=~~(u+.5),n[1]=~~(h*100+.5),n[2]=~~(m*100+.5)),a&&n.length<4&&(n[3]=1),n},WE=function(t){var r=[],a=[],n=-1;return t.split(wl).forEach(function(i){var o=i.match(Xc)||[];r.push.apply(r,o),a.push(n+=o.length+1)}),r.c=a,r},X4=function(t,r,a){var n="",i=(t+n).match(wl),o=r?"hsla(":"rgba(",c=0,u,h,m,f;if(!i)return t;if(i=i.map(function(p){return(p=qE(p,r,1))&&o+(r?p[0]+","+p[1]+"%,"+p[2]+"%,"+p[3]:p.join(","))+")"}),a&&(m=WE(t),u=a.c,u.join(n)!==m.c.join(n)))for(h=t.replace(wl,"1").split(Xc),f=h.length-1;c<f;c++)n+=h[c]+(~u.indexOf(c)?i.shift()||o+"0,0,0,0)":(m.length?m:i.length?i:a).shift());if(!h)for(h=t.split(wl),f=h.length-1;c<f;c++)n+=h[c]+i[c];return n+h[f]},wl=(function(){var s="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in Ah)s+="|"+t+"\\b";return new RegExp(s+")","gi")})(),Mz=/hsl[a]?\(/,YE=function(t){var r=t.join(" "),a;if(wl.lastIndex=0,wl.test(r))return a=Mz.test(r),t[1]=X4(t[1],a),t[0]=X4(t[0],a,WE(t[1])),!0},lm,Qr=(function(){var s=Date.now,t=500,r=33,a=s(),n=a,i=1e3/240,o=i,c=[],u,h,m,f,p,j,g=function v(y){var N=s()-n,S=y===!0,k,_,T,E;if((N>t||N<0)&&(a+=N-r),n+=N,T=n-a,k=T-o,(k>0||S)&&(E=++f.frame,p=T-f.time*1e3,f.time=T=T/1e3,o+=k+(k>=i?4:i-k),_=1),S||(u=h(v)),_)for(j=0;j<c.length;j++)c[j](T,p,E,y)};return f={time:0,frame:0,tick:function(){g(!0)},deltaRatio:function(y){return p/(1e3/(y||60))},wake:function(){_E&&(!sw&&bN()&&(on=sw=window,yN=on.document||{},ta.gsap=Ir,(on.gsapVersions||(on.gsapVersions=[])).push(Ir.version),kE(Hf||on.GreenSockGlobals||!on.gsap&&on||{}),VE.forEach(HE)),m=typeof requestAnimationFrame<"u"&&requestAnimationFrame,u&&f.sleep(),h=m||function(y){return setTimeout(y,o-f.time*1e3+1|0)},lm=1,g(2))},sleep:function(){(m?cancelAnimationFrame:clearTimeout)(u),lm=0,h=nm},lagSmoothing:function(y,N){t=y||1/0,r=Math.min(N||33,t)},fps:function(y){i=1e3/(y||240),o=f.time*1e3+i},add:function(y,N,S){var k=N?function(_,T,E,z){y(_,T,E,z),f.remove(k)}:y;return f.remove(y),c[S?"unshift":"push"](k),bd(),k},remove:function(y,N){~(N=c.indexOf(y))&&c.splice(N,1)&&j>=N&&j--},_listeners:c},f})(),bd=function(){return!lm&&Qr.wake()},bt={},Oz=/^[\d.\-M][\d.\-,\s]/,Lz=/["']/g,Pz=function(t){for(var r={},a=t.substr(1,t.length-3).split(":"),n=a[0],i=1,o=a.length,c,u,h;i<o;i++)u=a[i],c=i!==o-1?u.lastIndexOf(","):u.length,h=u.substr(0,c),r[n]=isNaN(h)?h.replace(Lz,"").trim():+h,n=u.substr(c+1).trim();return r},Bz=function(t){var r=t.indexOf("(")+1,a=t.indexOf(")"),n=t.indexOf("(",r);return t.substring(r,~n&&n<a?t.indexOf(")",a+1):a)},Fz=function(t){var r=(t+"").split("("),a=bt[r[0]];return a&&r.length>1&&a.config?a.config.apply(null,~t.indexOf("{")?[Pz(r[1])]:Bz(t).split(",").map(AE)):bt._CE&&Oz.test(t)?bt._CE("",t):a},GE=function(t){return function(r){return 1-t(1-r)}},KE=function s(t,r){for(var a=t._first,n;a;)a instanceof fr?s(a,r):a.vars.yoyoEase&&(!a._yoyo||!a._repeat)&&a._yoyo!==r&&(a.timeline?s(a.timeline,r):(n=a._ease,a._ease=a._yEase,a._yEase=n,a._yoyo=r)),a=a._next},Lo=function(t,r){return t&&(cs(t)?t:bt[t]||Fz(t))||r},Yo=function(t,r,a,n){a===void 0&&(a=function(u){return 1-r(1-u)}),n===void 0&&(n=function(u){return u<.5?r(u*2)/2:1-r((1-u)*2)/2});var i={easeIn:r,easeOut:a,easeInOut:n},o;return Lr(t,function(c){bt[c]=ta[c]=i,bt[o=c.toLowerCase()]=a;for(var u in i)bt[o+(u==="easeIn"?".in":u==="easeOut"?".out":".inOut")]=bt[c+"."+u]=i[u]}),i},XE=function(t){return function(r){return r<.5?(1-t(1-r*2))/2:.5+t((r-.5)*2)/2}},my=function s(t,r,a){var n=r>=1?r:1,i=(a||(t?.3:.45))/(r<1?r:1),o=i/ew*(Math.asin(1/n)||0),c=function(m){return m===1?1:n*Math.pow(2,-10*m)*hz((m-o)*i)+1},u=t==="out"?c:t==="in"?function(h){return 1-c(1-h)}:XE(c);return i=ew/i,u.config=function(h,m){return s(t,h,m)},u},xy=function s(t,r){r===void 0&&(r=1.70158);var a=function(o){return o?--o*o*((r+1)*o+r)+1:0},n=t==="out"?a:t==="in"?function(i){return 1-a(1-i)}:XE(a);return n.config=function(i){return s(t,i)},n};Lr("Linear,Quad,Cubic,Quart,Quint,Strong",function(s,t){var r=t<5?t+1:t;Yo(s+",Power"+(r-1),t?function(a){return Math.pow(a,r)}:function(a){return a},function(a){return 1-Math.pow(1-a,r)},function(a){return a<.5?Math.pow(a*2,r)/2:1-Math.pow((1-a)*2,r)/2})});bt.Linear.easeNone=bt.none=bt.Linear.easeIn;Yo("Elastic",my("in"),my("out"),my());(function(s,t){var r=1/t,a=2*r,n=2.5*r,i=function(c){return c<r?s*c*c:c<a?s*Math.pow(c-1.5/t,2)+.75:c<n?s*(c-=2.25/t)*c+.9375:s*Math.pow(c-2.625/t,2)+.984375};Yo("Bounce",function(o){return 1-i(1-o)},i)})(7.5625,2.75);Yo("Expo",function(s){return Math.pow(2,10*(s-1))*s+s*s*s*s*s*s*(1-s)});Yo("Circ",function(s){return-(yE(1-s*s)-1)});Yo("Sine",function(s){return s===1?1:-uz(s*cz)+1});Yo("Back",xy("in"),xy("out"),xy());bt.SteppedEase=bt.steps=ta.SteppedEase={config:function(t,r){t===void 0&&(t=1);var a=1/t,n=t+(r?0:1),i=r?1:0,o=1-Ut;return function(c){return((n*Dm(0,o,c)|0)+i)*a}}};xd.ease=bt["quad.out"];Lr("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(s){return wN+=s+","+s+"Params,"});var ZE=function(t,r){this.id=dz++,t._gsap=this,this.target=t,this.harness=r,this.get=r?r.get:TE,this.set=r?r.getSetter:TN},om=(function(){function s(r){this.vars=r,this._delay=+r.delay||0,(this._repeat=r.repeat===1/0?-2:r.repeat||0)&&(this._rDelay=r.repeatDelay||0,this._yoyo=!!r.yoyo||!!r.yoyoEase),this._ts=1,gd(this,+r.duration,1,1),this.data=r.data,Gt&&(this._ctx=Gt,Gt.data.push(this)),lm||Qr.wake()}var t=s.prototype;return t.delay=function(a){return a||a===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+a-this._delay),this._delay=a,this):this._delay},t.duration=function(a){return arguments.length?this.totalDuration(this._repeat>0?a+(a+this._rDelay)*this._repeat:a):this.totalDuration()&&this._dur},t.totalDuration=function(a){return arguments.length?(this._dirty=0,gd(this,this._repeat<0?a:(a-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(a,n){if(bd(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(Np(this,a),!i._dp||i.parent||ME(i,this);i&&i.parent;)i.parent._time!==i._start+(i._ts>=0?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&a<this._tDur||this._ts<0&&a>0||!this._tDur&&!a)&&un(this._dp,this,this._start-this._delay)}return(this._tTime!==a||!this._dur&&!n||this._initted&&Math.abs(this._zTime)===Ut||!a&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=a),EE(this,a,n)),this},t.time=function(a,n){return arguments.length?this.totalTime(Math.min(this.totalDuration(),a+Y4(this))%(this._dur+this._rDelay)||(a?this._dur:0),n):this._time},t.totalProgress=function(a,n){return arguments.length?this.totalTime(this.totalDuration()*a,n):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(a,n){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-a:a)+Y4(this),n):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(a,n){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(a-1)*i,n):this._repeat?pd(this._tTime,i)+1:1},t.timeScale=function(a,n){if(!arguments.length)return this._rts===-Ut?0:this._rts;if(this._rts===a)return this;var i=this.parent&&this._ts?Yf(this.parent._time,this):this._tTime;return this._rts=+a||0,this._ts=this._ps||a===-Ut?0:this._rts,this.totalTime(Dm(-Math.abs(this._delay),this.totalDuration(),i),n!==!1),wp(this),yz(this)},t.paused=function(a){return arguments.length?(this._ps!==a&&(this._ps=a,a?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(bd(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Ut&&(this._tTime-=Ut)))),this):this._ps},t.startTime=function(a){if(arguments.length){this._start=a;var n=this.parent||this._dp;return n&&(n._sort||!this.parent)&&un(n,this,a-this._delay),this}return this._start},t.endTime=function(a){return this._start+(Or(a)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(a){var n=this.parent||this._dp;return n?a&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Yf(n.rawTime(a),this):this._tTime:this._tTime},t.revert=function(a){a===void 0&&(a=fz);var n=Xs;return Xs=a,_N(this)&&(this.timeline&&this.timeline.revert(a),this.totalTime(-.01,a.suppressEvents)),this.data!=="nested"&&a.kill!==!1&&this.kill(),Xs=n,this},t.globalTime=function(a){for(var n=this,i=arguments.length?a:n.rawTime();n;)i=n._start+i/(Math.abs(n._ts)||1),n=n._dp;return!this.parent&&this._sat?this._sat.globalTime(a):i},t.repeat=function(a){return arguments.length?(this._repeat=a===1/0?-2:a,G4(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(a){if(arguments.length){var n=this._time;return this._rDelay=a,G4(this),n?this.time(n):this}return this._rDelay},t.yoyo=function(a){return arguments.length?(this._yoyo=a,this):this._yoyo},t.seek=function(a,n){return this.totalTime(fa(this,a),Or(n))},t.restart=function(a,n){return this.play().totalTime(a?-this._delay:0,Or(n)),this._dur||(this._zTime=-Ut),this},t.play=function(a,n){return a!=null&&this.seek(a,n),this.reversed(!1).paused(!1)},t.reverse=function(a,n){return a!=null&&this.seek(a||this.totalDuration(),n),this.reversed(!0).paused(!1)},t.pause=function(a,n){return a!=null&&this.seek(a,n),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(a){return arguments.length?(!!a!==this.reversed()&&this.timeScale(-this._rts||(a?-Ut:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-Ut,this},t.isActive=function(){var a=this.parent||this._dp,n=this._start,i;return!!(!a||this._ts&&this._initted&&a.isActive()&&(i=a.rawTime(!0))>=n&&i<this.endTime(!0)-Ut)},t.eventCallback=function(a,n,i){var o=this.vars;return arguments.length>1?(n?(o[a]=n,i&&(o[a+"Params"]=i),a==="onUpdate"&&(this._onUpdate=n)):delete o[a],this):o[a]},t.then=function(a){var n=this;return new Promise(function(i){var o=cs(a)?a:DE,c=function(){var h=n.then;n.then=null,cs(o)&&(o=o(n))&&(o.then||o===n)&&(n.then=h),i(o),n.then=h};n._initted&&n.totalProgress()===1&&n._ts>=0||!n._tTime&&n._ts<0?c():n._prom=c})},t.kill=function(){Eh(this)},s})();sa(om.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Ut,_prom:0,_ps:!1,_rts:1});var fr=(function(s){bE(t,s);function t(a,n){var i;return a===void 0&&(a={}),i=s.call(this,a)||this,i.labels={},i.smoothChildTiming=!!a.smoothChildTiming,i.autoRemoveChildren=!!a.autoRemoveChildren,i._sort=Or(a.sortChildren),Qt&&un(a.parent||Qt,li(i),n),a.reversed&&i.reverse(),a.paused&&i.paused(!0),a.scrollTrigger&&OE(li(i),a.scrollTrigger),i}var r=t.prototype;return r.to=function(n,i,o){return zh(0,arguments,this),this},r.from=function(n,i,o){return zh(1,arguments,this),this},r.fromTo=function(n,i,o,c){return zh(2,arguments,this),this},r.set=function(n,i,o){return i.duration=0,i.parent=this,Fh(i).repeatDelay||(i.repeat=0),i.immediateRender=!!i.immediateRender,new Cs(n,i,fa(this,o),1),this},r.call=function(n,i,o){return un(this,Cs.delayedCall(0,n,i),o)},r.staggerTo=function(n,i,o,c,u,h,m){return o.duration=i,o.stagger=o.stagger||c,o.onComplete=h,o.onCompleteParams=m,o.parent=this,new Cs(n,o,fa(this,u)),this},r.staggerFrom=function(n,i,o,c,u,h,m){return o.runBackwards=1,Fh(o).immediateRender=Or(o.immediateRender),this.staggerTo(n,i,o,c,u,h,m)},r.staggerFromTo=function(n,i,o,c,u,h,m,f){return c.startAt=o,Fh(c).immediateRender=Or(c.immediateRender),this.staggerTo(n,i,c,u,h,m,f)},r.render=function(n,i,o){var c=this._time,u=this._dirty?this.totalDuration():this._tDur,h=this._dur,m=n<=0?0:Ts(n),f=this._zTime<0!=n<0&&(this._initted||!h),p,j,g,v,y,N,S,k,_,T,E,z;if(this!==Qt&&m>u&&n>=0&&(m=u),m!==this._tTime||o||f){if(c!==this._time&&h&&(m+=this._time-c,n+=this._time-c),p=m,_=this._start,k=this._ts,N=!k,f&&(h||(c=this._zTime),(n||!i)&&(this._zTime=n)),this._repeat){if(E=this._yoyo,y=h+this._rDelay,this._repeat<-1&&n<0)return this.totalTime(y*100+n,i,o);if(p=Ts(m%y),m===u?(v=this._repeat,p=h):(T=Ts(m/y),v=~~T,v&&v===T&&(p=h,v--),p>h&&(p=h)),T=pd(this._tTime,y),!c&&this._tTime&&T!==v&&this._tTime-T*y-this._dur<=0&&(T=v),E&&v&1&&(p=h-p,z=1),v!==T&&!this._lock){var M=E&&T&1,C=M===(E&&v&1);if(v<T&&(M=!M),c=M?0:m%h?h:m,this._lock=1,this.render(c||(z?0:Ts(v*y)),i,!h)._lock=0,this._tTime=m,!i&&this.parent&&Jr(this,"onRepeat"),this.vars.repeatRefresh&&!z&&(this.invalidate()._lock=1),c&&c!==this._time||N!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(h=this._dur,u=this._tDur,C&&(this._lock=2,c=M?h:-1e-4,this.render(c,!0),this.vars.repeatRefresh&&!z&&this.invalidate()),this._lock=0,!this._ts&&!N)return this;KE(this,z)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(S=Nz(this,Ts(c),Ts(p)),S&&(m-=p-(p=S._start))),this._tTime=m,this._time=p,this._act=!k,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=n,c=0),!c&&m&&!i&&!T&&(Jr(this,"onStart"),this._tTime!==m))return this;if(p>=c&&n>=0)for(j=this._first;j;){if(g=j._next,(j._act||p>=j._start)&&j._ts&&S!==j){if(j.parent!==this)return this.render(n,i,o);if(j.render(j._ts>0?(p-j._start)*j._ts:(j._dirty?j.totalDuration():j._tDur)+(p-j._start)*j._ts,i,o),p!==this._time||!this._ts&&!N){S=0,g&&(m+=this._zTime=-Ut);break}}j=g}else{j=this._last;for(var A=n<0?n:p;j;){if(g=j._prev,(j._act||A<=j._end)&&j._ts&&S!==j){if(j.parent!==this)return this.render(n,i,o);if(j.render(j._ts>0?(A-j._start)*j._ts:(j._dirty?j.totalDuration():j._tDur)+(A-j._start)*j._ts,i,o||Xs&&_N(j)),p!==this._time||!this._ts&&!N){S=0,g&&(m+=this._zTime=A?-Ut:Ut);break}}j=g}}if(S&&!i&&(this.pause(),S.render(p>=c?0:-Ut)._zTime=p>=c?1:-1,this._ts))return this._start=_,wp(this),this.render(n,i,o);this._onUpdate&&!i&&Jr(this,"onUpdate",!0),(m===u&&this._tTime>=this.totalDuration()||!m&&c)&&(_===this._start||Math.abs(k)!==Math.abs(this._ts))&&(this._lock||((n||!h)&&(m===u&&this._ts>0||!m&&this._ts<0)&&Sl(this,1),!i&&!(n<0&&!c)&&(m||c||!u)&&(Jr(this,m===u&&n>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(m<u&&this.timeScale()>0)&&this._prom())))}return this},r.add=function(n,i){var o=this;if(yi(i)||(i=fa(this,i,n)),!(n instanceof om)){if(dr(n))return n.forEach(function(c){return o.add(c,i)}),this;if(Is(n))return this.addLabel(n,i);if(cs(n))n=Cs.delayedCall(0,n);else return this}return this!==n?un(this,n,i):this},r.getChildren=function(n,i,o,c){n===void 0&&(n=!0),i===void 0&&(i=!0),o===void 0&&(o=!0),c===void 0&&(c=-ba);for(var u=[],h=this._first;h;)h._start>=c&&(h instanceof Cs?i&&u.push(h):(o&&u.push(h),n&&u.push.apply(u,h.getChildren(!0,i,o)))),h=h._next;return u},r.getById=function(n){for(var i=this.getChildren(1,1,1),o=i.length;o--;)if(i[o].vars.id===n)return i[o]},r.remove=function(n){return Is(n)?this.removeLabel(n):cs(n)?this.killTweensOf(n):(n.parent===this&&jp(this,n),n===this._recent&&(this._recent=this._last),Oo(this))},r.totalTime=function(n,i){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Ts(Qr.time-(this._ts>0?n/this._ts:(this.totalDuration()-n)/-this._ts))),s.prototype.totalTime.call(this,n,i),this._forcing=0,this):this._tTime},r.addLabel=function(n,i){return this.labels[n]=fa(this,i),this},r.removeLabel=function(n){return delete this.labels[n],this},r.addPause=function(n,i,o){var c=Cs.delayedCall(0,i||nm,o);return c.data="isPause",this._hasPause=1,un(this,c,fa(this,n))},r.removePause=function(n){var i=this._first;for(n=fa(this,n);i;)i._start===n&&i.data==="isPause"&&Sl(i),i=i._next},r.killTweensOf=function(n,i,o){for(var c=this.getTweensOf(n,o),u=c.length;u--;)ml!==c[u]&&c[u].kill(n,i);return this},r.getTweensOf=function(n,i){for(var o=[],c=ya(n),u=this._first,h=yi(i),m;u;)u instanceof Cs?pz(u._targets,c)&&(h?(!ml||u._initted&&u._ts)&&u.globalTime(0)<=i&&u.globalTime(u.totalDuration())>i:!i||u.isActive())&&o.push(u):(m=u.getTweensOf(c,i)).length&&o.push.apply(o,m),u=u._next;return o},r.tweenTo=function(n,i){i=i||{};var o=this,c=fa(o,n),u=i,h=u.startAt,m=u.onStart,f=u.onStartParams,p=u.immediateRender,j,g=Cs.to(o,sa({ease:i.ease||"none",lazy:!1,immediateRender:!1,time:c,overwrite:"auto",duration:i.duration||Math.abs((c-(h&&"time"in h?h.time:o._time))/o.timeScale())||Ut,onStart:function(){if(o.pause(),!j){var y=i.duration||Math.abs((c-(h&&"time"in h?h.time:o._time))/o.timeScale());g._dur!==y&&gd(g,y,0,1).render(g._time,!0,!0),j=1}m&&m.apply(g,f||[])}},i));return p?g.render(0):g},r.tweenFromTo=function(n,i,o){return this.tweenTo(i,sa({startAt:{time:fa(this,n)}},o))},r.recent=function(){return this._recent},r.nextLabel=function(n){return n===void 0&&(n=this._time),K4(this,fa(this,n))},r.previousLabel=function(n){return n===void 0&&(n=this._time),K4(this,fa(this,n),1)},r.currentLabel=function(n){return arguments.length?this.seek(n,!0):this.previousLabel(this._time+Ut)},r.shiftChildren=function(n,i,o){o===void 0&&(o=0);for(var c=this._first,u=this.labels,h;c;)c._start>=o&&(c._start+=n,c._end+=n),c=c._next;if(i)for(h in u)u[h]>=o&&(u[h]+=n);return Oo(this)},r.invalidate=function(n){var i=this._first;for(this._lock=0;i;)i.invalidate(n),i=i._next;return s.prototype.invalidate.call(this,n)},r.clear=function(n){n===void 0&&(n=!0);for(var i=this._first,o;i;)o=i._next,this.remove(i),i=o;return this._dp&&(this._time=this._tTime=this._pTime=0),n&&(this.labels={}),Oo(this)},r.totalDuration=function(n){var i=0,o=this,c=o._last,u=ba,h,m,f;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-n:n));if(o._dirty){for(f=o.parent;c;)h=c._prev,c._dirty&&c.totalDuration(),m=c._start,m>u&&o._sort&&c._ts&&!o._lock?(o._lock=1,un(o,c,m-c._delay,1)._lock=0):u=m,m<0&&c._ts&&(i-=m,(!f&&!o._dp||f&&f.smoothChildTiming)&&(o._start+=m/o._ts,o._time-=m,o._tTime-=m),o.shiftChildren(-m,!1,-1/0),u=0),c._end>i&&c._ts&&(i=c._end),c=h;gd(o,o===Qt&&o._time>i?o._time:i,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(n){if(Qt._ts&&(EE(Qt,Yf(n,Qt)),CE=Qr.frame),Qr.frame>=q4){q4+=ea.autoSleep||120;var i=Qt._first;if((!i||!i._ts)&&ea.autoSleep&&Qr._listeners.length<2){for(;i&&!i._ts;)i=i._next;i||Qr.sleep()}}},t})(om);sa(fr.prototype,{_lock:0,_hasPause:0,_forcing:0});var zz=function(t,r,a,n,i,o,c){var u=new Pr(this._pt,t,r,0,1,rA,null,i),h=0,m=0,f,p,j,g,v,y,N,S;for(u.b=a,u.e=n,a+="",n+="",(N=~n.indexOf("random("))&&(n=im(n)),o&&(S=[a,n],o(S,t,r),a=S[0],n=S[1]),p=a.match(dy)||[];f=dy.exec(n);)g=f[0],v=n.substring(h,f.index),j?j=(j+1)%5:v.substr(-5)==="rgba("&&(j=1),g!==p[m++]&&(y=parseFloat(p[m-1])||0,u._pt={_next:u._pt,p:v||m===1?v:",",s:y,c:g.charAt(1)==="="?ad(y,g)-y:parseFloat(g)-y,m:j&&j<4?Math.round:0},h=dy.lastIndex);return u.c=h<n.length?n.substring(h,n.length):"",u.fp=c,(wE.test(n)||N)&&(u.e=0),this._pt=u,u},kN=function(t,r,a,n,i,o,c,u,h,m){cs(n)&&(n=n(i||0,t,o));var f=t[r],p=a!=="get"?a:cs(f)?h?t[r.indexOf("set")||!cs(t["get"+r.substr(3)])?r:"get"+r.substr(3)](h):t[r]():f,j=cs(f)?h?Hz:tA:CN,g;if(Is(n)&&(~n.indexOf("random(")&&(n=im(n)),n.charAt(1)==="="&&(g=ad(p,n)+(nr(p)||0),(g||g===0)&&(n=g))),!m||p!==n||cw)return!isNaN(p*n)&&n!==""?(g=new Pr(this._pt,t,r,+p||0,n-(p||0),typeof f=="boolean"?Wz:sA,0,j),h&&(g.fp=h),c&&g.modifier(c,this,t),this._pt=g):(!f&&!(r in t)&&vN(r,n),zz.call(this,t,r,p,n,j,u||ea.stringFilter,h))},Iz=function(t,r,a,n,i){if(cs(t)&&(t=Ih(t,i,r,a,n)),!Nn(t)||t.style&&t.nodeType||dr(t)||vE(t))return Is(t)?Ih(t,i,r,a,n):t;var o={},c;for(c in t)o[c]=Ih(t[c],i,r,a,n);return o},QE=function(t,r,a,n,i,o){var c,u,h,m;if(Kr[t]&&(c=new Kr[t]).init(i,c.rawVars?r[t]:Iz(r[t],n,i,o,a),a,n,o)!==!1&&(a._pt=u=new Pr(a._pt,i,t,0,1,c.render,c,0,c.priority),a!==Zc))for(h=a._ptLookup[a._targets.indexOf(i)],m=c._props.length;m--;)h[c._props[m]]=u;return c},ml,cw,SN=function s(t,r,a){var n=t.vars,i=n.ease,o=n.startAt,c=n.immediateRender,u=n.lazy,h=n.onUpdate,m=n.runBackwards,f=n.yoyoEase,p=n.keyframes,j=n.autoRevert,g=t._dur,v=t._startAt,y=t._targets,N=t.parent,S=N&&N.data==="nested"?N.vars.targets:y,k=t._overwrite==="auto"&&!pN,_=t.timeline,T,E,z,M,C,A,Z,I,V,R,q,J,se;if(_&&(!p||!i)&&(i="none"),t._ease=Lo(i,xd.ease),t._yEase=f?GE(Lo(f===!0?i:f,xd.ease)):0,f&&t._yoyo&&!t._repeat&&(f=t._yEase,t._yEase=t._ease,t._ease=f),t._from=!_&&!!n.runBackwards,!_||p&&!n.stagger){if(I=y[0]?Mo(y[0]).harness:0,J=I&&n[I.prop],T=Wf(n,jN),v&&(v._zTime<0&&v.progress(1),r<0&&m&&c&&!j?v.render(-1,!0):v.revert(m&&g?Tf:xz),v._lazy=0),o){if(Sl(t._startAt=Cs.set(y,sa({data:"isStart",overwrite:!1,parent:N,immediateRender:!0,lazy:!v&&Or(u),startAt:null,delay:0,onUpdate:h&&function(){return Jr(t,"onUpdate")},stagger:0},o))),t._startAt._dp=0,t._startAt._sat=t,r<0&&(Xs||!c&&!j)&&t._startAt.revert(Tf),c&&g&&r<=0&&a<=0){r&&(t._zTime=r);return}}else if(m&&g&&!v){if(r&&(c=!1),z=sa({overwrite:!1,data:"isFromStart",lazy:c&&!v&&Or(u),immediateRender:c,stagger:0,parent:N},T),J&&(z[I.prop]=J),Sl(t._startAt=Cs.set(y,z)),t._startAt._dp=0,t._startAt._sat=t,r<0&&(Xs?t._startAt.revert(Tf):t._startAt.render(-1,!0)),t._zTime=r,!c)s(t._startAt,Ut,Ut);else if(!r)return}for(t._pt=t._ptCache=0,u=g&&Or(u)||u&&!g,E=0;E<y.length;E++){if(C=y[E],Z=C._gsap||NN(y)[E]._gsap,t._ptLookup[E]=R={},rw[Z.id]&&jl.length&&qf(),q=S===y?E:S.indexOf(C),I&&(V=new I).init(C,J||T,t,q,S)!==!1&&(t._pt=M=new Pr(t._pt,C,V.name,0,1,V.render,V,0,V.priority),V._props.forEach(function(Y){R[Y]=M}),V.priority&&(A=1)),!I||J)for(z in T)Kr[z]&&(V=QE(z,T,t,q,C,S))?V.priority&&(A=1):R[z]=M=kN.call(t,C,z,"get",T[z],q,S,0,n.stringFilter);t._op&&t._op[E]&&t.kill(C,t._op[E]),k&&t._pt&&(ml=t,Qt.killTweensOf(C,R,t.globalTime(r)),se=!t.parent,ml=0),t._pt&&u&&(rw[Z.id]=1)}A&&aA(t),t._onInit&&t._onInit(t)}t._onUpdate=h,t._initted=(!t._op||t._pt)&&!se,p&&r<=0&&_.render(ba,!0,!0)},$z=function(t,r,a,n,i,o,c,u){var h=(t._pt&&t._ptCache||(t._ptCache={}))[r],m,f,p,j;if(!h)for(h=t._ptCache[r]=[],p=t._ptLookup,j=t._targets.length;j--;){if(m=p[j][r],m&&m.d&&m.d._pt)for(m=m.d._pt;m&&m.p!==r&&m.fp!==r;)m=m._next;if(!m)return cw=1,t.vars[r]="+=0",SN(t,c),cw=0,u?am(r+" not eligible for reset"):1;h.push(m)}for(j=h.length;j--;)f=h[j],m=f._pt||f,m.s=(n||n===0)&&!i?n:m.s+(n||0)+o*m.c,m.c=a-m.s,f.e&&(f.e=fs(a)+nr(f.e)),f.b&&(f.b=m.s+nr(f.b))},Uz=function(t,r){var a=t[0]?Mo(t[0]).harness:0,n=a&&a.aliases,i,o,c,u;if(!n)return r;i=fd({},r);for(o in n)if(o in i)for(u=n[o].split(","),c=u.length;c--;)i[u[c]]=i[o];return i},Vz=function(t,r,a,n){var i=r.ease||n||"power1.inOut",o,c;if(dr(r))c=a[t]||(a[t]=[]),r.forEach(function(u,h){return c.push({t:h/(r.length-1)*100,v:u,e:i})});else for(o in r)c=a[o]||(a[o]=[]),o==="ease"||c.push({t:parseFloat(t),v:r[o],e:i})},Ih=function(t,r,a,n,i){return cs(t)?t.call(r,a,n,i):Is(t)&&~t.indexOf("random(")?im(t):t},JE=wN+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",eA={};Lr(JE+",id,stagger,delay,duration,paused,scrollTrigger",function(s){return eA[s]=1});var Cs=(function(s){bE(t,s);function t(a,n,i,o){var c;typeof n=="number"&&(i.duration=n,n=i,i=null),c=s.call(this,o?n:Fh(n))||this;var u=c.vars,h=u.duration,m=u.delay,f=u.immediateRender,p=u.stagger,j=u.overwrite,g=u.keyframes,v=u.defaults,y=u.scrollTrigger,N=u.yoyoEase,S=n.parent||Qt,k=(dr(a)||vE(a)?yi(a[0]):"length"in n)?[a]:ya(a),_,T,E,z,M,C,A,Z;if(c._targets=k.length?NN(k):am("GSAP target "+a+" not found. https://gsap.com",!ea.nullTargetWarn)||[],c._ptLookup=[],c._overwrite=j,g||p||P0(h)||P0(m)){if(n=c.vars,_=c.timeline=new fr({data:"nested",defaults:v||{},targets:S&&S.data==="nested"?S.vars.targets:k}),_.kill(),_.parent=_._dp=li(c),_._start=0,p||P0(h)||P0(m)){if(z=k.length,A=p&&FE(p),Nn(p))for(M in p)~JE.indexOf(M)&&(Z||(Z={}),Z[M]=p[M]);for(T=0;T<z;T++)E=Wf(n,eA),E.stagger=0,N&&(E.yoyoEase=N),Z&&fd(E,Z),C=k[T],E.duration=+Ih(h,li(c),T,C,k),E.delay=(+Ih(m,li(c),T,C,k)||0)-c._delay,!p&&z===1&&E.delay&&(c._delay=m=E.delay,c._start+=m,E.delay=0),_.to(C,E,A?A(T,C,k):0),_._ease=bt.none;_.duration()?h=m=0:c.timeline=0}else if(g){Fh(sa(_.vars.defaults,{ease:"none"})),_._ease=Lo(g.ease||n.ease||"none");var I=0,V,R,q;if(dr(g))g.forEach(function(J){return _.to(k,J,">")}),_.duration();else{E={};for(M in g)M==="ease"||M==="easeEach"||Vz(M,g[M],E,g.easeEach);for(M in E)for(V=E[M].sort(function(J,se){return J.t-se.t}),I=0,T=0;T<V.length;T++)R=V[T],q={ease:R.e,duration:(R.t-(T?V[T-1].t:0))/100*h},q[M]=R.v,_.to(k,q,I),I+=q.duration;_.duration()<h&&_.to({},{duration:h-_.duration()})}}h||c.duration(h=_.duration())}else c.timeline=0;return j===!0&&!pN&&(ml=li(c),Qt.killTweensOf(k),ml=0),un(S,li(c),i),n.reversed&&c.reverse(),n.paused&&c.paused(!0),(f||!h&&!g&&c._start===Ts(S._time)&&Or(f)&&vz(li(c))&&S.data!=="nested")&&(c._tTime=-Ut,c.render(Math.max(0,-m)||0)),y&&OE(li(c),y),c}var r=t.prototype;return r.render=function(n,i,o){var c=this._time,u=this._tDur,h=this._dur,m=n<0,f=n>u-Ut&&!m?u:n<Ut?0:n,p,j,g,v,y,N,S,k,_;if(!h)wz(this,n,i,o);else if(f!==this._tTime||!n||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==m||this._lazy){if(p=f,k=this.timeline,this._repeat){if(v=h+this._rDelay,this._repeat<-1&&m)return this.totalTime(v*100+n,i,o);if(p=Ts(f%v),f===u?(g=this._repeat,p=h):(y=Ts(f/v),g=~~y,g&&g===y?(p=h,g--):p>h&&(p=h)),N=this._yoyo&&g&1,N&&(_=this._yEase,p=h-p),y=pd(this._tTime,v),p===c&&!o&&this._initted&&g===y)return this._tTime=f,this;g!==y&&(k&&this._yEase&&KE(k,N),this.vars.repeatRefresh&&!N&&!this._lock&&p!==v&&this._initted&&(this._lock=o=1,this.render(Ts(v*g),!0).invalidate()._lock=0))}if(!this._initted){if(LE(this,m?n:p,o,i,f))return this._tTime=0,this;if(c!==this._time&&!(o&&this.vars.repeatRefresh&&g!==y))return this;if(h!==this._dur)return this.render(n,i,o)}if(this._tTime=f,this._time=p,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=S=(_||this._ease)(p/h),this._from&&(this.ratio=S=1-S),!c&&f&&!i&&!y&&(Jr(this,"onStart"),this._tTime!==f))return this;for(j=this._pt;j;)j.r(S,j.d),j=j._next;k&&k.render(n<0?n:k._dur*k._ease(p/this._dur),i,o)||this._startAt&&(this._zTime=n),this._onUpdate&&!i&&(m&&aw(this,n,i,o),Jr(this,"onUpdate")),this._repeat&&g!==y&&this.vars.onRepeat&&!i&&this.parent&&Jr(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(m&&!this._onUpdate&&aw(this,n,!0,!0),(n||!h)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&Sl(this,1),!i&&!(m&&!c)&&(f||c||N)&&(Jr(this,f===u?"onComplete":"onReverseComplete",!0),this._prom&&!(f<u&&this.timeScale()>0)&&this._prom()))}return this},r.targets=function(){return this._targets},r.invalidate=function(n){return(!n||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(n),s.prototype.invalidate.call(this,n)},r.resetTo=function(n,i,o,c,u){lm||Qr.wake(),this._ts||this.play();var h=Math.min(this._dur,(this._dp._time-this._start)*this._ts),m;return this._initted||SN(this,h),m=this._ease(h/this._dur),$z(this,n,i,o,c,m,h,u)?this.resetTo(n,i,o,c,1):(Np(this,0),this.parent||RE(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},r.kill=function(n,i){if(i===void 0&&(i="all"),!n&&(!i||i==="all"))return this._lazy=this._pt=0,this.parent?Eh(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Xs),this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(n,i,ml&&ml.vars.overwrite!==!0)._first||Eh(this),this.parent&&o!==this.timeline.totalDuration()&&gd(this,this._dur*this.timeline._tDur/o,0,1),this}var c=this._targets,u=n?ya(n):c,h=this._ptLookup,m=this._pt,f,p,j,g,v,y,N;if((!i||i==="all")&&bz(c,u))return i==="all"&&(this._pt=0),Eh(this);for(f=this._op=this._op||[],i!=="all"&&(Is(i)&&(v={},Lr(i,function(S){return v[S]=1}),i=v),i=Uz(c,i)),N=c.length;N--;)if(~u.indexOf(c[N])){p=h[N],i==="all"?(f[N]=i,g=p,j={}):(j=f[N]=f[N]||{},g=i);for(v in g)y=p&&p[v],y&&((!("kill"in y.d)||y.d.kill(v)===!0)&&jp(this,y,"_pt"),delete p[v]),j!=="all"&&(j[v]=1)}return this._initted&&!this._pt&&m&&Eh(this),this},t.to=function(n,i){return new t(n,i,arguments[2])},t.from=function(n,i){return zh(1,arguments)},t.delayedCall=function(n,i,o,c){return new t(i,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:n,onComplete:i,onReverseComplete:i,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:c})},t.fromTo=function(n,i,o){return zh(2,arguments)},t.set=function(n,i){return i.duration=0,i.repeatDelay||(i.repeat=0),new t(n,i)},t.killTweensOf=function(n,i,o){return Qt.killTweensOf(n,i,o)},t})(om);sa(Cs.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Lr("staggerTo,staggerFrom,staggerFromTo",function(s){Cs[s]=function(){var t=new fr,r=iw.call(arguments,0);return r.splice(s==="staggerFromTo"?5:4,0,0),t[s].apply(t,r)}});var CN=function(t,r,a){return t[r]=a},tA=function(t,r,a){return t[r](a)},Hz=function(t,r,a,n){return t[r](n.fp,a)},qz=function(t,r,a){return t.setAttribute(r,a)},TN=function(t,r){return cs(t[r])?tA:gN(t[r])&&t.setAttribute?qz:CN},sA=function(t,r){return r.set(r.t,r.p,Math.round((r.s+r.c*t)*1e6)/1e6,r)},Wz=function(t,r){return r.set(r.t,r.p,!!(r.s+r.c*t),r)},rA=function(t,r){var a=r._pt,n="";if(!t&&r.b)n=r.b;else if(t===1&&r.e)n=r.e;else{for(;a;)n=a.p+(a.m?a.m(a.s+a.c*t):Math.round((a.s+a.c*t)*1e4)/1e4)+n,a=a._next;n+=r.c}r.set(r.t,r.p,n,r)},EN=function(t,r){for(var a=r._pt;a;)a.r(t,a.d),a=a._next},Yz=function(t,r,a,n){for(var i=this._pt,o;i;)o=i._next,i.p===n&&i.modifier(t,r,a),i=o},Gz=function(t){for(var r=this._pt,a,n;r;)n=r._next,r.p===t&&!r.op||r.op===t?jp(this,r,"_pt"):r.dep||(a=1),r=n;return!a},Kz=function(t,r,a,n){n.mSet(t,r,n.m.call(n.tween,a,n.mt),n)},aA=function(t){for(var r=t._pt,a,n,i,o;r;){for(a=r._next,n=i;n&&n.pr>r.pr;)n=n._next;(r._prev=n?n._prev:o)?r._prev._next=r:i=r,(r._next=n)?n._prev=r:o=r,r=a}t._pt=i},Pr=(function(){function s(r,a,n,i,o,c,u,h,m){this.t=a,this.s=i,this.c=o,this.p=n,this.r=c||sA,this.d=u||this,this.set=h||CN,this.pr=m||0,this._next=r,r&&(r._prev=this)}var t=s.prototype;return t.modifier=function(a,n,i){this.mSet=this.mSet||this.set,this.set=Kz,this.m=a,this.mt=i,this.tween=n},s})();Lr(wN+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(s){return jN[s]=1});ta.TweenMax=ta.TweenLite=Cs;ta.TimelineLite=ta.TimelineMax=fr;Qt=new fr({sortChildren:!1,defaults:xd,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});ea.stringFilter=YE;var Po=[],Af={},Xz=[],Z4=0,Zz=0,fy=function(t){return(Af[t]||Xz).map(function(r){return r()})},dw=function(){var t=Date.now(),r=[];t-Z4>2&&(fy("matchMediaInit"),Po.forEach(function(a){var n=a.queries,i=a.conditions,o,c,u,h;for(c in n)o=on.matchMedia(n[c]).matches,o&&(u=1),o!==i[c]&&(i[c]=o,h=1);h&&(a.revert(),u&&r.push(a))}),fy("matchMediaRevert"),r.forEach(function(a){return a.onMatch(a,function(n){return a.add(null,n)})}),Z4=t,fy("matchMedia"))},nA=(function(){function s(r,a){this.selector=a&&lw(a),this.data=[],this._r=[],this.isReverted=!1,this.id=Zz++,r&&this.add(r)}var t=s.prototype;return t.add=function(a,n,i){cs(a)&&(i=n,n=a,a=cs);var o=this,c=function(){var h=Gt,m=o.selector,f;return h&&h!==o&&h.data.push(o),i&&(o.selector=lw(i)),Gt=o,f=n.apply(o,arguments),cs(f)&&o._r.push(f),Gt=h,o.selector=m,o.isReverted=!1,f};return o.last=c,a===cs?c(o,function(u){return o.add(null,u)}):a?o[a]=c:c},t.ignore=function(a){var n=Gt;Gt=null,a(this),Gt=n},t.getTweens=function(){var a=[];return this.data.forEach(function(n){return n instanceof s?a.push.apply(a,n.getTweens()):n instanceof Cs&&!(n.parent&&n.parent.data==="nested")&&a.push(n)}),a},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(a,n){var i=this;if(a?(function(){for(var c=i.getTweens(),u=i.data.length,h;u--;)h=i.data[u],h.data==="isFlip"&&(h.revert(),h.getChildren(!0,!0,!1).forEach(function(m){return c.splice(c.indexOf(m),1)}));for(c.map(function(m){return{g:m._dur||m._delay||m._sat&&!m._sat.vars.immediateRender?m.globalTime(0):-1/0,t:m}}).sort(function(m,f){return f.g-m.g||-1/0}).forEach(function(m){return m.t.revert(a)}),u=i.data.length;u--;)h=i.data[u],h instanceof fr?h.data!=="nested"&&(h.scrollTrigger&&h.scrollTrigger.revert(),h.kill()):!(h instanceof Cs)&&h.revert&&h.revert(a);i._r.forEach(function(m){return m(a,i)}),i.isReverted=!0})():this.data.forEach(function(c){return c.kill&&c.kill()}),this.clear(),n)for(var o=Po.length;o--;)Po[o].id===this.id&&Po.splice(o,1)},t.revert=function(a){this.kill(a||{})},s})(),Qz=(function(){function s(r){this.contexts=[],this.scope=r,Gt&&Gt.data.push(this)}var t=s.prototype;return t.add=function(a,n,i){Nn(a)||(a={matches:a});var o=new nA(0,i||this.scope),c=o.conditions={},u,h,m;Gt&&!o.selector&&(o.selector=Gt.selector),this.contexts.push(o),n=o.add("onMatch",n),o.queries=a;for(h in a)h==="all"?m=1:(u=on.matchMedia(a[h]),u&&(Po.indexOf(o)<0&&Po.push(o),(c[h]=u.matches)&&(m=1),u.addListener?u.addListener(dw):u.addEventListener("change",dw)));return m&&n(o,function(f){return o.add(null,f)}),this},t.revert=function(a){this.kill(a||{})},t.kill=function(a){this.contexts.forEach(function(n){return n.kill(a,!0)})},s})(),Gf={registerPlugin:function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];r.forEach(function(n){return HE(n)})},timeline:function(t){return new fr(t)},getTweensOf:function(t,r){return Qt.getTweensOf(t,r)},getProperty:function(t,r,a,n){Is(t)&&(t=ya(t)[0]);var i=Mo(t||{}).get,o=a?DE:AE;return a==="native"&&(a=""),t&&(r?o((Kr[r]&&Kr[r].get||i)(t,r,a,n)):function(c,u,h){return o((Kr[c]&&Kr[c].get||i)(t,c,u,h))})},quickSetter:function(t,r,a){if(t=ya(t),t.length>1){var n=t.map(function(m){return Ir.quickSetter(m,r,a)}),i=n.length;return function(m){for(var f=i;f--;)n[f](m)}}t=t[0]||{};var o=Kr[r],c=Mo(t),u=c.harness&&(c.harness.aliases||{})[r]||r,h=o?function(m){var f=new o;Zc._pt=0,f.init(t,a?m+a:m,Zc,0,[t]),f.render(1,f),Zc._pt&&EN(1,Zc)}:c.set(t,u);return o?h:function(m){return h(t,u,a?m+a:m,c,1)}},quickTo:function(t,r,a){var n,i=Ir.to(t,sa((n={},n[r]="+=0.1",n.paused=!0,n.stagger=0,n),a||{})),o=function(u,h,m){return i.resetTo(r,u,h,m)};return o.tween=i,o},isTweening:function(t){return Qt.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Lo(t.ease,xd.ease)),W4(xd,t||{})},config:function(t){return W4(ea,t||{})},registerEffect:function(t){var r=t.name,a=t.effect,n=t.plugins,i=t.defaults,o=t.extendTimeline;(n||"").split(",").forEach(function(c){return c&&!Kr[c]&&!ta[c]&&am(r+" effect requires "+c+" plugin.")}),uy[r]=function(c,u,h){return a(ya(c),sa(u||{},i),h)},o&&(fr.prototype[r]=function(c,u,h){return this.add(uy[r](c,Nn(u)?u:(h=u)&&{},this),h)})},registerEase:function(t,r){bt[t]=Lo(r)},parseEase:function(t,r){return arguments.length?Lo(t,r):bt},getById:function(t){return Qt.getById(t)},exportRoot:function(t,r){t===void 0&&(t={});var a=new fr(t),n,i;for(a.smoothChildTiming=Or(t.smoothChildTiming),Qt.remove(a),a._dp=0,a._time=a._tTime=Qt._time,n=Qt._first;n;)i=n._next,(r||!(!n._dur&&n instanceof Cs&&n.vars.onComplete===n._targets[0]))&&un(a,n,n._start-n._delay),n=i;return un(Qt,a,0),a},context:function(t,r){return t?new nA(t,r):Gt},matchMedia:function(t){return new Qz(t)},matchMediaRefresh:function(){return Po.forEach(function(t){var r=t.conditions,a,n;for(n in r)r[n]&&(r[n]=!1,a=1);a&&t.revert()})||dw()},addEventListener:function(t,r){var a=Af[t]||(Af[t]=[]);~a.indexOf(r)||a.push(r)},removeEventListener:function(t,r){var a=Af[t],n=a&&a.indexOf(r);n>=0&&a.splice(n,1)},utils:{wrap:Az,wrapYoyo:Dz,distribute:FE,random:IE,snap:zE,normalize:Ez,getUnit:nr,clamp:kz,splitColor:qE,toArray:ya,selector:lw,mapRange:UE,pipe:Cz,unitize:Tz,interpolate:Rz,shuffle:BE},install:kE,effects:uy,ticker:Qr,updateRoot:fr.updateRoot,plugins:Kr,globalTimeline:Qt,core:{PropTween:Pr,globals:SE,Tween:Cs,Timeline:fr,Animation:om,getCache:Mo,_removeLinkedListItem:jp,reverting:function(){return Xs},context:function(t){return t&&Gt&&(Gt.data.push(t),t._ctx=Gt),Gt},suppressOverwrites:function(t){return pN=t}}};Lr("to,from,fromTo,delayedCall,set,killTweensOf",function(s){return Gf[s]=Cs[s]});Qr.add(fr.updateRoot);Zc=Gf.to({},{duration:0});var Jz=function(t,r){for(var a=t._pt;a&&a.p!==r&&a.op!==r&&a.fp!==r;)a=a._next;return a},eI=function(t,r){var a=t._targets,n,i,o;for(n in r)for(i=a.length;i--;)o=t._ptLookup[i][n],o&&(o=o.d)&&(o._pt&&(o=Jz(o,n)),o&&o.modifier&&o.modifier(r[n],t,a[i],n))},py=function(t,r){return{name:t,headless:1,rawVars:1,init:function(n,i,o){o._onInit=function(c){var u,h;if(Is(i)&&(u={},Lr(i,function(m){return u[m]=1}),i=u),r){u={};for(h in i)u[h]=r(i[h]);i=u}eI(c,i)}}}},Ir=Gf.registerPlugin({name:"attr",init:function(t,r,a,n,i){var o,c,u;this.tween=a;for(o in r)u=t.getAttribute(o)||"",c=this.add(t,"setAttribute",(u||0)+"",r[o],n,i,0,0,o),c.op=o,c.b=u,this._props.push(o)},render:function(t,r){for(var a=r._pt;a;)Xs?a.set(a.t,a.p,a.b,a):a.r(t,a.d),a=a._next}},{name:"endArray",headless:1,init:function(t,r){for(var a=r.length;a--;)this.add(t,a,t[a]||0,r[a],0,0,0,0,0,1)}},py("roundProps",ow),py("modifiers"),py("snap",zE))||Gf;Cs.version=fr.version=Ir.version="3.13.0";_E=1;bN()&&bd();bt.Power0;bt.Power1;bt.Power2;bt.Power3;bt.Power4;bt.Linear;bt.Quad;bt.Cubic;bt.Quart;bt.Quint;bt.Strong;bt.Elastic;bt.Back;bt.SteppedEase;bt.Bounce;bt.Sine;bt.Expo;bt.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Q4,xl,nd,AN,So,J4,DN,tI=function(){return typeof window<"u"},vi={},jo=180/Math.PI,id=Math.PI/180,Bc=Math.atan2,e6=1e8,RN=/([A-Z])/g,sI=/(left|right|width|margin|padding|x)/i,rI=/[\s,\(]\S/,mn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},uw=function(t,r){return r.set(r.t,r.p,Math.round((r.s+r.c*t)*1e4)/1e4+r.u,r)},aI=function(t,r){return r.set(r.t,r.p,t===1?r.e:Math.round((r.s+r.c*t)*1e4)/1e4+r.u,r)},nI=function(t,r){return r.set(r.t,r.p,t?Math.round((r.s+r.c*t)*1e4)/1e4+r.u:r.b,r)},iI=function(t,r){var a=r.s+r.c*t;r.set(r.t,r.p,~~(a+(a<0?-.5:.5))+r.u,r)},iA=function(t,r){return r.set(r.t,r.p,t?r.e:r.b,r)},lA=function(t,r){return r.set(r.t,r.p,t!==1?r.b:r.e,r)},lI=function(t,r,a){return t.style[r]=a},oI=function(t,r,a){return t.style.setProperty(r,a)},cI=function(t,r,a){return t._gsap[r]=a},dI=function(t,r,a){return t._gsap.scaleX=t._gsap.scaleY=a},uI=function(t,r,a,n,i){var o=t._gsap;o.scaleX=o.scaleY=a,o.renderTransform(i,o)},hI=function(t,r,a,n,i){var o=t._gsap;o[r]=a,o.renderTransform(i,o)},Jt="transform",Br=Jt+"Origin",mI=function s(t,r){var a=this,n=this.target,i=n.style,o=n._gsap;if(t in vi&&i){if(this.tfm=this.tfm||{},t!=="transform")t=mn[t]||t,~t.indexOf(",")?t.split(",").forEach(function(c){return a.tfm[c]=oi(n,c)}):this.tfm[t]=o.x?o[t]:oi(n,t),t===Br&&(this.tfm.zOrigin=o.zOrigin);else return mn.transform.split(",").forEach(function(c){return s.call(a,c,r)});if(this.props.indexOf(Jt)>=0)return;o.svg&&(this.svgo=n.getAttribute("data-svg-origin"),this.props.push(Br,r,"")),t=Jt}(i||r)&&this.props.push(t,r,i[t])},oA=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},xI=function(){var t=this.props,r=this.target,a=r.style,n=r._gsap,i,o;for(i=0;i<t.length;i+=3)t[i+1]?t[i+1]===2?r[t[i]](t[i+2]):r[t[i]]=t[i+2]:t[i+2]?a[t[i]]=t[i+2]:a.removeProperty(t[i].substr(0,2)==="--"?t[i]:t[i].replace(RN,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)n[o]=this.tfm[o];n.svg&&(n.renderTransform(),r.setAttribute("data-svg-origin",this.svgo||"")),i=DN(),(!i||!i.isStart)&&!a[Jt]&&(oA(a),n.zOrigin&&a[Br]&&(a[Br]+=" "+n.zOrigin+"px",n.zOrigin=0,n.renderTransform()),n.uncache=1)}},cA=function(t,r){var a={target:t,props:[],revert:xI,save:mI};return t._gsap||Ir.core.getCache(t),r&&t.style&&t.nodeType&&r.split(",").forEach(function(n){return a.save(n)}),a},dA,hw=function(t,r){var a=xl.createElementNS?xl.createElementNS((r||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):xl.createElement(t);return a&&a.style?a:xl.createElement(t)},va=function s(t,r,a){var n=getComputedStyle(t);return n[r]||n.getPropertyValue(r.replace(RN,"-$1").toLowerCase())||n.getPropertyValue(r)||!a&&s(t,yd(r)||r,1)||""},t6="O,Moz,ms,Ms,Webkit".split(","),yd=function(t,r,a){var n=r||So,i=n.style,o=5;if(t in i&&!a)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);o--&&!(t6[o]+t in i););return o<0?null:(o===3?"ms":o>=0?t6[o]:"")+t},mw=function(){tI()&&window.document&&(Q4=window,xl=Q4.document,nd=xl.documentElement,So=hw("div")||{style:{}},hw("div"),Jt=yd(Jt),Br=Jt+"Origin",So.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",dA=!!yd("perspective"),DN=Ir.core.reverting,AN=1)},s6=function(t){var r=t.ownerSVGElement,a=hw("svg",r&&r.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=t.cloneNode(!0),i;n.style.display="block",a.appendChild(n),nd.appendChild(a);try{i=n.getBBox()}catch{}return a.removeChild(n),nd.removeChild(a),i},r6=function(t,r){for(var a=r.length;a--;)if(t.hasAttribute(r[a]))return t.getAttribute(r[a])},uA=function(t){var r,a;try{r=t.getBBox()}catch{r=s6(t),a=1}return r&&(r.width||r.height)||a||(r=s6(t)),r&&!r.width&&!r.x&&!r.y?{x:+r6(t,["x","cx","x1"])||0,y:+r6(t,["y","cy","y1"])||0,width:0,height:0}:r},hA=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&uA(t))},Uo=function(t,r){if(r){var a=t.style,n;r in vi&&r!==Br&&(r=Jt),a.removeProperty?(n=r.substr(0,2),(n==="ms"||r.substr(0,6)==="webkit")&&(r="-"+r),a.removeProperty(n==="--"?r:r.replace(RN,"-$1").toLowerCase())):a.removeAttribute(r)}},fl=function(t,r,a,n,i,o){var c=new Pr(t._pt,r,a,0,1,o?lA:iA);return t._pt=c,c.b=n,c.e=i,t._props.push(a),c},a6={deg:1,rad:1,turn:1},fI={grid:1,flex:1},Cl=function s(t,r,a,n){var i=parseFloat(a)||0,o=(a+"").trim().substr((i+"").length)||"px",c=So.style,u=sI.test(r),h=t.tagName.toLowerCase()==="svg",m=(h?"client":"offset")+(u?"Width":"Height"),f=100,p=n==="px",j=n==="%",g,v,y,N;if(n===o||!i||a6[n]||a6[o])return i;if(o!=="px"&&!p&&(i=s(t,r,a,"px")),N=t.getCTM&&hA(t),(j||o==="%")&&(vi[r]||~r.indexOf("adius")))return g=N?t.getBBox()[u?"width":"height"]:t[m],fs(j?i/g*f:i/100*g);if(c[u?"width":"height"]=f+(p?o:n),v=n!=="rem"&&~r.indexOf("adius")||n==="em"&&t.appendChild&&!h?t:t.parentNode,N&&(v=(t.ownerSVGElement||{}).parentNode),(!v||v===xl||!v.appendChild)&&(v=xl.body),y=v._gsap,y&&j&&y.width&&u&&y.time===Qr.time&&!y.uncache)return fs(i/y.width*f);if(j&&(r==="height"||r==="width")){var S=t.style[r];t.style[r]=f+n,g=t[m],S?t.style[r]=S:Uo(t,r)}else(j||o==="%")&&!fI[va(v,"display")]&&(c.position=va(t,"position")),v===t&&(c.position="static"),v.appendChild(So),g=So[m],v.removeChild(So),c.position="absolute";return u&&j&&(y=Mo(v),y.time=Qr.time,y.width=v[m]),fs(p?g*i/f:g&&i?f/g*i:0)},oi=function(t,r,a,n){var i;return AN||mw(),r in mn&&r!=="transform"&&(r=mn[r],~r.indexOf(",")&&(r=r.split(",")[0])),vi[r]&&r!=="transform"?(i=dm(t,n),i=r!=="transformOrigin"?i[r]:i.svg?i.origin:Xf(va(t,Br))+" "+i.zOrigin+"px"):(i=t.style[r],(!i||i==="auto"||n||~(i+"").indexOf("calc("))&&(i=Kf[r]&&Kf[r](t,r,a)||va(t,r)||TE(t,r)||(r==="opacity"?1:0))),a&&!~(i+"").trim().indexOf(" ")?Cl(t,r,i,a)+a:i},pI=function(t,r,a,n){if(!a||a==="none"){var i=yd(r,t,1),o=i&&va(t,i,1);o&&o!==a?(r=i,a=o):r==="borderColor"&&(a=va(t,"borderTopColor"))}var c=new Pr(this._pt,t.style,r,0,1,rA),u=0,h=0,m,f,p,j,g,v,y,N,S,k,_,T;if(c.b=a,c.e=n,a+="",n+="",n.substring(0,6)==="var(--"&&(n=va(t,n.substring(4,n.indexOf(")")))),n==="auto"&&(v=t.style[r],t.style[r]=n,n=va(t,r)||n,v?t.style[r]=v:Uo(t,r)),m=[a,n],YE(m),a=m[0],n=m[1],p=a.match(Xc)||[],T=n.match(Xc)||[],T.length){for(;f=Xc.exec(n);)y=f[0],S=n.substring(u,f.index),g?g=(g+1)%5:(S.substr(-5)==="rgba("||S.substr(-5)==="hsla(")&&(g=1),y!==(v=p[h++]||"")&&(j=parseFloat(v)||0,_=v.substr((j+"").length),y.charAt(1)==="="&&(y=ad(j,y)+_),N=parseFloat(y),k=y.substr((N+"").length),u=Xc.lastIndex-k.length,k||(k=k||ea.units[r]||_,u===n.length&&(n+=k,c.e+=k)),_!==k&&(j=Cl(t,r,v,k)||0),c._pt={_next:c._pt,p:S||h===1?S:",",s:j,c:N-j,m:g&&g<4||r==="zIndex"?Math.round:0});c.c=u<n.length?n.substring(u,n.length):""}else c.r=r==="display"&&n==="none"?lA:iA;return wE.test(n)&&(c.e=0),this._pt=c,c},n6={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},gI=function(t){var r=t.split(" "),a=r[0],n=r[1]||"50%";return(a==="top"||a==="bottom"||n==="left"||n==="right")&&(t=a,a=n,n=t),r[0]=n6[a]||a,r[1]=n6[n]||n,r.join(" ")},bI=function(t,r){if(r.tween&&r.tween._time===r.tween._dur){var a=r.t,n=a.style,i=r.u,o=a._gsap,c,u,h;if(i==="all"||i===!0)n.cssText="",u=1;else for(i=i.split(","),h=i.length;--h>-1;)c=i[h],vi[c]&&(u=1,c=c==="transformOrigin"?Br:Jt),Uo(a,c);u&&(Uo(a,Jt),o&&(o.svg&&a.removeAttribute("transform"),n.scale=n.rotate=n.translate="none",dm(a,1),o.uncache=1,oA(n)))}},Kf={clearProps:function(t,r,a,n,i){if(i.data!=="isFromStart"){var o=t._pt=new Pr(t._pt,r,a,0,0,bI);return o.u=n,o.pr=-10,o.tween=i,t._props.push(a),1}}},cm=[1,0,0,1,0,0],mA={},xA=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},i6=function(t){var r=va(t,Jt);return xA(r)?cm:r.substr(7).match(jE).map(fs)},MN=function(t,r){var a=t._gsap||Mo(t),n=t.style,i=i6(t),o,c,u,h;return a.svg&&t.getAttribute("transform")?(u=t.transform.baseVal.consolidate().matrix,i=[u.a,u.b,u.c,u.d,u.e,u.f],i.join(",")==="1,0,0,1,0,0"?cm:i):(i===cm&&!t.offsetParent&&t!==nd&&!a.svg&&(u=n.display,n.display="block",o=t.parentNode,(!o||!t.offsetParent&&!t.getBoundingClientRect().width)&&(h=1,c=t.nextElementSibling,nd.appendChild(t)),i=i6(t),u?n.display=u:Uo(t,"display"),h&&(c?o.insertBefore(t,c):o?o.appendChild(t):nd.removeChild(t))),r&&i.length>6?[i[0],i[1],i[4],i[5],i[12],i[13]]:i)},xw=function(t,r,a,n,i,o){var c=t._gsap,u=i||MN(t,!0),h=c.xOrigin||0,m=c.yOrigin||0,f=c.xOffset||0,p=c.yOffset||0,j=u[0],g=u[1],v=u[2],y=u[3],N=u[4],S=u[5],k=r.split(" "),_=parseFloat(k[0])||0,T=parseFloat(k[1])||0,E,z,M,C;a?u!==cm&&(z=j*y-g*v)&&(M=_*(y/z)+T*(-v/z)+(v*S-y*N)/z,C=_*(-g/z)+T*(j/z)-(j*S-g*N)/z,_=M,T=C):(E=uA(t),_=E.x+(~k[0].indexOf("%")?_/100*E.width:_),T=E.y+(~(k[1]||k[0]).indexOf("%")?T/100*E.height:T)),n||n!==!1&&c.smooth?(N=_-h,S=T-m,c.xOffset=f+(N*j+S*v)-N,c.yOffset=p+(N*g+S*y)-S):c.xOffset=c.yOffset=0,c.xOrigin=_,c.yOrigin=T,c.smooth=!!n,c.origin=r,c.originIsAbsolute=!!a,t.style[Br]="0px 0px",o&&(fl(o,c,"xOrigin",h,_),fl(o,c,"yOrigin",m,T),fl(o,c,"xOffset",f,c.xOffset),fl(o,c,"yOffset",p,c.yOffset)),t.setAttribute("data-svg-origin",_+" "+T)},dm=function(t,r){var a=t._gsap||new ZE(t);if("x"in a&&!r&&!a.uncache)return a;var n=t.style,i=a.scaleX<0,o="px",c="deg",u=getComputedStyle(t),h=va(t,Br)||"0",m,f,p,j,g,v,y,N,S,k,_,T,E,z,M,C,A,Z,I,V,R,q,J,se,Y,ee,te,K,$,le,ie,oe;return m=f=p=v=y=N=S=k=_=0,j=g=1,a.svg=!!(t.getCTM&&hA(t)),u.translate&&((u.translate!=="none"||u.scale!=="none"||u.rotate!=="none")&&(n[Jt]=(u.translate!=="none"?"translate3d("+(u.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(u.rotate!=="none"?"rotate("+u.rotate+") ":"")+(u.scale!=="none"?"scale("+u.scale.split(" ").join(",")+") ":"")+(u[Jt]!=="none"?u[Jt]:"")),n.scale=n.rotate=n.translate="none"),z=MN(t,a.svg),a.svg&&(a.uncache?(Y=t.getBBox(),h=a.xOrigin-Y.x+"px "+(a.yOrigin-Y.y)+"px",se=""):se=!r&&t.getAttribute("data-svg-origin"),xw(t,se||h,!!se||a.originIsAbsolute,a.smooth!==!1,z)),T=a.xOrigin||0,E=a.yOrigin||0,z!==cm&&(Z=z[0],I=z[1],V=z[2],R=z[3],m=q=z[4],f=J=z[5],z.length===6?(j=Math.sqrt(Z*Z+I*I),g=Math.sqrt(R*R+V*V),v=Z||I?Bc(I,Z)*jo:0,S=V||R?Bc(V,R)*jo+v:0,S&&(g*=Math.abs(Math.cos(S*id))),a.svg&&(m-=T-(T*Z+E*V),f-=E-(T*I+E*R))):(oe=z[6],le=z[7],te=z[8],K=z[9],$=z[10],ie=z[11],m=z[12],f=z[13],p=z[14],M=Bc(oe,$),y=M*jo,M&&(C=Math.cos(-M),A=Math.sin(-M),se=q*C+te*A,Y=J*C+K*A,ee=oe*C+$*A,te=q*-A+te*C,K=J*-A+K*C,$=oe*-A+$*C,ie=le*-A+ie*C,q=se,J=Y,oe=ee),M=Bc(-V,$),N=M*jo,M&&(C=Math.cos(-M),A=Math.sin(-M),se=Z*C-te*A,Y=I*C-K*A,ee=V*C-$*A,ie=R*A+ie*C,Z=se,I=Y,V=ee),M=Bc(I,Z),v=M*jo,M&&(C=Math.cos(M),A=Math.sin(M),se=Z*C+I*A,Y=q*C+J*A,I=I*C-Z*A,J=J*C-q*A,Z=se,q=Y),y&&Math.abs(y)+Math.abs(v)>359.9&&(y=v=0,N=180-N),j=fs(Math.sqrt(Z*Z+I*I+V*V)),g=fs(Math.sqrt(J*J+oe*oe)),M=Bc(q,J),S=Math.abs(M)>2e-4?M*jo:0,_=ie?1/(ie<0?-ie:ie):0),a.svg&&(se=t.getAttribute("transform"),a.forceCSS=t.setAttribute("transform","")||!xA(va(t,Jt)),se&&t.setAttribute("transform",se))),Math.abs(S)>90&&Math.abs(S)<270&&(i?(j*=-1,S+=v<=0?180:-180,v+=v<=0?180:-180):(g*=-1,S+=S<=0?180:-180)),r=r||a.uncache,a.x=m-((a.xPercent=m&&(!r&&a.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-m)?-50:0)))?t.offsetWidth*a.xPercent/100:0)+o,a.y=f-((a.yPercent=f&&(!r&&a.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-f)?-50:0)))?t.offsetHeight*a.yPercent/100:0)+o,a.z=p+o,a.scaleX=fs(j),a.scaleY=fs(g),a.rotation=fs(v)+c,a.rotationX=fs(y)+c,a.rotationY=fs(N)+c,a.skewX=S+c,a.skewY=k+c,a.transformPerspective=_+o,(a.zOrigin=parseFloat(h.split(" ")[2])||!r&&a.zOrigin||0)&&(n[Br]=Xf(h)),a.xOffset=a.yOffset=0,a.force3D=ea.force3D,a.renderTransform=a.svg?vI:dA?fA:yI,a.uncache=0,a},Xf=function(t){return(t=t.split(" "))[0]+" "+t[1]},gy=function(t,r,a){var n=nr(r);return fs(parseFloat(r)+parseFloat(Cl(t,"x",a+"px",n)))+n},yI=function(t,r){r.z="0px",r.rotationY=r.rotationX="0deg",r.force3D=0,fA(t,r)},oo="0deg",uh="0px",co=") ",fA=function(t,r){var a=r||this,n=a.xPercent,i=a.yPercent,o=a.x,c=a.y,u=a.z,h=a.rotation,m=a.rotationY,f=a.rotationX,p=a.skewX,j=a.skewY,g=a.scaleX,v=a.scaleY,y=a.transformPerspective,N=a.force3D,S=a.target,k=a.zOrigin,_="",T=N==="auto"&&t&&t!==1||N===!0;if(k&&(f!==oo||m!==oo)){var E=parseFloat(m)*id,z=Math.sin(E),M=Math.cos(E),C;E=parseFloat(f)*id,C=Math.cos(E),o=gy(S,o,z*C*-k),c=gy(S,c,-Math.sin(E)*-k),u=gy(S,u,M*C*-k+k)}y!==uh&&(_+="perspective("+y+co),(n||i)&&(_+="translate("+n+"%, "+i+"%) "),(T||o!==uh||c!==uh||u!==uh)&&(_+=u!==uh||T?"translate3d("+o+", "+c+", "+u+") ":"translate("+o+", "+c+co),h!==oo&&(_+="rotate("+h+co),m!==oo&&(_+="rotateY("+m+co),f!==oo&&(_+="rotateX("+f+co),(p!==oo||j!==oo)&&(_+="skew("+p+", "+j+co),(g!==1||v!==1)&&(_+="scale("+g+", "+v+co),S.style[Jt]=_||"translate(0, 0)"},vI=function(t,r){var a=r||this,n=a.xPercent,i=a.yPercent,o=a.x,c=a.y,u=a.rotation,h=a.skewX,m=a.skewY,f=a.scaleX,p=a.scaleY,j=a.target,g=a.xOrigin,v=a.yOrigin,y=a.xOffset,N=a.yOffset,S=a.forceCSS,k=parseFloat(o),_=parseFloat(c),T,E,z,M,C;u=parseFloat(u),h=parseFloat(h),m=parseFloat(m),m&&(m=parseFloat(m),h+=m,u+=m),u||h?(u*=id,h*=id,T=Math.cos(u)*f,E=Math.sin(u)*f,z=Math.sin(u-h)*-p,M=Math.cos(u-h)*p,h&&(m*=id,C=Math.tan(h-m),C=Math.sqrt(1+C*C),z*=C,M*=C,m&&(C=Math.tan(m),C=Math.sqrt(1+C*C),T*=C,E*=C)),T=fs(T),E=fs(E),z=fs(z),M=fs(M)):(T=f,M=p,E=z=0),(k&&!~(o+"").indexOf("px")||_&&!~(c+"").indexOf("px"))&&(k=Cl(j,"x",o,"px"),_=Cl(j,"y",c,"px")),(g||v||y||N)&&(k=fs(k+g-(g*T+v*z)+y),_=fs(_+v-(g*E+v*M)+N)),(n||i)&&(C=j.getBBox(),k=fs(k+n/100*C.width),_=fs(_+i/100*C.height)),C="matrix("+T+","+E+","+z+","+M+","+k+","+_+")",j.setAttribute("transform",C),S&&(j.style[Jt]=C)},jI=function(t,r,a,n,i){var o=360,c=Is(i),u=parseFloat(i)*(c&&~i.indexOf("rad")?jo:1),h=u-n,m=n+h+"deg",f,p;return c&&(f=i.split("_")[1],f==="short"&&(h%=o,h!==h%(o/2)&&(h+=h<0?o:-o)),f==="cw"&&h<0?h=(h+o*e6)%o-~~(h/o)*o:f==="ccw"&&h>0&&(h=(h-o*e6)%o-~~(h/o)*o)),t._pt=p=new Pr(t._pt,r,a,n,h,aI),p.e=m,p.u="deg",t._props.push(a),p},l6=function(t,r){for(var a in r)t[a]=r[a];return t},wI=function(t,r,a){var n=l6({},a._gsap),i="perspective,force3D,transformOrigin,svgOrigin",o=a.style,c,u,h,m,f,p,j,g;n.svg?(h=a.getAttribute("transform"),a.setAttribute("transform",""),o[Jt]=r,c=dm(a,1),Uo(a,Jt),a.setAttribute("transform",h)):(h=getComputedStyle(a)[Jt],o[Jt]=r,c=dm(a,1),o[Jt]=h);for(u in vi)h=n[u],m=c[u],h!==m&&i.indexOf(u)<0&&(j=nr(h),g=nr(m),f=j!==g?Cl(a,u,h,g):parseFloat(h),p=parseFloat(m),t._pt=new Pr(t._pt,c,u,f,p-f,uw),t._pt.u=g||0,t._props.push(u));l6(c,n)};Lr("padding,margin,Width,Radius",function(s,t){var r="Top",a="Right",n="Bottom",i="Left",o=(t<3?[r,a,n,i]:[r+i,r+a,n+a,n+i]).map(function(c){return t<2?s+c:"border"+c+s});Kf[t>1?"border"+s:s]=function(c,u,h,m,f){var p,j;if(arguments.length<4)return p=o.map(function(g){return oi(c,g,h)}),j=p.join(" "),j.split(p[0]).length===5?p[0]:j;p=(m+"").split(" "),j={},o.forEach(function(g,v){return j[g]=p[v]=p[v]||p[(v-1)/2|0]}),c.init(u,j,f)}});var pA={name:"css",register:mw,targetTest:function(t){return t.style&&t.nodeType},init:function(t,r,a,n,i){var o=this._props,c=t.style,u=a.vars.startAt,h,m,f,p,j,g,v,y,N,S,k,_,T,E,z,M;AN||mw(),this.styles=this.styles||cA(t),M=this.styles.props,this.tween=a;for(v in r)if(v!=="autoRound"&&(m=r[v],!(Kr[v]&&QE(v,r,a,n,t,i)))){if(j=typeof m,g=Kf[v],j==="function"&&(m=m.call(a,n,t,i),j=typeof m),j==="string"&&~m.indexOf("random(")&&(m=im(m)),g)g(this,t,v,m,a)&&(z=1);else if(v.substr(0,2)==="--")h=(getComputedStyle(t).getPropertyValue(v)+"").trim(),m+="",wl.lastIndex=0,wl.test(h)||(y=nr(h),N=nr(m)),N?y!==N&&(h=Cl(t,v,h,N)+N):y&&(m+=y),this.add(c,"setProperty",h,m,n,i,0,0,v),o.push(v),M.push(v,0,c[v]);else if(j!=="undefined"){if(u&&v in u?(h=typeof u[v]=="function"?u[v].call(a,n,t,i):u[v],Is(h)&&~h.indexOf("random(")&&(h=im(h)),nr(h+"")||h==="auto"||(h+=ea.units[v]||nr(oi(t,v))||""),(h+"").charAt(1)==="="&&(h=oi(t,v))):h=oi(t,v),p=parseFloat(h),S=j==="string"&&m.charAt(1)==="="&&m.substr(0,2),S&&(m=m.substr(2)),f=parseFloat(m),v in mn&&(v==="autoAlpha"&&(p===1&&oi(t,"visibility")==="hidden"&&f&&(p=0),M.push("visibility",0,c.visibility),fl(this,c,"visibility",p?"inherit":"hidden",f?"inherit":"hidden",!f)),v!=="scale"&&v!=="transform"&&(v=mn[v],~v.indexOf(",")&&(v=v.split(",")[0]))),k=v in vi,k){if(this.styles.save(v),j==="string"&&m.substring(0,6)==="var(--"&&(m=va(t,m.substring(4,m.indexOf(")"))),f=parseFloat(m)),_||(T=t._gsap,T.renderTransform&&!r.parseTransform||dm(t,r.parseTransform),E=r.smoothOrigin!==!1&&T.smooth,_=this._pt=new Pr(this._pt,c,Jt,0,1,T.renderTransform,T,0,-1),_.dep=1),v==="scale")this._pt=new Pr(this._pt,T,"scaleY",T.scaleY,(S?ad(T.scaleY,S+f):f)-T.scaleY||0,uw),this._pt.u=0,o.push("scaleY",v),v+="X";else if(v==="transformOrigin"){M.push(Br,0,c[Br]),m=gI(m),T.svg?xw(t,m,0,E,0,this):(N=parseFloat(m.split(" ")[2])||0,N!==T.zOrigin&&fl(this,T,"zOrigin",T.zOrigin,N),fl(this,c,v,Xf(h),Xf(m)));continue}else if(v==="svgOrigin"){xw(t,m,1,E,0,this);continue}else if(v in mA){jI(this,T,v,p,S?ad(p,S+m):m);continue}else if(v==="smoothOrigin"){fl(this,T,"smooth",T.smooth,m);continue}else if(v==="force3D"){T[v]=m;continue}else if(v==="transform"){wI(this,m,t);continue}}else v in c||(v=yd(v)||v);if(k||(f||f===0)&&(p||p===0)&&!rI.test(m)&&v in c)y=(h+"").substr((p+"").length),f||(f=0),N=nr(m)||(v in ea.units?ea.units[v]:y),y!==N&&(p=Cl(t,v,h,N)),this._pt=new Pr(this._pt,k?T:c,v,p,(S?ad(p,S+f):f)-p,!k&&(N==="px"||v==="zIndex")&&r.autoRound!==!1?iI:uw),this._pt.u=N||0,y!==N&&N!=="%"&&(this._pt.b=h,this._pt.r=nI);else if(v in c)pI.call(this,t,v,h,S?S+m:m);else if(v in t)this.add(t,v,h||t[v],S?S+m:m,n,i);else if(v!=="parseTransform"){vN(v,m);continue}k||(v in c?M.push(v,0,c[v]):typeof t[v]=="function"?M.push(v,2,t[v]()):M.push(v,1,h||t[v])),o.push(v)}}z&&aA(this)},render:function(t,r){if(r.tween._time||!DN())for(var a=r._pt;a;)a.r(t,a.d),a=a._next;else r.styles.revert()},get:oi,aliases:mn,getSetter:function(t,r,a){var n=mn[r];return n&&n.indexOf(",")<0&&(r=n),r in vi&&r!==Br&&(t._gsap.x||oi(t,"x"))?a&&J4===a?r==="scale"?dI:cI:(J4=a||{})&&(r==="scale"?uI:hI):t.style&&!gN(t.style[r])?lI:~r.indexOf("-")?oI:TN(t,r)},core:{_removeProperty:Uo,_getMatrix:MN}};Ir.utils.checkPrefix=yd;Ir.core.getStyleSaver=cA;(function(s,t,r,a){var n=Lr(s+","+t+","+r,function(i){vi[i]=1});Lr(t,function(i){ea.units[i]="deg",mA[i]=1}),mn[n[13]]=s+","+t,Lr(a,function(i){var o=i.split(":");mn[o[1]]=n[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Lr("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(s){ea.units[s]="px"});Ir.registerPlugin(pA);var Gs=Ir.registerPlugin(pA)||Ir;Gs.core.Tween;const NI=({items:s=[]})=>e.jsx("div",{className:"menu-wrap",children:e.jsx("nav",{className:"menu",children:s.map((t,r)=>e.jsx(_I,{...t},r))})}),_I=({path:s,text:t,image:r,onClick:a})=>{const n=Wa(),i=hl.useRef(null),o=hl.useRef(null),c=hl.useRef(null),u={duration:.6,ease:"expo"},h=(v,y,N,S)=>{const k=v-N,_=y-S;return k*k+_*_},m=(v,y,N,S)=>{const k=h(v,y,N/2,0),_=h(v,y,N/2,S);return k<_?"top":"bottom"},f=v=>{if(!i.current||!o.current||!c.current)return;const y=i.current.getBoundingClientRect(),N=v.clientX-y.left,S=v.clientY-y.top,k=m(N,S,y.width,y.height);Gs.timeline({defaults:u}).set(o.current,{y:k==="top"?"-101%":"101%"},0).set(c.current,{y:k==="top"?"101%":"-101%"},0).to([o.current,c.current],{y:"0%"},0)},p=v=>{if(!i.current||!o.current||!c.current)return;const y=i.current.getBoundingClientRect(),N=v.clientX-y.left,S=v.clientY-y.top,k=m(N,S,y.width,y.height);Gs.timeline({defaults:u}).to(o.current,{y:k==="top"?"-101%":"101%"},0).to(c.current,{y:k==="top"?"101%":"-101%"},0)},j=()=>{n(s),a?.()},g=hl.useMemo(()=>Array.from({length:4}).map((v,y)=>e.jsxs(hl.Fragment,{children:[e.jsx("span",{children:t}),e.jsx("div",{className:"marquee__img",style:{backgroundImage:`url(${r})`}})]},y)),[t,r]);return e.jsxs("div",{className:"menu__item",ref:i,children:[e.jsx("div",{className:"menu__item-link",onClick:j,onMouseEnter:f,onMouseLeave:p,children:t}),e.jsx("div",{className:"marquee",ref:o,children:e.jsx("div",{className:"marquee__inner-wrap",ref:c,children:e.jsx("div",{className:"marquee__inner","aria-hidden":"true",children:g})})})]})},kI=[{path:"/",text:"",image:"https://picsum.photos/600/400?random=1",roles:["OWNER","TEAMLEAD"]},{path:"/projects",text:"",image:"https://picsum.photos/600/400?random=2",roles:["OWNER","TEAMLEAD"]},{path:"/project-files",text:" ",image:"https://picsum.photos/600/400?random=3",roles:["OWNER"]},{path:"/tasks",text:"",image:"https://picsum.photos/600/400?random=4",roles:["OWNER","TEAMLEAD"]},{path:"/tasks-archive",text:" ",image:"https://picsum.photos/600/400?random=5",roles:["OWNER"]},{path:"/my-tasks",text:" ",image:"https://picsum.photos/600/400?random=6",roles:["OWNER","EXECUTOR"]},{path:"/revisions",text:"",image:"https://picsum.photos/600/400?random=7",roles:["OWNER"]},{path:"/clients",text:"",image:"https://picsum.photos/600/400?random=8",roles:["OWNER","TEAMLEAD"]},{path:"/leads",text:"",image:"https://picsum.photos/600/400?random=9",roles:["OWNER","TEAMLEAD"]},{path:"/deals",text:"",image:"https://picsum.photos/600/400?random=10",roles:["OWNER","TEAMLEAD"]},{path:"/contractors",text:"",image:"https://picsum.photos/600/400?random=11",roles:["OWNER","TEAMLEAD"],readOnly:!0},{path:"/chats",text:"",image:"https://picsum.photos/600/400?random=12",roles:["OWNER","TEAMLEAD","EXECUTOR"]},{path:"/avito",text:"Avito",image:"https://picsum.photos/600/400?random=13",roles:["OWNER"]},{path:"/documents",text:"",image:"https://picsum.photos/600/400?random=14",roles:["OWNER","TEAMLEAD"],readOnly:!0},{path:"/transcription",text:"",image:"https://picsum.photos/600/400?random=27",roles:["OWNER","TEAMLEAD"]},{path:"/ai-calls",text:"AI ",image:"https://picsum.photos/600/400?random=29",roles:["OWNER","TEAMLEAD"]},{path:"/portfolio",text:"",image:"https://picsum.photos/600/400?random=15",roles:["OWNER"]},{path:"/finance",text:"",image:"https://picsum.photos/600/400?random=16",roles:["OWNER"]},{path:"/services",text:"",image:"https://picsum.photos/600/400?random=17",roles:["OWNER"]},{path:"/analytics",text:"",image:"https://picsum.photos/600/400?random=18",roles:["OWNER"]},{path:"/reports",text:"",image:"https://picsum.photos/600/400?random=19",roles:["OWNER"]},{path:"/notifications",text:"",image:"https://picsum.photos/600/400?random=20",roles:["OWNER"]},{path:"/automation",text:"",image:"https://picsum.photos/600/400?random=21",roles:["OWNER"]},{path:"/hosting",text:"",image:"https://picsum.photos/600/400?random=23",roles:["OWNER"]},{path:"/permissions",text:" ",image:"https://picsum.photos/600/400?random=24",roles:["OWNER"]},{path:"/timlead-regulations",text:"",image:"https://picsum.photos/600/400?random=28",roles:["OWNER"]},{path:"/users",text:"",image:"https://picsum.photos/600/400?random=25",roles:["OWNER"]},{path:"/settings",text:"",image:"https://picsum.photos/600/400?random=26",roles:["OWNER","TEAMLEAD","EXECUTOR"]}],SI=s=>s?s==="CLIENT"?[]:kI.filter(t=>t.roles.includes(s)):[],CI=({isOpen:s,onClose:t})=>{const{user:r,logout:a}=bp(),n=w.useMemo(()=>SI(r?.role).map(h=>({path:h.path,text:h.text,image:h.image,onClick:t})),[r?.role,t]);w.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[s]);const i=()=>{a(),t()},o=()=>r?.firstName&&r?.lastName?`${r.firstName.charAt(0)}${r.lastName.charAt(0)}`.toUpperCase():r?.username?r.username.charAt(0).toUpperCase():"?",c=()=>r?.firstName&&r?.lastName?`${r.firstName} ${r.lastName}`:r?.username||"",u=()=>{switch(r?.role){case"OWNER":return"";case"TEAMLEAD":return"";case"EXECUTOR":return"";case"CLIENT":return"";default:return""}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`fixed inset-0 bg-black/60 backdrop-blur-sm z-40 transition-opacity duration-300 ${s?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:t}),e.jsxs("aside",{className:`fixed left-0 top-0 w-80 bg-gradient-to-b from-[#1a1d2e] via-[#1a1d2e] to-[#14161f] h-screen flex flex-col shadow-2xl overflow-hidden z-50 transition-transform duration-300 ${s?"translate-x-0":"-translate-x-full"}`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-purple-600/10 to-pink-600/10 rounded-full blur-3xl -mr-32 -mt-32"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-gradient-to-tr from-blue-600/10 to-cyan-600/10 rounded-full blur-3xl -ml-32 -mb-32"}),e.jsxs("div",{className:"relative px-6 py-6 border-b border-white/5 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 group cursor-pointer",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-purple-500 via-pink-500 to-red-500 flex items-center justify-center font-bold text-white text-xl shadow-lg group-hover:shadow-purple-500/50 transition-all duration-300 group-hover:scale-110",children:e.jsx(Ua,{className:"w-6 h-6"})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-[#1a1d2e] animate-pulse"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-xl font-bold text-white group-hover:text-purple-300 transition-colors",children:"CRM System"}),e.jsx("p",{className:"text-xs text-gray-400 group-hover:text-gray-300 transition-colors",children:"Nikolaev Studio"})]})]}),e.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-lg transition-all",title:" ",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-1 relative overflow-y-auto overflow-x-hidden scrollbar-hide",style:{height:"600px"},children:n.length>0?e.jsx(NI,{items:n}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-gray-400 text-sm",children:"  "})})}),e.jsxs("div",{className:"relative px-4 py-6 border-t border-white/5",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-500/10 to-pink-500/10 rounded-2xl p-4 backdrop-blur-sm border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold shadow-lg",children:o()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-white truncate",children:c()}),e.jsx("p",{className:"text-xs text-gray-400 truncate",children:r?.email||u()})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1 text-green-400",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{children:""})]}),e.jsxs("button",{onClick:i,className:"flex items-center gap-1 px-2 py-1 text-gray-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-all",title:"",children:[e.jsx(hE,{className:"w-3 h-3"}),e.jsx("span",{children:""})]})]})]}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:" 2025 CRM System"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"v2.0.0"})]})]})]})]})},TI=()=>{const{currentFont:s,setFont:t}=G9(),[r,a]=w.useState(!1),n=i=>{t(i),a(!1)};return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>a(!r),className:"flex items-center gap-2 px-4 py-2 bg-[#0a0a1a] border border-[#392e4e] rounded-lg hover:border-purple-500 transition-all",title:" ",children:[e.jsx(Vf,{className:"w-5 h-5 text-white"}),e.jsx("span",{className:"text-sm text-white hidden md:inline",children:s})]}),r&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)}),e.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-[#0a0a1a] border border-[#392e4e] rounded-xl shadow-2xl z-50 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-[#392e4e]",children:[e.jsxs("h3",{className:"text-white font-semibold flex items-center gap-2",children:[e.jsx(Vf,{className:"w-5 h-5"})," "]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"    "})]}),e.jsxs("div",{className:"max-h-96 overflow-y-auto",children:[e.jsx("div",{className:"px-3 py-2 bg-[#392e4e]/30 sticky top-0 z-10",children:e.jsx("h4",{className:"text-xs font-semibold text-purple-400 uppercase tracking-wider",children:" "})}),o4.filter(i=>i.category==="normal").map(i=>e.jsx("button",{onClick:()=>n(i.value),className:`w-full text-left px-4 py-3 hover:bg-[#392e4e]/20 transition-all border-b border-[#392e4e]/50 ${s===i.value?"bg-purple-500/10 border-l-4 border-l-purple-500":""}`,style:{fontFamily:`'${i.value}', sans-serif`},children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-white font-medium mb-1",children:i.name}),e.jsx("div",{className:"text-xs text-gray-400",children:i.description}),e.jsx("div",{className:"text-sm text-gray-300 mt-2",children:"   123"})]}),s===i.value&&e.jsx("div",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-purple-500 mt-1"})]})},i.value)),e.jsx("div",{className:"px-3 py-2 bg-[#392e4e]/30 sticky top-0 z-10 mt-2",children:e.jsxs("h4",{className:"text-xs font-semibold text-red-400 uppercase tracking-wider flex items-center gap-2",children:[e.jsx("span",{children:""}),"  "]})}),o4.filter(i=>i.category==="strange").map(i=>e.jsx("button",{onClick:()=>n(i.value),className:`w-full text-left px-4 py-3 hover:bg-red-500/10 transition-all border-b border-[#392e4e]/50 ${s===i.value?"bg-red-500/10 border-l-4 border-l-red-500":""}`,style:{fontFamily:`'${i.value}', sans-serif`},children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-white font-medium mb-1",children:i.name}),e.jsx("div",{className:"text-xs text-gray-400",children:i.description}),e.jsx("div",{className:"text-sm text-gray-300 mt-2",children:"   123"})]}),s===i.value&&e.jsx("div",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-red-500 mt-1"})]})},i.value))]})]})]})]})},EI=()=>{const s=Ni(),t=Wa(),[r,a]=w.useState(!1),[n,i]=w.useState(null);w.useEffect(()=>{a(!1)},[s]),w.useEffect(()=>{const c=localStorage.getItem("auth");if(c)try{const u=JSON.parse(c);i(u)}catch(u){console.error("Error parsing auth:",u)}},[]);const o=()=>{localStorage.removeItem("auth"),t("/login")};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:[e.jsx(CI,{isOpen:r,onClose:()=>a(!1)}),e.jsxs("main",{className:"w-full",children:[e.jsx("div",{className:"sticky top-0 z-40 bg-white/80 backdrop-blur-md border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>a(!0),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:" ",children:e.jsx(mE,{className:"w-6 h-6 text-gray-700"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-purple-500 via-pink-500 to-red-500 flex items-center justify-center font-bold text-white text-sm shadow-lg",children:"N"}),e.jsx("h1",{className:"text-sm font-bold text-gray-900",children:"Nikolaev Code Studio CRM"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(TI,{}),n&&e.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:e.jsx(st,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:n.firstName||n.username}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:n.role==="owner"?"":n.role==="timlead"?"":""})]})]}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors group",title:"",children:e.jsx(hE,{className:"w-4 h-4 text-gray-600 dark:text-gray-400 group-hover:text-red-600 dark:group-hover:text-red-400"})})]})]})]})}),e.jsx(aN,{})]})]})},AI=()=>{const{isAuthenticated:s,isLoading:t}=bp();return t?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"..."})]})}):s?e.jsx(aN,{}):e.jsx(wT,{to:"/login",replace:!0})},DI=()=>{const s=Wa(),{login:t,isAuthenticated:r}=bp(),[a,n]=w.useState(""),[i,o]=w.useState(""),[c,u]=w.useState(""),[h,m]=w.useState(!1);w.useEffect(()=>{r&&s("/",{replace:!0})},[r,s]);const f=async p=>{p.preventDefault(),u(""),m(!0);try{await t(a,i),s("/",{replace:!0})}catch(j){console.error("Login error:",j),j.response?.status===401?u("   "):u("  .  .")}finally{m(!1)}};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 px-4",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-purple-300 dark:bg-purple-900 rounded-full mix-blend-multiply dark:mix-blend-soft-light filter blur-xl opacity-20 animate-blob"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-300 dark:bg-blue-900 rounded-full mix-blend-multiply dark:mix-blend-soft-light filter blur-xl opacity-20 animate-blob animation-delay-2000"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 w-80 h-80 bg-pink-300 dark:bg-pink-900 rounded-full mix-blend-multiply dark:mix-blend-soft-light filter blur-xl opacity-20 animate-blob animation-delay-4000"})]}),e.jsxs("div",{className:"w-full max-w-md relative z-10",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl mb-4 shadow-lg",children:e.jsx(F4,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:" "}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"  CRM "})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 border border-gray-200 dark:border-gray-700",children:[e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:" "}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(st,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:a,onChange:p=>n(p.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"admin",required:!0,autoFocus:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Uf,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"password",value:i,onChange:p=>o(p.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"",required:!0})]})]}),c&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[e.jsx(qe,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:c})]}),e.jsx("button",{type:"submit",disabled:h,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-medium rounded-lg hover:from-blue-600 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-[1.02] active:scale-[0.98] shadow-lg",children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"..."]}):e.jsxs(e.Fragment,{children:[e.jsx(F4,{className:"w-5 h-5"}),""]})})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:"     "})})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"CRM   2025"})})]}),e.jsx("style",{children:`
        @keyframes blob {
          0% {
            transform: translate(0px, 0px) scale(1);
          }
          33% {
            transform: translate(30px, -50px) scale(1.1);
          }
          66% {
            transform: translate(-20px, 20px) scale(0.9);
          }
          100% {
            transform: translate(0px, 0px) scale(1);
          }
        }
        .animate-blob {
          animation: blob 7s infinite;
        }
        .animation-delay-2000 {
          animation-delay: 2s;
        }
        .animation-delay-4000 {
          animation-delay: 4s;
        }
      `})]})},gA=12,bA=300,_p="132, 0, 255",RI=768,MI=(s,t,r=_p)=>{const a=document.createElement("div");return a.className="particle",a.style.cssText=`
    position: absolute;
    width: 4px;
    height: 4px;
    border-radius: 50%;
    background: rgba(${r}, 1);
    box-shadow: 0 0 6px rgba(${r}, 0.6);
    pointer-events: none;
    z-index: 100;
    left: ${s}px;
    top: ${t}px;
  `,a},OI=s=>({proximity:s*.5,fadeDistance:s*.75}),LI=(s,t,r,a,n)=>{const i=s.getBoundingClientRect(),o=(t-i.left)/i.width*100,c=(r-i.top)/i.height*100;s.style.setProperty("--glow-x",`${o}%`),s.style.setProperty("--glow-y",`${c}%`),s.style.setProperty("--glow-intensity",a.toString()),s.style.setProperty("--glow-radius",`${n}px`)},PI=({children:s,className:t="",disableAnimations:r=!1,style:a,particleCount:n=gA,glowColor:i=_p,enableTilt:o=!0,clickEffect:c=!1,enableMagnetism:u=!1})=>{const h=w.useRef(null),m=w.useRef([]),f=w.useRef([]),p=w.useRef(!1),j=w.useRef([]),g=w.useRef(!1),v=w.useRef(null),y=w.useCallback(()=>{if(g.current||!h.current)return;const{width:k,height:_}=h.current.getBoundingClientRect();j.current=Array.from({length:n},()=>MI(Math.random()*k,Math.random()*_,i)),g.current=!0},[n,i]),N=w.useCallback(()=>{f.current.forEach(clearTimeout),f.current=[],v.current?.kill(),m.current.forEach(k=>{Gs.to(k,{scale:0,opacity:0,duration:.3,ease:"back.in(1.7)",onComplete:()=>{k.parentNode?.removeChild(k)}})}),m.current=[]},[]),S=w.useCallback(()=>{!h.current||!p.current||(g.current||y(),j.current.forEach((k,_)=>{const T=setTimeout(()=>{if(!p.current||!h.current)return;const E=k.cloneNode(!0);h.current.appendChild(E),m.current.push(E),Gs.fromTo(E,{scale:0,opacity:0},{scale:1,opacity:1,duration:.3,ease:"back.out(1.7)"}),Gs.to(E,{x:(Math.random()-.5)*100,y:(Math.random()-.5)*100,rotation:Math.random()*360,duration:2+Math.random()*2,ease:"none",repeat:-1,yoyo:!0}),Gs.to(E,{opacity:.3,duration:1.5,ease:"power2.inOut",repeat:-1,yoyo:!0})},_*100);f.current.push(T)}))},[y]);return w.useEffect(()=>{if(r||!h.current)return;const k=h.current,_=()=>{p.current=!0,S(),o&&Gs.to(k,{rotateX:5,rotateY:5,duration:.3,ease:"power2.out",transformPerspective:1e3})},T=()=>{p.current=!1,N(),o&&Gs.to(k,{rotateX:0,rotateY:0,duration:.3,ease:"power2.out"}),u&&Gs.to(k,{x:0,y:0,duration:.3,ease:"power2.out"})},E=M=>{if(!o&&!u)return;const C=k.getBoundingClientRect(),A=M.clientX-C.left,Z=M.clientY-C.top,I=C.width/2,V=C.height/2;if(o){const R=(Z-V)/V*-10,q=(A-I)/I*10;Gs.to(k,{rotateX:R,rotateY:q,duration:.1,ease:"power2.out",transformPerspective:1e3})}if(u){const R=(A-I)*.05,q=(Z-V)*.05;v.current=Gs.to(k,{x:R,y:q,duration:.3,ease:"power2.out"})}},z=M=>{if(!c)return;const C=k.getBoundingClientRect(),A=M.clientX-C.left,Z=M.clientY-C.top,I=Math.max(Math.hypot(A,Z),Math.hypot(A-C.width,Z),Math.hypot(A,Z-C.height),Math.hypot(A-C.width,Z-C.height)),V=document.createElement("div");V.style.cssText=`
        position: absolute;
        width: ${I*2}px;
        height: ${I*2}px;
        border-radius: 50%;
        background: radial-gradient(circle, rgba(${i}, 0.4) 0%, rgba(${i}, 0.2) 30%, transparent 70%);
        left: ${A-I}px;
        top: ${Z-I}px;
        pointer-events: none;
        z-index: 1000;
      `,k.appendChild(V),Gs.fromTo(V,{scale:0,opacity:1},{scale:1,opacity:0,duration:.8,ease:"power2.out",onComplete:()=>V.remove()})};return k.addEventListener("mouseenter",_),k.addEventListener("mouseleave",T),k.addEventListener("mousemove",E),k.addEventListener("click",z),()=>{p.current=!1,k.removeEventListener("mouseenter",_),k.removeEventListener("mouseleave",T),k.removeEventListener("mousemove",E),k.removeEventListener("click",z),N()}},[S,N,r,o,u,c,i]),e.jsx("div",{ref:h,className:`${t} particle-container`,style:{...a,position:"relative",overflow:"hidden"},children:s})},BI=({gridRef:s,disableAnimations:t=!1,enabled:r=!0,spotlightRadius:a=bA,glowColor:n=_p})=>{const i=w.useRef(null),o=w.useRef(!1);return w.useEffect(()=>{if(t||!s?.current||!r)return;const c=document.createElement("div");c.className="global-spotlight",c.style.cssText=`
      position: fixed;
      width: 800px;
      height: 800px;
      border-radius: 50%;
      pointer-events: none;
      background: radial-gradient(circle,
        rgba(${n}, 0.15) 0%,
        rgba(${n}, 0.08) 15%,
        rgba(${n}, 0.04) 25%,
        rgba(${n}, 0.02) 40%,
        rgba(${n}, 0.01) 65%,
        transparent 70%
      );
      z-index: 200;
      opacity: 0;
      transform: translate(-50%, -50%);
      mix-blend-mode: screen;
    `,document.body.appendChild(c),i.current=c;const u=m=>{if(!i.current||!s.current)return;const p=s.current.closest(".bento-section")?.getBoundingClientRect(),j=p&&m.clientX>=p.left&&m.clientX<=p.right&&m.clientY>=p.top&&m.clientY<=p.bottom;o.current=j||!1;const g=s.current.querySelectorAll(".magic-bento-card");if(!j){Gs.to(i.current,{opacity:0,duration:.3,ease:"power2.out"}),g.forEach(k=>{k.style.setProperty("--glow-intensity","0")});return}const{proximity:v,fadeDistance:y}=OI(a);let N=1/0;g.forEach(k=>{const _=k,T=_.getBoundingClientRect(),E=T.left+T.width/2,z=T.top+T.height/2,M=Math.hypot(m.clientX-E,m.clientY-z)-Math.max(T.width,T.height)/2,C=Math.max(0,M);N=Math.min(N,C);let A=0;C<=v?A=1:C<=y&&(A=(y-C)/(y-v)),LI(_,m.clientX,m.clientY,A,a)}),Gs.to(i.current,{left:m.clientX,top:m.clientY,duration:.1,ease:"power2.out"});const S=N<=v?.8:N<=y?(y-N)/(y-v)*.8:0;Gs.to(i.current,{opacity:S,duration:S>0?.2:.5,ease:"power2.out"})},h=()=>{o.current=!1,s.current?.querySelectorAll(".magic-bento-card").forEach(m=>{m.style.setProperty("--glow-intensity","0")}),i.current&&Gs.to(i.current,{opacity:0,duration:.3,ease:"power2.out"})};return document.addEventListener("mousemove",u),document.addEventListener("mouseleave",h),()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseleave",h),i.current?.parentNode?.removeChild(i.current)}},[s,t,r,a,n]),null},FI=({children:s,gridRef:t})=>e.jsx("div",{className:"card-grid bento-section",ref:t,children:s}),zI=()=>{const[s,t]=w.useState(!1);return w.useEffect(()=>{const r=()=>t(window.innerWidth<=RI);return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),s},II=({textAutoHide:s=!0,enableStars:t=!0,enableSpotlight:r=!0,enableBorderGlow:a=!0,disableAnimations:n=!1,spotlightRadius:i=bA,particleCount:o=gA,enableTilt:c=!1,glowColor:u=_p,clickEffect:h=!0,enableMagnetism:m=!0,cards:f})=>{const p=w.useRef(null),j=zI(),g=n||j;return e.jsxs(e.Fragment,{children:[r&&e.jsx(BI,{gridRef:p,disableAnimations:g,enabled:r,spotlightRadius:i,glowColor:u}),e.jsx(FI,{gridRef:p,children:f.map((v,y)=>{const S={className:`magic-bento-card ${s?"magic-bento-card--text-autohide":""} ${a?"magic-bento-card--border-glow":""}`,style:{backgroundColor:v.color,"--glow-color":u}};return t?e.jsx(PI,{...S,disableAnimations:g,particleCount:o,glowColor:u,enableTilt:c,clickEffect:h,enableMagnetism:m,children:e.jsxs("div",{className:"magic-bento-card__clickable",onClick:v.onClick,style:{cursor:v.onClick?"pointer":"default"},children:[e.jsx("div",{className:"magic-bento-card__header",children:e.jsxs("div",{className:"magic-bento-card__label",children:[v.icon&&e.jsx("span",{className:"magic-bento-card__icon",children:v.icon}),v.label]})}),e.jsxs("div",{className:"magic-bento-card__content",children:[e.jsx("h2",{className:"magic-bento-card__title",children:v.title}),e.jsx("p",{className:"magic-bento-card__description",children:v.description})]})]})},y):e.jsx("div",{...S,children:e.jsxs("div",{className:"magic-bento-card__clickable",onClick:v.onClick,style:{cursor:v.onClick?"pointer":"default"},children:[e.jsx("div",{className:"magic-bento-card__header",children:e.jsxs("div",{className:"magic-bento-card__label",children:[v.icon&&e.jsx("span",{className:"magic-bento-card__icon",children:v.icon}),v.label]})}),e.jsxs("div",{className:"magic-bento-card__content",children:[e.jsx("h2",{className:"magic-bento-card__title",children:v.title}),e.jsx("p",{className:"magic-bento-card__description",children:v.description})]})]})},y)})})]})},yA=w.createContext({});function $I(s){const t=w.useRef(null);return t.current===null&&(t.current=s()),t.current}const ON=typeof window<"u",UI=ON?w.useLayoutEffect:w.useEffect,LN=w.createContext(null);function PN(s,t){s.indexOf(t)===-1&&s.push(t)}function BN(s,t){const r=s.indexOf(t);r>-1&&s.splice(r,1)}const ji=(s,t,r)=>r>t?t:r<s?s:r;let FN=()=>{};const wi={},vA=s=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(s);function jA(s){return typeof s=="object"&&s!==null}const wA=s=>/^0[^.\s]+$/u.test(s);function zN(s){let t;return()=>(t===void 0&&(t=s()),t)}const _a=s=>s,VI=(s,t)=>r=>t(s(r)),Rm=(...s)=>s.reduce(VI),um=(s,t,r)=>{const a=t-s;return a===0?1:(r-s)/a};class IN{constructor(){this.subscriptions=[]}add(t){return PN(this.subscriptions,t),()=>BN(this.subscriptions,t)}notify(t,r,a){const n=this.subscriptions.length;if(n)if(n===1)this.subscriptions[0](t,r,a);else for(let i=0;i<n;i++){const o=this.subscriptions[i];o&&o(t,r,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const pn=s=>s*1e3,ja=s=>s/1e3;function NA(s,t){return t?s*(1e3/t):0}const _A=(s,t,r)=>(((1-3*r+3*t)*s+(3*r-6*t))*s+3*t)*s,HI=1e-7,qI=12;function WI(s,t,r,a,n){let i,o,c=0;do o=t+(r-t)/2,i=_A(o,a,n)-s,i>0?r=o:t=o;while(Math.abs(i)>HI&&++c<qI);return o}function Mm(s,t,r,a){if(s===t&&r===a)return _a;const n=i=>WI(i,0,1,s,r);return i=>i===0||i===1?i:_A(n(i),t,a)}const kA=s=>t=>t<=.5?s(2*t)/2:(2-s(2*(1-t)))/2,SA=s=>t=>1-s(1-t),CA=Mm(.33,1.53,.69,.99),$N=SA(CA),TA=kA($N),EA=s=>(s*=2)<1?.5*$N(s):.5*(2-Math.pow(2,-10*(s-1))),UN=s=>1-Math.sin(Math.acos(s)),AA=SA(UN),DA=kA(UN),YI=Mm(.42,0,1,1),GI=Mm(0,0,.58,1),RA=Mm(.42,0,.58,1),KI=s=>Array.isArray(s)&&typeof s[0]!="number",MA=s=>Array.isArray(s)&&typeof s[0]=="number",XI={linear:_a,easeIn:YI,easeInOut:RA,easeOut:GI,circIn:UN,circInOut:DA,circOut:AA,backIn:$N,backInOut:TA,backOut:CA,anticipate:EA},ZI=s=>typeof s=="string",o6=s=>{if(MA(s)){FN(s.length===4);const[t,r,a,n]=s;return Mm(t,r,a,n)}else if(ZI(s))return XI[s];return s},B0=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function QI(s,t){let r=new Set,a=new Set,n=!1,i=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function u(m){o.has(m)&&(h.schedule(m),s()),m(c)}const h={schedule:(m,f=!1,p=!1)=>{const g=p&&n?r:a;return f&&o.add(m),g.has(m)||g.add(m),m},cancel:m=>{a.delete(m),o.delete(m)},process:m=>{if(c=m,n){i=!0;return}n=!0,[r,a]=[a,r],r.forEach(u),r.clear(),n=!1,i&&(i=!1,h.process(m))}};return h}const JI=40;function OA(s,t){let r=!1,a=!0;const n={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,o=B0.reduce((k,_)=>(k[_]=QI(i),k),{}),{setup:c,read:u,resolveKeyframes:h,preUpdate:m,update:f,preRender:p,render:j,postRender:g}=o,v=()=>{const k=wi.useManualTiming?n.timestamp:performance.now();r=!1,wi.useManualTiming||(n.delta=a?1e3/60:Math.max(Math.min(k-n.timestamp,JI),1)),n.timestamp=k,n.isProcessing=!0,c.process(n),u.process(n),h.process(n),m.process(n),f.process(n),p.process(n),j.process(n),g.process(n),n.isProcessing=!1,r&&t&&(a=!1,s(v))},y=()=>{r=!0,a=!0,n.isProcessing||s(v)};return{schedule:B0.reduce((k,_)=>{const T=o[_];return k[_]=(E,z=!1,M=!1)=>(r||y(),T.schedule(E,z,M)),k},{}),cancel:k=>{for(let _=0;_<B0.length;_++)o[B0[_]].cancel(k)},state:n,steps:o}}const{schedule:Kt,cancel:Tl,state:Ys,steps:by}=OA(typeof requestAnimationFrame<"u"?requestAnimationFrame:_a,!0);let Df;function e$(){Df=void 0}const Dr={now:()=>(Df===void 0&&Dr.set(Ys.isProcessing||wi.useManualTiming?Ys.timestamp:performance.now()),Df),set:s=>{Df=s,queueMicrotask(e$)}},LA=s=>t=>typeof t=="string"&&t.startsWith(s),VN=LA("--"),t$=LA("var(--"),HN=s=>t$(s)?s$.test(s.split("/*")[0].trim()):!1,s$=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Pd={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},hm={...Pd,transform:s=>ji(0,1,s)},F0={...Pd,default:1},$h=s=>Math.round(s*1e5)/1e5,qN=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function r$(s){return s==null}const a$=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,WN=(s,t)=>r=>!!(typeof r=="string"&&a$.test(r)&&r.startsWith(s)||t&&!r$(r)&&Object.prototype.hasOwnProperty.call(r,t)),PA=(s,t,r)=>a=>{if(typeof a!="string")return a;const[n,i,o,c]=a.match(qN);return{[s]:parseFloat(n),[t]:parseFloat(i),[r]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},n$=s=>ji(0,255,s),yy={...Pd,transform:s=>Math.round(n$(s))},Co={test:WN("rgb","red"),parse:PA("red","green","blue"),transform:({red:s,green:t,blue:r,alpha:a=1})=>"rgba("+yy.transform(s)+", "+yy.transform(t)+", "+yy.transform(r)+", "+$h(hm.transform(a))+")"};function i$(s){let t="",r="",a="",n="";return s.length>5?(t=s.substring(1,3),r=s.substring(3,5),a=s.substring(5,7),n=s.substring(7,9)):(t=s.substring(1,2),r=s.substring(2,3),a=s.substring(3,4),n=s.substring(4,5),t+=t,r+=r,a+=a,n+=n),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(a,16),alpha:n?parseInt(n,16)/255:1}}const fw={test:WN("#"),parse:i$,transform:Co.transform},Om=s=>({test:t=>typeof t=="string"&&t.endsWith(s)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${s}`}),ul=Om("deg"),gn=Om("%"),Ze=Om("px"),l$=Om("vh"),o$=Om("vw"),c6={...gn,parse:s=>gn.parse(s)/100,transform:s=>gn.transform(s*100)},Qc={test:WN("hsl","hue"),parse:PA("hue","saturation","lightness"),transform:({hue:s,saturation:t,lightness:r,alpha:a=1})=>"hsla("+Math.round(s)+", "+gn.transform($h(t))+", "+gn.transform($h(r))+", "+$h(hm.transform(a))+")"},Ss={test:s=>Co.test(s)||fw.test(s)||Qc.test(s),parse:s=>Co.test(s)?Co.parse(s):Qc.test(s)?Qc.parse(s):fw.parse(s),transform:s=>typeof s=="string"?s:s.hasOwnProperty("red")?Co.transform(s):Qc.transform(s),getAnimatableNone:s=>{const t=Ss.parse(s);return t.alpha=0,Ss.transform(t)}},c$=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function d$(s){return isNaN(s)&&typeof s=="string"&&(s.match(qN)?.length||0)+(s.match(c$)?.length||0)>0}const BA="number",FA="color",u$="var",h$="var(",d6="${}",m$=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function mm(s){const t=s.toString(),r=[],a={color:[],number:[],var:[]},n=[];let i=0;const c=t.replace(m$,u=>(Ss.test(u)?(a.color.push(i),n.push(FA),r.push(Ss.parse(u))):u.startsWith(h$)?(a.var.push(i),n.push(u$),r.push(u)):(a.number.push(i),n.push(BA),r.push(parseFloat(u))),++i,d6)).split(d6);return{values:r,split:c,indexes:a,types:n}}function zA(s){return mm(s).values}function IA(s){const{split:t,types:r}=mm(s),a=t.length;return n=>{let i="";for(let o=0;o<a;o++)if(i+=t[o],n[o]!==void 0){const c=r[o];c===BA?i+=$h(n[o]):c===FA?i+=Ss.transform(n[o]):i+=n[o]}return i}}const x$=s=>typeof s=="number"?0:Ss.test(s)?Ss.getAnimatableNone(s):s;function f$(s){const t=zA(s);return IA(s)(t.map(x$))}const El={test:d$,parse:zA,createTransformer:IA,getAnimatableNone:f$};function vy(s,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?s+(t-s)*6*r:r<1/2?t:r<2/3?s+(t-s)*(2/3-r)*6:s}function p$({hue:s,saturation:t,lightness:r,alpha:a}){s/=360,t/=100,r/=100;let n=0,i=0,o=0;if(!t)n=i=o=r;else{const c=r<.5?r*(1+t):r+t-r*t,u=2*r-c;n=vy(u,c,s+1/3),i=vy(u,c,s),o=vy(u,c,s-1/3)}return{red:Math.round(n*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:a}}function Zf(s,t){return r=>r>0?t:s}const es=(s,t,r)=>s+(t-s)*r,jy=(s,t,r)=>{const a=s*s,n=r*(t*t-a)+a;return n<0?0:Math.sqrt(n)},g$=[fw,Co,Qc],b$=s=>g$.find(t=>t.test(s));function u6(s){const t=b$(s);if(!t)return!1;let r=t.parse(s);return t===Qc&&(r=p$(r)),r}const h6=(s,t)=>{const r=u6(s),a=u6(t);if(!r||!a)return Zf(s,t);const n={...r};return i=>(n.red=jy(r.red,a.red,i),n.green=jy(r.green,a.green,i),n.blue=jy(r.blue,a.blue,i),n.alpha=es(r.alpha,a.alpha,i),Co.transform(n))},pw=new Set(["none","hidden"]);function y$(s,t){return pw.has(s)?r=>r<=0?s:t:r=>r>=1?t:s}function v$(s,t){return r=>es(s,t,r)}function YN(s){return typeof s=="number"?v$:typeof s=="string"?HN(s)?Zf:Ss.test(s)?h6:N$:Array.isArray(s)?$A:typeof s=="object"?Ss.test(s)?h6:j$:Zf}function $A(s,t){const r=[...s],a=r.length,n=s.map((i,o)=>YN(i)(i,t[o]));return i=>{for(let o=0;o<a;o++)r[o]=n[o](i);return r}}function j$(s,t){const r={...s,...t},a={};for(const n in r)s[n]!==void 0&&t[n]!==void 0&&(a[n]=YN(s[n])(s[n],t[n]));return n=>{for(const i in a)r[i]=a[i](n);return r}}function w$(s,t){const r=[],a={color:0,var:0,number:0};for(let n=0;n<t.values.length;n++){const i=t.types[n],o=s.indexes[i][a[i]],c=s.values[o]??0;r[n]=c,a[i]++}return r}const N$=(s,t)=>{const r=El.createTransformer(t),a=mm(s),n=mm(t);return a.indexes.var.length===n.indexes.var.length&&a.indexes.color.length===n.indexes.color.length&&a.indexes.number.length>=n.indexes.number.length?pw.has(s)&&!n.values.length||pw.has(t)&&!a.values.length?y$(s,t):Rm($A(w$(a,n),n.values),r):Zf(s,t)};function UA(s,t,r){return typeof s=="number"&&typeof t=="number"&&typeof r=="number"?es(s,t,r):YN(s)(s,t)}const _$=s=>{const t=({timestamp:r})=>s(r);return{start:(r=!0)=>Kt.update(t,r),stop:()=>Tl(t),now:()=>Ys.isProcessing?Ys.timestamp:Dr.now()}},VA=(s,t,r=10)=>{let a="";const n=Math.max(Math.round(t/r),2);for(let i=0;i<n;i++)a+=Math.round(s(i/(n-1))*1e4)/1e4+", ";return`linear(${a.substring(0,a.length-2)})`},Qf=2e4;function GN(s){let t=0;const r=50;let a=s.next(t);for(;!a.done&&t<Qf;)t+=r,a=s.next(t);return t>=Qf?1/0:t}function k$(s,t=100,r){const a=r({...s,keyframes:[0,t]}),n=Math.min(GN(a),Qf);return{type:"keyframes",ease:i=>a.next(n*i).value/t,duration:ja(n)}}const S$=5;function HA(s,t,r){const a=Math.max(t-S$,0);return NA(r-s(a),t-a)}const os={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},wy=.001;function C$({duration:s=os.duration,bounce:t=os.bounce,velocity:r=os.velocity,mass:a=os.mass}){let n,i,o=1-t;o=ji(os.minDamping,os.maxDamping,o),s=ji(os.minDuration,os.maxDuration,ja(s)),o<1?(n=h=>{const m=h*o,f=m*s,p=m-r,j=gw(h,o),g=Math.exp(-f);return wy-p/j*g},i=h=>{const f=h*o*s,p=f*r+r,j=Math.pow(o,2)*Math.pow(h,2)*s,g=Math.exp(-f),v=gw(Math.pow(h,2),o);return(-n(h)+wy>0?-1:1)*((p-j)*g)/v}):(n=h=>{const m=Math.exp(-h*s),f=(h-r)*s+1;return-wy+m*f},i=h=>{const m=Math.exp(-h*s),f=(r-h)*(s*s);return m*f});const c=5/s,u=E$(n,i,c);if(s=pn(s),isNaN(u))return{stiffness:os.stiffness,damping:os.damping,duration:s};{const h=Math.pow(u,2)*a;return{stiffness:h,damping:o*2*Math.sqrt(a*h),duration:s}}}const T$=12;function E$(s,t,r){let a=r;for(let n=1;n<T$;n++)a=a-s(a)/t(a);return a}function gw(s,t){return s*Math.sqrt(1-t*t)}const A$=["duration","bounce"],D$=["stiffness","damping","mass"];function m6(s,t){return t.some(r=>s[r]!==void 0)}function R$(s){let t={velocity:os.velocity,stiffness:os.stiffness,damping:os.damping,mass:os.mass,isResolvedFromDuration:!1,...s};if(!m6(s,D$)&&m6(s,A$))if(s.visualDuration){const r=s.visualDuration,a=2*Math.PI/(r*1.2),n=a*a,i=2*ji(.05,1,1-(s.bounce||0))*Math.sqrt(n);t={...t,mass:os.mass,stiffness:n,damping:i}}else{const r=C$(s);t={...t,...r,mass:os.mass},t.isResolvedFromDuration=!0}return t}function Jf(s=os.visualDuration,t=os.bounce){const r=typeof s!="object"?{visualDuration:s,keyframes:[0,1],bounce:t}:s;let{restSpeed:a,restDelta:n}=r;const i=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],c={done:!1,value:i},{stiffness:u,damping:h,mass:m,duration:f,velocity:p,isResolvedFromDuration:j}=R$({...r,velocity:-ja(r.velocity||0)}),g=p||0,v=h/(2*Math.sqrt(u*m)),y=o-i,N=ja(Math.sqrt(u/m)),S=Math.abs(y)<5;a||(a=S?os.restSpeed.granular:os.restSpeed.default),n||(n=S?os.restDelta.granular:os.restDelta.default);let k;if(v<1){const T=gw(N,v);k=E=>{const z=Math.exp(-v*N*E);return o-z*((g+v*N*y)/T*Math.sin(T*E)+y*Math.cos(T*E))}}else if(v===1)k=T=>o-Math.exp(-N*T)*(y+(g+N*y)*T);else{const T=N*Math.sqrt(v*v-1);k=E=>{const z=Math.exp(-v*N*E),M=Math.min(T*E,300);return o-z*((g+v*N*y)*Math.sinh(M)+T*y*Math.cosh(M))/T}}const _={calculatedDuration:j&&f||null,next:T=>{const E=k(T);if(j)c.done=T>=f;else{let z=T===0?g:0;v<1&&(z=T===0?pn(g):HA(k,T,E));const M=Math.abs(z)<=a,C=Math.abs(o-E)<=n;c.done=M&&C}return c.value=c.done?o:E,c},toString:()=>{const T=Math.min(GN(_),Qf),E=VA(z=>_.next(T*z).value,T,30);return T+"ms "+E},toTransition:()=>{}};return _}Jf.applyToOptions=s=>{const t=k$(s,100,Jf);return s.ease=t.ease,s.duration=pn(t.duration),s.type="keyframes",s};function bw({keyframes:s,velocity:t=0,power:r=.8,timeConstant:a=325,bounceDamping:n=10,bounceStiffness:i=500,modifyTarget:o,min:c,max:u,restDelta:h=.5,restSpeed:m}){const f=s[0],p={done:!1,value:f},j=M=>c!==void 0&&M<c||u!==void 0&&M>u,g=M=>c===void 0?u:u===void 0||Math.abs(c-M)<Math.abs(u-M)?c:u;let v=r*t;const y=f+v,N=o===void 0?y:o(y);N!==y&&(v=N-f);const S=M=>-v*Math.exp(-M/a),k=M=>N+S(M),_=M=>{const C=S(M),A=k(M);p.done=Math.abs(C)<=h,p.value=p.done?N:A};let T,E;const z=M=>{j(p.value)&&(T=M,E=Jf({keyframes:[p.value,g(p.value)],velocity:HA(k,M,p.value),damping:n,stiffness:i,restDelta:h,restSpeed:m}))};return z(0),{calculatedDuration:null,next:M=>{let C=!1;return!E&&T===void 0&&(C=!0,_(M),z(M)),T!==void 0&&M>=T?E.next(M-T):(!C&&_(M),p)}}}function M$(s,t,r){const a=[],n=r||wi.mix||UA,i=s.length-1;for(let o=0;o<i;o++){let c=n(s[o],s[o+1]);if(t){const u=Array.isArray(t)?t[o]||_a:t;c=Rm(u,c)}a.push(c)}return a}function O$(s,t,{clamp:r=!0,ease:a,mixer:n}={}){const i=s.length;if(FN(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=s[0]===s[1];s[0]>s[i-1]&&(s=[...s].reverse(),t=[...t].reverse());const c=M$(t,a,n),u=c.length,h=m=>{if(o&&m<s[0])return t[0];let f=0;if(u>1)for(;f<s.length-2&&!(m<s[f+1]);f++);const p=um(s[f],s[f+1],m);return c[f](p)};return r?m=>h(ji(s[0],s[i-1],m)):h}function L$(s,t){const r=s[s.length-1];for(let a=1;a<=t;a++){const n=um(0,t,a);s.push(es(r,1,n))}}function P$(s){const t=[0];return L$(t,s.length-1),t}function B$(s,t){return s.map(r=>r*t)}function F$(s,t){return s.map(()=>t||RA).splice(0,s.length-1)}function Uh({duration:s=300,keyframes:t,times:r,ease:a="easeInOut"}){const n=KI(a)?a.map(o6):o6(a),i={done:!1,value:t[0]},o=B$(r&&r.length===t.length?r:P$(t),s),c=O$(o,t,{ease:Array.isArray(n)?n:F$(t,n)});return{calculatedDuration:s,next:u=>(i.value=c(u),i.done=u>=s,i)}}const z$=s=>s!==null;function KN(s,{repeat:t,repeatType:r="loop"},a,n=1){const i=s.filter(z$),c=n<0||t&&r!=="loop"&&t%2===1?0:i.length-1;return!c||a===void 0?i[c]:a}const I$={decay:bw,inertia:bw,tween:Uh,keyframes:Uh,spring:Jf};function qA(s){typeof s.type=="string"&&(s.type=I$[s.type])}class XN{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const $$=s=>s/100;class ZN extends XN{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:r}=this.options;r&&r.updatedAt!==Dr.now()&&this.tick(Dr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;qA(t);const{type:r=Uh,repeat:a=0,repeatDelay:n=0,repeatType:i,velocity:o=0}=t;let{keyframes:c}=t;const u=r||Uh;u!==Uh&&typeof c[0]!="number"&&(this.mixKeyframes=Rm($$,UA(c[0],c[1])),c=[0,100]);const h=u({...t,keyframes:c});i==="mirror"&&(this.mirroredGenerator=u({...t,keyframes:[...c].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=GN(h));const{calculatedDuration:m}=h;this.calculatedDuration=m,this.resolvedDuration=m+n,this.totalDuration=this.resolvedDuration*(a+1)-n,this.generator=h}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:a,totalDuration:n,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:u}=this;if(this.startTime===null)return a.next(0);const{delay:h=0,keyframes:m,repeat:f,repeatType:p,repeatDelay:j,type:g,onUpdate:v,finalKeyframe:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-n/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const N=this.currentTime-h*(this.playbackSpeed>=0?1:-1),S=this.playbackSpeed>=0?N<0:N>n;this.currentTime=Math.max(N,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=n);let k=this.currentTime,_=a;if(f){const M=Math.min(this.currentTime,n)/c;let C=Math.floor(M),A=M%1;!A&&M>=1&&(A=1),A===1&&C--,C=Math.min(C,f+1),!!(C%2)&&(p==="reverse"?(A=1-A,j&&(A-=j/c)):p==="mirror"&&(_=o)),k=ji(0,1,A)*c}const T=S?{done:!1,value:m[0]}:_.next(k);i&&(T.value=i(T.value));let{done:E}=T;!S&&u!==null&&(E=this.playbackSpeed>=0?this.currentTime>=n:this.currentTime<=0);const z=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&E);return z&&g!==bw&&(T.value=KN(m,this.options,y,this.speed)),v&&v(T.value),z&&this.finish(),T}then(t,r){return this.finished.then(t,r)}get duration(){return ja(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+ja(t)}get time(){return ja(this.currentTime)}set time(t){t=pn(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Dr.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=ja(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=_$,startTime:r}=this.options;this.driver||(this.driver=t(n=>this.tick(n))),this.options.onPlay?.();const a=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=a):this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime||(this.startTime=r??a),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Dr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function U$(s){for(let t=1;t<s.length;t++)s[t]??(s[t]=s[t-1])}const To=s=>s*180/Math.PI,yw=s=>{const t=To(Math.atan2(s[1],s[0]));return vw(t)},V$={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:s=>(Math.abs(s[0])+Math.abs(s[3]))/2,rotate:yw,rotateZ:yw,skewX:s=>To(Math.atan(s[1])),skewY:s=>To(Math.atan(s[2])),skew:s=>(Math.abs(s[1])+Math.abs(s[2]))/2},vw=s=>(s=s%360,s<0&&(s+=360),s),x6=yw,f6=s=>Math.sqrt(s[0]*s[0]+s[1]*s[1]),p6=s=>Math.sqrt(s[4]*s[4]+s[5]*s[5]),H$={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:f6,scaleY:p6,scale:s=>(f6(s)+p6(s))/2,rotateX:s=>vw(To(Math.atan2(s[6],s[5]))),rotateY:s=>vw(To(Math.atan2(-s[2],s[0]))),rotateZ:x6,rotate:x6,skewX:s=>To(Math.atan(s[4])),skewY:s=>To(Math.atan(s[1])),skew:s=>(Math.abs(s[1])+Math.abs(s[4]))/2};function jw(s){return s.includes("scale")?1:0}function ww(s,t){if(!s||s==="none")return jw(t);const r=s.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let a,n;if(r)a=H$,n=r;else{const c=s.match(/^matrix\(([-\d.e\s,]+)\)$/u);a=V$,n=c}if(!n)return jw(t);const i=a[t],o=n[1].split(",").map(W$);return typeof i=="function"?i(o):o[i]}const q$=(s,t)=>{const{transform:r="none"}=getComputedStyle(s);return ww(r,t)};function W$(s){return parseFloat(s.trim())}const Bd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Fd=new Set(Bd),g6=s=>s===Pd||s===Ze,Y$=new Set(["x","y","z"]),G$=Bd.filter(s=>!Y$.has(s));function K$(s){const t=[];return G$.forEach(r=>{const a=s.getValue(r);a!==void 0&&(t.push([r,a.get()]),a.set(r.startsWith("scale")?1:0))}),t}const Bo={width:({x:s},{paddingLeft:t="0",paddingRight:r="0"})=>s.max-s.min-parseFloat(t)-parseFloat(r),height:({y:s},{paddingTop:t="0",paddingBottom:r="0"})=>s.max-s.min-parseFloat(t)-parseFloat(r),top:(s,{top:t})=>parseFloat(t),left:(s,{left:t})=>parseFloat(t),bottom:({y:s},{top:t})=>parseFloat(t)+(s.max-s.min),right:({x:s},{left:t})=>parseFloat(t)+(s.max-s.min),x:(s,{transform:t})=>ww(t,"x"),y:(s,{transform:t})=>ww(t,"y")};Bo.translateX=Bo.x;Bo.translateY=Bo.y;const Fo=new Set;let Nw=!1,_w=!1,kw=!1;function WA(){if(_w){const s=Array.from(Fo).filter(a=>a.needsMeasurement),t=new Set(s.map(a=>a.element)),r=new Map;t.forEach(a=>{const n=K$(a);n.length&&(r.set(a,n),a.render())}),s.forEach(a=>a.measureInitialState()),t.forEach(a=>{a.render();const n=r.get(a);n&&n.forEach(([i,o])=>{a.getValue(i)?.set(o)})}),s.forEach(a=>a.measureEndState()),s.forEach(a=>{a.suspendedScrollY!==void 0&&window.scrollTo(0,a.suspendedScrollY)})}_w=!1,Nw=!1,Fo.forEach(s=>s.complete(kw)),Fo.clear()}function YA(){Fo.forEach(s=>{s.readKeyframes(),s.needsMeasurement&&(_w=!0)})}function X$(){kw=!0,YA(),WA(),kw=!1}class QN{constructor(t,r,a,n,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=a,this.motionValue=n,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Fo.add(this),Nw||(Nw=!0,Kt.read(YA),Kt.resolveKeyframes(WA))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:a,motionValue:n}=this;if(t[0]===null){const i=n?.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(a&&r){const c=a.readValue(r,o);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=o),n&&i===void 0&&n.set(t[0])}U$(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Fo.delete(this)}cancel(){this.state==="scheduled"&&(Fo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Z$=s=>s.startsWith("--");function Q$(s,t,r){Z$(t)?s.style.setProperty(t,r):s.style[t]=r}const J$=zN(()=>window.ScrollTimeline!==void 0),eU={};function tU(s,t){const r=zN(s);return()=>eU[t]??r()}const GA=tU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Dh=([s,t,r,a])=>`cubic-bezier(${s}, ${t}, ${r}, ${a})`,b6={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Dh([0,.65,.55,1]),circOut:Dh([.55,0,1,.45]),backIn:Dh([.31,.01,.66,-.59]),backOut:Dh([.33,1.53,.69,.99])};function KA(s,t){if(s)return typeof s=="function"?GA()?VA(s,t):"ease-out":MA(s)?Dh(s):Array.isArray(s)?s.map(r=>KA(r,t)||b6.easeOut):b6[s]}function sU(s,t,r,{delay:a=0,duration:n=300,repeat:i=0,repeatType:o="loop",ease:c="easeOut",times:u}={},h=void 0){const m={[t]:r};u&&(m.offset=u);const f=KA(c,n);Array.isArray(f)&&(m.easing=f);const p={delay:a,duration:n,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return h&&(p.pseudoElement=h),s.animate(m,p)}function XA(s){return typeof s=="function"&&"applyToOptions"in s}function rU({type:s,...t}){return XA(s)&&GA()?s.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class aU extends XN{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:a,keyframes:n,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:c,onComplete:u}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,FN(typeof t.type!="string");const h=rU(t);this.animation=sU(r,a,n,h,i),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const m=KN(n,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(m):Q$(r,a,m),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return ja(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+ja(t)}get time(){return ja(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=pn(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&J$()?(this.animation.timeline=t,_a):r(this)}}const ZA={anticipate:EA,backInOut:TA,circInOut:DA};function nU(s){return s in ZA}function iU(s){typeof s.ease=="string"&&nU(s.ease)&&(s.ease=ZA[s.ease])}const y6=10;class lU extends aU{constructor(t){iU(t),qA(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:a,onComplete:n,element:i,...o}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const c=new ZN({...o,autoplay:!1}),u=pn(this.finishedTime??this.time);r.setWithVelocity(c.sample(u-y6).value,c.sample(u).value,y6),c.stop()}}const v6=(s,t)=>t==="zIndex"?!1:!!(typeof s=="number"||Array.isArray(s)||typeof s=="string"&&(El.test(s)||s==="0")&&!s.startsWith("url("));function oU(s){const t=s[0];if(s.length===1)return!0;for(let r=0;r<s.length;r++)if(s[r]!==t)return!0}function cU(s,t,r,a){const n=s[0];if(n===null)return!1;if(t==="display"||t==="visibility")return!0;const i=s[s.length-1],o=v6(n,t),c=v6(i,t);return!o||!c?!1:oU(s)||(r==="spring"||XA(r))&&a}function Sw(s){s.duration=0,s.type="keyframes"}const dU=new Set(["opacity","clipPath","filter","transform"]),uU=zN(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function hU(s){const{motionValue:t,name:r,repeatDelay:a,repeatType:n,damping:i,type:o}=s;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:h}=t.owner.getProps();return uU()&&r&&dU.has(r)&&(r!=="transform"||!h)&&!u&&!a&&n!=="mirror"&&i!==0&&o!=="inertia"}const mU=40;class xU extends XN{constructor({autoplay:t=!0,delay:r=0,type:a="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:o="loop",keyframes:c,name:u,motionValue:h,element:m,...f}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Dr.now();const p={autoplay:t,delay:r,type:a,repeat:n,repeatDelay:i,repeatType:o,name:u,motionValue:h,element:m,...f},j=m?.KeyframeResolver||QN;this.keyframeResolver=new j(c,(g,v,y)=>this.onKeyframesResolved(g,v,p,!y),u,h,m),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,r,a,n){this.keyframeResolver=void 0;const{name:i,type:o,velocity:c,delay:u,isHandoff:h,onUpdate:m}=a;this.resolvedAt=Dr.now(),cU(t,i,o,c)||((wi.instantAnimations||!u)&&m?.(KN(t,a,r)),t[0]=t[t.length-1],Sw(a),a.repeat=0);const p={startTime:n?this.resolvedAt?this.resolvedAt-this.createdAt>mU?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...a,keyframes:t},j=!h&&hU(p)?new lU({...p,element:p.motionValue.owner.current}):new ZN(p);j.finished.then(()=>this.notifyFinished()).catch(_a),this.pendingTimeline&&(this.stopTimeline=j.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=j}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),X$()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const fU=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function pU(s){const t=fU.exec(s);if(!t)return[,];const[,r,a,n]=t;return[`--${r??a}`,n]}function QA(s,t,r=1){const[a,n]=pU(s);if(!a)return;const i=window.getComputedStyle(t).getPropertyValue(a);if(i){const o=i.trim();return vA(o)?parseFloat(o):o}return HN(n)?QA(n,t,r+1):n}function JN(s,t){return s?.[t]??s?.default??s}const JA=new Set(["width","height","top","left","right","bottom",...Bd]),gU={test:s=>s==="auto",parse:s=>s},e7=s=>t=>t.test(s),t7=[Pd,Ze,gn,ul,o$,l$,gU],j6=s=>t7.find(e7(s));function bU(s){return typeof s=="number"?s===0:s!==null?s==="none"||s==="0"||wA(s):!0}const yU=new Set(["brightness","contrast","saturate","opacity"]);function vU(s){const[t,r]=s.slice(0,-1).split("(");if(t==="drop-shadow")return s;const[a]=r.match(qN)||[];if(!a)return s;const n=r.replace(a,"");let i=yU.has(t)?1:0;return a!==r&&(i*=100),t+"("+i+n+")"}const jU=/\b([a-z-]*)\(.*?\)/gu,Cw={...El,getAnimatableNone:s=>{const t=s.match(jU);return t?t.map(vU).join(" "):s}},w6={...Pd,transform:Math.round},wU={rotate:ul,rotateX:ul,rotateY:ul,rotateZ:ul,scale:F0,scaleX:F0,scaleY:F0,scaleZ:F0,skew:ul,skewX:ul,skewY:ul,distance:Ze,translateX:Ze,translateY:Ze,translateZ:Ze,x:Ze,y:Ze,z:Ze,perspective:Ze,transformPerspective:Ze,opacity:hm,originX:c6,originY:c6,originZ:Ze},e1={borderWidth:Ze,borderTopWidth:Ze,borderRightWidth:Ze,borderBottomWidth:Ze,borderLeftWidth:Ze,borderRadius:Ze,radius:Ze,borderTopLeftRadius:Ze,borderTopRightRadius:Ze,borderBottomRightRadius:Ze,borderBottomLeftRadius:Ze,width:Ze,maxWidth:Ze,height:Ze,maxHeight:Ze,top:Ze,right:Ze,bottom:Ze,left:Ze,padding:Ze,paddingTop:Ze,paddingRight:Ze,paddingBottom:Ze,paddingLeft:Ze,margin:Ze,marginTop:Ze,marginRight:Ze,marginBottom:Ze,marginLeft:Ze,backgroundPositionX:Ze,backgroundPositionY:Ze,...wU,zIndex:w6,fillOpacity:hm,strokeOpacity:hm,numOctaves:w6},NU={...e1,color:Ss,backgroundColor:Ss,outlineColor:Ss,fill:Ss,stroke:Ss,borderColor:Ss,borderTopColor:Ss,borderRightColor:Ss,borderBottomColor:Ss,borderLeftColor:Ss,filter:Cw,WebkitFilter:Cw},s7=s=>NU[s];function r7(s,t){let r=s7(s);return r!==Cw&&(r=El),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const _U=new Set(["auto","none","0"]);function kU(s,t,r){let a=0,n;for(;a<s.length&&!n;){const i=s[a];typeof i=="string"&&!_U.has(i)&&mm(i).values.length&&(n=s[a]),a++}if(n&&r)for(const i of t)s[i]=r7(r,n)}class SU extends QN{constructor(t,r,a,n,i){super(t,r,a,n,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:a}=this;if(!r||!r.current)return;super.readKeyframes();for(let u=0;u<t.length;u++){let h=t[u];if(typeof h=="string"&&(h=h.trim(),HN(h))){const m=QA(h,r.current);m!==void 0&&(t[u]=m),u===t.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!JA.has(a)||t.length!==2)return;const[n,i]=t,o=j6(n),c=j6(i);if(o!==c)if(g6(o)&&g6(c))for(let u=0;u<t.length;u++){const h=t[u];typeof h=="string"&&(t[u]=parseFloat(h))}else Bo[a]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,a=[];for(let n=0;n<t.length;n++)(t[n]===null||bU(t[n]))&&a.push(n);a.length&&kU(t,a,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:a}=this;if(!t||!t.current)return;a==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Bo[a](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const n=r[r.length-1];n!==void 0&&t.getValue(a,n).jump(n,!1)}measureEndState(){const{element:t,name:r,unresolvedKeyframes:a}=this;if(!t||!t.current)return;const n=t.getValue(r);n&&n.jump(this.measuredOrigin,!1);const i=a.length-1,o=a[i];a[i]=Bo[r](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,u])=>{t.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function CU(s,t,r){if(s instanceof EventTarget)return[s];if(typeof s=="string"){let a=document;const n=r?.[s]??a.querySelectorAll(s);return n?Array.from(n):[]}return Array.from(s)}const a7=(s,t)=>t&&typeof s=="number"?t.transform(s):s;function TU(s){return jA(s)&&"offsetHeight"in s}const N6=30,EU=s=>!isNaN(parseFloat(s));class AU{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=a=>{const n=Dr.now();if(this.updatedAt!==n&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=Dr.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=EU(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new IN);const a=this.events[t].add(r);return t==="change"?()=>{a(),Kt.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,a){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-a}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Dr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>N6)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,N6);return NA(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function vd(s,t){return new AU(s,t)}const{schedule:t1}=OA(queueMicrotask,!1),za={x:!1,y:!1};function n7(){return za.x||za.y}function DU(s){return s==="x"||s==="y"?za[s]?null:(za[s]=!0,()=>{za[s]=!1}):za.x||za.y?null:(za.x=za.y=!0,()=>{za.x=za.y=!1})}function i7(s,t){const r=CU(s),a=new AbortController,n={passive:!0,...t,signal:a.signal};return[r,n,()=>a.abort()]}function _6(s){return!(s.pointerType==="touch"||n7())}function RU(s,t,r={}){const[a,n,i]=i7(s,r),o=c=>{if(!_6(c))return;const{target:u}=c,h=t(u,c);if(typeof h!="function"||!u)return;const m=f=>{_6(f)&&(h(f),u.removeEventListener("pointerleave",m))};u.addEventListener("pointerleave",m,n)};return a.forEach(c=>{c.addEventListener("pointerenter",o,n)}),i}const l7=(s,t)=>t?s===t?!0:l7(s,t.parentElement):!1,s1=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1,MU=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function OU(s){return MU.has(s.tagName)||s.tabIndex!==-1}const Rf=new WeakSet;function k6(s){return t=>{t.key==="Enter"&&s(t)}}function Ny(s,t){s.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const LU=(s,t)=>{const r=s.currentTarget;if(!r)return;const a=k6(()=>{if(Rf.has(r))return;Ny(r,"down");const n=k6(()=>{Ny(r,"up")}),i=()=>Ny(r,"cancel");r.addEventListener("keyup",n,t),r.addEventListener("blur",i,t)});r.addEventListener("keydown",a,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",a),t)};function S6(s){return s1(s)&&!n7()}function PU(s,t,r={}){const[a,n,i]=i7(s,r),o=c=>{const u=c.currentTarget;if(!S6(c))return;Rf.add(u);const h=t(u,c),m=(j,g)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",p),Rf.has(u)&&Rf.delete(u),S6(j)&&typeof h=="function"&&h(j,{success:g})},f=j=>{m(j,u===window||u===document||r.useGlobalTarget||l7(u,j.target))},p=j=>{m(j,!1)};window.addEventListener("pointerup",f,n),window.addEventListener("pointercancel",p,n)};return a.forEach(c=>{(r.useGlobalTarget?window:c).addEventListener("pointerdown",o,n),TU(c)&&(c.addEventListener("focus",h=>LU(h,n)),!OU(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),i}function o7(s){return jA(s)&&"ownerSVGElement"in s}function BU(s){return o7(s)&&s.tagName==="svg"}const lr=s=>!!(s&&s.getVelocity),FU=[...t7,Ss,El],zU=s=>FU.find(e7(s)),c7=w.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"});function IU(s=!0){const t=w.useContext(LN);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:a,register:n}=t,i=w.useId();w.useEffect(()=>{if(s)return n(i)},[s]);const o=w.useCallback(()=>s&&a&&a(i),[i,a,s]);return!r&&a?[!1,o]:[!0]}const d7=w.createContext({strict:!1}),C6={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},jd={};for(const s in C6)jd[s]={isEnabled:t=>C6[s].some(r=>!!t[r])};function $U(s){for(const t in s)jd[t]={...jd[t],...s[t]}}const UU=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ep(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||UU.has(s)}let u7=s=>!ep(s);function VU(s){typeof s=="function"&&(u7=t=>t.startsWith("on")?!ep(t):s(t))}try{VU(require("@emotion/is-prop-valid").default)}catch{}function HU(s,t,r){const a={};for(const n in s)n==="values"&&typeof s.values=="object"||(u7(n)||r===!0&&ep(n)||!t&&!ep(n)||s.draggable&&n.startsWith("onDrag"))&&(a[n]=s[n]);return a}const kp=w.createContext({});function Sp(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}function xm(s){return typeof s=="string"||Array.isArray(s)}const r1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],a1=["initial",...r1];function Cp(s){return Sp(s.animate)||a1.some(t=>xm(s[t]))}function h7(s){return!!(Cp(s)||s.variants)}function qU(s,t){if(Cp(s)){const{initial:r,animate:a}=s;return{initial:r===!1||xm(r)?r:void 0,animate:xm(a)?a:void 0}}return s.inherit!==!1?t:{}}function WU(s){const{initial:t,animate:r}=qU(s,w.useContext(kp));return w.useMemo(()=>({initial:t,animate:r}),[T6(t),T6(r)])}function T6(s){return Array.isArray(s)?s.join(" "):s}const fm={};function YU(s){for(const t in s)fm[t]=s[t],VN(t)&&(fm[t].isCSSVariable=!0)}function m7(s,{layout:t,layoutId:r}){return Fd.has(s)||s.startsWith("origin")||(t||r!==void 0)&&(!!fm[s]||s==="opacity")}const GU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},KU=Bd.length;function XU(s,t,r){let a="",n=!0;for(let i=0;i<KU;i++){const o=Bd[i],c=s[o];if(c===void 0)continue;let u=!0;if(typeof c=="number"?u=c===(o.startsWith("scale")?1:0):u=parseFloat(c)===0,!u||r){const h=a7(c,e1[o]);if(!u){n=!1;const m=GU[o]||o;a+=`${m}(${h}) `}r&&(t[o]=h)}}return a=a.trim(),r?a=r(t,n?"":a):n&&(a="none"),a}function n1(s,t,r){const{style:a,vars:n,transformOrigin:i}=s;let o=!1,c=!1;for(const u in t){const h=t[u];if(Fd.has(u)){o=!0;continue}else if(VN(u)){n[u]=h;continue}else{const m=a7(h,e1[u]);u.startsWith("origin")?(c=!0,i[u]=m):a[u]=m}}if(t.transform||(o||r?a.transform=XU(t,s.transform,r):a.transform&&(a.transform="none")),c){const{originX:u="50%",originY:h="50%",originZ:m=0}=i;a.transformOrigin=`${u} ${h} ${m}`}}const i1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function x7(s,t,r){for(const a in t)!lr(t[a])&&!m7(a,r)&&(s[a]=t[a])}function ZU({transformTemplate:s},t){return w.useMemo(()=>{const r=i1();return n1(r,t,s),Object.assign({},r.vars,r.style)},[t])}function QU(s,t){const r=s.style||{},a={};return x7(a,r,s),Object.assign(a,ZU(s,t)),a}function JU(s,t){const r={},a=QU(s,t);return s.drag&&s.dragListener!==!1&&(r.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(r.tabIndex=0),r.style=a,r}const eV={offset:"stroke-dashoffset",array:"stroke-dasharray"},tV={offset:"strokeDashoffset",array:"strokeDasharray"};function sV(s,t,r=1,a=0,n=!0){s.pathLength=1;const i=n?eV:tV;s[i.offset]=Ze.transform(-a);const o=Ze.transform(t),c=Ze.transform(r);s[i.array]=`${o} ${c}`}function f7(s,{attrX:t,attrY:r,attrScale:a,pathLength:n,pathSpacing:i=1,pathOffset:o=0,...c},u,h,m){if(n1(s,c,h),u){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:f,style:p}=s;f.transform&&(p.transform=f.transform,delete f.transform),(p.transform||f.transformOrigin)&&(p.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),p.transform&&(p.transformBox=m?.transformBox??"fill-box",delete f.transformBox),t!==void 0&&(f.x=t),r!==void 0&&(f.y=r),a!==void 0&&(f.scale=a),n!==void 0&&sV(f,n,i,o,!1)}const p7=()=>({...i1(),attrs:{}}),g7=s=>typeof s=="string"&&s.toLowerCase()==="svg";function rV(s,t,r,a){const n=w.useMemo(()=>{const i=p7();return f7(i,t,g7(a),s.transformTemplate,s.style),{...i.attrs,style:{...i.style}}},[t]);if(s.style){const i={};x7(i,s.style,s),n.style={...i,...n.style}}return n}const aV=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function l1(s){return typeof s!="string"||s.includes("-")?!1:!!(aV.indexOf(s)>-1||/[A-Z]/u.test(s))}function nV(s,t,r,{latestValues:a},n,i=!1){const c=(l1(s)?rV:JU)(t,a,n,s),u=HU(t,typeof s=="string",i),h=s!==w.Fragment?{...u,...c,ref:r}:{},{children:m}=t,f=w.useMemo(()=>lr(m)?m.get():m,[m]);return w.createElement(s,{...h,children:f})}function E6(s){const t=[{},{}];return s?.values.forEach((r,a)=>{t[0][a]=r.get(),t[1][a]=r.getVelocity()}),t}function o1(s,t,r,a){if(typeof t=="function"){const[n,i]=E6(a);t=t(r!==void 0?r:s.custom,n,i)}if(typeof t=="string"&&(t=s.variants&&s.variants[t]),typeof t=="function"){const[n,i]=E6(a);t=t(r!==void 0?r:s.custom,n,i)}return t}function Mf(s){return lr(s)?s.get():s}function iV({scrapeMotionValuesFromProps:s,createRenderState:t},r,a,n){return{latestValues:lV(r,a,n,s),renderState:t()}}function lV(s,t,r,a){const n={},i=a(s,{});for(const p in i)n[p]=Mf(i[p]);let{initial:o,animate:c}=s;const u=Cp(s),h=h7(s);t&&h&&!u&&s.inherit!==!1&&(o===void 0&&(o=t.initial),c===void 0&&(c=t.animate));let m=r?r.initial===!1:!1;m=m||o===!1;const f=m?c:o;if(f&&typeof f!="boolean"&&!Sp(f)){const p=Array.isArray(f)?f:[f];for(let j=0;j<p.length;j++){const g=o1(s,p[j]);if(g){const{transitionEnd:v,transition:y,...N}=g;for(const S in N){let k=N[S];if(Array.isArray(k)){const _=m?k.length-1:0;k=k[_]}k!==null&&(n[S]=k)}for(const S in v)n[S]=v[S]}}}return n}const b7=s=>(t,r)=>{const a=w.useContext(kp),n=w.useContext(LN),i=()=>iV(s,t,a,n);return r?i():$I(i)};function c1(s,t,r){const{style:a}=s,n={};for(const i in a)(lr(a[i])||t.style&&lr(t.style[i])||m7(i,s)||r?.getValue(i)?.liveStyle!==void 0)&&(n[i]=a[i]);return n}const oV=b7({scrapeMotionValuesFromProps:c1,createRenderState:i1});function y7(s,t,r){const a=c1(s,t,r);for(const n in s)if(lr(s[n])||lr(t[n])){const i=Bd.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;a[i]=s[n]}return a}const cV=b7({scrapeMotionValuesFromProps:y7,createRenderState:p7}),dV=Symbol.for("motionComponentSymbol");function Jc(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function uV(s,t,r){return w.useCallback(a=>{a&&s.onMount&&s.onMount(a),t&&(a?t.mount(a):t.unmount()),r&&(typeof r=="function"?r(a):Jc(r)&&(r.current=a))},[t])}const d1=s=>s.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),hV="framerAppearId",v7="data-"+d1(hV),j7=w.createContext({});function mV(s,t,r,a,n){const{visualElement:i}=w.useContext(kp),o=w.useContext(d7),c=w.useContext(LN),u=w.useContext(c7).reducedMotion,h=w.useRef(null);a=a||o.renderer,!h.current&&a&&(h.current=a(s,{visualState:t,parent:i,props:r,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const m=h.current,f=w.useContext(j7);m&&!m.projection&&n&&(m.type==="html"||m.type==="svg")&&xV(h.current,r,n,f);const p=w.useRef(!1);w.useInsertionEffect(()=>{m&&p.current&&m.update(r,c)});const j=r[v7],g=w.useRef(!!j&&!window.MotionHandoffIsComplete?.(j)&&window.MotionHasOptimisedAnimation?.(j));return UI(()=>{m&&(p.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),g.current&&m.animationState&&m.animationState.animateChanges())}),w.useEffect(()=>{m&&(!g.current&&m.animationState&&m.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(j)}),g.current=!1),m.enteringChildren=void 0)}),m}function xV(s,t,r,a){const{layoutId:n,layout:i,drag:o,dragConstraints:c,layoutScroll:u,layoutRoot:h,layoutCrossfade:m}=t;s.projection=new r(s.latestValues,t["data-framer-portal-id"]?void 0:w7(s.parent)),s.projection.setOptions({layoutId:n,layout:i,alwaysMeasureLayout:!!o||c&&Jc(c),visualElement:s,animationType:typeof i=="string"?i:"both",initialPromotionConfig:a,crossfade:m,layoutScroll:u,layoutRoot:h})}function w7(s){if(s)return s.options.allowProjection!==!1?s.projection:w7(s.parent)}function _y(s,{forwardMotionProps:t=!1}={},r,a){r&&$U(r);const n=l1(s)?cV:oV;function i(c,u){let h;const m={...w.useContext(c7),...c,layoutId:fV(c)},{isStatic:f}=m,p=WU(c),j=n(c,f);if(!f&&ON){pV();const g=gV(m);h=g.MeasureLayout,p.visualElement=mV(s,j,m,a,g.ProjectionNode)}return e.jsxs(kp.Provider,{value:p,children:[h&&p.visualElement?e.jsx(h,{visualElement:p.visualElement,...m}):null,nV(s,c,uV(j,p.visualElement,u),j,f,t)]})}i.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const o=w.forwardRef(i);return o[dV]=s,o}function fV({layoutId:s}){const t=w.useContext(yA).id;return t&&s!==void 0?t+"-"+s:s}function pV(s,t){w.useContext(d7).strict}function gV(s){const{drag:t,layout:r}=jd;if(!t&&!r)return{};const a={...t,...r};return{MeasureLayout:t?.isEnabled(s)||r?.isEnabled(s)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}function bV(s,t){if(typeof Proxy>"u")return _y;const r=new Map,a=(i,o)=>_y(i,o,s,t),n=(i,o)=>a(i,o);return new Proxy(n,{get:(i,o)=>o==="create"?a:(r.has(o)||r.set(o,_y(o,void 0,s,t)),r.get(o))})}function N7({top:s,left:t,right:r,bottom:a}){return{x:{min:t,max:r},y:{min:s,max:a}}}function yV({x:s,y:t}){return{top:t.min,right:s.max,bottom:t.max,left:s.min}}function vV(s,t){if(!t)return s;const r=t({x:s.left,y:s.top}),a=t({x:s.right,y:s.bottom});return{top:r.y,left:r.x,bottom:a.y,right:a.x}}function ky(s){return s===void 0||s===1}function Tw({scale:s,scaleX:t,scaleY:r}){return!ky(s)||!ky(t)||!ky(r)}function wo(s){return Tw(s)||_7(s)||s.z||s.rotate||s.rotateX||s.rotateY||s.skewX||s.skewY}function _7(s){return A6(s.x)||A6(s.y)}function A6(s){return s&&s!=="0%"}function tp(s,t,r){const a=s-r,n=t*a;return r+n}function D6(s,t,r,a,n){return n!==void 0&&(s=tp(s,n,a)),tp(s,r,a)+t}function Ew(s,t=0,r=1,a,n){s.min=D6(s.min,t,r,a,n),s.max=D6(s.max,t,r,a,n)}function k7(s,{x:t,y:r}){Ew(s.x,t.translate,t.scale,t.originPoint),Ew(s.y,r.translate,r.scale,r.originPoint)}const R6=.999999999999,M6=1.0000000000001;function jV(s,t,r,a=!1){const n=r.length;if(!n)return;t.x=t.y=1;let i,o;for(let c=0;c<n;c++){i=r[c],o=i.projectionDelta;const{visualElement:u}=i.options;u&&u.props.style&&u.props.style.display==="contents"||(a&&i.options.layoutScroll&&i.scroll&&i!==i.root&&td(s,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,k7(s,o)),a&&wo(i.latestValues)&&td(s,i.latestValues))}t.x<M6&&t.x>R6&&(t.x=1),t.y<M6&&t.y>R6&&(t.y=1)}function ed(s,t){s.min=s.min+t,s.max=s.max+t}function O6(s,t,r,a,n=.5){const i=es(s.min,s.max,n);Ew(s,t,r,i,a)}function td(s,t){O6(s.x,t.x,t.scaleX,t.scale,t.originX),O6(s.y,t.y,t.scaleY,t.scale,t.originY)}function S7(s,t){return N7(vV(s.getBoundingClientRect(),t))}function wV(s,t,r){const a=S7(s,r),{scroll:n}=t;return n&&(ed(a.x,n.offset.x),ed(a.y,n.offset.y)),a}const L6=()=>({translate:0,scale:1,origin:0,originPoint:0}),sd=()=>({x:L6(),y:L6()}),P6=()=>({min:0,max:0}),xs=()=>({x:P6(),y:P6()}),Aw={current:null},C7={current:!1};function NV(){if(C7.current=!0,!!ON)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),t=()=>Aw.current=s.matches;s.addEventListener("change",t),t()}else Aw.current=!1}const _V=new WeakMap;function kV(s,t,r){for(const a in t){const n=t[a],i=r[a];if(lr(n))s.addValue(a,n);else if(lr(i))s.addValue(a,vd(n,{owner:s}));else if(i!==n)if(s.hasValue(a)){const o=s.getValue(a);o.liveStyle===!0?o.jump(n):o.hasAnimated||o.set(n)}else{const o=s.getStaticValue(a);s.addValue(a,vd(o!==void 0?o:n,{owner:s}))}}for(const a in r)t[a]===void 0&&s.removeValue(a);return t}const B6=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class SV{scrapeMotionValuesFromProps(t,r,a){return{}}constructor({parent:t,props:r,presenceContext:a,reducedMotionConfig:n,blockInitialAnimation:i,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=QN,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Dr.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Kt.render(this.render,!1,!0))};const{latestValues:u,renderState:h}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=r.initial?{...u}:{},this.renderState=h,this.parent=t,this.props=r,this.presenceContext=a,this.depth=t?t.depth+1:0,this.reducedMotionConfig=n,this.options=c,this.blockInitialAnimation=!!i,this.isControllingVariants=Cp(r),this.isVariantNode=h7(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:m,...f}=this.scrapeMotionValuesFromProps(r,{},this);for(const p in f){const j=f[p];u[p]!==void 0&&lr(j)&&j.set(u[p])}}mount(t){this.current=t,_V.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,a)=>this.bindToMotionValue(a,r)),C7.current||NV(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Aw.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Tl(this.notifyUpdate),Tl(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const a=Fd.has(t);a&&this.onBindTransform&&this.onBindTransform();const n=r.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Kt.preRender(this.notifyUpdate),a&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{n(),i&&i(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in jd){const r=jd[t];if(!r)continue;const{isEnabled:a,Feature:n}=r;if(!this.features[t]&&n&&a(this.props)&&(this.features[t]=new n(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):xs()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let a=0;a<B6.length;a++){const n=B6[a];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);const i="on"+n,o=t[i];o&&(this.propEventSubscriptions[n]=this.on(n,o))}this.prevMotionValues=kV(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const a=this.values.get(t);r!==a&&(a&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let a=this.values.get(t);return a===void 0&&r!==void 0&&(a=vd(r===null?void 0:r,{owner:this}),this.addValue(t,a)),a}readValue(t,r){let a=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return a!=null&&(typeof a=="string"&&(vA(a)||wA(a))?a=parseFloat(a):!zU(a)&&El.test(r)&&(a=r7(t,r)),this.setBaseTarget(t,lr(a)?a.get():a)),lr(a)?a.get():a}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){const{initial:r}=this.props;let a;if(typeof r=="string"||typeof r=="object"){const i=o1(this.props,r,this.presenceContext?.custom);i&&(a=i[t])}if(r&&a!==void 0)return a;const n=this.getBaseTargetFromProps(this.props,t);return n!==void 0&&!lr(n)?n:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new IN),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){t1.render(this.render)}}class T7 extends SV{constructor(){super(...arguments),this.KeyframeResolver=SU}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:a}){delete r[t],delete a[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;lr(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function E7(s,{style:t,vars:r},a,n){const i=s.style;let o;for(o in t)i[o]=t[o];n?.applyProjectionStyles(i,a);for(o in r)i.setProperty(o,r[o])}function CV(s){return window.getComputedStyle(s)}class TV extends T7{constructor(){super(...arguments),this.type="html",this.renderInstance=E7}readValueFromInstance(t,r){if(Fd.has(r))return this.projection?.isProjecting?jw(r):q$(t,r);{const a=CV(t),n=(VN(r)?a.getPropertyValue(r):a[r])||0;return typeof n=="string"?n.trim():n}}measureInstanceViewportBox(t,{transformPagePoint:r}){return S7(t,r)}build(t,r,a){n1(t,r,a.transformTemplate)}scrapeMotionValuesFromProps(t,r,a){return c1(t,r,a)}}const A7=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function EV(s,t,r,a){E7(s,t,void 0,a);for(const n in t.attrs)s.setAttribute(A7.has(n)?n:d1(n),t.attrs[n])}class AV extends T7{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=xs}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Fd.has(r)){const a=s7(r);return a&&a.default||0}return r=A7.has(r)?r:d1(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,a){return y7(t,r,a)}build(t,r,a){f7(t,r,this.isSVGTag,a.transformTemplate,a.style)}renderInstance(t,r,a,n){EV(t,r,a,n)}mount(t){this.isSVGTag=g7(t.tagName),super.mount(t)}}const DV=(s,t)=>l1(s)?new AV(t):new TV(t,{allowProjection:s!==w.Fragment});function ld(s,t,r){const a=s.getProps();return o1(a,t,r!==void 0?r:a.custom,s)}const Dw=s=>Array.isArray(s);function RV(s,t,r){s.hasValue(t)?s.getValue(t).set(r):s.addValue(t,vd(r))}function MV(s){return Dw(s)?s[s.length-1]||0:s}function OV(s,t){const r=ld(s,t);let{transitionEnd:a={},transition:n={},...i}=r||{};i={...i,...a};for(const o in i){const c=MV(i[o]);RV(s,o,c)}}function LV(s){return!!(lr(s)&&s.add)}function Rw(s,t){const r=s.getValue("willChange");if(LV(r))return r.add(t);if(!r&&wi.WillChange){const a=new wi.WillChange("auto");s.addValue("willChange",a),a.add(t)}}function D7(s){return s.props[v7]}const PV=s=>s!==null;function BV(s,{repeat:t,repeatType:r="loop"},a){const n=s.filter(PV),i=t&&r!=="loop"&&t%2===1?0:n.length-1;return n[i]}const FV={type:"spring",stiffness:500,damping:25,restSpeed:10},zV=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),IV={type:"keyframes",duration:.8},$V={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},UV=(s,{keyframes:t})=>t.length>2?IV:Fd.has(s)?s.startsWith("scale")?zV(t[1]):FV:$V;function VV({when:s,delay:t,delayChildren:r,staggerChildren:a,staggerDirection:n,repeat:i,repeatType:o,repeatDelay:c,from:u,elapsed:h,...m}){return!!Object.keys(m).length}const u1=(s,t,r,a={},n,i)=>o=>{const c=JN(a,s)||{},u=c.delay||a.delay||0;let{elapsed:h=0}=a;h=h-pn(u);const m={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-h,onUpdate:p=>{t.set(p),c.onUpdate&&c.onUpdate(p)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:s,motionValue:t,element:i?void 0:n};VV(c)||Object.assign(m,UV(s,m)),m.duration&&(m.duration=pn(m.duration)),m.repeatDelay&&(m.repeatDelay=pn(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let f=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(Sw(m),m.delay===0&&(f=!0)),(wi.instantAnimations||wi.skipAnimations)&&(f=!0,Sw(m),m.delay=0),m.allowFlatten=!c.type&&!c.ease,f&&!i&&t.get()!==void 0){const p=BV(m.keyframes,c);if(p!==void 0){Kt.update(()=>{m.onUpdate(p),m.onComplete()});return}}return c.isSync?new ZN(m):new xU(m)};function HV({protectedKeys:s,needsAnimating:t},r){const a=s.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,a}function R7(s,t,{delay:r=0,transitionOverride:a,type:n}={}){let{transition:i=s.getDefaultTransition(),transitionEnd:o,...c}=t;a&&(i=a);const u=[],h=n&&s.animationState&&s.animationState.getState()[n];for(const m in c){const f=s.getValue(m,s.latestValues[m]??null),p=c[m];if(p===void 0||h&&HV(h,m))continue;const j={delay:r,...JN(i||{},m)},g=f.get();if(g!==void 0&&!f.isAnimating&&!Array.isArray(p)&&p===g&&!j.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const N=D7(s);if(N){const S=window.MotionHandoffAnimation(N,m,Kt);S!==null&&(j.startTime=S,v=!0)}}Rw(s,m),f.start(u1(m,f,p,s.shouldReduceMotion&&JA.has(m)?{type:!1}:j,s,v));const y=f.animation;y&&u.push(y)}return o&&Promise.all(u).then(()=>{Kt.update(()=>{o&&OV(s,o)})}),u}function M7(s,t,r,a=0,n=1){const i=Array.from(s).sort((h,m)=>h.sortNodePosition(m)).indexOf(t),o=s.size,c=(o-1)*a;return typeof r=="function"?r(i,o):n===1?i*a:c-i*a}function Mw(s,t,r={}){const a=ld(s,t,r.type==="exit"?s.presenceContext?.custom:void 0);let{transition:n=s.getDefaultTransition()||{}}=a||{};r.transitionOverride&&(n=r.transitionOverride);const i=a?()=>Promise.all(R7(s,a,r)):()=>Promise.resolve(),o=s.variantChildren&&s.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:m,staggerDirection:f}=n;return qV(s,t,u,h,m,f,r)}:()=>Promise.resolve(),{when:c}=n;if(c){const[u,h]=c==="beforeChildren"?[i,o]:[o,i];return u().then(()=>h())}else return Promise.all([i(),o(r.delay)])}function qV(s,t,r=0,a=0,n=0,i=1,o){const c=[];for(const u of s.variantChildren)u.notify("AnimationStart",t),c.push(Mw(u,t,{...o,delay:r+(typeof a=="function"?0:a)+M7(s.variantChildren,u,a,n,i)}).then(()=>u.notify("AnimationComplete",t)));return Promise.all(c)}function WV(s,t,r={}){s.notify("AnimationStart",t);let a;if(Array.isArray(t)){const n=t.map(i=>Mw(s,i,r));a=Promise.all(n)}else if(typeof t=="string")a=Mw(s,t,r);else{const n=typeof t=="function"?ld(s,t,r.custom):t;a=Promise.all(R7(s,n,r))}return a.then(()=>{s.notify("AnimationComplete",t)})}function O7(s,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==s.length)return!1;for(let a=0;a<r;a++)if(t[a]!==s[a])return!1;return!0}const YV=a1.length;function L7(s){if(!s)return;if(!s.isControllingVariants){const r=s.parent?L7(s.parent)||{}:{};return s.props.initial!==void 0&&(r.initial=s.props.initial),r}const t={};for(let r=0;r<YV;r++){const a=a1[r],n=s.props[a];(xm(n)||n===!1)&&(t[a]=n)}return t}const GV=[...r1].reverse(),KV=r1.length;function XV(s){return t=>Promise.all(t.map(({animation:r,options:a})=>WV(s,r,a)))}function ZV(s){let t=XV(s),r=F6(),a=!0;const n=u=>(h,m)=>{const f=ld(s,m,u==="exit"?s.presenceContext?.custom:void 0);if(f){const{transition:p,transitionEnd:j,...g}=f;h={...h,...g,...j}}return h};function i(u){t=u(s)}function o(u){const{props:h}=s,m=L7(s.parent)||{},f=[],p=new Set;let j={},g=1/0;for(let y=0;y<KV;y++){const N=GV[y],S=r[N],k=h[N]!==void 0?h[N]:m[N],_=xm(k),T=N===u?S.isActive:null;T===!1&&(g=y);let E=k===m[N]&&k!==h[N]&&_;if(E&&a&&s.manuallyAnimateOnMount&&(E=!1),S.protectedKeys={...j},!S.isActive&&T===null||!k&&!S.prevProp||Sp(k)||typeof k=="boolean")continue;const z=QV(S.prevProp,k);let M=z||N===u&&S.isActive&&!E&&_||y>g&&_,C=!1;const A=Array.isArray(k)?k:[k];let Z=A.reduce(n(N),{});T===!1&&(Z={});const{prevResolvedValues:I={}}=S,V={...I,...Z},R=se=>{M=!0,p.has(se)&&(C=!0,p.delete(se)),S.needsAnimating[se]=!0;const Y=s.getValue(se);Y&&(Y.liveStyle=!1)};for(const se in V){const Y=Z[se],ee=I[se];if(j.hasOwnProperty(se))continue;let te=!1;Dw(Y)&&Dw(ee)?te=!O7(Y,ee):te=Y!==ee,te?Y!=null?R(se):p.add(se):Y!==void 0&&p.has(se)?R(se):S.protectedKeys[se]=!0}S.prevProp=k,S.prevResolvedValues=Z,S.isActive&&(j={...j,...Z}),a&&s.blockInitialAnimation&&(M=!1);const q=E&&z;M&&(!q||C)&&f.push(...A.map(se=>{const Y={type:N};if(typeof se=="string"&&a&&!q&&s.manuallyAnimateOnMount&&s.parent){const{parent:ee}=s,te=ld(ee,se);if(ee.enteringChildren&&te){const{delayChildren:K}=te.transition||{};Y.delay=M7(ee.enteringChildren,s,K)}}return{animation:se,options:Y}}))}if(p.size){const y={};if(typeof h.initial!="boolean"){const N=ld(s,Array.isArray(h.initial)?h.initial[0]:h.initial);N&&N.transition&&(y.transition=N.transition)}p.forEach(N=>{const S=s.getBaseTarget(N),k=s.getValue(N);k&&(k.liveStyle=!0),y[N]=S??null}),f.push({animation:y})}let v=!!f.length;return a&&(h.initial===!1||h.initial===h.animate)&&!s.manuallyAnimateOnMount&&(v=!1),a=!1,v?t(f):Promise.resolve()}function c(u,h){if(r[u].isActive===h)return Promise.resolve();s.variantChildren?.forEach(f=>f.animationState?.setActive(u,h)),r[u].isActive=h;const m=o(u);for(const f in r)r[f].protectedKeys={};return m}return{animateChanges:o,setActive:c,setAnimateFunction:i,getState:()=>r,reset:()=>{r=F6()}}}function QV(s,t){return typeof t=="string"?t!==s:Array.isArray(t)?!O7(t,s):!1}function uo(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function F6(){return{animate:uo(!0),whileInView:uo(),whileHover:uo(),whileTap:uo(),whileDrag:uo(),whileFocus:uo(),exit:uo()}}class Rl{constructor(t){this.isMounted=!1,this.node=t}update(){}}class JV extends Rl{constructor(t){super(t),t.animationState||(t.animationState=ZV(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Sp(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let eH=0;class tH extends Rl{constructor(){super(...arguments),this.id=eH++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===a)return;const n=this.node.animationState.setActive("exit",!t);r&&!t&&n.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const sH={animation:{Feature:JV},exit:{Feature:tH}};function pm(s,t,r,a={passive:!0}){return s.addEventListener(t,r,a),()=>s.removeEventListener(t,r)}function Lm(s){return{point:{x:s.pageX,y:s.pageY}}}const rH=s=>t=>s1(t)&&s(t,Lm(t));function Vh(s,t,r,a){return pm(s,t,rH(r),a)}const P7=1e-4,aH=1-P7,nH=1+P7,B7=.01,iH=0-B7,lH=0+B7;function pr(s){return s.max-s.min}function oH(s,t,r){return Math.abs(s-t)<=r}function z6(s,t,r,a=.5){s.origin=a,s.originPoint=es(t.min,t.max,s.origin),s.scale=pr(r)/pr(t),s.translate=es(r.min,r.max,s.origin)-s.originPoint,(s.scale>=aH&&s.scale<=nH||isNaN(s.scale))&&(s.scale=1),(s.translate>=iH&&s.translate<=lH||isNaN(s.translate))&&(s.translate=0)}function Hh(s,t,r,a){z6(s.x,t.x,r.x,a?a.originX:void 0),z6(s.y,t.y,r.y,a?a.originY:void 0)}function I6(s,t,r){s.min=r.min+t.min,s.max=s.min+pr(t)}function cH(s,t,r){I6(s.x,t.x,r.x),I6(s.y,t.y,r.y)}function $6(s,t,r){s.min=t.min-r.min,s.max=s.min+pr(t)}function qh(s,t,r){$6(s.x,t.x,r.x),$6(s.y,t.y,r.y)}function pa(s){return[s("x"),s("y")]}const F7=({current:s})=>s?s.ownerDocument.defaultView:null,U6=(s,t)=>Math.abs(s-t);function dH(s,t){const r=U6(s.x,t.x),a=U6(s.y,t.y);return Math.sqrt(r**2+a**2)}class z7{constructor(t,r,{transformPagePoint:a,contextWindow:n=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=Cy(this.lastMoveEventInfo,this.history),j=this.startEvent!==null,g=dH(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!j&&!g)return;const{point:v}=p,{timestamp:y}=Ys;this.history.push({...v,timestamp:y});const{onStart:N,onMove:S}=this.handlers;j||(N&&N(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,p)},this.handlePointerMove=(p,j)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=Sy(j,this.transformPagePoint),Kt.update(this.updatePoint,!0)},this.handlePointerUp=(p,j)=>{this.end();const{onEnd:g,onSessionEnd:v,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=Cy(p.type==="pointercancel"?this.lastMoveEventInfo:Sy(j,this.transformPagePoint),this.history);this.startEvent&&g&&g(p,N),v&&v(p,N)},!s1(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=a,this.distanceThreshold=o,this.contextWindow=n||window;const c=Lm(t),u=Sy(c,this.transformPagePoint),{point:h}=u,{timestamp:m}=Ys;this.history=[{...h,timestamp:m}];const{onSessionStart:f}=r;f&&f(t,Cy(u,this.history)),this.removeListeners=Rm(Vh(this.contextWindow,"pointermove",this.handlePointerMove),Vh(this.contextWindow,"pointerup",this.handlePointerUp),Vh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Tl(this.updatePoint)}}function Sy(s,t){return t?{point:t(s.point)}:s}function V6(s,t){return{x:s.x-t.x,y:s.y-t.y}}function Cy({point:s},t){return{point:s,delta:V6(s,I7(t)),offset:V6(s,uH(t)),velocity:hH(t,.1)}}function uH(s){return s[0]}function I7(s){return s[s.length-1]}function hH(s,t){if(s.length<2)return{x:0,y:0};let r=s.length-1,a=null;const n=I7(s);for(;r>=0&&(a=s[r],!(n.timestamp-a.timestamp>pn(t)));)r--;if(!a)return{x:0,y:0};const i=ja(n.timestamp-a.timestamp);if(i===0)return{x:0,y:0};const o={x:(n.x-a.x)/i,y:(n.y-a.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function mH(s,{min:t,max:r},a){return t!==void 0&&s<t?s=a?es(t,s,a.min):Math.max(s,t):r!==void 0&&s>r&&(s=a?es(r,s,a.max):Math.min(s,r)),s}function H6(s,t,r){return{min:t!==void 0?s.min+t:void 0,max:r!==void 0?s.max+r-(s.max-s.min):void 0}}function xH(s,{top:t,left:r,bottom:a,right:n}){return{x:H6(s.x,r,n),y:H6(s.y,t,a)}}function q6(s,t){let r=t.min-s.min,a=t.max-s.max;return t.max-t.min<s.max-s.min&&([r,a]=[a,r]),{min:r,max:a}}function fH(s,t){return{x:q6(s.x,t.x),y:q6(s.y,t.y)}}function pH(s,t){let r=.5;const a=pr(s),n=pr(t);return n>a?r=um(t.min,t.max-a,s.min):a>n&&(r=um(s.min,s.max-n,t.min)),ji(0,1,r)}function gH(s,t){const r={};return t.min!==void 0&&(r.min=t.min-s.min),t.max!==void 0&&(r.max=t.max-s.min),r}const Ow=.35;function bH(s=Ow){return s===!1?s=0:s===!0&&(s=Ow),{x:W6(s,"left","right"),y:W6(s,"top","bottom")}}function W6(s,t,r){return{min:Y6(s,t),max:Y6(s,r)}}function Y6(s,t){return typeof s=="number"?s:s[t]||0}const yH=new WeakMap;class vH{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=xs(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:a}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Lm(f).point)},o=(f,p)=>{const{drag:j,dragPropagation:g,onDragStart:v}=this.getProps();if(j&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=DU(j),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),pa(N=>{let S=this.getAxisMotionValue(N).get()||0;if(gn.test(S)){const{projection:k}=this.visualElement;if(k&&k.layout){const _=k.layout.layoutBox[N];_&&(S=pr(_)*(parseFloat(S)/100))}}this.originPoint[N]=S}),v&&Kt.postRender(()=>v(f,p)),Rw(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},c=(f,p)=>{this.latestPointerEvent=f,this.latestPanInfo=p;const{dragPropagation:j,dragDirectionLock:g,onDirectionLock:v,onDrag:y}=this.getProps();if(!j&&!this.openDragLock)return;const{offset:N}=p;if(g&&this.currentDirection===null){this.currentDirection=jH(N),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",p.point,N),this.updateAxis("y",p.point,N),this.visualElement.render(),y&&y(f,p)},u=(f,p)=>{this.latestPointerEvent=f,this.latestPanInfo=p,this.stop(f,p),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>pa(f=>this.getAnimationState(f)==="paused"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:m}=this.getProps();this.panSession=new z7(t,{onSessionStart:i,onStart:o,onMove:c,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:a,contextWindow:F7(this.visualElement)})}stop(t,r){const a=t||this.latestPointerEvent,n=r||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!n||!a)return;const{velocity:o}=n;this.startAnimation(o);const{onDragEnd:c}=this.getProps();c&&Kt.postRender(()=>c(a,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:a}=this.getProps();!a&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,a){const{drag:n}=this.getProps();if(!a||!z0(t,n,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+a[t];this.constraints&&this.constraints[t]&&(o=mH(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){const{dragConstraints:t,dragElastic:r}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,n=this.constraints;t&&Jc(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&a?this.constraints=xH(a.layoutBox,t):this.constraints=!1,this.elastic=bH(r),n!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&pa(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=gH(a.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Jc(t))return!1;const a=t.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const i=wV(a,n.root,this.visualElement.getTransformPagePoint());let o=fH(n.layout.layoutBox,i);if(r){const c=r(yV(o));this.hasMutatedConstraints=!!c,c&&(o=N7(c))}return o}startAnimation(t){const{drag:r,dragMomentum:a,dragElastic:n,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},h=pa(m=>{if(!z0(m,r,this.currentDirection))return;let f=u&&u[m]||{};o&&(f={min:0,max:0});const p=n?200:1e6,j=n?40:1e7,g={type:"inertia",velocity:a?t[m]:0,bounceStiffness:p,bounceDamping:j,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(m,g)});return Promise.all(h).then(c)}startAxisValueAnimation(t,r){const a=this.getAxisMotionValue(t);return Rw(this.visualElement,t),a.start(u1(t,a,0,r,this.visualElement,!1))}stopAnimation(){pa(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){pa(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,a=this.visualElement.getProps(),n=a[r];return n||this.visualElement.getValue(t,(a.initial?a.initial[t]:void 0)||0)}snapToCursor(t){pa(r=>{const{drag:a}=this.getProps();if(!z0(r,a,this.currentDirection))return;const{projection:n}=this.visualElement,i=this.getAxisMotionValue(r);if(n&&n.layout){const{min:o,max:c}=n.layout.layoutBox[r];i.set(t[r]-es(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:a}=this.visualElement;if(!Jc(r)||!a||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};pa(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const u=c.get();n[o]=pH({min:u,max:u},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),pa(o=>{if(!z0(o,t,null))return;const c=this.getAxisMotionValue(o),{min:u,max:h}=this.constraints[o];c.set(es(u,h,n[o]))})}addListeners(){if(!this.visualElement.current)return;yH.set(this.visualElement,this);const t=this.visualElement.current,r=Vh(t,"pointerdown",u=>{const{drag:h,dragListener:m=!0}=this.getProps();h&&m&&this.start(u)}),a=()=>{const{dragConstraints:u}=this.getProps();Jc(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,i=n.addEventListener("measure",a);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),Kt.read(a);const o=pm(window,"resize",()=>this.scalePositionWithinConstraints()),c=n.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:h})=>{this.isDragging&&h&&(pa(m=>{const f=this.getAxisMotionValue(m);f&&(this.originPoint[m]+=u[m].translate,f.set(f.get()+u[m].translate))}),this.visualElement.render())}));return()=>{o(),r(),i(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:a=!1,dragPropagation:n=!1,dragConstraints:i=!1,dragElastic:o=Ow,dragMomentum:c=!0}=t;return{...t,drag:r,dragDirectionLock:a,dragPropagation:n,dragConstraints:i,dragElastic:o,dragMomentum:c}}}function z0(s,t,r){return(t===!0||t===s)&&(r===null||r===s)}function jH(s,t=10){let r=null;return Math.abs(s.y)>t?r="y":Math.abs(s.x)>t&&(r="x"),r}class wH extends Rl{constructor(t){super(t),this.removeGroupControls=_a,this.removeListeners=_a,this.controls=new vH(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||_a}unmount(){this.removeGroupControls(),this.removeListeners()}}const G6=s=>(t,r)=>{s&&Kt.postRender(()=>s(t,r))};class NH extends Rl{constructor(){super(...arguments),this.removePointerDownListener=_a}onPointerDown(t){this.session=new z7(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:F7(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:a,onPanEnd:n}=this.node.getProps();return{onSessionStart:G6(t),onStart:G6(r),onMove:a,onEnd:(i,o)=>{delete this.session,n&&Kt.postRender(()=>n(i,o))}}}mount(){this.removePointerDownListener=Vh(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Of={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function K6(s,t){return t.max===t.min?0:s/(t.max-t.min)*100}const hh={correct:(s,t)=>{if(!t.target)return s;if(typeof s=="string")if(Ze.test(s))s=parseFloat(s);else return s;const r=K6(s,t.target.x),a=K6(s,t.target.y);return`${r}% ${a}%`}},_H={correct:(s,{treeScale:t,projectionDelta:r})=>{const a=s,n=El.parse(s);if(n.length>5)return a;const i=El.createTransformer(s),o=typeof n[0]!="number"?1:0,c=r.x.scale*t.x,u=r.y.scale*t.y;n[0+o]/=c,n[1+o]/=u;const h=es(c,u,.5);return typeof n[2+o]=="number"&&(n[2+o]/=h),typeof n[3+o]=="number"&&(n[3+o]/=h),i(n)}};let Ty=!1;class kH extends w.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:a,layoutId:n}=this.props,{projection:i}=t;YU(SH),i&&(r.group&&r.group.add(i),a&&a.register&&n&&a.register(i),Ty&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Of.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:a,drag:n,isPresent:i}=this.props,{projection:o}=a;return o&&(o.isPresent=i,Ty=!0,n||t.layoutDependency!==r||r===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||Kt.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),t1.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:a}=this.props,{projection:n}=t;Ty=!0,n&&(n.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(n),a&&a.deregister&&a.deregister(n))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function $7(s){const[t,r]=IU(),a=w.useContext(yA);return e.jsx(kH,{...s,layoutGroup:a,switchLayoutGroup:w.useContext(j7),isPresent:t,safeToRemove:r})}const SH={borderRadius:{...hh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:hh,borderTopRightRadius:hh,borderBottomLeftRadius:hh,borderBottomRightRadius:hh,boxShadow:_H};function CH(s,t,r){const a=lr(s)?s:vd(s);return a.start(u1("",a,t,r)),a.animation}const TH=(s,t)=>s.depth-t.depth;class EH{constructor(){this.children=[],this.isDirty=!1}add(t){PN(this.children,t),this.isDirty=!0}remove(t){BN(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(TH),this.isDirty=!1,this.children.forEach(t)}}function AH(s,t){const r=Dr.now(),a=({timestamp:n})=>{const i=n-r;i>=t&&(Tl(a),s(i-t))};return Kt.setup(a,!0),()=>Tl(a)}const U7=["TopLeft","TopRight","BottomLeft","BottomRight"],DH=U7.length,X6=s=>typeof s=="string"?parseFloat(s):s,Z6=s=>typeof s=="number"||Ze.test(s);function RH(s,t,r,a,n,i){n?(s.opacity=es(0,r.opacity??1,MH(a)),s.opacityExit=es(t.opacity??1,0,OH(a))):i&&(s.opacity=es(t.opacity??1,r.opacity??1,a));for(let o=0;o<DH;o++){const c=`border${U7[o]}Radius`;let u=Q6(t,c),h=Q6(r,c);if(u===void 0&&h===void 0)continue;u||(u=0),h||(h=0),u===0||h===0||Z6(u)===Z6(h)?(s[c]=Math.max(es(X6(u),X6(h),a),0),(gn.test(h)||gn.test(u))&&(s[c]+="%")):s[c]=h}(t.rotate||r.rotate)&&(s.rotate=es(t.rotate||0,r.rotate||0,a))}function Q6(s,t){return s[t]!==void 0?s[t]:s.borderRadius}const MH=V7(0,.5,AA),OH=V7(.5,.95,_a);function V7(s,t,r){return a=>a<s?0:a>t?1:r(um(s,t,a))}function J6(s,t){s.min=t.min,s.max=t.max}function ua(s,t){J6(s.x,t.x),J6(s.y,t.y)}function ek(s,t){s.translate=t.translate,s.scale=t.scale,s.originPoint=t.originPoint,s.origin=t.origin}function tk(s,t,r,a,n){return s-=t,s=tp(s,1/r,a),n!==void 0&&(s=tp(s,1/n,a)),s}function LH(s,t=0,r=1,a=.5,n,i=s,o=s){if(gn.test(t)&&(t=parseFloat(t),t=es(o.min,o.max,t/100)-o.min),typeof t!="number")return;let c=es(i.min,i.max,a);s===i&&(c-=t),s.min=tk(s.min,t,r,c,n),s.max=tk(s.max,t,r,c,n)}function sk(s,t,[r,a,n],i,o){LH(s,t[r],t[a],t[n],t.scale,i,o)}const PH=["x","scaleX","originX"],BH=["y","scaleY","originY"];function rk(s,t,r,a){sk(s.x,t,PH,r?r.x:void 0,a?a.x:void 0),sk(s.y,t,BH,r?r.y:void 0,a?a.y:void 0)}function ak(s){return s.translate===0&&s.scale===1}function H7(s){return ak(s.x)&&ak(s.y)}function nk(s,t){return s.min===t.min&&s.max===t.max}function FH(s,t){return nk(s.x,t.x)&&nk(s.y,t.y)}function ik(s,t){return Math.round(s.min)===Math.round(t.min)&&Math.round(s.max)===Math.round(t.max)}function q7(s,t){return ik(s.x,t.x)&&ik(s.y,t.y)}function lk(s){return pr(s.x)/pr(s.y)}function ok(s,t){return s.translate===t.translate&&s.scale===t.scale&&s.originPoint===t.originPoint}class zH{constructor(){this.members=[]}add(t){PN(this.members,t),t.scheduleRender()}remove(t){if(BN(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(n=>t===n);if(r===0)return!1;let a;for(let n=r;n>=0;n--){const i=this.members[n];if(i.isPresent!==!1){a=i;break}}return a?(this.promote(a),!0):!1}promote(t,r){const a=this.lead;if(t!==a&&(this.prevLead=a,this.lead=t,t.show(),a)){a.instance&&a.scheduleRender(),t.scheduleRender(),t.resumeFrom=a,r&&(t.resumeFrom.preserveOpacity=!0),a.snapshot&&(t.snapshot=a.snapshot,t.snapshot.latestValues=a.animationValues||a.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:n}=t.options;n===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:a}=t;r.onExitComplete&&r.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function IH(s,t,r){let a="";const n=s.x.translate/t.x,i=s.y.translate/t.y,o=r?.z||0;if((n||i||o)&&(a=`translate3d(${n}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(a+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:h,rotate:m,rotateX:f,rotateY:p,skewX:j,skewY:g}=r;h&&(a=`perspective(${h}px) ${a}`),m&&(a+=`rotate(${m}deg) `),f&&(a+=`rotateX(${f}deg) `),p&&(a+=`rotateY(${p}deg) `),j&&(a+=`skewX(${j}deg) `),g&&(a+=`skewY(${g}deg) `)}const c=s.x.scale*t.x,u=s.y.scale*t.y;return(c!==1||u!==1)&&(a+=`scale(${c}, ${u})`),a||"none"}const Ey=["","X","Y","Z"],$H=1e3;let UH=0;function Ay(s,t,r,a){const{latestValues:n}=t;n[s]&&(r[s]=n[s],t.setStaticValue(s,0),a&&(a[s]=0))}function W7(s){if(s.hasCheckedOptimisedAppear=!0,s.root===s)return;const{visualElement:t}=s.options;if(!t)return;const r=D7(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:n,layoutId:i}=s.options;window.MotionCancelOptimisedAnimation(r,"transform",Kt,!(n||i))}const{parent:a}=s;a&&!a.hasCheckedOptimisedAppear&&W7(a)}function Y7({attachResizeListener:s,defaultParent:t,measureScroll:r,checkIsScrollRoot:a,resetTransform:n}){return class{constructor(o={},c=t?.()){this.id=UH++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(qH),this.nodes.forEach(KH),this.nodes.forEach(XH),this.nodes.forEach(WH)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new EH)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new IN),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const u=this.eventHandlers.get(o);u&&u.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=o7(o)&&!BU(o),this.instance=o;const{layoutId:c,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||c)&&(this.isLayoutDirty=!0),s){let m,f=0;const p=()=>this.root.updateBlockedByResize=!1;Kt.read(()=>{f=window.innerWidth}),s(o,()=>{const j=window.innerWidth;j!==f&&(f=j,this.root.updateBlockedByResize=!0,m&&m(),m=AH(p,250),Of.hasAnimatedSinceResize&&(Of.hasAnimatedSinceResize=!1,this.nodes.forEach(uk)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||u)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:f,hasRelativeLayoutChanged:p,layout:j})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||h.getDefaultTransition()||tq,{onLayoutAnimationStart:v,onLayoutAnimationComplete:y}=h.getProps(),N=!this.targetLayout||!q7(this.targetLayout,j),S=!f&&p;if(this.options.layoutRoot||this.resumeFrom||S||f&&(N||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...JN(g,"layout"),onPlay:v,onComplete:y};(h.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(m,S)}else f||uk(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=j})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Tl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ZH),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&W7(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const f=this.path[m];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ck);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(dk);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(GH),this.nodes.forEach(VH),this.nodes.forEach(HH)):this.nodes.forEach(dk),this.clearAllSnapshots();const c=Dr.now();Ys.delta=ji(0,1e3/60,c-Ys.timestamp),Ys.timestamp=c,Ys.isProcessing=!0,by.update.process(Ys),by.preRender.process(Ys),by.render.process(Ys),Ys.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,t1.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(YH),this.sharedNodes.forEach(QH)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Kt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Kt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!pr(this.snapshot.measuredBox.x)&&!pr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=xs(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const u=a(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!n)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!H7(this.projectionDelta),u=this.getTransformTemplate(),h=u?u(this.latestValues,""):void 0,m=h!==this.prevTransformTemplateValue;o&&this.instance&&(c||wo(this.latestValues)||m)&&(n(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return o&&(u=this.removeTransform(u)),sq(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return xs();const c=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(rq))){const{scroll:h}=this.root;h&&(ed(c.x,h.offset.x),ed(c.y,h.offset.y))}return c}removeElementScroll(o){const c=xs();if(ua(c,o),this.scroll?.wasRoot)return c;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:m,options:f}=h;h!==this.root&&m&&f.layoutScroll&&(m.wasRoot&&ua(c,o),ed(c.x,m.offset.x),ed(c.y,m.offset.y))}return c}applyTransform(o,c=!1){const u=xs();ua(u,o);for(let h=0;h<this.path.length;h++){const m=this.path[h];!c&&m.options.layoutScroll&&m.scroll&&m!==m.root&&td(u,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),wo(m.latestValues)&&td(u,m.latestValues)}return wo(this.latestValues)&&td(u,this.latestValues),u}removeTransform(o){const c=xs();ua(c,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];if(!h.instance||!wo(h.latestValues))continue;Tw(h.latestValues)&&h.updateSnapshot();const m=xs(),f=h.measurePageBox();ua(m,f),rk(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,m)}return wo(this.latestValues)&&rk(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ys.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:f}=this.options;if(!(!this.layout||!(m||f))){if(this.resolvedRelativeTargetAt=Ys.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xs(),this.relativeTargetOrigin=xs(),qh(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),ua(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=xs(),this.targetWithTransforms=xs()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),cH(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ua(this.target,this.layout.layoutBox),k7(this.target,this.targetDelta)):ua(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xs(),this.relativeTargetOrigin=xs(),qh(this.relativeTargetOrigin,this.target,p.target),ua(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Tw(this.parent.latestValues)||_7(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),c=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Ys.timestamp&&(u=!1),u)return;const{layout:h,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||m))return;ua(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;jV(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=xs());const{target:j}=o;if(!j){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ek(this.prevProjectionDelta.x,this.projectionDelta.x),ek(this.prevProjectionDelta.y,this.projectionDelta.y)),Hh(this.projectionDelta,this.layoutCorrected,j,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!ok(this.projectionDelta.x,this.prevProjectionDelta.x)||!ok(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",j))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=sd(),this.projectionDelta=sd(),this.projectionDeltaWithTransform=sd()}setAnimationOrigin(o,c=!1){const u=this.snapshot,h=u?u.latestValues:{},m={...this.latestValues},f=sd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const p=xs(),j=u?u.source:void 0,g=this.layout?this.layout.source:void 0,v=j!==g,y=this.getStack(),N=!y||y.members.length<=1,S=!!(v&&!N&&this.options.crossfade===!0&&!this.path.some(eq));this.animationProgress=0;let k;this.mixTargetDelta=_=>{const T=_/1e3;hk(f.x,o.x,T),hk(f.y,o.y,T),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(qh(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),JH(this.relativeTarget,this.relativeTargetOrigin,p,T),k&&FH(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=xs()),ua(k,this.relativeTarget)),v&&(this.animationValues=m,RH(m,h,this.latestValues,T,S,N)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Tl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Kt.update(()=>{Of.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=vd(0)),this.currentAnimation=CH(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta($H),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:u,layout:h,latestValues:m}=o;if(!(!c||!u||!h)){if(this!==o&&this.layout&&h&&G7(this.options.animationType,this.layout.layoutBox,h.layoutBox)){u=this.target||xs();const f=pr(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+f;const p=pr(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+p}ua(c,u),td(c,m),Hh(this.projectionDeltaWithTransform,this.layoutCorrected,c,m)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new zH),this.sharedNodes.get(o).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:u}={}){const h=this.getStack();h&&h.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const h={};u.z&&Ay("z",o,h,this.animationValues);for(let m=0;m<Ey.length;m++)Ay(`rotate${Ey[m]}`,o,h,this.animationValues),Ay(`skew${Ey[m]}`,o,h,this.animationValues);o.render();for(const m in h)o.setStaticValue(m,h[m]),this.animationValues&&(this.animationValues[m]=h[m]);o.scheduleRender()}applyProjectionStyles(o,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Mf(c?.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Mf(c?.pointerEvents)||""),this.hasProjected&&!wo(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const m=h.animationValues||h.latestValues;this.applyTransformsToTarget();let f=IH(this.projectionDeltaWithTransform,this.treeScale,m);u&&(f=u(m,f)),o.transform=f;const{x:p,y:j}=this.projectionDelta;o.transformOrigin=`${p.origin*100}% ${j.origin*100}% 0`,h.animationValues?o.opacity=h===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:o.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const g in fm){if(m[g]===void 0)continue;const{correct:v,applyTo:y,isCSSVariable:N}=fm[g],S=f==="none"?m[g]:v(m[g],h);if(y){const k=y.length;for(let _=0;_<k;_++)o[y[_]]=S}else N?this.options.visualElement.renderState.vars[g]=S:o[g]=S}this.options.layoutId&&(o.pointerEvents=h===this?Mf(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(ck),this.root.sharedNodes.clear()}}}function VH(s){s.updateLayout()}function HH(s){const t=s.resumeFrom?.snapshot||s.snapshot;if(s.isLead()&&s.layout&&t&&s.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:a}=s.layout,{animationType:n}=s.options,i=t.source!==s.layout.source;n==="size"?pa(m=>{const f=i?t.measuredBox[m]:t.layoutBox[m],p=pr(f);f.min=r[m].min,f.max=f.min+p}):G7(n,t.layoutBox,r)&&pa(m=>{const f=i?t.measuredBox[m]:t.layoutBox[m],p=pr(r[m]);f.max=f.min+p,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[m].max=s.relativeTarget[m].min+p)});const o=sd();Hh(o,r,t.layoutBox);const c=sd();i?Hh(c,s.applyTransform(a,!0),t.measuredBox):Hh(c,r,t.layoutBox);const u=!H7(o);let h=!1;if(!s.resumeFrom){const m=s.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:f,layout:p}=m;if(f&&p){const j=xs();qh(j,t.layoutBox,f.layoutBox);const g=xs();qh(g,r,p.layoutBox),q7(j,g)||(h=!0),m.options.layoutRoot&&(s.relativeTarget=g,s.relativeTargetOrigin=j,s.relativeParent=m)}}}s.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:c,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:h})}else if(s.isLead()){const{onExitComplete:r}=s.options;r&&r()}s.options.transition=void 0}function qH(s){s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function WH(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function YH(s){s.clearSnapshot()}function ck(s){s.clearMeasurements()}function dk(s){s.isLayoutDirty=!1}function GH(s){const{visualElement:t}=s.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),s.resetTransform()}function uk(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function KH(s){s.resolveTargetDelta()}function XH(s){s.calcProjection()}function ZH(s){s.resetSkewAndRotation()}function QH(s){s.removeLeadSnapshot()}function hk(s,t,r){s.translate=es(t.translate,0,r),s.scale=es(t.scale,1,r),s.origin=t.origin,s.originPoint=t.originPoint}function mk(s,t,r,a){s.min=es(t.min,r.min,a),s.max=es(t.max,r.max,a)}function JH(s,t,r,a){mk(s.x,t.x,r.x,a),mk(s.y,t.y,r.y,a)}function eq(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const tq={duration:.45,ease:[.4,0,.1,1]},xk=s=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(s),fk=xk("applewebkit/")&&!xk("chrome/")?Math.round:_a;function pk(s){s.min=fk(s.min),s.max=fk(s.max)}function sq(s){pk(s.x),pk(s.y)}function G7(s,t,r){return s==="position"||s==="preserve-aspect"&&!oH(lk(t),lk(r),.2)}function rq(s){return s!==s.root&&s.scroll?.wasRoot}const aq=Y7({attachResizeListener:(s,t)=>pm(s,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Dy={current:void 0},K7=Y7({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!Dy.current){const s=new aq({});s.mount(window),s.setOptions({layoutScroll:!0}),Dy.current=s}return Dy.current},resetTransform:(s,t)=>{s.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),nq={pan:{Feature:NH},drag:{Feature:wH,ProjectionNode:K7,MeasureLayout:$7}};function gk(s,t,r){const{props:a}=s;s.animationState&&a.whileHover&&s.animationState.setActive("whileHover",r==="Start");const n="onHover"+r,i=a[n];i&&Kt.postRender(()=>i(t,Lm(t)))}class iq extends Rl{mount(){const{current:t}=this.node;t&&(this.unmount=RU(t,(r,a)=>(gk(this.node,a,"Start"),n=>gk(this.node,n,"End"))))}unmount(){}}class lq extends Rl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Rm(pm(this.node.current,"focus",()=>this.onFocus()),pm(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function bk(s,t,r){const{props:a}=s;if(s.current instanceof HTMLButtonElement&&s.current.disabled)return;s.animationState&&a.whileTap&&s.animationState.setActive("whileTap",r==="Start");const n="onTap"+(r==="End"?"":r),i=a[n];i&&Kt.postRender(()=>i(t,Lm(t)))}class oq extends Rl{mount(){const{current:t}=this.node;t&&(this.unmount=PU(t,(r,a)=>(bk(this.node,a,"Start"),(n,{success:i})=>bk(this.node,n,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Lw=new WeakMap,Ry=new WeakMap,cq=s=>{const t=Lw.get(s.target);t&&t(s)},dq=s=>{s.forEach(cq)};function uq({root:s,...t}){const r=s||document;Ry.has(r)||Ry.set(r,{});const a=Ry.get(r),n=JSON.stringify(t);return a[n]||(a[n]=new IntersectionObserver(dq,{root:s,...t})),a[n]}function hq(s,t,r){const a=uq(t);return Lw.set(s,r),a.observe(s),()=>{Lw.delete(s),a.unobserve(s)}}const mq={some:0,all:1};class xq extends Rl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:a,amount:n="some",once:i}=t,o={root:r?r.current:void 0,rootMargin:a,threshold:typeof n=="number"?n:mq[n]},c=u=>{const{isIntersecting:h}=u;if(this.isInView===h||(this.isInView=h,i&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:m,onViewportLeave:f}=this.node.getProps(),p=h?m:f;p&&p(u)};return hq(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(fq(t,r))&&this.startObserver()}unmount(){}}function fq({viewport:s={}},{viewport:t={}}={}){return r=>s[r]!==t[r]}const pq={inView:{Feature:xq},tap:{Feature:oq},focus:{Feature:lq},hover:{Feature:iq}},gq={layout:{ProjectionNode:K7,MeasureLayout:$7}},bq={...sH,...pq,...nq,...gq},yq=bV(bq,DV),vq=(s,t)=>{const r=new Set([...Object.keys(s),...t.flatMap(n=>Object.keys(n))]),a={};return r.forEach(n=>{a[n]=[s[n],...t.map(i=>i[n])]}),a},yk=({text:s="",delay:t=200,className:r="",animateBy:a="words",direction:n="top",threshold:i=.1,rootMargin:o="0px",animationFrom:c,animationTo:u,easing:h=p=>p,onAnimationComplete:m,stepDuration:f=.35})=>{const p=a==="words"?s.split(" "):s.split(""),[j,g]=w.useState(!1),v=w.useRef(null);w.useEffect(()=>{if(!v.current)return;const z=new IntersectionObserver(([M])=>{M.isIntersecting&&(g(!0),z.unobserve(v.current))},{threshold:i,rootMargin:o});return z.observe(v.current),()=>z.disconnect()},[i,o]);const y=w.useMemo(()=>n==="top"?{filter:"blur(10px)",opacity:0,y:-50}:{filter:"blur(10px)",opacity:0,y:50},[n]),N=w.useMemo(()=>[{filter:"blur(5px)",opacity:.5,y:n==="top"?5:-5},{filter:"blur(0px)",opacity:1,y:0}],[n]),S=c??y,k=u??N,_=k.length+1,T=f*(_-1),E=Array.from({length:_},(z,M)=>_===1?0:M/(_-1));return e.jsx("p",{ref:v,className:r,style:{display:"flex",flexWrap:"wrap"},children:p.map((z,M)=>{const C=vq(S,k),A={duration:T,times:E,delay:M*t/1e3,ease:h};return e.jsxs(yq.span,{initial:S,animate:j?C:S,transition:A,onAnimationComplete:M===p.length-1?m:void 0,style:{display:"inline-block",willChange:"transform, filter, opacity"},children:[z===" "?"":z,a==="words"&&M<p.length-1&&""]},M)})})},My=({title:s,status:t,priority:r,deadline:a})=>{const n={pending:"bg-yellow-100 text-yellow-800 border-yellow-300",in_progress:"bg-blue-100 text-blue-800 border-blue-300",completed:"bg-green-100 text-green-800 border-green-300"},i={low:"text-gray-500",medium:"text-orange-600",high:"text-red-600"},o={pending:"",in_progress:" ",completed:""};return e.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-200 hover:border-purple-300 transition-all cursor-pointer group shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-gray-900 font-normal mb-2 group-hover:text-purple-600 transition-colors text-sm",children:s}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${n[t]}`,children:o[t]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(qe,{className:`w-3 h-3 ${i[r]}`}),e.jsx("span",{className:`text-xs ${i[r]}`,children:r==="high"?"":r==="medium"?"":""})]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex items-center gap-1 text-gray-600",children:[e.jsx(Ue,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs",children:a})]})})]})})},jq=({user:s,action:t,item:r,time:a,avatar:n,color:i})=>{const o={purple:"bg-purple-100 text-purple-700 border-purple-200",pink:"bg-pink-100 text-pink-700 border-pink-200",blue:"bg-blue-100 text-blue-700 border-blue-200",green:"bg-green-100 text-green-700 border-green-200"};return e.jsxs("div",{className:"flex items-start gap-3 group",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-medium text-sm flex-shrink-0 border ${o[i]}`,children:n}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm text-gray-900 font-normal",children:[e.jsx("span",{className:"font-medium",children:s})," ",e.jsx("span",{className:"text-gray-600",children:t})]}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:r}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:a})]})]})},wq=({title:s,client:t,progress:r,status:a,deadline:n})=>{const i={in_progress:"bg-blue-100 text-blue-800 border-blue-300",completed:"bg-green-100 text-green-800 border-green-300",on_hold:"bg-orange-100 text-orange-800 border-orange-300"},o={in_progress:" ",completed:"",on_hold:""};return e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 hover:border-purple-300 transition-all cursor-pointer group shadow-sm",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"text-gray-900 font-normal mb-1 group-hover:text-purple-600 transition-colors text-sm",children:s}),e.jsx("p",{className:"text-xs text-gray-600",children:t})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-xs text-gray-600",children:""}),e.jsxs("span",{className:"text-xs text-gray-900 font-medium",children:[r,"%"]})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-purple-600 transition-all duration-300",style:{width:`${r}%`}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${i[a]}`,children:o[a]}),e.jsxs("div",{className:"flex items-center gap-1 text-gray-600",children:[e.jsx(Ue,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs",children:n})]})]})]})},Oy=({icon:s,text:t,onClick:r,color:a})=>{const n={purple:"hover:bg-purple-50 hover:border-purple-300 text-purple-700",pink:"hover:bg-pink-50 hover:border-pink-300 text-pink-700",blue:"hover:bg-blue-50 hover:border-blue-300 text-blue-700",green:"hover:bg-green-50 hover:border-green-300 text-green-700"};return e.jsxs("button",{onClick:r,className:`w-full flex items-center gap-3 p-4 rounded-xl bg-white border border-gray-200 transition-all shadow-sm ${n[a]}`,children:[e.jsx("div",{className:"flex-shrink-0",children:s}),e.jsx("span",{className:"text-sm font-normal text-gray-900",children:t})]})},vk=({label:s,value:t,max:r,color:a})=>{const n=r>0?Math.round(t/r*100):0,i={purple:"bg-gradient-to-r from-purple-500 to-purple-600",green:"bg-gradient-to-r from-green-500 to-green-600",red:"bg-gradient-to-r from-red-500 to-red-600",blue:"bg-gradient-to-r from-blue-500 to-blue-600"};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-gray-900 font-normal",children:s}),e.jsxs("span",{className:"text-xs text-gray-600",children:[t," / ",r," (",n,"%)"]})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-300 ${i[a]}`,style:{width:`${n}%`}})})]})},jk=["   ? ","  - ! ","   ! "],wk=()=>{const s=Wa(),[t,r]=w.useState(null),[a,n]=w.useState(null),[i,o]=w.useState({projects:{total:0,active:0,completed:0},tasks:{total:0,pending:0,completed:0},clients:{total:0,active:0},finance:{totalRevenue:0,pending:0,received:0}}),[c,u]=w.useState(!0),[h,m]=w.useState(0);w.useEffect(()=>{const g=setInterval(()=>{m(v=>(v+1)%jk.length)},8e3);return()=>clearInterval(g)},[]),w.useEffect(()=>{if(!localStorage.getItem("auth")){s("/login");return}p();const v=()=>{document.hidden||(console.log(" Page visible again, refreshing dashboard..."),p())},y=()=>{console.log(" Window focused, refreshing dashboard..."),p()},N=()=>{console.log(" Data update event received, refreshing dashboard..."),p()};return document.addEventListener("visibilitychange",v),window.addEventListener("focus",y),window.addEventListener("dashboardUpdate",N),()=>{document.removeEventListener("visibilitychange",v),window.removeEventListener("focus",y),window.removeEventListener("dashboardUpdate",N)}},[]);const f=async()=>{try{console.log(" Fetching daily chart data...");const g=await fe.get("/admin/api/dashboard/charts/daily?days=30");g.data.success&&g.data.data&&(console.log(" Daily chart data fetched:",g.data.data),n(g.data.data))}catch(g){console.error(" Error fetching daily chart data:",g)}},p=async()=>{try{u(!0),console.log(" Fetching dashboard stats from new API...");const g=await fe.get("/admin/api/dashboard/stats");if(g.data.success&&g.data.data){const v=g.data.data;console.log(" Dashboard data fetched:",v),r(v),f();const y=v.charts?.projects_distribution||{},N=y.in_progress||0,S=y.completed||0,k=v.charts?.tasks_by_status||{},_=(k.pending||0)+(v.summary?.overdue_tasks||0),T=k.completed||0,E={projects:{total:v.summary?.total_projects||v.projects.length,active:N||v.summary?.active_projects||0,completed:S},tasks:{total:v.summary?.total_tasks||0,pending:_,completed:T},clients:{total:v.clients.active_count+v.clients.new_leads_week,active:v.clients.active_count},finance:{totalRevenue:v.finance.month_revenue,pending:v.finance.pending,received:v.finance.paid}};console.log(" Setting stats:",E),o(E)}}catch(g){console.error(" Error fetching dashboard stats:",g)}finally{u(!1)}},j=[{color:"#ffffff",title:c?"...":`${i.projects.total}`,description:c?" ...":`: ${i.projects.active}  : ${i.projects.completed}`,label:"",icon:e.jsx(Ia,{}),onClick:()=>s("/projects")},{color:"#f8fafc",title:c?"...":`${i.tasks.total}`,description:c?" ...":` : ${i.tasks.pending}  : ${i.tasks.completed}`,label:"",icon:e.jsx(ar,{}),onClick:()=>s("/tasks")},{color:"#ffffff",title:c?"...":`${i.clients.total}`,description:c?" ...":` : ${i.clients.active}`,label:"",icon:e.jsx(tt,{}),onClick:()=>s("/clients")},{color:"#ffffff",title:c?"...":`${(i.finance.totalRevenue/1e3).toFixed(0)}K `,description:c?" ...":`: ${(i.finance.received/1e3).toFixed(0)}K  : ${(i.finance.pending/1e3).toFixed(0)}K`,label:"",icon:e.jsx(Ge,{}),onClick:()=>s("/finance")},{color:"#f1f5f9",title:c?"...":`${i.projects.completed}`,description:c?" ...":`   ${i.projects.active}  `,label:"",icon:e.jsx(ct,{}),onClick:()=>s("/analytics")},{color:"#e2e8f0",title:c?"...":`${t?.summary?.overdue_tasks||0}`,description:c?" ...":"   ",label:"",icon:e.jsx(Ua,{}),onClick:()=>s("/automation")}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 p-6",children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"bg-white backdrop-blur-xl rounded-2xl p-12 border border-gray-200 shadow-lg min-h-[200px]",children:c?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-pulse text-gray-400 text-2xl",children:"..."})}):t?e.jsxs("div",{className:"space-y-4",children:[e.jsx(yk,{text:t.greeting.title,delay:80,direction:"top",animateBy:"words",className:"text-4xl text-gray-900 font-normal text-center"},t.greeting.title),t.summary&&e.jsxs("div",{className:"flex items-center justify-center gap-6 text-sm text-gray-600",children:[t.summary.active_projects!==void 0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ia,{className:"w-4 h-4 text-purple-600"}),e.jsxs("span",{children:[" : ",e.jsx("strong",{children:t.summary.active_projects})]})]}),t.summary.active_clients!==void 0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"w-4 h-4 text-blue-600"}),e.jsxs("span",{children:[" : ",e.jsx("strong",{children:t.summary.active_clients})]})]}),t.summary.month_revenue!==void 0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"w-4 h-4 text-green-600"}),e.jsxs("span",{children:["  : ",e.jsxs("strong",{children:[t.summary.month_revenue.toLocaleString("ru-RU")," "]})]})]}),t.summary.projects_in_work!==void 0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ia,{className:"w-4 h-4 text-purple-600"}),e.jsxs("span",{children:["  : ",e.jsx("strong",{children:t.summary.projects_in_work})]})]}),t.summary.overdue_tasks!==void 0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"w-4 h-4 text-red-600"}),e.jsxs("span",{children:[" : ",e.jsx("strong",{children:t.summary.overdue_tasks})]})]}),t.summary.tasks_today!==void 0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ar,{className:"w-4 h-4 text-blue-600"}),e.jsxs("span",{children:["  : ",e.jsx("strong",{children:t.summary.tasks_today})]})]})]})]}):e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(yk,{text:jk[h],delay:80,direction:"top",animateBy:"words",className:"text-5xl text-gray-900 font-normal text-center"},h)})})}),e.jsx(II,{textAutoHide:!0,enableStars:!0,enableSpotlight:!0,enableBorderGlow:!0,enableTilt:!0,enableMagnetism:!0,clickEffect:!0,spotlightRadius:300,particleCount:12,glowColor:"132, 0, 255",cards:j}),a&&e.jsxs("div",{className:"mt-8 bg-white backdrop-blur-xl rounded-2xl p-6 border border-gray-200 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ct,{className:"w-5 h-5 text-purple-600"}),e.jsx("h2",{className:"text-xl font-normal text-gray-900",children:"   "})]}),e.jsxs("span",{className:"text-xs text-gray-500",children:[a.period.days," "]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ia,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-xs text-gray-600",children:" "})]}),e.jsx("span",{className:"text-2xl font-bold text-blue-700",children:a.daily.reduce((g,v)=>g+v.projects_count,0)})]}),e.jsxs("div",{className:"bg-green-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ge,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-xs text-gray-600",children:" "})]}),e.jsxs("span",{className:"text-2xl font-bold text-green-700",children:[Math.round(a.daily.reduce((g,v)=>g+v.projects_sum,0)).toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ge,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-xs text-gray-600",children:" "})]}),e.jsxs("span",{className:"text-2xl font-bold text-purple-700",children:[Math.round(a.daily.reduce((g,v)=>g+v.payments_sum,0)).toLocaleString("ru-RU")," "]})]})]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:a.daily.slice().reverse().map((g,v)=>{const y=Math.max(...a.daily.map(_=>_.projects_sum)),N=Math.max(...a.daily.map(_=>_.payments_sum)),S=y>0?g.projects_sum/y*100:0,k=N>0?g.payments_sum/N*100:0;return e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs text-gray-600 font-medium",children:new Date(g.date).toLocaleDateString("ru-RU",{day:"numeric",month:"short"})}),e.jsx("div",{className:"flex items-center gap-4 text-xs",children:g.projects_count>0&&e.jsxs("span",{className:"text-blue-600",children:[e.jsx(Ia,{className:"w-3 h-3 inline mr-1"}),g.projects_count]})})]}),e.jsxs("div",{className:"space-y-1",children:[g.projects_sum>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-gray-500",children:":"}),e.jsxs("span",{className:"text-xs font-medium text-gray-900",children:[Math.round(g.projects_sum).toLocaleString("ru-RU")," "]})]}),e.jsx("div",{className:"h-1.5 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-400 to-blue-600",style:{width:`${S}%`}})})]}),g.payments_sum>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-gray-500",children:":"}),e.jsxs("span",{className:"text-xs font-medium text-gray-900",children:[Math.round(g.payments_sum).toLocaleString("ru-RU")," "]})]}),e.jsx("div",{className:"h-1.5 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-green-600",style:{width:`${k}%`}})})]})]})]},v)})})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{onClick:()=>s("/finance"),className:"bg-gradient-to-br from-green-50 to-emerald-100 backdrop-blur-xl rounded-2xl p-6 border border-green-200 shadow-lg hover:shadow-xl transition-all cursor-pointer lg:col-span-2",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Ge,{className:"w-6 h-6 text-green-600"}),e.jsx("span",{className:"text-sm text-green-700 font-semibold",children:""})]}),t?e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"  :"}),e.jsxs("span",{className:"text-lg font-bold text-green-700",children:[t.finance.paid.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-yellow-600",children:":"}),e.jsxs("span",{className:"text-sm font-medium text-yellow-700",children:[t.finance.pending.toLocaleString("ru-RU")," "]})]}),t.finance.overdue>0&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-red-600",children:":"}),e.jsxs("span",{className:"text-sm font-medium text-red-700",children:[t.finance.overdue.toLocaleString("ru-RU")," "]})]})]}),e.jsxs("div",{className:"space-y-2",children:[t.finance.total_active_projects_sum!==void 0&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"  :"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[t.finance.total_active_projects_sum.toLocaleString("ru-RU")," "]})]}),t.finance.total_paid_to_executors!==void 0&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-gray-600",children:" :"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[t.finance.total_paid_to_executors.toLocaleString("ru-RU")," "]})]}),t.finance.net_profit!==void 0&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-gray-600",children:" :"}),e.jsxs("span",{className:`text-lg font-bold ${t.finance.net_profit>=0?"text-green-700":"text-red-700"}`,children:[t.finance.net_profit.toLocaleString("ru-RU")," "]})]})]})]}):e.jsx("p",{className:"text-xl font-normal text-gray-900",children:"..."})]}),e.jsxs("div",{onClick:()=>s("/clients"),className:"bg-gradient-to-br from-blue-50 to-sky-100 backdrop-blur-xl rounded-2xl p-6 border border-blue-200 shadow-lg hover:shadow-xl transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(tt,{className:"w-6 h-6 text-blue-600"}),e.jsx("span",{className:"text-sm text-blue-700 font-semibold",children:""})]}),t?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-gray-600",children:":"}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:t.clients.active_count})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-blue-600",children:" :"}),e.jsx("span",{className:"text-sm font-medium text-blue-700",children:t.clients.new_leads_week})]}),t.clients.recent.length>0&&e.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:[": ",t.clients.recent[0].name]})]}):e.jsx("p",{className:"text-xl font-normal text-gray-900",children:"..."})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-100 backdrop-blur-xl rounded-2xl p-6 border border-orange-200 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(qe,{className:"w-6 h-6 text-orange-600"}),e.jsx("span",{className:"text-sm text-orange-700 font-semibold",children:" "})]}),t&&t.alerts.length>0?e.jsxs("div",{className:"space-y-2",children:[t.alerts.slice(0,3).map((g,v)=>e.jsxs("div",{className:"text-xs text-gray-700 flex items-start gap-2",children:[e.jsx("span",{className:`w-2 h-2 rounded-full mt-1 flex-shrink-0 ${g.level==="error"?"bg-red-500":g.level==="warning"?"bg-yellow-500":"bg-blue-500"}`}),e.jsx("span",{className:"line-clamp-2",children:g.message})]},v)),t.alerts.length>3&&e.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["+",t.alerts.length-3," "]})]}):e.jsx("p",{className:"text-sm text-gray-500",children:"   "})]}),e.jsxs("div",{onClick:()=>s("/documents"),className:"bg-gradient-to-br from-purple-50 to-pink-100 backdrop-blur-xl rounded-2xl p-6 border border-purple-200 shadow-lg hover:shadow-xl transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(Ie,{className:"w-6 h-6 text-purple-600"}),e.jsx("span",{className:"text-sm text-purple-700 font-semibold",children:""})]}),t&&t.documents.length>0?e.jsxs("div",{className:"space-y-2",children:[t.documents.slice(0,3).map(g=>e.jsxs("div",{className:"text-xs text-gray-700",children:[e.jsx("div",{className:"font-medium truncate",children:g.filename}),e.jsx("div",{className:"text-gray-500",children:g.project_title?`${g.project_title}`:" "})]},g.id)),t.documents.length>3&&e.jsxs("div",{className:"text-xs text-gray-500",children:["+",t.documents.length-3," "]})]}):e.jsx("p",{className:"text-sm text-gray-500",children:" "})]})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white backdrop-blur-xl rounded-2xl p-6 border border-gray-200 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ar,{className:"w-5 h-5 text-purple-600"}),e.jsx("h2",{className:"text-xl font-normal text-gray-900",children:""})]}),e.jsx("button",{onClick:()=>s("/tasks"),className:"text-sm text-gray-400 hover:text-gray-900 transition-colors font-normal",children:"  "})]}),e.jsx("div",{className:"space-y-3",children:c?e.jsx("div",{className:"text-center py-8 text-gray-400",children:"..."}):t?e.jsxs(e.Fragment,{children:[t.tasks.overdue.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs font-semibold text-red-600 uppercase mb-2",children:[" (",t.tasks.overdue.length,")"]}),t.tasks.overdue.slice(0,2).map(g=>e.jsx(My,{title:g.title,status:"pending",priority:g.priority,deadline:new Date(g.deadline).toLocaleDateString("ru-RU")},g.id))]}),t.tasks.upcoming.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs font-semibold text-blue-600 uppercase mb-2",children:[" (",t.tasks.upcoming.length,")"]}),t.tasks.upcoming.slice(0,3).map(g=>e.jsx(My,{title:g.title,status:"in_progress",priority:g.priority,deadline:new Date(g.deadline).toLocaleDateString("ru-RU")},g.id))]}),t.tasks.new.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs font-semibold text-green-600 uppercase mb-2",children:["  (",t.tasks.new.length,")"]}),t.tasks.new.slice(0,1).map(g=>e.jsx(My,{title:g.title,status:"pending",priority:g.priority,deadline:new Date(g.created_at).toLocaleDateString("ru-RU")},g.id))]}),t.tasks.overdue.length===0&&t.tasks.upcoming.length===0&&t.tasks.new.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-400",children:" "})]}):e.jsx("div",{className:"text-center py-8 text-gray-400",children:" "})})]}),e.jsxs("div",{className:"bg-white backdrop-blur-xl rounded-2xl p-6 border border-gray-200 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(yn,{className:"w-5 h-5 text-purple-600"}),e.jsx("h2",{className:"text-xl font-normal text-gray-900",children:" "})]}),e.jsx("div",{className:"space-y-4",children:c?e.jsx("div",{className:"text-center py-8 text-gray-400",children:"..."}):t&&t.activity.length>0?t.activity.map((g,v)=>{const y=["purple","pink","blue","green"],N=y[v%y.length],S=g.user.charAt(0).toUpperCase();return e.jsx(jq,{user:g.user,action:g.action,item:g.target,time:g.timestamp,avatar:S,color:N},v)}):e.jsx("div",{className:"text-center py-8 text-gray-400",children:" "})})]}),e.jsxs("div",{className:"lg:col-span-2 bg-white backdrop-blur-xl rounded-2xl p-6 border border-gray-200 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ia,{className:"w-5 h-5 text-purple-600"}),e.jsx("h2",{className:"text-xl font-normal text-gray-900",children:" "})]}),e.jsx("button",{onClick:()=>s("/projects"),className:"text-sm text-gray-400 hover:text-gray-900 transition-colors font-normal",children:"  "})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c?e.jsx("div",{className:"col-span-2 text-center py-8 text-gray-400",children:"..."}):t&&t.projects.length>0?t.projects.map(g=>e.jsx(wq,{title:g.title,client:g.client_name||" ",progress:g.progress,status:g.status,deadline:g.deadline?new Date(g.deadline).toLocaleDateString("ru-RU"):" "},g.id)):e.jsx("div",{className:"col-span-2 text-center py-8 text-gray-400",children:" "})})]}),e.jsxs("div",{className:"bg-white backdrop-blur-xl rounded-2xl p-6 border border-gray-200 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Ua,{className:"w-5 h-5 text-purple-600"}),e.jsx("h2",{className:"text-xl font-normal text-gray-900",children:" "})]}),e.jsx("div",{className:"space-y-3",children:c?e.jsx("div",{className:"text-center py-8 text-gray-400",children:"..."}):t&&t.quick_actions.length>0?t.quick_actions.map((g,v)=>{const y=["purple","pink","blue","green"],N=y[v%y.length],k={tasks:e.jsx(ar,{className:"w-5 h-5"}),projects:e.jsx(Ia,{className:"w-5 h-5"}),clients:e.jsx(tt,{className:"w-5 h-5"}),documents:e.jsx(Ie,{className:"w-5 h-5"})}[g.icon]||e.jsx(Ua,{className:"w-5 h-5"});return e.jsx(Oy,{icon:k,text:g.label,onClick:()=>s(g.link),color:N},v)}):e.jsxs(e.Fragment,{children:[e.jsx(Oy,{icon:e.jsx(ar,{className:"w-5 h-5"}),text:" ",onClick:()=>s("/tasks"),color:"purple"}),e.jsx(Oy,{icon:e.jsx(Ia,{className:"w-5 h-5"}),text:" ",onClick:()=>s("/projects"),color:"pink"})]})})]})]}),t&&t.user.role==="owner"&&t.charts&&e.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white backdrop-blur-xl rounded-2xl p-6 border border-gray-200 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(yn,{className:"w-5 h-5 text-purple-600"}),e.jsx("h2",{className:"text-xl font-normal text-gray-900",children:" "})]}),e.jsx("div",{className:"space-y-4",children:Object.entries(t.charts.tasks_by_status).map(([g,v],y)=>{const N=["purple","green","red","blue"],S=N[y%N.length],_={pending:"",in_progress:" ",completed:"",overdue:""}[g]||g;return e.jsx(vk,{label:_,value:v,max:i.tasks.total,color:S},g)})})]}),e.jsxs("div",{className:"bg-white backdrop-blur-xl rounded-2xl p-6 border border-gray-200 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(ct,{className:"w-5 h-5 text-purple-600"}),e.jsx("h2",{className:"text-xl font-normal text-gray-900",children:" "})]}),e.jsx("div",{className:"space-y-4",children:Object.entries(t.charts.projects_distribution).map(([g,v],y)=>{const N=["blue","green","red","purple"],S=N[y%N.length],_={in_progress:" ",completed:"",on_hold:" ",planning:""}[g]||g;return e.jsx(vk,{label:_,value:v,max:i.projects.total,color:S},g)})})]})]})]})};class Nq{width;height;ctx;x;y;color;speed;size;sizeStep;minSize;maxSizeInteger;maxSize;delay;counter;counterStep;isIdle;isReverse;isShimmer;constructor(t,r,a,n,i,o,c){this.width=t.width,this.height=t.height,this.ctx=r,this.x=a,this.y=n,this.color=i,this.speed=this.getRandomValue(.1,.9)*o,this.size=0,this.sizeStep=Math.random()*.4,this.minSize=.5,this.maxSizeInteger=2,this.maxSize=this.getRandomValue(this.minSize,this.maxSizeInteger),this.delay=c,this.counter=0,this.counterStep=Math.random()*4+(this.width+this.height)*.01,this.isIdle=!1,this.isReverse=!1,this.isShimmer=!1}getRandomValue(t,r){return Math.random()*(r-t)+t}draw(){const t=this.maxSizeInteger*.5-this.size*.5;this.ctx.fillStyle=this.color,this.ctx.fillRect(this.x+t,this.y+t,this.size,this.size)}appear(){if(this.isIdle=!1,this.counter<=this.delay){this.counter+=this.counterStep;return}this.size>=this.maxSize&&(this.isShimmer=!0),this.isShimmer?this.shimmer():this.size+=this.sizeStep,this.draw()}disappear(){if(this.isShimmer=!1,this.counter=0,this.size<=0){this.isIdle=!0;return}else this.size-=.1;this.draw()}shimmer(){this.size>=this.maxSize?this.isReverse=!0:this.size<=this.minSize&&(this.isReverse=!1),this.isReverse?this.size-=this.speed:this.size+=this.speed}}function _q(s,t){return s<=0||t?0:s>=100?100*.001:s*.001}const Nk={default:{activeColor:null,gap:5,speed:35,colors:"#f8fafc,#f1f5f9,#cbd5e1",noFocus:!1},blue:{activeColor:"#e0f2fe",gap:10,speed:25,colors:"#e0f2fe,#7dd3fc,#0ea5e9",noFocus:!1},yellow:{activeColor:"#fef08a",gap:3,speed:20,colors:"#fef08a,#fde047,#eab308",noFocus:!1},pink:{activeColor:"#fecdd3",gap:6,speed:80,colors:"#fecdd3,#fda4af,#e11d48",noFocus:!0},green:{activeColor:"#bbf7d0",gap:6,speed:30,colors:"#bbf7d0,#86efac,#22c55e",noFocus:!1},purple:{activeColor:"#e9d5ff",gap:5,speed:40,colors:"#e9d5ff,#d8b4fe,#a855f7",noFocus:!1}};function kq({variant:s="default",gap:t,speed:r,colors:a,noFocus:n,className:i="",children:o}){const c=w.useRef(null),u=w.useRef(null),h=w.useRef([]),m=w.useRef(null),f=w.useRef(performance.now()),p=w.useRef(window.matchMedia("(prefers-reduced-motion: reduce)").matches).current,j=Nk[s]||Nk.default,g=t??j.gap,v=r??j.speed,y=a??j.colors,N=n??j.noFocus,S=()=>{if(!c.current||!u.current)return;const C=c.current.getBoundingClientRect(),A=Math.floor(C.width),Z=Math.floor(C.height),I=u.current.getContext("2d");u.current.width=A,u.current.height=Z,u.current.style.width=`${A}px`,u.current.style.height=`${Z}px`;const V=y.split(","),R=[];for(let q=0;q<A;q+=parseInt(g.toString(),10))for(let J=0;J<Z;J+=parseInt(g.toString(),10)){const se=V[Math.floor(Math.random()*V.length)],Y=q-A/2,ee=J-Z/2,te=Math.sqrt(Y*Y+ee*ee),K=p?0:te;if(!I)return;R.push(new Nq(u.current,I,q,J,se,_q(v,p),K))}h.current=R},k=C=>{m.current=requestAnimationFrame(()=>k(C));const A=performance.now(),Z=A-f.current,I=1e3/60;if(Z<I)return;f.current=A-Z%I;const V=u.current?.getContext("2d");if(!V||!u.current)return;V.clearRect(0,0,u.current.width,u.current.height);let R=!0;for(let q=0;q<h.current.length;q++){const J=h.current[q];J[C](),J.isIdle||(R=!1)}R&&m.current!==null&&cancelAnimationFrame(m.current)},_=C=>{m.current!==null&&cancelAnimationFrame(m.current),m.current=requestAnimationFrame(()=>k(C))},T=()=>_("appear"),E=()=>_("disappear"),z=C=>{C.currentTarget.contains(C.relatedTarget)||_("appear")},M=C=>{C.currentTarget.contains(C.relatedTarget)||_("disappear")};return w.useEffect(()=>{S();const C=new ResizeObserver(()=>{S()});return c.current&&C.observe(c.current),()=>{C.disconnect(),m.current!==null&&cancelAnimationFrame(m.current)}},[g,v,y,N]),e.jsxs("div",{ref:c,className:`pixel-card ${i}`,onMouseEnter:T,onMouseLeave:E,onFocus:N?void 0:z,onBlur:N?void 0:M,tabIndex:N?-1:0,children:[e.jsx("canvas",{className:"pixel-canvas",ref:u}),o]})}const Sq=s=>({new:"from-blue-400 to-blue-600",review:"from-orange-400 to-orange-600",accepted:"from-purple-400 to-purple-600",in_progress:"from-yellow-400 to-yellow-600",testing:"from-green-400 to-green-600",completed:"from-green-500 to-green-700",cancelled:"from-red-400 to-red-600",on_hold:"from-gray-400 to-gray-600"})[s]||"from-gray-400 to-gray-600",Cq=s=>({new:" ",review:" ",accepted:" ",in_progress:"  ",testing:" ",completed:" ",cancelled:" ",on_hold:" "})[s]||s,Tq=s=>({new:10,review:25,accepted:40,in_progress:60,testing:80,completed:100,cancelled:0,on_hold:0})[s]||0,_k=s=>s.split(" ").map(t=>t[0]).join("").toUpperCase().slice(0,2),Eq=s=>({new:"blue",review:"yellow",accepted:"purple",in_progress:"yellow",testing:"green",completed:"green",cancelled:"pink",on_hold:"default"})[s]||"default",Aq=({project:s,onView:t,onEdit:r,onDelete:a,onArchive:n,onContact:i,onAddPayment:o,onComplete:c,onViewFiles:u,onAssignExecutor:h,onExecutorPayment:m})=>{const f=Tq(s.status),p=Sq(s.status),j=Cq(s.status),g=Eq(s.status);return e.jsxs(kq,{variant:g,className:"bg-white rounded-2xl shadow-lg border-l-4 overflow-hidden hover:shadow-2xl transition-all duration-300 hover:-translate-y-1",style:{borderLeftColor:s.status==="new"?"#2196F3":s.status==="review"?"#FF9800":s.status==="accepted"?"#9C27B0":s.status==="in_progress"?"#FFC107":s.status==="testing"?"#4CAF50":s.status==="completed"?"#66BB6A":s.status==="cancelled"?"#f44336":"#9E9E9E"},children:[e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-5 py-4 flex items-center justify-between border-b border-gray-200",children:[e.jsx("div",{className:`px-4 py-2 rounded-xl bg-gradient-to-r ${p} text-white text-sm font-semibold shadow-md`,children:j}),e.jsxs("div",{className:"bg-gray-700 text-white px-3 py-1 rounded-lg text-xs font-bold",children:["#",s.id]})]}),e.jsxs("div",{className:"px-5 py-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1 line-clamp-2",children:s.title}),e.jsx("span",{className:"inline-block px-3 py-1 bg-gray-100 text-gray-700 rounded-lg text-xs font-semibold",children:s.project_type||" "})]}),e.jsxs("div",{className:"px-5 py-3 bg-gray-50 border-y border-gray-200 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-400 to-pink-600 flex items-center justify-center text-white font-bold text-sm shadow-md",children:_k(s.user?.first_name||"U")}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-semibold text-gray-900 text-sm truncate",children:s.user?.first_name||""}),e.jsxs("div",{className:"text-xs text-gray-500 truncate",children:["@",s.user?.username||""]})]})]}),s.assigned_to?e.jsxs("div",{className:"px-5 py-3 bg-amber-50 border-b border-amber-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-orange-400 to-red-600 flex items-center justify-center text-white font-bold text-xs shadow-md",children:_k(s.assigned_to.username||"E")}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs text-amber-700 font-semibold uppercase",children:""}),e.jsx("div",{className:"font-semibold text-gray-900 text-sm truncate",children:s.assigned_to.username})]})]}),s.executor_cost&&e.jsxs("div",{className:"mt-3 p-2 bg-white rounded-lg border border-amber-300",children:[e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:"text-amber-700 font-medium",children:":"}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-orange-600 font-bold",children:[s.executor_paid_total?.toLocaleString()||0,""]}),e.jsxs("span",{className:"text-gray-500",children:[" / ",s.executor_cost?.toLocaleString()||0,""]})]})]}),s.executor_cost&&s.executor_paid_total&&s.executor_cost>s.executor_paid_total&&e.jsxs("div",{className:"text-xs text-amber-700 mt-1",children:[": ",e.jsxs("strong",{children:[(s.executor_cost-s.executor_paid_total).toLocaleString(),""]})]})]}),m&&e.jsxs("button",{onClick:()=>m(s.id),className:"w-full mt-3 px-3 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg transition-all text-xs font-semibold flex items-center justify-center gap-2",children:[e.jsx(zL,{className:"w-3 h-3"})," "]})]}):e.jsx("div",{className:"px-5 py-3 border-b border-gray-200",children:e.jsxs("button",{onClick:()=>h?.(s.id),className:"w-full px-3 py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-purple-500 hover:text-purple-600 transition-all text-sm font-semibold flex items-center justify-center gap-2",children:[e.jsx(xN,{className:"w-4 h-4"})," "]})}),e.jsxs("div",{className:"px-5 py-4 grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:""}),e.jsx("div",{className:"text-sm font-bold text-gray-900",children:s.complexity==="simple"?" ":s.complexity==="medium"?" ":s.complexity==="complex"?" ":s.complexity==="premium"?" ":s.complexity})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:""}),e.jsxs("div",{className:"text-lg font-bold text-purple-600",children:[s.estimated_cost?.toLocaleString()||0,""]})]})]}),e.jsxs("div",{className:"px-5 py-3 bg-gray-50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-600 uppercase",children:""}),e.jsxs("span",{className:"text-xs font-bold text-purple-600",children:[f,"%"]})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full bg-gradient-to-r ${p} transition-all duration-500 rounded-full`,style:{width:`${f}%`}})})]}),e.jsxs("div",{className:"px-5 py-3 bg-yellow-50 border-t border-yellow-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-xs font-semibold text-yellow-700 uppercase",children:""}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"font-bold text-green-600",children:[s.client_paid_total?.toLocaleString()||0,""]}),e.jsxs("span",{className:"text-gray-500",children:[" / ",s.estimated_cost?.toLocaleString()||0,""]})]})]}),s.payments&&s.payments.length>0&&e.jsx("div",{className:"space-y-1 mb-2",children:s.payments.slice(-3).map((v,y)=>e.jsxs("div",{className:"flex justify-between text-xs bg-white p-2 rounded border border-yellow-300",children:[e.jsx("span",{className:"text-gray-600",children:v.payment_type||""}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-green-600 font-bold",children:["+",v.amount?.toLocaleString(),""]}),e.jsx("span",{className:"text-gray-400 ml-2",children:v.payment_date?.slice(0,10)})]})]},y))}),e.jsxs("button",{onClick:()=>o(s.id),className:"w-full px-3 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg transition-all text-xs font-semibold flex items-center justify-center gap-2",children:[e.jsx(Ge,{className:"w-3 h-3"})," "]})]}),s.deadline&&e.jsxs("div",{className:"px-5 py-2 bg-orange-50 border-t border-orange-200 flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-orange-700",children:" :"}),e.jsx("span",{className:"text-xs font-bold text-orange-900",children:s.deadline.slice(0,10)})]}),e.jsxs("div",{className:"px-5 py-4 bg-gray-50 border-t border-gray-200 flex gap-2 flex-wrap",children:[e.jsxs("button",{onClick:()=>t(s.id),className:"flex-1 min-w-[80px] px-3 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-all text-xs font-semibold flex items-center justify-center gap-1",children:[e.jsx(Ft,{className:"w-3 h-3"}),""]}),e.jsxs("button",{onClick:()=>r(s.id),className:"flex-1 min-w-[80px] px-3 py-2 bg-cyan-100 text-cyan-700 rounded-lg hover:bg-cyan-200 transition-all text-xs font-semibold flex items-center justify-center gap-1",children:[e.jsx(kn,{className:"w-3 h-3"}),""]}),(s.status==="testing"||s.status==="in_progress")&&c&&e.jsxs("button",{onClick:()=>c(s.id),className:"flex-1 min-w-[80px] px-3 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-all text-xs font-semibold flex items-center justify-center gap-1",children:[e.jsx(it,{className:"w-3 h-3"}),""]}),s.chat&&e.jsxs("button",{className:"flex-1 min-w-[80px] px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-all text-xs font-semibold flex items-center justify-center gap-1",children:[e.jsx(Ha,{className:"w-3 h-3"}),""]}),s.user?.telegram_id&&e.jsxs("button",{onClick:()=>i(s.user.telegram_id),className:"flex-1 min-w-[80px] px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-all text-xs font-semibold flex items-center justify-center gap-1",children:[e.jsx(Ha,{className:"w-3 h-3"}),""]}),u&&e.jsxs("button",{onClick:()=>u(s.id),className:"flex-1 min-w-[80px] px-3 py-2 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition-all text-xs font-semibold flex items-center justify-center gap-1",children:[e.jsx(Tr,{className:"w-3 h-3"}),""]}),e.jsxs("button",{onClick:()=>n(s.id),className:"flex-1 min-w-[80px] px-3 py-2 bg-amber-100 text-amber-700 rounded-lg hover:bg-amber-200 transition-all text-xs font-semibold flex items-center justify-center gap-1",children:[e.jsx(_l,{className:"w-3 h-3"}),s.is_archived?"":""]}),e.jsxs("button",{onClick:()=>a(s.id),className:"flex-1 min-w-[80px] px-3 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-all text-xs font-semibold flex items-center justify-center gap-1",children:[e.jsx(Xe,{className:"w-3 h-3"}),""]})]}),e.jsxs("div",{className:"px-5 py-2 bg-gray-100 border-t border-gray-200 flex items-center gap-2 text-xs text-gray-500",children:[e.jsx("span",{children:" :"}),e.jsx("span",{className:"font-medium",children:s.created_at?.slice(0,10)})]})]})},Dq=({isOpen:s,onClose:t,onSuccess:r})=>{const[a,n]=w.useState(""),[i,o]=w.useState("website"),[c,u]=w.useState(""),[h,m]=w.useState(""),[f,p]=w.useState("medium"),[j,g]=w.useState("medium"),[v,y]=w.useState(""),[N,S]=w.useState(""),[k,_]=w.useState(""),[T,E]=w.useState(""),[z,M]=w.useState(""),[C,A]=w.useState(""),[Z,I]=w.useState(""),[V,R]=w.useState(""),[q,J]=w.useState(!1),[se,Y]=w.useState(""),[ee,te]=w.useState(""),[K,$]=w.useState(""),[le,ie]=w.useState(""),[oe,de]=w.useState([]),[U,F]=w.useState([]),[Q,W]=w.useState(!1),[H,re]=w.useState(!1),he=w.useRef(null);w.useEffect(()=>{s&&G()},[s]),w.useEffect(()=>{if(s){const B=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${B}px`,document.body.style.width="100%",document.body.style.overflow="hidden",he.current&&(he.current.scrollTop=0)}else{const B=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(B||"0")*-1)}return()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow=""}},[s]);const G=async()=>{try{W(!0);const[B,ne]=await Promise.all([ps.getClients(),ps.getExecutors()]);de(B.clients||[]),F(ne.executors||[])}catch(B){console.error("Error loading data:",B)}finally{W(!1)}},ce=B=>{m(B),J(B==="new")},X=()=>{n(""),o("website"),u(""),m(""),p("medium"),g("medium"),y(""),S(""),_(""),E(""),M(""),A(""),I(""),R(""),J(!1),Y(""),te(""),$(""),ie("")},O=async B=>{if(B.preventDefault(),!a||!h&&!q){alert(",    ");return}try{re(!0);const ne={title:a,project_type:i,description:c,complexity:f,priority:j,estimated_cost:v?Number(v):0,executor_cost:N?Number(N):0,estimated_hours:k?Number(k):0,prepayment_amount:T?Number(T):0,assigned_executor_id:z?Number(z):null,deadline:C||null,technical_requirements:Z,additional_requirements:V};q?(ne.client_name=se,ne.client_phone=ee,ne.client_telegram_id=le||null):ne.user_id=Number(h),await ps.createProject(ne),alert("  !"),X(),r(),window.dispatchEvent(new Event("dashboardUpdate")),t()}catch(ne){console.error("Error creating project:",ne),alert("   ")}finally{re(!1)}},L=()=>{X(),t()};return s?e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        .modal-content-scrollable {
          scrollbar-width: none !important;
          -ms-overflow-style: none !important;
        }
        .modal-content-scrollable::-webkit-scrollbar {
          display: none !important;
          width: 0 !important;
          height: 0 !important;
        }
      `}),e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-2",style:{overflow:"hidden"},children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[95vh] flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 py-3 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"  "}),e.jsx("p",{className:"text-purple-100 text-xs mt-0.5",children:"   "})]}),e.jsx("button",{onClick:L,className:"p-1.5 hover:bg-white/20 rounded-full transition-all flex-shrink-0",disabled:H,type:"button",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:O,className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("div",{ref:he,className:"modal-content-scrollable px-4 py-3 overflow-y-auto flex-1",children:Q?e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"text-gray-600",children:"..."})}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1.5",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a,onChange:B=>n(B.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",placeholder:":   ",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1.5",children:" "}),e.jsxs("select",{value:i,onChange:B=>o(B.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"website",children:"-"}),e.jsx("option",{value:"bot",children:"Telegram-"}),e.jsx("option",{value:"telegram_mini_app",children:"Telegram Mini App"}),e.jsx("option",{value:"app",children:" "}),e.jsx("option",{value:"other",children:""})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:c,onChange:B=>u(B.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500",rows:3,placeholder:",    ...",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:h,onChange:B=>ce(B.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500",required:!q,children:[e.jsx("option",{value:"",children:" ..."}),e.jsx("option",{value:"new",children:"+   "}),oe.map(B=>e.jsxs("option",{value:B.id,children:[B.first_name," ",B.username?`(@${B.username})`:""]},B.id))]})]}),q&&e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border-2 border-blue-200 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(st,{className:"w-5 h-5 text-blue-600"}),e.jsx("h4",{className:"font-semibold text-blue-900",children:"  "})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:se,onChange:B=>Y(B.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:" ",required:q})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"text",value:ee,onChange:B=>te(B.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"+7 900 000 00 00"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Telegram Username ( )"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 font-semibold",children:"@"}),e.jsx("input",{type:"text",value:K,onChange:B=>$(B.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"username"})]}),e.jsx("small",{className:"text-gray-500 mt-1 block",children:"    /start"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Telegram ID  ()"}),e.jsx("input",{type:"text",value:le,onChange:B=>ie(B.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"123456789"}),e.jsx("small",{className:"text-gray-500 mt-1 block",children:"  username "})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:f,onChange:B=>p(B.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"simple",children:" "}),e.jsx("option",{value:"medium",children:" "}),e.jsx("option",{value:"complex",children:" "}),e.jsx("option",{value:"premium",children:" "})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:j,onChange:B=>g(B.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"medium",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"urgent",children:""})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" ()"}),e.jsx("input",{type:"number",value:v,onChange:B=>y(B.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500",min:"0",step:"1000",placeholder:"50000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"   ()"}),e.jsx("input",{type:"number",value:N,onChange:B=>S(B.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500",min:"0",step:"500",placeholder:"30000"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" ()"}),e.jsx("input",{type:"number",value:k,onChange:B=>_(B.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500",min:"1",step:"1",placeholder:"40"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" ()"}),e.jsx("input",{type:"number",value:T,onChange:B=>E(B.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500",min:"0",step:"1000",placeholder:"0"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsxs("select",{value:z,onChange:B=>M(B.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"",children:" "}),U.map(B=>e.jsx("option",{value:B.id,children:B.username},B.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"date",value:C,onChange:B=>A(B.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("textarea",{value:Z,onChange:B=>I(B.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500",rows:3,placeholder:"  ..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("textarea",{value:V,onChange:B=>R(B.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500",rows:2,placeholder:"   ..."})]})]})}),e.jsxs("div",{className:"flex gap-2 px-4 py-2.5 border-t border-gray-200 bg-white flex-shrink-0",children:[e.jsx("button",{type:"button",onClick:L,className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-semibold hover:bg-gray-200 transition-all text-sm",disabled:H,children:""}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg font-semibold hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm",disabled:H,children:H?e.jsx(e.Fragment,{children:"..."}):e.jsxs(e.Fragment,{children:[e.jsx(Ve,{className:"w-4 h-4"}),""]})})]})]})]})})]}):null},Rq=({projectId:s,isOpen:t,onClose:r,onSuccess:a})=>{const[n,i]=w.useState(""),[o,c]=w.useState("website"),[u,h]=w.useState(""),[m,f]=w.useState("new"),[p,j]=w.useState("medium"),[g,v]=w.useState("medium"),[y,N]=w.useState(""),[S,k]=w.useState(""),[_,T]=w.useState(""),[E,z]=w.useState(""),[M,C]=w.useState(""),[A,Z]=w.useState(""),[I,V]=w.useState(""),[R,q]=w.useState(""),[J,se]=w.useState(""),[Y,ee]=w.useState(""),[te,K]=w.useState([]),[$,le]=w.useState(!1),[ie,oe]=w.useState(!1),de=w.useRef(null);w.useEffect(()=>{t&&s&&U()},[t,s]),w.useEffect(()=>(t?(document.body.style.overflow="hidden",de.current&&(de.current.scrollTop=0)):document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]);const U=async()=>{if(s)try{le(!0);const[H,re]=await Promise.all([ps.getProject(s),ps.getExecutors()]),he=H.project;i(he.title||""),c(he.project_type||"website"),h(he.description||""),f(he.status||"new"),j(he.complexity||"medium"),v(he.priority||"medium"),N(he.estimated_cost?.toString()||""),k(he.executor_cost?.toString()||""),T(he.final_cost?.toString()||""),z(he.estimated_hours?.toString()||""),C(he.prepayment_amount?.toString()||""),Z(he.client_paid_total?.toString()||""),V(he.executor_paid_total?.toString()||""),q(he.assigned_executor_id?.toString()||""),se(he.deadline?he.deadline.slice(0,16):""),ee(he.project_metadata?.test_link||""),K(re.executors||[])}catch(H){console.error("Error loading project data:",H),r()}finally{le(!1)}},F=()=>{i(""),c("website"),h(""),f("new"),j("medium"),v("medium"),N(""),k(""),T(""),z(""),C(""),Z(""),V(""),q(""),se(""),ee("")},Q=async H=>{if(H.preventDefault(),!(!n||!s))try{oe(!0);const re={title:n,project_type:o,description:u,status:m,complexity:p,priority:g,estimated_cost:y?Number(y):0,executor_cost:S?Number(S):0,final_cost:_?Number(_):0,estimated_hours:E?Number(E):0,prepayment_amount:M?Number(M):0,client_paid_total:A?Number(A):0,executor_paid_total:I?Number(I):0,assigned_executor_id:R?Number(R):null,deadline:J||null,project_metadata:{test_link:Y||null}};await ps.updateProject(s,re),F(),a(),r()}catch(re){console.error("Error updating project:",re)}finally{oe(!1)}},W=()=>{F(),r()};return t?e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        .modal-content-scrollable {
          scrollbar-width: none !important;
          -ms-overflow-style: none !important;
        }
        .modal-content-scrollable::-webkit-scrollbar {
          display: none !important;
          width: 0 !important;
          height: 0 !important;
        }
      `}),e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-2",style:{overflow:"hidden"},children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[95vh] flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-cyan-600 to-blue-600 text-white px-4 py-3 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold",children:["  #",s]}),e.jsx("p",{className:"text-cyan-100 text-xs mt-0.5",children:"   "})]}),e.jsx("button",{onClick:W,className:"p-1.5 hover:bg-white/20 rounded-full transition-all flex-shrink-0",disabled:ie,type:"button",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:Q,className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("div",{ref:de,className:"modal-content-scrollable px-4 py-3 overflow-y-auto flex-1",children:$?e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"text-gray-600",children:"..."})}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:n,onChange:H=>i(H.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsxs("select",{value:o,onChange:H=>c(H.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[e.jsx("option",{value:"website",children:"-"}),e.jsx("option",{value:"bot",children:"Telegram-"}),e.jsx("option",{value:"app",children:" "}),e.jsx("option",{value:"other",children:""})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("textarea",{value:u,onChange:H=>h(H.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:m,onChange:H=>f(H.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[e.jsx("option",{value:"new",children:" "}),e.jsx("option",{value:"review",children:"  "}),e.jsx("option",{value:"accepted",children:" "}),e.jsx("option",{value:"in_progress",children:"  "}),e.jsx("option",{value:"testing",children:" "}),e.jsx("option",{value:"completed",children:" "}),e.jsx("option",{value:"cancelled",children:" "})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:p,onChange:H=>j(H.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[e.jsx("option",{value:"simple",children:" "}),e.jsx("option",{value:"medium",children:" "}),e.jsx("option",{value:"complex",children:" "}),e.jsx("option",{value:"premium",children:" "})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:g,onChange:H=>v(H.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"normal",children:""}),e.jsx("option",{value:"medium",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"urgent",children:""})]})]})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-xl border-2 border-orange-200",children:[e.jsx("h4",{className:"font-semibold text-orange-900 mb-3",children:" "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  ()"}),e.jsx("input",{type:"number",value:y,onChange:H=>N(H.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500",min:"0",step:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"   ()"}),e.jsx("input",{type:"number",value:S,onChange:H=>k(H.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500",min:"0",step:"100"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" ()"}),e.jsx("input",{type:"number",value:M,onChange:H=>C(H.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500",min:"0",step:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  ()"}),e.jsx("input",{type:"number",value:A,onChange:H=>Z(H.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500",min:"0",step:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  ()"}),e.jsx("input",{type:"number",value:I,onChange:H=>V(H.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500",min:"0",step:"100"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  ()"}),e.jsx("input",{type:"number",value:_,onChange:H=>T(H.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500",min:"0",step:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  ()"}),e.jsx("input",{type:"number",value:E,onChange:H=>z(H.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500",min:"1"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsxs("select",{value:R,onChange:H=>q(H.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[e.jsx("option",{value:"",children:" "}),te.map(H=>e.jsx("option",{value:H.id,children:H.username},H.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"datetime-local",value:J,onChange:H=>se(H.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["    "," ",e.jsx("small",{className:"text-gray-500",children:"()"})]}),e.jsx("input",{type:"text",value:Y,onChange:H=>ee(H.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"https://t.me/your_bot  @your_bot"}),e.jsx("small",{className:"text-gray-500 mt-1 block",children:"   username  (: https://t.me/test_bot  @test_bot)"})]})]})}),e.jsxs("div",{className:"flex gap-2 px-4 py-2.5 border-t border-gray-200 bg-white flex-shrink-0",children:[e.jsx("button",{type:"button",onClick:W,className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-semibold hover:bg-gray-200 transition-all text-sm",disabled:ie,children:""}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-gradient-to-r from-cyan-600 to-blue-600 text-white rounded-lg font-semibold hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm",disabled:ie,children:ie?e.jsx(e.Fragment,{children:"..."}):e.jsxs(e.Fragment,{children:[e.jsx(ka,{className:"w-4 h-4"}),""]})})]})]})]})})]}):null},Mq=s=>({new:" ",review:" ",accepted:" ",in_progress:"  ",testing:" ",completed:" ",cancelled:" ",on_hold:" "})[s]||s,Oq=s=>({new:"from-blue-400 to-blue-600",review:"from-orange-400 to-orange-600",accepted:"from-purple-400 to-purple-600",in_progress:"from-yellow-400 to-yellow-600",testing:"from-green-400 to-green-600",completed:"from-green-500 to-green-700",cancelled:"from-red-400 to-red-600",on_hold:"from-gray-400 to-gray-600"})[s]||"from-gray-400 to-gray-600",Lq=s=>({new:10,review:25,accepted:40,in_progress:60,testing:80,completed:100,cancelled:0,on_hold:0})[s]||0,Pq=s=>({simple:" ",medium:" ",complex:" ",premium:" "})[s]||s,Bq=s=>({low:" ",medium:" ",high:" ",urgent:" "})[s]||s,kk=s=>s.split(" ").map(t=>t[0]).join("").toUpperCase().slice(0,2),Fc=async(s,t)=>{try{await navigator.clipboard.writeText(s),alert(`${t}    `)}catch{alert(" ")}},Fq=({isOpen:s,onClose:t,onEdit:r,onContact:a,project:n})=>{const[i,o]=w.useState(!1),c=w.useRef(null);if(w.useEffect(()=>{if(s){const p=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${p}px`,document.body.style.width="100%",document.body.style.overflow="hidden",c.current&&(c.current.scrollTop=0)}else{const p=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(p||"0")*-1)}return()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow=""}},[s]),!s||!n)return null;const u=Lq(n.status),h=Oq(n.status),m=Mq(n.status),f=()=>{const p=[];return n.description&&p.push(n.description),n.technical_requirements&&p.push(`** :**
`+n.technical_requirements),n.additional_requirements&&p.push(`** :**
`+n.additional_requirements),p.join(`

`)||" "};return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        .modal-content-scrollable {
          scrollbar-width: none !important;
          -ms-overflow-style: none !important;
        }
        .modal-content-scrollable::-webkit-scrollbar {
          display: none !important;
          width: 0 !important;
          height: 0 !important;
        }
      `}),e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-2",style:{overflow:"hidden"},children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-5xl w-full max-h-[95vh] flex flex-col overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 py-3 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:n.title}),e.jsxs("p",{className:"text-purple-100 text-xs mt-0.5",children:[" #",n.id,"  ",m]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-1.5 transition-colors flex-shrink-0",children:e.jsx(Ae,{className:"w-5 h-5"})})]})}),e.jsx("div",{ref:c,className:"modal-content-scrollable px-4 py-3 overflow-y-auto flex-1",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-3",children:[e.jsxs("div",{className:"bg-white border-l-4 border-blue-500 rounded-lg shadow-md overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 flex items-center justify-between border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"w-5 h-5 text-blue-600"}),e.jsx("strong",{className:"text-gray-800",children:" "})]}),e.jsx("button",{type:"button",onClick:()=>o(!i),className:"text-blue-600 hover:text-blue-700 flex items-center gap-1 text-sm font-semibold",children:i?e.jsxs(e.Fragment,{children:[e.jsx(vp,{className:"w-4 h-4"}),""]}):e.jsxs(e.Fragment,{children:[e.jsx(_i,{className:"w-4 h-4"}),""]})})]}),e.jsx("div",{className:`px-4 py-3 bg-white transition-all duration-300 ${i?"max-h-none":"max-h-[200px] overflow-hidden"}`,children:e.jsx("div",{className:"prose prose-sm max-w-none text-gray-700 whitespace-pre-wrap",children:f()})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(it,{className:"w-4 h-4 text-gray-500"}),e.jsx("div",{className:"text-xs text-gray-500 font-semibold uppercase",children:""})]}),e.jsx("div",{className:`px-3 py-1.5 rounded-lg bg-gradient-to-r ${h} text-white text-sm font-bold inline-block`,children:m})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(NB,{className:"w-4 h-4 text-gray-500"}),e.jsx("div",{className:"text-xs text-gray-500 font-semibold uppercase",children:""})]}),e.jsx("div",{className:"text-sm font-bold text-gray-900",children:Pq(n.complexity)})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Fr,{className:"w-4 h-4 text-gray-500"}),e.jsx("div",{className:"text-xs text-gray-500 font-semibold uppercase",children:""})]}),e.jsx("div",{className:"text-sm font-bold text-gray-900",children:Bq(n.priority)})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ge,{className:"w-4 h-4 text-gray-500"}),e.jsx("div",{className:"text-xs text-gray-500 font-semibold uppercase",children:""})]}),e.jsxs("div",{className:"text-lg font-bold text-purple-600",children:[n.estimated_cost?.toLocaleString()||0,""]})]}),n.final_cost&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ge,{className:"w-4 h-4 text-gray-500"}),e.jsx("div",{className:"text-xs text-gray-500 font-semibold uppercase",children:" "})]}),e.jsxs("div",{className:"text-lg font-bold text-green-600",children:[n.final_cost.toLocaleString(),""]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(pt,{className:"w-4 h-4 text-gray-500"}),e.jsx("div",{className:"text-xs text-gray-500 font-semibold uppercase",children:" "})]}),e.jsx("div",{className:"text-sm font-bold text-gray-900",children:n.created_at?.slice(0,10)})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ie,{className:"w-4 h-4 text-gray-500"}),e.jsx("div",{className:"text-xs text-gray-500 font-semibold uppercase",children:" "})]}),e.jsx("div",{className:"text-sm font-bold text-gray-900",children:n.project_type||" "})]}),n.deadline&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 border border-orange-200 bg-orange-50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(pt,{className:"w-4 h-4 text-orange-600"}),e.jsx("div",{className:"text-xs text-orange-700 font-semibold uppercase",children:""})]}),e.jsx("div",{className:"text-sm font-bold text-orange-900",children:n.deadline.slice(0,10)})]}),n.estimated_hours&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ue,{className:"w-4 h-4 text-gray-500"}),e.jsx("div",{className:"text-xs text-gray-500 font-semibold uppercase",children:" "})]}),e.jsxs("div",{className:"text-sm font-bold text-gray-900",children:[n.estimated_hours,""]})]}),n.actual_hours&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ue,{className:"w-4 h-4 text-gray-500"}),e.jsx("div",{className:"text-xs text-gray-500 font-semibold uppercase",children:" "})]}),e.jsxs("div",{className:"text-sm font-bold text-gray-900",children:[n.actual_hours,""]})]})]}),n.assigned_to&&e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-lg shadow-md p-5 border border-orange-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(st,{className:"w-5 h-5 text-orange-600"}),e.jsx("h4",{className:"text-sm font-bold text-gray-800 uppercase",children:""})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-orange-400 to-red-600 flex items-center justify-center text-white font-bold text-sm shadow-md",children:kk(n.assigned_to.username||"E")}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-900",children:n.assigned_to.username}),e.jsxs("div",{className:"text-xs text-gray-600",children:["ID: ",n.assigned_to.id]})]})]}),n.executor_cost&&e.jsxs("div",{className:"mt-3 p-3 bg-white rounded-lg border border-orange-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm text-orange-700 font-semibold",children:" :"}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-orange-600 font-bold",children:[n.executor_paid_total?.toLocaleString()||0,""]}),e.jsxs("span",{className:"text-gray-500",children:[" / ",n.executor_cost?.toLocaleString()||0,""]})]})]}),n.executor_cost>(n.executor_paid_total||0)&&e.jsxs("div",{className:"text-sm text-amber-700",children:[": ",e.jsxs("strong",{children:[(n.executor_cost-(n.executor_paid_total||0)).toLocaleString(),""]})]})]})]}),n.user&&e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg shadow-md p-5 border border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(st,{className:"w-5 h-5 text-purple-600"}),e.jsx("h4",{className:"text-sm font-bold text-gray-800 uppercase",children:""})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-purple-400 to-pink-600 flex items-center justify-center text-white font-bold text-sm shadow-md",children:kk(n.user.first_name||"U")}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-900",children:n.user.first_name||""}),e.jsxs("div",{className:"text-sm text-gray-600",children:["@",n.user.username||""]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Telegram ID: ",n.user.telegram_id]})]})]}),n.user.telegram_id&&e.jsxs("button",{onClick:()=>a(n.user.telegram_id),className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-all text-sm font-semibold flex items-center gap-2",children:[e.jsx(Ha,{className:"w-4 h-4"}),""]})]})]}),n.project_metadata&&e.jsxs("div",{className:"bg-gray-50 rounded-lg shadow-md p-5 border border-gray-300",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-800 uppercase mb-3",children:" "}),e.jsxs("div",{className:"space-y-2",children:[n.project_metadata.bot_token&&e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 font-semibold",children:"Bot Token"}),e.jsxs("div",{className:"text-sm font-mono text-gray-900",children:[n.project_metadata.bot_token.slice(0,20),"..."]})]}),e.jsx("button",{onClick:()=>Fc(n.project_metadata.bot_token,"Bot Token"),className:"text-blue-600 hover:text-blue-700 p-2",children:e.jsx(Ks,{className:"w-4 h-4"})})]}),n.project_metadata.bot_username&&e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 font-semibold",children:"Bot Username"}),e.jsxs("div",{className:"text-sm font-mono text-gray-900",children:["@",n.project_metadata.bot_username]})]}),e.jsx("button",{onClick:()=>Fc(n.project_metadata.bot_username,"Bot Username"),className:"text-blue-600 hover:text-blue-700 p-2",children:e.jsx(Ks,{className:"w-4 h-4"})})]}),n.project_metadata.telegram_channel_id&&e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 font-semibold",children:"Telegram Channel ID"}),e.jsx("div",{className:"text-sm font-mono text-gray-900",children:n.project_metadata.telegram_channel_id})]}),e.jsx("button",{onClick:()=>Fc(n.project_metadata.telegram_channel_id,"Channel ID"),className:"text-blue-600 hover:text-blue-700 p-2",children:e.jsx(Ks,{className:"w-4 h-4"})})]}),n.project_metadata.timeweb_login&&e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 font-semibold",children:"Timeweb Login"}),e.jsx("div",{className:"text-sm font-mono text-gray-900",children:n.project_metadata.timeweb_login})]}),e.jsx("button",{onClick:()=>Fc(n.project_metadata.timeweb_login,"Timeweb Login"),className:"text-blue-600 hover:text-blue-700 p-2",children:e.jsx(Ks,{className:"w-4 h-4"})})]}),n.project_metadata.timeweb_password&&e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 font-semibold",children:"Timeweb Password"}),e.jsx("div",{className:"text-sm font-mono text-gray-900",children:""})]}),e.jsx("button",{onClick:()=>Fc(n.project_metadata.timeweb_password,"Timeweb Password"),className:"text-blue-600 hover:text-blue-700 p-2",children:e.jsx(Ks,{className:"w-4 h-4"})})]}),n.project_metadata.test_link&&e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-gray-500 font-semibold",children:" "}),e.jsx("a",{href:n.project_metadata.test_link,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline break-all",children:n.project_metadata.test_link})]}),e.jsx("button",{onClick:()=>Fc(n.project_metadata.test_link," "),className:"text-blue-600 hover:text-blue-700 p-2",children:e.jsx(Ks,{className:"w-4 h-4"})})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-5 border border-gray-200",children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-800 uppercase mb-4 flex items-center gap-2",children:[e.jsx(Fr,{className:"w-5 h-5 text-purple-600"})," "]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-600",children:""}),e.jsxs("span",{className:"text-2xl font-bold text-purple-600",children:[u,"%"]})]}),e.jsx("div",{className:"h-4 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full bg-gradient-to-r ${h} transition-all duration-500 rounded-full`,style:{width:`${u}%`}})}),e.jsx("div",{className:`px-4 py-2 rounded-lg bg-gradient-to-r ${h} text-white text-center font-bold text-sm`,children:m})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 rounded-lg shadow-md p-5 border border-yellow-200",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-800 uppercase mb-3",children:""}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:" :"}),e.jsxs("span",{className:"text-lg font-bold text-purple-600",children:[n.estimated_cost?.toLocaleString()||0,""]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:" :"}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:[n.client_paid_total?.toLocaleString()||0,""]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-yellow-300",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"  :"}),e.jsxs("span",{className:"text-lg font-bold text-orange-600",children:[((n.estimated_cost||0)-(n.client_paid_total||0)).toLocaleString(),""]})]})]})]}),n.payments&&n.payments.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-5 border border-gray-200",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-800 uppercase mb-3",children:" "}),e.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:n.payments.map((p,j)=>e.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-3 rounded-lg border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:p.payment_type||""}),e.jsx("div",{className:"text-xs text-gray-500",children:p.payment_date?.slice(0,10)})]}),e.jsxs("div",{className:"text-lg font-bold text-green-600",children:["+",p.amount?.toLocaleString(),""]})]},j))})]})]})]})}),e.jsxs("div",{className:"px-4 py-2.5 bg-gray-50 border-t border-gray-200 flex gap-2 flex-shrink-0",children:[e.jsxs("button",{type:"button",onClick:()=>r(n.id),className:"flex-1 px-4 py-2 bg-gradient-to-r from-cyan-600 to-blue-600 text-white rounded-lg hover:from-cyan-700 hover:to-blue-700 transition-all font-semibold flex items-center justify-center gap-2 text-sm",children:[e.jsx(kn,{className:"w-4 h-4"}),""]}),e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold text-sm",children:""})]})]})})]})},zq=s=>{const t=s.toLowerCase();return t.includes("image")||t.includes("jpg")||t.includes("png")||t.includes("gif")?e.jsx(tm,{className:"w-5 h-5 text-blue-600"}):t.includes("pdf")||t.includes("doc")||t.includes("txt")?e.jsx(Ie,{className:"w-5 h-5 text-red-600"}):t.includes("zip")||t.includes("rar")||t.includes("7z")?e.jsx(_l,{className:"w-5 h-5 text-orange-600"}):e.jsx(Tr,{className:"w-5 h-5 text-gray-600"})},Iq=s=>{if(s===0)return"0 Bytes";const t=1024,r=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(s)/Math.log(t));return Math.round(s/Math.pow(t,a)*100)/100+" "+r[a]},$q=s=>new Date(s).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),Uq=({isOpen:s,onClose:t,projectId:r})=>{const[a,n]=w.useState([]),[i,o]=w.useState(!1),[c,u]=w.useState(!1),h=w.useRef(null),m=w.useRef(null);w.useEffect(()=>{if(s){const y=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${y}px`,document.body.style.width="100%",document.body.style.overflow="hidden",h.current&&(h.current.scrollTop=0),f()}else{const y=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(y||"0")*-1)}return()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow=""}},[s,r]);const f=async()=>{if(r)try{o(!0);const y=await ps.getProjectFiles(r);n(y||[])}catch(y){console.error("Error loading files:",y),alert("   ")}finally{o(!1)}},p=()=>{m.current?.click()},j=async y=>{const N=y.target.files?.[0];if(!(!N||!r))try{u(!0),await ps.uploadProjectFile(r,N),alert("  !"),await f()}catch(S){console.error("Error uploading file:",S),alert("   ")}finally{u(!1),m.current&&(m.current.value="")}},g=async y=>{if(r)try{const N=await ps.downloadProjectFile(r,y.id),S=window.URL.createObjectURL(N),k=document.createElement("a");k.href=S,k.download=y.filename,document.body.appendChild(k),k.click(),document.body.removeChild(k),window.URL.revokeObjectURL(S)}catch(N){console.error("Error downloading file:",N),alert("   ")}},v=async(y,N)=>{if(!(!r||!window.confirm(` ,     "${N}"?`)))try{await ps.deleteProjectFile(r,y),alert("  !"),await f()}catch(k){console.error("Error deleting file:",k),alert("   ")}};return!s||!r?null:e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        .modal-content-scrollable {
          scrollbar-width: none !important;
          -ms-overflow-style: none !important;
        }
        .modal-content-scrollable::-webkit-scrollbar {
          display: none !important;
          width: 0 !important;
          height: 0 !important;
        }
      `}),e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-2",style:{overflow:"hidden"},children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] flex flex-col overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-4 py-3 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsxs("p",{className:"text-indigo-100 text-xs mt-0.5",children:[" #",r]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-1.5 transition-colors flex-shrink-0",children:e.jsx(Ae,{className:"w-5 h-5"})})]})}),e.jsxs("div",{ref:h,className:"modal-content-scrollable px-4 py-3 overflow-y-auto flex-1",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{ref:m,type:"file",onChange:j,className:"hidden"}),e.jsxs("button",{onClick:p,disabled:c,className:"w-full px-4 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all font-semibold flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(fn,{className:"w-5 h-5"}),c?"...":" "]})]}),i?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:" ..."})]})}):a.length===0?e.jsxs("div",{className:"bg-gray-50 rounded-lg p-12 text-center",children:[e.jsx(Tr,{className:"w-16 h-16 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"  "}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"     "})]}):e.jsx("div",{className:"space-y-2",children:a.map(y=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:border-indigo-300 hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:zq(y.file_type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-semibold text-gray-900 truncate",children:y.filename}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Tr,{className:"w-3 h-3"}),Iq(y.file_size)]}),e.jsx("span",{children:""}),e.jsx("span",{children:$q(y.uploaded_at)})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsxs("button",{onClick:()=>g(y),className:"px-3 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-all text-sm font-semibold flex items-center gap-1",title:"",children:[e.jsx(wt,{className:"w-4 h-4"}),""]}),e.jsxs("button",{onClick:()=>v(y.id,y.filename),className:"px-3 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-all text-sm font-semibold flex items-center gap-1",title:"",children:[e.jsx(Xe,{className:"w-4 h-4"}),""]})]})]})},y.id))})]}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 border-t border-gray-200 flex gap-2 flex-shrink-0",children:e.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold text-sm",children:""})})]})})]})},Sk=[{value:"new",label:" ",color:"bg-blue-100 text-blue-800"},{value:"review",label:"  ",color:"bg-yellow-100 text-yellow-800"},{value:"accepted",label:" ",color:"bg-green-100 text-green-800"},{value:"in_progress",label:"  ",color:"bg-purple-100 text-purple-800"},{value:"testing",label:" ",color:"bg-orange-100 text-orange-800"},{value:"completed",label:" ",color:"bg-emerald-100 text-emerald-800"},{value:"cancelled",label:" ",color:"bg-red-100 text-red-800"},{value:"on_hold",label:" ",color:"bg-gray-100 text-gray-800"}],Vq=({isOpen:s,onClose:t,projectId:r,currentStatus:a,onStatusChanged:n})=>{const[i,o]=w.useState(""),[c,u]=w.useState(""),[h,m]=w.useState(!1),[f,p]=w.useState("");if(w.useEffect(()=>{s&&(o(""),u(""),p(""))},[s]),w.useEffect(()=>{s?document.body.style.overflow="hidden":document.body.style.overflow=""},[s]),!s||!r)return null;const j=Sk.find(y=>y.value===a),g=Sk.filter(y=>y.value!==a),v=async()=>{if(!i){p(",   ");return}m(!0),p("");try{const y=await fetch(`http://localhost:8001/admin/api/projects/${r}/status`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({status:i,comment:c||void 0})}),N=await y.json();y.ok?(n(),t()):p(N.message||"  ")}catch{p("   ")}finally{m(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"  "}),e.jsxs("p",{className:"text-purple-100 text-sm mt-1",children:[" #",r]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("div",{className:"flex items-center gap-2",children:j&&e.jsx("span",{className:`px-4 py-2 rounded-lg font-semibold text-sm ${j.color}`,children:j.label})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:g.map(y=>e.jsx("button",{type:"button",onClick:()=>o(y.value),className:`px-4 py-3 rounded-lg font-semibold text-sm transition-all border-2 ${i===y.value?"border-purple-500 ring-2 ring-purple-200 "+y.color:"border-gray-200 hover:border-purple-300 "+y.color}`,children:y.label},y.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:c,onChange:y=>u(y.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-purple-500 focus:ring-2 focus:ring-purple-200 outline-none transition-all resize-none",rows:4,placeholder:"     ()"})]}),f&&e.jsxs("div",{className:"flex items-start gap-2 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg",children:[e.jsx(qe,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-800",children:f})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex gap-3",children:[e.jsx("button",{type:"button",onClick:v,disabled:h||!i,className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:h?"...":" "}),e.jsx("button",{type:"button",onClick:t,disabled:h,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold disabled:opacity-50",children:""})]})]})})},Hq=({isOpen:s,onClose:t,projectId:r,currentExecutor:a,currentCost:n=0,onAssigned:i})=>{const[o,c]=w.useState([]),[u,h]=w.useState(null),[m,f]=w.useState(0),[p,j]=w.useState(!1),[g,v]=w.useState(!1),[y,N]=w.useState("");w.useEffect(()=>{s&&(h(a?.id||null),f(n||0),N(""),S())},[s,a,n]),w.useEffect(()=>{s?document.body.style.overflow="hidden":document.body.style.overflow=""},[s]);const S=async()=>{v(!0);try{const _=await ps.getExecutors(),T=_.executors||_.users||[];c(T)}catch{N("  ")}finally{v(!1)}},k=async()=>{if(!u){N(",  ");return}if(!r){N("  ID ");return}j(!0),N("");try{const _=await ps.updateProject(r,{assigned_executor_id:u,executor_cost:m||0});_.success?(i(),t()):N(_.message||"  ")}catch(_){console.error("Error assigning executor:",_),N(_.response?.data?.detail||"   ")}finally{j(!1)}};return!s||!r?null:e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-xl w-full overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(tt,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsxs("p",{className:"text-indigo-100 text-sm mt-1",children:[" #",r]})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[a&&e.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-500 rounded-lg p-4",children:[e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("span",{className:"font-semibold",children:" :"})," ",a.first_name]}),n>0&&e.jsxs("p",{className:"text-sm text-blue-900 mt-1",children:[e.jsx("span",{className:"font-semibold",children:" :"})," ",n.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),g?e.jsx("div",{className:"px-4 py-3 border-2 border-gray-200 rounded-lg text-gray-500 text-sm",children:" ..."}):e.jsxs("select",{value:u||"",onChange:_=>h(Number(_.target.value)||null),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",children:[e.jsx("option",{value:"",children:" ..."}),o.map(_=>{const T=_.first_name||_.full_name||_.username||" ",E=_.role||"";return e.jsxs("option",{value:_.id,children:[T," (",E,")"]},_.id)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"   ()"}),e.jsx("input",{type:"number",value:m,onChange:_=>f(Number(_.target.value)||0),min:"0",step:"100",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",placeholder:"  "}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"      "})]}),y&&e.jsxs("div",{className:"flex items-start gap-2 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg",children:[e.jsx(qe,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-800",children:y})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex gap-3",children:[e.jsx("button",{type:"button",onClick:k,disabled:p||!u,className:"flex-1 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:p?"...":" "}),e.jsx("button",{type:"button",onClick:t,disabled:p,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold disabled:opacity-50",children:""})]})]})})},qq=({isOpen:s,onClose:t,projectId:r,projectCost:a=0,paidTotal:n=0,onPaymentAdded:i})=>{const[o,c]=w.useState("prepayment"),[u,h]=w.useState(0),[m,f]=w.useState(""),[p,j]=w.useState(""),[g,v]=w.useState(!1),[y,N]=w.useState("");w.useEffect(()=>{if(s){const _=new Date().toISOString().split("T")[0];f(_),c("prepayment"),h(0),j(""),N("")}},[s]),w.useEffect(()=>{s?document.body.style.overflow="hidden":document.body.style.overflow=""},[s]);const S=async()=>{if(!u||u<=0){N(",   ");return}if(!r){N("  ID ");return}v(!0),N("");try{const T=await fetch(`/admin/api/projects/${r}/payments`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({payment_type:o,amount:u,payment_date:m,comment:p||void 0})}),E=await T.json();T.ok?(i(),t()):N(E.message||"  ")}catch{N("   ")}finally{v(!1)}};if(!s||!r)return null;const k=a-n;return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-xl w-full overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-600 text-white px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(lE,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsxs("p",{className:"text-emerald-100 text-sm mt-1",children:[" #",r]})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-500 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-blue-600 font-semibold mb-1",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:[a.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"bg-green-50 border-l-4 border-green-500 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-green-600 font-semibold mb-1",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-green-900",children:[n.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"bg-orange-50 border-l-4 border-orange-500 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-orange-600 font-semibold mb-1",children:""}),e.jsxs("p",{className:"text-2xl font-bold text-orange-900",children:[k.toLocaleString("ru-RU")," "]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:o,onChange:_=>c(_.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none transition-all",children:[e.jsx("option",{value:"prepayment",children:""}),e.jsx("option",{value:"partial",children:" "}),e.jsx("option",{value:"full",children:" "}),e.jsx("option",{value:"final",children:" "})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  () ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:u||"",onChange:_=>h(Number(_.target.value)||0),min:"0",step:"100",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none transition-all",placeholder:" "})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:m,onChange:_=>f(_.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:p,onChange:_=>j(_.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none transition-all resize-none",rows:3,placeholder:"    ()"})]}),y&&e.jsxs("div",{className:"flex items-start gap-2 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg",children:[e.jsx(qe,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-800",children:y})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex gap-3",children:[e.jsx("button",{type:"button",onClick:S,disabled:g||!u||u<=0,className:"flex-1 px-6 py-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-lg hover:from-emerald-700 hover:to-teal-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:g?"...":" "}),e.jsx("button",{type:"button",onClick:t,disabled:g,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold disabled:opacity-50",children:""})]})]})})},Wq=({message:s,type:t,onClose:r,duration:a=3e3})=>{w.useEffect(()=>{const o=setTimeout(()=>{r()},a);return()=>clearTimeout(o)},[a,r]);const n=()=>{switch(t){case"success":return e.jsx(it,{className:"w-5 h-5"});case"error":return e.jsx(qe,{className:"w-5 h-5"});case"warning":return e.jsx(qe,{className:"w-5 h-5"});default:return e.jsx(uE,{className:"w-5 h-5"})}},i=()=>{switch(t){case"success":return"bg-green-50 border-green-500 text-green-800";case"error":return"bg-red-50 border-red-500 text-red-800";case"warning":return"bg-yellow-50 border-yellow-500 text-yellow-800";default:return"bg-blue-50 border-blue-500 text-blue-800"}};return e.jsxs("div",{className:`flex items-start gap-3 p-4 rounded-lg shadow-lg border-l-4 ${i()} animate-slide-in-right min-w-[300px] max-w-md`,children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:n()}),e.jsx("p",{className:"flex-1 text-sm font-medium",children:s}),e.jsx("button",{onClick:r,className:"flex-shrink-0 hover:opacity-70 transition-opacity",children:e.jsx(Ae,{className:"w-4 h-4"})})]})},h1=({toasts:s,onRemove:t})=>e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        @keyframes slide-in-right {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
        .animate-slide-in-right {
          animation: slide-in-right 0.3s ease-out;
        }
      `}),e.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2",children:s.map(r=>e.jsx(Wq,{message:r.message,type:r.type,onClose:()=>t(r.id)},r.id))})]}),Yq=({isOpen:s,onClose:t,projectId:r,executorCost:a=0,executorPaidTotal:n=0,executorName:i="",onPaymentAdded:o})=>{const[c,u]=w.useState("stage"),[h,m]=w.useState(0),[f,p]=w.useState(""),[j,g]=w.useState(""),[v,y]=w.useState(!1),[N,S]=w.useState("");w.useEffect(()=>{if(s){const T=new Date().toISOString().split("T")[0];u("stage"),p(T),m(0),g(""),S("")}},[s]),w.useEffect(()=>{s?document.body.style.overflow="hidden":document.body.style.overflow=""},[s]);const k=async()=>{if(!h||h<=0){S(",   ");return}if(!r){S("  ID ");return}y(!0),S("");try{const T=await fetch(`http://localhost:8001/admin/api/projects/${r}/executor-payments`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({payment_type:c,amount:h,payment_date:f,comment:j||void 0})}),E=await T.json();T.ok?(o(),t()):S(E.message||"  ")}catch{S("   ")}finally{y(!1)}};if(!s||!r)return null;const _=a-n;return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-xl w-full overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-600 to-red-600 text-white px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fN,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-orange-100 text-sm mt-1",children:i})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-500 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-blue-600 font-semibold mb-1",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:[a.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"bg-green-50 border-l-4 border-green-500 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-green-600 font-semibold mb-1",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-green-900",children:[n.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"bg-orange-50 border-l-4 border-orange-500 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-orange-600 font-semibold mb-1",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-orange-900",children:[_.toLocaleString("ru-RU")," "]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:c,onChange:T=>u(T.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200 outline-none transition-all",children:[e.jsx("option",{value:"prepayment",children:""}),e.jsx("option",{value:"stage",children:" "}),e.jsx("option",{value:"final",children:" "}),e.jsx("option",{value:"bonus",children:""}),e.jsx("option",{value:"other",children:""})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  () ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:h||"",onChange:T=>m(Number(T.target.value)||0),min:"0",step:"100",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200 outline-none transition-all",placeholder:" "})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:f,onChange:T=>p(T.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200 outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:j,onChange:T=>g(T.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200 outline-none transition-all resize-none",rows:3,placeholder:"    ()"})]}),N&&e.jsxs("div",{className:"flex items-start gap-2 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg",children:[e.jsx(qe,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-800",children:N})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex gap-3",children:[e.jsx("button",{type:"button",onClick:k,disabled:v||!h||h<=0,className:"flex-1 px-6 py-3 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-lg hover:from-orange-700 hover:to-red-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:v?"...":" "}),e.jsx("button",{type:"button",onClick:t,disabled:v,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold disabled:opacity-50",children:""})]})]})})},Gq=({filters:s,onChange:t,onClear:r,executors:a=[],clients:n=[]})=>{const i=()=>{t({executorId:null,clientId:null,colorFilter:"",dateFrom:"",dateTo:"",hasPayment:"",hasOverdue:!1,noExecutor:!1,priceFrom:"",priceTo:""}),r?.()},o=s.executorId||s.clientId||s.colorFilter||s.dateFrom||s.dateTo||s.hasPayment||s.hasOverdue||s.noExecutor||s.priceFrom||s.priceTo;return e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{className:`px-4 py-2 rounded-xl font-medium transition-all flex items-center gap-2 ${o?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700"}`,children:[e.jsx(gr,{className:"w-4 h-4"}),"",o&&e.jsx("span",{className:"bg-white text-purple-600 dark:bg-gray-700 dark:text-purple-400 px-2 py-0.5 rounded-full text-xs font-bold",children:[s.executorId,s.clientId,s.colorFilter,s.dateFrom,s.hasPayment,s.hasOverdue,s.noExecutor,s.priceFrom].filter(Boolean).length})]}),e.jsxs("div",{className:"hidden group-hover:block absolute right-0 mt-2 w-96 bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 z-50",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:" "}),e.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:" ",children:e.jsx(Ae,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-4 space-y-4 max-h-[500px] overflow-y-auto",children:[a.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsxs("select",{value:s.executorId||"",onChange:c=>t({...s,executorId:c.target.value?Number(c.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"",children:" "}),a.map(c=>e.jsx("option",{value:c.id,children:c.username},c.id))]})]}),n.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsxs("select",{value:s.clientId||"",onChange:c=>t({...s,clientId:c.target.value?Number(c.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"",children:" "}),n.map(c=>e.jsxs("option",{value:c.id,children:[c.first_name," (@",c.username,")"]},c.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:" "}),e.jsxs("select",{value:s.colorFilter,onChange:c=>t({...s,colorFilter:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"default",children:" "}),e.jsx("option",{value:"green",children:" "}),e.jsx("option",{value:"yellow",children:" "}),e.jsx("option",{value:"red",children:" "})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:" "}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"date",value:s.dateFrom,onChange:c=>t({...s,dateFrom:c.target.value}),placeholder:"",className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none"}),e.jsx("input",{type:"date",value:s.dateTo,onChange:c=>t({...s,dateTo:c.target.value}),placeholder:"",className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsxs("select",{value:s.hasPayment,onChange:c=>t({...s,hasPayment:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"paid",children:" "}),e.jsx("option",{value:"unpaid",children:" "}),e.jsx("option",{value:"partially",children:" "}),e.jsx("option",{value:"fully",children:" "})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"  ()"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"number",value:s.priceFrom,onChange:c=>t({...s,priceFrom:c.target.value}),placeholder:"",min:"0",className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none"}),e.jsx("input",{type:"number",value:s.priceTo,onChange:c=>t({...s,priceTo:c.target.value}),placeholder:"",min:"0",className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300",children:" "}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.hasOverdue,onChange:c=>t({...s,hasOverdue:c.target.checked}),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:" "})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.noExecutor,onChange:c=>t({...s,noExecutor:c.target.checked}),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:" "})]})]})]})]})]})},X7=async s=>{try{if(navigator.clipboard&&window.isSecureContext)return await navigator.clipboard.writeText(s),!0;const t=document.createElement("textarea");t.value=s,t.style.position="fixed",t.style.left="-999999px",t.style.top="-999999px",document.body.appendChild(t),t.focus(),t.select();const r=document.execCommand("copy");return document.body.removeChild(t),r}catch(t){return console.error("Failed to copy:",t),!1}},Kq=s=>{const t=[` #${s.id}`,"",`: ${s.title}`,`: ${s.user?.first_name||" "} (@${s.user?.username||""})`,`: ${s.status}`,`: ${s.project_type||" "}`,`: ${s.complexity}`,"",":",`: ${s.estimated_cost?.toLocaleString("ru-RU")||0} `,` : ${s.client_paid_total?.toLocaleString("ru-RU")||0} `,`: ${((s.estimated_cost||0)-(s.client_paid_total||0)).toLocaleString("ru-RU")} `,"",` : ${s.executor_cost?.toLocaleString("ru-RU")||0} `,` : ${s.executor_paid_total?.toLocaleString("ru-RU")||0} `,"",":",`${s.description||" "}`];return s.deadline&&t.push("",`: ${s.deadline}`),s.assigned_to&&t.push(`: ${s.assigned_to.username}`),t.push("",`: ${s.created_at}`),t.join(`
`)},Xq=({isOpen:s,onClose:t,project:r,onShowToast:a})=>{const[n,i]=w.useState(!1);if(!s||!r)return null;const o=async()=>{const f=c(r);await X7(f)?a("    !","success"):a(" ","error")},c=f=>{const p=[];return p.push("="+"=".repeat(60)),p.push(`  -  #${f.id}`),p.push("="+"=".repeat(60)),p.push(""),p.push(` : ${f.title}`),p.push(` : ${f.user?.first_name||" "} (@${f.user?.username||""})`),p.push(` : ${f.project_type||" "}`),p.push(` : ${f.status}`),p.push(` : ${f.complexity}`),p.push(""),p.push("-"+"-".repeat(60)),p.push(" "),p.push("-"+"-".repeat(60)),p.push(` : ${(f.estimated_cost||0).toLocaleString("ru-RU")} `),p.push(` : ${(f.client_paid_total||0).toLocaleString("ru-RU")} `),p.push(`  : ${((f.estimated_cost||0)-(f.client_paid_total||0)).toLocaleString("ru-RU")} `),p.push(""),p.push(` : ${(f.executor_cost||0).toLocaleString("ru-RU")} `),p.push(` : ${(f.executor_paid_total||0).toLocaleString("ru-RU")} `),p.push(`: ${((f.client_paid_total||0)-(f.executor_paid_total||0)).toLocaleString("ru-RU")} `),p.push(""),f.deadline&&(p.push("-"+"-".repeat(60)),p.push(" "),p.push("-"+"-".repeat(60)),p.push(f.deadline),p.push("")),f.assigned_to&&(p.push("-"+"-".repeat(60)),p.push(" "),p.push("-"+"-".repeat(60)),p.push(f.assigned_to.username),p.push("")),p.push("-"+"-".repeat(60)),p.push("   "),p.push("-"+"-".repeat(60)),p.push(f.description||" "),p.push(""),f.project_metadata?.test_link&&(p.push("-"+"-".repeat(60)),p.push("  "),p.push("-"+"-".repeat(60)),p.push(f.project_metadata.test_link),p.push("")),p.push("-"+"-".repeat(60)),p.push(" "),p.push("-"+"-".repeat(60)),p.push(`: ${new Date(f.created_at).toLocaleString("ru-RU")}`),p.push(`: ${new Date(f.updated_at).toLocaleString("ru-RU")}`),p.push(""),p.push("="+"=".repeat(60)),p.join(`
`)},u=r.description?.split(`
`)||[],h=u.length>10,m=n||!h?r.description:u.slice(0,10).join(`
`)+`
...`;return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-blue-600 text-white px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ie,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsxs("p",{className:"text-indigo-100 text-sm mt-1",children:[" #",r.id," - ",r.title]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:o,className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors flex items-center gap-2",children:[e.jsx(Ks,{className:"w-4 h-4"}),""]}),e.jsx("button",{onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-500 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-blue-600 font-semibold mb-1",children:""}),e.jsx("p",{className:"text-sm font-bold text-blue-900",children:r.user?.first_name||" "}),e.jsxs("p",{className:"text-xs text-blue-700",children:["@",r.user?.username||""]})]}),e.jsxs("div",{className:"bg-purple-50 border-l-4 border-purple-500 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-purple-600 font-semibold mb-1",children:" "}),e.jsx("p",{className:"text-sm font-bold text-purple-900",children:r.project_type||" "})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 rounded-xl p-6 border border-emerald-200",children:[e.jsx("h4",{className:"font-bold text-emerald-900 mb-4 flex items-center gap-2",children:"  "}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-emerald-700 mb-1",children:""}),e.jsxs("p",{className:"text-xl font-bold text-emerald-900",children:[(r.estimated_cost||0).toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-emerald-700 mb-1",children:""}),e.jsxs("p",{className:"text-xl font-bold text-emerald-900",children:[(r.client_paid_total||0).toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-orange-700 mb-1",children:""}),e.jsxs("p",{className:"text-xl font-bold text-orange-900",children:[((r.estimated_cost||0)-(r.client_paid_total||0)).toLocaleString("ru-RU")," "]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:"   "}),e.jsx("pre",{className:"whitespace-pre-wrap font-sans text-sm text-gray-700 leading-relaxed",children:m||" "}),h&&e.jsx("button",{onClick:()=>i(!n),className:"mt-4 text-indigo-600 hover:text-indigo-700 font-semibold text-sm flex items-center gap-1",children:n?e.jsxs(e.Fragment,{children:[e.jsx(vp,{className:"w-4 h-4"}),""]}):e.jsxs(e.Fragment,{children:[e.jsx(_i,{className:"w-4 h-4"})," "]})})]}),(r.deadline||r.assigned_to||r.project_metadata?.test_link)&&e.jsxs("div",{className:"grid gap-4",children:[r.deadline&&e.jsxs("div",{className:"bg-orange-50 border-l-4 border-orange-500 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-orange-600 font-semibold mb-1",children:" "}),e.jsx("p",{className:"text-sm font-bold text-orange-900",children:r.deadline})]}),r.assigned_to&&e.jsxs("div",{className:"bg-violet-50 border-l-4 border-violet-500 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-violet-600 font-semibold mb-1",children:" "}),e.jsx("p",{className:"text-sm font-bold text-violet-900",children:r.assigned_to.username})]}),r.project_metadata?.test_link&&e.jsxs("div",{className:"bg-cyan-50 border-l-4 border-cyan-500 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-cyan-600 font-semibold mb-1",children:"  "}),e.jsx("a",{href:r.project_metadata.test_link,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-bold text-cyan-900 hover:underline",children:r.project_metadata.test_link})]})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:[e.jsxs("span",{children:[": ",new Date(r.created_at).toLocaleString("ru-RU")]}),e.jsx("span",{className:"mx-2",children:""}),e.jsxs("span",{children:[": ",new Date(r.updated_at).toLocaleString("ru-RU")]})]}),e.jsx("button",{onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})})},Zq=({selectedIds:s,onSelectAll:t,onDeselectAll:r,onBulkArchive:a,onBulkDelete:n,onBulkStatusChange:i,onBulkExport:o,totalCount:c})=>{const u=s.length>0,h=s.length===c&&c>0;return u?e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-blue-50 border-2 border-blue-200 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:h?r:t,className:"flex items-center gap-2 px-4 py-2 bg-white hover:bg-gray-50 rounded-lg transition-colors text-sm font-semibold text-blue-700 border border-blue-300",children:[h?e.jsx(Jj,{className:"w-4 h-4"}):e.jsx(ar,{className:"w-4 h-4"}),h?" ":`  (${c})`]}),e.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[": ",e.jsx("span",{className:"font-bold",children:s.length})]})]}),e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-4 py-2 bg-teal-600 hover:bg-teal-700 text-white rounded-lg transition-colors text-sm font-semibold",children:[e.jsx(rs,{className:"w-4 h-4"})," "]}),e.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white rounded-lg transition-colors text-sm font-semibold",children:[e.jsx(_l,{className:"w-4 h-4"})," "]}),e.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors text-sm font-semibold",children:[e.jsx(wt,{className:"w-4 h-4"}),""]}),e.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors text-sm font-semibold",children:[e.jsx(Xe,{className:"w-4 h-4"}),""]})]})]}):e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors text-sm font-medium text-gray-700",children:[e.jsx(Jj,{className:"w-4 h-4"})," "]})})},Qq=({groupBy:s,onGroupByChange:t})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:":"}),e.jsxs("select",{value:s,onChange:r=>t(r.target.value),className:"px-4 py-2 bg-white border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none text-sm font-medium",children:[e.jsx("option",{value:"none",children:" "}),e.jsx("option",{value:"status",children:" "}),e.jsx("option",{value:"executor",children:" "}),e.jsx("option",{value:"client",children:" "})]})]}),Ck=[{keys:["/"],description:"  ",category:""},{keys:["R"],description:"  ",category:""},{keys:["Esc"],description:"  ",category:""},{keys:["N"],description:"  ",category:""},{keys:["Ctrl","E"],description:" ",category:""},{keys:["Ctrl","A"],description:"  ",category:""},{keys:["Ctrl","P"],description:"  ",category:""},{keys:["F"],description:"  ",category:""},{keys:["Shift","C"],description:"  ",category:""},{keys:["G"],description:" ",category:""},{keys:["A"],description:"/ ",category:""},{keys:["?"],description:"  ",category:""}],Jq=({isOpen:s,onClose:t})=>{if(w.useEffect(()=>{if(s){const a=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${a}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const a=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(a||"0")*-1)}},[s]),w.useEffect(()=>{if(!s)return;const a=n=>{n.key==="Escape"&&t()};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[s,t]),!s)return null;const r=[...new Set(Ck.map(a=>a.category))];return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-slate-700 to-gray-800 text-white px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(jB,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-slate-300 text-sm mt-1",children:"   "})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6 max-h-[600px] overflow-y-auto",children:r.map(a=>e.jsxs("div",{className:"mb-6 last:mb-0",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-500 uppercase tracking-wider mb-3",children:a}),e.jsx("div",{className:"space-y-2",children:Ck.filter(n=>n.category===a).map((n,i)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"text-sm text-gray-700",children:n.description}),e.jsx("div",{className:"flex items-center gap-1",children:n.keys.map((o,c)=>e.jsxs("span",{className:"flex items-center",children:[e.jsx("kbd",{className:"px-3 py-1.5 bg-white border-2 border-gray-300 rounded-lg shadow-sm text-xs font-semibold text-gray-800 min-w-[2rem] text-center",children:o}),c<n.keys.length-1&&e.jsx("span",{className:"mx-1 text-gray-400 font-bold",children:"+"})]},c))})]},i))})]},a))}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:[" :  ",e.jsx("kbd",{className:"px-2 py-0.5 bg-white border border-gray-300 rounded text-xs",children:"?"}),"     "]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold text-sm",children:""})]})]})})},eW=({isOpen:s,onClose:t,onExport:r,projectCount:a})=>{const[n,i]=w.useState("csv"),[o,c]=w.useState("projects");w.useEffect(()=>{if(s){const m=new Date().toISOString().split("T")[0];c(`projects_${m}`),i("csv")}},[s]),w.useEffect(()=>{if(s){const m=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${m}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const m=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(m||"0")*-1)}},[s]);const u=()=>{r(n,o),t()};if(!s)return null;const h=[{value:"csv",icon:e.jsx(M4,{className:"w-6 h-6"}),name:"CSV",description:"  Excel/Google Sheets",extension:".csv"},{value:"excel",icon:e.jsx(M4,{className:"w-6 h-6"}),name:"Excel",description:" Microsoft Excel",extension:".xlsx"},{value:"json",icon:e.jsx(HP,{className:"w-6 h-6"}),name:"JSON",description:" API  ",extension:".json"},{value:"pdf",icon:e.jsx(Ie,{className:"w-6 h-6"}),name:"PDF/TXT",description:" ",extension:".txt"}];return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(wt,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsxs("p",{className:"text-blue-100 text-sm mt-1",children:["  : ",a]})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"  "}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:h.map(m=>e.jsxs("button",{type:"button",onClick:()=>i(m.value),className:`flex items-start gap-3 p-4 rounded-xl border-2 transition-all ${n===m.value?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"}`,children:[e.jsx("div",{className:`flex-shrink-0 ${n===m.value?"text-blue-600":"text-gray-400"}`,children:m.icon}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold text-gray-900",children:m.name}),e.jsx("span",{className:"text-xs text-gray-500 font-mono",children:m.extension})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:m.description})]}),n===m.value&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})})]},m.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:o,onChange:m=>c(m.target.value),className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all",placeholder:"  "}),e.jsx("span",{className:"text-sm text-gray-500 font-mono",children:h.find(m=>m.value===n)?.extension})]})]}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("span",{className:"font-semibold",children:" :"}),"     : , , , ,   ."]})})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex gap-3",children:[e.jsxs("button",{type:"button",onClick:u,disabled:!o.trim(),className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(wt,{className:"w-5 h-5"}),""]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})})},tW=[{name:"",value:"#3B82F6"},{name:"",value:"#10B981"},{name:"",value:"#F59E0B"},{name:"",value:"#EF4444"},{name:"",value:"#8B5CF6"},{name:"",value:"#EC4899"},{name:"",value:"#6366F1"},{name:"",value:"#6B7280"}],sW=({isOpen:s,onClose:t,onStatusesChanged:r})=>{const[a,n]=w.useState([]),[i,o]=w.useState(!1),[c,u]=w.useState(""),[h,m]=w.useState(null),[f,p]=w.useState({name:"",color:"#3B82F6"}),[j,g]=w.useState(!1);w.useEffect(()=>{s&&(v(),u(""),g(!1),m(null))},[s]),w.useEffect(()=>{if(s){const k=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${k}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const k=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(k||"0")*-1)}},[s]);const v=async()=>{o(!0);try{const _=await(await fetch("http://localhost:8001/admin/api/statuses",{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).json();n(_.statuses||[])}catch{u("  ")}finally{o(!1)}},y=async()=>{if(!f.name.trim()){u("  ");return}try{const k=await fetch("http://localhost:8001/admin/api/statuses",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(f)});if(k.ok)await v(),p({name:"",color:"#3B82F6"}),g(!1),r();else{const _=await k.json();u(_.message||"  ")}}catch{u("   ")}},N=async(k,_)=>{try{const T=await fetch(`http://localhost:8001/admin/api/statuses/${k}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(_)});if(T.ok)await v(),m(null),r();else{const E=await T.json();u(E.message||"  ")}}catch{u("   ")}},S=async k=>{if(confirm("  ?    ."))try{const _=await fetch(`http://localhost:8001/admin/api/statuses/${k}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(_.ok)await v(),r();else{const T=await _.json();u(T.message||"  ")}}catch{u("   ")}};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(di,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-purple-100 text-sm mt-1",children:"    "})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 max-h-[600px] overflow-y-auto",children:[c&&e.jsxs("div",{className:"flex items-start gap-2 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg mb-4",children:[e.jsx(qe,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-800",children:c})]}),!j&&e.jsxs("button",{type:"button",onClick:()=>g(!0),className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all font-semibold mb-4",children:[e.jsx(Ve,{className:"w-5 h-5"}),"  "]}),j&&e.jsxs("div",{className:"bg-purple-50 border-2 border-purple-200 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("input",{type:"text",value:f.name,onChange:k=>p({...f,name:k.target.value}),className:"flex-1 px-4 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 focus:ring-2 focus:ring-purple-200 outline-none",placeholder:" ",autoFocus:!0}),e.jsx("button",{type:"button",onClick:y,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:e.jsx(ss,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",onClick:()=>{g(!1),p({name:"",color:"#3B82F6"})},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:tW.map(k=>e.jsx("button",{type:"button",onClick:()=>p({...f,color:k.value}),className:`w-8 h-8 rounded-full border-2 transition-all ${f.color===k.value?"border-gray-900 scale-110":"border-gray-300"}`,style:{backgroundColor:k.value},title:k.name},k.value))})]}),i?e.jsx("div",{className:"text-center py-8 text-gray-500",children:" ..."}):e.jsx("div",{className:"space-y-2",children:a.map(k=>e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("div",{className:"w-4 h-4 rounded-full flex-shrink-0",style:{backgroundColor:k.color}}),h===k.id?e.jsx(e.Fragment,{children:e.jsx("input",{type:"text",defaultValue:k.name,className:"flex-1 px-3 py-1 border-2 border-purple-300 rounded-lg focus:border-purple-500 outline-none",onBlur:_=>{_.target.value!==k.name?N(k.id,{name:_.target.value}):m(null)},onKeyDown:_=>{_.key==="Enter"?_.currentTarget.blur():_.key==="Escape"&&m(null)},autoFocus:!0})}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"flex-1 font-medium text-gray-900",children:k.name}),e.jsx("button",{type:"button",onClick:()=>m(k.id),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"",children:e.jsx(Zs,{className:"w-4 h-4"})}),e.jsx("button",{type:"button",onClick:()=>S(k.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"",children:e.jsx(Xe,{className:"w-4 h-4"})})]})]},k.id))}),!i&&a.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"  .   !"})]}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end",children:e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})})]})}):null},rW=({files:s,onCancel:t,onClear:r})=>{if(s.length===0)return null;const a=s.every(i=>i.status==="completed"),n=s.some(i=>i.status==="error");return e.jsxs("div",{className:"fixed bottom-4 right-4 z-[9998] w-96 bg-white rounded-xl shadow-2xl border-2 border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fn,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:a?" ":" "})]}),e.jsx("button",{onClick:r,className:"hover:bg-white/20 rounded-lg p-1 transition-colors",title:"",children:e.jsx(Ae,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"max-h-80 overflow-y-auto p-4 space-y-3",children:s.map(i=>e.jsx("div",{className:`p-3 rounded-lg border-2 transition-all ${i.status==="completed"?"border-green-200 bg-green-50":i.status==="error"?"border-red-200 bg-red-50":"border-blue-200 bg-blue-50"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:i.status==="completed"?e.jsx(it,{className:"w-5 h-5 text-green-600"}):i.status==="error"?e.jsx(qe,{className:"w-5 h-5 text-red-600"}):e.jsx(Tr,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 truncate",children:i.file.name}),i.status==="uploading"&&e.jsx("button",{onClick:()=>t(i.id),className:"flex-shrink-0 text-gray-500 hover:text-gray-700",title:"",children:e.jsx(Ae,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[e.jsx("span",{children:aW(i.file.size)}),i.status==="completed"&&e.jsx("span",{className:"text-green-600 font-semibold",children:" "}),i.status==="error"&&e.jsx("span",{className:"text-red-600 font-semibold",children:" "}),i.status==="uploading"&&e.jsxs("span",{className:"text-blue-600 font-semibold",children:[i.progress,"%"]})]}),i.status==="uploading"&&e.jsx("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-1.5 overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-indigo-500 transition-all duration-300 ease-out",style:{width:`${i.progress}%`}})}),i.status==="error"&&i.error&&e.jsx("div",{className:"mt-1 text-xs text-red-600",children:i.error})]})]})},i.id))}),(a||n)&&e.jsxs("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200 flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-gray-600",children:[s.filter(i=>i.status==="completed").length,"  ",s.length," "]}),e.jsx("button",{onClick:r,className:"text-xs font-semibold text-blue-600 hover:text-blue-700 transition-colors",children:""})]})]})},aW=s=>{if(s===0)return"0 ";const t=1024,r=["","","",""],a=Math.floor(Math.log(s)/Math.log(t));return Math.round(s/Math.pow(t,a)*100)/100+" "+r[a]},nW=({isOpen:s,onClose:t,imageUrl:r,imageName:a="image",canDownload:n=!0})=>{const[i,o]=w.useState(1),[c,u]=w.useState(0),[h,m]=w.useState(!1);w.useEffect(()=>{if(s){o(1),u(0),m(!1);const y=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${y}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const y=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(y||"0")*-1)}},[s]),w.useEffect(()=>{if(!s)return;const y=N=>{N.key==="Escape"?t():N.key==="+"||N.key==="="?f():N.key==="-"?p():(N.key==="r"||N.key==="R")&&j()};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[s,i,c]);const f=()=>{o(y=>Math.min(y+.25,3))},p=()=>{o(y=>Math.max(y-.25,.5))},j=()=>{u(y=>(y+90)%360)},g=async()=>{try{const N=await(await fetch(r)).blob(),S=window.URL.createObjectURL(N),k=document.createElement("a");k.href=S,k.download=a,document.body.appendChild(k),k.click(),document.body.removeChild(k),window.URL.revokeObjectURL(S)}catch(y){console.error("Download failed:",y)}},v=()=>{m(!h)};return s?e.jsxs("div",{className:"fixed inset-0 bg-black/90 z-[9999] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 bg-black/50 backdrop-blur-sm",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("h3",{className:"text-white font-semibold truncate max-w-md",children:a})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:p,disabled:i<=.5,className:"p-2 text-white hover:bg-white/20 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:" ( -)",children:e.jsx(oz,{className:"w-5 h-5"})}),e.jsxs("span",{className:"text-white text-sm font-mono min-w-[3rem] text-center",children:[Math.round(i*100),"%"]}),e.jsx("button",{onClick:f,disabled:i>=3,className:"p-2 text-white hover:bg-white/20 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:" ( +)",children:e.jsx(nz,{className:"w-5 h-5"})}),e.jsx("div",{className:"w-px h-6 bg-white/20 mx-2"}),e.jsx("button",{onClick:j,className:"p-2 text-white hover:bg-white/20 rounded-lg transition-colors",title:" ( R)",children:e.jsx(mF,{className:"w-5 h-5"})}),e.jsx("button",{onClick:v,className:"p-2 text-white hover:bg-white/20 rounded-lg transition-colors",title:"  ",children:e.jsx(zB,{className:"w-5 h-5"})}),n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-px h-6 bg-white/20 mx-2"}),e.jsx("button",{onClick:g,className:"p-2 text-white hover:bg-white/20 rounded-lg transition-colors",title:"",children:e.jsx(wt,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"w-px h-6 bg-white/20 mx-2"}),e.jsx("button",{onClick:t,className:"p-2 text-white hover:bg-white/20 rounded-lg transition-colors",title:" (Esc)",children:e.jsx(Ae,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:`flex-1 flex items-center justify-center overflow-auto p-4 ${h?"p-0":""}`,onClick:y=>{y.target===y.currentTarget&&t()},children:e.jsx("img",{src:r,alt:a,className:"max-w-full max-h-full object-contain transition-all duration-300 ease-out",style:{transform:`scale(${i}) rotate(${c}deg)`,cursor:i>1?"grab":"default"},draggable:!1})}),e.jsx("div",{className:"px-6 py-3 bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center justify-center gap-6 text-xs text-gray-400",children:[e.jsxs("span",{children:[e.jsx("kbd",{className:"px-2 py-1 bg-white/10 rounded",children:"Esc"})," "]}),e.jsxs("span",{children:[e.jsx("kbd",{className:"px-2 py-1 bg-white/10 rounded",children:"+/-"})," "]}),e.jsxs("span",{children:[e.jsx("kbd",{className:"px-2 py-1 bg-white/10 rounded",children:"R"})," "]})]})})]}):null},iW=({isOpen:s,onClose:t,projectId:r,projectName:a})=>{const[n,i]=w.useState([]),[o,c]=w.useState(!1),[u,h]=w.useState("");w.useEffect(()=>{s&&r&&m()},[s,r]),w.useEffect(()=>{if(s){const g=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${g}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const g=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(g||"0")*-1)}},[s]);const m=async()=>{if(r){c(!0),h("");try{const g=await fetch(`http://localhost:8001/admin/api/projects/${r}/timeline`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(g.ok){const v=await g.json();i(v.timeline||[])}else h("  ")}catch{h("   ")}finally{c(!1)}}},f=g=>{switch(g){case"created":return e.jsx(it,{className:"w-5 h-5 text-green-600"});case"status_changed":return e.jsx(di,{className:"w-5 h-5 text-blue-600"});case"executor_assigned":return e.jsx(st,{className:"w-5 h-5 text-purple-600"});case"payment_added":return e.jsx(Ge,{className:"w-5 h-5 text-emerald-600"});case"executor_payment":return e.jsx(Ge,{className:"w-5 h-5 text-orange-600"});case"edited":return e.jsx(Zs,{className:"w-5 h-5 text-amber-600"});case"completed":return e.jsx(it,{className:"w-5 h-5 text-green-600"});default:return e.jsx(Ue,{className:"w-5 h-5 text-gray-600"})}},p=g=>{switch(g){case"created":return"border-green-500 bg-green-50";case"status_changed":return"border-blue-500 bg-blue-50";case"executor_assigned":return"border-purple-500 bg-purple-50";case"payment_added":return"border-emerald-500 bg-emerald-50";case"executor_payment":return"border-orange-500 bg-orange-50";case"edited":return"border-amber-500 bg-amber-50";case"completed":return"border-green-500 bg-green-50";default:return"border-gray-500 bg-gray-50"}},j=g=>{const v=new Date(g);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(v)};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-blue-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ue,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-indigo-100 text-sm mt-1",children:a})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[u&&e.jsxs("div",{className:"flex items-start gap-2 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg mb-4",children:[e.jsx(qe,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-800",children:u})]}),o?e.jsx("div",{className:"text-center py-8 text-gray-500",children:" ..."}):n.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"   "}):e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-[29px] top-0 bottom-0 w-0.5 bg-gradient-to-b from-indigo-200 to-blue-200"}),e.jsx("div",{className:"space-y-4",children:n.map((g,v)=>e.jsxs("div",{className:"relative pl-16",children:[e.jsx("div",{className:"absolute left-0 top-0 w-14 h-14 bg-white border-4 border-indigo-200 rounded-full flex items-center justify-center",children:f(g.type)}),e.jsxs("div",{className:`border-l-4 rounded-lg p-4 ${p(g.type)}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:g.description}),e.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:j(g.created_at)})]}),g.user&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-2",children:[e.jsx(st,{className:"w-4 h-4"}),e.jsx("span",{children:g.user.first_name||g.user.username||""})]}),g.details&&e.jsx("div",{className:"mt-2 text-sm text-gray-700 bg-white/50 rounded p-2",children:e.jsx("pre",{className:"whitespace-pre-wrap font-sans",children:JSON.stringify(g.details,null,2)})})]}),v<n.length-1&&e.jsx("div",{className:"absolute left-[29px] top-14 w-0.5 h-4 bg-indigo-200"})]},g.id))})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center flex-shrink-0",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[" : ",n.length]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})}):null},lW=({isOpen:s,onClose:t,project:r,onSaved:a})=>{const[n,i]=w.useState({name:"",status:"",project_cost:0,executor_cost:0,deadline:""}),[o,c]=w.useState(!1),[u,h]=w.useState("");w.useEffect(()=>{s&&r&&(i({name:r.name||"",status:r.status||"",project_cost:r.project_cost||0,executor_cost:r.executor_cost||0,deadline:r.deadline?r.deadline.split("T")[0]:""}),h(""))},[s,r]),w.useEffect(()=>{s?document.body.style.overflow="hidden":document.body.style.overflow=""},[s]);const m=async()=>{if(r){if(!n.name.trim()){h("  ");return}c(!0),h("");try{const f=await fetch(`http://localhost:8001/admin/api/projects/${r.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(n)});if(f.ok)a(),t();else{const p=await f.json();h(p.message||" ")}}catch{h("   ")}finally{c(!1)}}};return!s||!r?null:e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-yellow-600 to-orange-600 text-white px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ua,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsxs("p",{className:"text-yellow-100 text-sm mt-1",children:[" #",r.id]})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:n.name,onChange:f=>i({...n,name:f.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-yellow-500 focus:ring-2 focus:ring-yellow-200 outline-none transition-all",placeholder:" "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:n.status,onChange:f=>i({...n,status:f.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-yellow-500 focus:ring-2 focus:ring-yellow-200 outline-none transition-all",placeholder:" "})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  ()"}),e.jsx("input",{type:"number",value:n.project_cost,onChange:f=>i({...n,project_cost:Number(f.target.value)||0}),min:"0",step:"100",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-yellow-500 focus:ring-2 focus:ring-yellow-200 outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  ()"}),e.jsx("input",{type:"number",value:n.executor_cost,onChange:f=>i({...n,executor_cost:Number(f.target.value)||0}),min:"0",step:"100",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-yellow-500 focus:ring-2 focus:ring-yellow-200 outline-none transition-all"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"date",value:n.deadline,onChange:f=>i({...n,deadline:f.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-yellow-500 focus:ring-2 focus:ring-yellow-200 outline-none transition-all"})]}),e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:" :"}),e.jsxs("span",{className:"text-2xl font-bold text-green-600",children:[(n.project_cost-n.executor_cost).toLocaleString("ru-RU")," "]})]})}),u&&e.jsxs("div",{className:"flex items-start gap-2 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg",children:[e.jsx(qe,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-800",children:u})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex gap-3",children:[e.jsxs("button",{type:"button",onClick:m,disabled:o||!n.name.trim(),className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-yellow-600 to-orange-600 text-white rounded-lg hover:from-yellow-700 hover:to-orange-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ka,{className:"w-5 h-5"}),o?"...":""]}),e.jsx("button",{type:"button",onClick:t,disabled:o,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold disabled:opacity-50",children:""})]})]})})},oW=({isOpen:s,onClose:t,onConfirm:r,title:a,message:n,confirmText:i="",cancelText:o="",type:c="warning",loading:u=!1})=>{if(w.useEffect(()=>{if(s){const f=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${f}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const f=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(f||"0")*-1)}},[s]),w.useEffect(()=>{if(!s)return;const f=p=>{p.key==="Escape"&&!u?t():p.key==="Enter"&&!u&&r()};return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[s,u,t,r]),!s)return null;const m=(()=>{switch(c){case"danger":return{icon:e.jsx(kl,{className:"w-12 h-12"}),iconColor:"text-red-600",bgColor:"from-red-600 to-red-700",buttonColor:"from-red-600 to-red-700 hover:from-red-700 hover:to-red-800"};case"warning":return{icon:e.jsx(ir,{className:"w-12 h-12"}),iconColor:"text-yellow-600",bgColor:"from-yellow-600 to-orange-600",buttonColor:"from-yellow-600 to-orange-600 hover:from-yellow-700 hover:to-orange-700"};case"info":return{icon:e.jsx(uE,{className:"w-12 h-12"}),iconColor:"text-blue-600",bgColor:"from-blue-600 to-indigo-600",buttonColor:"from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700"};case"success":return{icon:e.jsx(it,{className:"w-12 h-12"}),iconColor:"text-green-600",bgColor:"from-green-600 to-emerald-600",buttonColor:"from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700"}}})();return e.jsxs("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden animate-scale-in",children:[e.jsx("div",{className:`bg-gradient-to-r ${m.bgColor} px-6 py-8 flex justify-center`,children:e.jsx("div",{className:"text-white",children:m.icon})}),e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:a}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:n})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex gap-3",children:[e.jsx("button",{type:"button",onClick:t,disabled:u,className:"flex-1 px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:o}),e.jsx("button",{type:"button",onClick:r,disabled:u,className:`flex-1 px-6 py-3 bg-gradient-to-r ${m.buttonColor} text-white rounded-lg transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed`,children:u?"...":i})]}),e.jsxs("div",{className:"px-6 py-2 bg-gray-100 text-xs text-center text-gray-500",children:[e.jsx("kbd",{className:"px-2 py-0.5 bg-white border border-gray-300 rounded",children:"Enter"})," "," "," ",e.jsx("kbd",{className:"px-2 py-0.5 bg-white border border-gray-300 rounded",children:"Esc"})," "]})]}),e.jsx("style",{children:`
        @keyframes scale-in {
          from {
            transform: scale(0.9);
            opacity: 0;
          }
          to {
            transform: scale(1);
            opacity: 1;
          }
        }
        .animate-scale-in {
          animation: scale-in 0.2s ease-out;
        }
      `})]})},cW=({isOpen:s,onClose:t,project:r,onDuplicated:a})=>{const[n,i]=w.useState({copyName:!0,copyDescription:!0,copyFinances:!1,copyExecutor:!1,copyDeadline:!1,copyAttachments:!1,namePrefix:" - "}),[o,c]=w.useState(!1),[u,h]=w.useState("");w.useEffect(()=>{s&&(i({copyName:!0,copyDescription:!0,copyFinances:!1,copyExecutor:!1,copyDeadline:!1,copyAttachments:!1,namePrefix:" - "}),h(""))},[s]),w.useEffect(()=>{if(s){const p=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${p}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const p=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(p||"0")*-1)}},[s]);const m=async()=>{if(r){c(!0),h("");try{const p=await fetch(`http://localhost:8001/admin/api/projects/${r.id}/duplicate`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(n)});if(p.ok)a(),t();else{const j=await p.json();h(j.message||"  ")}}catch{h("   ")}finally{c(!1)}}};if(!s||!r)return null;const f=n.copyName?`${n.namePrefix}${r.name}`:" ";return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-violet-600 to-purple-600 text-white px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ks,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsxs("p",{className:"text-violet-100 text-sm mt-1",children:[" #",r.id]})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"text",value:n.namePrefix,onChange:p=>i({...n,namePrefix:p.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-violet-500 focus:ring-2 focus:ring-violet-200 outline-none transition-all",placeholder:" - "}),e.jsx("div",{className:"mt-2 p-3 bg-violet-50 border-l-4 border-violet-500 rounded",children:e.jsxs("p",{className:"text-sm text-violet-900",children:[e.jsx("span",{className:"font-semibold",children:":"})," ",f]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:" ?"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.copyName,onChange:p=>i({...n,copyName:p.target.checked}),className:"w-5 h-5 text-violet-600 rounded focus:ring-2 focus:ring-violet-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:""}),e.jsx("div",{className:"text-xs text-gray-600",children:"   ( )"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.copyDescription,onChange:p=>i({...n,copyDescription:p.target.checked}),className:"w-5 h-5 text-violet-600 rounded focus:ring-2 focus:ring-violet-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:"  "}),e.jsx("div",{className:"text-xs text-gray-600",children:"   "})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.copyFinances,onChange:p=>i({...n,copyFinances:p.target.checked}),className:"w-5 h-5 text-violet-600 rounded focus:ring-2 focus:ring-violet-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:""}),e.jsx("div",{className:"text-xs text-gray-600",children:"    "})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.copyExecutor,onChange:p=>i({...n,copyExecutor:p.target.checked}),className:"w-5 h-5 text-violet-600 rounded focus:ring-2 focus:ring-violet-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:""}),e.jsx("div",{className:"text-xs text-gray-600",children:"   "})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.copyDeadline,onChange:p=>i({...n,copyDeadline:p.target.checked}),className:"w-5 h-5 text-violet-600 rounded focus:ring-2 focus:ring-violet-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:""}),e.jsx("div",{className:"text-xs text-gray-600",children:"  "})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.copyAttachments,onChange:p=>i({...n,copyAttachments:p.target.checked}),className:"w-5 h-5 text-violet-600 rounded focus:ring-2 focus:ring-violet-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:""}),e.jsx("div",{className:"text-xs text-gray-600",children:"  "})]})]})]})]}),u&&e.jsxs("div",{className:"flex items-start gap-2 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg",children:[e.jsx(qe,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-800",children:u})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex gap-3",children:[e.jsxs("button",{type:"button",onClick:m,disabled:o,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-violet-600 to-purple-600 text-white rounded-lg hover:from-violet-700 hover:to-purple-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Ks,{className:"w-5 h-5"}),o?"...":" "]}),e.jsx("button",{type:"button",onClick:t,disabled:o,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold disabled:opacity-50",children:""})]})]})})},dW=({items:s,showHome:t=!0})=>{const r=t?[{label:"",path:"/",icon:e.jsx(dE,{className:"w-4 h-4"})},...s]:s;return e.jsx("nav",{className:"flex items-center gap-2 text-sm",children:r.map((a,n)=>{const i=n===r.length-1;return e.jsxs("div",{className:"flex items-center gap-2",children:[a.path&&!i?e.jsxs(lN,{to:a.path,className:"flex items-center gap-1.5 text-gray-600 hover:text-blue-600 transition-colors font-medium",children:[a.icon,e.jsx("span",{children:a.label})]}):e.jsxs("div",{className:`flex items-center gap-1.5 ${i?"text-gray-900 font-semibold":"text-gray-500"}`,children:[a.icon,e.jsx("span",{children:a.label})]}),!i&&e.jsx(jn,{className:"w-4 h-4 text-gray-400"})]},n)})})},uW=({isOpen:s,onClose:t,projectId:r,projectName:a})=>{const[n,i]=w.useState([]),[o,c]=w.useState(""),[u,h]=w.useState(null),[m,f]=w.useState(""),[p,j]=w.useState(!1),[g,v]=w.useState(!1),y=w.useRef(null),N=w.useRef(null);w.useEffect(()=>{s&&r&&k()},[s,r]),w.useEffect(()=>{if(s){const C=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${C}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const C=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(C||"0")*-1)}},[s]),w.useEffect(()=>{S()},[n]);const S=()=>{N.current?.scrollIntoView({behavior:"smooth"})},k=async()=>{if(r){j(!0);try{const C=await fetch(`http://localhost:8001/admin/api/projects/${r}/comments`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(C.ok){const A=await C.json();i(A.comments||[])}}catch(C){console.error("Error loading comments:",C)}finally{j(!1)}}},_=async()=>{if(!(!o.trim()||!r)){v(!0);try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/comments`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({text:o})})).ok&&(c(""),await k(),y.current?.focus())}catch(C){console.error("Error sending comment:",C)}finally{v(!1)}}},T=async C=>{if(m.trim())try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/comments/${C}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({text:m})})).ok&&(h(null),f(""),await k())}catch(A){console.error("Error editing comment:",A)}},E=async C=>{if(confirm(" ?"))try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/comments/${C}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&await k()}catch(A){console.error("Error deleting comment:",A)}},z=C=>{C.key==="Enter"&&(C.ctrlKey||C.metaKey)&&_()},M=C=>{const A=new Date(C);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}).format(A)};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ha,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:""}),e.jsx("p",{className:"text-blue-100 text-sm mt-1",children:a})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4 bg-gray-50",children:[p?e.jsx("div",{className:"text-center py-8 text-gray-500",children:" ..."}):n.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"  .  !"}):n.map(C=>e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-full flex items-center justify-center text-white font-bold",children:e.jsx(st,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:C.user.first_name||C.user.username}),e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:M(C.created_at)}),C.updated_at&&C.updated_at!==C.created_at&&e.jsx("span",{className:"text-xs text-gray-400 ml-1",children:"()"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>{h(C.id),f(C.text)},className:"p-1 text-blue-600 hover:bg-blue-100 rounded transition-colors",title:"",children:e.jsx(Zs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>E(C.id),className:"p-1 text-red-600 hover:bg-red-100 rounded transition-colors",title:"",children:e.jsx(Xe,{className:"w-4 h-4"})})]})]}),u===C.id?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:m,onChange:A=>f(A.target.value),className:"flex-1 px-3 py-2 border-2 border-blue-300 rounded-lg focus:border-blue-500 outline-none",autoFocus:!0}),e.jsx("button",{onClick:()=>T(C.id),className:"p-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:e.jsx(ss,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{h(null),f("")},className:"p-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:e.jsx(Ae,{className:"w-4 h-4"})})]}):e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:C.text})]})]})},C.id)),e.jsx("div",{ref:N})]}),e.jsxs("div",{className:"px-6 py-4 bg-white border-t border-gray-200 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-end gap-3",children:[e.jsx("textarea",{ref:y,value:o,onChange:C=>c(C.target.value),onKeyDown:z,className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none resize-none transition-all",placeholder:" ... (Ctrl+Enter  )",rows:2,disabled:g}),e.jsxs("button",{onClick:_,disabled:!o.trim()||g,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 text-white rounded-lg hover:from-blue-700 hover:to-cyan-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(Qs,{className:"w-5 h-5"}),g?"...":""]})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[" ",e.jsx("kbd",{className:"px-1 py-0.5 bg-gray-200 rounded",children:"Ctrl+Enter"}),"  "]})]})]})}):null},I0=["#EF4444","#F59E0B","#10B981","#3B82F6","#8B5CF6","#EC4899","#14B8A6","#6B7280"],hW=({isOpen:s,onClose:t,projectId:r,projectName:a,onTagsUpdated:n})=>{const[i,o]=w.useState([]),[c,u]=w.useState([]),[h,m]=w.useState(!1),[f,p]=w.useState(""),[j,g]=w.useState(I0[0]),[v,y]=w.useState(!1);w.useEffect(()=>{s&&r&&(N(),S())},[s,r]),w.useEffect(()=>{s?document.body.style.overflow="hidden":document.body.style.overflow=""},[s]);const N=async()=>{try{const M=await fetch("http://localhost:8001/admin/api/tags",{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(M.ok){const C=await M.json();o(C.tags||[])}}catch(M){console.error("Error loading tags:",M)}},S=async()=>{if(r){y(!0);try{const M=await fetch(`http://localhost:8001/admin/api/projects/${r}/tags`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(M.ok){const C=await M.json();u(C.tags||[])}}catch(M){console.error("Error loading project tags:",M)}finally{y(!1)}}},k=async()=>{if(f.trim())try{(await fetch("http://localhost:8001/admin/api/tags",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({name:f,color:j})})).ok&&(p(""),g(I0[0]),m(!1),await N())}catch(M){console.error("Error creating tag:",M)}},_=async M=>{if(r)try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/tags/${M}`,{method:"POST",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&(await S(),n())}catch(C){console.error("Error adding tag:",C)}},T=async M=>{if(r)try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/tags/${M}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&(await S(),n())}catch(C){console.error("Error removing tag:",C)}};if(!s)return null;const E=new Set(c.map(M=>M.id)),z=i.filter(M=>!E.has(M.id));return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-pink-600 to-rose-600 text-white px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(di,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-pink-100 text-sm mt-1",children:a})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6 max-h-[600px] overflow-y-auto",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:" "}),v?e.jsx("div",{className:"text-sm text-gray-500",children:"..."}):c.length===0?e.jsx("div",{className:"text-sm text-gray-500 py-4 text-center border-2 border-dashed border-gray-300 rounded-lg",children:"  "}):e.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(M=>e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full text-white text-sm font-medium shadow-md",style:{backgroundColor:M.color},children:[e.jsx("span",{children:M.name}),e.jsx("button",{onClick:()=>T(M.id),className:"hover:bg-white/20 rounded-full p-0.5 transition-colors",children:e.jsx(Ae,{className:"w-3.5 h-3.5"})})]},M.id))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:" "}),z.length===0?e.jsx("div",{className:"text-sm text-gray-500 py-4 text-center border-2 border-dashed border-gray-300 rounded-lg",children:"   "}):e.jsx("div",{className:"flex flex-wrap gap-2",children:z.map(M=>e.jsxs("button",{onClick:()=>_(M.id),className:"flex items-center gap-2 px-3 py-1.5 rounded-full text-white text-sm font-medium shadow-md hover:opacity-80 transition-opacity",style:{backgroundColor:M.color},children:[e.jsx(Ve,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:M.name})]},M.id))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"  "}),h?e.jsxs("div",{className:"bg-pink-50 border-2 border-pink-200 rounded-lg p-4 space-y-3",children:[e.jsx("input",{type:"text",value:f,onChange:M=>p(M.target.value),className:"w-full px-4 py-2 border-2 border-pink-300 rounded-lg focus:border-pink-500 focus:ring-2 focus:ring-pink-200 outline-none",placeholder:" ",autoFocus:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-700 mb-2",children:":"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:I0.map(M=>e.jsx("button",{onClick:()=>g(M),className:`w-8 h-8 rounded-full border-2 transition-all ${j===M?"border-gray-900 scale-110":"border-gray-300"}`,style:{backgroundColor:M}},M))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:k,disabled:!f.trim(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-semibold",children:[e.jsx(ss,{className:"w-4 h-4"}),""]}),e.jsx("button",{onClick:()=>{m(!1),p(""),g(I0[0])},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-semibold",children:""})]})]}):e.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-pink-600 to-rose-600 text-white rounded-lg hover:from-pink-700 hover:to-rose-700 transition-all font-semibold text-sm",children:[e.jsx(Ve,{className:"w-4 h-4"})," "]})]})]}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end",children:e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})})]})})},mW=({projects:s})=>{const t=xW(s);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx($0,{icon:e.jsx(Fr,{className:"w-6 h-6"}),label:" ",value:t.totalProjects,color:"blue"}),e.jsx($0,{icon:e.jsx(Ge,{className:"w-6 h-6"}),label:" ",value:`${t.totalCost.toLocaleString("ru-RU")} `,color:"green"}),e.jsx($0,{icon:e.jsx(ct,{className:"w-6 h-6"}),label:" ",value:`${t.totalProfit.toLocaleString("ru-RU")} `,color:"purple"}),e.jsx($0,{icon:e.jsx(it,{className:"w-6 h-6"}),label:" ",value:t.fullyPaidCount,color:"emerald"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Fr,{className:"w-5 h-5 text-indigo-600"}),"  "]}),e.jsx("div",{className:"space-y-3",children:Object.entries(t.statusDistribution).map(([r,a])=>{const n=a/t.totalProjects*100;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:r||" "}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[a," (",n.toFixed(0),"%)"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 h-2.5 rounded-full transition-all duration-500",style:{width:`${n}%`}})})]},r)})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(tt,{className:"w-5 h-5 text-blue-600"})," "]}),e.jsx("div",{className:"space-y-4",children:t.executorStats.slice(0,5).map(r=>e.jsxs("div",{className:"border-l-4 border-blue-500 pl-4 py-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:r.name}),e.jsxs("span",{className:"text-sm text-gray-600",children:[r.projectCount," "]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:":"}),e.jsxs("span",{className:"ml-1 font-semibold text-blue-600",children:[r.totalCost.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:":"}),e.jsxs("span",{className:"ml-1 font-semibold text-purple-600",children:[r.totalProfit.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:":"}),e.jsxs("span",{className:"ml-1 font-semibold text-green-600",children:[Math.round(r.totalProfit/r.projectCount).toLocaleString("ru-RU")," "]})]})]})]},r.name))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Ge,{className:"w-5 h-5 text-green-600"})," "]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 rounded-lg p-4",children:[e.jsx("div",{className:"text-xs text-red-600 font-semibold mb-1",children:" "}),e.jsx("div",{className:"text-2xl font-bold text-red-900",children:t.paymentStatus.unpaid}),e.jsxs("div",{className:"text-xs text-red-600 mt-1",children:[(t.paymentStatus.unpaid/t.totalProjects*100).toFixed(0),"%"]})]}),e.jsxs("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 rounded-lg p-4",children:[e.jsx("div",{className:"text-xs text-yellow-600 font-semibold mb-1",children:" "}),e.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:t.paymentStatus.partial}),e.jsxs("div",{className:"text-xs text-yellow-600 mt-1",children:[(t.paymentStatus.partial/t.totalProjects*100).toFixed(0),"%"]})]}),e.jsxs("div",{className:"bg-green-50 border-l-4 border-green-500 rounded-lg p-4",children:[e.jsx("div",{className:"text-xs text-green-600 font-semibold mb-1",children:" "}),e.jsx("div",{className:"text-2xl font-bold text-green-900",children:t.paymentStatus.paid}),e.jsxs("div",{className:"text-xs text-green-600 mt-1",children:[(t.paymentStatus.paid/t.totalProjects*100).toFixed(0),"%"]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl shadow-lg p-6 text-white",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:" "}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-indigo-200 mb-1",children:" "}),e.jsxs("div",{className:"text-xl font-bold",children:[t.totalCost.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-indigo-200 mb-1",children:""}),e.jsxs("div",{className:"text-xl font-bold",children:[t.totalPaid.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-indigo-200 mb-1",children:""}),e.jsxs("div",{className:"text-xl font-bold",children:[t.totalExecutorCost.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-indigo-200 mb-1",children:""}),e.jsxs("div",{className:"text-xl font-bold",children:[t.totalProfit.toLocaleString("ru-RU")," "]})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-indigo-400",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"   :"}),e.jsxs("span",{className:"font-bold",children:[Math.round(t.totalProfit/t.totalProjects||0).toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm mt-2",children:[e.jsx("span",{children:" :"}),e.jsxs("span",{className:"font-bold",children:[(t.totalProfit/t.totalCost*100||0).toFixed(1),"%"]})]})]})]})]})},$0=({icon:s,label:t,value:r,color:a})=>{const n={blue:"from-blue-500 to-blue-600",green:"from-green-500 to-green-600",purple:"from-purple-500 to-purple-600",emerald:"from-emerald-500 to-emerald-600"};return e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsx("div",{className:`inline-flex p-3 rounded-lg bg-gradient-to-r ${n[a]} text-white mb-4`,children:s}),e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:t}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r})]})},xW=s=>{const t=s.length,r=s.reduce((m,f)=>m+(f.project_cost||0),0),a=s.reduce((m,f)=>m+(f.paid_total||0),0),n=s.reduce((m,f)=>m+(f.executor_cost||0),0),i=r-n,o={};s.forEach(m=>{const f=m.status||" ";o[f]=(o[f]||0)+1});const c={unpaid:0,partial:0,paid:0};s.forEach(m=>{const f=m.paid_total||0,p=m.project_cost||0;f===0?c.unpaid++:f<p?c.partial++:c.paid++});const u={};s.forEach(m=>{if(m.assigned_to){const f=m.assigned_to.username||m.assigned_to.first_name||" ";u[f]||(u[f]={name:f,projectCount:0,totalCost:0,totalProfit:0}),u[f].projectCount++,u[f].totalCost+=m.project_cost||0,u[f].totalProfit+=(m.project_cost||0)-(m.executor_cost||0)}});const h=Object.values(u).sort((m,f)=>f.totalProfit-m.totalProfit);return{totalProjects:t,totalCost:r,totalPaid:a,totalExecutorCost:n,totalProfit:i,fullyPaidCount:c.paid,statusDistribution:o,paymentStatus:c,executorStats:h}},fW=({isOpen:s,onClose:t,projects:r,onProjectClick:a})=>{const[n,i]=w.useState(new Date),[o,c]=w.useState("month"),u=w.useMemo(()=>{const S=n.getFullYear(),k=n.getMonth(),_=new Date(S,k,1),E=new Date(S,k+1,0).getDate(),z=_.getDay(),M=[];for(let C=0;C<z;C++)M.push(null);for(let C=1;C<=E;C++)M.push(new Date(S,k,C));return M},[n]),h=w.useMemo(()=>{const S=new Map;return r.forEach(k=>{if(k.deadline){const _=k.deadline.slice(0,10);S.has(_)||S.set(_,[]),S.get(_).push(k)}}),S},[r]),m=S=>{const k=S.getFullYear(),_=String(S.getMonth()+1).padStart(2,"0"),T=String(S.getDate()).padStart(2,"0");return`${k}-${_}-${T}`},f=()=>{i(new Date(n.getFullYear(),n.getMonth()-1,1))},p=()=>{i(new Date(n.getFullYear(),n.getMonth()+1,1))},j=()=>{i(new Date)},g=S=>{const k=new Date;return S.getDate()===k.getDate()&&S.getMonth()===k.getMonth()&&S.getFullYear()===k.getFullYear()},v=S=>({new:"bg-blue-500",review:"bg-orange-500",accepted:"bg-purple-500",in_progress:"bg-yellow-500",testing:"bg-green-500",completed:"bg-green-600",cancelled:"bg-red-500",on_hold:"bg-gray-500"})[S]||"bg-gray-500";if(!s)return null;const y=["","","","","","","","","","","",""],N=["","","","","","",""];return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pt,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsxs("p",{className:"text-indigo-100 text-sm mt-1",children:[y[n.getMonth()]," ",n.getFullYear()]})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:f,className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",title:" ",children:e.jsx(aE,{className:"w-5 h-5"})}),e.jsx("button",{onClick:j,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-semibold text-sm",children:""}),e.jsx("button",{onClick:p,className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",title:" ",children:e.jsx(jn,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>c("month"),className:`px-4 py-2 rounded-lg font-semibold text-sm transition-colors ${o==="month"?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:""}),e.jsx("button",{onClick:()=>c("week"),className:`px-4 py-2 rounded-lg font-semibold text-sm transition-colors ${o==="week"?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:""})]})]}),e.jsxs("div",{className:"flex-1 overflow-auto p-6",children:[e.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2",children:N.map(S=>e.jsx("div",{className:"text-center font-bold text-gray-600 text-sm py-2",children:S},S))}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:u.map((S,k)=>{if(!S)return e.jsx("div",{className:"aspect-square"},`empty-${k}`);const _=m(S),T=h.get(_)||[],E=g(S);return e.jsxs("div",{className:`aspect-square border-2 rounded-lg p-2 flex flex-col ${E?"border-indigo-500 bg-indigo-50":"border-gray-200 bg-white hover:bg-gray-50"} transition-colors`,children:[e.jsx("div",{className:`text-sm font-semibold mb-1 ${E?"text-indigo-600":"text-gray-900"}`,children:S.getDate()}),T.length>0&&e.jsxs("div",{className:"flex-1 overflow-hidden",children:[T.slice(0,3).map(z=>e.jsx("button",{onClick:()=>a(z.id),className:`w-full text-left px-2 py-1 mb-1 rounded text-xs font-medium truncate ${v(z.status)} text-white hover:opacity-80 transition-opacity`,title:z.title,children:z.title},z.id)),T.length>3&&e.jsxs("div",{className:"text-xs text-gray-500 text-center mt-1",children:["+",T.length-3," "]})]})]},k)})})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex flex-wrap items-center gap-4",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:":"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-blue-500"}),e.jsx("span",{className:"text-xs text-gray-600",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-yellow-500"}),e.jsx("span",{className:"text-xs text-gray-600",children:" "})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-green-500"}),e.jsx("span",{className:"text-xs text-gray-600",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-green-600"}),e.jsx("span",{className:"text-xs text-gray-600",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-red-500"}),e.jsx("span",{className:"text-xs text-gray-600",children:""})]})]})]})})},pW=({isOpen:s,onClose:t,onResultClick:r})=>{const[a,n]=w.useState(""),[i,o]=w.useState([]),[c,u]=w.useState(!1),[h,m]=w.useState({projects:!0,tasks:!0,comments:!0,files:!0}),[f,p]=w.useState({title:!0,description:!0,comments:!0,tags:!0}),j=w.useRef(null),g=w.useRef();w.useEffect(()=>{if(s){j.current?.focus();const _=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${_}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const _=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(_||"0")*-1)}return()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow=""}},[s]),w.useEffect(()=>(a.length>=2?(g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{v()},300)):o([]),()=>{g.current&&clearTimeout(g.current)}),[a,h,f]);const v=async()=>{u(!0);try{const _=await fetch("http://localhost:8001/admin/api/search",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({query:a,filters:h,searchIn:f})});if(_.ok){const T=await _.json();o(T.results||[])}}catch(_){console.error("Search error:",_),o(y(a))}finally{u(!1)}},y=_=>[{id:1,type:"project",title:" CRM ",description:" CRM    ",matchedField:"title",matchedText:" <mark>CRM</mark> ",relevance:95,metadata:{status:"in_progress",client:' ""',cost:15e4}},{id:2,type:"task",title:"  ",description:" PostgreSQL  CRM",matchedField:"description",matchedText:" PostgreSQL  <mark>CRM</mark>",relevance:80,metadata:{status:"completed"}}].filter(E=>E.title.toLowerCase().includes(_.toLowerCase())),N=_=>({__html:_}),S=_=>{switch(_){case"project":return e.jsx(Ie,{className:"w-5 h-5 text-blue-600"});case"task":return e.jsx(Ie,{className:"w-5 h-5 text-green-600"});case"comment":return e.jsx(Ie,{className:"w-5 h-5 text-purple-600"});case"file":return e.jsx(Ie,{className:"w-5 h-5 text-orange-600"});default:return e.jsx(Ie,{className:"w-5 h-5 text-gray-600"})}},k=_=>({project:"",task:"",comment:"",file:""})[_]||_;return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] flex items-start justify-center pt-20",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full mx-4 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Fs,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{ref:j,type:"text",value:a,onChange:_=>n(_.target.value),placeholder:"  , , ...",className:"w-full pl-12 pr-12 py-4 bg-gray-50 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none text-lg transition-all"}),a&&e.jsx("button",{onClick:()=>n(""),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"mt-4 flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gr,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:" :"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h.projects,onChange:_=>m({...h,projects:_.target.checked}),className:"w-4 h-4 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:""})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h.tasks,onChange:_=>m({...h,tasks:_.target.checked}),className:"w-4 h-4 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:""})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h.comments,onChange:_=>m({...h,comments:_.target.checked}),className:"w-4 h-4 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:""})]})]})]}),e.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:c?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-blue-600 border-t-transparent"}),e.jsx("p",{className:"text-gray-600 mt-4",children:"..."})]}):a.length<2?e.jsxs("div",{className:"p-12 text-center text-gray-500",children:[e.jsx(Fs,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"  2   "})]}):i.length===0?e.jsxs("div",{className:"p-12 text-center text-gray-500",children:[e.jsx(Fs,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsxs("p",{children:['     "',a,'"']})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:i.map(_=>e.jsx("button",{onClick:()=>{r(_.type,_.id),t()},className:"w-full p-4 hover:bg-gray-50 transition-colors text-left",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:S(_.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xs font-semibold px-2 py-0.5 bg-gray-200 text-gray-700 rounded",children:k(_.type)}),e.jsxs("span",{className:"text-xs text-gray-500",children:[": ",_.relevance,"%"]})]}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:_.title}),e.jsx("div",{className:"text-sm text-gray-600 mb-2 line-clamp-2",dangerouslySetInnerHTML:N(_.matchedText)}),_.metadata&&e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[_.metadata.client&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(st,{className:"w-3 h-3"}),_.metadata.client]}),_.metadata.cost&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ge,{className:"w-3 h-3"}),_.metadata.cost.toLocaleString(),""]}),_.metadata.deadline&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(pt,{className:"w-3 h-3"}),_.metadata.deadline]})]})]})]})},`${_.type}-${_.id}`))})}),e.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-xs text-gray-500",children:[e.jsx("div",{children:i.length>0&&e.jsxs("span",{children:[" : ",e.jsx("strong",{children:i.length})]})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{children:[e.jsx("kbd",{className:"px-2 py-1 bg-white border border-gray-300 rounded",children:"Esc"})," "]}),e.jsxs("span",{children:[e.jsx("kbd",{className:"px-2 py-1 bg-white border border-gray-300 rounded",children:""}),e.jsx("kbd",{className:"px-2 py-1 bg-white border border-gray-300 rounded ml-1",children:""})," ",""]})]})]})]})}):null},gW=({isOpen:s,onClose:t,projectId:r,projectName:a})=>{const[n,i]=w.useState([]),[o,c]=w.useState(!1),[u,h]=w.useState(new Set),[m,f]=w.useState("all");w.useEffect(()=>{s&&r&&p()},[s,r]),w.useEffect(()=>{if(s){const T=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${T}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const T=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(T||"0")*-1)}},[s]);const p=async()=>{if(r){c(!0);try{const T=await fetch(`http://localhost:8001/admin/api/projects/${r}/history`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(T.ok){const E=await T.json();i(E.history||[])}else i(j())}catch(T){console.error("Error loading history:",T),i(j())}finally{c(!1)}}},j=()=>[{id:1,userId:1,userName:"",action:"updated",changes:[{field:"status",oldValue:"new",newValue:"in_progress",type:"modified"},{field:"assigned_to",oldValue:null,newValue:" ",type:"added"}],timestamp:new Date(Date.now()-36e5).toISOString(),ipAddress:"192.168.1.1"},{id:2,userId:1,userName:"",action:"updated",changes:[{field:"estimated_cost",oldValue:"100000",newValue:"150000",type:"modified"},{field:"description",oldValue:"  ",newValue:"     ",type:"modified"}],timestamp:new Date(Date.now()-72e5).toISOString(),ipAddress:"192.168.1.1"},{id:3,userId:1,userName:"",action:"created",changes:[{field:"title",oldValue:null,newValue:a,type:"added"},{field:"status",oldValue:null,newValue:"new",type:"added"}],timestamp:new Date(Date.now()-864e5).toISOString(),ipAddress:"192.168.1.1"}],g=T=>{const E=new Set(u);E.has(T)?E.delete(T):E.add(T),h(E)},v=T=>{const E=new Date(T);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(E)},y=T=>{switch(T){case"created":return"bg-green-100 text-green-700";case"updated":return"bg-blue-100 text-blue-700";case"deleted":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},N=T=>({created:"",updated:"",deleted:""})[T]||T,S=T=>({title:"",description:"",status:"",assigned_to:"",estimated_cost:"",deadline:"",priority:"",complexity:""})[T]||T,k=T=>T.type==="added"?e.jsxs("div",{className:"bg-green-50 border-l-4 border-green-500 p-3 rounded",children:[e.jsx("div",{className:"text-sm font-semibold text-green-700 mb-1",children:":"}),e.jsx("div",{className:"text-sm text-green-900 font-mono bg-green-100 p-2 rounded",children:T.newValue})]}):T.type==="removed"?e.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-3 rounded",children:[e.jsx("div",{className:"text-sm font-semibold text-red-700 mb-1",children:":"}),e.jsx("div",{className:"text-sm text-red-900 font-mono bg-red-100 p-2 rounded line-through",children:T.oldValue})]}):T.type==="modified"?e.jsxs("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 p-3 rounded",children:[e.jsx("div",{className:"text-sm font-semibold text-yellow-700 mb-2",children:":"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:":"}),e.jsx("div",{className:"text-sm text-gray-900 font-mono bg-red-100 p-2 rounded",children:T.oldValue||"()"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:":"}),e.jsx("div",{className:"text-sm text-gray-900 font-mono bg-green-100 p-2 rounded",children:T.newValue||"()"})]})]})]}):null,_=m==="all"?n:n.filter(T=>T.action===m);return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fB,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-purple-100 text-sm mt-1",children:a})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:":"}),e.jsx("button",{onClick:()=>f("all"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${m==="all"?"bg-purple-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:""}),e.jsx("button",{onClick:()=>f("created"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${m==="created"?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:""}),e.jsx("button",{onClick:()=>f("updated"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${m==="updated"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:""}),e.jsx("button",{onClick:()=>f("deleted"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${m==="deleted"?"bg-red-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:""})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:o?e.jsx("div",{className:"text-center py-8 text-gray-500",children:" ..."}):_.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"  "}):e.jsx("div",{className:"space-y-4",children:_.map(T=>{const E=u.has(T.id);return e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl overflow-hidden",children:[e.jsxs("button",{onClick:()=>g(T.id),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[E?e.jsx(_i,{className:"w-5 h-5 text-gray-400"}):e.jsx(jn,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{className:`px-3 py-1 rounded-lg text-xs font-bold ${y(T.action)}`,children:N(T.action)}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(st,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:T.userName})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(pt,{className:"w-4 h-4"}),e.jsx("span",{children:v(T.timestamp)})]})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[T.changes.length," "]})]}),E&&e.jsxs("div",{className:"px-4 pb-4 pt-2 bg-gray-50 border-t border-gray-200",children:[e.jsx("div",{className:"space-y-3",children:T.changes.map((z,M)=>e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:S(z.field)}),k(z)]},M))}),T.ipAddress&&e.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-300 text-xs text-gray-500",children:["IP : ",T.ipAddress]})]})]},T.id)})})}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[" : ",e.jsx("strong",{children:_.length})]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})}):null},Tk=[{value:"project.created",label:" "},{value:"project.updated",label:" "},{value:"project.deleted",label:" "},{value:"project.status_changed",label:" "},{value:"task.created",label:" "},{value:"task.completed",label:" "},{value:"payment.received",label:" "},{value:"comment.added",label:" "}],bW=({isOpen:s,onClose:t,projectId:r})=>{const[a,n]=w.useState([]),[i,o]=w.useState(!1),[c,u]=w.useState(!1),[h,m]=w.useState(null),[f,p]=w.useState(null),[j,g]=w.useState({name:"",url:"",events:[],active:!0,secret:""});w.useEffect(()=>{if(s){v();const A=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${A}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const A=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(A||"0")*-1)}},[s]);const v=async()=>{o(!0);try{const A=r?`http://localhost:8001/admin/api/projects/${r}/webhooks`:"http://localhost:8001/admin/api/webhooks",Z=await fetch(A,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(Z.ok){const I=await Z.json();n(I.webhooks||[])}else n(y())}catch(A){console.error("Error loading webhooks:",A),n(y())}finally{o(!1)}},y=()=>[{id:1,name:"Slack ",url:"https://hooks.slack.com/services/T00000000/B00000000/XXXXXXXXXXXX",events:["project.status_changed","task.completed"],active:!0,failureCount:0,lastTriggered:new Date(Date.now()-36e5).toISOString()},{id:2,name:"Telegram ",url:"https://api.telegram.org/bot123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11",events:["payment.received","comment.added"],active:!0,failureCount:2,lastTriggered:new Date(Date.now()-72e5).toISOString()}],N=async()=>{if(!j.name||!j.url||j.events.length===0){alert("   ");return}try{const A=r?`http://localhost:8001/admin/api/projects/${r}/webhooks`:"http://localhost:8001/admin/api/webhooks";(await fetch(A,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(j)})).ok&&(await v(),E())}catch(A){console.error("Error creating webhook:",A)}},S=async A=>{try{const Z=r?`http://localhost:8001/admin/api/projects/${r}/webhooks/${A}`:`http://localhost:8001/admin/api/webhooks/${A}`;(await fetch(Z,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(j)})).ok&&(await v(),m(null),E())}catch(Z){console.error("Error updating webhook:",Z)}},k=async A=>{if(confirm(" webhook?"))try{const Z=r?`http://localhost:8001/admin/api/projects/${r}/webhooks/${A}`:`http://localhost:8001/admin/api/webhooks/${A}`;(await fetch(Z,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&await v()}catch(Z){console.error("Error deleting webhook:",Z)}},_=async A=>{p(A);try{const Z=r?`http://localhost:8001/admin/api/projects/${r}/webhooks/${A}/test`:`http://localhost:8001/admin/api/webhooks/${A}/test`;(await fetch(Z,{method:"POST",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok?alert(" webhook  !"):alert("  webhook")}catch(Z){console.error("Error testing webhook:",Z),alert("  webhook")}finally{p(null)}},T=async(A,Z)=>{try{const I=r?`http://localhost:8001/admin/api/projects/${r}/webhooks/${A}/toggle`:`http://localhost:8001/admin/api/webhooks/${A}/toggle`;(await fetch(I,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({active:!Z})})).ok&&await v()}catch(I){console.error("Error toggling webhook:",I)}},E=()=>{g({name:"",url:"",events:[],active:!0,secret:""}),u(!1),m(null)},z=A=>{g({name:A.name,url:A.url,events:A.events,active:A.active,secret:A.secret||""}),m(A.id),u(!0)},M=A=>{j.events.includes(A)?g({...j,events:j.events.filter(Z=>Z!==A)}):g({...j,events:[...j.events,A]})},C=A=>{const Z=new Date(A);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}).format(Z)};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-5xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-600 to-red-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ua,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" Webhooks"}),e.jsx("p",{className:"text-orange-100 text-sm mt-1",children:"   "})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[c?e.jsxs("div",{className:"bg-orange-50 border-2 border-orange-200 rounded-xl p-6 mb-6",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-900 mb-4",children:h?" webhook":"  webhook"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:j.name,onChange:A=>g({...j,name:A.target.value}),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-orange-500 outline-none",placeholder:": Slack "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"URL *"}),e.jsx("input",{type:"url",value:j.url,onChange:A=>g({...j,url:A.target.value}),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-orange-500 outline-none font-mono text-sm",placeholder:"https://hooks.example.com/webhook"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" *"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Tk.map(A=>e.jsxs("label",{className:"flex items-center gap-2 p-3 border-2 border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j.events.includes(A.value),onChange:()=>M(A.value),className:"w-4 h-4 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:A.label})]},A.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Secret ()"}),e.jsx("input",{type:"text",value:j.secret,onChange:A=>g({...j,secret:A.target.value}),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-orange-500 outline-none font-mono text-sm",placeholder:"    "})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"active",checked:j.active,onChange:A=>g({...j,active:A.target.checked}),className:"w-4 h-4 rounded"}),e.jsx("label",{htmlFor:"active",className:"text-sm font-medium text-gray-700",children:""})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx("button",{onClick:()=>h?S(h):N(),className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-semibold",children:h?"":""}),e.jsx("button",{onClick:E,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-semibold",children:""})]})]})]}):e.jsxs("button",{onClick:()=>u(!0),className:"w-full px-4 py-3 mb-6 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-xl hover:from-orange-700 hover:to-red-700 transition-all font-semibold flex items-center justify-center gap-2",children:[e.jsx(Ve,{className:"w-5 h-5"})," webhook"]}),i?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"..."}):a.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Ua,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"Webhooks  "})]}):e.jsx("div",{className:"space-y-4",children:a.map(A=>e.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-900",children:A.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[A.active?e.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded text-xs font-bold flex items-center gap-1",children:[e.jsx(it,{className:"w-3 h-3"}),""]}):e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs font-bold",children:""}),A.failureCount>0&&e.jsxs("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded text-xs font-bold flex items-center gap-1",children:[e.jsx(qe,{className:"w-3 h-3"}),A.failureCount," "]})]})]}),e.jsx("div",{className:"text-sm text-gray-600 font-mono bg-gray-100 px-3 py-2 rounded mb-2",children:A.url}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:A.events.map(Z=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs font-medium",children:Tk.find(I=>I.value===Z)?.label||Z},Z))}),A.lastTriggered&&e.jsxs("div",{className:"text-xs text-gray-500",children:[" : ",C(A.lastTriggered)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>T(A.id,A.active),className:`p-2 rounded-lg transition-colors ${A.active?"bg-gray-100 hover:bg-gray-200 text-gray-700":"bg-green-100 hover:bg-green-200 text-green-700"}`,title:A.active?"":"",children:e.jsx(ss,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>_(A.id),disabled:f===A.id,className:"p-2 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-lg transition-colors disabled:opacity-50",title:"",children:e.jsx(Ua,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>z(A),className:"p-2 bg-yellow-100 hover:bg-yellow-200 text-yellow-700 rounded-lg transition-colors",title:"",children:e.jsx(Zs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>k(A.id),className:"p-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg transition-colors",title:"",children:e.jsx(Xe,{className:"w-4 h-4"})})]})]})},A.id))})]}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end",children:e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})})]})}):null},Ek=[{method:"GET",path:"/admin/api/projects",description:"   ",parameters:[{name:"archived",type:"boolean",required:!1,description:"  "},{name:"status",type:"string",required:!1,description:"  "}],response:{statusCode:200,contentType:"application/json",example:JSON.stringify({projects:[{id:1,title:" 1",status:"in_progress",estimated_cost:1e5}]},null,2)},authentication:!0},{method:"GET",path:"/admin/api/projects/{id}",description:"   ",parameters:[{name:"id",type:"integer",required:!0,description:"ID "}],response:{statusCode:200,contentType:"application/json",example:JSON.stringify({id:1,title:" 1",description:" ",status:"in_progress",estimated_cost:1e5,created_at:"2024-01-01T00:00:00Z"},null,2)},authentication:!0},{method:"POST",path:"/admin/api/projects",description:"  ",requestBody:{contentType:"application/json",example:JSON.stringify({title:" ",description:" ",project_type:"",status:"new",complexity:"medium",estimated_cost:1e5},null,2)},response:{statusCode:201,contentType:"application/json",example:JSON.stringify({id:1,title:" ",status:"new",created_at:"2024-01-01T00:00:00Z"},null,2)},authentication:!0},{method:"PUT",path:"/admin/api/projects/{id}",description:" ",parameters:[{name:"id",type:"integer",required:!0,description:"ID "}],requestBody:{contentType:"application/json",example:JSON.stringify({title:" ",status:"in_progress"},null,2)},response:{statusCode:200,contentType:"application/json",example:JSON.stringify({success:!0,message:" "},null,2)},authentication:!0},{method:"DELETE",path:"/admin/api/projects/{id}",description:" ",parameters:[{name:"id",type:"integer",required:!0,description:"ID "}],response:{statusCode:204,contentType:"application/json",example:JSON.stringify({success:!0,message:" "},null,2)},authentication:!0}],yW=({isOpen:s,onClose:t})=>{const[r,a]=w.useState(new Set),[n,i]=w.useState(null),[o,c]=w.useState("all"),u=f=>{const p=new Set(r);p.has(f)?p.delete(f):p.add(f),a(p)},h=(f,p)=>{navigator.clipboard.writeText(f).then(()=>{i(p),setTimeout(()=>i(null),2e3)})},m=f=>({GET:"bg-blue-100 text-blue-700",POST:"bg-green-100 text-green-700",PUT:"bg-yellow-100 text-yellow-700",DELETE:"bg-red-100 text-red-700",PATCH:"bg-purple-100 text-purple-700"})[f]||"bg-gray-100 text-gray-700";return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-cyan-600 to-blue-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(iE,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"API "}),e.jsx("p",{className:"text-cyan-100 text-sm mt-1",children:"  REST API "})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:":"}),e.jsx("button",{onClick:()=>c("all"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${o==="all"?"bg-cyan-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:""}),e.jsx("button",{onClick:()=>c("projects"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${o==="projects"?"bg-cyan-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:""}),e.jsx("button",{onClick:()=>c("tasks"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${o==="tasks"?"bg-cyan-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:""}),e.jsx("button",{onClick:()=>c("users"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${o==="users"?"bg-cyan-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:""})]})}),e.jsx("div",{className:"px-6 py-4 bg-blue-50 border-b border-blue-200",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Base URL:"}),e.jsx("code",{className:"ml-2 px-2 py-1 bg-white border border-gray-300 rounded text-xs",children:"http://localhost:8001"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Authentication:"}),e.jsx("code",{className:"ml-2 px-2 py-1 bg-white border border-gray-300 rounded text-xs",children:"Basic Auth (admin:qwerty123)"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("div",{className:"space-y-4",children:Ek.map((f,p)=>{const j=r.has(f.path),g=n===f.path;return e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl overflow-hidden",children:[e.jsxs("button",{onClick:()=>u(f.path),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[j?e.jsx(_i,{className:"w-5 h-5 text-gray-400"}):e.jsx(jn,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{className:`px-3 py-1 rounded-lg text-xs font-bold ${m(f.method)}`,children:f.method}),e.jsx("code",{className:"text-sm font-mono text-gray-900",children:f.path}),f.authentication&&e.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 rounded text-xs font-medium",children:" Auth"})]}),e.jsx("div",{className:"text-sm text-gray-600",children:f.description})]}),j&&e.jsxs("div",{className:"px-4 pb-4 pt-2 bg-gray-50 border-t border-gray-200",children:[f.parameters&&f.parameters.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"text-sm font-bold text-gray-900 mb-2",children:":"}),e.jsx("div",{className:"space-y-2",children:f.parameters.map((v,y)=>e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("code",{className:"text-sm font-mono font-bold text-blue-600",children:v.name}),e.jsx("span",{className:"text-xs text-gray-500",children:v.type}),v.required&&e.jsx("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 rounded text-xs font-bold",children:"required"})]}),e.jsx("div",{className:"text-sm text-gray-600",children:v.description})]},y))})]}),f.requestBody&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h5",{className:"text-sm font-bold text-gray-900",children:"Request Body:"}),e.jsx("button",{onClick:()=>h(f.requestBody.example,f.path),className:"p-1 hover:bg-gray-200 rounded transition-colors",title:"",children:g?e.jsx(ss,{className:"w-4 h-4 text-green-600"}):e.jsx(Ks,{className:"w-4 h-4 text-gray-600"})})]}),e.jsx("div",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto",children:e.jsx("pre",{className:"text-xs font-mono",children:f.requestBody.example})})]}),f.response&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h5",{className:"text-sm font-bold text-gray-900",children:["Response (",f.response.statusCode,"):"]}),e.jsx("button",{onClick:()=>h(f.response.example,f.path+"-response"),className:"p-1 hover:bg-gray-200 rounded transition-colors",title:"",children:n===f.path+"-response"?e.jsx(ss,{className:"w-4 h-4 text-green-600"}):e.jsx(Ks,{className:"w-4 h-4 text-gray-600"})})]}),e.jsx("div",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto",children:e.jsx("pre",{className:"text-xs font-mono",children:f.response.example})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h5",{className:"text-sm font-bold text-gray-900",children:"cURL Example:"}),e.jsx("button",{onClick:()=>h(`curl -X ${f.method} http://localhost:8001${f.path} \\
  -H "Authorization: Basic YWRtaW46cXdlcnR5MTIz" \\
  -H "Content-Type: application/json"${f.requestBody?` \\
  -d '${f.requestBody.example.replace(/\n/g,"").replace(/\s+/g," ")}'`:""}`,f.path+"-curl"),className:"p-1 hover:bg-gray-200 rounded transition-colors",title:"",children:n===f.path+"-curl"?e.jsx(ss,{className:"w-4 h-4 text-green-600"}):e.jsx(Ks,{className:"w-4 h-4 text-gray-600"})})]}),e.jsx("div",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto",children:e.jsx("pre",{className:"text-xs font-mono",children:`curl -X ${f.method} http://localhost:8001${f.path} \\
  -H "Authorization: Basic YWRtaW46cXdlcnR5MTIz" \\
  -H "Content-Type: application/json"${f.requestBody?` \\
  -d '${f.requestBody.example.replace(/\n/g,"").replace(/\s+/g," ")}'`:""}`})})]})]})]},p)})})}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[" : ",e.jsx("strong",{children:Ek.length})]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})}):null},U0=["-"," ","","","",""],vW=({isOpen:s,onClose:t,onSelectTemplate:r})=>{const[a,n]=w.useState([]),[i,o]=w.useState(!1),[c,u]=w.useState(!1),[h,m]=w.useState(null),[f,p]=w.useState("all"),[j,g]=w.useState(""),[v,y]=w.useState({name:"",description:"",category:U0[0],project_type:"",complexity:"medium",estimated_hours:0,estimated_cost:0,tasks:[]}),[N,S]=w.useState({title:"",description:"",estimated_hours:0});w.useEffect(()=>{if(s){k();const R=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${R}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const R=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(R||"0")*-1)}},[s]);const k=async()=>{o(!0);try{const R=await fetch("http://localhost:8001/admin/api/project-templates",{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(R.ok){const q=await R.json();n(q.templates||[])}else n(_())}catch(R){console.error("Error loading templates:",R),n(_())}finally{o(!1)}},_=()=>[{id:1,name:"- ()",description:" -  ,   ",category:"-",project_type:"-",complexity:"medium",estimated_hours:120,estimated_cost:15e4,tasks:[{title:" ",description:" ",estimated_hours:20},{title:"",description:"HTML/CSS ",estimated_hours:30},{title:"",description:"API   ",estimated_hours:40},{title:" ",description:" ",estimated_hours:20},{title:"",description:"QA ",estimated_hours:10}],isFavorite:!0,usageCount:15},{id:2,name:" ",description:"    -",category:"-",project_type:" ",complexity:"simple",estimated_hours:80,estimated_cost:1e5,tasks:[{title:"",description:" ",estimated_hours:15},{title:"",description:" ",estimated_hours:25},{title:"CMS",description:" ",estimated_hours:30},{title:"",description:"",estimated_hours:10}],isFavorite:!1,usageCount:8},{id:3,name:" ",description:"   React Native",category:" ",project_type:" ",complexity:"complex",estimated_hours:200,estimated_cost:25e4,tasks:[{title:"UX/UI ",description:" ",estimated_hours:30},{title:" iOS",description:"iOS ",estimated_hours:70},{title:" Android",description:"Android ",estimated_hours:70},{title:"Backend API",description:" ",estimated_hours:30}],isFavorite:!0,usageCount:5}],T=async()=>{if(!v.name||!v.description){alert("  ");return}try{(await fetch("http://localhost:8001/admin/api/project-templates",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(v)})).ok&&(await k(),C())}catch(R){console.error("Error creating template:",R)}},E=async R=>{try{(await fetch(`http://localhost:8001/admin/api/project-templates/${R}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(v)})).ok&&(await k(),m(null),C())}catch(q){console.error("Error updating template:",q)}},z=async R=>{if(confirm(" ?"))try{(await fetch(`http://localhost:8001/admin/api/project-templates/${R}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&await k()}catch(q){console.error("Error deleting template:",q)}},M=async R=>{try{(await fetch(`http://localhost:8001/admin/api/project-templates/${R}/favorite`,{method:"POST",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&await k()}catch(q){console.error("Error toggling favorite:",q)}},C=()=>{y({name:"",description:"",category:U0[0],project_type:"",complexity:"medium",estimated_hours:0,estimated_cost:0,tasks:[]}),u(!1),m(null)},A=R=>{y({name:R.name,description:R.description,category:R.category,project_type:R.project_type,complexity:R.complexity,estimated_hours:R.estimated_hours,estimated_cost:R.estimated_cost,tasks:[...R.tasks]}),m(R.id),u(!0)},Z=()=>{N.title&&(y({...v,tasks:[...v.tasks,{...N}]}),S({title:"",description:"",estimated_hours:0}))},I=R=>{y({...v,tasks:v.tasks.filter((q,J)=>J!==R)})},V=a.filter(R=>f==="all"||R.category===f).filter(R=>R.name.toLowerCase().includes(j.toLowerCase()));return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-violet-600 to-purple-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ie,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-violet-100 text-sm mt-1",children:"     "})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:[e.jsx("div",{className:"flex items-center gap-4 mb-3",children:e.jsx("input",{type:"text",value:j,onChange:R=>g(R.target.value),placeholder:" ...",className:"flex-1 px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-violet-500 outline-none"})}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:":"}),e.jsx("button",{onClick:()=>p("all"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${f==="all"?"bg-violet-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:""}),U0.map(R=>e.jsx("button",{onClick:()=>p(R),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${f===R?"bg-violet-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:R},R))]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[c?e.jsxs("div",{className:"bg-violet-50 border-2 border-violet-200 rounded-xl p-6 mb-6",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-900 mb-4",children:h?" ":"  "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:v.name,onChange:R=>y({...v,name:R.target.value}),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-violet-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("select",{value:v.category,onChange:R=>y({...v,category:R.target.value}),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-violet-500 outline-none",children:U0.map(R=>e.jsx("option",{value:R,children:R},R))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" *"}),e.jsx("textarea",{value:v.description,onChange:R=>y({...v,description:R.target.value}),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-violet-500 outline-none",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"number",value:v.estimated_hours,onChange:R=>y({...v,estimated_hours:Number(R.target.value)}),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-violet-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"number",value:v.estimated_cost,onChange:R=>y({...v,estimated_cost:Number(R.target.value)}),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-violet-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:v.complexity,onChange:R=>y({...v,complexity:R.target.value}),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-violet-500 outline-none",children:[e.jsx("option",{value:"simple",children:""}),e.jsx("option",{value:"medium",children:""}),e.jsx("option",{value:"complex",children:""})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("div",{className:"space-y-2 mb-3",children:v.tasks.map((R,q)=>e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-white border border-gray-300 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm",children:R.title}),e.jsxs("div",{className:"text-xs text-gray-500",children:[R.estimated_hours," "]})]}),e.jsx("button",{onClick:()=>I(q),className:"p-1 text-red-600 hover:bg-red-100 rounded",children:e.jsx(Xe,{className:"w-4 h-4"})})]},q))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:N.title,onChange:R=>S({...N,title:R.target.value}),placeholder:" ",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg"}),e.jsx("input",{type:"number",value:N.estimated_hours,onChange:R=>S({...N,estimated_hours:Number(R.target.value)}),placeholder:"",className:"w-24 px-3 py-2 border border-gray-300 rounded-lg"}),e.jsx("button",{onClick:Z,className:"px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700",children:e.jsx(Ve,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx("button",{onClick:()=>h?E(h):T(),className:"flex-1 px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors font-semibold",children:h?"":""}),e.jsx("button",{onClick:C,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-semibold",children:""})]})]})]}):e.jsxs("button",{onClick:()=>u(!0),className:"w-full px-4 py-3 mb-6 bg-gradient-to-r from-violet-600 to-purple-600 text-white rounded-xl hover:from-violet-700 hover:to-purple-700 transition-all font-semibold flex items-center justify-center gap-2",children:[e.jsx(Ve,{className:"w-5 h-5"})," "]}),i?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"..."}):V.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Ie,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"  "})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:V.map(R=>e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4 hover:border-violet-300 transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-900",children:R.name}),R.isFavorite&&e.jsx(Ps,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:R.description}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"px-2 py-1 bg-violet-100 text-violet-700 rounded text-xs font-medium",children:R.category}),e.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs",children:[R.estimated_hours," "]}),e.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs",children:[R.estimated_cost.toLocaleString(),""]}),e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs",children:[R.tasks.length," "]})]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("button",{onClick:()=>M(R.id),className:"p-2 hover:bg-gray-100 rounded transition-colors",title:" ",children:e.jsx(Ps,{className:`w-4 h-4 ${R.isFavorite?"text-yellow-500 fill-yellow-500":"text-gray-400"}`})}),e.jsx("button",{onClick:()=>A(R),className:"p-2 hover:bg-gray-100 rounded transition-colors",title:"",children:e.jsx(Zs,{className:"w-4 h-4 text-gray-600"})}),e.jsx("button",{onClick:()=>z(R.id),className:"p-2 hover:bg-gray-100 rounded transition-colors",title:"",children:e.jsx(Xe,{className:"w-4 h-4 text-red-600"})})]})]}),e.jsx("div",{className:"flex gap-2 mt-4",children:e.jsxs("button",{onClick:()=>{r(R),t()},className:"flex-1 px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors font-semibold flex items-center justify-center gap-2",children:[e.jsx(Ks,{className:"w-4 h-4"}),""]})}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500 text-right",children:[" ",R.usageCount," "]})]},R.id))})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[" : ",e.jsx("strong",{children:V.length})]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})}):null},jW=({isOpen:s,onClose:t,onLoadDraft:r,currentFormData:a})=>{const[n,i]=w.useState([]),[o,c]=w.useState(null),[u,h]=w.useState(!0),[m,f]=w.useState(30);w.useEffect(()=>{s&&j()},[s]),w.useEffect(()=>{if(s){const E=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${E}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const E=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(E||"0")*-1)}},[s]),w.useEffect(()=>{if(!u||!a)return;const E=setInterval(()=>{p(a)&&y(a)},m*1e3);return()=>clearInterval(E)},[u,m,a]);const p=E=>E&&E.name&&E.name.trim().length>0,j=async()=>{try{const E=await fetch("http://localhost:8001/admin/api/drafts",{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(E.ok){const z=await E.json();i(z.drafts||[])}else g()}catch(E){console.error("Error loading drafts:",E),g()}},g=()=>{const E=localStorage.getItem("project_drafts");if(E)try{const z=JSON.parse(E);i(z)}catch(z){console.error("Error parsing drafts:",z)}},v=E=>{localStorage.setItem("project_drafts",JSON.stringify(E))},y=w.useCallback(async E=>{const M={id:"auto_"+Date.now(),name:E.name||" ",description:E.description||"",client_id:E.client_id||null,project_type:E.project_type||"",project_cost:E.project_cost||0,deadline:E.deadline||"",assigned_to_id:E.assigned_to_id||null,status:E.status||"planned",savedAt:new Date().toISOString(),autoSaved:!0};try{if((await fetch("http://localhost:8001/admin/api/drafts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(M)})).ok)await j();else{const A=[...n,M];i(A),v(A)}}catch(C){console.error("Error auto-saving draft:",C);const A=[...n,M];i(A),v(A)}},[n]),N=async()=>{if(!a||!p(a))return;const z={id:"manual_"+Date.now(),name:a.name||" ",description:a.description||"",client_id:a.client_id||null,project_type:a.project_type||"",project_cost:a.project_cost||0,deadline:a.deadline||"",assigned_to_id:a.assigned_to_id||null,status:a.status||"planned",savedAt:new Date().toISOString(),autoSaved:!1};try{if((await fetch("http://localhost:8001/admin/api/drafts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(z)})).ok)await j();else{const C=[...n,z];i(C),v(C)}}catch(M){console.error("Error saving draft:",M);const C=[...n,z];i(C),v(C)}},S=async E=>{if(confirm(" ?"))try{if((await fetch(`http://localhost:8001/admin/api/drafts/${E}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok)await j();else{const M=n.filter(C=>C.id!==E);i(M),v(M)}}catch(z){console.error("Error deleting draft:",z);const M=n.filter(C=>C.id!==E);i(M),v(M)}},k=E=>{r(E),t()},_=E=>{const z=new Date(E);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}).format(z)},T=E=>{const z=Date.now(),M=new Date(E).getTime(),C=z-M,A=Math.floor(C/6e4),Z=Math.floor(C/36e5),I=Math.floor(C/864e5);return A<1?" ":A<60?`${A}  `:Z<24?`${Z}  `:`${I}  `};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ka,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-purple-100 text-sm mt-1",children:"   "})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"px-6 py-4 bg-purple-50 border-b border-purple-200 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:u,onChange:E=>h(E.target.checked),className:"w-5 h-5 text-purple-600 rounded focus:ring-2 focus:ring-purple-500"}),e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:":"}),e.jsxs("select",{value:m,onChange:E=>f(Number(E.target.value)),className:"px-3 py-1 text-sm border-2 border-purple-300 rounded-lg focus:border-purple-500 focus:ring-2 focus:ring-purple-200 outline-none",disabled:!u,children:[e.jsx("option",{value:10,children:"10 "}),e.jsx("option",{value:30,children:"30 "}),e.jsx("option",{value:60,children:"1 "}),e.jsx("option",{value:120,children:"2 "}),e.jsx("option",{value:300,children:"5 "})]})]})]}),e.jsxs("button",{onClick:N,disabled:!a||!p(a),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all font-semibold text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ka,{className:"w-4 h-4"})," "]})]}),u&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-purple-700",children:[e.jsx(qe,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:["    ",m," "]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ie,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:"  "}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"    "})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(E=>e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4 hover:border-purple-400 hover:shadow-lg transition-all cursor-pointer group",onClick:()=>c(E),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-gray-900 text-lg mb-1 line-clamp-1",children:E.name}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-2",children:E.description||" "})]}),E.autoSaved&&e.jsx("span",{className:"ml-2 px-2 py-0.5 bg-purple-100 text-purple-700 text-xs font-semibold rounded-full",children:""})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:":"})," ",E.project_type||""]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:":"})," ",E.project_cost?`${E.project_cost.toLocaleString()} `:""]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:":"})," ",E.deadline?new Date(E.deadline).toLocaleDateString("ru-RU"):""]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:":"})," ",E.status||""]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx(Ue,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:T(E.savedAt)}),e.jsxs("span",{className:"text-gray-400",children:["(",_(E.savedAt),")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:z=>{z.stopPropagation(),k(E)},className:"px-3 py-1 bg-purple-600 text-white text-xs font-semibold rounded-lg hover:bg-purple-700 transition-colors",children:""}),e.jsx("button",{onClick:z=>{z.stopPropagation(),S(E.id)},className:"p-1 text-red-600 hover:bg-red-100 rounded transition-colors",title:"",children:e.jsx(Xe,{className:"w-4 h-4"})})]})]})]},E.id))})}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center flex-shrink-0",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[" : ",e.jsx("span",{className:"font-bold text-purple-600",children:n.length})]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})}):null},wW=[{id:"project_created",name:" ",description:"    ",enabled:!0,icon:Ie,category:"projects"},{id:"project_status_changed",name:"  ",description:"    ",enabled:!0,icon:ir,category:"projects"},{id:"project_deadline_approaching",name:" ",description:"  3    ",enabled:!0,icon:Ue,category:"projects"},{id:"project_completed",name:" ",description:"   ",enabled:!0,icon:it,category:"projects"},{id:"project_assigned",name:" ",description:"    ",enabled:!0,icon:tt,category:"projects"},{id:"task_created",name:" ",description:"      ",enabled:!0,icon:Ie,category:"tasks"},{id:"task_assigned",name:" ",description:"    ",enabled:!0,icon:tt,category:"tasks"},{id:"task_deadline_approaching",name:"  ",description:"  1    ",enabled:!0,icon:Ue,category:"tasks"},{id:"task_completed",name:" ",description:"   ",enabled:!1,icon:it,category:"tasks"},{id:"task_comment_added",name:"   ",description:"     ",enabled:!1,icon:gi,category:"tasks"},{id:"payment_received",name:" ",description:"     ",enabled:!0,icon:it,category:"payments"},{id:"payment_due",name:" ",description:"   ",enabled:!0,icon:Ue,category:"payments"},{id:"payment_overdue",name:" ",description:"   ",enabled:!0,icon:ir,category:"payments"},{id:"team_member_added",name:" ",description:"      ",enabled:!1,icon:tt,category:"team"},{id:"team_member_removed",name:" ",description:"     ",enabled:!1,icon:tt,category:"team"},{id:"team_mention",name:"  ",description:"     ",enabled:!0,icon:Zr,category:"team"}],NW=({isOpen:s,onClose:t})=>{const[r,a]=w.useState(wW),[n,i]=w.useState("admin@example.com"),[o,c]=w.useState("instant"),[u,h]=w.useState(!1),[m,f]=w.useState("22:00"),[p,j]=w.useState("08:00"),[g,v]=w.useState(!1),[y,N]=w.useState(!1);w.useEffect(()=>{s&&S()},[s]),w.useEffect(()=>{if(s){const C=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${C}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const C=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(C||"0")*-1)}},[s]);const S=async()=>{try{const C=await fetch("http://localhost:8001/admin/api/notification-settings",{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(C.ok){const A=await C.json();A.settings&&a(A.settings),A.email&&i(A.email),A.frequency&&c(A.frequency),A.quietHours&&(h(A.quietHours.enabled),f(A.quietHours.start),j(A.quietHours.end))}}catch(C){console.error("Error loading settings:",C)}},k=C=>{a(A=>A.map(Z=>Z.id===C?{...Z,enabled:!Z.enabled}:Z))},_=async()=>{v(!0);try{(await fetch("http://localhost:8001/admin/api/notification-settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({settings:r,email:n,frequency:o,quietHours:{enabled:u,start:m,end:p}})})).ok?alert("  !"):alert("  ")}catch(C){console.error("Error saving settings:",C),alert("  ")}finally{v(!1)}},T=async()=>{N(!0);try{(await fetch("http://localhost:8001/admin/api/test-email",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({email:n})})).ok?alert("    "+n):alert("   ")}catch(C){console.error("Error sending test email:",C),alert("   ")}finally{N(!1)}},E=C=>{a(A=>A.map(Z=>Z.category===C?{...Z,enabled:!0}:Z))},z=C=>{a(A=>A.map(Z=>Z.category===C?{...Z,enabled:!1}:Z))};if(!s)return null;const M={projects:{name:"",icon:Ie},tasks:{name:"",icon:it},payments:{name:"",icon:ir},team:{name:"",icon:tt}};return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-5xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(gi,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"Email-"}),e.jsx("p",{className:"text-blue-100 text-sm mt-1",children:",      "})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4",children:[e.jsxs("h4",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(gi,{className:"w-5 h-5 text-blue-600"})," "]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email-"}),e.jsx("input",{type:"email",value:n,onChange:C=>i(C.target.value),className:"w-full px-4 py-2 border-2 border-blue-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none",placeholder:"your@email.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsxs("select",{value:o,onChange:C=>c(C.target.value),className:"w-full px-4 py-2 border-2 border-blue-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none",children:[e.jsx("option",{value:"instant",children:""}),e.jsx("option",{value:"daily",children:" "}),e.jsx("option",{value:"weekly",children:" "})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:u,onChange:C=>h(C.target.checked),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"  (  )"})]}),u&&e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-4 pl-7",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:""}),e.jsx("input",{type:"time",value:m,onChange:C=>f(C.target.value),className:"w-full px-3 py-2 border-2 border-blue-300 rounded-lg focus:border-blue-500 outline-none text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:""}),e.jsx("input",{type:"time",value:p,onChange:C=>j(C.target.value),className:"w-full px-3 py-2 border-2 border-blue-300 rounded-lg focus:border-blue-500 outline-none text-sm"})]})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{onClick:T,disabled:y,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold text-sm disabled:opacity-50",children:[e.jsx(Zr,{className:"w-4 h-4"}),y?"...":"  "]})})]}),Object.entries(M).map(([C,A])=>{const Z=r.filter(V=>V.category===C),I=Z.filter(V=>V.enabled).length;return e.jsxs("div",{className:"bg-gray-50 border-2 border-gray-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(A.icon,{className:"w-5 h-5 text-gray-600"}),A.name,e.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",I,"/",Z.length,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>E(C),className:"text-xs px-3 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-semibold",children:" "}),e.jsx("button",{onClick:()=>z(C),className:"text-xs px-3 py-1 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-semibold",children:" "})]})]}),e.jsx("div",{className:"space-y-2",children:Z.map(V=>e.jsxs("label",{className:"flex items-start gap-3 p-3 bg-white rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:V.enabled,onChange:()=>k(V.id),className:"mt-1 w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V.icon,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"font-semibold text-gray-900 text-sm",children:V.name})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:V.description})]})]},V.id))})]},C)})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center flex-shrink-0",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[":"," ",e.jsxs("span",{className:"font-bold text-blue-600",children:[r.filter(C=>C.enabled).length,"/",r.length]})," ",""]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""}),e.jsx("button",{onClick:_,disabled:g,className:"px-6 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all font-semibold disabled:opacity-50",children:g?"...":" "})]})]})]})})},_W=({isOpen:s,onClose:t,projectId:r,projectName:a})=>{const[n,i]=w.useState([]),[o,c]=w.useState([]),[u,h]=w.useState(""),[m,f]=w.useState("view"),[p,j]=w.useState("view"),[g,v]=w.useState(7),[y,N]=w.useState(""),[S,k]=w.useState(null),[_,T]=w.useState(!1),[E,z]=w.useState("links");w.useEffect(()=>{s&&r&&M()},[s,r]),w.useEffect(()=>{if(s){const ee=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${ee}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const ee=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(ee||"0")*-1)}},[s]);const M=async()=>{if(r){T(!0);try{const ee=await fetch(`http://localhost:8001/admin/api/projects/${r}/sharing`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(ee.ok){const te=await ee.json();i(te.links||[]),c(te.users||[])}else i([{id:"1",url:"https://crm.example.com/share/abc123def456",token:"abc123def456",expiresAt:new Date(Date.now()+10080*60*1e3).toISOString(),accessLevel:"view",password:null,viewCount:15,createdAt:new Date().toISOString(),createdBy:"admin"}]),c([{id:1,email:"manager@example.com",firstName:"",lastName:"",accessLevel:"comment",addedAt:new Date().toISOString(),addedBy:"admin"}])}catch(ee){console.error("Error loading sharing:",ee)}finally{T(!1)}}},C=async()=>{if(r)try{const ee=g?new Date(Date.now()+g*24*60*60*1e3).toISOString():null;(await fetch(`http://localhost:8001/admin/api/projects/${r}/sharing/links`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({accessLevel:p,expiresAt:ee,password:y||null})})).ok&&(await M(),N(""))}catch(ee){console.error("Error generating link:",ee)}},A=async ee=>{if(confirm(" ?     ."))try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/sharing/links/${ee}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&await M()}catch(te){console.error("Error revoking link:",te)}},Z=async()=>{if(!(!u.trim()||!r))try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/sharing/users`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({email:u,accessLevel:m})})).ok&&(h(""),await M())}catch(ee){console.error("Error adding user:",ee)}},I=async ee=>{if(confirm("    ?"))try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/sharing/users/${ee}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&await M()}catch(te){console.error("Error removing user:",te)}},V=async(ee,te)=>{try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/sharing/users/${ee}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({accessLevel:te})})).ok&&await M()}catch(K){console.error("Error changing access:",K)}},R=(ee,te)=>{navigator.clipboard.writeText(ee).then(()=>{k(te),setTimeout(()=>k(null),2e3)})},q=ee=>{const te=new Date(ee);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}).format(te)},J=ee=>{switch(ee){case"view":return"bg-blue-100 text-blue-700";case"comment":return"bg-green-100 text-green-700";case"edit":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}},se=ee=>{switch(ee){case"view":return e.jsx(Ft,{className:"w-3.5 h-3.5"});case"comment":return e.jsx(gi,{className:"w-3.5 h-3.5"});case"edit":return e.jsx(kn,{className:"w-3.5 h-3.5"});default:return e.jsx(Er,{className:"w-3.5 h-3.5"})}},Y=ee=>{switch(ee){case"view":return"";case"comment":return"";case"edit":return"";default:return ee}};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-5xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-teal-600 to-cyan-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(mN,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-teal-100 text-sm mt-1",children:a})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex border-b border-gray-200 bg-gray-50 flex-shrink-0",children:[e.jsxs("button",{onClick:()=>z("links"),className:`flex-1 px-6 py-3 font-semibold transition-colors flex items-center justify-center gap-2 ${E==="links"?"bg-white border-b-2 border-teal-600 text-teal-600":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(vl,{className:"w-5 h-5"}),"  (",n.length,")"]}),e.jsxs("button",{onClick:()=>z("users"),className:`flex-1 px-6 py-3 font-semibold transition-colors flex items-center justify-center gap-2 ${E==="users"?"bg-white border-b-2 border-teal-600 text-teal-600":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(tt,{className:"w-5 h-5"}),"  (",o.length,")"]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:E==="links"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-teal-50 border-2 border-teal-200 rounded-xl p-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-4",children:"  "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsxs("select",{value:p,onChange:ee=>j(ee.target.value),className:"w-full px-4 py-2 border-2 border-teal-300 rounded-lg focus:border-teal-500 focus:ring-2 focus:ring-teal-200 outline-none",children:[e.jsx("option",{value:"view",children:" "}),e.jsx("option",{value:"comment",children:"  "}),e.jsx("option",{value:"edit",children:" "})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsxs("select",{value:g||"",onChange:ee=>v(ee.target.value?Number(ee.target.value):null),className:"w-full px-4 py-2 border-2 border-teal-300 rounded-lg focus:border-teal-500 focus:ring-2 focus:ring-teal-200 outline-none",children:[e.jsx("option",{value:"1",children:"1 "}),e.jsx("option",{value:"7",children:"7 "}),e.jsx("option",{value:"30",children:"30 "}),e.jsx("option",{value:"",children:" "})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" ()"}),e.jsx("input",{type:"text",value:y,onChange:ee=>N(ee.target.value),className:"w-full px-4 py-2 border-2 border-teal-300 rounded-lg focus:border-teal-500 focus:ring-2 focus:ring-teal-200 outline-none",placeholder:" "})]})]}),e.jsxs("button",{onClick:C,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-teal-600 to-cyan-600 text-white rounded-lg hover:from-teal-700 hover:to-cyan-700 transition-all font-semibold",children:[e.jsx(vl,{className:"w-5 h-5"})," "]})]}),_?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"..."}):n.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"  .  !"}):e.jsx("div",{className:"space-y-3",children:n.map(ee=>e.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4 hover:border-teal-400 transition-all",children:e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-semibold flex items-center gap-1 ${J(ee.accessLevel)}`,children:[se(ee.accessLevel),Y(ee.accessLevel)]}),ee.password&&e.jsxs("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-700 rounded-full text-xs font-semibold flex items-center gap-1",children:[e.jsx(Er,{className:"w-3.5 h-3.5"})," "]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("input",{type:"text",value:ee.url,readOnly:!0,className:"flex-1 px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-sm font-mono"}),e.jsx("button",{onClick:()=>R(ee.url,ee.id),className:"px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors flex items-center gap-2 font-semibold",children:S===ee.id?e.jsxs(e.Fragment,{children:[e.jsx(ss,{className:"w-4 h-4"}),"!"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ks,{className:"w-4 h-4"}),""]})})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ft,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[": ",ee.viewCount]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ue,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[": ",q(ee.createdAt)]})]}),ee.expiresAt&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ue,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[": ",q(ee.expiresAt)]})]})]})]}),e.jsx("button",{onClick:()=>A(ee.id),className:"ml-4 p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:" ",children:e.jsx(Xe,{className:"w-5 h-5"})})]})},ee.id))})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-cyan-50 border-2 border-cyan-200 rounded-xl p-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-4",children:" "}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"email",value:u,onChange:ee=>h(ee.target.value),className:"flex-1 px-4 py-2 border-2 border-cyan-300 rounded-lg focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none",placeholder:"Email "}),e.jsxs("select",{value:m,onChange:ee=>f(ee.target.value),className:"px-4 py-2 border-2 border-cyan-300 rounded-lg focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none",children:[e.jsx("option",{value:"view",children:""}),e.jsx("option",{value:"comment",children:""}),e.jsx("option",{value:"edit",children:""})]}),e.jsxs("button",{onClick:Z,disabled:!u.trim(),className:"px-6 py-2 bg-gradient-to-r from-teal-600 to-cyan-600 text-white rounded-lg hover:from-teal-700 hover:to-cyan-700 transition-all font-semibold disabled:opacity-50 flex items-center gap-2",children:[e.jsx(gi,{className:"w-5 h-5"}),""]})]})]}),_?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"..."}):o.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"  "}):e.jsx("div",{className:"space-y-3",children:o.map(ee=>e.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4 hover:border-cyan-400 transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-teal-500 to-cyan-500 rounded-full flex items-center justify-center text-white font-bold",children:ee.firstName[0]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-gray-900",children:[ee.firstName," ",ee.lastName]}),e.jsx("div",{className:"text-sm text-gray-600",children:ee.email}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[": ",q(ee.addedAt)]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:ee.accessLevel,onChange:te=>V(ee.id,te.target.value),className:"px-3 py-2 border-2 border-cyan-300 rounded-lg focus:border-cyan-500 outline-none text-sm",children:[e.jsx("option",{value:"view",children:""}),e.jsx("option",{value:"comment",children:""}),e.jsx("option",{value:"edit",children:""})]}),e.jsx("button",{onClick:()=>I(ee.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:" ",children:e.jsx(Xe,{className:"w-5 h-5"})})]})]})},ee.id))})]})}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end flex-shrink-0",children:e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})})]})}):null},V0=["","","","","","","","",""],Ak={:"#3B82F6",:"#EC4899",:"#10B981",:"#F59E0B",:"#8B5CF6",:"#14B8A6",:"#6366F1",:"#EF4444",:"#6B7280"},kW=({isOpen:s,onClose:t,projectId:r,projectName:a,totalBudget:n})=>{const[i,o]=w.useState([]),[c,u]=w.useState(!1),[h,m]=w.useState(null),[f,p]=w.useState({category:V0[0],description:"",plannedAmount:0,actualAmount:0,date:new Date().toISOString().slice(0,10)}),[j,g]=w.useState(!1);w.useEffect(()=>{s&&r&&v()},[s,r]),w.useEffect(()=>{if(s){const C=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${C}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const C=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(C||"0")*-1)}},[s]);const v=async()=>{if(r){g(!0);try{const C=await fetch(`http://localhost:8001/admin/api/projects/${r}/budget`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(C.ok){const A=await C.json();o(A.items||[])}else o([{id:1,category:"",description:" ",plannedAmount:15e4,actualAmount:135e3,date:"2025-01-10",createdBy:"admin"},{id:2,category:"",description:"UI/UX ",plannedAmount:8e4,actualAmount:85e3,date:"2025-01-15",createdBy:"admin"},{id:3,category:"",description:"   ",plannedAmount:3e4,actualAmount:3e4,date:"2025-01-20",createdBy:"admin"}])}catch(C){console.error("Error loading budget items:",C)}finally{g(!1)}}},y=async()=>{if(f.description.trim())try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/budget`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(f)})).ok&&(p({category:V0[0],description:"",plannedAmount:0,actualAmount:0,date:new Date().toISOString().slice(0,10)}),u(!1),await v())}catch(C){console.error("Error adding item:",C)}},N=async C=>{if(confirm("   ?"))try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/budget/${C}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&await v()}catch(A){console.error("Error deleting item:",A)}},S=()=>{const C=i.reduce((V,R)=>V+R.plannedAmount,0),A=i.reduce((V,R)=>V+R.actualAmount,0),Z=n-A,I=A-C;return{totalPlanned:C,totalActual:A,remaining:Z,variance:I}},k=()=>{const C=new Map;return i.forEach(A=>{const Z=C.get(A.category)||{planned:0,actual:0};C.set(A.category,{planned:Z.planned+A.plannedAmount,actual:Z.actual+A.actualAmount})}),Array.from(C.entries()).map(([A,Z])=>({name:A,planned:Z.planned,actual:Z.actual,color:Ak[A]||"#6B7280"}))},_=C=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0}).format(C),T=C=>{const A=new Date(C);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"short",year:"numeric"}).format(A)};if(!s)return null;const E=S(),z=k(),M=E.totalActual/n*100;return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ge,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-emerald-100 text-sm mt-1",children:a})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200 flex-shrink-0",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 border-2 border-blue-200",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-1",children:" "}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:_(n)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border-2 border-purple-200",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-1",children:""}),e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:_(E.totalPlanned)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border-2 border-emerald-200",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-1",children:""}),e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:_(E.totalActual)}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[M.toFixed(1),"% "]})]}),e.jsxs("div",{className:`bg-white rounded-xl p-4 border-2 ${E.remaining>=0?"border-green-200":"border-red-200"}`,children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-1",children:""}),e.jsx("div",{className:`text-2xl font-bold ${E.remaining>=0?"text-green-600":"text-red-600"}`,children:_(E.remaining)}),E.variance!==0&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[E.variance>0?e.jsx(ct,{className:"w-3.5 h-3.5 text-red-600"}):e.jsx(Sa,{className:"w-3.5 h-3.5 text-green-600"}),e.jsxs("span",{className:`text-xs ${E.variance>0?"text-red-600":"text-green-600"}`,children:[Math.abs(E.variance).toLocaleString(),"   "]})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:" "}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[M.toFixed(1),"%"]})]}),e.jsx("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all ${M>100?"bg-red-500":M>80?"bg-yellow-500":"bg-emerald-500"}`,style:{width:`${Math.min(M,100)}%`}})}),M>90&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-orange-600",children:[e.jsx(qe,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"!   "})]})]})]}),z.length>0&&e.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-emerald-50 to-teal-50 border-b border-gray-200 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(yp,{className:"w-5 h-5 text-emerald-600"}),e.jsx("h4",{className:"font-bold text-gray-900",children:"  "})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:z.map(C=>e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:C.color}}),e.jsx("span",{className:"text-xs font-semibold text-gray-700",children:C.name})]}),e.jsx("div",{className:"text-sm font-bold text-gray-900",children:_(C.actual)}),e.jsxs("div",{className:"text-xs text-gray-500",children:[": ",_(C.planned)]})]},C.name))})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[!c&&e.jsxs("button",{onClick:()=>u(!0),className:"w-full mb-4 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-lg hover:from-emerald-700 hover:to-teal-700 transition-all font-semibold",children:[e.jsx(Ve,{className:"w-5 h-5"})," "]}),c&&e.jsxs("div",{className:"mb-4 bg-emerald-50 border-2 border-emerald-200 rounded-xl p-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-3",children:"  "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsx("select",{value:f.category,onChange:C=>p({...f,category:C.target.value}),className:"w-full px-4 py-2 border-2 border-emerald-300 rounded-lg focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none",children:V0.map(C=>e.jsx("option",{value:C,children:C},C))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsx("input",{type:"date",value:f.date,onChange:C=>p({...f,date:C.target.value}),className:"w-full px-4 py-2 border-2 border-emerald-300 rounded-lg focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsx("input",{type:"text",value:f.description,onChange:C=>p({...f,description:C.target.value}),className:"w-full px-4 py-2 border-2 border-emerald-300 rounded-lg focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none",placeholder:" ..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"  ()"}),e.jsx("input",{type:"number",value:f.plannedAmount,onChange:C=>p({...f,plannedAmount:Number(C.target.value)}),className:"w-full px-4 py-2 border-2 border-emerald-300 rounded-lg focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"  ()"}),e.jsx("input",{type:"number",value:f.actualAmount,onChange:C=>p({...f,actualAmount:Number(C.target.value)}),className:"w-full px-4 py-2 border-2 border-emerald-300 rounded-lg focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none",min:"0"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:y,disabled:!f.description.trim(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 font-semibold",children:[e.jsx(ss,{className:"w-4 h-4"}),""]}),e.jsx("button",{onClick:()=>{u(!1),p({category:V0[0],description:"",plannedAmount:0,actualAmount:0,date:new Date().toISOString().slice(0,10)})},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-semibold",children:""})]})]}),j?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"..."}):i.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Ie,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold",children:"  "}),e.jsx("p",{className:"text-sm mt-2",children:"   "})]}):e.jsx("div",{className:"space-y-3",children:i.map(C=>{const A=C.actualAmount-C.plannedAmount,Z=(A/C.plannedAmount*100).toFixed(1);return e.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4 hover:border-emerald-400 transition-all",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Ak[C.category]}}),e.jsx("span",{className:"font-bold text-gray-900 text-lg",children:C.description}),e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 text-xs font-semibold rounded-full",children:C.category})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600",children:""}),e.jsx("div",{className:"text-sm font-bold text-purple-600",children:_(C.plannedAmount)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600",children:""}),e.jsx("div",{className:"text-sm font-bold text-emerald-600",children:_(C.actualAmount)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600",children:""}),e.jsxs("div",{className:`text-sm font-bold flex items-center gap-1 ${A>0?"text-red-600":A<0?"text-green-600":"text-gray-600"}`,children:[A>0&&e.jsx(ct,{className:"w-3.5 h-3.5"}),A<0&&e.jsx(Sa,{className:"w-3.5 h-3.5"}),A!==0?`${A>0?"+":""}${Z}%`:""]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600",children:""}),e.jsxs("div",{className:"text-sm font-semibold text-gray-900 flex items-center gap-1",children:[e.jsx(pt,{className:"w-3.5 h-3.5"}),T(C.date)]})]})]})]}),e.jsx("div",{className:"flex items-center gap-2 ml-4",children:e.jsx("button",{onClick:()=>N(C.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"",children:e.jsx(Xe,{className:"w-4 h-4"})})})]})},C.id)})})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center flex-shrink-0",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[" : ",e.jsx("span",{className:"font-bold text-emerald-600",children:i.length})]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})})},Dk=[{name:"Slack",service:"slack",description:"    Slack-",icon:Es,color:"#4A154B"},{name:"Trello",service:"trello",description:"   Trello-",icon:zF,color:"#0079BF"},{name:"GitHub",service:"github",description:"  GitHub-",icon:oE,color:"#181717"},{name:"Google Calendar",service:"google-calendar",description:"   ",icon:pt,color:"#4285F4"},{name:"Dropbox",service:"dropbox",description:"    Dropbox",icon:EP,color:"#0061FF"},{name:"Webhook",service:"webhook",description:" webhook  ",icon:vl,color:"#10B981"}],SW=({isOpen:s,onClose:t,projectId:r,projectName:a})=>{const[n,i]=w.useState([]),[o,c]=w.useState(null),[u,h]=w.useState(!1),[m,f]=w.useState({}),[p,j]=w.useState(!1),[g,v]=w.useState(null);w.useEffect(()=>{s&&r&&y()},[s,r]),w.useEffect(()=>{if(s){const A=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${A}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const A=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(A||"0")*-1)}},[s]);const y=async()=>{if(r){j(!0);try{const A=await fetch(`http://localhost:8001/admin/api/projects/${r}/integrations`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(A.ok){const Z=await A.json();i(Z.integrations||[])}else i([{id:"1",name:"Slack",service:"slack",description:"    Slack-",icon:Es,color:"#4A154B",connected:!0,webhookUrl:"https://hooks.slack.com/services/XXXXX",lastSync:new Date().toISOString(),status:"active",settings:{channel:"#projects",notifications:["status_change","deadline"]}},{id:"2",name:"GitHub",service:"github",description:"  GitHub-",icon:oE,color:"#181717",connected:!0,apiKey:"ghp_xxxxxxxxxxxxx",lastSync:new Date(Date.now()-36e5).toISOString(),status:"active",settings:{repo:"user/project",branch:"main"}}])}catch(A){console.error("Error loading integrations:",A)}finally{j(!1)}}},N=A=>{c({id:Date.now().toString(),...A,connected:!1,status:"inactive"}),f({}),h(!0)},S=async()=>{if(!(!o||!r))try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/integrations`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({service:o.service,...m})})).ok&&(h(!1),c(null),f({}),await y())}catch(A){console.error("Error saving integration:",A)}},k=async A=>{if(confirm("  ?"))try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/integrations/${A}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&await y()}catch(Z){console.error("Error disconnecting integration:",Z)}},_=async A=>{v(A);try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/integrations/${A}/test`,{method:"POST",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok?alert("  !"):alert("  ")}catch(Z){console.error("Error testing integration:",Z),alert("  ")}finally{v(null)}},T=async A=>{try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/integrations/${A}/sync`,{method:"POST",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&(await y(),alert("  !"))}catch(Z){console.error("Error syncing integration:",Z)}},E=()=>{if(!o)return null;switch(o.service){case"slack":return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Webhook URL"}),e.jsx("input",{type:"text",value:m.webhookUrl||"",onChange:A=>f({...m,webhookUrl:A.target.value}),className:"w-full px-4 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 outline-none",placeholder:"https://hooks.slack.com/services/..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsx("input",{type:"text",value:m.channel||"",onChange:A=>f({...m,channel:A.target.value}),className:"w-full px-4 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 outline-none",placeholder:"#projects"})]})]});case"trello":return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"API Key"}),e.jsx("input",{type:"text",value:m.apiKey||"",onChange:A=>f({...m,apiKey:A.target.value}),className:"w-full px-4 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 outline-none",placeholder:"Trello API Key"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Token"}),e.jsx("input",{type:"text",value:m.token||"",onChange:A=>f({...m,token:A.target.value}),className:"w-full px-4 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 outline-none",placeholder:"Trello Token"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Board ID"}),e.jsx("input",{type:"text",value:m.boardId||"",onChange:A=>f({...m,boardId:A.target.value}),className:"w-full px-4 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 outline-none",placeholder:"Board ID"})]})]});case"github":return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Personal Access Token"}),e.jsx("input",{type:"password",value:m.token||"",onChange:A=>f({...m,token:A.target.value}),className:"w-full px-4 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 outline-none",placeholder:"ghp_xxxxxxxxxxxx"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Repository (owner/repo)"}),e.jsx("input",{type:"text",value:m.repo||"",onChange:A=>f({...m,repo:A.target.value}),className:"w-full px-4 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 outline-none",placeholder:"username/repository"})]})]});case"google-calendar":return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Client ID"}),e.jsx("input",{type:"text",value:m.clientId||"",onChange:A=>f({...m,clientId:A.target.value}),className:"w-full px-4 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 outline-none",placeholder:"Google OAuth Client ID"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Calendar ID"}),e.jsx("input",{type:"text",value:m.calendarId||"",onChange:A=>f({...m,calendarId:A.target.value}),className:"w-full px-4 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 outline-none",placeholder:"primary"})]})]});case"webhook":return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Webhook URL"}),e.jsx("input",{type:"text",value:m.url||"",onChange:A=>f({...m,url:A.target.value}),className:"w-full px-4 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 outline-none",placeholder:"https://your-server.com/webhook"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Secret ()"}),e.jsx("input",{type:"password",value:m.secret||"",onChange:A=>f({...m,secret:A.target.value}),className:"w-full px-4 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 outline-none",placeholder:" "})]})]});default:return e.jsx("div",{className:"text-sm text-gray-600",children:"      "})}},z=A=>{const Z=new Date(A);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}).format(Z)};if(!s)return null;const M=n.filter(A=>A.connected),C=Dk.filter(A=>!n.some(Z=>Z.service===A.service&&Z.connected));return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-5xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(U4,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:""}),e.jsx("p",{className:"text-purple-100 text-sm mt-1",children:a})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[M.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(ss,{className:"w-5 h-5 text-green-600"}),"  (",M.length,")"]}),e.jsx("div",{className:"space-y-3",children:M.map(A=>{const Z=A.icon;return e.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4 hover:border-purple-400 transition-all",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-white flex-shrink-0",style:{backgroundColor:A.color},children:e.jsx(Z,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h5",{className:"font-bold text-gray-900",children:A.name}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${A.status==="active"?"bg-green-100 text-green-700":A.status==="error"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:A.status==="active"?"":A.status==="error"?"":""})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:A.description}),A.lastSync&&e.jsxs("div",{className:"text-xs text-gray-500",children:[" : ",z(A.lastSync)]}),A.settings&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:Object.entries(A.settings).map(([I,V])=>e.jsxs("span",{className:"px-2 py-1 bg-purple-50 text-purple-700 rounded text-xs font-semibold",children:[I,": ",String(V)]},I))})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx("button",{onClick:()=>T(A.id),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"",children:e.jsx(rs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>_(A.id),disabled:g===A.id,className:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors disabled:opacity-50",title:"",children:e.jsx(Na,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>k(A.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"",children:e.jsx(Xe,{className:"w-4 h-4"})})]})]})},A.id)})})]}),!u&&C.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(em,{className:"w-5 h-5 text-gray-600"}),"  (",C.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:C.map(A=>{const Z=A.icon;return e.jsx("div",{className:"bg-gray-50 border-2 border-gray-200 rounded-xl p-4 hover:border-purple-400 hover:bg-white transition-all cursor-pointer",onClick:()=>N(A),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center text-white flex-shrink-0",style:{backgroundColor:A.color},children:e.jsx(Z,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-bold text-gray-900 mb-1",children:A.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:A.description}),e.jsxs("button",{className:"text-xs font-semibold text-purple-600 hover:text-purple-700 flex items-center gap-1",children:[e.jsx(U4,{className:"w-3.5 h-3.5"}),""]})]})]})},A.service)})})]}),u&&o&&e.jsxs("div",{className:"bg-purple-50 border-2 border-purple-200 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.icon&&e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-white",style:{backgroundColor:o.color},children:e.jsx(o.icon,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-gray-900",children:[" ",o.name]}),e.jsx("p",{className:"text-sm text-gray-600",children:o.description})]})]}),E(),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsxs("button",{onClick:S,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all font-semibold",children:[e.jsx(ss,{className:"w-5 h-5"}),""]}),e.jsx("button",{onClick:()=>{h(!1),c(null),f({})},className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center flex-shrink-0",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[":"," ",e.jsx("span",{className:"font-bold text-purple-600",children:M.length})," "," ",Dk.length]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})})},mh=["","","","","","","",""],CW={low:"",medium:"",high:""},TW={low:"",medium:"",high:""},Ly={identified:"",analyzing:"",mitigated:"",accepted:"",resolved:""},EW=({isOpen:s,onClose:t,projectId:r,projectName:a})=>{const[n,i]=w.useState([]),[o,c]=w.useState(!1),[u,h]=w.useState(null),[m,f]=w.useState({title:"",description:"",probability:"medium",impact:"medium",category:mh[0],status:"identified",mitigationPlan:""}),[p,j]=w.useState(!1),[g,v]=w.useState("all"),[y,N]=w.useState("all");w.useEffect(()=>{s&&r&&S()},[s,r]),w.useEffect(()=>{if(s){const q=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${q}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const q=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(q||"0")*-1)}},[s]);const S=async()=>{if(r){j(!0);try{const q=await fetch(`http://localhost:8001/admin/api/projects/${r}/risks`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(q.ok){const J=await q.json();i(J.risks||[])}else i([{id:1,title:"  ",description:"         ",probability:"high",impact:"high",category:"",status:"analyzing",mitigationPlan:"     ",owner:"admin",createdAt:new Date().toISOString()},{id:2,title:"  ",description:"      ",probability:"medium",impact:"high",category:"",status:"mitigated",mitigationPlan:"  ,  ",owner:"admin",createdAt:new Date(Date.now()-864e5).toISOString()},{id:3,title:"   API",description:" API   ",probability:"low",impact:"medium",category:"",status:"identified",mitigationPlan:" retry mechanism  fallback ",owner:"admin",createdAt:new Date(Date.now()-1728e5).toISOString()}])}catch(q){console.error("Error loading risks:",q)}finally{j(!1)}}},k=async()=>{if(m.title.trim())try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/risks`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(m)})).ok&&(f({title:"",description:"",probability:"medium",impact:"medium",category:mh[0],status:"identified",mitigationPlan:""}),c(!1),await S())}catch(q){console.error("Error adding risk:",q)}},_=async(q,J)=>{try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/risks/${q}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(J)})).ok&&await S()}catch(se){console.error("Error updating risk:",se)}},T=async q=>{if(confirm("  ?"))try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/risks/${q}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&await S()}catch(J){console.error("Error deleting risk:",J)}},E=(q,J)=>(q==="low"?1:q==="medium"?2:3)*(J==="low"?1:J==="medium"?2:3),z=q=>q>=6?"bg-red-500":q>=4?"bg-orange-500":"bg-yellow-500",M=q=>q>=6?"":q>=4?"":"",C=q=>q==="high"?"bg-red-100 text-red-700":q==="medium"?"bg-orange-100 text-orange-700":"bg-yellow-100 text-yellow-700",A=q=>q==="high"?"bg-red-100 text-red-700":q==="medium"?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700",Z=q=>{switch(q){case"identified":return"bg-blue-100 text-blue-700";case"analyzing":return"bg-purple-100 text-purple-700";case"mitigated":return"bg-green-100 text-green-700";case"accepted":return"bg-yellow-100 text-yellow-700";case"resolved":return"bg-emerald-100 text-emerald-700";default:return"bg-gray-100 text-gray-700"}},I=q=>{const J=new Date(q);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"short",year:"numeric"}).format(J)};if(!s)return null;const V=n.filter(q=>!(g!=="all"&&q.category!==g||y!=="all"&&q.status!==y)),R={total:n.length,critical:n.filter(q=>E(q.probability,q.impact)>=6).length,active:n.filter(q=>!["resolved","accepted"].includes(q.status)).length,resolved:n.filter(q=>q.status==="resolved").length};return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-600 to-orange-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ir,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-red-100 text-sm mt-1",children:a})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200 flex-shrink-0",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-3 border-2 border-blue-200",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-1",children:" "}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:R.total})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 border-2 border-red-200",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-1",children:""}),e.jsx("div",{className:"text-2xl font-bold text-red-600",children:R.critical})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 border-2 border-orange-200",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-1",children:""}),e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:R.active})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 border-2 border-green-200",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-1",children:""}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:R.resolved})]})]})}),e.jsx("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200 flex-shrink-0",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("select",{value:g,onChange:q=>v(q.target.value),className:"px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-red-500 outline-none text-sm",children:[e.jsx("option",{value:"all",children:" "}),mh.map(q=>e.jsx("option",{value:q,children:q},q))]}),e.jsxs("select",{value:y,onChange:q=>N(q.target.value),className:"px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-red-500 outline-none text-sm",children:[e.jsx("option",{value:"all",children:" "}),Object.entries(Ly).map(([q,J])=>e.jsx("option",{value:q,children:J},q))]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[!o&&e.jsxs("button",{onClick:()=>c(!0),className:"w-full mb-4 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-red-600 to-orange-600 text-white rounded-lg hover:from-red-700 hover:to-orange-700 transition-all font-semibold",children:[e.jsx(Ve,{className:"w-5 h-5"})," "]}),o&&e.jsxs("div",{className:"mb-4 bg-red-50 border-2 border-red-200 rounded-xl p-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-3",children:" "}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" "}),e.jsx("input",{type:"text",value:m.title,onChange:q=>f({...m,title:q.target.value}),className:"w-full px-4 py-2 border-2 border-red-300 rounded-lg focus:border-red-500 outline-none",placeholder:"  "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsx("textarea",{value:m.description,onChange:q=>f({...m,description:q.target.value}),className:"w-full px-4 py-2 border-2 border-red-300 rounded-lg focus:border-red-500 outline-none resize-none",rows:3,placeholder:"  "})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsxs("select",{value:m.probability,onChange:q=>f({...m,probability:q.target.value}),className:"w-full px-4 py-2 border-2 border-red-300 rounded-lg focus:border-red-500 outline-none",children:[e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"medium",children:""}),e.jsx("option",{value:"high",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsxs("select",{value:m.impact,onChange:q=>f({...m,impact:q.target.value}),className:"w-full px-4 py-2 border-2 border-red-300 rounded-lg focus:border-red-500 outline-none",children:[e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"medium",children:""}),e.jsx("option",{value:"high",children:""})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsx("select",{value:m.category,onChange:q=>f({...m,category:q.target.value}),className:"w-full px-4 py-2 border-2 border-red-300 rounded-lg focus:border-red-500 outline-none",children:mh.map(q=>e.jsx("option",{value:q,children:q},q))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" "}),e.jsx("textarea",{value:m.mitigationPlan,onChange:q=>f({...m,mitigationPlan:q.target.value}),className:"w-full px-4 py-2 border-2 border-red-300 rounded-lg focus:border-red-500 outline-none resize-none",rows:2,placeholder:"    "})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:k,disabled:!m.title.trim(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 font-semibold",children:[e.jsx(ss,{className:"w-4 h-4"}),""]}),e.jsx("button",{onClick:()=>{c(!1),f({title:"",description:"",probability:"medium",impact:"medium",category:mh[0],status:"identified",mitigationPlan:""})},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-semibold",children:""})]})]})]}),p?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"..."}):V.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Er,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold",children:n.length===0?"  ":"    "}),e.jsx("p",{className:"text-sm mt-2",children:n.length===0?"   ":" "})]}):e.jsx("div",{className:"space-y-3",children:V.map(q=>{const J=E(q.probability,q.impact);return e.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4 hover:border-red-400 transition-all",children:e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h5",{className:"font-bold text-gray-900 text-lg",children:q.title}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold text-white ${z(J)}`,children:M(J)})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-3",children:q.description}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${C(q.probability)}`,children:[": ",CW[q.probability]]}),e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${A(q.impact)}`,children:[": ",TW[q.impact]]}),e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-full text-xs font-semibold",children:q.category}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${Z(q.status)}`,children:Ly[q.status]})]}),q.mitigationPlan&&e.jsxs("div",{className:"bg-green-50 border-l-4 border-green-500 p-3 rounded",children:[e.jsx("div",{className:"text-xs font-semibold text-green-700 mb-1",children:" :"}),e.jsx("div",{className:"text-sm text-green-900",children:q.mitigationPlan})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ue,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[": ",I(q.createdAt)]})]}),q.updatedAt&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(yn,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[": ",I(q.updatedAt)]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx("select",{value:q.status,onChange:se=>_(q.id,{status:se.target.value}),className:"px-3 py-1 border-2 border-gray-300 rounded-lg text-xs focus:border-red-500 outline-none",children:Object.entries(Ly).map(([se,Y])=>e.jsx("option",{value:se,children:Y},se))}),e.jsx("button",{onClick:()=>T(q.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"",children:e.jsx(Xe,{className:"w-4 h-4"})})]})]})},q.id)})})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center flex-shrink-0",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[": ",e.jsx("span",{className:"font-bold text-red-600",children:V.length})," "," ",n.length]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})})},AW=({isOpen:s,onClose:t,projectId:r,projectName:a})=>{const[n,i]=w.useState([]),[o,c]=w.useState([]),[u,h]=w.useState([]),[m,f]=w.useState("month"),[p,j]=w.useState(!1);w.useEffect(()=>{s&&r&&g()},[s,r,m]),w.useEffect(()=>{if(s){const k=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${k}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const k=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(k||"0")*-1)}},[s]);const g=async()=>{if(r){j(!0);try{const k=await fetch(`http://localhost:8001/admin/api/projects/${r}/analytics?period=${m}`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(k.ok){const _=await k.json();i(_.metrics||[]),c(_.timeline||[]),h(_.teamPerformance||[])}else i([{name:" ",value:42,target:50,unit:"",trend:"up",trendValue:12,icon:it,color:"#10B981"},{name:" ",value:245,target:280,unit:"",trend:"stable",trendValue:0,icon:Ue,color:"#3B82F6"},{name:"  ",value:85,target:90,unit:"%",trend:"up",trendValue:5,icon:Ar,color:"#8B5CF6"},{name:"",value:92,target:100,unit:"%",trend:"down",trendValue:-3,icon:ct,color:"#F59E0B"},{name:" ",value:8,target:10,unit:"",trend:"stable",trendValue:0,icon:tt,color:"#EC4899"},{name:" ",value:67,target:100,unit:"%",trend:"up",trendValue:8,icon:Ge,color:"#14B8A6"}]),c([{date:"2025-01-20",completedTasks:8,plannedTasks:10,hoursSpent:45,hoursPlanned:50},{date:"2025-01-21",completedTasks:7,plannedTasks:8,hoursSpent:38,hoursPlanned:40},{date:"2025-01-22",completedTasks:9,plannedTasks:12,hoursSpent:52,hoursPlanned:60},{date:"2025-01-23",completedTasks:6,plannedTasks:7,hoursSpent:35,hoursPlanned:35},{date:"2025-01-24",completedTasks:12,plannedTasks:13,hoursSpent:75,hoursPlanned:65}]),h([{id:1,name:" ",tasksCompleted:15,tasksAssigned:18,hoursWorked:92,efficiency:95},{id:2,name:" ",tasksCompleted:12,tasksAssigned:14,hoursWorked:78,efficiency:88},{id:3,name:" ",tasksCompleted:10,tasksAssigned:12,hoursWorked:65,efficiency:92},{id:4,name:" ",tasksCompleted:5,tasksAssigned:6,hoursWorked:30,efficiency:78}])}catch(k){console.error("Error loading analytics:",k)}finally{j(!1)}}},v=k=>{const _=new Date(k);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"short"}).format(_)},y=(k,_)=>{const T=k/_*100;return T>=90?"bg-green-500":T>=70?"bg-yellow-500":"bg-red-500"},N=k=>k==="up"?e.jsx(ct,{className:"w-4 h-4"}):k==="down"?e.jsx(Sa,{className:"w-4 h-4"}):e.jsx("span",{className:"w-4 h-4 inline-block"}),S=k=>k==="up"?"text-green-600":k==="down"?"text-red-600":"text-gray-600";return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-7xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Fr,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-blue-100 text-sm mt-1",children:a})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>f("week"),className:`px-4 py-2 rounded-lg font-semibold text-sm transition-all ${m==="week"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:""}),e.jsx("button",{onClick:()=>f("month"),className:`px-4 py-2 rounded-lg font-semibold text-sm transition-all ${m==="month"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:""}),e.jsx("button",{onClick:()=>f("quarter"),className:`px-4 py-2 rounded-lg font-semibold text-sm transition-all ${m==="quarter"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:""})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(pt,{className:"w-4 h-4"}),e.jsxs("span",{children:[": ",new Date().toLocaleDateString("ru-RU")]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:p?e.jsx("div",{className:"text-center py-12 text-gray-500",children:" ..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Ar,{className:"w-5 h-5 text-blue-600"})," "]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map((k,_)=>{const T=k.icon,E=k.value/k.target*100;return e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4 hover:border-blue-400 transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center text-white",style:{backgroundColor:k.color},children:e.jsx(T,{className:"w-5 h-5"})}),e.jsxs("div",{className:`flex items-center gap-1 ${S(k.trend)}`,children:[N(k.trend),k.trendValue!==0&&e.jsxs("span",{className:"text-xs font-bold",children:[k.trendValue>0?"+":"",k.trendValue,k.unit==="%"?"%":""]})]})]}),e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:k.name}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:[k.value," ",k.unit]}),e.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[": ",k.target," ",k.unit]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all ${y(k.value,k.target)}`,style:{width:`${Math.min(E,100)}%`}})})]},_)})})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Fr,{className:"w-5 h-5 text-purple-600"}),"  "]}),e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-6",children:[e.jsx("div",{className:"space-y-4",children:o.map((k,_)=>{const T=k.completedTasks/k.plannedTasks*100,E=k.hoursSpent/k.hoursPlanned*100;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:v(k.date)}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-600",children:[e.jsxs("span",{children:[": ",k.completedTasks,"/",k.plannedTasks]}),e.jsxs("span",{children:[": ",k.hoursSpent,"/",k.hoursPlanned]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsxs("div",{className:"h-8 bg-gray-200 rounded-lg overflow-hidden relative",children:[e.jsx("div",{className:"h-full bg-blue-500 transition-all flex items-center justify-center text-xs font-bold text-white",style:{width:`${Math.min(T,100)}%`},children:T>=30&&`${T.toFixed(0)}%`}),T<30&&e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center text-xs font-bold text-gray-600",children:[T.toFixed(0),"%"]})]})}),e.jsx("div",{children:e.jsxs("div",{className:"h-8 bg-gray-200 rounded-lg overflow-hidden relative",children:[e.jsx("div",{className:"h-full bg-purple-500 transition-all flex items-center justify-center text-xs font-bold text-white",style:{width:`${Math.min(E,100)}%`},children:E>=30&&`${E.toFixed(0)}%`}),E<30&&e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center text-xs font-bold text-gray-600",children:[E.toFixed(0),"%"]})]})})]})]},_)})}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 flex items-center gap-4 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded"}),e.jsx("span",{children:" "})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded"}),e.jsx("span",{children:" "})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(tt,{className:"w-5 h-5 text-green-600"})," "]}),e.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-xl overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700",children:""}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-700",children:""}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-700",children:""}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-700",children:""}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-700",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:u.map(k=>{const _=k.tasksCompleted/k.tasksAssigned*100;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-xs",children:k.name[0]}),e.jsx("span",{className:"font-semibold text-gray-900 text-sm",children:k.name})]})}),e.jsx("td",{className:"px-4 py-3 text-center text-sm text-gray-700",children:k.tasksAssigned}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-sm font-bold text-gray-900",children:k.tasksCompleted}),e.jsxs("span",{className:`text-xs font-semibold ${_>=90?"text-green-600":_>=70?"text-yellow-600":"text-red-600"}`,children:[_.toFixed(0),"%"]})]})}),e.jsxs("td",{className:"px-4 py-3 text-center text-sm text-gray-700",children:[k.hoursWorked,""]}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"flex-1 max-w-[100px] h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${y(k.efficiency,100)} transition-all`,style:{width:`${k.efficiency}%`}})}),e.jsxs("span",{className:"text-sm font-bold text-gray-900 w-10",children:[k.efficiency,"%"]})]})})]},k.id)})})]})})]})]})}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end flex-shrink-0",children:e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})})]})}):null},DW=({isOpen:s,onClose:t,projectId:r,projectName:a,onRestore:n})=>{const[i,o]=w.useState([]),[c,u]=w.useState(new Set),[h,m]=w.useState(!1),[f,p]=w.useState({version:"",description:"",tags:[]}),[j,g]=w.useState(""),[v,y]=w.useState(!1);w.useEffect(()=>{s&&r&&N()},[s,r]),w.useEffect(()=>{if(s){const C=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${C}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const C=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(C||"0")*-1)}},[s]);const N=async()=>{if(r){y(!0);try{const C=await fetch(`http://localhost:8001/admin/api/projects/${r}/versions`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(C.ok){const A=await C.json();o(A.versions||[])}else o([{id:1,version:"v3.0.0",description:"    ",changes:["  ","    ","   ","    "],createdBy:"admin",createdAt:new Date().toISOString(),isCurrent:!0,snapshot:{name:"-  ",status:"in_progress",deadline:"2025-03-01",budget:5e5},tags:["release","major"]},{id:2,version:"v2.5.1",description:"   ",changes:["    ","    "," "],createdBy:"admin",createdAt:new Date(Date.now()-864e5*3).toISOString(),isCurrent:!1,snapshot:{name:"-  ",status:"in_progress",deadline:"2025-03-01",budget:48e4},tags:["bugfix","patch"]},{id:3,version:"v2.5.0",description:"  ",changes:["  ","   "," "],createdBy:"admin",createdAt:new Date(Date.now()-864e5*7).toISOString(),isCurrent:!1,snapshot:{name:"-  ",status:"planning",deadline:"2025-03-01",budget:45e4},tags:["feature","minor"]},{id:4,version:"v2.0.0",description:"  ",changes:["   ","  ","    ","   "],createdBy:"admin",createdAt:new Date(Date.now()-864e5*14).toISOString(),isCurrent:!1,snapshot:{name:"-  ",status:"planning",deadline:"2025-04-01",budget:4e5},tags:["release","major","redesign"]},{id:5,version:"v1.0.0",description:"  ",changes:[" "," "," "],createdBy:"admin",createdAt:new Date(Date.now()-864e5*30).toISOString(),isCurrent:!1,snapshot:{name:"-  ",status:"planning",deadline:"2025-05-01",budget:3e5},tags:["release","initial"]}])}catch(C){console.error("Error loading versions:",C)}finally{y(!1)}}},S=async()=>{if(!(!f.version.trim()||!f.description.trim()))try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/versions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(f)})).ok&&(p({version:"",description:"",tags:[]}),m(!1),await N())}catch(C){console.error("Error creating version:",C)}},k=async C=>{if(confirm("    ?    ."))try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/versions/${C}/restore`,{method:"POST",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&(await N(),n&&n(C),alert("  !"))}catch(A){console.error("Error restoring version:",A)}},_=C=>{const A=new Set(c);A.has(C)?A.delete(C):A.add(C),u(A)},T=()=>{j.trim()&&!f.tags.includes(j.trim())&&(p({...f,tags:[...f.tags,j.trim()]}),g(""))},E=C=>{p({...f,tags:f.tags.filter(A=>A!==C)})},z=C=>{const A=new Date(C);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(A)},M=C=>({release:"bg-blue-100 text-blue-700",major:"bg-red-100 text-red-700",minor:"bg-yellow-100 text-yellow-700",patch:"bg-green-100 text-green-700",bugfix:"bg-orange-100 text-orange-700",feature:"bg-purple-100 text-purple-700",redesign:"bg-pink-100 text-pink-700",initial:"bg-emerald-100 text-emerald-700"})[C]||"bg-gray-100 text-gray-700";return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-5xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(O4,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-indigo-100 text-sm mt-1",children:a})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O4,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-gray-600",children:" :"}),e.jsx("span",{className:"font-bold text-indigo-600",children:i.length})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ss,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-gray-600",children:":"}),e.jsx("span",{className:"font-bold text-green-600",children:i.find(C=>C.isCurrent)?.version||"-"})]})]}),!h&&e.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-semibold text-sm",children:[e.jsx(Ve,{className:"w-4 h-4"})," "]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[h&&e.jsxs("div",{className:"mb-6 bg-indigo-50 border-2 border-indigo-200 rounded-xl p-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-3",children:"  "}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" "}),e.jsx("input",{type:"text",value:f.version,onChange:C=>p({...f,version:C.target.value}),className:"w-full px-4 py-2 border-2 border-indigo-300 rounded-lg focus:border-indigo-500 outline-none",placeholder:"v1.0.0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:j,onChange:C=>g(C.target.value),onKeyPress:C=>C.key==="Enter"&&T(),className:"flex-1 px-4 py-2 border-2 border-indigo-300 rounded-lg focus:border-indigo-500 outline-none",placeholder:"release, major, etc."}),e.jsx("button",{onClick:T,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:e.jsx(Ve,{className:"w-4 h-4"})})]}),f.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:f.tags.map(C=>e.jsxs("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-700 rounded-full text-xs font-semibold flex items-center gap-1",children:[C,e.jsx("button",{onClick:()=>E(C),className:"hover:text-indigo-900",children:e.jsx(Ae,{className:"w-3 h-3"})})]},C))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" "}),e.jsx("textarea",{value:f.description,onChange:C=>p({...f,description:C.target.value}),className:"w-full px-4 py-2 border-2 border-indigo-300 rounded-lg focus:border-indigo-500 outline-none resize-none",rows:3,placeholder:"     "})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:S,disabled:!f.version.trim()||!f.description.trim(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 font-semibold",children:[e.jsx(ss,{className:"w-4 h-4"}),""]}),e.jsx("button",{onClick:()=>{m(!1),p({version:"",description:"",tags:[]})},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-semibold",children:""})]})]})]}),v?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"  ..."}):i.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Ie,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold",children:"  "}),e.jsx("p",{className:"text-sm mt-2",children:"  "})]}):e.jsx("div",{className:"space-y-3",children:i.map(C=>e.jsxs("div",{className:`bg-white border-2 rounded-xl overflow-hidden transition-all ${C.isCurrent?"border-green-400 shadow-lg":"border-gray-200 hover:border-indigo-400"}`,children:[e.jsx("div",{className:`p-4 cursor-pointer ${C.isCurrent?"bg-green-50":"hover:bg-gray-50"}`,onClick:()=>_(C.id),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.has(C.id)?e.jsx(_i,{className:"w-5 h-5 text-gray-500"}):e.jsx(jn,{className:"w-5 h-5 text-gray-500"}),e.jsx("h5",{className:"font-bold text-gray-900 text-lg",children:C.version}),C.isCurrent&&e.jsxs("span",{className:"px-2 py-1 bg-green-500 text-white rounded-full text-xs font-bold flex items-center gap-1",children:[e.jsx(ss,{className:"w-3 h-3"}),""]}),C.tags.map(A=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${M(A)}`,children:A},A))]}),e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:C.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(st,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:C.createdBy})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ue,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:z(C.createdAt)})]})]})]}),!C.isCurrent&&e.jsxs("button",{onClick:A=>{A.stopPropagation(),k(C.id)},className:"ml-4 flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-semibold text-sm",children:[e.jsx(wn,{className:"w-4 h-4"}),""]})]})}),c.has(C.id)&&e.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 space-y-4",children:[C.changes.length>0&&e.jsxs("div",{children:[e.jsx("h6",{className:"text-sm font-semibold text-gray-700 mb-2",children:":"}),e.jsx("ul",{className:"space-y-1",children:C.changes.map((A,Z)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700",children:[e.jsx("span",{className:"text-indigo-600 mt-1",children:""}),e.jsx("span",{children:A})]},Z))})]}),e.jsxs("div",{children:[e.jsx("h6",{className:"text-sm font-semibold text-gray-700 mb-2",children:" :"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(C.snapshot).map(([A,Z])=>e.jsxs("div",{className:"bg-white rounded-lg p-2 border border-gray-200",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:A}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:String(Z)})]},A))})]})]})]},C.id))})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(qe,{className:"w-4 h-4"}),e.jsx("span",{children:"    "})]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})}):null},Rk=[{value:"date",label:" ",icon:pt},{value:"deadline",label:" ",icon:Ue},{value:"status",label:" ",icon:it},{value:"budget",label:"",icon:qe},{value:"custom",label:"",icon:Zr}],Mk=[{value:"once",label:" "},{value:"daily",label:""},{value:"weekly",label:""},{value:"monthly",label:""}],RW=["planned","in_progress","review","testing","completed","on_hold","cancelled"],MW=({isOpen:s,onClose:t,projectId:r,projectName:a})=>{const[n,i]=w.useState([]),[o,c]=w.useState(!1),[u,h]=w.useState(null),[m,f]=w.useState({title:"",description:"",triggerType:"date",triggerValue:"",repeatType:"once",recipients:[]}),[p,j]=w.useState(""),[g,v]=w.useState(!1);w.useEffect(()=>{s&&r&&y()},[s,r]),w.useEffect(()=>{if(s){const A=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${A}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const A=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(A||"0")*-1)}},[s]);const y=async()=>{if(r){v(!0);try{const A=await fetch(`http://localhost:8001/admin/api/projects/${r}/reminders`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(A.ok){const Z=await A.json();i(Z.reminders||[])}else i([{id:1,title:"  ",description:"  3    ",triggerType:"deadline",triggerValue:"3",repeatType:"once",recipients:["admin@example.com","manager@example.com"],isActive:!0,lastTriggered:new Date(Date.now()-864e5).toISOString(),createdAt:new Date(Date.now()-864e5*7).toISOString(),createdBy:"admin"},{id:2,title:" ",description:"   80% ",triggerType:"budget",triggerValue:"80",repeatType:"once",recipients:["admin@example.com"],isActive:!0,createdAt:new Date(Date.now()-864e5*14).toISOString(),createdBy:"admin"},{id:3,title:" ",description:"     ",triggerType:"date",triggerValue:"monday",repeatType:"weekly",recipients:["admin@example.com","client@example.com"],isActive:!0,lastTriggered:new Date(Date.now()-864e5*2).toISOString(),createdAt:new Date(Date.now()-864e5*21).toISOString(),createdBy:"admin"},{id:4,title:'   ""',description:"     ",triggerType:"status",triggerValue:"completed",repeatType:"once",recipients:["team@example.com"],isActive:!1,createdAt:new Date(Date.now()-864e5*5).toISOString(),createdBy:"admin"}])}catch(A){console.error("Error loading reminders:",A)}finally{v(!1)}}},N=async()=>{if(m.title.trim())try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/reminders`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(m)})).ok&&(f({title:"",description:"",triggerType:"date",triggerValue:"",repeatType:"once",recipients:[]}),c(!1),await y())}catch(A){console.error("Error adding reminder:",A)}},S=async(A,Z)=>{try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/reminders/${A}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({isActive:Z})})).ok&&await y()}catch(I){console.error("Error toggling reminder:",I)}},k=async A=>{if(confirm("  ?"))try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/reminders/${A}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&await y()}catch(Z){console.error("Error deleting reminder:",Z)}},_=()=>{p.trim()&&!m.recipients.includes(p.trim())&&(f({...m,recipients:[...m.recipients,p.trim()]}),j(""))},T=A=>{f({...m,recipients:m.recipients.filter(Z=>Z!==A)})},E=()=>{switch(m.triggerType){case"date":return e.jsx("input",{type:"datetime-local",value:m.triggerValue,onChange:A=>f({...m,triggerValue:A.target.value}),className:"w-full px-4 py-2 border-2 border-blue-300 rounded-lg focus:border-blue-500 outline-none"});case"deadline":return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",value:m.triggerValue,onChange:A=>f({...m,triggerValue:A.target.value}),className:"flex-1 px-4 py-2 border-2 border-blue-300 rounded-lg focus:border-blue-500 outline-none",placeholder:" ",min:"1"}),e.jsx("span",{className:"text-sm text-gray-600",children:"  "})]});case"status":return e.jsxs("select",{value:m.triggerValue,onChange:A=>f({...m,triggerValue:A.target.value}),className:"w-full px-4 py-2 border-2 border-blue-300 rounded-lg focus:border-blue-500 outline-none",children:[e.jsx("option",{value:"",children:" "}),RW.map(A=>e.jsx("option",{value:A,children:A},A))]});case"budget":return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",value:m.triggerValue,onChange:A=>f({...m,triggerValue:A.target.value}),className:"flex-1 px-4 py-2 border-2 border-blue-300 rounded-lg focus:border-blue-500 outline-none",placeholder:" ",min:"1",max:"100"}),e.jsx("span",{className:"text-sm text-gray-600",children:"%  "})]});case"custom":return e.jsx("input",{type:"text",value:m.triggerValue,onChange:A=>f({...m,triggerValue:A.target.value}),className:"w-full px-4 py-2 border-2 border-blue-300 rounded-lg focus:border-blue-500 outline-none",placeholder:" "});default:return null}},z=A=>{switch(A.triggerType){case"date":return`: ${new Date(A.triggerValue).toLocaleDateString("ru-RU")}`;case"deadline":return` ${A.triggerValue}   `;case"status":return`: ${A.triggerValue}`;case"budget":return`: ${A.triggerValue}%`;case"custom":return A.triggerValue;default:return""}},M=A=>{const Z=new Date(A);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}).format(Z)};if(!s)return null;const C=n.filter(A=>A.isActive).length;return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-5xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Zr,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-blue-100 text-sm mt-1",children:a})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Zr,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-gray-600",children:":"}),e.jsx("span",{className:"font-bold text-blue-600",children:n.length})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(it,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-gray-600",children:":"}),e.jsx("span",{className:"font-bold text-green-600",children:C})]})]}),!o&&e.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold text-sm",children:[e.jsx(Ve,{className:"w-4 h-4"})," "]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[o&&e.jsxs("div",{className:"mb-6 bg-blue-50 border-2 border-blue-200 rounded-xl p-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-4",children:" "}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsx("input",{type:"text",value:m.title,onChange:A=>f({...m,title:A.target.value}),className:"w-full px-4 py-2 border-2 border-blue-300 rounded-lg focus:border-blue-500 outline-none",placeholder:"  "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsx("textarea",{value:m.description,onChange:A=>f({...m,description:A.target.value}),className:"w-full px-4 py-2 border-2 border-blue-300 rounded-lg focus:border-blue-500 outline-none resize-none",rows:2,placeholder:" "})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" "}),e.jsx("select",{value:m.triggerType,onChange:A=>f({...m,triggerType:A.target.value}),className:"w-full px-4 py-2 border-2 border-blue-300 rounded-lg focus:border-blue-500 outline-none",children:Rk.map(A=>e.jsx("option",{value:A.value,children:A.label},A.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsx("select",{value:m.repeatType,onChange:A=>f({...m,repeatType:A.target.value}),className:"w-full px-4 py-2 border-2 border-blue-300 rounded-lg focus:border-blue-500 outline-none",children:Mk.map(A=>e.jsx("option",{value:A.value,children:A.label},A.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" "}),E()]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"email",value:p,onChange:A=>j(A.target.value),onKeyPress:A=>A.key==="Enter"&&_(),className:"flex-1 px-4 py-2 border-2 border-blue-300 rounded-lg focus:border-blue-500 outline-none",placeholder:"Email "}),e.jsx("button",{onClick:_,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:e.jsx(Ve,{className:"w-4 h-4"})})]}),m.recipients.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:m.recipients.map(A=>e.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-semibold flex items-center gap-2",children:[e.jsx(st,{className:"w-3.5 h-3.5"}),A,e.jsx("button",{onClick:()=>T(A),className:"hover:text-blue-900",children:e.jsx(Ae,{className:"w-3.5 h-3.5"})})]},A))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:N,disabled:!m.title.trim()||m.recipients.length===0,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 font-semibold",children:[e.jsx(ss,{className:"w-4 h-4"}),""]}),e.jsx("button",{onClick:()=>{c(!1),f({title:"",description:"",triggerType:"date",triggerValue:"",repeatType:"once",recipients:[]})},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-semibold",children:""})]})]})]}),g?e.jsx("div",{className:"text-center py-12 text-gray-500",children:" ..."}):n.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Zr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold",children:" "}),e.jsx("p",{className:"text-sm mt-2",children:"   "})]}):e.jsx("div",{className:"space-y-3",children:n.map(A=>{const Z=Rk.find(I=>I.value===A.triggerType)?.icon||Zr;return e.jsx("div",{className:`bg-white border-2 rounded-xl p-4 transition-all ${A.isActive?"border-blue-400 hover:border-blue-500":"border-gray-200 opacity-60"}`,children:e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${A.isActive?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-400"}`,children:e.jsx(Z,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-bold text-gray-900 text-lg mb-1",children:A.title}),A.description&&e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:A.description}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-semibold",children:z(A)}),e.jsxs("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-semibold flex items-center gap-1",children:[e.jsx(dF,{className:"w-3 h-3"}),Mk.find(I=>I.value===A.repeatType)?.label]}),e.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-semibold flex items-center gap-1",children:[e.jsx(st,{className:"w-3 h-3"}),A.recipients.length," "]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ue,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[": ",M(A.createdAt)]})]}),A.lastTriggered&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Zr,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[": ",M(A.lastTriggered)]})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx("button",{onClick:()=>S(A.id,!A.isActive),className:`p-2 rounded-lg transition-colors ${A.isActive?"text-green-600 hover:bg-green-100":"text-gray-400 hover:bg-gray-100"}`,title:A.isActive?"":"",children:A.isActive?e.jsx(PF,{className:"w-5 h-5"}):e.jsx(gE,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>k(A.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"",children:e.jsx(Xe,{className:"w-4 h-4"})})]})]})},A.id)})})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(qe,{className:"w-4 h-4"}),e.jsx("span",{children:"     "})]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})})},OW=({isOpen:s,onClose:t,projectId:r,projectName:a})=>{const[n,i]=w.useState([]),[o,c]=w.useState([]),[u,h]=w.useState(new Set),[m,f]=w.useState(null),[p,j]=w.useState(!1),[g,v]=w.useState({fromTask:0,toTask:0,type:"blocks"}),[y,N]=w.useState(!1);w.useEffect(()=>{s&&r&&S()},[s,r]),w.useEffect(()=>{if(s){const R=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${R}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const R=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(R||"0")*-1)}},[s]);const S=async()=>{if(r){N(!0);try{const R=await fetch(`http://localhost:8001/admin/api/projects/${r}/task-dependencies`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(R.ok){const q=await R.json();i(q.tasks||[]),c(q.dependencies||[])}else i([{id:1,title:" ",status:"completed",assignee:"",deadline:"2025-02-01",dependencies:[],blockedBy:[]},{id:2,title:" ",status:"completed",assignee:"",deadline:"2025-02-05",dependencies:[],blockedBy:[]},{id:3,title:" ",status:"in_progress",assignee:"",deadline:"2025-02-15",dependencies:[1],blockedBy:[]},{id:4,title:" ",status:"in_progress",assignee:"",deadline:"2025-02-20",dependencies:[2],blockedBy:[]},{id:5,title:"   ",status:"pending",assignee:"",deadline:"2025-02-25",dependencies:[3,4],blockedBy:[]},{id:6,title:"",status:"pending",assignee:"",deadline:"2025-03-01",dependencies:[5],blockedBy:[]},{id:7,title:" ",status:"pending",deadline:"2025-03-05",dependencies:[6],blockedBy:[]},{id:8,title:"",status:"pending",assignee:"",deadline:"2025-03-10",dependencies:[7],blockedBy:[]}]),c([{fromTask:1,toTask:3,type:"blocks"},{fromTask:2,toTask:4,type:"blocks"},{fromTask:3,toTask:5,type:"blocks"},{fromTask:4,toTask:5,type:"blocks"},{fromTask:5,toTask:6,type:"blocks"},{fromTask:6,toTask:7,type:"blocks"},{fromTask:7,toTask:8,type:"blocks"}])}catch(R){console.error("Error loading dependencies:",R)}finally{N(!1)}}},k=async()=>{if(!(!g.fromTask||!g.toTask)){if(g.fromTask===g.toTask){alert("      ");return}if(T(g.fromTask,g.toTask)){alert("   !");return}try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/task-dependencies`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(g)})).ok&&(v({fromTask:0,toTask:0,type:"blocks"}),j(!1),await S())}catch(R){console.error("Error adding dependency:",R)}}},_=async(R,q)=>{if(confirm("  ?"))try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/task-dependencies/${R}/${q}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&await S()}catch(J){console.error("Error removing dependency:",J)}},T=(R,q)=>{const J=new Set,se=[q];for(;se.length>0;){const Y=se.shift();if(Y===R)return!0;if(J.has(Y))continue;J.add(Y);const ee=n.find(te=>te.id===Y);ee&&se.push(...ee.dependencies)}return!1},E=R=>{const q=new Set(u);q.has(R)?q.delete(R):q.add(R),h(q)},z=R=>n.find(q=>q.id===R),M=R=>{switch(R){case"completed":return"bg-green-100 text-green-700 border-green-300";case"in_progress":return"bg-blue-100 text-blue-700 border-blue-300";case"pending":return"bg-gray-100 text-gray-700 border-gray-300";case"blocked":return"bg-red-100 text-red-700 border-red-300";default:return"bg-gray-100 text-gray-700 border-gray-300"}},C=R=>{switch(R){case"completed":return e.jsx(it,{className:"w-4 h-4"});case"in_progress":return e.jsx(Ue,{className:"w-4 h-4"});case"pending":return e.jsx(Ar,{className:"w-4 h-4"});case"blocked":return e.jsx(qe,{className:"w-4 h-4"});default:return e.jsx(Ar,{className:"w-4 h-4"})}},A=R=>{const q=new Date(R);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"short"}).format(q)},Z=()=>{const R=new Set,q=[],J=(Y,ee)=>{if(R.has(Y)||(R.add(Y),!z(Y)))return;const K=[...ee,Y],$=n.filter(le=>le.dependencies.includes(Y));$.length===0?q.push(K):$.forEach(le=>J(le.id,K)),R.delete(Y)};return n.filter(Y=>Y.dependencies.length===0).forEach(Y=>J(Y.id,[])),q.reduce((Y,ee)=>ee.length>Y.length?ee:Y,[])};if(!s)return null;const I=Z(),V=n.filter(R=>R.dependencies.some(q=>{const J=z(q);return J&&J.status!=="completed"}));return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ph,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"  "}),e.jsx("p",{className:"text-purple-100 text-sm mt-1",children:a})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ph,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-gray-600",children:" :"}),e.jsx("span",{className:"font-bold text-purple-600",children:n.length})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vl,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-gray-600",children:":"}),e.jsx("span",{className:"font-bold text-blue-600",children:o.length})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"w-4 h-4 text-orange-600"}),e.jsx("span",{className:"text-gray-600",children:":"}),e.jsx("span",{className:"font-bold text-orange-600",children:V.length})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ar,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"text-gray-600",children:" :"}),e.jsxs("span",{className:"font-bold text-red-600",children:[I.length," "]})]})]}),!p&&e.jsxs("button",{onClick:()=>j(!0),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-semibold text-sm",children:[e.jsx(Ve,{className:"w-4 h-4"})," "]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[p&&e.jsxs("div",{className:"mb-6 bg-purple-50 border-2 border-purple-200 rounded-xl p-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-4",children:" "}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" ()"}),e.jsxs("select",{value:g.fromTask,onChange:R=>v({...g,fromTask:Number(R.target.value)}),className:"w-full px-4 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 outline-none",children:[e.jsx("option",{value:0,children:" "}),n.map(R=>e.jsx("option",{value:R.id,children:R.title},R.id))]})]}),e.jsx("div",{className:"text-center text-2xl text-purple-600 font-bold",children:""}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" ()"}),e.jsxs("select",{value:g.toTask,onChange:R=>v({...g,toTask:Number(R.target.value)}),className:"w-full px-4 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 outline-none",children:[e.jsx("option",{value:0,children:" "}),n.map(R=>e.jsx("option",{value:R.id,children:R.title},R.id))]})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs("button",{onClick:k,disabled:!g.fromTask||!g.toTask,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 font-semibold",children:[e.jsx(vl,{className:"w-4 h-4"})," "]}),e.jsx("button",{onClick:()=>{j(!1),v({fromTask:0,toTask:0,type:"blocks"})},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-semibold",children:""})]})]}),I.length>0&&e.jsxs("div",{className:"mb-6 bg-red-50 border-2 border-red-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Ar,{className:"w-5 h-5 text-red-600"}),e.jsx("h4",{className:"font-bold text-gray-900",children:" "})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:I.map((R,q)=>{const J=z(R);return J?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-700 rounded-lg text-sm font-semibold border-2 border-red-300",children:J.title}),q<I.length-1&&e.jsx(jn,{className:"w-4 h-4 text-red-400"})]},R):null})})]}),y?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"..."}):n.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Ph,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold",children:"   "})]}):e.jsx("div",{className:"space-y-3",children:n.map(R=>{const q=u.has(R.id),J=R.dependencies.map(z).filter(Boolean),se=n.filter(te=>te.dependencies.includes(R.id)),Y=I.includes(R.id),ee=R.dependencies.some(te=>{const K=z(te);return K&&K.status!=="completed"});return e.jsxs("div",{className:`bg-white border-2 rounded-xl transition-all ${Y?"border-red-400 shadow-lg":ee?"border-orange-400":"border-gray-200 hover:border-purple-400"}`,children:[e.jsx("div",{className:`p-4 cursor-pointer ${Y?"bg-red-50":ee?"bg-orange-50":"hover:bg-gray-50"}`,onClick:()=>E(R.id),children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[q?e.jsx(_i,{className:"w-5 h-5 text-gray-500 mt-0.5"}):e.jsx(jn,{className:"w-5 h-5 text-gray-500 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h5",{className:"font-bold text-gray-900 text-lg",children:R.title}),Y&&e.jsx("span",{className:"px-2 py-0.5 bg-red-500 text-white rounded-full text-xs font-bold",children:" "}),ee&&e.jsx("span",{className:"px-2 py-0.5 bg-orange-500 text-white rounded-full text-xs font-bold",children:""})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border-2 flex items-center gap-1 ${M(R.status)}`,children:[C(R.status),R.status]}),R.assignee&&e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-semibold",children:R.assignee}),R.deadline&&e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-semibold",children:A(R.deadline)}),e.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-full text-xs font-semibold",children:[J.length," "]}),e.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-full text-xs font-semibold",children:[": ",se.length]})]})]})]})})}),q&&e.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 space-y-4",children:[J.length>0&&e.jsxs("div",{children:[e.jsxs("h6",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(vl,{className:"w-4 h-4"})," :"]}),e.jsx("div",{className:"space-y-2",children:J.map(te=>e.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg p-3 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${M(te.status)}`,children:te.status}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:te.title})]}),e.jsx("button",{onClick:K=>{K.stopPropagation(),_(te.id,R.id)},className:"p-1 text-red-600 hover:bg-red-100 rounded transition-colors",title:" ",children:e.jsx(H4,{className:"w-4 h-4"})})]},te.id))})]}),se.length>0&&e.jsxs("div",{children:[e.jsxs("h6",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(qe,{className:"w-4 h-4"}),":"]}),e.jsx("div",{className:"space-y-2",children:se.map(te=>e.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg p-3 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${M(te.status)}`,children:te.status}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:te.title})]}),e.jsx("button",{onClick:K=>{K.stopPropagation(),_(R.id,te.id)},className:"p-1 text-red-600 hover:bg-red-100 rounded transition-colors",title:" ",children:e.jsx(H4,{className:"w-4 h-4"})})]},te.id))})]})]})]},R.id)})})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center flex-shrink-0",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx(qe,{className:"w-4 h-4 inline mr-1"}),"      "]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})})},H0=["  "," "," "," ","NDA","SLA",""],LW=({isOpen:s,onClose:t,projectId:r,projectName:a})=>{const[n,i]=w.useState([]),[o,c]=w.useState(!1),[u,h]=w.useState(null),[m,f]=w.useState({title:"",type:H0[0],description:"",amount:0,startDate:"",endDate:"",status:"draft"}),[p,j]=w.useState(null),[g,v]=w.useState(!1);w.useEffect(()=>{s&&r&&y()},[s,r]),w.useEffect(()=>{if(s){const V=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${V}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const V=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(V||"0")*-1)}},[s]);const y=async()=>{if(r){v(!0);try{const V=await fetch(`http://localhost:8001/admin/api/projects/${r}/contracts`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(V.ok){const R=await V.json();i(R.contracts||[])}else i([{id:1,title:"   ",type:"  ",description:"   -    ",amount:5e5,startDate:"2025-01-01",endDate:"2025-06-30",status:"active",file:{name:"contract_main.pdf",url:"/files/contract_main.pdf",size:1024e3,uploadedAt:new Date().toISOString()},signedBy:" ",signedAt:"2025-01-01",createdAt:new Date(Date.now()-864e5*30).toISOString()},{id:2,title:"  1",type:"  ",description:"    ",amount:15e4,startDate:"2025-02-01",endDate:"2025-04-30",status:"active",file:{name:"addendum_01.pdf",url:"/files/addendum_01.pdf",size:512e3,uploadedAt:new Date(Date.now()-864e5*15).toISOString()},signedBy:" ",signedAt:"2025-02-01",createdAt:new Date(Date.now()-864e5*15).toISOString()},{id:3,title:"  ",type:"NDA",description:"NDA      ",amount:0,startDate:"2024-12-15",endDate:"2027-12-15",status:"active",file:{name:"nda.pdf",url:"/files/nda.pdf",size:256e3,uploadedAt:new Date(Date.now()-864e5*45).toISOString()},signedBy:" ",signedAt:"2024-12-15",createdAt:new Date(Date.now()-864e5*45).toISOString()},{id:4,title:"  ",type:" ",description:"    ",amount:5e4,startDate:"2025-07-01",endDate:"2026-07-01",status:"draft",createdAt:new Date(Date.now()-864e5*5).toISOString()}])}catch(V){console.error("Error loading contracts:",V)}finally{v(!1)}}},N=async()=>{if(m.title.trim())try{const V=new FormData;Object.entries(m).forEach(([q,J])=>{V.append(q,String(J))}),p&&V.append("file",p),(await fetch(`http://localhost:8001/admin/api/projects/${r}/contracts`,{method:"POST",headers:{Authorization:"Basic "+btoa("admin:qwerty123")},body:V})).ok&&(f({title:"",type:H0[0],description:"",amount:0,startDate:"",endDate:"",status:"draft"}),j(null),c(!1),await y())}catch(V){console.error("Error adding contract:",V)}},S=async V=>{if(confirm("  ?"))try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/contracts/${V}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&await y()}catch(R){console.error("Error deleting contract:",R)}},k=V=>{V.file&&window.open(V.file.url,"_blank")},_=V=>{const R=V.target.files?.[0];R&&j(R)},T=V=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0}).format(V),E=V=>V<1024?V+" B":V<1024*1024?(V/1024).toFixed(1)+" KB":(V/(1024*1024)).toFixed(1)+" MB",z=V=>{const R=new Date(V);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"long",year:"numeric"}).format(R)},M=V=>{switch(V){case"active":return"bg-green-100 text-green-700 border-green-300";case"draft":return"bg-gray-100 text-gray-700 border-gray-300";case"expired":return"bg-red-100 text-red-700 border-red-300";case"terminated":return"bg-orange-100 text-orange-700 border-orange-300";default:return"bg-gray-100 text-gray-700 border-gray-300"}},C=V=>{switch(V){case"active":return e.jsx(it,{className:"w-4 h-4"});case"draft":return e.jsx(Zs,{className:"w-4 h-4"});case"expired":return e.jsx(qe,{className:"w-4 h-4"});case"terminated":return e.jsx(Ae,{className:"w-4 h-4"});default:return e.jsx(Ie,{className:"w-4 h-4"})}},A=V=>({draft:"",active:"",expired:"",terminated:""})[V]||V;if(!s)return null;const Z=n.filter(V=>V.status==="active").length,I=n.filter(V=>V.status==="active").reduce((V,R)=>V+R.amount,0);return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ie,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-emerald-100 text-sm mt-1",children:a})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200 flex-shrink-0",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-3",children:[e.jsxs("div",{className:"bg-white rounded-xl p-3 border-2 border-blue-200",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-1",children:" "}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:n.length})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 border-2 border-green-200",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-1",children:""}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:Z})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 border-2 border-emerald-200",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-1",children:" "}),e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:T(I)})]})]}),!o&&e.jsxs("button",{onClick:()=>c(!0),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors font-semibold text-sm",children:[e.jsx(Ve,{className:"w-4 h-4"})," "]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[o&&e.jsxs("div",{className:"mb-6 bg-emerald-50 border-2 border-emerald-200 rounded-xl p-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-4",children:" "}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsx("input",{type:"text",value:m.title,onChange:V=>f({...m,title:V.target.value}),className:"w-full px-4 py-2 border-2 border-emerald-300 rounded-lg focus:border-emerald-500 outline-none",placeholder:" "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsx("select",{value:m.type,onChange:V=>f({...m,type:V.target.value}),className:"w-full px-4 py-2 border-2 border-emerald-300 rounded-lg focus:border-emerald-500 outline-none",children:H0.map(V=>e.jsx("option",{value:V,children:V},V))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsx("textarea",{value:m.description,onChange:V=>f({...m,description:V.target.value}),className:"w-full px-4 py-2 border-2 border-emerald-300 rounded-lg focus:border-emerald-500 outline-none resize-none",rows:2,placeholder:"  "})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" ()"}),e.jsx("input",{type:"number",value:m.amount,onChange:V=>f({...m,amount:Number(V.target.value)}),className:"w-full px-4 py-2 border-2 border-emerald-300 rounded-lg focus:border-emerald-500 outline-none",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" "}),e.jsx("input",{type:"date",value:m.startDate,onChange:V=>f({...m,startDate:V.target.value}),className:"w-full px-4 py-2 border-2 border-emerald-300 rounded-lg focus:border-emerald-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" "}),e.jsx("input",{type:"date",value:m.endDate,onChange:V=>f({...m,endDate:V.target.value}),className:"w-full px-4 py-2 border-2 border-emerald-300 rounded-lg focus:border-emerald-500 outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" "}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("label",{className:"flex-1 px-4 py-2 border-2 border-dashed border-emerald-300 rounded-lg cursor-pointer hover:border-emerald-500 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx(fn,{className:"w-4 h-4"}),p?p.name:"  PDF  DOCX"]}),e.jsx("input",{type:"file",onChange:_,className:"hidden",accept:".pdf,.doc,.docx"})]}),p&&e.jsx("button",{onClick:()=>j(null),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",children:e.jsx(Ae,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:N,disabled:!m.title.trim(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 font-semibold",children:[e.jsx(ss,{className:"w-4 h-4"}),""]}),e.jsx("button",{onClick:()=>{c(!1),f({title:"",type:H0[0],description:"",amount:0,startDate:"",endDate:"",status:"draft"}),j(null)},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-semibold",children:""})]})]})]}),g?e.jsx("div",{className:"text-center py-12 text-gray-500",children:" ..."}):n.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Ie,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold",children:" "}),e.jsx("p",{className:"text-sm mt-2",children:"   "})]}):e.jsx("div",{className:"space-y-3",children:n.map(V=>e.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4 hover:border-emerald-400 transition-all",children:e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h5",{className:"font-bold text-gray-900 text-lg",children:V.title}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border-2 flex items-center gap-1 ${M(V.status)}`,children:[C(V.status),A(V.status)]})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-3",children:V.description}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ie,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:V.type})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ge,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"font-bold text-gray-900",children:T(V.amount)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(pt,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:z(V.startDate)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ue,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:z(V.endDate)})]})]}),V.file&&e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ie,{className:"w-8 h-8 text-emerald-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:V.file.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[E(V.file.size)," "," ",z(V.file.uploadedAt)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>k(V),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"",children:e.jsx(wt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>k(V),className:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors",title:"",children:e.jsx(Ft,{className:"w-4 h-4"})})]})]})}),V.signedBy&&V.signedAt&&e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-gray-600",children:[e.jsx(st,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[": ",V.signedBy,"  ",z(V.signedAt)]})]})]}),e.jsx("div",{className:"flex items-center gap-2 ml-4",children:e.jsx("button",{onClick:()=>S(V.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"",children:e.jsx(Xe,{className:"w-4 h-4"})})})]})},V.id))})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center flex-shrink-0",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[": ",e.jsx("span",{className:"font-bold text-emerald-600",children:n.length})]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})})},xh=["#EF4444","#F59E0B","#10B981","#3B82F6","#8B5CF6","#EC4899","#14B8A6","#6B7280","#F97316","#06B6D4","#84CC16","#A855F7"],PW=({isOpen:s,onClose:t,onLabelsUpdated:r})=>{const[a,n]=w.useState([]),[i,o]=w.useState(!1),[c,u]=w.useState(null),[h,m]=w.useState(""),[f,p]=w.useState({name:"",color:xh[0],description:""}),[j,g]=w.useState(!1);w.useEffect(()=>{s&&v()},[s]),w.useEffect(()=>{if(s){const E=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${E}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const E=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(E||"0")*-1)}},[s]);const v=async()=>{g(!0);try{const E=await fetch("http://localhost:8001/admin/api/labels",{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(E.ok){const z=await E.json();n(z.labels||[])}else n([{id:1,name:"",color:"#EF4444",description:"  ",projectCount:5,createdAt:new Date().toISOString()},{id:2,name:"-",color:"#3B82F6",description:" -",projectCount:12,createdAt:new Date().toISOString()},{id:3,name:" ",color:"#10B981",description:"  ",projectCount:8,createdAt:new Date().toISOString()},{id:4,name:"",color:"#EC4899",description:"-",projectCount:15,createdAt:new Date().toISOString()},{id:5,name:"",color:"#8B5CF6",description:" ",projectCount:6,createdAt:new Date().toISOString()},{id:6,name:"",color:"#F59E0B",description:" ",projectCount:20,createdAt:new Date().toISOString()}])}catch(E){console.error("Error loading labels:",E)}finally{g(!1)}},y=async()=>{if(f.name.trim())try{(await fetch("http://localhost:8001/admin/api/labels",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(f)})).ok&&(p({name:"",color:xh[0],description:""}),o(!1),await v(),r&&r())}catch(E){console.error("Error creating label:",E)}},N=async E=>{if(f.name.trim())try{(await fetch(`http://localhost:8001/admin/api/labels/${E}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(f)})).ok&&(p({name:"",color:xh[0],description:""}),u(null),await v(),r&&r())}catch(z){console.error("Error updating label:",z)}},S=async E=>{const z=a.find(M=>M.id===E);if(!(z&&z.projectCount>0&&!confirm(` "${z.name}"   ${z.projectCount} . ?`)))try{(await fetch(`http://localhost:8001/admin/api/labels/${E}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}})).ok&&(await v(),r&&r())}catch(M){console.error("Error deleting label:",M)}},k=E=>{u(E.id),p({name:E.name,color:E.color,description:E.description}),o(!1)},_=()=>{u(null),o(!1),p({name:"",color:xh[0],description:""})},T=a.filter(E=>E.name.toLowerCase().includes(h.toLowerCase()));return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-pink-600 to-rose-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(di,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-pink-100 text-sm mt-1",children:"   "})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200 flex-shrink-0",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:h,onChange:E=>m(E.target.value),className:"w-full pl-10 pr-4 py-2 border-2 border-gray-300 rounded-lg focus:border-pink-500 outline-none",placeholder:" ..."})]}),!i&&!c&&e.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 px-4 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-700 transition-colors font-semibold",children:[e.jsx(Ve,{className:"w-5 h-5"})," "]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[(i||c)&&e.jsxs("div",{className:"mb-6 bg-pink-50 border-2 border-pink-200 rounded-xl p-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-4",children:c?" ":" "}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsx("input",{type:"text",value:f.name,onChange:E=>p({...f,name:E.target.value}),className:"w-full px-4 py-2 border-2 border-pink-300 rounded-lg focus:border-pink-500 outline-none",placeholder:" ",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),e.jsx("input",{type:"text",value:f.description,onChange:E=>p({...f,description:E.target.value}),className:"w-full px-4 py-2 border-2 border-pink-300 rounded-lg focus:border-pink-500 outline-none",placeholder:" "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("div",{className:"flex flex-wrap gap-2",children:xh.map(E=>e.jsx("button",{onClick:()=>p({...f,color:E}),className:`w-10 h-10 rounded-lg border-4 transition-all ${f.color===E?"border-gray-900 scale-110":"border-gray-300 hover:scale-105"}`,style:{backgroundColor:E}},E))}),e.jsxs("div",{className:"mt-3 p-3 bg-white rounded-lg border-2 border-gray-200",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-2",children:":"}),e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-white text-sm font-semibold",style:{backgroundColor:f.color},children:[e.jsx(di,{className:"w-4 h-4"}),f.name||" "]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>c?N(c):y(),disabled:!f.name.trim(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 font-semibold",children:[e.jsx(ss,{className:"w-4 h-4"}),c?"":""]}),e.jsx("button",{onClick:_,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-semibold",children:""})]})]})]}),j?e.jsx("div",{className:"text-center py-12 text-gray-500",children:" ..."}):T.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(di,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold",children:h?"  ":" "}),e.jsx("p",{className:"text-sm mt-2",children:h?"   ":"  "})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:T.map(E=>e.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4 hover:border-pink-400 transition-all",children:e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-white text-sm font-semibold mb-2",style:{backgroundColor:E.color},children:[e.jsx(di,{className:"w-4 h-4"}),E.name]}),E.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:E.description}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx(gr,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:["  ",E.projectCount," "]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 ml-3",children:[e.jsx("button",{onClick:()=>k(E),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"",children:e.jsx(Zs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>S(E.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"",children:e.jsx(Xe,{className:"w-4 h-4"})})]})]})},E.id))})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center flex-shrink-0",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[" : ",e.jsx("span",{className:"font-bold text-pink-600",children:a.length})]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})}):null},BW=({isOpen:s,onClose:t,projectId:r,projectName:a})=>{const[n,i]=w.useState([]),[o,c]=w.useState(null),[u,h]=w.useState(null),[m,f]=w.useState([]),[p,j]=w.useState(!1);w.useEffect(()=>{s&&r&&g()},[s,r]),w.useEffect(()=>{if(s){const E=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${E}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const E=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(E||"0")*-1)}},[s]),w.useEffect(()=>{o&&u?v():f([])},[o,u]);const g=async()=>{if(r){j(!0);try{const E=await fetch(`http://localhost:8001/admin/api/projects/${r}/versions`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(E.ok){const z=await E.json();i(z.versions||[])}else i([{id:1,version:"v1.0.0",createdAt:"2025-01-01",snapshot:{name:"-",status:"planning",budget:3e5,deadline:"2025-05-01",team_size:3}},{id:2,version:"v2.0.0",createdAt:"2025-01-15",snapshot:{name:"-  ",status:"in_progress",budget:4e5,deadline:"2025-04-01",team_size:5,features:" "}},{id:3,version:"v2.5.0",createdAt:"2025-02-01",snapshot:{name:"-  ",status:"in_progress",budget:45e4,deadline:"2025-03-01",team_size:5,features:" "}},{id:4,version:"v3.0.0",createdAt:"2025-02-15",snapshot:{name:"-  ",status:"in_progress",budget:5e5,deadline:"2025-03-01",team_size:8,features:" ",integrations:"API, Webhooks"}}]),n.length>=2&&(c(n[n.length-2].id),h(n[n.length-1].id))}catch(E){console.error("Error loading versions:",E)}finally{j(!1)}}},v=()=>{const E=n.find(A=>A.id===o),z=n.find(A=>A.id===u);if(!E||!z)return;const M=new Set([...Object.keys(E.snapshot),...Object.keys(z.snapshot)]),C=[];M.forEach(A=>{const Z=E.snapshot[A],I=z.snapshot[A];Z===void 0&&I!==void 0?C.push({field:A,oldValue:null,newValue:I,type:"added"}):Z!==void 0&&I===void 0?C.push({field:A,oldValue:Z,newValue:null,type:"removed"}):Z!==I?C.push({field:A,oldValue:Z,newValue:I,type:"modified"}):C.push({field:A,oldValue:Z,newValue:I,type:"unchanged"})}),f(C)},y=E=>E==null?"":typeof E=="boolean"?E?"":"":typeof E=="number"?E.toLocaleString():String(E),N=E=>{const z=new Date(E);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"long",year:"numeric"}).format(z)},S=E=>{switch(E){case"added":return e.jsx(Ve,{className:"w-4 h-4 text-green-600"});case"removed":return e.jsx(z4,{className:"w-4 h-4 text-red-600"});case"modified":return e.jsx(qe,{className:"w-4 h-4 text-orange-600"});case"unchanged":return e.jsx(ss,{className:"w-4 h-4 text-gray-400"});default:return null}},k=E=>{switch(E){case"added":return"bg-green-50 border-green-200";case"removed":return"bg-red-50 border-red-200";case"modified":return"bg-orange-50 border-orange-200";case"unchanged":return"bg-gray-50 border-gray-200";default:return"bg-gray-50 border-gray-200"}},_=E=>({name:"",status:"",budget:"",deadline:"",team_size:" ",features:"",integrations:""})[E]||E;if(!s)return null;const T=m.filter(E=>E.type!=="unchanged").length;return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(L4,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-indigo-100 text-sm mt-1",children:a})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200 flex-shrink-0",children:[e.jsxs("div",{className:"grid grid-cols-[1fr_auto_1fr] gap-4 items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" 1 ()"}),e.jsxs("select",{value:o||"",onChange:E=>c(Number(E.target.value)),className:"w-full px-4 py-2 border-2 border-indigo-300 rounded-lg focus:border-indigo-500 outline-none",children:[e.jsx("option",{value:"",children:" "}),n.map(E=>e.jsxs("option",{value:E.id,children:[E.version," - ",N(E.createdAt)]},E.id))]})]}),e.jsx(LL,{className:"w-8 h-8 text-indigo-600 mt-6"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" 2 ()"}),e.jsxs("select",{value:u||"",onChange:E=>h(Number(E.target.value)),className:"w-full px-4 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 outline-none",children:[e.jsx("option",{value:"",children:" "}),n.map(E=>e.jsxs("option",{value:E.id,children:[E.version," - ",N(E.createdAt)]},E.id))]})]})]}),o&&u&&e.jsx("div",{className:"mt-4 p-3 bg-indigo-50 border border-indigo-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-indigo-800",children:[e.jsx(qe,{className:"w-4 h-4"}),e.jsxs("span",{children:[" : ",e.jsx("span",{className:"font-bold",children:T})]})]})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:p?e.jsx("div",{className:"text-center py-12 text-gray-500",children:" ..."}):!o||!u?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(L4,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold",children:"    "}),e.jsx("p",{className:"text-sm mt-2",children:"     "})]}):m.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(ss,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold",children:" "}),e.jsx("p",{className:"text-sm mt-2",children:"  "})]}):e.jsx("div",{className:"space-y-3",children:m.map((E,z)=>e.jsx("div",{className:`border-2 rounded-xl p-4 ${k(E.type)}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5",children:S(E.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-bold text-gray-900 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:_(E.field)}),E.type==="added"&&e.jsx("span",{className:"px-2 py-0.5 bg-green-500 text-white rounded-full text-xs font-bold",children:""}),E.type==="removed"&&e.jsx("span",{className:"px-2 py-0.5 bg-red-500 text-white rounded-full text-xs font-bold",children:""}),E.type==="modified"&&e.jsx("span",{className:"px-2 py-0.5 bg-orange-500 text-white rounded-full text-xs font-bold",children:""})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs font-semibold text-gray-600 mb-1",children:[" (",n.find(M=>M.id===o)?.version,")"]}),e.jsx("div",{className:`px-3 py-2 rounded-lg text-sm font-mono ${E.type==="added"?"bg-gray-100 text-gray-400":E.type==="removed"?"bg-red-100 text-red-900 line-through":"bg-white"}`,children:y(E.oldValue)})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs font-semibold text-gray-600 mb-1",children:[" (",n.find(M=>M.id===u)?.version,")"]}),e.jsx("div",{className:`px-3 py-2 rounded-lg text-sm font-mono ${E.type==="removed"?"bg-gray-100 text-gray-400":E.type==="added"?"bg-green-100 text-green-900 font-bold":E.type==="modified"?"bg-orange-100 text-orange-900 font-bold":"bg-white"}`,children:y(E.newValue)})]})]})]})]})},z))})}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"w-4 h-4 text-green-600"}),e.jsxs("span",{className:"text-gray-600",children:[":"," ",e.jsx("span",{className:"font-bold text-green-600",children:m.filter(E=>E.type==="added").length})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"w-4 h-4 text-orange-600"}),e.jsxs("span",{className:"text-gray-600",children:[":"," ",e.jsx("span",{className:"font-bold text-orange-600",children:m.filter(E=>E.type==="modified").length})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z4,{className:"w-4 h-4 text-red-600"}),e.jsxs("span",{className:"text-gray-600",children:[":"," ",e.jsx("span",{className:"font-bold text-red-600",children:m.filter(E=>E.type==="removed").length})]})]})]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]})})},FW=({isOpen:s,onClose:t,projectId:r,projectName:a})=>{const[n,i]=w.useState({visibility:"team",allowGuestView:!1,requireApproval:!0,notifyOnStatusChange:!0,notifyOnDeadline:!0,notifyOnBudgetAlert:!0,emailDigest:"daily",allowTaskCreation:"team",allowComments:"all",allowFileUpload:"team",autoArchiveCompleted:!1,autoArchiveDays:30,autoStatusChange:!1,autoAssignTasks:!1,slackNotifications:!1,slackWebhook:"",githubIntegration:!1,githubRepo:"",customFields:[]}),[o,c]=w.useState(!1),[u,h]=w.useState(!1),[m,f]=w.useState("privacy");w.useEffect(()=>{s&&r&&p()},[s,r]),w.useEffect(()=>{if(s){const g=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${g}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const g=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(g||"0")*-1)}},[s]);const p=async()=>{if(r){c(!0);try{const g=await fetch(`http://localhost:8001/admin/api/projects/${r}/settings`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(g.ok){const v=await g.json();i(v.settings||n)}}catch(g){console.error("Error loading settings:",g)}finally{c(!1)}}},j=async()=>{h(!0);try{(await fetch(`http://localhost:8001/admin/api/projects/${r}/settings`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(n)})).ok?alert("  !"):alert("  ")}catch(g){console.error("Error saving settings:",g),alert("  ")}finally{h(!1)}};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-5xl w-full overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-gray-700 to-gray-900 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Na,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:" "}),e.jsx("p",{className:"text-gray-300 text-sm mt-1",children:a})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50 flex-shrink-0 overflow-x-auto",children:[{key:"privacy",label:"",icon:Uf},{key:"notifications",label:"",icon:Zr},{key:"permissions",label:"",icon:tt},{key:"automation",label:"",icon:Na},{key:"integration",label:"",icon:em}].map(g=>e.jsxs("button",{onClick:()=>f(g.key),className:`flex items-center gap-2 px-6 py-3 font-semibold whitespace-nowrap transition-colors ${m===g.key?"bg-white border-b-2 border-gray-700 text-gray-900":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(g.icon,{className:"w-4 h-4"}),g.label]},g.key))}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:o?e.jsx("div",{className:"text-center py-12 text-gray-500",children:" ..."}):e.jsxs(e.Fragment,{children:[m==="privacy"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-4",children:" "}),e.jsx("div",{className:"space-y-3",children:[{value:"private",label:"",desc:"  "},{value:"team",label:"",desc:"  "},{value:"organization",label:"",desc:"  "},{value:"public",label:"",desc:" "}].map(g=>e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:[e.jsx("input",{type:"radio",name:"visibility",value:g.value,checked:n.visibility===g.value,onChange:v=>i({...n,visibility:v.target.value}),className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:g.label}),e.jsx("div",{className:"text-sm text-gray-600",children:g.desc})]})]},g.value))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.allowGuestView,onChange:g=>i({...n,allowGuestView:g.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"  "}),e.jsx("div",{className:"text-sm text-gray-600",children:"    "})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.requireApproval,onChange:g=>i({...n,requireApproval:g.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"  "}),e.jsx("div",{className:"text-sm text-gray-600",children:"   "})]})]})]})]}),m==="notifications"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.notifyOnStatusChange,onChange:g=>i({...n,notifyOnStatusChange:g.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"   "}),e.jsx("div",{className:"text-sm text-gray-600",children:"    "})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.notifyOnDeadline,onChange:g=>i({...n,notifyOnDeadline:g.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"   "}),e.jsx("div",{className:"text-sm text-gray-600",children:"  3   "})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.notifyOnBudgetAlert,onChange:g=>i({...n,notifyOnBudgetAlert:g.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"   "}),e.jsx("div",{className:"text-sm text-gray-600",children:"  80% "})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email-"}),e.jsxs("select",{value:n.emailDigest,onChange:g=>i({...n,emailDigest:g.target.value}),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-gray-500 outline-none",children:[e.jsx("option",{value:"none",children:""}),e.jsx("option",{value:"daily",children:""}),e.jsx("option",{value:"weekly",children:""})]})]})]}),m==="permissions"&&e.jsx("div",{className:"space-y-6",children:[{key:"allowTaskCreation",label:" "},{key:"allowComments",label:""},{key:"allowFileUpload",label:" "}].map(g=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:g.label}),e.jsxs("select",{value:n[g.key],onChange:v=>i({...n,[g.key]:v.target.value}),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-gray-500 outline-none",children:[e.jsx("option",{value:"owner",children:" "}),e.jsx("option",{value:"team",children:" "}),e.jsx("option",{value:"all",children:" "})]})]},g.key))}),m==="automation"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.autoArchiveCompleted,onChange:g=>i({...n,autoArchiveCompleted:g.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"  "}),e.jsx("div",{className:"text-sm text-gray-600",children:" :"}),n.autoArchiveCompleted&&e.jsx("input",{type:"number",value:n.autoArchiveDays,onChange:g=>i({...n,autoArchiveDays:Number(g.target.value)}),className:"mt-2 w-32 px-3 py-1 border-2 border-gray-300 rounded-lg",min:"1"}),n.autoArchiveCompleted&&e.jsx("span",{className:"ml-2 text-sm",children:""})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.autoStatusChange,onChange:g=>i({...n,autoStatusChange:g.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"  "}),e.jsx("div",{className:"text-sm text-gray-600",children:"    "})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.autoAssignTasks,onChange:g=>i({...n,autoAssignTasks:g.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:" "}),e.jsx("div",{className:"text-sm text-gray-600",children:"  "})]})]})]}),m==="integration"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-3 mb-3",children:[e.jsx("input",{type:"checkbox",checked:n.slackNotifications,onChange:g=>i({...n,slackNotifications:g.target.checked}),className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold text-gray-900",children:"Slack "})]}),n.slackNotifications&&e.jsx("input",{type:"text",value:n.slackWebhook,onChange:g=>i({...n,slackWebhook:g.target.value}),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-gray-500 outline-none",placeholder:"https://hooks.slack.com/services/..."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-3 mb-3",children:[e.jsx("input",{type:"checkbox",checked:n.githubIntegration,onChange:g=>i({...n,githubIntegration:g.target.checked}),className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold text-gray-900",children:"GitHub "})]}),n.githubIntegration&&e.jsx("input",{type:"text",value:n.githubRepo,onChange:g=>i({...n,githubRepo:g.target.value}),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-gray-500 outline-none",placeholder:"owner/repository"})]})]})]})}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(qe,{className:"w-4 h-4"}),e.jsx("span",{children:"      "})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""}),e.jsx("button",{onClick:j,disabled:u,className:"flex items-center gap-2 px-6 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-all font-semibold disabled:opacity-50",children:u?e.jsxs(e.Fragment,{children:[e.jsx(Na,{className:"w-5 h-5 animate-spin"}),"..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ka,{className:"w-5 h-5"}),""]})})]})]})]})}):null},zW=({projectId:s,onClose:t})=>{const[r,a]=w.useState([]),[n,i]=w.useState([]),[o,c]=w.useState(!0),[u,h]=w.useState(""),[m,f]=w.useState("all"),[p,j]=w.useState("all"),[g,v]=w.useState(!1),[y,N]=w.useState(null),[S,k]=w.useState("overview"),[_,T]=w.useState({name:"",email:"",phone:"",role:"developer",department:"development",availability:100,allocatedHours:40,skills:[]}),[E,z]=w.useState({memberId:0,hoursPerWeek:40,startDate:new Date().toISOString().slice(0,10),endDate:"",notes:""});w.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),w.useEffect(()=>{M()},[s]);const M=async()=>{c(!0);try{const Y=await fetch(`http://147.45.215.199:8001/api/projects/${s}/team`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(Y.ok){const ee=await Y.json();a(ee.team||[]),i(ee.allocations||[])}else a([{id:1,name:" ",email:"alexey@company.com",phone:"+7 (999) 123-45-67",role:"Team Lead",department:"Development",availability:80,allocatedHours:32,actualHours:35,skills:["React","Node.js","TypeScript","Leadership"],performance:4.8,status:"busy",tasks:8,completionRate:92,joinedAt:"2024-01-15"},{id:2,name:" ",email:"maria@company.com",phone:"+7 (999) 234-56-78",role:"Frontend Developer",department:"Development",availability:100,allocatedHours:40,actualHours:38,skills:["React","CSS","JavaScript","Figma"],performance:4.5,status:"available",tasks:5,completionRate:88,joinedAt:"2024-02-01"},{id:3,name:" ",email:"dmitry@company.com",phone:"+7 (999) 345-67-89",role:"Backend Developer",department:"Development",availability:50,allocatedHours:20,actualHours:22,skills:["Python","FastAPI","PostgreSQL","Docker"],performance:4.7,status:"busy",tasks:12,completionRate:85,joinedAt:"2024-01-20"},{id:4,name:" ",email:"elena@company.com",phone:"+7 (999) 456-78-90",role:"QA Engineer",department:"Quality Assurance",availability:120,allocatedHours:48,actualHours:52,skills:["Testing","Selenium","Jira","API Testing"],performance:4.2,status:"overloaded",tasks:15,completionRate:78,joinedAt:"2024-02-15"},{id:5,name:" ",email:"sergey@company.com",phone:"+7 (999) 567-89-01",role:"DevOps Engineer",department:"Operations",availability:0,allocatedHours:0,actualHours:0,skills:["Docker","Kubernetes","AWS","CI/CD"],performance:4.9,status:"vacation",tasks:0,completionRate:95,joinedAt:"2024-01-10"}]),i([{id:1,memberId:1,projectId:s,hoursPerWeek:32,startDate:"2024-01-15",endDate:"2024-06-30",notes:" ,   "},{id:2,memberId:2,projectId:s,hoursPerWeek:40,startDate:"2024-02-01",endDate:"2024-12-31",notes:"  UI "}])}catch(Y){console.error("Error fetching team:",Y)}finally{c(!1)}},C=async()=>{if(!_.name||!_.email){alert("   (  email)");return}const Y={..._,id:Date.now(),actualHours:0,performance:0,status:"available",tasks:0,completionRate:0,joinedAt:new Date().toISOString().slice(0,10)};try{const ee=await fetch(`http://147.45.215.199:8001/api/projects/${s}/team`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(Y)});if(ee.ok){const te=await ee.json();a([...r,te])}else a([...r,Y]);v(!1),T({name:"",email:"",phone:"",role:"developer",department:"development",availability:100,allocatedHours:40,skills:[]})}catch(ee){console.error("Error adding member:",ee)}},A=async Y=>{if(confirm("    ?"))try{await fetch(`http://147.45.215.199:8001/api/projects/${s}/team/${Y}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}}),a(r.filter(ee=>ee.id!==Y)),i(n.filter(ee=>ee.memberId!==Y))}catch(ee){console.error("Error removing member:",ee)}},Z=async()=>{if(!E.memberId||!E.endDate){alert("     ");return}const Y={...E,id:Date.now(),projectId:s};try{const ee=await fetch(`http://147.45.215.199:8001/api/projects/${s}/allocations`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(Y)});if(ee.ok){const te=await ee.json();i([...n,te])}else i([...n,Y]);z({memberId:0,hoursPerWeek:40,startDate:new Date().toISOString().slice(0,10),endDate:"",notes:""})}catch(ee){console.error("Error adding allocation:",ee)}},I=Y=>{const ee={available:{label:"",color:"bg-green-100 text-green-800"},busy:{label:"",color:"bg-yellow-100 text-yellow-800"},overloaded:{label:"",color:"bg-red-100 text-red-800"},vacation:{label:"",color:"bg-gray-100 text-gray-800"}};return ee[Y]||ee.available},V=Y=>Y>=4.5?"text-green-600":Y>=4?"text-blue-600":Y>=3.5?"text-yellow-600":"text-red-600",R=r.filter(Y=>{const ee=Y.name.toLowerCase().includes(u.toLowerCase())||Y.email.toLowerCase().includes(u.toLowerCase())||Y.role.toLowerCase().includes(u.toLowerCase()),te=m==="all"||Y.role===m,K=p==="all"||Y.status===p;return ee&&te&&K}),J=(()=>{const Y=r.length,ee=r.reduce((ie,oe)=>ie+oe.allocatedHours,0),te=r.reduce((ie,oe)=>ie+oe.actualHours,0),K=r.length>0?r.reduce((ie,oe)=>ie+oe.performance,0)/r.length:0,$=r.filter(ie=>ie.status==="overloaded").length,le=r.filter(ie=>ie.status==="available").length;return{totalMembers:Y,totalAllocatedHours:ee,totalActualHours:te,avgPerformance:K,overloadedCount:$,availableCount:le,utilizationRate:ee>0?te/ee*100:0}})(),se=Array.from(new Set(r.map(Y=>Y.role)));return o?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:" ..."})]})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(tt,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"   "}),e.jsxs("p",{className:"text-purple-100 text-sm",children:[" #",s]})]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors","aria-label":"",children:e.jsx(Ae,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 p-6 bg-gray-50 border-b",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(tt,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:J.totalMembers})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsx("span",{children:" /"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:J.totalAllocatedHours})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(ct,{className:"w-4 h-4"}),e.jsx("span",{children:". /"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:J.totalActualHours})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Fr,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[J.utilizationRate.toFixed(0),"%"]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx($f,{className:"w-4 h-4"}),e.jsx("span",{children:". "})]}),e.jsx("div",{className:`text-2xl font-bold ${V(J.avgPerformance)}`,children:J.avgPerformance.toFixed(1)})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(ir,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-red-600",children:J.overloadedCount})]})]}),e.jsxs("div",{className:"flex gap-1 p-4 bg-white border-b",children:[e.jsx("button",{onClick:()=>k("overview"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${S==="overview"?"bg-purple-100 text-purple-700":"text-gray-600 hover:bg-gray-100"}`,children:" "}),e.jsx("button",{onClick:()=>k("allocation"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${S==="allocation"?"bg-purple-100 text-purple-700":"text-gray-600 hover:bg-gray-100"}`,children:" "}),e.jsx("button",{onClick:()=>k("skills"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${S==="skills"?"bg-purple-100 text-purple-700":"text-gray-600 hover:bg-gray-100"}`,children:""}),e.jsx("button",{onClick:()=>k("performance"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${S==="performance"?"bg-purple-100 text-purple-700":"text-gray-600 hover:bg-gray-100"}`,children:""})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[S==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(Fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"  , email, ...",value:u,onChange:Y=>h(Y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})}),e.jsxs("select",{value:m,onChange:Y=>f(Y.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),se.map(Y=>e.jsx("option",{value:Y,children:Y},Y))]}),e.jsxs("select",{value:p,onChange:Y=>j(Y.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),e.jsx("option",{value:"available",children:""}),e.jsx("option",{value:"busy",children:""}),e.jsx("option",{value:"overloaded",children:""}),e.jsx("option",{value:"vacation",children:""})]}),e.jsxs("button",{onClick:()=>v(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2",children:[e.jsx(xN,{className:"w-5 h-5"})," "]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:R.map(Y=>{const ee=I(Y.status),te=n.find(K=>K.memberId===Y.id);return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-purple-400 to-pink-400 flex items-center justify-center text-white font-bold text-lg",children:Y.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:Y.name}),e.jsx("p",{className:"text-sm text-gray-500",children:Y.role}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${ee.color}`,children:ee.label})})]})]}),e.jsx("button",{onClick:()=>A(Y.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors","aria-label":"",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(gi,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:Y.email})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(fi,{className:"w-4 h-4"}),e.jsx("span",{children:Y.phone})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:":"}),e.jsxs("span",{className:"font-medium",children:[Y.availability,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${Y.availability<=80?"bg-green-500":Y.availability<=100?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(Y.availability,100)}%`}})}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:" (/):"}),e.jsxs("span",{className:"font-medium",children:[Y.allocatedHours," / ",Y.actualHours]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:" :"}),e.jsx("span",{className:"font-medium",children:Y.tasks})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:":"}),e.jsxs("span",{className:"font-medium",children:[Y.completionRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:":"}),e.jsxs("span",{className:`font-bold ${V(Y.performance)}`,children:[Y.performance.toFixed(1)," / 5.0"]})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:":"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:Y.skills.map((K,$)=>e.jsx("span",{className:"text-xs px-2 py-1 bg-purple-100 text-purple-700 rounded-full",children:K},$))})]}),te&&e.jsx("div",{className:"mt-3 pt-3 border-t",children:e.jsxs("p",{className:"text-xs text-gray-500",children:[": ",te.hoursPerWeek," / (",te.startDate," - ",te.endDate,")"]})})]},Y.id)})}),R.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(tt,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"  ,  "})]})]}),S==="allocation"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"  "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),e.jsxs("select",{value:E.memberId,onChange:Y=>z({...E,memberId:parseInt(Y.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:0,children:"  "}),r.map(Y=>e.jsxs("option",{value:Y.id,children:[Y.name," - ",Y.role]},Y.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),e.jsx("input",{type:"number",min:"1",max:"168",value:E.hoursPerWeek,onChange:Y=>z({...E,hoursPerWeek:parseInt(Y.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"date",value:E.startDate,onChange:Y=>z({...E,startDate:Y.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),e.jsx("input",{type:"date",value:E.endDate,onChange:Y=>z({...E,endDate:Y.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:E.notes,onChange:Y=>z({...E,notes:Y.target.value}),rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"   ..."})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{onClick:Z,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:" "})})]}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:" "}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"/"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:n.map(Y=>{const ee=r.find(te=>te.id===Y.memberId);return ee?e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"font-medium text-gray-900",children:ee.name})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:ee.role}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 font-medium",children:Y.hoursPerWeek}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-600",children:[Y.startDate," - ",Y.endDate]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:Y.notes||"-"}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("button",{onClick:()=>i(n.filter(te=>te.id!==Y.id)),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:""})})]},Y.id):null})})]}),n.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(pt,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"  "})]})]})})]}),S==="skills"&&e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(Y=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-400 to-pink-400 flex items-center justify-center text-white font-bold",children:Y.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:Y.name}),e.jsx("p",{className:"text-sm text-gray-500",children:Y.role})]})]}),e.jsx("div",{className:"space-y-2",children:Y.skills.map((ee,te)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-700 flex-1",children:ee}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(K=>e.jsx("div",{className:`w-2 h-6 rounded ${K<=3+te%2?"bg-purple-600":"bg-gray-200"}`},K))})]},te))})]},Y.id))})}),S==="performance"&&e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:" "}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:" (/)"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:r.sort((Y,ee)=>ee.performance-Y.performance).map(Y=>{const ee=I(Y.status);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-400 to-pink-400 flex items-center justify-center text-white font-bold text-sm",children:Y.name.charAt(0)}),e.jsx("span",{className:"font-medium text-gray-900",children:Y.name})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:Y.role}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:`font-bold text-lg ${V(Y.performance)}`,children:Y.performance.toFixed(1)})}),e.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-900",children:Y.tasks}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("span",{className:"font-medium text-gray-900",children:[Y.completionRate,"%"]})}),e.jsxs("td",{className:"px-6 py-4 text-center text-sm text-gray-900",children:[Y.allocatedHours," / ",Y.actualHours]}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${ee.color}`,children:ee.label})})]},Y.id)})})]})})})})]}),g&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"  "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:_.name,onChange:Y=>T({..._,name:Y.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:" "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:_.email,onChange:Y=>T({..._,email:Y.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"ivan@company.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("input",{type:"tel",value:_.phone,onChange:Y=>T({..._,phone:Y.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"+7 (999) 123-45-67"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:_.role,onChange:Y=>T({..._,role:Y.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Frontend Developer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:_.department,onChange:Y=>T({..._,department:Y.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Development"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[" (%) - ",_.availability,"%"]}),e.jsx("input",{type:"range",min:"0",max:"200",step:"10",value:_.availability,onChange:Y=>T({..._,availability:parseInt(Y.target.value)}),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   "}),e.jsx("input",{type:"number",min:"1",max:"168",value:_.allocatedHours,onChange:Y=>T({..._,allocatedHours:parseInt(Y.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:""}),e.jsx("button",{onClick:C,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:""})]})]})})]})})},IW=({projectId:s,onClose:t})=>{const[r,a]=w.useState([]),[n,i]=w.useState(null),[o,c]=w.useState(!0),[u,h]=w.useState(""),[m,f]=w.useState("all"),[p,j]=w.useState("all"),[g,v]=w.useState(""),[y,N]=w.useState(""),[S,k]=w.useState(null),[_,T]=w.useState("entries"),[E,z]=w.useState(new Date),[M,C]=w.useState({description:"",taskId:0,startTime:new Date().toISOString().slice(0,16),endTime:new Date().toISOString().slice(0,16),billable:!0,hourlyRate:50});w.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),w.useEffect(()=>{A();const $=setInterval(()=>{z(new Date)},1e3);return()=>clearInterval($)},[s]);const A=async()=>{c(!0);try{const $=await fetch(`http://147.45.215.199:8001/api/projects/${s}/time-entries`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if($.ok){const le=await $.json();a(le.entries||[]),i(le.activeTimer||null)}else a([{id:1,userId:1,userName:" ",taskId:101,taskName:"  ",description:"    API",startTime:"2024-03-01T09:00:00",endTime:"2024-03-01T12:30:00",duration:210,billable:!0,hourlyRate:60,status:"stopped",createdAt:"2024-03-01T09:00:00"},{id:2,userId:2,userName:" ",taskId:102,taskName:" UI ",description:"  ",startTime:"2024-03-01T10:00:00",endTime:"2024-03-01T13:00:00",duration:180,billable:!0,hourlyRate:55,status:"stopped",createdAt:"2024-03-01T10:00:00"},{id:3,userId:1,userName:" ",taskId:103,taskName:"Code Review",description:" pull requests",startTime:"2024-03-01T14:00:00",endTime:"2024-03-01T15:30:00",duration:90,billable:!1,hourlyRate:60,status:"stopped",createdAt:"2024-03-01T14:00:00"},{id:4,userId:3,userName:" ",taskId:104,taskName:" CI/CD",description:" GitHub Actions",startTime:"2024-03-02T09:00:00",endTime:"2024-03-02T11:45:00",duration:165,billable:!0,hourlyRate:70,status:"stopped",createdAt:"2024-03-02T09:00:00"},{id:5,userId:2,userName:" ",description:"  ",startTime:"2024-03-02T14:00:00",endTime:"2024-03-02T15:00:00",duration:60,billable:!1,hourlyRate:55,status:"stopped",createdAt:"2024-03-02T14:00:00"}]),i(null)}catch($){console.error("Error fetching time entries:",$)}finally{c(!1)}},Z=async()=>{if(!M.description){alert("  ");return}const $={userId:1,userName:" ",taskId:M.taskId||void 0,description:M.description,startTime:new Date().toISOString(),billable:M.billable,hourlyRate:M.hourlyRate};try{const le=await fetch(`http://147.45.215.199:8001/api/projects/${s}/timer/start`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify($)});if(le.ok){const ie=await le.json();i(ie)}else i($);C({...M,description:""})}catch(le){console.error("Error starting timer:",le)}},I=async()=>{if(!n)return;const $=Math.floor((new Date().getTime()-new Date(n.startTime).getTime())/1e3/60),le={id:Date.now(),userId:n.userId,userName:n.userName,taskId:n.taskId,taskName:n.taskName,description:n.description,startTime:n.startTime,endTime:new Date().toISOString(),duration:$,billable:n.billable,hourlyRate:n.hourlyRate,status:"stopped",createdAt:n.startTime};try{const ie=await fetch(`http://147.45.215.199:8001/api/projects/${s}/timer/stop`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(le)});if(ie.ok){const oe=await ie.json();a([oe,...r])}else a([le,...r]);i(null)}catch(ie){console.error("Error stopping timer:",ie)}},V=async()=>{if(!M.description||!M.startTime||!M.endTime){alert("   ");return}const $=new Date(M.startTime),le=new Date(M.endTime),ie=Math.floor((le.getTime()-$.getTime())/1e3/60);if(ie<=0){alert("      ");return}const oe={id:Date.now(),userId:1,userName:" ",taskId:M.taskId||void 0,description:M.description,startTime:M.startTime,endTime:M.endTime,duration:ie,billable:M.billable,hourlyRate:M.hourlyRate,status:"stopped",createdAt:new Date().toISOString()};try{const de=await fetch(`http://147.45.215.199:8001/api/projects/${s}/time-entries`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(oe)});if(de.ok){const U=await de.json();a([U,...r])}else a([oe,...r]);C({description:"",taskId:0,startTime:new Date().toISOString().slice(0,16),endTime:new Date().toISOString().slice(0,16),billable:!0,hourlyRate:50})}catch(de){console.error("Error adding entry:",de)}},R=async $=>{if(confirm("   ?"))try{await fetch(`http://147.45.215.199:8001/api/projects/${s}/time-entries/${$}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}}),a(r.filter(le=>le.id!==$))}catch(le){console.error("Error deleting entry:",le)}},q=()=>{let $=r;g&&($=$.filter(W=>new Date(W.startTime)>=new Date(g))),y&&($=$.filter(W=>new Date(W.startTime)<=new Date(y+"T23:59:59"))),m!=="all"&&($=$.filter(W=>W.userName===m)),p!=="all"&&($=$.filter(W=>W.billable===(p==="billable")));const le=$.reduce((W,H)=>W+H.duration,0)/60,ie=$.filter(W=>W.billable).reduce((W,H)=>W+H.duration,0)/60,oe=le-ie,de=$.reduce((W,H)=>H.billable?W+H.duration/60*H.hourlyRate:W,0),U={},F={},Q={};return $.forEach(W=>{U[W.userName]=(U[W.userName]||0)+W.duration/60;const H=W.taskName||" ";F[H]=(F[H]||0)+W.duration/60;const re=W.startTime.slice(0,10);Q[re]=(Q[re]||0)+W.duration/60}),{totalHours:le,billableHours:ie,nonBillableHours:oe,totalAmount:de,entriesCount:$.length,avgHourlyRate:ie>0?de/ie:0,byUser:U,byTask:F,byDay:Q}},J=$=>{const le=Math.floor($/60),ie=$%60;return`${le} ${ie}`},se=()=>{if(!n)return"00:00:00";const $=Math.floor((E.getTime()-new Date(n.startTime).getTime())/1e3),le=Math.floor($/3600),ie=Math.floor($%3600/60),oe=$%60;return`${le.toString().padStart(2,"0")}:${ie.toString().padStart(2,"0")}:${oe.toString().padStart(2,"0")}`},Y=r.filter($=>{const le=$.description.toLowerCase().includes(u.toLowerCase())||$.userName.toLowerCase().includes(u.toLowerCase())||$.taskName&&$.taskName.toLowerCase().includes(u.toLowerCase()),ie=m==="all"||$.userName===m,oe=p==="all"||$.billable===(p==="billable"),de=!g||new Date($.startTime)>=new Date(g),U=!y||new Date($.startTime)<=new Date(y+"T23:59:59");return le&&ie&&oe&&de&&U}),ee=q(),te=Array.from(new Set(r.map($=>$.userName))),K=()=>{const $=["","","","","","","","Billable","",""],le=Y.map(U=>[U.startTime.slice(0,10),U.userName,U.taskName||"-",U.description,new Date(U.startTime).toLocaleTimeString("ru-RU"),U.endTime?new Date(U.endTime).toLocaleTimeString("ru-RU"):"-",J(U.duration),U.billable?"":"",`$${U.hourlyRate}`,U.billable?`$${(U.duration/60*U.hourlyRate).toFixed(2)}`:"-"]),ie=[$,...le].map(U=>U.join(",")).join(`
`),oe=new Blob([ie],{type:"text/csv;charset=utf-8;"}),de=document.createElement("a");de.href=URL.createObjectURL(oe),de.download=`time-tracking-project-${s}-${new Date().toISOString().slice(0,10)}.csv`,de.click()};return o?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:" ..."})]})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ue,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:" "}),e.jsxs("p",{className:"text-blue-100 text-sm",children:[" #",s]})]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors","aria-label":"",children:e.jsx(Ae,{className:"w-6 h-6"})})]}),n&&e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-b border-green-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center animate-pulse",children:e.jsx(bi,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:" "}),e.jsx("p",{className:"font-semibold text-gray-900",children:n.description}),n.taskName&&e.jsxs("p",{className:"text-sm text-gray-500",children:[": ",n.taskName]})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-4xl font-bold text-green-600 font-mono",children:se()}),e.jsx("p",{className:"text-sm text-gray-600",children:n.billable?`$${n.hourlyRate}/`:" "})]}),e.jsxs("button",{onClick:I,className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2 font-medium",children:[e.jsx(Jj,{className:"w-5 h-5"}),""]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 p-6 bg-gray-50 border-b",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[ee.totalHours.toFixed(1),""]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(ct,{className:"w-4 h-4"}),e.jsx("span",{children:"Billable"})]}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[ee.billableHours.toFixed(1),""]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Lh,{className:"w-4 h-4"}),e.jsx("span",{children:"Non-billable"})]}),e.jsxs("div",{className:"text-2xl font-bold text-gray-600",children:[ee.nonBillableHours.toFixed(1),""]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Ge,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["$",ee.totalAmount.toFixed(0)]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(tt,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:ee.entriesCount})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Ge,{className:"w-4 h-4"}),e.jsx("span",{children:". "})]}),e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:["$",ee.avgHourlyRate.toFixed(0)]})]})]}),e.jsxs("div",{className:"flex gap-1 p-4 bg-white border-b",children:[e.jsx("button",{onClick:()=>T("entries"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${_==="entries"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:" "}),e.jsx("button",{onClick:()=>T("timer"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${_==="timer"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:""}),e.jsx("button",{onClick:()=>T("reports"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${_==="reports"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:""})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[_==="entries"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(Fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"...",value:u,onChange:$=>h($.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsx("input",{type:"date",value:g,onChange:$=>v($.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:""}),e.jsx("input",{type:"date",value:y,onChange:$=>N($.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:""}),e.jsxs("select",{value:m,onChange:$=>f($.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),te.map($=>e.jsx("option",{value:$,children:$},$))]}),e.jsxs("select",{value:p,onChange:$=>j($.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),e.jsx("option",{value:"billable",children:"Billable"}),e.jsx("option",{value:"non-billable",children:"Non-billable"})]}),e.jsxs("button",{onClick:K,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx(wt,{className:"w-5 h-5"})," CSV"]})]}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Billable"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:Y.map($=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:new Date($.startTime).toLocaleDateString("ru-RU")}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:$.userName}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:$.taskName||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:$.description}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-600",children:[new Date($.startTime).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})," ","-"," ",$.endTime?new Date($.endTime).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}):"..."]}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:J($.duration)}),e.jsx("td",{className:"px-6 py-4 text-center",children:$.billable?e.jsx("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-800 rounded-full",children:""}):e.jsx("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-800 rounded-full",children:""})}),e.jsx("td",{className:"px-6 py-4 text-right text-sm font-medium text-gray-900",children:$.billable?`$${($.duration/60*$.hourlyRate).toFixed(2)}`:"-"}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("button",{onClick:()=>R($.id),className:"text-red-600 hover:text-red-800 p-1","aria-label":"",children:e.jsx(Xe,{className:"w-4 h-4"})})})]},$.id))})]}),Y.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Ue,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"  "})]})]})})]}),_==="timer"&&e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[n?e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 text-center",children:[e.jsx(Ue,{className:"w-16 h-16 mx-auto mb-4 text-green-600"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"  "}),e.jsx("p",{className:"text-gray-900 font-medium",children:n.description})]}):e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:" "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),e.jsx("input",{type:"text",value:M.description,onChange:$=>C({...M,description:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"   ?"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:M.billable,onChange:$=>C({...M,billable:$.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Billable"})]})}),M.billable&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" ($/)"}),e.jsx("input",{type:"number",min:"0",step:"5",value:M.hourlyRate,onChange:$=>C({...M,hourlyRate:parseFloat($.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsxs("button",{onClick:Z,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 font-medium",children:[e.jsx(bi,{className:"w-5 h-5"})," "]})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"  "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:M.description,onChange:$=>C({...M,description:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:" "})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"datetime-local",value:M.startTime,onChange:$=>C({...M,startTime:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"datetime-local",value:M.endTime,onChange:$=>C({...M,endTime:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:M.billable,onChange:$=>C({...M,billable:$.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Billable"})]})}),M.billable&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" ($/)"}),e.jsx("input",{type:"number",min:"0",step:"5",value:M.hourlyRate,onChange:$=>C({...M,hourlyRate:parseFloat($.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:V,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:" "})})]})]}),_==="reports"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:" "}),e.jsx("div",{className:"space-y-2",children:Object.entries(ee.byUser).sort(([,$],[,le])=>le-$).map(([$,le])=>e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:$}),e.jsxs("span",{className:"text-sm text-gray-600",children:[le.toFixed(1),""]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${le/ee.totalHours*100}%`}})})]})},$))})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:" "}),e.jsx("div",{className:"space-y-2",children:Object.entries(ee.byTask).sort(([,$],[,le])=>le-$).map(([$,le])=>e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:$}),e.jsxs("span",{className:"text-sm text-gray-600",children:[le.toFixed(1),""]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${le/ee.totalHours*100}%`}})})]})},$))})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:" "}),e.jsx("div",{className:"space-y-2",children:Object.entries(ee.byDay).sort(([$],[le])=>le.localeCompare($)).map(([$,le])=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-24 text-sm text-gray-600",children:new Date($).toLocaleDateString("ru-RU")}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"flex justify-between mb-1",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-8 relative",children:e.jsx("div",{className:"bg-purple-600 h-8 rounded-full flex items-center justify-end pr-3",style:{width:`${le/Math.max(...Object.values(ee.byDay))*100}%`},children:e.jsxs("span",{className:"text-xs font-medium text-white",children:[le.toFixed(1),""]})})})})})]},$))})]})]})]})]})})},$W=({projectId:s,onClose:t})=>{const[r,a]=w.useState([]),[n,i]=w.useState(!0),[o,c]=w.useState(!1),[u,h]=w.useState(null),[m,f]=w.useState(null),[p,j]=w.useState("all"),[g,v]=w.useState("all"),[y,N]=w.useState("grid"),[S,k]=w.useState({name:"",description:"",dueDate:"",priority:"medium",assignedTo:[],deliverables:[],notes:""}),[_,T]=w.useState("");w.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),w.useEffect(()=>{E()},[s]);const E=async()=>{i(!0);try{const Y=await fetch(`http://147.45.215.199:8001/api/projects/${s}/milestones`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(Y.ok){const ee=await Y.json();a(ee)}else a([{id:1,name:" ",description:"    ",dueDate:"2024-03-15",status:"completed",progress:100,priority:"high",assignedTo:[1,2],assignedNames:[" "," "],tasks:{total:12,completed:12},budget:{allocated:15e3,spent:14500},dependencies:[],completedAt:"2024-03-14",deliverables:["  ","UI Kit","  "],notes:" ,  ",createdAt:"2024-02-01"},{id:2,name:" MVP",description:"  ",dueDate:"2024-04-01",status:"in-progress",progress:65,priority:"critical",assignedTo:[1,3,4],assignedNames:[" "," "," "],tasks:{total:28,completed:18},budget:{allocated:45e3,spent:28e3},dependencies:[1],deliverables:[" ","API "," "],notes:" ,   ",createdAt:"2024-02-15"},{id:3,name:"  QA",description:"  ",dueDate:"2024-04-15",status:"not-started",progress:0,priority:"high",assignedTo:[4],assignedNames:[" "],tasks:{total:15,completed:0},budget:{allocated:12e3,spent:0},dependencies:[2],deliverables:["  "," "," "],notes:"  ",createdAt:"2024-03-01"},{id:4,name:" -",description:"    ",dueDate:"2024-04-25",status:"not-started",progress:0,priority:"critical",assignedTo:[1,2,3,4,5],assignedNames:[" "," "," "," "," "],tasks:{total:10,completed:0},budget:{allocated:8e3,spent:0},dependencies:[2,3],deliverables:["  production","","  "],notes:"  ",createdAt:"2024-03-01"},{id:5,name:" ",description:"  ",dueDate:"2024-03-20",status:"delayed",progress:40,priority:"medium",assignedTo:[6],assignedNames:[" "],tasks:{total:8,completed:3},budget:{allocated:25e3,spent:1e4},dependencies:[1],deliverables:[" ","  ","-"],notes:" -  ",createdAt:"2024-02-20"}])}catch(Y){console.error("Error fetching milestones:",Y)}finally{i(!1)}},z=async()=>{if(!S.name||!S.dueDate){alert("   ");return}const Y={...S,id:Date.now(),status:"not-started",progress:0,assignedNames:[],tasks:{total:0,completed:0},budget:{allocated:0,spent:0},dependencies:[],createdAt:new Date().toISOString()};try{const ee=await fetch(`http://147.45.215.199:8001/api/projects/${s}/milestones`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(Y)});if(ee.ok){const te=await ee.json();a([...r,te])}else a([...r,Y]);c(!1),k({name:"",description:"",dueDate:"",priority:"medium",assignedTo:[],deliverables:[],notes:""})}catch(ee){console.error("Error adding milestone:",ee)}},M=async Y=>{try{const ee=await fetch(`http://147.45.215.199:8001/api/projects/${s}/milestones/${Y.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(Y)});if(ee.ok){const te=await ee.json();a(r.map(K=>K.id===Y.id?te:K))}else a(r.map(te=>te.id===Y.id?Y:te))}catch(ee){console.error("Error updating milestone:",ee)}},C=async Y=>{if(confirm(" ?"))try{await fetch(`http://147.45.215.199:8001/api/projects/${s}/milestones/${Y}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}}),a(r.filter(ee=>ee.id!==Y))}catch(ee){console.error("Error deleting milestone:",ee)}},A=async Y=>{const ee={...Y,status:"completed",progress:100,completedAt:new Date().toISOString()};await M(ee)},Z=Y=>{const ee={"not-started":{label:" ",color:"bg-gray-100 text-gray-800",icon:nE},"in-progress":{label:" ",color:"bg-blue-100 text-blue-800",icon:Ue},completed:{label:"",color:"bg-green-100 text-green-800",icon:it},delayed:{label:"",color:"bg-red-100 text-red-800",icon:ir}};return ee[Y]||ee["not-started"]},I=Y=>{const ee={low:{label:"",color:"bg-gray-100 text-gray-700"},medium:{label:"",color:"bg-blue-100 text-blue-700"},high:{label:"",color:"bg-orange-100 text-orange-700"},critical:{label:"",color:"bg-red-100 text-red-700"}};return ee[Y]||ee.medium},V=Y=>{const ee=new Date(Y),te=new Date,K=ee.getTime()-te.getTime();return Math.ceil(K/(1e3*60*60*24))},R=Y=>Y.status!=="completed"&&V(Y.dueDate)<0,q=r.filter(Y=>{const ee=p==="all"||Y.status===p,te=g==="all"||Y.priority===g;return ee&&te}),se=(()=>{const Y=r.length,ee=r.filter(de=>de.status==="completed").length,te=r.filter(de=>de.status==="in-progress").length,K=r.filter(de=>de.status==="delayed").length,$=r.filter(de=>R(de)).length,le=r.length>0?r.reduce((de,U)=>de+U.progress,0)/r.length:0,ie=r.reduce((de,U)=>de+U.budget.allocated,0),oe=r.reduce((de,U)=>de+U.budget.spent,0);return{total:Y,completed:ee,inProgress:te,delayed:K,overdue:$,avgProgress:le,totalBudget:ie,spentBudget:oe,budgetUsage:ie>0?oe/ie*100:0}})();return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:" ..."})]})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Cf,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"  "}),e.jsxs("p",{className:"text-indigo-100 text-sm",children:[" #",s]})]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors","aria-label":"",children:e.jsx(Ae,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4 p-6 bg-gray-50 border-b",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Cf,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:se.total})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(it,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:se.completed})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:se.inProgress})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(ir,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-red-600",children:se.delayed})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(pt,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:se.overdue})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Ar,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[se.avgProgress.toFixed(0),"%"]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Ge,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["$",se.totalBudget/1e3,"k"]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Fr,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[se.budgetUsage.toFixed(0),"%"]})]})]}),e.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 p-6 bg-white border-b",children:[e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("select",{value:p,onChange:Y=>j(Y.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),e.jsx("option",{value:"not-started",children:" "}),e.jsx("option",{value:"in-progress",children:" "}),e.jsx("option",{value:"completed",children:""}),e.jsx("option",{value:"delayed",children:""})]}),e.jsxs("select",{value:g,onChange:Y=>v(Y.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"medium",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"critical",children:""})]}),e.jsxs("div",{className:"flex gap-1 bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>N("grid"),className:`px-3 py-1 rounded transition-colors ${y==="grid"?"bg-white shadow-sm":"hover:bg-gray-200"}`,children:""}),e.jsx("button",{onClick:()=>N("timeline"),className:`px-3 py-1 rounded transition-colors ${y==="timeline"?"bg-white shadow-sm":"hover:bg-gray-200"}`,children:""}),e.jsx("button",{onClick:()=>N("gantt"),className:`px-3 py-1 rounded transition-colors ${y==="gantt"?"bg-white shadow-sm":"hover:bg-gray-200"}`,children:""})]})]}),e.jsxs("button",{onClick:()=>c(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[e.jsx(Ve,{className:"w-5 h-5"})," "]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[y==="grid"&&e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:q.map(Y=>{const ee=Z(Y.status),te=I(Y.priority),K=V(Y.dueDate),$=R(Y),le=ee.icon;return e.jsxs("div",{className:`bg-white border-2 rounded-lg p-6 hover:shadow-lg transition-shadow ${$?"border-red-300":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${Y.status==="completed"?"bg-green-100":Y.status==="in-progress"?"bg-blue-100":Y.status==="delayed"?"bg-red-100":"bg-gray-100"}`,children:e.jsx(le,{className:`w-6 h-6 ${Y.status==="completed"?"text-green-600":Y.status==="in-progress"?"text-blue-600":Y.status==="delayed"?"text-red-600":"text-gray-600"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2",children:Y.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:Y.description}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${ee.color}`,children:ee.label}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${te.color}`,children:te.label}),$&&e.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-red-100 text-red-800",children:["  ",Math.abs(K)," ."]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>f(Y),className:"p-1 text-gray-400 hover:text-indigo-600 transition-colors","aria-label":"",children:e.jsx(Zs,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>C(Y.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors","aria-label":"",children:e.jsx(Xe,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-gray-600",children:""}),e.jsxs("span",{className:"font-medium text-gray-900",children:[Y.progress,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full transition-all ${Y.progress===100?"bg-green-500":Y.progress>=70?"bg-blue-500":Y.progress>=40?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Y.progress}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:" "}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(pt,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:new Date(Y.dueDate).toLocaleDateString("ru-RU")})]}),!Y.completedAt&&e.jsx("p",{className:`text-xs ${K<0?"text-red-600":K<=7?"text-orange-600":"text-gray-500"}`,children:K<0?`  ${Math.abs(K)} .`:K===0?"":` ${K} .`})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(tt,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:Y.assignedNames.length})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[Y.tasks.completed," / ",Y.tasks.total]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ge,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["$",Y.budget.spent,"k / $",Y.budget.allocated,"k"]})]})]})]}),Y.deliverables.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:":"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:Y.deliverables.map((ie,oe)=>e.jsx("span",{className:"text-xs px-2 py-1 bg-indigo-50 text-indigo-700 rounded",children:ie},oe))})]}),Y.status!=="completed"&&e.jsx("div",{className:"pt-4 border-t",children:e.jsxs("button",{onClick:()=>A(Y),className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(it,{className:"w-5 h-5"}),"  "]})})]})]},Y.id)})}),y==="timeline"&&e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:e.jsx("div",{className:"space-y-6",children:q.sort((Y,ee)=>new Date(Y.dueDate).getTime()-new Date(ee.dueDate).getTime()).map((Y,ee)=>{const te=Z(Y.status),K=I(Y.priority),$=te.icon;return e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${Y.status==="completed"?"bg-green-500":Y.status==="in-progress"?"bg-blue-500":Y.status==="delayed"?"bg-red-500":"bg-gray-400"}`,children:e.jsx($,{className:"w-6 h-6 text-white"})}),ee<q.length-1&&e.jsx("div",{className:"w-0.5 h-full bg-gray-300 flex-1 mt-2"})]}),e.jsxs("div",{className:"flex-1 pb-8",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900",children:Y.name}),e.jsx("p",{className:"text-sm text-gray-600",children:Y.description})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${te.color}`,children:te.label}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${K.color}`,children:K.label})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(pt,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(Y.dueDate).toLocaleDateString("ru-RU")})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ar,{className:"w-4 h-4"}),e.jsxs("span",{children:[Y.progress,"%"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(tt,{className:"w-4 h-4"}),e.jsx("span",{children:Y.assignedNames.length})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${Y.status==="completed"?"bg-green-500":"bg-blue-500"}`,style:{width:`${Y.progress}%`}})})]})]},Y.id)})})}),y==="gantt"&&e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("div",{className:"min-w-[800px]",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-2 mb-4 text-xs text-gray-600 font-medium",children:[e.jsx("div",{className:"col-span-3",children:""}),e.jsxs("div",{className:"col-span-9 grid grid-cols-12 text-center",children:[e.jsx("div",{children:""}),e.jsx("div",{children:""}),e.jsx("div",{children:""}),e.jsx("div",{children:""}),e.jsx("div",{children:""}),e.jsx("div",{children:""}),e.jsx("div",{children:""}),e.jsx("div",{children:""}),e.jsx("div",{children:""}),e.jsx("div",{children:""}),e.jsx("div",{children:""}),e.jsx("div",{children:""})]})]}),q.map(Y=>{const ee=new Date(Y.dueDate).getMonth();return e.jsxs("div",{className:"grid grid-cols-12 gap-2 mb-3",children:[e.jsxs("div",{className:"col-span-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:Y.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[Y.progress,"%"]})]}),e.jsx("div",{className:"col-span-9 grid grid-cols-12 gap-1",children:Array.from({length:12}).map((te,K)=>e.jsx("div",{className:`h-8 rounded ${K===ee?Y.status==="completed"?"bg-green-500":Y.status==="in-progress"?"bg-blue-500":Y.status==="delayed"?"bg-red-500":"bg-gray-400":"bg-gray-100"}`},K))})]},Y.id)})]})})}),q.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Cf,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:" ,  "})]})]}),o&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:" "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:S.name,onChange:Y=>k({...S,name:Y.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:" "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:S.description,onChange:Y=>k({...S,description:Y.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:" "})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),e.jsx("input",{type:"date",value:S.dueDate,onChange:Y=>k({...S,dueDate:Y.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("select",{value:S.priority,onChange:Y=>k({...S,priority:Y.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"medium",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"critical",children:""})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:_,onChange:Y=>T(Y.target.value),onKeyPress:Y=>{Y.key==="Enter"&&_&&(k({...S,deliverables:[...S.deliverables,_]}),T(""))},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"  (Enter  )"}),e.jsx("button",{onClick:()=>{_&&(k({...S,deliverables:[...S.deliverables,_]}),T(""))},className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:e.jsx(Ve,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:S.deliverables.map((Y,ee)=>e.jsxs("span",{className:"inline-flex items-center gap-1 text-sm px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full",children:[Y,e.jsx("button",{onClick:()=>k({...S,deliverables:S.deliverables.filter((te,K)=>K!==ee)}),className:"hover:text-indigo-900",children:e.jsx(Ae,{className:"w-3 h-3"})})]},ee))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:S.notes,onChange:Y=>k({...S,notes:Y.target.value}),rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:" "})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:""}),e.jsx("button",{onClick:z,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:""})]})]})}),m&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-3xl max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:m.name}),e.jsx("button",{onClick:()=>f(null),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Ae,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:":"}),e.jsx("p",{className:"text-gray-900",children:m.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:":"}),e.jsx("span",{className:`text-xs px-3 py-1 rounded-full ${Z(m.status).color}`,children:Z(m.status).label})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:":"}),e.jsx("span",{className:`text-xs px-3 py-1 rounded-full ${I(m.priority).color}`,children:I(m.priority).label})]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-700 mb-2",children:[": ",m.progress,"%"]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4",children:e.jsx("div",{className:"bg-indigo-600 h-4 rounded-full transition-all",style:{width:`${m.progress}%`}})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:":"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:m.assignedNames.map((Y,ee)=>e.jsx("span",{className:"text-sm px-3 py-1 bg-gray-100 text-gray-700 rounded-full",children:Y},ee))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:":"}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:m.deliverables.map((Y,ee)=>e.jsx("li",{className:"text-gray-900",children:Y},ee))})]}),m.notes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:":"}),e.jsx("p",{className:"text-gray-900 bg-gray-50 p-4 rounded-lg",children:m.notes})]})]})]})})]})})},UW=({projectId:s,onClose:t})=>{const[r,a]=w.useState([]),[n,i]=w.useState([]),[o,c]=w.useState(null),[u,h]=w.useState(!0),[m,f]=w.useState(""),[p,j]=w.useState("all"),[g,v]=w.useState("date"),[y,N]=w.useState("grid"),[S,k]=w.useState(!1),[_,T]=w.useState(!1),[E,z]=w.useState(null),[M,C]=w.useState(!1),[A,Z]=w.useState({file:null,description:"",tags:[]}),[I,V]=w.useState(""),[R,q]=w.useState("");w.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),w.useEffect(()=>{J(),se()},[s]);const J=async()=>{h(!0);try{const Q=await fetch(`http://147.45.215.199:8001/api/projects/${s}/documents`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(Q.ok){const W=await Q.json();a(W)}else a([{id:1,name:" .pdf",type:"pdf",size:2456789,uploadedBy:" ",uploadedAt:"2024-03-01T10:00:00",modifiedAt:"2024-03-02T15:30:00",folderId:1,url:"/documents/tz.pdf",favorite:!0,tags:["",""],description:"    ",version:2,sharedWith:[" "," "]},{id:2,name:" .fig",type:"other",size:15678900,uploadedBy:" ",uploadedAt:"2024-03-05T14:20:00",modifiedAt:"2024-03-10T11:45:00",folderId:2,url:"/documents/design.fig",favorite:!1,tags:["",""],description:"   ",version:5,sharedWith:[" "]},{id:3,name:".png",type:"img",size:567890,uploadedBy:" ",uploadedAt:"2024-02-28T09:15:00",modifiedAt:"2024-02-28T09:15:00",folderId:2,url:"/documents/logo.png",favorite:!0,tags:["",""],description:"  ",version:1,sharedWith:[]},{id:4,name:"API .docx",type:"doc",size:1234567,uploadedBy:" ",uploadedAt:"2024-03-08T16:00:00",modifiedAt:"2024-03-12T10:20:00",folderId:3,url:"/documents/api-docs.docx",favorite:!1,tags:["API",""],description:"   API endpoints",version:3,sharedWith:[" "," "]},{id:5,name:"  Q1.xlsx",type:"xls",size:890123,uploadedBy:" ",uploadedAt:"2024-03-15T11:30:00",modifiedAt:"2024-03-15T11:30:00",folderId:4,url:"/documents/finance-q1.xlsx",favorite:!1,tags:["",""],description:"    ",version:1,sharedWith:[]},{id:6,name:"  .pptx",type:"ppt",size:3456789,uploadedBy:" ",uploadedAt:"2024-03-10T13:45:00",modifiedAt:"2024-03-10T13:45:00",folderId:null,url:"/documents/presentation.pptx",favorite:!0,tags:["",""],description:"   ",version:1,sharedWith:[" "]},{id:7,name:" .mp4",type:"video",size:45678900,uploadedBy:" ",uploadedAt:"2024-03-12T17:00:00",modifiedAt:"2024-03-12T17:00:00",folderId:5,url:"/documents/demo.mp4",favorite:!1,tags:["",""],description:"  ",version:1,sharedWith:[]},{id:8,name:".zip",type:"archive",size:123456789,uploadedBy:" ",uploadedAt:"2024-03-14T12:00:00",modifiedAt:"2024-03-14T12:00:00",folderId:null,url:"/documents/sources.zip",favorite:!1,tags:["",""],description:"    ",version:1,sharedWith:[" "]}])}catch(Q){console.error("Error fetching documents:",Q)}finally{h(!1)}},se=async()=>{try{const Q=await fetch(`http://147.45.215.199:8001/api/projects/${s}/folders`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(Q.ok){const W=await Q.json();i(W)}else i([{id:1,name:"",parentId:null,createdAt:"2024-02-01",documentsCount:1},{id:2,name:"",parentId:null,createdAt:"2024-02-01",documentsCount:2},{id:3,name:"",parentId:null,createdAt:"2024-02-01",documentsCount:1},{id:4,name:"",parentId:null,createdAt:"2024-02-01",documentsCount:1},{id:5,name:"",parentId:null,createdAt:"2024-02-01",documentsCount:1}])}catch(Q){console.error("Error fetching folders:",Q)}},Y=async()=>{if(!A.file){alert(" ");return}const Q=new FormData;Q.append("file",A.file),Q.append("description",A.description),Q.append("tags",JSON.stringify(A.tags)),Q.append("folderId",String(o||""));try{const W=await fetch(`http://147.45.215.199:8001/api/projects/${s}/documents`,{method:"POST",headers:{Authorization:"Basic "+btoa("admin:qwerty123")},body:Q});if(W.ok){const H=await W.json();a([H,...r])}else{const H={id:Date.now(),name:A.file.name,type:le(A.file.name),size:A.file.size,uploadedBy:" ",uploadedAt:new Date().toISOString(),modifiedAt:new Date().toISOString(),folderId:o,url:URL.createObjectURL(A.file),favorite:!1,tags:A.tags,description:A.description,version:1,sharedWith:[]};a([H,...r])}k(!1),Z({file:null,description:"",tags:[]})}catch(W){console.error("Error uploading document:",W)}},ee=async()=>{if(!R){alert("  ");return}const Q={name:R,parentId:o,createdAt:new Date().toISOString(),documentsCount:0};try{const W=await fetch(`http://147.45.215.199:8001/api/projects/${s}/folders`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(Q)});if(W.ok){const H=await W.json();i([...n,H])}else i([...n,{...Q,id:Date.now()}]);T(!1),q("")}catch(W){console.error("Error creating folder:",W)}},te=async Q=>{if(confirm(" ?"))try{await fetch(`http://147.45.215.199:8001/api/projects/${s}/documents/${Q}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}}),a(r.filter(W=>W.id!==Q))}catch(W){console.error("Error deleting document:",W)}},K=async Q=>{const W={...Q,favorite:!Q.favorite};try{await fetch(`http://147.45.215.199:8001/api/projects/${s}/documents/${Q.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(W)}),a(r.map(H=>H.id===Q.id?W:H))}catch(H){console.error("Error toggling favorite:",H)}},$=Q=>({pdf:Ie,doc:Ie,xls:Ie,ppt:Ie,img:YP,video:Sf,archive:D4,other:Tr})[Q]||Tr,le=Q=>{const W=Q.split(".").pop()?.toLowerCase();return W==="pdf"?"pdf":["doc","docx"].includes(W||"")?"doc":["xls","xlsx"].includes(W||"")?"xls":["ppt","pptx"].includes(W||"")?"ppt":["jpg","jpeg","png","gif","svg"].includes(W||"")?"img":["mp4","avi","mov","wmv"].includes(W||"")?"video":["zip","rar","7z","tar","gz"].includes(W||"")?"archive":"other"},ie=Q=>Q<1024?Q+" B":Q<1024*1024?(Q/1024).toFixed(1)+" KB":Q<1024*1024*1024?(Q/(1024*1024)).toFixed(1)+" MB":(Q/(1024*1024*1024)).toFixed(1)+" GB",oe=()=>{const Q=[];let W=n.find(H=>H.id===o);for(;W;)Q.unshift(W),W=n.find(H=>H.id===W.parentId);return Q};let de=r.filter(Q=>{const W=Q.folderId===o,H=Q.name.toLowerCase().includes(m.toLowerCase())||Q.description.toLowerCase().includes(m.toLowerCase())||Q.tags.some(G=>G.toLowerCase().includes(m.toLowerCase())),re=p==="all"||Q.type===p,he=!M||Q.favorite;return W&&H&&re&&he});de=de.sort((Q,W)=>g==="name"?Q.name.localeCompare(W.name):g==="date"?new Date(W.uploadedAt).getTime()-new Date(Q.uploadedAt).getTime():g==="size"?W.size-Q.size:0);const U=n.filter(Q=>Q.parentId===o),F={totalDocuments:r.length,totalSize:r.reduce((Q,W)=>Q+W.size,0),favorites:r.filter(Q=>Q.favorite).length,foldersCount:n.length};return u?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:" ..."})]})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-600 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(oy,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:" "}),e.jsxs("p",{className:"text-emerald-100 text-sm",children:[" #",s]})]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors","aria-label":"",children:e.jsx(Ae,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 p-6 bg-gray-50 border-b",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Tr,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:F.totalDocuments})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(oy,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:F.foldersCount})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Ps,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:F.favorites})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(D4,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:ie(F.totalSize)})]})]}),e.jsx("div",{className:"px-6 py-3 bg-white border-b",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("button",{onClick:()=>c(null),className:"text-emerald-600 hover:text-emerald-700 font-medium",children:""}),oe().map(Q=>e.jsxs(hl.Fragment,{children:[e.jsx(jn,{className:"w-4 h-4 text-gray-400"}),e.jsx("button",{onClick:()=>c(Q.id),className:"text-emerald-600 hover:text-emerald-700 font-medium",children:Q.name})]},Q.id))]})}),e.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 p-6 bg-white border-b",children:[e.jsxs("div",{className:"flex flex-wrap gap-3 flex-1",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(Fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:" ...",value:m,onChange:Q=>f(Q.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]})}),e.jsxs("select",{value:p,onChange:Q=>j(Q.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),e.jsx("option",{value:"pdf",children:"PDF"}),e.jsx("option",{value:"doc",children:""}),e.jsx("option",{value:"xls",children:""}),e.jsx("option",{value:"ppt",children:""}),e.jsx("option",{value:"img",children:""}),e.jsx("option",{value:"video",children:""}),e.jsx("option",{value:"archive",children:""})]}),e.jsxs("select",{value:g,onChange:Q=>v(Q.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",children:[e.jsx("option",{value:"date",children:" "}),e.jsx("option",{value:"name",children:" "}),e.jsx("option",{value:"size",children:" "})]}),e.jsx("button",{onClick:()=>C(!M),className:`px-4 py-2 rounded-lg border transition-colors ${M?"bg-yellow-100 border-yellow-300 text-yellow-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:e.jsx(Ps,{className:`w-5 h-5 ${M?"fill-current":""}`})}),e.jsxs("div",{className:"flex gap-1 bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>N("grid"),className:`p-2 rounded transition-colors ${y==="grid"?"bg-white shadow-sm":"hover:bg-gray-200"}`,children:e.jsx(cE,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>N("list"),className:`p-2 rounded transition-colors ${y==="list"?"bg-white shadow-sm":"hover:bg-gray-200"}`,children:e.jsx(Am,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>T(!0),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center gap-2",children:[e.jsx(Gj,{className:"w-5 h-5"})," "]}),e.jsxs("button",{onClick:()=>k(!0),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors flex items-center gap-2",children:[e.jsx(fn,{className:"w-5 h-5"}),""]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[U.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:""}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:U.map(Q=>e.jsxs("button",{onClick:()=>c(Q.id),className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow text-left",children:[e.jsx(Gj,{className:"w-12 h-12 text-yellow-500 mb-2"}),e.jsx("p",{className:"font-medium text-gray-900 truncate",children:Q.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[Q.documentsCount," "]})]},Q.id))})]}),y==="grid"?e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:""}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:de.map(Q=>{const W=$(Q.type);return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow relative group",children:[e.jsx("button",{onClick:()=>K(Q),className:"absolute top-2 right-2 p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Ps,{className:`w-5 h-5 ${Q.favorite?"fill-yellow-400 text-yellow-400":"text-gray-400"}`})}),e.jsx(W,{className:"w-12 h-12 text-emerald-600 mb-2"}),e.jsx("p",{className:"font-medium text-gray-900 truncate mb-1",children:Q.name}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:ie(Q.size)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>z(Q),className:"flex-1 px-2 py-1 text-xs bg-emerald-100 text-emerald-700 rounded hover:bg-emerald-200 transition-colors",children:""}),e.jsx("button",{onClick:()=>te(Q.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",children:e.jsx(Xe,{className:"w-4 h-4"})})]})]},Q.id)})})]}):e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:""}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:de.map(Q=>{const W=$(Q.type);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(W,{className:"w-8 h-8 text-emerald-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:Q.name}),Q.tags.length>0&&e.jsx("div",{className:"flex gap-1 mt-1",children:Q.tags.slice(0,2).map((H,re)=>e.jsx("span",{className:"text-xs px-2 py-0.5 bg-gray-100 text-gray-600 rounded",children:H},re))})]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:ie(Q.size)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:Q.uploadedBy}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(Q.uploadedAt).toLocaleDateString("ru-RU")}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>K(Q),className:"p-1 text-gray-400 hover:text-yellow-500 transition-colors",children:e.jsx(Ps,{className:`w-5 h-5 ${Q.favorite?"fill-current text-yellow-500":""}`})}),e.jsx("button",{onClick:()=>z(Q),className:"p-1 text-gray-400 hover:text-emerald-600 transition-colors",children:e.jsx(Ft,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>te(Q.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",children:e.jsx(Xe,{className:"w-5 h-5"})})]})})]},Q.id)})})]})})]}),de.length===0&&U.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(oy,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:" "})]})]}),S&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:" "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"file",onChange:Q=>Z({...A,file:Q.target.files?.[0]||null}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:A.description,onChange:Q=>Z({...A,description:Q.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:" "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("div",{className:"flex gap-2 mb-2",children:e.jsx("input",{type:"text",value:I,onChange:Q=>V(Q.target.value),onKeyPress:Q=>{Q.key==="Enter"&&I&&(Z({...A,tags:[...A.tags,I]}),V(""))},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"  (Enter)"})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:A.tags.map((Q,W)=>e.jsxs("span",{className:"inline-flex items-center gap-1 text-sm px-3 py-1 bg-emerald-100 text-emerald-700 rounded-full",children:[Q,e.jsx("button",{onClick:()=>Z({...A,tags:A.tags.filter((H,re)=>re!==W)}),className:"hover:text-emerald-900",children:e.jsx(Ae,{className:"w-3 h-3"})})]},W))})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:""}),e.jsx("button",{onClick:Y,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:""})]})]})}),_&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:" "}),e.jsx("input",{type:"text",value:R,onChange:Q=>q(Q.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent mb-4",placeholder:" "}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>T(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:""}),e.jsx("button",{onClick:ee,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:""})]})]})}),E&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[hl.createElement($(E.type),{className:"w-12 h-12 text-emerald-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:E.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[" ",E.version]})]})]}),e.jsx("button",{onClick:()=>z(null),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Ae,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:":"}),e.jsx("p",{className:"text-gray-900",children:E.description||" "})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:":"}),e.jsx("p",{className:"text-gray-900",children:ie(E.size)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:":"}),e.jsx("p",{className:"text-gray-900",children:E.uploadedBy})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:":"}),e.jsx("p",{className:"text-gray-900",children:new Date(E.uploadedAt).toLocaleString("ru-RU")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:":"}),e.jsx("p",{className:"text-gray-900",children:new Date(E.modifiedAt).toLocaleString("ru-RU")})]})]}),E.tags.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:":"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:E.tags.map((Q,W)=>e.jsx("span",{className:"text-sm px-3 py-1 bg-emerald-100 text-emerald-700 rounded-full",children:Q},W))})]}),E.sharedWith.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:":"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:E.sharedWith.map((Q,W)=>e.jsx("span",{className:"text-sm px-3 py-1 bg-gray-100 text-gray-700 rounded-full",children:Q},W))})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsxs("a",{href:E.url,download:E.name,className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors text-center flex items-center justify-center gap-2",children:[e.jsx(wt,{className:"w-5 h-5"}),""]}),e.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(mN,{className:"w-5 h-5"}),""]})]})]})]})})]})})},VW=({projectId:s,onClose:t})=>{const[r,a]=w.useState({enabled:!1,url:`https://portal.example.com/projects/${s}`,accessPassword:null,allowComments:!0,allowFileDownload:!0,allowTaskView:!0,allowTimelineView:!0,allowBudgetView:!1,showTeamMembers:!0,emailNotifications:!0,customBranding:{enabled:!1,logo:"",primaryColor:"#3B82F6",companyName:" "},accessLog:!0,expiresAt:null}),[n,i]=w.useState([]),[o,c]=w.useState([]),[u,h]=w.useState(!0),[m,f]=w.useState(!1),[p,j]=w.useState(!1),[g,v]=w.useState("settings"),[y,N]=w.useState("");w.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),w.useEffect(()=>{S()},[s]);const S=async()=>{h(!0);try{const I=await fetch(`http://147.45.215.199:8001/api/projects/${s}/portal`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(I.ok){const V=await I.json();a(V.settings),i(V.accessList||[]),c(V.activityLog||[])}else a({...r,enabled:!0,accessPassword:"client2024"}),i([{id:1,clientName:" ",clientEmail:"ivan.petrov@client.com",accessGranted:"2024-03-01T10:00:00",lastAccess:"2024-03-15T14:30:00",accessCount:24,ipAddress:"192.168.1.100"},{id:2,clientName:" ",clientEmail:"olga.sidorova@client.com",accessGranted:"2024-03-05T11:20:00",lastAccess:"2024-03-14T16:45:00",accessCount:12,ipAddress:"192.168.1.101"},{id:3,clientName:" ",clientEmail:"alex.kozlov@client.com",accessGranted:"2024-03-10T09:15:00",lastAccess:null,accessCount:0,ipAddress:"-"}]),c([{id:1,clientName:" ",action:" ",timestamp:"2024-03-15T14:30:00",details:"   "},{id:2,clientName:" ",action:" ",timestamp:"2024-03-15T14:35:00",details:" :  .pdf"},{id:3,clientName:" ",action:" ",timestamp:"2024-03-14T16:45:00",details:'   "  "'},{id:4,clientName:" ",action:" ",timestamp:"2024-03-15T14:32:00",details:"  "},{id:5,clientName:" ",action:" ",timestamp:"2024-03-14T16:40:00",details:"  "}])}catch(I){console.error("Error fetching portal data:",I)}finally{h(!1)}},k=async()=>{try{(await fetch(`http://147.45.215.199:8001/api/projects/${s}/portal/settings`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(r)})).ok&&alert(" ")}catch(I){console.error("Error saving settings:",I),alert("  ()")}},_=async()=>{const I={...r,enabled:!r.enabled};a(I);try{await fetch(`http://147.45.215.199:8001/api/projects/${s}/portal/toggle`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({enabled:I.enabled})})}catch(V){console.error("Error toggling portal:",V)}},T=()=>{const I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let V="";for(let R=0;R<12;R++)V+=I.charAt(Math.floor(Math.random()*I.length));N(V),a({...r,accessPassword:V})},E=()=>{a({...r,accessPassword:null}),N("")},z=()=>{navigator.clipboard.writeText(r.url),f(!0),setTimeout(()=>f(!1),2e3)},M=()=>{const I=`URL: ${r.url}
${r.accessPassword?`: ${r.accessPassword}`:"  "}`;navigator.clipboard.writeText(I),f(!0),setTimeout(()=>f(!1),2e3)},C=async I=>{if(confirm(" ?"))try{await fetch(`http://147.45.215.199:8001/api/projects/${s}/portal/access/${I}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}}),i(n.filter(V=>V.id!==I))}catch(V){console.error("Error revoking access:",V)}},Z=(()=>{const I=n.length,V=n.filter(se=>se.lastAccess!==null).length,R=n.reduce((se,Y)=>se+Y.accessCount,0),q=I>0?R/I:0,J=o.filter(se=>{const Y=new Date(se.timestamp),ee=new Date(Date.now()-1440*60*1e3);return Y>=ee}).length;return{totalAccess:I,activeUsers:V,totalViews:R,avgViewsPerUser:q,recentActivity:J}})();return u?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:" ..."})]})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-violet-600 to-purple-600 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(em,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:" "}),e.jsxs("p",{className:"text-violet-100 text-sm",children:[" #",s]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-violet-100",children:" :"}),e.jsx("button",{onClick:_,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${r.enabled?"bg-green-500":"bg-gray-400"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r.enabled?"translate-x-6":"translate-x-1"}`})}),e.jsx("span",{className:`text-sm font-medium ${r.enabled?"text-green-100":"text-gray-200"}`,children:r.enabled?"":""})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors","aria-label":"",children:e.jsx(Ae,{className:"w-6 h-6"})})]})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-4 p-6 bg-gray-50 border-b",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(tt,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:Z.totalAccess})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(ct,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:Z.activeUsers})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Ft,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Z.totalViews})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(ct,{className:"w-4 h-4"}),e.jsx("span",{children:". "})]}),e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:Z.avgViewsPerUser.toFixed(1)})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Zr,{className:"w-4 h-4"}),e.jsx("span",{children:" 24 "})]}),e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:Z.recentActivity})]})]}),r.enabled&&e.jsx("div",{className:"p-6 bg-violet-50 border-b",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"  :"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1 flex items-center gap-2 bg-white border border-gray-300 rounded-lg px-4 py-3",children:[e.jsx(vl,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{className:"font-mono text-sm text-gray-900",children:r.url})]}),e.jsxs("button",{onClick:z,className:"px-4 py-3 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors flex items-center gap-2",children:[m?e.jsx(ss,{className:"w-5 h-5"}):e.jsx(Ks,{className:"w-5 h-5"}),m?"":""]}),e.jsxs("button",{onClick:M,className:"px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(gi,{className:"w-5 h-5"}),""]})]}),r.accessPassword&&e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[" : ",e.jsx("span",{className:"font-mono font-medium",children:p?r.accessPassword:""}),e.jsx("button",{onClick:()=>j(!p),className:"ml-2 text-violet-600 hover:text-violet-700",children:p?e.jsx($o,{className:"w-4 h-4 inline"}):e.jsx(Ft,{className:"w-4 h-4 inline"})})]})]})})}),e.jsxs("div",{className:"flex gap-1 p-4 bg-white border-b",children:[e.jsxs("button",{onClick:()=>v("settings"),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${g==="settings"?"bg-violet-100 text-violet-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(Na,{className:"w-5 h-5"}),""]}),e.jsxs("button",{onClick:()=>v("access"),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${g==="access"?"bg-violet-100 text-violet-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(tt,{className:"w-5 h-5"})," (",n.length,")"]}),e.jsxs("button",{onClick:()=>v("activity"),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${g==="activity"?"bg-violet-100 text-violet-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(ct,{className:"w-5 h-5"}),""]}),e.jsxs("button",{onClick:()=>v("preview"),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${g==="preview"?"bg-violet-100 text-violet-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(Ft,{className:"w-5 h-5"}),""]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[g==="settings"&&e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Er,{className:"w-5 h-5"}),""]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.accessPassword!==null,onChange:I=>{I.target.checked?T():E()},className:"w-5 h-5 rounded border-gray-300 text-violet-600 focus:ring-violet-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:" "}),e.jsx("p",{className:"text-sm text-gray-500",children:"     "})]})]})}),r.accessPassword&&e.jsx("div",{className:"ml-8 space-y-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:p?"text":"password",value:r.accessPassword,onChange:I=>a({...r,accessPassword:I.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent"}),e.jsx("button",{onClick:()=>j(!p),className:"p-2 text-gray-400 hover:text-gray-600",children:p?e.jsx($o,{className:"w-5 h-5"}):e.jsx(Ft,{className:"w-5 h-5"})}),e.jsxs("button",{onClick:T,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2",children:[e.jsx(rs,{className:"w-4 h-4"}),""]})]})}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.accessLog,onChange:I=>a({...r,accessLog:I.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-violet-600 focus:ring-violet-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:" "}),e.jsx("p",{className:"text-sm text-gray-500",children:"     "})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),e.jsx("input",{type:"datetime-local",value:r.expiresAt||"",onChange:I=>a({...r,expiresAt:I.target.value||null}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"    "})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Uf,{className:"w-5 h-5"}),""]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.allowComments,onChange:I=>a({...r,allowComments:I.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-violet-600 focus:ring-violet-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:" "}),e.jsx("p",{className:"text-sm text-gray-500",children:"     "})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.allowFileDownload,onChange:I=>a({...r,allowFileDownload:I.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-violet-600 focus:ring-violet-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:"  "}),e.jsx("p",{className:"text-sm text-gray-500",children:"    "})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.allowTaskView,onChange:I=>a({...r,allowTaskView:I.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-violet-600 focus:ring-violet-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:" "}),e.jsx("p",{className:"text-sm text-gray-500",children:"   "})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.allowTimelineView,onChange:I=>a({...r,allowTimelineView:I.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-violet-600 focus:ring-violet-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:" "}),e.jsx("p",{className:"text-sm text-gray-500",children:"   "})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.allowBudgetView,onChange:I=>a({...r,allowBudgetView:I.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-violet-600 focus:ring-violet-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:" "}),e.jsx("p",{className:"text-sm text-gray-500",children:"    "})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.showTeamMembers,onChange:I=>a({...r,showTeamMembers:I.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-violet-600 focus:ring-violet-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:" "}),e.jsx("p",{className:"text-sm text-gray-500",children:"    "})]})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Zr,{className:"w-5 h-5"}),""]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.emailNotifications,onChange:I=>a({...r,emailNotifications:I.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-violet-600 focus:ring-violet-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Email "}),e.jsx("p",{className:"text-sm text-gray-500",children:"    "})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.customBranding.enabled,onChange:I=>a({...r,customBranding:{...r.customBranding,enabled:I.target.checked}}),className:"w-5 h-5 rounded border-gray-300 text-violet-600 focus:ring-violet-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:"  "}),e.jsx("p",{className:"text-sm text-gray-500",children:"     "})]})]}),r.customBranding.enabled&&e.jsxs("div",{className:"ml-8 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"text",value:r.customBranding.companyName,onChange:I=>a({...r,customBranding:{...r.customBranding,companyName:I.target.value}}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"color",value:r.customBranding.primaryColor,onChange:I=>a({...r,customBranding:{...r.customBranding,primaryColor:I.target.value}}),className:"w-16 h-10 rounded border border-gray-300 cursor-pointer"}),e.jsx("span",{className:"font-mono text-sm text-gray-600",children:r.customBranding.primaryColor})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL "}),e.jsx("input",{type:"text",value:r.customBranding.logo,onChange:I=>a({...r,customBranding:{...r.customBranding,logo:I.target.value}}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent",placeholder:"https://example.com/logo.png"})]})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:k,className:"px-6 py-3 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors font-medium",children:" "})})]}),g==="access"&&e.jsx("div",{children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:" "}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:" "}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"IP "}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:n.map(I=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-violet-400 to-purple-400 flex items-center justify-center text-white font-bold text-sm",children:I.clientName.charAt(0)}),e.jsx("span",{className:"font-medium text-gray-900",children:I.clientName})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:I.clientEmail}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(I.accessGranted).toLocaleDateString("ru-RU")}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:I.lastAccess?e.jsxs("div",{children:[e.jsx("div",{children:new Date(I.lastAccess).toLocaleDateString("ru-RU")}),e.jsx("div",{className:"text-xs text-gray-400",children:new Date(I.lastAccess).toLocaleTimeString("ru-RU")})]}):e.jsx("span",{className:"text-gray-400",children:" "})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:"font-medium text-gray-900",children:I.accessCount})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 font-mono",children:I.ipAddress}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("button",{onClick:()=>C(I.id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:""})})]},I.id))})]}),n.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(tt,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"   "})]})]})}),g==="activity"&&e.jsx("div",{children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"divide-y divide-gray-200",children:o.map(I=>e.jsx("div",{className:"p-6 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-violet-400 to-purple-400 flex items-center justify-center text-white font-bold",children:I.clientName.charAt(0)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-1",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:I.clientName}),e.jsx("p",{className:"text-sm text-gray-600",children:I.action})]}),e.jsx("span",{className:"text-sm text-gray-500",children:new Date(I.timestamp).toLocaleString("ru-RU")})]}),e.jsx("p",{className:"text-sm text-gray-500",children:I.details})]})]})},I.id))}),o.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(ct,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:" "})]})]})}),g==="preview"&&e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ft,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:" "}),e.jsx("p",{className:"text-gray-600 mb-6",children:"     "}),e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"border-4 rounded-lg p-8",style:{borderColor:r.customBranding.enabled?r.customBranding.primaryColor:"#8B5CF6"},children:[e.jsxs("div",{className:"text-center mb-8",children:[r.customBranding.enabled&&r.customBranding.logo?e.jsx("img",{src:r.customBranding.logo,alt:"Logo",className:"h-16 mx-auto mb-4",onError:I=>{I.currentTarget.style.display="none"}}):e.jsx(em,{className:"w-16 h-16 mx-auto mb-4 text-violet-600"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:r.customBranding.enabled?r.customBranding.companyName:" "}),e.jsxs("p",{className:"text-gray-600 mt-2",children:[" #",s]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[r.allowTaskView&&e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 text-center",children:[e.jsx(Ie,{className:"w-8 h-8 mx-auto mb-2 text-gray-600"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:""})]}),r.allowTimelineView&&e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 text-center",children:[e.jsx(pt,{className:"w-8 h-8 mx-auto mb-2 text-gray-600"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:""})]}),r.allowFileDownload&&e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 text-center",children:[e.jsx(wt,{className:"w-8 h-8 mx-auto mb-2 text-gray-600"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:""})]}),r.allowComments&&e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 text-center",children:[e.jsx(Es,{className:"w-8 h-8 mx-auto mb-2 text-gray-600"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:""})]})]}),e.jsx("div",{className:"text-center text-sm text-gray-500",children:r.accessPassword?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Uf,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]}):e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(MB,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]})})]})})]})})]})]})})},HW=({projectId:s,onClose:t})=>{const[r,a]=w.useState([]),[n,i]=w.useState([]),[o,c]=w.useState([]),[u,h]=w.useState(!0),[m,f]=w.useState("tests"),[p,j]=w.useState(""),[g,v]=w.useState("all"),[y,N]=w.useState("all"),[S,k]=w.useState(!1),[_,T]=w.useState(!1),[E,z]=w.useState(null),[M,C]=w.useState(null),[A,Z]=w.useState({title:"",description:"",type:"manual",priority:"medium",assignedTo:"",steps:[],expectedResult:""}),[I,V]=w.useState({title:"",description:"",severity:"minor",priority:"medium",assignedTo:"",environment:"production",stepsToReproduce:[],tags:[]}),[R,q]=w.useState(""),[J,se]=w.useState("");w.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),w.useEffect(()=>{Y()},[s]);const Y=async()=>{h(!0);try{const W=await fetch(`http://147.45.215.199:8001/api/projects/${s}/qa`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(W.ok){const H=await W.json();a(H.testCases||[]),i(H.bugs||[]),c(H.testRuns||[])}else a([{id:1,title:"  ",description:"    ",type:"e2e",status:"passed",priority:"critical",assignedTo:" ",lastRun:"2024-03-15T14:30:00",duration:12,steps:["  "," email"," ",' ""'],expectedResult:"      ",actualResult:"",createdAt:"2024-02-01"},{id:2,title:"   ",description:"     ",type:"integration",status:"failed",priority:"high",assignedTo:" ",lastRun:"2024-03-15T15:00:00",duration:8,steps:["  ","  ",' ""'],expectedResult:"   ",actualResult:"Email    ",createdAt:"2024-02-05"},{id:3,title:"  ",description:"    ",type:"manual",status:"pending",priority:"medium",assignedTo:" ",lastRun:null,duration:0,steps:["   ",' " "'," ",""],expectedResult:"     ",actualResult:"",createdAt:"2024-03-01"},{id:4,title:" ",description:"   ",type:"integration",status:"passed",priority:"high",assignedTo:" ",lastRun:"2024-03-14T10:20:00",duration:15,steps:["  "," ",' ""'],expectedResult:"  ",actualResult:"",createdAt:"2024-02-10"},{id:5,title:"  ",description:"    ",type:"smoke",status:"skipped",priority:"low",assignedTo:" ",lastRun:"2024-03-10T09:00:00",duration:5,steps:["  ","  "],expectedResult:"  2 ",actualResult:"",createdAt:"2024-02-20"}]),i([{id:1,title:' ""    ',description:'    ""       ',severity:"critical",status:"in-progress",priority:"critical",assignedTo:" ",reportedBy:" ",reportedAt:"2024-03-15T16:00:00",resolvedAt:null,environment:"production",stepsToReproduce:[" ",' ""'," ",' ""'],attachments:["screenshot1.png"],tags:["ui","","critical"],linkedTestCase:3},{id:2,title:"    ",description:"       ",severity:"minor",status:"open",priority:"low",assignedTo:" ",reportedBy:" ",reportedAt:"2024-03-14T11:30:00",resolvedAt:null,environment:"staging",stepsToReproduce:["   ","  "],attachments:[],tags:["mobile","ui",""]},{id:3,title:" 500    ",description:"   500       10MB",severity:"major",status:"resolved",priority:"high",assignedTo:" ",reportedBy:" ",reportedAt:"2024-03-10T14:00:00",resolvedAt:"2024-03-13T17:30:00",environment:"production",stepsToReproduce:["   > 10MB"],attachments:["error_log.txt"],tags:["backend","",""]},{id:4,title:"   ",description:"      ",severity:"major",status:"open",priority:"medium",assignedTo:" ",reportedBy:" ",reportedAt:"2024-03-12T09:00:00",resolvedAt:null,environment:"development",stepsToReproduce:[" ","  "," ","  "],attachments:["memory_profile.png"],tags:["performance","memory",""]}]),c([{id:1,name:"  v2.1",startedAt:"2024-03-15T14:00:00",completedAt:"2024-03-15T15:30:00",status:"completed",totalTests:45,passed:42,failed:2,skipped:1,duration:5400},{id:2,name:"Smoke test  ",startedAt:"2024-03-14T10:00:00",completedAt:"2024-03-14T10:15:00",status:"completed",totalTests:12,passed:12,failed:0,skipped:0,duration:900},{id:3,name:"  API",startedAt:"2024-03-13T16:00:00",completedAt:null,status:"running",totalTests:28,passed:15,failed:0,skipped:0,duration:0}])}catch(W){console.error("Error fetching QA data:",W)}finally{h(!1)}},ee=async()=>{if(!A.title){alert("  ");return}const W={...A,id:Date.now(),status:"pending",lastRun:null,duration:0,actualResult:"",createdAt:new Date().toISOString()};try{const H=await fetch(`http://147.45.215.199:8001/api/projects/${s}/qa/tests`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(W)});if(H.ok){const re=await H.json();a([...r,re])}else a([...r,W]);k(!1),Z({title:"",description:"",type:"manual",priority:"medium",assignedTo:"",steps:[],expectedResult:""})}catch(H){console.error("Error adding test:",H)}},te=async()=>{if(!I.title){alert("  ");return}const W={...I,id:Date.now(),status:"open",reportedBy:" ",reportedAt:new Date().toISOString(),resolvedAt:null,attachments:[]};try{const H=await fetch(`http://147.45.215.199:8001/api/projects/${s}/qa/bugs`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify(W)});if(H.ok){const re=await H.json();i([...n,re])}else i([...n,W]);T(!1),V({title:"",description:"",severity:"minor",priority:"medium",assignedTo:"",environment:"production",stepsToReproduce:[],tags:[]})}catch(H){console.error("Error adding bug:",H)}},K=async W=>{if(confirm(" -?"))try{await fetch(`http://147.45.215.199:8001/api/projects/${s}/qa/tests/${W}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}}),a(r.filter(H=>H.id!==W))}catch(H){console.error("Error deleting test:",H)}},$=async W=>{if(confirm(" ?"))try{await fetch(`http://147.45.215.199:8001/api/projects/${s}/qa/bugs/${W}`,{method:"DELETE",headers:{Authorization:"Basic "+btoa("admin:qwerty123")}}),i(n.filter(H=>H.id!==W))}catch(H){console.error("Error deleting bug:",H)}},le=W=>{const H={pending:{label:"",color:"bg-gray-100 text-gray-800",icon:Ue},passed:{label:"",color:"bg-green-100 text-green-800",icon:it},failed:{label:"",color:"bg-red-100 text-red-800",icon:kl},skipped:{label:"",color:"bg-yellow-100 text-yellow-800",icon:qe}};return H[W]||H.pending},ie=W=>{const H={open:{label:"",color:"bg-red-100 text-red-800"},"in-progress":{label:" ",color:"bg-blue-100 text-blue-800"},resolved:{label:"",color:"bg-green-100 text-green-800"},closed:{label:"",color:"bg-gray-100 text-gray-800"},reopened:{label:"",color:"bg-orange-100 text-orange-800"}};return H[W]||H.open},oe=W=>{const H={trivial:{label:"",color:"bg-gray-100 text-gray-700"},minor:{label:"",color:"bg-blue-100 text-blue-700"},major:{label:"",color:"bg-orange-100 text-orange-700"},critical:{label:"",color:"bg-red-100 text-red-700"},blocker:{label:"",color:"bg-purple-100 text-purple-700"}};return H[W]||H.minor},U=(()=>{const W=r.length,H=r.filter(me=>me.status==="passed").length,re=r.filter(me=>me.status==="failed").length,he=r.filter(me=>me.status==="pending").length,G=n.length,ce=n.filter(me=>me.status==="open"||me.status==="reopened").length,X=n.filter(me=>me.status==="in-progress").length,O=n.filter(me=>me.status==="resolved"||me.status==="closed").length,L=n.filter(me=>me.severity==="critical"||me.severity==="blocker").length,B=W>0?H/W*100:0,ne=G>0?O/G*100:0;return{totalTests:W,passedTests:H,failedTests:re,pendingTests:he,totalBugs:G,openBugs:ce,inProgressBugs:X,resolvedBugs:O,criticalBugs:L,passRate:B,bugResolutionRate:ne}})(),F=r.filter(W=>{const H=W.title.toLowerCase().includes(p.toLowerCase())||W.description.toLowerCase().includes(p.toLowerCase()),re=g==="all"||W.status===g,he=y==="all"||W.priority===y;return H&&re&&he}),Q=n.filter(W=>{const H=W.title.toLowerCase().includes(p.toLowerCase())||W.description.toLowerCase().includes(p.toLowerCase())||W.tags.some(G=>G.toLowerCase().includes(p.toLowerCase())),re=g==="all"||W.status===g,he=y==="all"||W.priority===y;return H&&re&&he});return u?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"  QA..."})]})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-600 to-pink-600 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(DF,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"  (QA)"}),e.jsxs("p",{className:"text-red-100 text-sm",children:[" #",s]})]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors","aria-label":"",children:e.jsx(Ae,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 p-6 bg-gray-50 border-b",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(cy,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:U.totalTests})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(it,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:U.passedTests})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(kl,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-red-600",children:U.failedTests})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(O0,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:U.totalBugs})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(qe,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:U.criticalBugs})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Ar,{className:"w-4 h-4"}),e.jsx("span",{children:"Pass Rate"})]}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[U.passRate.toFixed(0),"%"]})]})]}),e.jsxs("div",{className:"flex gap-1 p-4 bg-white border-b",children:[e.jsxs("button",{onClick:()=>f("tests"),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${m==="tests"?"bg-red-100 text-red-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(cy,{className:"w-5 h-5"}),"- (",r.length,")"]}),e.jsxs("button",{onClick:()=>f("bugs"),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${m==="bugs"?"bg-red-100 text-red-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(O0,{className:"w-5 h-5"})," (",n.length,")"]}),e.jsxs("button",{onClick:()=>f("runs"),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${m==="runs"?"bg-red-100 text-red-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(ct,{className:"w-5 h-5"}),"  (",o.length,")"]}),e.jsxs("button",{onClick:()=>f("stats"),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${m==="stats"?"bg-red-100 text-red-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(Fr,{className:"w-5 h-5"}),""]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[m==="tests"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(Fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:" ...",value:p,onChange:W=>j(W.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]})}),e.jsxs("select",{value:g,onChange:W=>v(W.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),e.jsx("option",{value:"pending",children:""}),e.jsx("option",{value:"passed",children:""}),e.jsx("option",{value:"failed",children:""}),e.jsx("option",{value:"skipped",children:""})]}),e.jsxs("select",{value:y,onChange:W=>N(W.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"medium",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"critical",children:""})]}),e.jsxs("button",{onClick:()=>k(!0),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[e.jsx(Ve,{className:"w-5 h-5"})," "]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:" "}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:F.map(W=>{const H=le(W.status),re=H.icon;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:W.title}),e.jsx("p",{className:"text-sm text-gray-500 truncate max-w-xs",children:W.description})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 capitalize",children:W.type}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("span",{className:`inline-flex items-center gap-1 text-xs px-2 py-1 rounded-full ${H.color}`,children:[e.jsx(re,{className:"w-3 h-3"}),H.label]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 capitalize",children:W.priority}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:W.assignedTo}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:W.lastRun?new Date(W.lastRun).toLocaleString("ru-RU"):" "}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>z(W),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors","aria-label":"",children:e.jsx(Ie,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>K(W.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors","aria-label":"",children:e.jsx(Xe,{className:"w-5 h-5"})})]})})]},W.id)})})]}),F.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(cy,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:" -"})]})]})]}),m==="bugs"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(Fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:" ...",value:p,onChange:W=>j(W.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]})}),e.jsxs("select",{value:g,onChange:W=>v(W.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),e.jsx("option",{value:"open",children:""}),e.jsx("option",{value:"in-progress",children:" "}),e.jsx("option",{value:"resolved",children:""}),e.jsx("option",{value:"closed",children:""}),e.jsx("option",{value:"reopened",children:""})]}),e.jsxs("button",{onClick:()=>T(!0),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[e.jsx(Ve,{className:"w-5 h-5"})," "]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:Q.map(W=>{const H=ie(W.status),re=oe(W.severity);return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx(O0,{className:"w-8 h-8 text-red-600 flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2",children:W.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:W.description}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${H.color}`,children:H.label}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${re.color}`,children:re.label}),W.tags.map((he,G)=>e.jsx("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-700 rounded-full",children:he},G))]})]})]}),e.jsx("button",{onClick:()=>$(W.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors","aria-label":"",children:e.jsx(Xe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(st,{className:"w-4 h-4"}),e.jsxs("span",{children:[": ",W.assignedTo]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(st,{className:"w-4 h-4"}),e.jsxs("span",{children:[": ",W.reportedBy]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(pt,{className:"w-4 h-4"}),e.jsxs("span",{children:[": ",new Date(W.reportedAt).toLocaleString("ru-RU")]})]}),W.resolvedAt&&e.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[e.jsx(it,{className:"w-4 h-4"}),e.jsxs("span",{children:[": ",new Date(W.resolvedAt).toLocaleString("ru-RU")]})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 mb-2",children:" :"}),e.jsx("ol",{className:"list-decimal list-inside space-y-1",children:W.stepsToReproduce.map((he,G)=>e.jsx("li",{className:"text-sm text-gray-600",children:he},G))})]}),e.jsx("button",{onClick:()=>C(W),className:"w-full mt-4 px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors",children:""})]},W.id)})}),Q.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(O0,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:" "})]})]}),m==="runs"&&e.jsx("div",{className:"space-y-4",children:o.map(W=>{const H=W.status==="running";return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900",children:W.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[": ",new Date(W.startedAt).toLocaleString("ru-RU"),W.completedAt&&`  : ${new Date(W.completedAt).toLocaleString("ru-RU")}`]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${W.status==="completed"?"bg-green-100 text-green-800":W.status==="running"?"bg-blue-100 text-blue-800":W.status==="failed"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:W.status==="completed"?"":W.status==="running"?"":W.status==="failed"?"":""})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:W.totalTests})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:""}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:W.passed})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:""}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:W.failed})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:""}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:W.skipped})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4",children:e.jsxs("div",{className:"flex h-4 rounded-full overflow-hidden",children:[W.passed>0&&e.jsx("div",{className:"bg-green-500",style:{width:`${W.passed/W.totalTests*100}%`}}),W.failed>0&&e.jsx("div",{className:"bg-red-500",style:{width:`${W.failed/W.totalTests*100}%`}}),W.skipped>0&&e.jsx("div",{className:"bg-yellow-500",style:{width:`${W.skipped/W.totalTests*100}%`}})]})}),!H&&W.duration>0&&e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[": ",Math.floor(W.duration/60),"  ",W.duration%60," "]})]},W.id)})}),m==="stats"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:" "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Pass Rate"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[U.passRate.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-green-500 h-3 rounded-full",style:{width:`${U.passRate}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:""}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:U.passedTests})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:""}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:U.failedTests})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:""}),e.jsx("p",{className:"text-2xl font-bold text-gray-600",children:U.pendingTests})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:""}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:U.totalTests})]})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:" "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:" "}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[U.bugResolutionRate.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-blue-500 h-3 rounded-full",style:{width:`${U.bugResolutionRate}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:""}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:U.openBugs})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:U.inProgressBugs})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:""}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:U.resolvedBugs})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:""}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:U.criticalBugs})]})]})]})]})]})})]}),S&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl my-8",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:" -"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:A.title,onChange:W=>Z({...A,title:W.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:A.description,onChange:W=>Z({...A,description:W.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("select",{value:A.type,onChange:W=>Z({...A,type:W.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[e.jsx("option",{value:"unit",children:"Unit"}),e.jsx("option",{value:"integration",children:"Integration"}),e.jsx("option",{value:"e2e",children:"E2E"}),e.jsx("option",{value:"manual",children:"Manual"}),e.jsx("option",{value:"regression",children:"Regression"}),e.jsx("option",{value:"smoke",children:"Smoke"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("select",{value:A.priority,onChange:W=>Z({...A,priority:W.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"medium",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"critical",children:""})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:A.assignedTo,onChange:W=>Z({...A,assignedTo:W.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:R,onChange:W=>q(W.target.value),onKeyPress:W=>{W.key==="Enter"&&R&&(Z({...A,steps:[...A.steps,R]}),q(""))},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"  (Enter)"}),e.jsx("button",{onClick:()=>{R&&(Z({...A,steps:[...A.steps,R]}),q(""))},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:e.jsx(Ve,{className:"w-5 h-5"})})]}),e.jsx("ol",{className:"list-decimal list-inside space-y-1",children:A.steps.map((W,H)=>e.jsxs("li",{className:"text-sm text-gray-700 flex items-center justify-between bg-gray-50 p-2 rounded",children:[e.jsx("span",{children:W}),e.jsx("button",{onClick:()=>Z({...A,steps:A.steps.filter((re,he)=>he!==H)}),className:"text-red-600 hover:text-red-800",children:e.jsx(Ae,{className:"w-4 h-4"})})]},H))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),e.jsx("textarea",{value:A.expectedResult,onChange:W=>Z({...A,expectedResult:W.target.value}),rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:""}),e.jsx("button",{onClick:ee,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:""})]})]})}),_&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl my-8",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:" "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:I.title,onChange:W=>V({...I,title:W.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:I.description,onChange:W=>V({...I,description:W.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("select",{value:I.severity,onChange:W=>V({...I,severity:W.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[e.jsx("option",{value:"trivial",children:""}),e.jsx("option",{value:"minor",children:""}),e.jsx("option",{value:"major",children:""}),e.jsx("option",{value:"critical",children:""}),e.jsx("option",{value:"blocker",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("select",{value:I.priority,onChange:W=>V({...I,priority:W.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"medium",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"critical",children:""})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:I.assignedTo,onChange:W=>V({...I,assignedTo:W.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:I.environment,onChange:W=>V({...I,environment:W.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:R,onChange:W=>q(W.target.value),onKeyPress:W=>{W.key==="Enter"&&R&&(V({...I,stepsToReproduce:[...I.stepsToReproduce,R]}),q(""))},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"  (Enter)"}),e.jsx("button",{onClick:()=>{R&&(V({...I,stepsToReproduce:[...I.stepsToReproduce,R]}),q(""))},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:e.jsx(Ve,{className:"w-5 h-5"})})]}),e.jsx("ol",{className:"list-decimal list-inside space-y-1",children:I.stepsToReproduce.map((W,H)=>e.jsxs("li",{className:"text-sm text-gray-700 flex items-center justify-between bg-gray-50 p-2 rounded",children:[e.jsx("span",{children:W}),e.jsx("button",{onClick:()=>V({...I,stepsToReproduce:I.stepsToReproduce.filter((re,he)=>he!==H)}),className:"text-red-600 hover:text-red-800",children:e.jsx(Ae,{className:"w-4 h-4"})})]},H))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("div",{className:"flex gap-2 mb-2",children:e.jsx("input",{type:"text",value:J,onChange:W=>se(W.target.value),onKeyPress:W=>{W.key==="Enter"&&J&&(V({...I,tags:[...I.tags,J]}),se(""))},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"  (Enter)"})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:I.tags.map((W,H)=>e.jsxs("span",{className:"inline-flex items-center gap-1 text-sm px-3 py-1 bg-gray-100 text-gray-700 rounded-full",children:[W,e.jsx("button",{onClick:()=>V({...I,tags:I.tags.filter((re,he)=>he!==H)}),className:"hover:text-gray-900",children:e.jsx(Ae,{className:"w-3 h-3"})})]},H))})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>T(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:""}),e.jsx("button",{onClick:te,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:""})]})]})})]})})},qW=({projectId:s,onClose:t})=>{const[r,a]=w.useState([]),[n,i]=w.useState([]),[o,c]=w.useState(null),[u,h]=w.useState(!0),[m,f]=w.useState(""),[p,j]=w.useState(null),[g,v]=w.useState(!1),[y,N]=w.useState(!1),[S,k]=w.useState(!1),[_,T]=w.useState({title:"",content:"",categoryId:0,tags:[]}),[E,z]=w.useState({name:"",description:"",icon:""}),[M,C]=w.useState("");w.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),w.useEffect(()=>{A()},[s]);const A=async()=>{h(!0);try{const te=await fetch(`http://147.45.215.199:8001/api/projects/${s}/knowledge-base`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(te.ok){const K=await te.json();a(K.articles||[]),i(K.categories||[])}else i([{id:1,name:"",description:" ",parentId:null,articlesCount:5,icon:""},{id:2,name:"FAQ",description:"  ",parentId:null,articlesCount:8,icon:""},{id:3,name:"API",description:" API",parentId:null,articlesCount:12,icon:""},{id:4,name:"Best Practices",description:" ",parentId:null,articlesCount:6,icon:""},{id:5,name:"Troubleshooting",description:" ",parentId:null,articlesCount:10,icon:""}]),a([{id:1,title:"    ",content:"    ...",categoryId:1,author:" ",createdAt:"2024-03-01T10:00:00",updatedAt:"2024-03-10T14:30:00",views:245,likes:18,commentsCount:5,tags:[" ",""],favorite:!0,attachments:["setup-guide.pdf"]},{id:2,title:"  ",content:"    ...",categoryId:1,author:" ",createdAt:"2024-02-15T09:00:00",updatedAt:"2024-03-05T11:20:00",views:189,likes:22,commentsCount:8,tags:["setup","dev environment"],favorite:!1,attachments:[]},{id:3,title:"   ?",content:"FAQ:     ...",categoryId:2,author:" ",createdAt:"2024-03-08T15:30:00",updatedAt:"2024-03-08T15:30:00",views:156,likes:12,commentsCount:3,tags:["faq",""],favorite:!1,attachments:[]},{id:4,title:"REST API: ",content:"    API...",categoryId:3,author:" ",createdAt:"2024-02-20T16:00:00",updatedAt:"2024-03-12T10:45:00",views:312,likes:35,commentsCount:12,tags:["api","auth","security"],favorite:!0,attachments:["api-examples.json"]},{id:5,title:"-:  ",content:"   -...",categoryId:4,author:" ",createdAt:"2024-03-05T13:00:00",updatedAt:"2024-03-05T13:00:00",views:98,likes:15,commentsCount:4,tags:["code review","best practices"],favorite:!1,attachments:[]},{id:6,title:"   ",content:"    ...",categoryId:5,author:" ",createdAt:"2024-03-14T11:00:00",updatedAt:"2024-03-14T11:00:00",views:67,likes:8,commentsCount:2,tags:["performance","troubleshooting"],favorite:!1,attachments:["performance-tips.pdf"]}])}catch(te){console.error("Error fetching knowledge base:",te)}finally{h(!1)}},Z=async()=>{if(!_.title||!_.content){alert("   ");return}const te={..._,id:Date.now(),author:" ",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),views:0,likes:0,commentsCount:0,favorite:!1,attachments:[]};a([...r,te]),v(!1),T({title:"",content:"",categoryId:0,tags:[]})},I=()=>{if(!E.name){alert("  ");return}const te={...E,id:Date.now(),parentId:o,articlesCount:0};i([...n,te]),N(!1),z({name:"",description:"",icon:""})},V=te=>{confirm(" ?")&&a(r.filter(K=>K.id!==te))},R=te=>{a(r.map(K=>K.id===te.id?{...K,favorite:!K.favorite}:K))},q=()=>n.find(te=>te.id===o),J=()=>{const te=[];let K=q();for(;K;)te.unshift(K),K=n.find($=>$.id===K.parentId);return te},se=r.filter(te=>{const K=te.categoryId===o,$=te.title.toLowerCase().includes(m.toLowerCase())||te.content.toLowerCase().includes(m.toLowerCase())||te.tags.some(ie=>ie.toLowerCase().includes(m.toLowerCase())),le=!S||te.favorite;return K&&$&&le}),Y=n.filter(te=>te.parentId===o),ee={totalArticles:r.length,totalViews:r.reduce((te,K)=>te+K.views,0),totalLikes:r.reduce((te,K)=>te+K.likes,0),favorites:r.filter(te=>te.favorite).length};return u?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"  ..."})]})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-cyan-600 to-blue-600 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(E4,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:" "}),e.jsxs("p",{className:"text-cyan-100 text-sm",children:[" #",s]})]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(Ae,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 p-6 bg-gray-50 border-b",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(UL,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:ee.totalArticles})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Ft,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:ee.totalViews})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Bh,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:ee.totalLikes})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Ps,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:ee.favorites})]})]}),e.jsx("div",{className:"px-6 py-3 bg-white border-b",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("button",{onClick:()=>c(null),className:"text-cyan-600 hover:text-cyan-700 font-medium",children:" "}),J().map(te=>e.jsxs(hl.Fragment,{children:[e.jsx(jn,{className:"w-4 h-4 text-gray-400"}),e.jsx("button",{onClick:()=>c(te.id),className:"text-cyan-600 hover:text-cyan-700 font-medium",children:te.name})]},te.id))]})}),e.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 p-6 bg-white border-b",children:[e.jsxs("div",{className:"flex flex-wrap gap-3 flex-1",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(Fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"   ...",value:m,onChange:te=>f(te.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent"})]})}),e.jsx("button",{onClick:()=>k(!S),className:`px-4 py-2 rounded-lg border transition-colors ${S?"bg-yellow-100 border-yellow-300 text-yellow-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:e.jsx(Ps,{className:`w-5 h-5 ${S?"fill-current":""}`})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>N(!0),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center gap-2",children:[e.jsx(Gj,{className:"w-5 h-5"}),""]}),e.jsxs("button",{onClick:()=>v(!0),className:"px-4 py-2 bg-cyan-600 text-white rounded-lg hover:bg-cyan-700 transition-colors flex items-center gap-2",children:[e.jsx(Ve,{className:"w-5 h-5"}),""]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[Y.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:""}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Y.map(te=>e.jsxs("button",{onClick:()=>c(te.id),className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow text-left",children:[e.jsx("div",{className:"text-3xl mb-2",children:te.icon}),e.jsx("p",{className:"font-medium text-gray-900",children:te.name}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[te.articlesCount," "]})]},te.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:""}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:se.map(te=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx(Tr,{className:"w-6 h-6 text-cyan-600 flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2",children:te.title}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:te.content})]})]}),e.jsx("button",{onClick:()=>R(te),className:"p-1",children:e.jsx(Ps,{className:`w-5 h-5 ${te.favorite?"fill-yellow-400 text-yellow-400":"text-gray-400"}`})})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:te.tags.map((K,$)=>e.jsx("span",{className:"text-xs px-2 py-1 bg-cyan-100 text-cyan-700 rounded-full",children:K},$))}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ft,{className:"w-4 h-4"}),e.jsx("span",{children:te.views})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Bh,{className:"w-4 h-4"}),e.jsx("span",{children:te.likes})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Es,{className:"w-4 h-4"}),e.jsx("span",{children:te.commentsCount})]})]}),e.jsx("button",{onClick:()=>j(te),className:"text-cyan-600 hover:text-cyan-700 font-medium text-sm",children:" "})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t text-xs text-gray-500",children:[e.jsx(st,{className:"w-3 h-3"}),e.jsx("span",{children:te.author}),e.jsx("span",{children:""}),e.jsx(Ue,{className:"w-3 h-3"}),e.jsx("span",{children:new Date(te.updatedAt).toLocaleDateString("ru-RU")})]})]},te.id))}),se.length===0&&Y.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(E4,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"    "})]})]})]}),g&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-3xl max-h-[80vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:" "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:_.title,onChange:te=>T({..._,title:te.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("select",{value:_.categoryId,onChange:te=>T({..._,categoryId:parseInt(te.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",children:[e.jsx("option",{value:0,children:" "}),n.map(te=>e.jsxs("option",{value:te.id,children:[te.icon," ",te.name]},te.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("textarea",{value:_.content,onChange:te=>T({..._,content:te.target.value}),rows:10,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent font-mono text-sm",placeholder:"Markdown ..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("div",{className:"flex gap-2 mb-2",children:e.jsx("input",{type:"text",value:M,onChange:te=>C(te.target.value),onKeyPress:te=>{te.key==="Enter"&&M&&(T({..._,tags:[..._.tags,M]}),C(""))},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",placeholder:"  (Enter)"})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:_.tags.map((te,K)=>e.jsxs("span",{className:"inline-flex items-center gap-1 text-sm px-3 py-1 bg-cyan-100 text-cyan-700 rounded-full",children:[te,e.jsx("button",{onClick:()=>T({..._,tags:_.tags.filter(($,le)=>le!==K)}),className:"hover:text-cyan-900",children:e.jsx(Ae,{className:"w-3 h-3"})})]},K))})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:""}),e.jsx("button",{onClick:Z,className:"px-4 py-2 bg-cyan-600 text-white rounded-lg hover:bg-cyan-700 transition-colors",children:""})]})]})}),y&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:" "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:E.name,onChange:te=>z({...E,name:te.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:E.icon,onChange:te=>z({...E,icon:te.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",placeholder:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:E.description,onChange:te=>z({...E,description:te.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>N(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:""}),e.jsx("button",{onClick:I,className:"px-4 py-2 bg-cyan-600 text-white rounded-lg hover:bg-cyan-700 transition-colors",children:""})]})]})}),p&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:p.title}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(st,{className:"w-4 h-4"}),e.jsx("span",{children:p.author})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(p.updatedAt).toLocaleString("ru-RU")})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ft,{className:"w-4 h-4"}),e.jsxs("span",{children:[p.views," "]})]})]})]}),e.jsx("button",{onClick:()=>j(null),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Ae,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"prose max-w-none mb-6",children:e.jsx("div",{className:"whitespace-pre-wrap text-gray-700 leading-relaxed",children:p.content})}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:p.tags.map((te,K)=>e.jsxs("span",{className:"text-sm px-3 py-1 bg-cyan-100 text-cyan-700 rounded-full",children:["#",te]},K))}),e.jsxs("div",{className:"flex items-center justify-between pt-6 border-t",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors",children:[e.jsx(Bh,{className:"w-5 h-5"}),e.jsx("span",{children:p.likes})]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[e.jsx(Es,{className:"w-5 h-5"}),e.jsx("span",{children:p.commentsCount})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2",children:[e.jsx(mN,{className:"w-5 h-5"}),""]}),e.jsxs("button",{onClick:()=>V(p.id),className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors flex items-center gap-2",children:[e.jsx(Xe,{className:"w-5 h-5"}),""]})]})]})]})})]})})},WW=({projectId:s,onClose:t})=>{const[r,a]=w.useState([]),[n,i]=w.useState(!0),[o,c]=w.useState(!1),[u,h]=w.useState(null),[m,f]=w.useState({title:"",date:new Date().toISOString().slice(0,16),duration:60,type:"internal",participants:[],agenda:[],notes:""}),[p,j]=w.useState(""),[g,v]=w.useState("");w.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),w.useEffect(()=>{y()},[s]);const y=async()=>{i(!0);try{const E=await fetch(`http://147.45.215.199:8001/api/projects/${s}/meetings`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(E.ok){const z=await E.json();a(z)}else a([{id:1,title:" ",date:"2024-03-18T10:00:00",duration:120,type:"planning",participants:[" "," "," "],agenda:[" "," "," ","Q&A"],notes:"    .      API.",actionItems:[{id:1,description:"  API endpoints",assignee:" ",dueDate:"2024-03-20",completed:!1},{id:2,description:"   ",assignee:" ",dueDate:"2024-03-22",completed:!0}],status:"completed",createdBy:" "},{id:2,title:"  ",date:"2024-03-20T14:00:00",duration:60,type:"client",participants:[" ","  ()","  ()"],agenda:["  "," ","  "],notes:"  .    .",actionItems:[{id:3,description:"    ",assignee:" ",dueDate:"2024-03-22",completed:!1}],recordingUrl:"https://example.com/recording/123",status:"completed",createdBy:" "},{id:3,title:"Daily Standup",date:"2024-03-21T09:00:00",duration:15,type:"standup",participants:[" "," "," "," "],agenda:["  ","  ","  "],notes:"   .       .",actionItems:[{id:4,description:"   ",assignee:" ",dueDate:"2024-03-21",completed:!1}],status:"completed",createdBy:" "}])}catch(E){console.error("Error fetching meetings:",E)}finally{i(!1)}},N=async()=>{if(!m.title){alert("  ");return}const E={...m,id:Date.now(),actionItems:[],status:"scheduled",createdBy:" "};a([...r,E]),c(!1),f({title:"",date:new Date().toISOString().slice(0,16),duration:60,type:"internal",participants:[],agenda:[],notes:""})},S=E=>{confirm(" ?")&&a(r.filter(z=>z.id!==E))},k=(E,z)=>{a(r.map(M=>M.id===E?{...M,actionItems:M.actionItems.map(C=>C.id===z?{...C,completed:!C.completed}:C)}:M))},_=E=>{const z={internal:{label:"",color:"bg-blue-100 text-blue-800"},client:{label:" ",color:"bg-purple-100 text-purple-800"},planning:{label:"",color:"bg-green-100 text-green-800"},review:{label:"",color:"bg-yellow-100 text-yellow-800"},standup:{label:"Standup",color:"bg-cyan-100 text-cyan-800"}};return z[E]||z.internal},T={total:r.length,completed:r.filter(E=>E.status==="completed").length,upcoming:r.filter(E=>E.status==="scheduled").length,totalActionItems:r.reduce((E,z)=>E+z.actionItems.length,0),completedActionItems:r.reduce((E,z)=>E+z.actionItems.filter(M=>M.completed).length,0)};return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:" ..."})]})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(L0,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:" "}),e.jsxs("p",{className:"text-purple-100 text-sm",children:[" #",s]})]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(Ae,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-4 p-6 bg-gray-50 border-b",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(L0,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:T.total})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(it,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:T.completed})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(pt,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:T.upcoming})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{children:"Action Items"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:T.totalActionItems})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(it,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:T.completedActionItems})]})]}),e.jsxs("div",{className:"flex justify-between items-center p-6 bg-white border-b",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" "}),e.jsxs("button",{onClick:()=>c(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2",children:[e.jsx(Ve,{className:"w-5 h-5"})," "]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsx("div",{className:"space-y-4",children:r.map(E=>{const z=_(E.type);return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx(L0,{className:"w-8 h-8 text-purple-600 flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"font-bold text-xl text-gray-900",children:E.title}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${z.color}`,children:z.label})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(pt,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(E.date).toLocaleString("ru-RU")})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsxs("span",{children:[E.duration," "]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(tt,{className:"w-4 h-4"}),e.jsxs("span",{children:[E.participants.length," "]})]})]}),E.recordingUrl&&e.jsxs("a",{href:E.recordingUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-sm text-purple-600 hover:text-purple-700",children:[e.jsx(vl,{className:"w-4 h-4"}),"  "]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>h(E),className:"p-2 text-gray-400 hover:text-purple-600 transition-colors",children:e.jsx(Zs,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>S(E.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",children:e.jsx(Xe,{className:"w-5 h-5"})})]})]}),E.agenda.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:":"}),e.jsx("ol",{className:"list-decimal list-inside space-y-1 text-sm text-gray-600",children:E.agenda.map((M,C)=>e.jsx("li",{children:M},C))})]}),E.notes&&e.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:":"}),e.jsx("p",{className:"text-sm text-gray-600 whitespace-pre-wrap",children:E.notes})]}),E.actionItems.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Action Items:"}),e.jsx("div",{className:"space-y-2",children:E.actionItems.map(M=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-blue-50 rounded-lg",children:[e.jsx("button",{onClick:()=>k(E.id,M.id),className:"mt-0.5",children:M.completed?e.jsx(it,{className:"w-5 h-5 text-green-600"}):e.jsx(nE,{className:"w-5 h-5 text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-sm ${M.completed?"line-through text-gray-500":"text-gray-900"}`,children:M.description}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-gray-500",children:[e.jsxs("span",{children:[": ",M.assignee]}),e.jsx("span",{children:""}),e.jsxs("span",{children:[": ",new Date(M.dueDate).toLocaleDateString("ru-RU")]})]})]})]},M.id))})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t text-xs text-gray-500",children:[": ",E.createdBy,"  ",new Date(E.date).toLocaleDateString("ru-RU")]})]},E.id)})}),r.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(L0,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:" "})]})]}),o&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-3xl max-h-[80vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:" "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:m.title,onChange:E=>f({...m,title:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),e.jsx("input",{type:"datetime-local",value:m.date,onChange:E=>f({...m,date:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" ()"}),e.jsx("input",{type:"number",value:m.duration,onChange:E=>f({...m,duration:parseInt(E.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("select",{value:m.type,onChange:E=>f({...m,type:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"internal",children:""}),e.jsx("option",{value:"client",children:" "}),e.jsx("option",{value:"planning",children:""}),e.jsx("option",{value:"review",children:""}),e.jsx("option",{value:"standup",children:"Standup"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("div",{className:"flex gap-2 mb-2",children:e.jsx("input",{type:"text",value:p,onChange:E=>j(E.target.value),onKeyPress:E=>{E.key==="Enter"&&p&&(f({...m,participants:[...m.participants,p]}),j(""))},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"  (Enter)"})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:m.participants.map((E,z)=>e.jsxs("span",{className:"inline-flex items-center gap-1 text-sm px-3 py-1 bg-purple-100 text-purple-700 rounded-full",children:[E,e.jsx("button",{onClick:()=>f({...m,participants:m.participants.filter((M,C)=>C!==z)}),className:"hover:text-purple-900",children:e.jsx(Ae,{className:"w-3 h-3"})})]},z))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("div",{className:"flex gap-2 mb-2",children:e.jsx("input",{type:"text",value:g,onChange:E=>v(E.target.value),onKeyPress:E=>{E.key==="Enter"&&g&&(f({...m,agenda:[...m.agenda,g]}),v(""))},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"   (Enter)"})}),e.jsx("ol",{className:"list-decimal list-inside space-y-1",children:m.agenda.map((E,z)=>e.jsxs("li",{className:"text-sm text-gray-700 flex items-center justify-between bg-gray-50 p-2 rounded",children:[e.jsx("span",{children:E}),e.jsx("button",{onClick:()=>f({...m,agenda:m.agenda.filter((M,C)=>C!==z)}),className:"text-red-600 hover:text-red-800",children:e.jsx(Ae,{className:"w-4 h-4"})})]},z))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:m.notes,onChange:E=>f({...m,notes:E.target.value}),rows:5,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"  ..."})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:""}),e.jsx("button",{onClick:N,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:""})]})]})})]})})},YW=({projectId:s,onClose:t})=>{const[r,a]=w.useState([]),[n,i]=w.useState(!0),[o,c]=w.useState(!1),[u,h]=w.useState({name:"",type:"text",required:!1,defaultValue:"",options:[],description:""}),[m,f]=w.useState("");w.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),w.useEffect(()=>{p()},[s]);const p=async()=>{i(!0);try{const y=await fetch(`http://147.45.215.199:8001/api/projects/${s}/custom-fields`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(y.ok){const N=await y.json();a(N)}else a([{id:1,name:" ",type:"text",required:!0,defaultValue:"",description:"    ",createdAt:"2024-03-01"},{id:2,name:" ",type:"number",required:!0,defaultValue:"0",description:"    ",createdAt:"2024-03-01"},{id:3,name:" ",type:"date",required:!1,description:"  ",createdAt:"2024-03-01"},{id:4,name:"NDA ",type:"boolean",required:!1,defaultValue:"false",description:"    ",createdAt:"2024-03-01"},{id:5,name:" ",type:"select",required:!1,options:["VIP","","",""],description:"  ",createdAt:"2024-03-01"}])}catch(y){console.error("Error fetching fields:",y)}finally{i(!1)}},j=async()=>{if(!u.name){alert("  ");return}const y={...u,id:Date.now(),createdAt:new Date().toISOString()};a([...r,y]),c(!1),h({name:"",type:"text",required:!1,defaultValue:"",options:[],description:""})},g=y=>{confirm(" ?")&&a(r.filter(N=>N.id!==y))},v=y=>({text:Vf,number:hB,date:pt,boolean:gE,select:Am,textarea:Ie})[y]||Vf;return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:" ..."})]})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-600 to-red-600 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Qj,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:" "}),e.jsxs("p",{className:"text-orange-100 text-sm",children:[" #",s]})]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(Ae,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex justify-between items-center p-6 bg-white border-b",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[" : ",r.length]}),e.jsx("p",{className:"text-sm text-gray-500",children:"   "})]}),e.jsxs("button",{onClick:()=>c(!0),className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors flex items-center gap-2",children:[e.jsx(Ve,{className:"w-5 h-5"})," "]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(y=>{const N=v(y.type);return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx(N,{className:"w-8 h-8 text-orange-600 flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-1",children:y.name}),y.required&&e.jsx("span",{className:"text-xs px-2 py-1 bg-red-100 text-red-700 rounded-full",children:""})]})]}),e.jsx("button",{onClick:()=>g(y.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",children:e.jsx(Xe,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:y.description}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:":"}),e.jsx("span",{className:"font-medium text-gray-900 capitalize",children:y.type})]}),y.defaultValue&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"  :"}),e.jsx("span",{className:"font-medium text-gray-900",children:y.defaultValue})]}),y.options&&y.options.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 mb-1",children:":"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:y.options.map((S,k)=>e.jsx("span",{className:"text-xs px-2 py-1 bg-orange-100 text-orange-700 rounded",children:S},k))})]})]})]},y.id)})}),r.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Qj,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"  "})]})]}),o&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:" "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:u.name,onChange:y=>h({...u,name:y.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("select",{value:u.type,onChange:y=>h({...u,type:y.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"text",children:""}),e.jsx("option",{value:"number",children:""}),e.jsx("option",{value:"date",children:""}),e.jsx("option",{value:"boolean",children:"/"}),e.jsx("option",{value:"select",children:"  "}),e.jsx("option",{value:"textarea",children:" "})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:u.description,onChange:y=>h({...u,description:y.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:u.required,onChange:y=>h({...u,required:y.target.checked}),className:"rounded border-gray-300 text-orange-600 focus:ring-orange-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:" "})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),e.jsx("input",{type:"text",value:u.defaultValue,onChange:y=>h({...u,defaultValue:y.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),u.type==="select"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),e.jsx("div",{className:"flex gap-2 mb-2",children:e.jsx("input",{type:"text",value:m,onChange:y=>f(y.target.value),onKeyPress:y=>{y.key==="Enter"&&m&&(h({...u,options:[...u.options||[],m]}),f(""))},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"  (Enter)"})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(u.options||[]).map((y,N)=>e.jsxs("span",{className:"inline-flex items-center gap-1 text-sm px-3 py-1 bg-orange-100 text-orange-700 rounded-full",children:[y,e.jsx("button",{onClick:()=>h({...u,options:(u.options||[]).filter((S,k)=>k!==N)}),className:"hover:text-orange-900",children:e.jsx(Ae,{className:"w-3 h-3"})})]},N))})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:""}),e.jsx("button",{onClick:j,className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors",children:""})]})]})})]})})},GW=({projectId:s,onClose:t})=>{const[r,a]=w.useState([]),[n,i]=w.useState(!0),[o,c]=w.useState(null),[u,h]=w.useState(""),[m,f]=w.useState(new Date().toISOString().slice(0,10)),[p,j]=w.useState([]),[g,v]=w.useState("pdf"),[y,N]=w.useState(!1);w.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),w.useEffect(()=>{S()},[s]);const S=async()=>{i(!0);try{const E=await fetch(`http://147.45.215.199:8001/api/projects/${s}/report-templates`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(E.ok){const z=await E.json();a(z)}else a([{id:1,name:"  ",description:"   ",type:"progress",sections:[" ",""," (%)","",""],format:"pdf"},{id:2,name:" ",description:"   ",type:"financial",sections:["","  ","",""],format:"xlsx"},{id:3,name:"  ",description:"  ",type:"time",sections:["  ","  ","Billable/Non-billable",""],format:"xlsx"},{id:4,name:"  ",description:" ",type:"team",sections:["",""," "," "],format:"pdf"},{id:5,name:"  ",description:"QA   ",type:"quality",sections:["","","Code coverage"," "],format:"pdf"}])}catch(E){console.error("Error fetching templates:",E)}finally{i(!1)}},k=async()=>{if(!o){alert("  ");return}if(!u||!m){alert("  ");return}N(!0);try{const E=await fetch(`http://147.45.215.199:8001/api/projects/${s}/reports/generate`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({templateId:o.id,dateFrom:u,dateTo:m,sections:p.length>0?p:o.sections,format:g})});if(E.ok){const z=await E.blob(),M=window.URL.createObjectURL(z),C=document.createElement("a");C.href=M,C.download=`report-${o.name}-${new Date().toISOString().slice(0,10)}.${g}`,document.body.appendChild(C),C.click(),C.remove(),window.URL.revokeObjectURL(M),alert("   ")}else alert("     ")}catch(E){console.error("Error generating report:",E),alert("     ")}finally{N(!1)}},_=E=>({progress:Ar,financial:Ge,time:Ue,team:tt,quality:Lh,custom:Ie})[E]||Ie,T=E=>{p.includes(E)?j(p.filter(z=>z!==E)):j([...p,E])};return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:" ..."})]})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-teal-600 to-cyan-600 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ie,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:" "}),e.jsxs("p",{className:"text-teal-100 text-sm",children:[" #",s]})]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(Ae,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:" "}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(E=>{const z=_(E.type),M=o?.id===E.id;return e.jsxs("button",{onClick:()=>{c(E),j([]),v(E.format)},className:`text-left bg-white border-2 rounded-lg p-6 hover:shadow-md transition-all ${M?"border-teal-600 bg-teal-50":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx(z,{className:`w-8 h-8 flex-shrink-0 ${M?"text-teal-600":"text-gray-600"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-1",children:E.name}),e.jsx("p",{className:"text-sm text-gray-600",children:E.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsxs("span",{children:[E.sections.length," "]}),e.jsx("span",{children:""}),e.jsx("span",{children:E.format.toUpperCase()})]})]},E.id)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:" "}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(pt,{className:"w-4 h-4 inline mr-2"})," "]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:""}),e.jsx("input",{type:"date",value:u,onChange:E=>h(E.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:""}),e.jsx("input",{type:"date",value:m,onChange:E=>f(E.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"})]})]})]}),o&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(ar,{className:"w-4 h-4 inline mr-2"})," "]}),e.jsx("div",{className:"space-y-2",children:o.sections.map(E=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:p.length===0||p.includes(E),onChange:()=>T(E),className:"rounded border-gray-300 text-teal-600 focus:ring-teal-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:E})]},E))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Ie,{className:"w-4 h-4 inline mr-2"})," "]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["pdf","xlsx","docx","html"].map(E=>e.jsx("button",{onClick:()=>v(E),className:`px-4 py-2 rounded-lg border-2 transition-colors ${g===E?"border-teal-600 bg-teal-50 text-teal-700 font-medium":"border-gray-200 text-gray-700 hover:bg-gray-50"}`,children:E.toUpperCase()},E))})]}),e.jsx("button",{onClick:k,disabled:y||!u||!m,className:"w-full px-6 py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2 font-medium",children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"..."]}):e.jsxs(e.Fragment,{children:[e.jsx(wt,{className:"w-5 h-5"})," "]})})]}),!o&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ie,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"  "})]})]}),o&&e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:""}),e.jsx("p",{className:"text-sm text-blue-700",children:o.description}),e.jsx("div",{className:"mt-3 pt-3 border-t border-blue-200",children:e.jsxs("p",{className:"text-xs text-blue-600",children:["  "," ",p.length>0?p.length:o.sections.length," "]})})]})]})]})})]})})},KW=({projectId:s,onClose:t})=>{const[r,a]=w.useState([]),[n,i]=w.useState(!0),[o,c]=w.useState(""),[u,h]=w.useState("all"),[m,f]=w.useState("all"),[p,j]=w.useState("all"),[g,v]=w.useState(""),[y,N]=w.useState(new Date().toISOString().slice(0,10)),[S,k]=w.useState(null);w.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),w.useEffect(()=>{_()},[s]);const _=async()=>{i(!0);try{const V=await fetch(`http://147.45.215.199:8001/api/projects/${s}/audit-log`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(V.ok){const R=await V.json();a(R)}else a([{id:1,userId:1,userName:" ",userRole:"",action:"update",entityType:"project",entityId:s,entityName:" ",changes:[{field:"",oldValue:" ",newValue:""},{field:"",oldValue:"100000",newValue:"120000"}],ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7)",timestamp:new Date(Date.now()-36e5).toISOString(),severity:"info"},{id:2,userId:2,userName:" ",userRole:"",action:"create",entityType:"task",entityId:101,entityName:" ",ipAddress:"192.168.1.101",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64)",timestamp:new Date(Date.now()-72e5).toISOString(),severity:"info"},{id:3,userId:3,userName:" ",userRole:"",action:"delete",entityType:"file",entityId:50,entityName:"old_document.pdf",ipAddress:"192.168.1.102",userAgent:"Mozilla/5.0 (X11; Linux x86_64)",timestamp:new Date(Date.now()-144e5).toISOString(),severity:"warning"},{id:4,userId:1,userName:" ",userRole:"",action:"permission",entityType:"user",entityId:5,entityName:" ",changes:[{field:"",oldValue:"",newValue:""},{field:"",oldValue:"",newValue:""}],ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7)",timestamp:new Date(Date.now()-216e5).toISOString(),severity:"critical"},{id:5,userId:2,userName:" ",userRole:"",action:"export",entityType:"report",entityId:20,entityName:" ",ipAddress:"192.168.1.101",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64)",timestamp:new Date(Date.now()-288e5).toISOString(),severity:"info"},{id:6,userId:4,userName:" ",userRole:"QA",action:"update",entityType:"task",entityId:102,entityName:" ",changes:[{field:"",oldValue:"",newValue:" "}],ipAddress:"192.168.1.103",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_7_1)",timestamp:new Date(Date.now()-36e6).toISOString(),severity:"info"}])}catch(V){console.error("Error fetching audit log:",V)}finally{i(!1)}},T=V=>({create:"",update:"",delete:"",view:"",export:"",login:"",logout:"",permission:""})[V]||"",E=V=>({create:"text-green-600 bg-green-100",update:"text-blue-600 bg-blue-100",delete:"text-red-600 bg-red-100",view:"text-gray-600 bg-gray-100",export:"text-purple-600 bg-purple-100",login:"text-teal-600 bg-teal-100",logout:"text-orange-600 bg-orange-100",permission:"text-pink-600 bg-pink-100"})[V]||"text-gray-600 bg-gray-100",z=V=>({info:"bg-blue-100 text-blue-800",warning:"bg-yellow-100 text-yellow-800",critical:"bg-red-100 text-red-800"})[V]||"bg-gray-100 text-gray-800",M=V=>({info:"",warning:"",critical:""})[V]||"",C=V=>({create:"",update:"",delete:"",view:"",export:"",login:"",logout:"",permission:" "})[V]||V,A=V=>({project:"",task:"",file:"",user:"",setting:"",report:"",comment:""})[V]||V,Z=r.filter(V=>{const R=V.userName.toLowerCase().includes(o.toLowerCase())||V.entityName.toLowerCase().includes(o.toLowerCase())||V.action.toLowerCase().includes(o.toLowerCase()),q=u==="all"||V.action===u,J=m==="all"||V.entityType===m,se=p==="all"||V.severity===p,Y=new Date(V.timestamp).toISOString().slice(0,10),ee=(!g||Y>=g)&&(!y||Y<=y);return R&&q&&J&&se&&ee}),I=()=>{const V=[["ID","","","","","","IP",""].join(","),...Z.map(se=>[se.id,se.userName,C(se.action),A(se.entityType),se.entityName,new Date(se.timestamp).toLocaleString("ru-RU"),se.ipAddress,M(se.severity)].join(","))].join(`
`),R=new Blob(["\uFEFF"+V],{type:"text/csv;charset=utf-8;"}),q=window.URL.createObjectURL(R),J=document.createElement("a");J.href=q,J.download=`audit-log-project-${s}-${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(J),J.click(),document.body.removeChild(J),window.URL.revokeObjectURL(q)};return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"  ..."})]})}):e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Er,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:" "}),e.jsxs("p",{className:"text-indigo-100 text-sm",children:[" #",s]})]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(Ae,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 border-b bg-gray-50",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:o,onChange:V=>c(V.target.value),placeholder:"...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),e.jsxs("select",{value:u,onChange:V=>h(V.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),e.jsx("option",{value:"create",children:""}),e.jsx("option",{value:"update",children:""}),e.jsx("option",{value:"delete",children:""}),e.jsx("option",{value:"view",children:""}),e.jsx("option",{value:"export",children:""}),e.jsx("option",{value:"permission",children:""})]}),e.jsxs("select",{value:m,onChange:V=>f(V.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),e.jsx("option",{value:"project",children:""}),e.jsx("option",{value:"task",children:""}),e.jsx("option",{value:"file",children:""}),e.jsx("option",{value:"user",children:""}),e.jsx("option",{value:"report",children:""})]}),e.jsxs("select",{value:p,onChange:V=>j(V.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),e.jsx("option",{value:"info",children:""}),e.jsx("option",{value:"warning",children:""}),e.jsx("option",{value:"critical",children:""})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:" "}),e.jsx("input",{type:"date",value:g,onChange:V=>v(V.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:" "}),e.jsx("input",{type:"date",value:y,onChange:V=>N(V.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsxs("button",{onClick:_,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(rs,{className:"w-5 h-5"}),""]}),e.jsxs("button",{onClick:I,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(wt,{className:"w-5 h-5"}),""]})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[" : ",e.jsx("span",{className:"font-bold text-gray-900",children:Z.length}),"  ",r.length]})}),e.jsx("div",{className:"space-y-3",children:Z.map(V=>e.jsx("div",{onClick:()=>k(V),className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-all cursor-pointer",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${E(V.action)} flex items-center justify-center flex-shrink-0 text-xl`,children:T(V.action)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-bold text-gray-900 mb-1",children:[C(V.action),"  ",A(V.entityType)]}),e.jsx("p",{className:"text-sm text-gray-600",children:V.entityName})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${z(V.severity)}`,children:M(V.severity)})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:V.userName}),e.jsx("p",{className:"text-xs text-gray-500",children:V.userRole})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pt,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900",children:new Date(V.timestamp).toLocaleDateString("ru-RU")}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(V.timestamp).toLocaleTimeString("ru-RU")})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(yn,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900",children:V.ipAddress}),e.jsx("p",{className:"text-xs text-gray-500",children:"IP "})]})]}),V.changes&&V.changes.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-900",children:[V.changes.length," "]}),e.jsx("p",{className:"text-xs text-gray-500",children:""})]})]})]})]})]})},V.id))}),Z.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Er,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"  "})]})]})]}),S&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl max-h-[80vh] overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ie,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:" "}),e.jsxs("p",{className:"text-indigo-100 text-sm",children:["ID: ",S.id]})]})]}),e.jsx("button",{onClick:()=>k(null),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(Ae,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(80vh-80px)]",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:S.userName}),e.jsx("p",{className:"text-sm text-gray-500",children:S.userRole})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:T(S.action)}),e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:C(S.action)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),e.jsx("p",{className:"text-gray-900",children:A(S.entityType)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),e.jsx("p",{className:"text-gray-900",children:S.entityName})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"  "}),e.jsx("p",{className:"text-gray-900",children:new Date(S.timestamp).toLocaleString("ru-RU")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),e.jsx("span",{className:`inline-block text-xs px-3 py-1 rounded-full ${z(S.severity)}`,children:M(S.severity)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"IP "}),e.jsx("p",{className:"text-gray-900 font-mono",children:S.ipAddress})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User Agent"}),e.jsx("p",{className:"text-sm text-gray-600 font-mono break-all",children:S.userAgent})]}),S.changes&&S.changes.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:""}),e.jsx("div",{className:"space-y-3",children:S.changes.map((V,R)=>e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsx("p",{className:"font-medium text-gray-900 mb-2",children:V.field}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),e.jsx("p",{className:"text-sm text-red-600 font-mono bg-red-50 px-2 py-1 rounded",children:V.oldValue||""})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),e.jsx("p",{className:"text-sm text-green-600 font-mono bg-green-50 px-2 py-1 rounded",children:V.newValue||""})]})]})]},R))})]})]})}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t flex justify-end",children:e.jsx("button",{onClick:()=>k(null),className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:""})})]})})]})},XW=({projectId:s,onClose:t})=>{const[r,a]=w.useState([]),[n,i]=w.useState(!0),[o,c]=w.useState(!1),[u,h]=w.useState(null),[m,f]=w.useState("all"),[p,j]=w.useState({clientName:"",clientEmail:"",clientAddress:"",issueDate:new Date().toISOString().slice(0,10),dueDate:new Date(Date.now()+720*60*60*1e3).toISOString().slice(0,10),items:[],taxRate:20,discount:0,notes:""}),[g,v]=w.useState({description:"",quantity:1,unitPrice:0});w.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),w.useEffect(()=>{y()},[s]);const y=async()=>{i(!0);try{const V=await fetch(`http://147.45.215.199:8001/api/projects/${s}/invoices`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(V.ok){const R=await V.json();a(R)}else a([{id:1,invoiceNumber:"INV-2024-001",clientName:' ""',clientEmail:"client@technocom.ru",clientAddress:". , . , . 10",issueDate:"2024-03-01",dueDate:"2024-03-31",status:"paid",items:[{id:1,description:" ",quantity:1,unitPrice:15e4,amount:15e4},{id:2,description:" (1 )",quantity:1,unitPrice:2e4,amount:2e4}],subtotal:17e4,tax:34e3,taxRate:20,discount:5e3,total:199e3,notes:"   30 ",paymentMethod:" ",paidDate:"2024-03-15"},{id:2,invoiceNumber:"INV-2024-002",clientName:"  ..",clientEmail:"ivanov@example.com",clientAddress:". -, . , . 25",issueDate:"2024-03-15",dueDate:"2024-04-15",status:"sent",items:[{id:1,description:"",quantity:5,unitPrice:5e3,amount:25e3},{id:2,description:" ",quantity:1,unitPrice:45e3,amount:45e3}],subtotal:7e4,tax:14e3,taxRate:20,discount:0,total:84e3,notes:"   30    "},{id:3,invoiceNumber:"INV-2024-003",clientName:' ""',clientEmail:"info@bizgroup.ru",clientAddress:". , . , . 5",issueDate:"2024-02-01",dueDate:"2024-02-28",status:"overdue",items:[{id:1,description:"  CRM",quantity:1,unitPrice:8e4,amount:8e4}],subtotal:8e4,tax:16e3,taxRate:20,discount:0,total:96e3,notes:":  "}])}catch(V){console.error("Error fetching invoices:",V)}finally{i(!1)}},N=()=>{const V=p.items.reduce((J,se)=>J+se.amount,0),R=V*p.taxRate/100,q=V+R-p.discount;return{subtotal:V,tax:R,total:q}},S=()=>{if(!g.description||g.quantity<=0||g.unitPrice<=0){alert("   /");return}const V={id:Date.now(),description:g.description,quantity:g.quantity,unitPrice:g.unitPrice,amount:g.quantity*g.unitPrice};j({...p,items:[...p.items,V]}),v({description:"",quantity:1,unitPrice:0})},k=V=>{j({...p,items:p.items.filter(R=>R.id!==V)})},_=()=>{if(!p.clientName||!p.clientEmail||p.items.length===0){alert("      1 /");return}const{subtotal:V,tax:R,total:q}=N(),J={id:Date.now(),invoiceNumber:`INV-${new Date().getFullYear()}-${String(r.length+1).padStart(3,"0")}`,clientName:p.clientName,clientEmail:p.clientEmail,clientAddress:p.clientAddress,issueDate:p.issueDate,dueDate:p.dueDate,status:"draft",items:p.items,subtotal:V,tax:R,taxRate:p.taxRate,discount:p.discount,total:q,notes:p.notes};a([J,...r]),c(!1),j({clientName:"",clientEmail:"",clientAddress:"",issueDate:new Date().toISOString().slice(0,10),dueDate:new Date(Date.now()+720*60*60*1e3).toISOString().slice(0,10),items:[],taxRate:20,discount:0,notes:""})},T=V=>{confirm(" ?")&&a(r.filter(R=>R.id!==V))},E=V=>{const R=r.find(q=>q.id===V);R&&R.status==="draft"&&(a(r.map(q=>q.id===V?{...q,status:"sent"}:q)),alert("  "))},z=V=>{a(r.map(R=>R.id===V?{...R,status:"paid",paidDate:new Date().toISOString().slice(0,10)}:R)),alert("   ")},M=V=>({draft:e.jsx(Zs,{className:"w-5 h-5"}),sent:e.jsx(Qs,{className:"w-5 h-5"}),paid:e.jsx(it,{className:"w-5 h-5"}),overdue:e.jsx(qe,{className:"w-5 h-5"}),cancelled:e.jsx(Ae,{className:"w-5 h-5"})})[V]||e.jsx(Ie,{className:"w-5 h-5"}),C=V=>({draft:"bg-gray-100 text-gray-700",sent:"bg-blue-100 text-blue-700",paid:"bg-green-100 text-green-700",overdue:"bg-red-100 text-red-700",cancelled:"bg-orange-100 text-orange-700"})[V]||"bg-gray-100 text-gray-700",A=V=>({draft:"",sent:"",paid:"",overdue:"",cancelled:""})[V]||V,Z=r.filter(V=>m==="all"?!0:V.status===m),I={total:r.reduce((V,R)=>V+R.total,0),paid:r.filter(V=>V.status==="paid").reduce((V,R)=>V+R.total,0),pending:r.filter(V=>V.status==="sent"||V.status==="overdue").reduce((V,R)=>V+R.total,0)};return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:" ..."})]})}):e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ie,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:" "}),e.jsxs("p",{className:"text-green-100 text-sm",children:[" #",s]})]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(Ae,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 border-b bg-gray-50",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-4",children:[e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ge,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:" "}),e.jsxs("p",{className:"text-xl font-bold text-gray-900",children:[I.total.toLocaleString("ru-RU")," "]})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(it,{className:"w-8 h-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:""}),e.jsxs("p",{className:"text-xl font-bold text-green-700",children:[I.paid.toLocaleString("ru-RU")," "]})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ue,{className:"w-8 h-8 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:""}),e.jsxs("p",{className:"text-xl font-bold text-orange-700",children:[I.pending.toLocaleString("ru-RU")," "]})]})]})}),e.jsxs("button",{onClick:()=>c(!0),className:"bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2 font-medium",children:[e.jsx(Ve,{className:"w-5 h-5"})," "]})]}),e.jsx("div",{className:"flex gap-2",children:["all","draft","sent","paid","overdue"].map(V=>e.jsxs("button",{onClick:()=>f(V),className:`px-4 py-2 rounded-lg transition-colors ${m===V?"bg-green-600 text-white":"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50"}`,children:[V==="all"?"":A(V),e.jsxs("span",{className:"ml-2 text-xs",children:["(",V==="all"?r.length:r.filter(R=>R.status===V).length,")"]})]},V))})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsx("div",{className:"space-y-4",children:Z.map(V=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:`p-3 rounded-lg ${C(V.status)}`,children:M(V.status)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:V.invoiceNumber}),e.jsx("span",{className:`text-xs px-3 py-1 rounded-full ${C(V.status)}`,children:A(V.status)})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:V.clientName}),e.jsx("p",{className:"text-xs text-gray-500",children:V.clientEmail})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pt,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-900",children:[": ",new Date(V.issueDate).toLocaleDateString("ru-RU")]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[" : ",new Date(V.dueDate).toLocaleDateString("ru-RU")]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[V.total.toLocaleString("ru-RU")," "]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[V.items.length," "]})]})]}),V.paidDate&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(it,{className:"w-4 h-4 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900",children:""}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(V.paidDate).toLocaleDateString("ru-RU")})]})]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>h(V),className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"",children:e.jsx(Ft,{className:"w-5 h-5"})}),V.status==="draft"&&e.jsx("button",{onClick:()=>E(V.id),className:"p-2 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"",children:e.jsx(Qs,{className:"w-5 h-5"})}),(V.status==="sent"||V.status==="overdue")&&e.jsx("button",{onClick:()=>z(V.id),className:"p-2 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"  ",children:e.jsx(it,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>T(V.id),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"",children:e.jsx(Xe,{className:"w-5 h-5"})})]})]}),V.notes&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsx("p",{className:"text-sm text-gray-600",children:V.notes})})]},V.id))}),Z.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Ie,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"  "})]})]})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white p-6 flex justify-between items-center",children:[e.jsx("h3",{className:"text-2xl font-bold",children:" "}),e.jsx("button",{onClick:()=>c(!1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(Ae,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:p.clientName,onChange:V=>j({...p,clientName:V.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:p.clientEmail,onChange:V=>j({...p,clientEmail:V.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),e.jsx("textarea",{value:p.clientAddress,onChange:V=>j({...p,clientAddress:V.target.value}),rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"date",value:p.issueDate,onChange:V=>j({...p,issueDate:V.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"date",value:p.dueDate,onChange:V=>j({...p,dueDate:V.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-3",children:"/"}),e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-3",children:[e.jsx("div",{className:"md:col-span-5",children:e.jsx("input",{type:"text",value:g.description,onChange:V=>v({...g,description:V.target.value}),placeholder:"",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx("input",{type:"number",value:g.quantity,onChange:V=>v({...g,quantity:parseFloat(V.target.value)||0}),placeholder:"-",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})}),e.jsx("div",{className:"md:col-span-3",children:e.jsx("input",{type:"number",value:g.unitPrice,onChange:V=>v({...g,unitPrice:parseFloat(V.target.value)||0}),placeholder:"",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx("button",{onClick:S,className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:e.jsx(Ve,{className:"w-5 h-5 mx-auto"})})})]})}),p.items.length>0&&e.jsx("div",{className:"space-y-2",children:p.items.map(V=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:V.description}),e.jsxs("p",{className:"text-sm text-gray-500",children:[V.quantity,"  ",V.unitPrice.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[V.amount.toLocaleString("ru-RU")," "]}),e.jsx("button",{onClick:()=>k(V.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",children:e.jsx(Xe,{className:"w-4 h-4"})})]})]},V.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" (%)"}),e.jsx("input",{type:"number",value:p.taxRate,onChange:V=>j({...p,taxRate:parseFloat(V.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" ()"}),e.jsx("input",{type:"number",value:p.discount,onChange:V=>j({...p,discount:parseFloat(V.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]}),p.items.length>0&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:":"}),e.jsxs("span",{className:"font-medium",children:[N().subtotal.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:[" (",p.taxRate,"%):"]}),e.jsxs("span",{className:"font-medium",children:[N().tax.toLocaleString("ru-RU")," "]})]}),p.discount>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:":"}),e.jsxs("span",{className:"font-medium text-red-600",children:["-",p.discount.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold text-gray-900 pt-2 border-t border-green-300",children:[e.jsx("span",{children:":"}),e.jsxs("span",{children:[N().total.toLocaleString("ru-RU")," "]})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:p.notes,onChange:V=>j({...p,notes:V.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]})}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>c(!1),className:"px-6 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:""}),e.jsx("button",{onClick:_,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:" "})]})]})}),u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white p-6 flex justify-between items-center",children:[e.jsx("h3",{className:"text-2xl font-bold",children:u.invoiceNumber}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>alert("   PDF  "),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",title:" PDF",children:e.jsx(wt,{className:"w-6 h-6"})}),e.jsx("button",{onClick:()=>h(null),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(Ae,{className:"w-6 h-6"})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between pb-6 border-b",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-2xl font-bold text-gray-900",children:""}),e.jsx("p",{className:"text-lg text-gray-600",children:u.invoiceNumber})]}),e.jsx("span",{className:`px-4 py-2 rounded-lg ${C(u.status)}`,children:A(u.status)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-500 mb-2",children:""}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:u.clientName}),e.jsx("p",{className:"text-sm text-gray-600",children:u.clientEmail}),u.clientAddress&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:u.clientAddress})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-500",children:" "}),e.jsx("p",{className:"text-gray-900",children:new Date(u.issueDate).toLocaleDateString("ru-RU")})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-500",children:" "}),e.jsx("p",{className:"text-gray-900",children:new Date(u.dueDate).toLocaleDateString("ru-RU")})]})]})]}),e.jsx("div",{children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-300",children:[e.jsx("th",{className:"text-left py-3 text-sm font-medium text-gray-500",children:""}),e.jsx("th",{className:"text-center py-3 text-sm font-medium text-gray-500",children:"-"}),e.jsx("th",{className:"text-right py-3 text-sm font-medium text-gray-500",children:""}),e.jsx("th",{className:"text-right py-3 text-sm font-medium text-gray-500",children:""})]})}),e.jsx("tbody",{children:u.items.map(V=>e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"py-3 text-gray-900",children:V.description}),e.jsx("td",{className:"py-3 text-center text-gray-900",children:V.quantity}),e.jsxs("td",{className:"py-3 text-right text-gray-900",children:[V.unitPrice.toLocaleString("ru-RU")," "]}),e.jsxs("td",{className:"py-3 text-right font-medium text-gray-900",children:[V.amount.toLocaleString("ru-RU")," "]})]},V.id))})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"w-64 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:":"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[u.subtotal.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:[" (",u.taxRate,"%):"]}),e.jsxs("span",{className:"font-medium text-gray-900",children:[u.tax.toLocaleString("ru-RU")," "]})]}),u.discount>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:":"}),e.jsxs("span",{className:"font-medium text-red-600",children:["-",u.discount.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold text-gray-900 pt-2 border-t-2 border-gray-300",children:[e.jsx("span",{children:":"}),e.jsxs("span",{children:[u.total.toLocaleString("ru-RU")," "]})]})]})}),u.notes&&e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("p",{className:"text-sm text-gray-600",children:u.notes})]}),u.paidDate&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-green-800",children:[e.jsx(it,{className:"w-4 h-4 inline mr-2"})," ",new Date(u.paidDate).toLocaleDateString("ru-RU"),u.paymentMethod&&` - ${u.paymentMethod}`]})})]})})]})})]})},ZW=({projectId:s,onClose:t})=>{const[r,a]=w.useState([]),[n,i]=w.useState(!0),[o,c]=w.useState(!1),[u,h]=w.useState("all"),[m,f]=w.useState("all"),[p,j]=w.useState(""),[g,v]=w.useState(new Date().toISOString().slice(0,10)),[y,N]=w.useState("list"),[S,k]=w.useState({date:new Date().toISOString().slice(0,10),category:"other",description:"",amount:0,paidTo:"",paymentMethod:"transfer",notes:"",createdBy:" "});w.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),w.useEffect(()=>{_()},[s]);const _=async()=>{i(!0);try{const te=await fetch(`http://147.45.215.199:8001/api/projects/${s}/expenses`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(te.ok){const K=await te.json();a(K)}else a([{id:1,date:"2024-03-15",category:"salary",description:" ",amount:15e4,paidTo:" ",paymentMethod:"transfer",status:"paid",approvedBy:" ",notes:"   2024",createdBy:" "},{id:2,date:"2024-03-10",category:"software",description:"  IDE  ",amount:15e3,paidTo:"JetBrains, GitHub",paymentMethod:"card",status:"approved",approvedBy:" ",notes:"   ",createdBy:" "},{id:3,date:"2024-03-08",category:"equipment",description:"   ",amount:85e3,paidTo:"DNS",paymentMethod:"invoice",status:"paid",approvedBy:" ",notes:'MacBook Pro 14"',createdBy:" "},{id:4,date:"2024-03-05",category:"marketing",description:" ",amount:25e3,paidTo:".",paymentMethod:"card",status:"pending",notes:"   ",createdBy:" "},{id:5,date:"2024-03-01",category:"office",description:" ",amount:12e4,paidTo:'- "-"',paymentMethod:"transfer",status:"paid",approvedBy:" ",notes:"   2024",createdBy:" "},{id:6,date:"2024-02-28",category:"travel",description:"  -",amount:35e3,paidTo:", ",paymentMethod:"card",status:"approved",approvedBy:" ",notes:"  ",createdBy:" "}])}catch(te){console.error("Error fetching expenses:",te)}finally{i(!1)}},T=()=>{if(!S.description||!S.paidTo||S.amount<=0){alert("   ");return}const te={id:Date.now(),date:S.date,category:S.category,description:S.description,amount:S.amount,paidTo:S.paidTo,paymentMethod:S.paymentMethod,status:"pending",notes:S.notes,createdBy:S.createdBy};a([te,...r]),c(!1),k({date:new Date().toISOString().slice(0,10),category:"other",description:"",amount:0,paidTo:"",paymentMethod:"transfer",notes:"",createdBy:" "})},E=te=>{a(r.map(K=>K.id===te?{...K,status:"approved",approvedBy:" "}:K))},z=te=>{confirm(" ?")&&a(r.map(K=>K.id===te?{...K,status:"rejected"}:K))},M=te=>{a(r.map(K=>K.id===te?{...K,status:"paid"}:K))},C=te=>{confirm(" ?")&&a(r.filter(K=>K.id!==te))},A=te=>({salary:"",equipment:"",software:"",marketing:"",office:"",travel:"",consulting:"",other:""})[te]||"",Z=te=>({salary:"",equipment:"",software:"",marketing:"",office:"",travel:"",consulting:"",other:""})[te]||te,I=te=>({pending:"bg-yellow-100 text-yellow-700",approved:"bg-blue-100 text-blue-700",rejected:"bg-red-100 text-red-700",paid:"bg-green-100 text-green-700"})[te]||"bg-gray-100 text-gray-700",V=te=>({pending:" ",approved:"",rejected:"",paid:""})[te]||te,R=te=>({cash:"",card:"",transfer:"",invoice:""})[te]||te,q=r.filter(te=>{const K=u==="all"||te.category===u,$=m==="all"||te.status===m,le=(!p||te.date>=p)&&(!g||te.date<=g);return K&&$&&le}),J=q.reduce((te,K)=>te+K.amount,0),se=Object.entries(q.reduce((te,K)=>(te[K.category]=(te[K.category]||0)+K.amount,te),{})).sort((te,K)=>K[1]-te[1]),Y={pending:q.filter(te=>te.status==="pending").reduce((te,K)=>te+K.amount,0),approved:q.filter(te=>te.status==="approved").reduce((te,K)=>te+K.amount,0),paid:q.filter(te=>te.status==="paid").reduce((te,K)=>te+K.amount,0),rejected:q.filter(te=>te.status==="rejected").reduce((te,K)=>te+K.amount,0)},ee=()=>{const te=[["","","","",""," ","",""].join(","),...q.map(ie=>[ie.date,Z(ie.category),`"${ie.description.replace(/"/g,'""')}"`,ie.amount,`"${ie.paidTo.replace(/"/g,'""')}"`,R(ie.paymentMethod),V(ie.status),ie.createdBy].join(","))].join(`
`),K=new Blob(["\uFEFF"+te],{type:"text/csv;charset=utf-8;"}),$=window.URL.createObjectURL(K),le=document.createElement("a");le.href=$,le.download=`expenses-project-${s}-${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(le),le.click(),document.body.removeChild(le),window.URL.revokeObjectURL($)};return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:" ..."})]})}):e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-600 to-pink-600 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Sa,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:" "}),e.jsxs("p",{className:"text-red-100 text-sm",children:[" #",s]})]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(Ae,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 border-b bg-gray-50",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-4 mb-4",children:[e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ge,{className:"w-8 h-8 text-gray-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:" "}),e.jsxs("p",{className:"text-xl font-bold text-gray-900",children:[J.toLocaleString("ru-RU")," "]})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 text-2xl",children:""}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:" "}),e.jsxs("p",{className:"text-xl font-bold text-yellow-700",children:[Y.pending.toLocaleString("ru-RU")," "]})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 text-2xl",children:""}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:""}),e.jsxs("p",{className:"text-xl font-bold text-blue-700",children:[Y.approved.toLocaleString("ru-RU")," "]})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 text-2xl",children:""}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:""}),e.jsxs("p",{className:"text-xl font-bold text-green-700",children:[Y.paid.toLocaleString("ru-RU")," "]})]})]})}),e.jsxs("button",{onClick:()=>c(!0),className:"bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center justify-center gap-2 font-medium",children:[e.jsx(Ve,{className:"w-5 h-5"})," "]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-4",children:[e.jsxs("select",{value:u,onChange:te=>h(te.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),e.jsx("option",{value:"salary",children:""}),e.jsx("option",{value:"equipment",children:""}),e.jsx("option",{value:"software",children:""}),e.jsx("option",{value:"marketing",children:""}),e.jsx("option",{value:"office",children:""}),e.jsx("option",{value:"travel",children:""}),e.jsx("option",{value:"consulting",children:""}),e.jsx("option",{value:"other",children:""})]}),e.jsxs("select",{value:m,onChange:te=>f(te.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),e.jsx("option",{value:"pending",children:" "}),e.jsx("option",{value:"approved",children:""}),e.jsx("option",{value:"paid",children:""}),e.jsx("option",{value:"rejected",children:""})]}),e.jsx("input",{type:"date",value:p,onChange:te=>j(te.target.value),placeholder:"",className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"}),e.jsx("input",{type:"date",value:g,onChange:te=>v(te.target.value),placeholder:"",className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>N(y==="list"?"chart":"list"),className:"flex-1 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(yp,{className:"w-5 h-5"}),y==="list"?"":""]}),e.jsxs("button",{onClick:ee,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(wt,{className:"w-5 h-5"}),""]})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:y==="list"?e.jsxs("div",{className:"space-y-4",children:[q.map(te=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:"text-4xl",children:A(te.category)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:te.description}),e.jsx("span",{className:`text-xs px-3 py-1 rounded-full ${I(te.status)}`,children:V(te.status)})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(di,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:Z(te.category)}),e.jsx("p",{className:"text-xs text-gray-500",children:R(te.paymentMethod)})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900",children:te.paidTo}),e.jsx("p",{className:"text-xs text-gray-500",children:""})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pt,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900",children:new Date(te.date).toLocaleDateString("ru-RU")}),e.jsxs("p",{className:"text-xs text-gray-500",children:[": ",te.createdBy]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"w-4 h-4 text-gray-400"}),e.jsx("div",{children:e.jsxs("p",{className:"text-2xl font-bold text-red-600",children:[te.amount.toLocaleString("ru-RU")," "]})})]})]}),te.notes&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsx("p",{className:"text-sm text-gray-600",children:te.notes})}),te.approvedBy&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsxs("p",{className:"text-sm text-green-600",children:[" : ",te.approvedBy]})})]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[te.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>E(te.id),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"",children:""}),e.jsx("button",{onClick:()=>z(te.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"",children:""})]}),te.status==="approved"&&e.jsx("button",{onClick:()=>M(te.id),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"  ",children:""}),e.jsx("button",{onClick:()=>C(te.id),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"",children:e.jsx(Xe,{className:"w-5 h-5"})})]})]})},te.id)),q.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Sa,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"  "})]})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),e.jsx("div",{className:"space-y-3",children:se.map(([te,K])=>{const $=K/J*100;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[A(te)," ",Z(te)]}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[K.toLocaleString("ru-RU"),"  (",$.toFixed(1),"%)"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-red-600 h-3 rounded-full transition-all",style:{width:`${$}%`}})})]},te)})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),e.jsx("div",{className:"space-y-4",children:Object.entries(Y).map(([te,K])=>{const $=J>0?K/J*100:0,le=q.filter(ie=>ie.status===te).length;return e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${I(te)}`,children:V(te)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[le," "]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-xl font-bold text-gray-900",children:[K.toLocaleString("ru-RU")," "]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[$.toFixed(1),"%"]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all ${te==="paid"?"bg-green-600":te==="approved"?"bg-blue-600":te==="pending"?"bg-yellow-600":"bg-red-600"}`,style:{width:`${$}%`}})})]},te)})})]})]})})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-600 to-pink-600 text-white p-6 flex justify-between items-center",children:[e.jsx("h3",{className:"text-2xl font-bold",children:" "}),e.jsx("button",{onClick:()=>c(!1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(Ae,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"date",value:S.date,onChange:te=>k({...S,date:te.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsxs("select",{value:S.category,onChange:te=>k({...S,category:te.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[e.jsx("option",{value:"salary",children:""}),e.jsx("option",{value:"equipment",children:""}),e.jsx("option",{value:"software",children:""}),e.jsx("option",{value:"marketing",children:""}),e.jsx("option",{value:"office",children:""}),e.jsx("option",{value:"travel",children:""}),e.jsx("option",{value:"consulting",children:""}),e.jsx("option",{value:"other",children:""})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:S.description,onChange:te=>k({...S,description:te.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" () *"}),e.jsx("input",{type:"number",value:S.amount,onChange:te=>k({...S,amount:parseFloat(te.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),e.jsxs("select",{value:S.paymentMethod,onChange:te=>k({...S,paymentMethod:te.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[e.jsx("option",{value:"cash",children:""}),e.jsx("option",{value:"card",children:""}),e.jsx("option",{value:"transfer",children:""}),e.jsx("option",{value:"invoice",children:""})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:S.paidTo,onChange:te=>k({...S,paidTo:te.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:S.notes,onChange:te=>k({...S,notes:te.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]})]})}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>c(!1),className:"px-6 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:""}),e.jsx("button",{onClick:T,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:""})]})]})})]})},QW=({projectId:s,onClose:t})=>{const[r,a]=w.useState([]),[n,i]=w.useState(!0),[o,c]=w.useState(!1),[u,h]=w.useState(null),[m,f]=w.useState("all"),[p,j]=w.useState("all"),[g,v]=w.useState("all"),[y,N]=w.useState(""),[S,k]=w.useState({clientName:"",clientEmail:"",date:new Date().toISOString().slice(0,10),rating:5,category:"overall",title:"",message:"",tags:[]}),[_,T]=w.useState("");w.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),w.useEffect(()=>{E()},[s]);const E=async()=>{i(!0);try{const $=await fetch(`http://147.45.215.199:8001/api/projects/${s}/feedback`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if($.ok){const le=await $.json();a(le)}else a([{id:1,clientName:" ",clientEmail:"ivan@example.com",date:"2024-03-15",rating:5,category:"overall",title:"  !",message:"      .     .           .",sentiment:"positive",status:"responded",response:"   !        .",respondedBy:" ",respondedAt:"2024-03-16",tags:["",""]},{id:2,clientName:" ",clientEmail:"olga@example.com",date:"2024-03-10",rating:4,category:"communication",title:" ",message:"   ,    .           .",sentiment:"positive",status:"reviewed",tags:[""]},{id:3,clientName:" ",clientEmail:"dmitry@example.com",date:"2024-03-05",rating:3,category:"timeline",title:" ",message:"   2 .      ,      .",sentiment:"neutral",status:"responded",response:"   .      .       .",respondedBy:" ",respondedAt:"2024-03-06",tags:["",""]},{id:4,clientName:" ",clientEmail:"anna@example.com",date:"2024-03-01",rating:5,category:"quality",title:" ",message:"  !   ,   .     .",sentiment:"positive",status:"responded",response:" ! ,     .",respondedBy:" ",respondedAt:"2024-03-02",tags:["",""]},{id:5,clientName:" ",clientEmail:"sergey@example.com",date:"2024-02-28",rating:2,category:"budget",title:" ",message:"       30%.        .",sentiment:"negative",status:"new",tags:[""]}])}catch($){console.error("Error fetching feedbacks:",$)}finally{i(!1)}},z=$=>$>=4?"positive":$>=3?"neutral":"negative",M=()=>{if(!S.clientName||!S.title||!S.message){alert("  ");return}const $={id:Date.now(),clientName:S.clientName,clientEmail:S.clientEmail,date:S.date,rating:S.rating,category:S.category,title:S.title,message:S.message,sentiment:z(S.rating),status:"new",tags:S.tags};a([$,...r]),c(!1),k({clientName:"",clientEmail:"",date:new Date().toISOString().slice(0,10),rating:5,category:"overall",title:"",message:"",tags:[]})},C=()=>{_&&!S.tags.includes(_)&&(k({...S,tags:[...S.tags,_]}),T(""))},A=$=>{k({...S,tags:S.tags.filter(le=>le!==$)})},Z=()=>{!u||!y||(a(r.map($=>$.id===u.id?{...$,status:"responded",response:y,respondedBy:" ",respondedAt:new Date().toISOString().slice(0,10)}:$)),N(""),h(null))},I=$=>{a(r.map(le=>le.id===$?{...le,status:"reviewed"}:le))},V=$=>({quality:"",communication:"",timeline:"",budget:"",support:"",overall:""})[$]||"",R=$=>({quality:"",communication:"",timeline:"",budget:"",support:"",overall:" "})[$]||$,q=$=>({positive:"text-green-600 bg-green-100",neutral:"text-yellow-600 bg-yellow-100",negative:"text-red-600 bg-red-100"})[$]||"text-gray-600 bg-gray-100",J=$=>({positive:e.jsx(Bh,{className:"w-5 h-5"}),neutral:e.jsx(Es,{className:"w-5 h-5"}),negative:e.jsx(V4,{className:"w-5 h-5"})})[$]||e.jsx(Es,{className:"w-5 h-5"}),se=$=>({new:"bg-blue-100 text-blue-700",reviewed:"bg-purple-100 text-purple-700",responded:"bg-green-100 text-green-700",archived:"bg-gray-100 text-gray-700"})[$]||"bg-gray-100 text-gray-700",Y=$=>({new:"",reviewed:"",responded:"",archived:""})[$]||$,ee=r.filter($=>{const le=m==="all"||$.category===m,ie=p==="all"||$.sentiment===p,oe=g==="all"||$.status===g;return le&&ie&&oe}),te=r.length>0?r.reduce(($,le)=>$+le.rating,0)/r.length:0,K={positive:r.filter($=>$.sentiment==="positive").length,neutral:r.filter($=>$.sentiment==="neutral").length,negative:r.filter($=>$.sentiment==="negative").length};return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:" ..."})]})}):e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Es,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:" "}),e.jsxs("p",{className:"text-purple-100 text-sm",children:[" #",s]})]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(Ae,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 border-b bg-gray-50",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-4 mb-4",children:[e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ps,{className:"w-8 h-8 text-yellow-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[te.toFixed(1)," / 5"]})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Bh,{className:"w-8 h-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:""}),e.jsx("p",{className:"text-2xl font-bold text-green-700",children:K.positive})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Es,{className:"w-8 h-8 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:""}),e.jsx("p",{className:"text-2xl font-bold text-yellow-700",children:K.neutral})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(V4,{className:"w-8 h-8 text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:""}),e.jsx("p",{className:"text-2xl font-bold text-red-700",children:K.negative})]})]})}),e.jsxs("button",{onClick:()=>c(!0),className:"bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center gap-2 font-medium",children:[e.jsx(Ve,{className:"w-5 h-5"})," "]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs("select",{value:m,onChange:$=>f($.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),e.jsx("option",{value:"quality",children:""}),e.jsx("option",{value:"communication",children:""}),e.jsx("option",{value:"timeline",children:""}),e.jsx("option",{value:"budget",children:""}),e.jsx("option",{value:"support",children:""}),e.jsx("option",{value:"overall",children:" "})]}),e.jsxs("select",{value:p,onChange:$=>j($.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),e.jsx("option",{value:"positive",children:""}),e.jsx("option",{value:"neutral",children:""}),e.jsx("option",{value:"negative",children:""})]}),e.jsxs("select",{value:g,onChange:$=>v($.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:" "}),e.jsx("option",{value:"new",children:""}),e.jsx("option",{value:"reviewed",children:""}),e.jsx("option",{value:"responded",children:""}),e.jsx("option",{value:"archived",children:""})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsx("div",{className:"space-y-4",children:ee.map($=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${q($.sentiment)}`,children:J($.sentiment)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:$.title}),e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(le=>e.jsx(Ps,{className:`w-4 h-4 ${le<=$.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},le))}),e.jsx("span",{className:"text-2xl",children:V($.category)}),e.jsx("span",{className:"text-gray-600",children:R($.category)})]})]}),e.jsx("span",{className:`text-xs px-3 py-1 rounded-full ${se($.status)}`,children:Y($.status)})]}),e.jsx("p",{className:"text-gray-700 mb-3",children:$.message}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"w-4 h-4"}),e.jsx("span",{children:$.clientName})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pt,{className:"w-4 h-4"}),e.jsx("span",{children:new Date($.date).toLocaleDateString("ru-RU")})]})]}),$.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:$.tags.map((le,ie)=>e.jsx("span",{className:"text-xs px-2 py-1 bg-purple-100 text-purple-700 rounded-full",children:le},ie))}),$.response&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mt-3",children:[e.jsx("p",{className:"text-sm font-medium text-green-800 mb-2",children:":"}),e.jsx("p",{className:"text-sm text-green-700 mb-2",children:$.response}),e.jsxs("p",{className:"text-xs text-green-600",children:[$.respondedBy,"  ",new Date($.respondedAt).toLocaleDateString("ru-RU")]})]}),e.jsx("div",{className:"flex gap-2 mt-4",children:$.status==="new"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>h($),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2",children:[e.jsx(Qs,{className:"w-4 h-4"}),""]}),e.jsx("button",{onClick:()=>I($.id),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:" "})]})})]})]})},$.id))}),ee.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Es,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"  "})]})]})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white p-6 flex justify-between items-center",children:[e.jsx("h3",{className:"text-2xl font-bold",children:" "}),e.jsx("button",{onClick:()=>c(!1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(Ae,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:S.clientName,onChange:$=>k({...S,clientName:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:S.clientEmail,onChange:$=>k({...S,clientEmail:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("input",{type:"date",value:S.date,onChange:$=>k({...S,date:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("select",{value:S.category,onChange:$=>k({...S,category:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"overall",children:" "}),e.jsx("option",{value:"quality",children:""}),e.jsx("option",{value:"communication",children:""}),e.jsx("option",{value:"timeline",children:""}),e.jsx("option",{value:"budget",children:""}),e.jsx("option",{value:"support",children:""})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map($=>e.jsx("button",{type:"button",onClick:()=>k({...S,rating:$}),className:"transition-transform hover:scale-110",children:e.jsx(Ps,{className:`w-10 h-10 ${$<=S.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},$))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:S.title,onChange:$=>k({...S,title:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("textarea",{value:S.message,onChange:$=>k({...S,message:$.target.value}),rows:5,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("div",{className:"flex gap-2 mb-2",children:e.jsx("input",{type:"text",value:_,onChange:$=>T($.target.value),onKeyPress:$=>$.key==="Enter"&&C(),placeholder:"  (Enter)",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:S.tags.map(($,le)=>e.jsxs("span",{className:"inline-flex items-center gap-1 text-sm px-3 py-1 bg-purple-100 text-purple-700 rounded-full",children:[$,e.jsx("button",{onClick:()=>A($),className:"hover:text-purple-900",children:e.jsx(Ae,{className:"w-3 h-3"})})]},le))})]})]})}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>c(!1),className:"px-6 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:""}),e.jsx("button",{onClick:M,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:""})]})]})}),u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white p-6 flex justify-between items-center",children:[e.jsx("h3",{className:"text-2xl font-bold",children:"  "}),e.jsx("button",{onClick:()=>h(null),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(Ae,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:u.title}),e.jsx("p",{className:"text-gray-700 mb-2",children:u.message}),e.jsxs("p",{className:"text-sm text-gray-500",children:[" ",u.clientName]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),e.jsx("textarea",{value:y,onChange:$=>N($.target.value),rows:5,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"  ..."})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>h(null),className:"px-6 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:""}),e.jsxs("button",{onClick:Z,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2",children:[e.jsx(Qs,{className:"w-5 h-5"})," "]})]})]})})]})},JW=({projectId:s,onClose:t})=>{const[r,a]=w.useState(null),[n,i]=w.useState(!0),[o,c]=w.useState(new Date(Date.now()-2160*60*60*1e3).toISOString().slice(0,10)),[u,h]=w.useState(new Date().toISOString().slice(0,10));w.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),w.useEffect(()=>{m()},[s,o,u]);const m=async()=>{i(!0);try{const j=await fetch(`http://147.45.215.199:8001/api/projects/${s}/analytics?from=${o}&to=${u}`,{headers:{Authorization:"Basic "+btoa("admin:qwerty123")}});if(j.ok){const g=await j.json();a(g)}else a({overview:{totalRevenue:125e4,totalExpenses:78e4,profit:47e4,profitMargin:37.6,totalHours:2340,hourlyRate:534,teamSize:8,completedTasks:156,totalTasks:200,completionRate:78},timeline:[{month:"2024-01",revenue:35e4,expenses:22e4,profit:13e4,hours:720},{month:"2024-02",revenue:42e4,expenses:26e4,profit:16e4,hours:780},{month:"2024-03",revenue:48e4,expenses:3e5,profit:18e4,hours:840}],tasksByStatus:[{status:"",count:156,percentage:78},{status:" ",count:32,percentage:16},{status:"",count:12,percentage:6}],tasksByPriority:[{priority:"",count:15},{priority:"",count:45},{priority:"",count:98},{priority:"",count:42}],teamPerformance:[{memberId:1,memberName:" ",tasksCompleted:42,hoursWorked:680,efficiency:95},{memberId:2,memberName:" ",tasksCompleted:38,hoursWorked:620,efficiency:92},{memberId:3,memberName:" ",tasksCompleted:35,hoursWorked:580,efficiency:88},{memberId:4,memberName:" ",tasksCompleted:29,hoursWorked:460,efficiency:85}],expensesByCategory:[{category:"",amount:45e4,percentage:57.7},{category:"",amount:15e4,percentage:19.2},{category:"",amount:85e3,percentage:10.9},{category:"",amount:6e4,percentage:7.7},{category:"",amount:35e3,percentage:4.5}],clientSatisfaction:[{rating:5,count:12},{rating:4,count:8},{rating:3,count:3},{rating:2,count:1},{rating:1,count:0}]})}catch(j){console.error("Error fetching analytics:",j)}finally{i(!1)}},f=()=>{if(!r)return;const j=[["  "],[""],[" "],["",""],["",`${r.overview.totalRevenue.toLocaleString("ru-RU")} `],["",`${r.overview.totalExpenses.toLocaleString("ru-RU")} `],["",`${r.overview.profit.toLocaleString("ru-RU")} `],["",`${r.overview.profitMargin}%`],[" ",r.overview.totalHours],[" ",`${r.overview.hourlyRate.toLocaleString("ru-RU")} `],[""],["  "],["","",""],...r.tasksByStatus.map(N=>[N.status,N.count,`${N.percentage}%`]),[""],[" "],[""," "," ",""],...r.teamPerformance.map(N=>[N.memberName,N.tasksCompleted,N.hoursWorked,`${N.efficiency}%`])].map(N=>N.join(",")).join(`
`),g=new Blob(["\uFEFF"+j],{type:"text/csv;charset=utf-8;"}),v=window.URL.createObjectURL(g),y=document.createElement("a");y.href=v,y.download=`analytics-project-${s}-${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(y),y.click(),document.body.removeChild(y),window.URL.revokeObjectURL(v)};if(n||!r)return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:" ..."})]})});const p=Math.max(...r.timeline.map(j=>j.revenue));return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 text-white p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Fr,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:" "}),e.jsxs("p",{className:"text-blue-100 text-sm",children:[" #",s]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:f,className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors flex items-center gap-2",children:[e.jsx(wt,{className:"w-5 h-5"}),""]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(Ae,{className:"w-6 h-6"})})]})]}),e.jsx("div",{className:"p-6 border-b bg-gray-50",children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"date",value:o,onChange:j=>c(j.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("input",{type:"date",value:u,onChange:j=>h(j.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:" "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx(Ge,{className:"w-10 h-10 opacity-80"}),e.jsx(ct,{className:"w-6 h-6"})]}),e.jsx("p",{className:"text-sm opacity-90 mb-1",children:""}),e.jsxs("p",{className:"text-3xl font-bold",children:[r.overview.totalRevenue.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-red-600 text-white rounded-lg p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx(Sa,{className:"w-10 h-10 opacity-80"})}),e.jsx("p",{className:"text-sm opacity-90 mb-1",children:""}),e.jsxs("p",{className:"text-3xl font-bold",children:[r.overview.totalExpenses.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-lg p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx(Ar,{className:"w-10 h-10 opacity-80"})}),e.jsx("p",{className:"text-sm opacity-90 mb-1",children:""}),e.jsxs("p",{className:"text-3xl font-bold",children:[r.overview.profit.toLocaleString("ru-RU")," "]}),e.jsxs("p",{className:"text-xs opacity-80 mt-1",children:[": ",r.overview.profitMargin,"%"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-lg p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx(Ue,{className:"w-10 h-10 opacity-80"})}),e.jsx("p",{className:"text-sm opacity-90 mb-1",children:" "}),e.jsx("p",{className:"text-3xl font-bold",children:r.overview.totalHours}),e.jsxs("p",{className:"text-xs opacity-80 mt-1",children:[": ",r.overview.hourlyRate," /"]})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),e.jsx("div",{className:"space-y-4",children:r.timeline.map((j,g)=>{const v=j.revenue/p*100,y=j.expenses/p*100,N=j.profit/p*100;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:new Date(j.month+"-01").toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:"text-green-600",children:[" ",j.revenue.toLocaleString("ru-RU")]}),e.jsxs("span",{className:"text-red-600",children:[" ",j.expenses.toLocaleString("ru-RU")]}),e.jsxs("span",{className:"text-blue-600",children:[" ",j.profit.toLocaleString("ru-RU")]})]})]}),e.jsxs("div",{className:"relative h-8 bg-gray-100 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 h-8 bg-green-500 opacity-30",style:{width:`${v}%`}}),e.jsx("div",{className:"absolute top-0 left-0 h-8 bg-red-500 opacity-30",style:{width:`${y}%`}}),e.jsx("div",{className:"absolute top-0 left-0 h-8 bg-blue-500 opacity-50",style:{width:`${N}%`}})]})]},g)})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),e.jsx("div",{className:"space-y-3",children:r.tasksByStatus.map((j,g)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:j.status}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[j.count," (",j.percentage,"%)"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full transition-all ${j.status===""?"bg-green-600":j.status===" "?"bg-blue-600":"bg-gray-400"}`,style:{width:`${j.percentage}%`}})})]},g))})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),e.jsx("div",{className:"space-y-3",children:r.tasksByPriority.map((j,g)=>{const v=r.tasksByPriority.reduce((N,S)=>N+S.count,0),y=j.count/v*100;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:j.priority}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[j.count," (",y.toFixed(1),"%)"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full transition-all ${j.priority===""?"bg-red-600":j.priority===""?"bg-orange-600":j.priority===""?"bg-yellow-600":"bg-gray-400"}`,style:{width:`${y}%`}})})]},g)})})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:" "}),e.jsx("div",{className:"space-y-4",children:r.teamPerformance.map(j=>e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold",children:j.memberName.charAt(0)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900",children:j.memberName}),e.jsxs("p",{className:"text-sm text-gray-500",children:[j.tasksCompleted,"   ",j.hoursWorked," "]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[j.efficiency,"%"]}),e.jsx("p",{className:"text-xs text-gray-500",children:""})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${j.efficiency}%`}})})]},j.memberId))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),e.jsx("div",{className:"space-y-3",children:r.expensesByCategory.map((j,g)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:j.category}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[j.amount.toLocaleString("ru-RU"),"  (",j.percentage,"%)"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-red-600 h-3 rounded-full transition-all",style:{width:`${j.percentage}%`}})})]},g))})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:" "}),e.jsx("div",{className:"space-y-3",children:r.clientSatisfaction.sort((j,g)=>g.rating-j.rating).map((j,g)=>{const v=r.clientSatisfaction.reduce((N,S)=>N+S.count,0),y=v>0?j.count/v*100:0;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[j.rating," "]})}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[j.count," (",y.toFixed(1),"%)"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-yellow-500 h-3 rounded-full transition-all",style:{width:`${y}%`}})})]},g)})}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:" "}),e.jsxs("span",{className:"text-2xl font-bold text-yellow-600",children:[(r.clientSatisfaction.reduce((j,g)=>j+g.rating*g.count,0)/r.clientSatisfaction.reduce((j,g)=>j+g.count,0)).toFixed(1)," ","/ 5"]})]})})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4 text-blue-900",children:" "}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-700 mb-1",children:""}),e.jsxs("p",{className:"text-3xl font-bold text-blue-900",children:[r.overview.profitMargin,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-700 mb-1",children:""}),e.jsxs("p",{className:"text-3xl font-bold text-blue-900",children:[r.overview.completionRate,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-700 mb-1",children:""}),e.jsx("p",{className:"text-3xl font-bold text-blue-900",children:r.overview.teamSize})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-700 mb-1",children:" "}),e.jsxs("p",{className:"text-3xl font-bold text-blue-900",children:[r.overview.completedTasks,"/",r.overview.totalTasks]})]})]})]})]})})]})})},eY=(s,t=!0)=>{w.useEffect(()=>{if(!t)return;let r=[];if(Array.isArray(s))r=s;else{const n=s;n.onNew&&r.push({key:"n",ctrlKey:!0,action:n.onNew,description:"New"}),n.onRefresh&&r.push({key:"r",action:n.onRefresh,description:"Refresh"}),n.onSearch&&(r.push({key:"f",ctrlKey:!0,action:n.onSearch,description:"Search"}),r.push({key:"/",action:n.onSearch,description:"Search"})),n.onHelp&&(r.push({key:"?",action:n.onHelp,description:"Help"}),r.push({key:"h",action:n.onHelp,description:"Help"})),n.onEscape&&r.push({key:"Escape",action:n.onEscape,description:"Close"}),n.onSave&&r.push({key:"s",ctrlKey:!0,action:n.onSave,description:"Save"}),n.onClose&&r.push({key:"Escape",action:n.onClose,description:"Close"})}const a=n=>{const i=n.target;if(!(i.tagName==="INPUT"||i.tagName==="TEXTAREA"||i.isContentEditable))for(const o of r){const c=n.key.toLowerCase()===o.key.toLowerCase(),u=o.ctrlKey?n.ctrlKey:!n.ctrlKey,h=o.shiftKey?n.shiftKey:!n.shiftKey,m=o.altKey?n.altKey:!n.altKey,f=o.metaKey?n.metaKey:!n.metaKey;if(c&&u&&h&&m&&f){n.preventDefault(),o.action();break}}};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[s,t])},Z7=(s,t="projects")=>{const r=["ID","","","","",""," ","","","","",""],a=s.map(o=>{const c=(o.project_cost||0)-(o.paid_total||0),u=(o.project_cost||0)-(o.executor_cost||0);return[o.id,`"${(o.name||"").replace(/"/g,'""')}"`,o.status||"",o.project_cost||0,o.paid_total||0,c,o.executor_cost||0,u,o.assigned_to?.username||o.assigned_to?.first_name||"",o.user?.first_name||o.user?.telegram_username||"",o.deadline||"",o.created_at||""]}),n=[r.join(","),...a.map(o=>o.join(","))].join(`
`),i=new Blob(["\uFEFF"+n],{type:"text/csv;charset=utf-8;"});m1(i,`${t}.csv`)},tY=(s,t="projects")=>{Z7(s,t)},sY=(s,t="projects")=>{const r=JSON.stringify(s,null,2),a=new Blob([r],{type:"application/json"});m1(a,`${t}.json`)},rY=(s,t="projects")=>{let r=`  
`;r+=` : ${new Date().toLocaleString("ru-RU")}
`,r+=` : ${s.length}

`,r+=`${"=".repeat(80)}

`,s.forEach((u,h)=>{const m=(u.project_cost||0)-(u.paid_total||0),f=(u.project_cost||0)-(u.executor_cost||0);if(r+=`${h+1}. ${u.name}
`,r+=`   ID: ${u.id}
`,r+=`   : ${u.status||" "}
`,r+=`   : ${(u.project_cost||0).toLocaleString("ru-RU")} 
`,r+=`   : ${(u.paid_total||0).toLocaleString("ru-RU")} 
`,r+=`   : ${m.toLocaleString("ru-RU")} 
`,r+=`    : ${(u.executor_cost||0).toLocaleString("ru-RU")} 
`,r+=`   : ${f.toLocaleString("ru-RU")} 
`,u.assigned_to&&(r+=`   : ${u.assigned_to.username||u.assigned_to.first_name}
`),u.user&&(r+=`   : ${u.user.first_name||u.user.telegram_username}
`),u.deadline&&(r+=`   : ${new Date(u.deadline).toLocaleDateString("ru-RU")}
`),u.description){const p=u.description.length>100?u.description.substring(0,100)+"...":u.description;r+=`   : ${p}
`}r+=`
${"-".repeat(80)}

`});const a=s.reduce((u,h)=>u+(h.project_cost||0),0),n=s.reduce((u,h)=>u+(h.paid_total||0),0),i=s.reduce((u,h)=>u+(h.executor_cost||0),0),o=a-i;r+=`${"=".repeat(80)}
`,r+=` 
`,r+=`${"=".repeat(80)}

`,r+=`  : ${a.toLocaleString("ru-RU")} 
`,r+=` : ${n.toLocaleString("ru-RU")} 
`,r+=`   : ${i.toLocaleString("ru-RU")} 
`,r+=` : ${o.toLocaleString("ru-RU")} 
`;const c=new Blob([r],{type:"text/plain;charset=utf-8"});m1(c,`${t}.txt`)},m1=(s,t)=>{const r=window.URL.createObjectURL(s),a=document.createElement("a");a.href=r,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(r)},Q7=(s,t,r="projects")=>{switch(t){case"csv":Z7(s,r);break;case"excel":tY(s,r);break;case"json":sY(s,r);break;case"pdf":rY(s,r);break;default:console.error(`Unknown export format: ${t}`)}},aY=(s,t="")=>{const r=window.open("","_blank");if(!r){alert("    .   .");return}const a=s.reduce((u,h)=>u+(h.project_cost||0),0),n=s.reduce((u,h)=>u+(h.paid_total||0),0),i=s.reduce((u,h)=>u+(h.executor_cost||0),0),o=a-i,c=`
    <!DOCTYPE html>
    <html lang="ru">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>${t}</title>
      <style>
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }

        body {
          font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
          padding: 40px;
          color: #333;
          background: white;
        }

        .header {
          text-align: center;
          margin-bottom: 40px;
          border-bottom: 3px solid #4F46E5;
          padding-bottom: 20px;
        }

        .header h1 {
          font-size: 32px;
          color: #1F2937;
          margin-bottom: 10px;
        }

        .header .date {
          font-size: 14px;
          color: #6B7280;
        }

        .summary {
          display: grid;
          grid-template-columns: repeat(4, 1fr);
          gap: 20px;
          margin-bottom: 40px;
        }

        .summary-card {
          padding: 15px;
          border-radius: 8px;
          border: 2px solid #E5E7EB;
        }

        .summary-card.total {
          border-color: #3B82F6;
          background: #EFF6FF;
        }

        .summary-card.paid {
          border-color: #10B981;
          background: #ECFDF5;
        }

        .summary-card.executor {
          border-color: #F59E0B;
          background: #FFFBEB;
        }

        .summary-card.profit {
          border-color: #8B5CF6;
          background: #F5F3FF;
        }

        .summary-card .label {
          font-size: 12px;
          font-weight: 600;
          text-transform: uppercase;
          color: #6B7280;
          margin-bottom: 5px;
        }

        .summary-card .value {
          font-size: 24px;
          font-weight: bold;
        }

        .summary-card.total .value { color: #3B82F6; }
        .summary-card.paid .value { color: #10B981; }
        .summary-card.executor .value { color: #F59E0B; }
        .summary-card.profit .value { color: #8B5CF6; }

        .project {
          margin-bottom: 30px;
          padding: 20px;
          border: 1px solid #E5E7EB;
          border-radius: 8px;
          page-break-inside: avoid;
        }

        .project-header {
          display: flex;
          justify-content: space-between;
          align-items: start;
          margin-bottom: 15px;
          padding-bottom: 10px;
          border-bottom: 2px solid #F3F4F6;
        }

        .project-title {
          font-size: 18px;
          font-weight: bold;
          color: #1F2937;
        }

        .project-id {
          font-size: 12px;
          color: #6B7280;
        }

        .project-status {
          padding: 4px 12px;
          border-radius: 12px;
          font-size: 12px;
          font-weight: 600;
          background: #F3F4F6;
          color: #374151;
        }

        .project-details {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: 10px;
          margin-bottom: 10px;
        }

        .detail-item {
          font-size: 13px;
        }

        .detail-label {
          font-weight: 600;
          color: #6B7280;
        }

        .detail-value {
          color: #1F2937;
        }

        .project-description {
          margin-top: 10px;
          padding-top: 10px;
          border-top: 1px solid #E5E7EB;
          font-size: 13px;
          color: #4B5563;
          line-height: 1.6;
        }

        .footer {
          margin-top: 40px;
          padding-top: 20px;
          border-top: 3px solid #4F46E5;
          text-align: center;
          font-size: 12px;
          color: #6B7280;
        }

        @media print {
          body {
            padding: 20px;
          }

          .project {
            page-break-inside: avoid;
          }
        }
      </style>
    </head>
    <body>
      <div class="header">
        <h1>${t}</h1>
        <div class="date"> : ${new Date().toLocaleString("ru-RU")}</div>
        <div class="date"> : ${s.length}</div>
      </div>

      <div class="summary">
        <div class="summary-card total">
          <div class="label"> </div>
          <div class="value">${a.toLocaleString("ru-RU")} </div>
        </div>
        <div class="summary-card paid">
          <div class="label"></div>
          <div class="value">${n.toLocaleString("ru-RU")} </div>
        </div>
        <div class="summary-card executor">
          <div class="label"></div>
          <div class="value">${i.toLocaleString("ru-RU")} </div>
        </div>
        <div class="summary-card profit">
          <div class="label"></div>
          <div class="value">${o.toLocaleString("ru-RU")} </div>
        </div>
      </div>

      ${s.map((u,h)=>{const m=(u.project_cost||0)-(u.paid_total||0);(u.executor_cost||0)-(u.executor_paid_total||0);const f=(u.project_cost||0)-(u.executor_cost||0);return`
            <div class="project">
              <div class="project-header">
                <div>
                  <div class="project-title">${h+1}. ${u.name||" "}</div>
                  <div class="project-id">ID: ${u.id}</div>
                </div>
                ${u.status?`<div class="project-status">${u.status}</div>`:""}
              </div>

              <div class="project-details">
                <div class="detail-item">
                  <span class="detail-label">:</span>
                  <span class="detail-value">${(u.project_cost||0).toLocaleString("ru-RU")} </span>
                </div>
                <div class="detail-item">
                  <span class="detail-label">:</span>
                  <span class="detail-value">${(u.paid_total||0).toLocaleString("ru-RU")} </span>
                </div>
                <div class="detail-item">
                  <span class="detail-label">:</span>
                  <span class="detail-value">${m.toLocaleString("ru-RU")} </span>
                </div>
                <div class="detail-item">
                  <span class="detail-label">:</span>
                  <span class="detail-value">${f.toLocaleString("ru-RU")} </span>
                </div>

                ${u.executor_cost?`
                <div class="detail-item">
                  <span class="detail-label">:</span>
                  <span class="detail-value">${(u.executor_cost||0).toLocaleString("ru-RU")} </span>
                </div>
                <div class="detail-item">
                  <span class="detail-label">:</span>
                  <span class="detail-value">${(u.executor_paid_total||0).toLocaleString("ru-RU")} </span>
                </div>
                `:""}

                ${u.assigned_to?`
                <div class="detail-item">
                  <span class="detail-label">:</span>
                  <span class="detail-value">${u.assigned_to.username||u.assigned_to.first_name}</span>
                </div>
                `:""}

                ${u.user?`
                <div class="detail-item">
                  <span class="detail-label">:</span>
                  <span class="detail-value">${u.user.first_name||u.user.telegram_username||" "}</span>
                </div>
                `:""}

                ${u.deadline?`
                <div class="detail-item">
                  <span class="detail-label">:</span>
                  <span class="detail-value">${new Date(u.deadline).toLocaleDateString("ru-RU")}</span>
                </div>
                `:""}

                ${u.created_at?`
                <div class="detail-item">
                  <span class="detail-label">:</span>
                  <span class="detail-value">${new Date(u.created_at).toLocaleDateString("ru-RU")}</span>
                </div>
                `:""}
              </div>

              ${u.description?`
              <div class="project-description">
                <strong>:</strong><br>
                ${u.description.replace(/\n/g,"<br>")}
              </div>
              `:""}
            </div>
          `}).join("")}

      <div class="footer">
        <p>    CRM</p>
      </div>

      <script>
        window.onload = () => {
          window.print();
        };
      <\/script>
    </body>
    </html>
  `;r.document.write(c),r.document.close()},nY=(s,t,r,a)=>{r({id:s,name:t}),a(!0)},iY=(s,t,r)=>{t(s),r(!0)},lY=(s,t,r,a)=>{r({id:s,name:t}),a(!0)},oY=(s,t,r,a)=>{r({id:s,name:t}),a(!0)},cY=async(s,t)=>{try{const r=Kq(s);await X7(r)?t("    ","success"):t(" ","error")}catch{t(" ","error")}},dY=s=>{aY(s,"")},uY=(s,t,r,a)=>{try{Q7(r,s,t),a(`    ${s.toUpperCase()}`,"success")}catch{a(" ","error")}},hY=async(s,t,r)=>{try{t(` : ${s.length}`,"success"),r()}catch{t(" ","error")}},mY=async(s,t,r)=>{if(window.confirm(` ${s.length} ?`))try{t(` : ${s.length}`,"success"),r()}catch{t(" ","error")}},xY=async(s,t)=>{t("     ","info")},fY=(s,t,r)=>{const a=t.filter(n=>s.includes(n.id));Q7(a,"csv",`selected_projects_${Date.now()}`),r(` : ${s.length}`,"success")},Ok=(s,t)=>{t(s.map(r=>r.id))},Lk=s=>{s([])},pY=(s,t)=>{t(r=>r.filter(a=>a.id!==s))},gY=s=>{s([])},bY=s=>({new:" ",review:" ",accepted:" ",in_progress:"  ",testing:" ",completed:" ",cancelled:" ",on_hold:" "})[s]||s,yY=s=>({new:"bg-blue-100 text-blue-700",review:"bg-orange-100 text-orange-700",accepted:"bg-purple-100 text-purple-700",in_progress:"bg-yellow-100 text-yellow-700",testing:"bg-green-100 text-green-700",completed:"bg-green-200 text-green-800",cancelled:"bg-red-100 text-red-700",on_hold:"bg-gray-100 text-gray-700"})[s]||"bg-gray-100 text-gray-700",vY=s=>({new:"bg-blue-50/30 hover:bg-blue-50",review:"bg-orange-50/30 hover:bg-orange-50",accepted:"bg-purple-50/30 hover:bg-purple-50",in_progress:"bg-yellow-50/30 hover:bg-yellow-50",testing:"bg-green-50/30 hover:bg-green-50",completed:"bg-green-50/50 hover:bg-green-100",cancelled:"bg-red-50/30 hover:bg-red-50",on_hold:"bg-gray-50/30 hover:bg-gray-50"})[s]||"hover:bg-gray-50",jY=s=>({simple:" ",medium:" ",complex:" ",premium:" "})[s]||s,wY=s=>({new:10,review:25,accepted:40,in_progress:60,testing:80,completed:100,cancelled:0,on_hold:0})[s]||0,NY=()=>{const s=Wa(),[t,r]=w.useState([]),[a,n]=w.useState(null),[i,o]=w.useState(!0),[c,u]=w.useState(!1),[h,m]=w.useState("cards"),[f,p]=w.useState(!1),[j,g]=w.useState(!1),[v,y]=w.useState(!1),[N,S]=w.useState(!1),[k,_]=w.useState(!1),[T,E]=w.useState(!1),[z,M]=w.useState(!1),[C,A]=w.useState(null),[Z,I]=w.useState(null),[V,R]=w.useState(null),[q,J]=w.useState(null),[se,Y]=w.useState(null),[ee,te]=w.useState(null),[K,$]=w.useState(!1),[le,ie]=w.useState(null),[oe,de]=w.useState(!1),[U,F]=w.useState(null),[Q,W]=w.useState(!1),[H,re]=w.useState(!1),[he,G]=w.useState(!1),[ce,X]=w.useState(!1),[O,L]=w.useState(null),[B,ne]=w.useState(!1),[me,xe]=w.useState(null),[_e,Ce]=w.useState(!1),[Te,Be]=w.useState(null),[ze,We]=w.useState(!1),[Ds,Ur]=w.useState(null),[br,Ea]=w.useState(!1),[_t,ds]=w.useState(null),[yr,zt]=w.useState(!1),[Cn,Zo]=w.useState(null),[Qo,Tn]=w.useState(!1),[En,ra]=w.useState(null),[hr,Ll]=w.useState([]),[Js,Ci]=w.useState([]),[Hm,$d]=w.useState("none"),[Vt,Ud]=w.useState({executorId:null,clientId:null,colorFilter:"",dateFrom:"",dateTo:"",hasPayment:"",hasOverdue:!1,noExecutor:!1,priceFrom:"",priceTo:""}),[qm,Vd]=w.useState(!1),[Wm,Pl]=w.useState(!1),[Hd,qd]=w.useState(!1),[Jo,Ga]=w.useState(null),[Rs,$s]=w.useState(!1),[An,Wd]=w.useState(null),[qp,Ym]=w.useState(!1),[Gm,Dn]=w.useState(!1),[Yd,Rn]=w.useState(!1),[Mn,Bl]=w.useState(null),[Ti,us]=w.useState(!1),[Gd,Km]=w.useState(null),[On,Ln]=w.useState(!1),[Xm,Zm]=w.useState(null),[Qm,Jm]=w.useState(!1),[Fl,ec]=w.useState(null),[Aa,mr]=w.useState(!1),[Kd,Wp]=w.useState(null),[Xd,Zd]=w.useState(!1),[zl,Yp]=w.useState(null),[vr,tc]=w.useState(!1),[Qd,Jd]=w.useState(null),[Ei,eu]=w.useState(!1),[tu,Ai]=w.useState(null),[Gp,su]=w.useState(!1),[ru,au]=w.useState(null),[Kp,ex]=w.useState(!1),[Il,Da]=w.useState(null),[nu,sc]=w.useState(!1),[Pn,Di]=w.useState(null),[tx,rc]=w.useState(!1),[iu,$l]=w.useState(null),[Ra,ac]=w.useState(!1),[Ri,Ka]=w.useState(null),[lu,Ul]=w.useState(!1),[ou,nc]=w.useState(null),[ic,cu]=w.useState(!1),[Us,Bn]=w.useState(null),[lc,Mi]=w.useState(!1),[sx,du]=w.useState(null),[uu,Oi]=w.useState(!1),[Vl,rx]=w.useState(null),[Xp,ax]=w.useState(!1),[nx,hu]=w.useState(null),[Zp,ix]=w.useState(!1),[lx,Qp]=w.useState(null),[Jp,mu]=w.useState(!1),[ox,eg]=w.useState(null),[tg,cx]=w.useState(!1),[oc,sg]=w.useState(null),[rg,dx]=w.useState(!1),[xu,ag]=w.useState(null),[ng,ux]=w.useState(!1),[hx,ig]=w.useState(null),[lg,mx]=w.useState(!1),[xx,og]=w.useState(null),[fu,Li]=w.useState(!1),[fx,px]=w.useState(null),[gx,pu]=w.useState(!1),[gu,bx]=w.useState(null),[Pi,yx]=w.useState(!1),[vx,cg]=w.useState(null),[jx,bu]=w.useState(!1),[Bi,Hl]=w.useState(null),[dg,ql]=w.useState([]),Zt=w.useCallback((ye,Pe="info")=>{const Ye=Date.now().toString();ql(Mt=>[...Mt,{id:Ye,message:ye,type:Pe}])},[]),wx=w.useCallback(ye=>{ql(Pe=>Pe.filter(Ye=>Ye.id!==ye))},[]),Ms=w.useCallback(async()=>{try{o(!0);const[ye,Pe]=await Promise.all([ps.getProjects(c),ps.getProjectStatistics(c)]);ye.projects&&r(ye.projects),Pe.success&&Pe.stats&&n(Pe.stats)}catch(ye){console.error("Error loading projects:",ye),Zt("  ","error")}finally{o(!1)}},[c,Zt]),Ma=w.useCallback(async ye=>{try{const Pe=await ps.getProject(ye);Pe.project&&r(Ye=>Ye.map(Mt=>Mt.id===ye?Pe.project:Mt))}catch(Pe){console.error("Error updating project:",Pe),Ms()}},[Ms]),[Fi,yu]=w.useState(""),[zi,Nx]=w.useState(""),[Wl,_x]=w.useState(""),[Xa,kx]=w.useState("created_at");eY({onNew:()=>p(!0),onRefresh:Ms,onSearch:()=>{document.querySelector('input[type="text"]')?.focus()},onHelp:()=>W(!0),onEscape:()=>{p(!1),g(!1),y(!1),S(!1),$(!1),de(!1),W(!1),re(!1),G(!1),X(!1),ne(!1),Ce(!1),We(!1),Ea(!1),zt(!1),Vd(!1),Pl(!1),qd(!1),$s(!1),Ym(!1),Dn(!1),Rn(!1),us(!1),Ln(!1),Jm(!1),mr(!1),Zd(!1),tc(!1),eu(!1),su(!1),ex(!1),sc(!1),rc(!1),ac(!1),Ul(!1),cu(!1),Mi(!1),Oi(!1),ax(!1),ix(!1),mu(!1),cx(!1),dx(!1),ux(!1),mx(!1),Li(!1),pu(!1),yx(!1),bu(!1)}}),w.useEffect(()=>{Ms()},[c]);const Rt=w.useMemo(()=>{let ye=[...t];if(Fi){const Pe=Fi.toLowerCase();ye=ye.filter(Ye=>Ye.title.toLowerCase().includes(Pe)||Ye.user?.first_name?.toLowerCase().includes(Pe)||Ye.user?.username?.toLowerCase().includes(Pe))}if(zi&&(ye=ye.filter(Pe=>Pe.status===zi)),Wl&&(ye=ye.filter(Pe=>Pe.complexity===Wl)),Vt.executorId&&(ye=ye.filter(Pe=>Pe.assigned_executor_id===Vt.executorId)),Vt.clientId&&(ye=ye.filter(Pe=>Pe.user?.id===Vt.clientId)),Vt.colorFilter&&(ye=ye.filter(Pe=>Pe.color===Vt.colorFilter)),Vt.dateFrom){const Pe=new Date(Vt.dateFrom);ye=ye.filter(Ye=>new Date(Ye.created_at)>=Pe)}if(Vt.dateTo){const Pe=new Date(Vt.dateTo);Pe.setHours(23,59,59,999),ye=ye.filter(Ye=>new Date(Ye.created_at)<=Pe)}if(Vt.hasPayment&&(ye=ye.filter(Pe=>{const Ye=Pe.prepayment_amount>0,Mt=Pe.client_paid_total||0,js=Pe.estimated_cost||0;switch(Vt.hasPayment){case"paid":return Ye||Mt>0;case"unpaid":return!Ye&&Mt===0;case"partially":return Mt>0&&Mt<js;case"fully":return Mt>=js&&js>0;default:return!0}})),Vt.hasOverdue){const Pe=new Date;ye=ye.filter(Ye=>{if(!Ye.deadline)return!1;const js=new Date(Ye.deadline)<Pe,Za=Ye.status!=="completed"&&Ye.status!=="cancelled";return js&&Za})}if(Vt.noExecutor&&(ye=ye.filter(Pe=>!Pe.assigned_executor_id&&!Pe.assigned_to)),Vt.priceFrom){const Pe=Number(Vt.priceFrom);ye=ye.filter(Ye=>(Ye.estimated_cost||0)>=Pe)}if(Vt.priceTo){const Pe=Number(Vt.priceTo);ye=ye.filter(Ye=>(Ye.estimated_cost||0)<=Pe)}return ye.sort((Pe,Ye)=>Xa==="created_at"||Xa==="updated_at"?new Date(Ye[Xa]).getTime()-new Date(Pe[Xa]).getTime():Xa==="estimated_cost"?(Ye.estimated_cost||0)-(Pe.estimated_cost||0):Xa==="title"?Pe.title.localeCompare(Ye.title):0),ye},[t,Fi,zi,Wl,Xa,Vt]),Yl=w.useCallback(()=>{yu(""),Nx(""),_x(""),kx("created_at"),Ud({executorId:null,clientId:null,colorFilter:"",dateFrom:"",dateTo:"",hasPayment:"",hasOverdue:!1,noExecutor:!1,priceFrom:"",priceTo:""})},[]),Sx=w.useCallback(()=>{Ms()},[Ms]),vu=w.useCallback(ye=>{s(`/projects/${ye}/overview`)},[s]),ju=w.useCallback(ye=>{A(ye),g(!0)},[]),wu=async ye=>{if(window.confirm(" ,     ?"))try{await ps.deleteProject(ye),Zt("  !","success"),Ms()}catch(Ye){console.error("Error deleting project:",Ye),Zt("   ","error")}},cc=async ye=>{try{const Pe=t.find(Ye=>Ye.id===ye);await ps.archiveProject(ye),Pe?.is_archived?Zt("   !","success"):Zt("   !","success"),Ms()}catch(Pe){console.error("Error archiving project:",Pe),Zt("    ","error")}},Nu=async ye=>{const Pe=window.prompt("   :");if(Pe)try{await ps.sendMessageToClient(ye,Pe),Zt(" !","success")}catch(Ye){console.error("Error sending message:",Ye),Zt("   ","error")}},Fn=async ye=>{if(window.confirm(" ,     ?"))try{await ps.completeProject(ye),Zt("  !","success"),Ms()}catch(Ye){console.error("Error completing project:",Ye),Zt("   ","error")}},dc=ye=>{R(ye),S(!0)},Ii=ye=>{const Pe=t.find(Ye=>Ye.id===ye);Pe&&(te(Pe),M(!0))},_u=(ye,Pe)=>{J({id:ye,status:Pe}),_(!0)},ku=ye=>{const Pe=t.find(Ye=>Ye.id===ye);Pe&&(Y(Pe),E(!0))},zn=ye=>{const Pe=t.find(Ye=>Ye.id===ye);Pe&&(ie(Pe),$(!0))},$i=async(ye,Pe)=>{const Ye=["default","green","yellow","red"],Mt={default:"",green:"",yellow:"",red:""},js=Ye.indexOf(Pe),Za=Ye[(js+1)%Ye.length];try{(await fetch(`http://localhost:8001/admin/api/projects/${ye}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:qwerty123")},body:JSON.stringify({color:Za})})).ok?(Zt(`   ${Mt[Za]}`,"success"),Ms()):Zt("  ","error")}catch(Gl){console.error("Error changing color:",Gl),Zt("  ","error")}},Su=a?.total_projects??t.length,Cx=a?.active_projects??t.filter(ye=>["new","review","accepted","in_progress","testing"].includes(ye.status)).length,In=a?.completed_projects??t.filter(ye=>ye.status==="completed").length,Cu=a?.total_cost??t.reduce((ye,Pe)=>ye+(Pe.estimated_cost||0),0),uc=a?.total_received??t.reduce((ye,Pe)=>ye+(Pe.client_paid_total||0),0),Tx=a?.remaining_budget??Cu-uc,ug=a?.total_prepayments??t.reduce((ye,Pe)=>ye+(Pe.prepayment_amount||0),0),Tu=a?.total_paid_to_executors??t.reduce((ye,Pe)=>ye+(Pe.executor_paid_total||0),0),Ex=(a?.total_planned_executor_payments??t.reduce((ye,Pe)=>ye+(Pe.executor_cost||0),0))-Tu,Ax=a?.total_profit??uc-Tu;return i?e.jsx("div",{className:"p-8",children:e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx(rs,{className:"w-12 h-12 text-purple-600 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:" ..."})]})})}):e.jsxs("div",{className:"p-8 space-y-6 bg-gradient-to-br from-purple-50 via-pink-50 to-red-50",children:[e.jsx(dW,{items:[{label:"",path:"/"},{label:"",path:"/projects"}]}),Qo&&e.jsx(mW,{projects:Rt,onClose:()=>Tn(!1)}),e.jsx("div",{className:"bg-gradient-to-r from-purple-600 via-pink-600 to-red-500 rounded-3xl p-8 text-white shadow-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:" "}),e.jsxs("p",{className:"text-purple-100",children:[" : ",Rt.length]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:Sx,className:"px-4 py-2 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-xl font-semibold transition-all flex items-center gap-2",title:" (R)",children:[e.jsx(rs,{className:"w-4 h-4"}),""]}),e.jsxs("button",{onClick:()=>u(!c),className:"px-4 py-2 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-xl font-semibold transition-all flex items-center gap-2",children:[e.jsx(_l,{className:"w-4 h-4"}),c?" ":" "]}),e.jsx("button",{onClick:()=>Tn(!Qo),className:"px-4 py-2 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-xl font-semibold transition-all flex items-center gap-2",children:" "}),e.jsxs("button",{onClick:()=>re(!0),className:"px-4 py-2 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-xl font-semibold transition-all flex items-center gap-2",children:[e.jsx(wt,{className:"w-4 h-4"}),""]}),e.jsx("button",{onClick:()=>W(!0),className:"px-4 py-2 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-xl font-semibold transition-all flex items-center gap-2",title:"  (?  H)",children:""}),e.jsxs("button",{onClick:()=>p(!0),className:"px-6 py-2 bg-white text-purple-600 rounded-xl font-semibold hover:shadow-xl transition-all flex items-center gap-2",title:"  (Ctrl+N)",children:[e.jsx(Ve,{className:"w-5 h-5"})," "]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md border border-purple-100 flex flex-col items-center justify-center text-center min-h-[100px]",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:Su}),e.jsxs("div",{className:"text-xs text-gray-600 mt-2 leading-tight",children:["",e.jsx("br",{}),""]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md border border-green-100 flex flex-col items-center justify-center text-center min-h-[100px]",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:Cx}),e.jsx("div",{className:"text-xs text-gray-600 mt-2",children:""})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md border border-green-200 flex flex-col items-center justify-center text-center min-h-[100px]",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:In}),e.jsx("div",{className:"text-xs text-gray-600 mt-2",children:""})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md border border-orange-100 flex flex-col items-center justify-center text-center min-h-[100px]",children:[e.jsxs("div",{className:"text-xl font-bold text-gray-900",children:[Cu.toLocaleString(),""]}),e.jsxs("div",{className:"text-xs text-gray-600 mt-2 leading-tight",children:["",e.jsx("br",{}),""]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md border border-cyan-100 flex flex-col items-center justify-center text-center min-h-[100px]",children:[e.jsxs("div",{className:"text-xl font-bold text-gray-900",children:[uc.toLocaleString(),""]}),e.jsx("div",{className:"text-xs text-gray-600 mt-2",children:""})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md border border-red-100 flex flex-col items-center justify-center text-center min-h-[100px]",children:[e.jsxs("div",{className:"text-xl font-bold text-gray-900",children:[Tx.toLocaleString(),""]}),e.jsx("div",{className:"text-xs text-gray-600 mt-2",children:""})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md border border-gray-100 flex flex-col items-center justify-center text-center min-h-[100px]",children:[e.jsxs("div",{className:"text-xl font-bold text-gray-900",children:[ug.toLocaleString(),""]}),e.jsx("div",{className:"text-xs text-gray-600 mt-2",children:""})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md border border-orange-200 flex flex-col items-center justify-center text-center min-h-[100px]",children:[e.jsxs("div",{className:"text-xl font-bold text-gray-900",children:[Tu.toLocaleString(),""]}),e.jsx("div",{className:"text-xs text-gray-600 mt-2",children:""})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md border border-red-200 flex flex-col items-center justify-center text-center min-h-[100px]",children:[e.jsxs("div",{className:"text-xl font-bold text-gray-900",children:[Ex.toLocaleString(),""]}),e.jsx("div",{className:"text-xs text-gray-600 mt-2 leading-tight",children:" "})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md border border-purple-200 flex flex-col items-center justify-center text-center min-h-[100px]",children:[e.jsxs("div",{className:"text-xl font-bold text-gray-900",children:[Ax.toLocaleString(),""]}),e.jsx("div",{className:"text-xs text-gray-600 mt-2",children:""})]})]}),Js.length>0&&e.jsx(Zq,{selectedIds:Js,onSelectAll:()=>Ok(Rt,Ci),onDeselectAll:()=>Lk(Ci),onBulkArchive:()=>hY(Js,Zt,Ms),onBulkDelete:()=>mY(Js,Zt,Ms),onBulkStatusChange:()=>xY(Js,Zt),onBulkExport:()=>fY(Js,Rt,Zt),totalCount:Rt.length}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-[300px] relative",children:[e.jsx(Fs,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"    ... (Ctrl+F)",className:"w-full pl-12 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",value:Fi,onChange:ye=>yu(ye.target.value)})]}),e.jsxs("select",{className:"px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500",value:zi,onChange:ye=>Nx(ye.target.value),children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"new",children:""}),e.jsx("option",{value:"review",children:" "}),e.jsx("option",{value:"accepted",children:""}),e.jsx("option",{value:"in_progress",children:" "}),e.jsx("option",{value:"testing",children:""}),e.jsx("option",{value:"completed",children:""}),e.jsx("option",{value:"cancelled",children:""})]}),e.jsxs("select",{className:"px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500",value:Wl,onChange:ye=>_x(ye.target.value),children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"simple",children:""}),e.jsx("option",{value:"medium",children:""}),e.jsx("option",{value:"complex",children:""}),e.jsx("option",{value:"premium",children:""})]}),e.jsxs("select",{className:"px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500",value:Xa,onChange:ye=>kx(ye.target.value),children:[e.jsx("option",{value:"created_at",children:"  "}),e.jsx("option",{value:"updated_at",children:"  "}),e.jsx("option",{value:"estimated_cost",children:" "}),e.jsx("option",{value:"title",children:" "})]}),e.jsx("button",{onClick:Yl,className:"px-6 py-3 bg-red-50 text-red-600 rounded-xl hover:bg-red-100 transition-all font-medium",children:""})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-4 pt-4 border-t border-gray-200",children:[e.jsx(Gq,{filters:Vt,onChange:Ud,onClear:()=>{Ud({executorId:null,clientId:null,colorFilter:"",dateFrom:"",dateTo:"",hasPayment:"",hasOverdue:!1,noExecutor:!1,priceFrom:"",priceTo:""})}}),e.jsx(Qq,{groupBy:Hm,onChange:$d}),e.jsx("div",{className:"flex-1"}),e.jsx("button",{onClick:()=>dY(Rt),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-all font-medium flex items-center gap-2",title:"  ",children:" "}),e.jsx("button",{onClick:()=>G(!0),className:"px-4 py-2 bg-purple-100 text-purple-700 rounded-xl hover:bg-purple-200 transition-all font-medium flex items-center gap-2",title:" ",children:" "})]})]}),e.jsx("div",{className:"flex items-center justify-between bg-white rounded-2xl p-4 shadow-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:":"}),e.jsxs("div",{className:"flex gap-2 bg-gray-100 rounded-xl p-1",children:[e.jsxs("button",{onClick:()=>m("table"),className:`px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 ${h==="table"?"bg-white text-purple-600 shadow-md":"text-gray-600 hover:text-purple-600"}`,children:[e.jsx(CF,{className:"w-4 h-4"}),""]}),e.jsxs("button",{onClick:()=>m("cards"),className:`px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 ${h==="cards"?"bg-white text-purple-600 shadow-md":"text-gray-600 hover:text-purple-600"}`,children:[e.jsx(hN,{className:"w-4 h-4"}),""]})]})]})}),Rt.length===0?e.jsx("div",{className:"bg-white rounded-3xl p-16 shadow-xl border border-gray-100",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-purple-100 to-pink-100 rounded-3xl flex items-center justify-center mb-6",children:e.jsx(Ia,{className:"w-12 h-12 text-purple-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:" "}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-md",children:Fi||zi||Wl?"     ":"   ,   "})]})}):h==="cards"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Rt.map(ye=>e.jsx(Aq,{project:ye,onView:vu,onEdit:ju,onDelete:wu,onArchive:cc,onContact:Nu,onAddPayment:Ii,onComplete:Fn,onViewFiles:dc,onAssignExecutor:ku,onExecutorPayment:zn},ye.id))}):e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-4 text-center text-xs font-bold uppercase w-[50px]",children:e.jsx("input",{type:"checkbox",checked:Js.length===Rt.length&&Rt.length>0,onChange:ye=>{ye.target.checked?Ok(Rt,Ci):Lk(Ci)},className:"w-4 h-4 rounded",title:" "})}),e.jsx("th",{className:"px-3 py-4 text-left text-xs font-bold uppercase",children:"ID"}),e.jsx("th",{className:"px-3 py-4 text-center text-xs font-bold uppercase w-[50px]",children:""}),e.jsx("th",{className:"px-3 py-4 text-left text-xs font-bold uppercase min-w-[200px]",children:""}),e.jsx("th",{className:"px-3 py-4 text-left text-xs font-bold uppercase",children:""}),e.jsx("th",{className:"px-3 py-4 text-left text-xs font-bold uppercase",children:""}),e.jsx("th",{className:"px-3 py-4 text-left text-xs font-bold uppercase",children:""}),e.jsx("th",{className:"px-3 py-4 text-left text-xs font-bold uppercase",children:""}),e.jsx("th",{className:"px-3 py-4 text-left text-xs font-bold uppercase",children:""}),e.jsx("th",{className:"px-3 py-4 text-left text-xs font-bold uppercase",children:""}),e.jsx("th",{className:"px-3 py-4 text-left text-xs font-bold uppercase",children:""}),e.jsx("th",{className:"px-3 py-4 text-left text-xs font-bold uppercase",children:""}),e.jsx("th",{className:"px-3 py-4 text-left text-xs font-bold uppercase",children:""}),e.jsx("th",{className:"px-3 py-4 text-center text-xs font-bold uppercase min-w-[400px]",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:Rt.map(ye=>{const Pe=wY(ye.status),Ye=yY(ye.status),Mt=vY(ye.status);return e.jsxs("tr",{className:`transition-colors ${Mt}`,children:[e.jsx("td",{className:"px-3 py-4 text-center",children:e.jsx("input",{type:"checkbox",checked:Js.includes(ye.id),onChange:js=>{js.target.checked?Ci([...Js,ye.id]):Ci(Js.filter(Za=>Za!==ye.id))},className:"w-4 h-4 rounded",onClick:js=>js.stopPropagation()})}),e.jsx("td",{className:"px-3 py-4",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"px-2 py-1 bg-gray-700 text-white rounded-lg text-xs font-bold",children:["#",ye.id]})})}),e.jsx("td",{className:"px-3 py-4",children:e.jsx("button",{onClick:js=>{js.stopPropagation(),$i(ye.id,ye.color||"default")},className:`w-6 h-6 rounded-full border-2 border-gray-300 hover:scale-110 transition-transform cursor-pointer ${ye.color==="green"?"bg-green-500":ye.color==="yellow"?"bg-yellow-500":ye.color==="red"?"bg-red-500":"bg-gray-400"}`,title:`  (: ${ye.color==="green"?"":ye.color==="yellow"?"":ye.color==="red"?"":""})`})}),e.jsxs("td",{className:"px-3 py-4",children:[e.jsx("div",{className:"font-semibold text-gray-900 text-sm mb-1",children:ye.title}),e.jsx("div",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded inline-block",children:ye.project_type||" "})]}),e.jsxs("td",{className:"px-3 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:ye.user?.first_name||""}),e.jsxs("div",{className:"text-xs text-gray-500",children:["@",ye.user?.username||""]})]}),e.jsx("td",{className:"px-3 py-4",children:ye.assigned_to?e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:ye.assigned_to.username}),ye.executor_cost>0&&e.jsxs("div",{className:"text-xs text-orange-600 font-semibold",children:[ye.executor_paid_total?.toLocaleString()||0," / ",ye.executor_cost?.toLocaleString(),""]})]}):e.jsx("span",{className:"text-xs text-gray-400 italic",children:" "})}),e.jsx("td",{className:"px-3 py-4",children:e.jsx("span",{className:`px-3 py-1.5 rounded-lg text-xs font-bold whitespace-nowrap ${Ye}`,children:bY(ye.status)})}),e.jsx("td",{className:"px-3 py-4",children:e.jsx("span",{className:"text-sm font-medium",children:jY(ye.complexity)})}),e.jsx("td",{className:"px-3 py-4",children:e.jsxs("div",{className:"w-24",children:[e.jsx("div",{className:"flex justify-between items-center mb-1",children:e.jsxs("span",{className:"text-xs font-bold text-purple-600",children:[Pe,"%"]})}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all duration-500 rounded-full",style:{width:`${Pe}%`}})})]})}),e.jsx("td",{className:"px-3 py-4",children:e.jsxs("div",{className:"text-sm font-bold text-purple-600",children:[(ye.estimated_cost||0).toLocaleString(),""]})}),e.jsx("td",{className:"px-3 py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"font-bold text-green-600",children:[(ye.client_paid_total||0).toLocaleString(),""]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[": ",((ye.estimated_cost||0)-(ye.client_paid_total||0)).toLocaleString(),""]})]})}),e.jsx("td",{className:"px-3 py-4",children:ye.deadline?e.jsxs("div",{className:"text-xs text-orange-700 font-semibold",children:[" ",ye.deadline.slice(0,10)]}):e.jsx("span",{className:"text-xs text-gray-400",children:""})}),e.jsx("td",{className:"px-3 py-4",children:e.jsx("div",{className:"text-xs text-gray-500",children:ye.created_at?.slice(0,10)})}),e.jsx("td",{className:"px-3 py-4",children:e.jsxs("div",{className:"flex flex-wrap gap-1.5 justify-center",children:[e.jsxs("button",{onClick:()=>vu(ye.id),className:"px-2 py-1.5 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-all text-xs font-semibold flex items-center gap-1",title:"",children:[e.jsx(Ft,{className:"w-3 h-3"}),""]}),e.jsxs("button",{onClick:()=>ju(ye.id),className:"px-2 py-1.5 bg-cyan-100 text-cyan-700 rounded-lg hover:bg-cyan-200 transition-all text-xs font-semibold flex items-center gap-1",title:"",children:[e.jsx(kn,{className:"w-3 h-3"}),""]}),e.jsxs("button",{onClick:()=>_u(ye.id,ye.status),className:"px-2 py-1.5 bg-teal-100 text-teal-700 rounded-lg hover:bg-teal-200 transition-all text-xs font-semibold flex items-center gap-1",title:" ",children:[e.jsx(rs,{className:"w-3 h-3"}),""]}),e.jsxs("button",{onClick:()=>ku(ye.id),className:"px-2 py-1.5 bg-violet-100 text-violet-700 rounded-lg hover:bg-violet-200 transition-all text-xs font-semibold flex items-center gap-1",title:" ",children:[e.jsx(tt,{className:"w-3 h-3"}),""]}),(ye.status==="testing"||ye.status==="in_progress")&&e.jsxs("button",{onClick:()=>Fn(ye.id),className:"px-2 py-1.5 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-all text-xs font-semibold flex items-center gap-1",title:" ",children:[e.jsx(it,{className:"w-3 h-3"}),""]}),ye.user?.telegram_id&&e.jsxs("button",{onClick:()=>Nu(ye.user.telegram_id),className:"px-2 py-1.5 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-all text-xs font-semibold flex items-center gap-1",title:"",children:[e.jsx(Ha,{className:"w-3 h-3"}),""]}),e.jsxs("button",{onClick:()=>Ii(ye.id),className:"px-2 py-1.5 bg-yellow-100 text-yellow-700 rounded-lg hover:bg-yellow-200 transition-all text-xs font-semibold flex items-center gap-1",title:" ",children:[e.jsx(Ge,{className:"w-3 h-3"}),""]}),e.jsxs("button",{onClick:()=>dc(ye.id),className:"px-2 py-1.5 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition-all text-xs font-semibold flex items-center gap-1",title:" ",children:[e.jsx(Tr,{className:"w-3 h-3"}),""]}),e.jsx("button",{onClick:()=>lY(ye.id,ye.title,ds,Ea),className:"px-2 py-1.5 bg-sky-100 text-sky-700 rounded-lg hover:bg-sky-200 transition-all text-xs font-semibold flex items-center gap-1",title:"",children:""}),e.jsx("button",{onClick:()=>oY(ye.id,ye.title,Zo,zt),className:"px-2 py-1.5 bg-pink-100 text-pink-700 rounded-lg hover:bg-pink-200 transition-all text-xs font-semibold flex items-center gap-1",title:"",children:""}),e.jsx("button",{onClick:()=>nY(ye.id,ye.title,L,X),className:"px-2 py-1.5 bg-lime-100 text-lime-700 rounded-lg hover:bg-lime-200 transition-all text-xs font-semibold flex items-center gap-1",title:"",children:""}),e.jsx("button",{onClick:()=>iY(ye,xe,ne),className:"px-2 py-1.5 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition-all text-xs font-semibold flex items-center gap-1",title:" ",children:""}),e.jsx("button",{onClick:()=>cY(ye,Zt),className:"px-2 py-1.5 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-all text-xs font-semibold flex items-center gap-1",title:"  ",children:""}),e.jsxs("button",{onClick:()=>cc(ye.id),className:"px-2 py-1.5 bg-amber-100 text-amber-700 rounded-lg hover:bg-amber-200 transition-all text-xs font-semibold flex items-center gap-1",title:ye.is_archived?"":"",children:[e.jsx(_l,{className:"w-3 h-3"}),ye.is_archived?".":""]}),e.jsxs("button",{onClick:()=>wu(ye.id),className:"px-2 py-1.5 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-all text-xs font-semibold flex items-center gap-1",title:"",children:[e.jsx(Xe,{className:"w-3 h-3"}),""]})]})})]},ye.id)})})]})})}),e.jsx(Dq,{isOpen:f,onClose:()=>p(!1),onSuccess:Ms}),e.jsx(Rq,{projectId:C,isOpen:j,onClose:()=>{g(!1),A(null)},onSuccess:()=>C&&Ma(C)}),e.jsx(Fq,{isOpen:v,onClose:()=>{y(!1),I(null)},onEdit:ye=>{y(!1),A(ye),g(!0)},onContact:Nu,project:Z}),e.jsx(Uq,{isOpen:N,onClose:()=>{S(!1),R(null)},projectId:V}),e.jsx(Vq,{isOpen:k,onClose:()=>{_(!1),J(null)},projectId:q?.id||null,currentStatus:q?.status||"",onStatusChanged:()=>q?.id&&Ma(q.id)}),e.jsx(Hq,{isOpen:T,onClose:()=>{E(!1),Y(null)},projectId:se?.id||null,currentExecutor:se?.assigned_to,currentCost:se?.executor_cost,onAssigned:()=>se?.id&&Ma(se.id)}),e.jsx(qq,{isOpen:z,onClose:()=>{M(!1),te(null)},projectId:ee?.id||null,projectCost:ee?.estimated_cost||0,paidTotal:ee?.client_paid_total||0,onPaymentAdded:()=>ee?.id&&Ma(ee.id)}),e.jsx(Yq,{isOpen:K,onClose:()=>{$(!1),ie(null)},projectId:le?.id||null,executorCost:le?.executor_cost||0,executorPaidTotal:le?.executor_paid_total||0,executorName:le?.assigned_to?.username,onPaymentAdded:()=>le?.id&&Ma(le.id)}),e.jsx(Xq,{isOpen:oe,onClose:()=>{de(!1),F(null)},project:U}),e.jsx(Jq,{isOpen:Q,onClose:()=>W(!1)}),e.jsx(eW,{isOpen:H,onClose:()=>re(!1),onExport:(ye,Pe)=>{uY(ye,Pe,Rt,Zt),re(!1)}}),e.jsx(sW,{isOpen:he,onClose:()=>G(!1),onStatusesUpdated:Ms}),e.jsx(iW,{isOpen:ce,onClose:()=>{X(!1),L(null)},projectId:O?.id||null,projectName:O?.name||""}),e.jsx(lW,{isOpen:B,onClose:()=>{ne(!1),xe(null)},project:me,onSaved:()=>me?.id&&Ma(me.id)}),e.jsx(oW,{isOpen:_e,onClose:()=>{Ce(!1),Be(null)},title:Te?.title||"",message:Te?.message||"",onConfirm:()=>{Te?.onConfirm(),Ce(!1),Be(null)},type:Te?.type}),e.jsx(cW,{isOpen:ze,onClose:()=>{We(!1),Ur(null)},project:Ds,onDuplicated:Ms}),e.jsx(uW,{isOpen:br,onClose:()=>{Ea(!1),ds(null)},projectId:_t?.id||null,projectName:_t?.name||""}),e.jsx(hW,{isOpen:yr,onClose:()=>{zt(!1),Zo(null)},projectId:Cn?.id||null,projectName:Cn?.name||"",onTagsUpdated:()=>Cn?.id&&Ma(Cn.id)}),e.jsx(nW,{imageUrl:En,onClose:()=>ra(null)}),hr.length>0&&e.jsx(rW,{files:hr,onCancel:ye=>pY(ye,Ll),onClear:()=>gY(Ll)}),qm&&e.jsx(fW,{projects:Rt,onClose:()=>Vd(!1)}),Wm&&e.jsx(pW,{projects:t,onClose:()=>Pl(!1),onProjectSelect:ye=>{I(ye),y(!0),Pl(!1)}}),Hd&&Jo&&e.jsx(gW,{projectId:Jo.id,projectName:Jo.name,onClose:()=>{qd(!1),Ga(null)}}),Rs&&An&&e.jsx(bW,{projectId:An,onClose:()=>{$s(!1),Wd(null)}}),qp&&e.jsx(yW,{onClose:()=>Ym(!1)}),Gm&&e.jsx(vW,{onClose:()=>Dn(!1),onTemplateSelect:ye=>{Dn(!1),p(!0)}}),e.jsx(jW,{}),Yd&&Mn&&e.jsx(NW,{projectId:Mn,onClose:()=>{Rn(!1),Bl(null)}}),Ti&&Gd&&e.jsx(_W,{projectId:Gd,onClose:()=>{us(!1),Km(null)}}),On&&Xm&&e.jsx(kW,{projectId:Xm,onClose:()=>{Ln(!1),Zm(null)}}),Qm&&Fl&&e.jsx(SW,{projectId:Fl,onClose:()=>{Jm(!1),ec(null)}}),Aa&&Kd&&e.jsx(EW,{projectId:Kd,onClose:()=>{mr(!1),Wp(null)}}),Xd&&zl&&e.jsx(AW,{projectId:zl,onClose:()=>{Zd(!1),Yp(null)}}),vr&&Qd&&e.jsx(DW,{projectId:Qd,onClose:()=>{tc(!1),Jd(null)}}),Ei&&tu&&e.jsx(MW,{projectId:tu,onClose:()=>{eu(!1),Ai(null)}}),Gp&&ru&&e.jsx(OW,{projectId:ru,onClose:()=>{su(!1),au(null)}}),Kp&&Il&&e.jsx(LW,{projectId:Il,onClose:()=>{ex(!1),Da(null)}}),nu&&Pn&&e.jsx(PW,{projectId:Pn,onClose:()=>{sc(!1),Di(null)}}),tx&&iu&&e.jsx(BW,{projectId:iu,onClose:()=>{rc(!1),$l(null)}}),Ra&&Ri&&e.jsx(FW,{projectId:Ri,onClose:()=>{ac(!1),Ka(null)}}),lu&&ou&&e.jsx(zW,{projectId:ou,onClose:()=>{Ul(!1),nc(null)}}),ic&&Us&&e.jsx(IW,{projectId:Us,onClose:()=>{cu(!1),Bn(null)}}),lc&&sx&&e.jsx($W,{projectId:sx,onClose:()=>{Mi(!1),du(null)}}),uu&&Vl&&e.jsx(UW,{projectId:Vl,onClose:()=>{Oi(!1),rx(null)}}),Xp&&nx&&e.jsx(VW,{projectId:nx,onClose:()=>{ax(!1),hu(null)}}),Zp&&lx&&e.jsx(HW,{projectId:lx,onClose:()=>{ix(!1),Qp(null)}}),Jp&&ox&&e.jsx(qW,{projectId:ox,onClose:()=>{mu(!1),eg(null)}}),tg&&oc&&e.jsx(WW,{projectId:oc,onClose:()=>{cx(!1),sg(null)}}),rg&&xu&&e.jsx(YW,{projectId:xu,onClose:()=>{dx(!1),ag(null)}}),ng&&hx&&e.jsx(GW,{projectId:hx,onClose:()=>{ux(!1),ig(null)}}),lg&&xx&&e.jsx(KW,{projectId:xx,onClose:()=>{mx(!1),og(null)}}),fu&&fx&&e.jsx(XW,{projectId:fx,onClose:()=>{Li(!1),px(null)}}),gx&&gu&&e.jsx(ZW,{projectId:gu,onClose:()=>{pu(!1),bx(null)}}),Pi&&vx&&e.jsx(QW,{projectId:vx,onClose:()=>{yx(!1),cg(null)}}),jx&&Bi&&e.jsx(JW,{projectId:Bi,onClose:()=>{bu(!1),Hl(null)}}),e.jsx(h1,{toasts:dg,onRemove:wx})]})},_Y=()=>{const{projectId:s}=yT(),t=Wa(),[r,a]=w.useState(null),[n,i]=w.useState(!0),[o,c]=w.useState(null);w.useEffect(()=>{(async()=>{if(s)try{i(!0);const p=await fe.get(`/admin/api/projects/${s}`),j=p.data.project||p.data;a(j),c(null)}catch(p){console.error("Error loading project:",p),c("  ")}finally{i(!1)}})()},[s]);const u=[{id:"overview",label:"",icon:dE,path:`/projects/${s}/overview`},{id:"tasks",label:"",icon:ar,path:`/projects/${s}/tasks`},{id:"revisions",label:"",icon:wn,path:`/projects/${s}/revisions`},{id:"chat",label:"",icon:Es,path:`/projects/${s}/chat`},{id:"documents",label:"",icon:Ie,path:`/projects/${s}/documents`},{id:"finance",label:"",icon:Ge,path:`/projects/${s}/finance`},{id:"hosting",label:"",icon:hn,path:`/projects/${s}/hosting`}],h={new:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",in_progress:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400",testing:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400",completed:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",archived:"bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-400"},m={new:"",in_progress:" ",testing:"",completed:"",archived:""};return n?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx(Dt,{className:"w-8 h-8 text-blue-500 animate-spin"})}):o||!r?e.jsxs("div",{className:"flex flex-col items-center justify-center h-96 gap-4",children:[e.jsx("p",{className:"text-red-500 dark:text-red-400",children:o||"  "}),e.jsx("button",{onClick:()=>t("/projects"),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"  "})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>t("/projects"),className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:[e.jsx(rE,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${h[r.status]||h.new}`,children:m[r.status]||r.status})]}),e.jsxs("div",{className:"px-6 py-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:r.title}),r.description&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:r.description}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:""}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[r.progress||0,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${r.progress||0}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[r.client_name&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:":"}),e.jsx("span",{className:"ml-2 text-gray-900 dark:text-white",children:r.client_name})]}),r.budget&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:":"}),e.jsxs("span",{className:"ml-2 text-gray-900 dark:text-white",children:[r.budget.toLocaleString("ru-RU")," "]})]}),r.deadline&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:":"}),e.jsx("span",{className:"ml-2 text-gray-900 dark:text-white",children:new Date(r.deadline).toLocaleDateString("ru-RU")})]})]})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700",children:e.jsx("nav",{className:"flex overflow-x-auto scrollbar-hide",children:u.map(f=>e.jsxs(CT,{to:f.path,className:({isActive:p})=>`flex items-center gap-2 px-6 py-4 text-sm font-medium whitespace-nowrap border-b-2 transition-colors ${p?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:border-gray-300 dark:hover:border-gray-600"}`,children:[e.jsx(f.icon,{className:"w-4 h-4"}),e.jsx("span",{children:f.label})]},f.id))})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:e.jsx(aN,{context:{project:r}})})]})},kY=()=>{const{project:s}=Wo(),t=Wa(),[r,a]=w.useState([]),[n,i]=w.useState(!1),[o,c]=w.useState([]),[u,h]=w.useState(!1),[m,f]=w.useState([]),[p,j]=w.useState(!1);w.useEffect(()=>{(async()=>{try{i(!0),a([{id:1,action:"create",user_name:"admin",created_at:s.created_at||new Date().toISOString(),details:" "}])}catch(k){console.error("Error loading activity:",k)}finally{i(!1)}})()},[s.id]),w.useEffect(()=>{(async()=>{try{h(!0);const k=await fe.get(`/admin/api/projects/${s.id}/tasks`);if(k.data.success){const T=(k.data.tasks||[]).filter(E=>E.status==="in_progress"||E.status==="pending"||E.status==="new").slice(0,5);c(T)}}catch(k){console.error("Error loading tasks:",k)}finally{h(!1)}})()},[s.id]),w.useEffect(()=>{(async()=>{try{j(!0);const k=await fe.get(`/admin/api/projects/${s.id}/payments`);if(k.data.success){const _=k.data.payments||[];f(_.slice(0,3))}}catch(k){console.error("Error loading payments:",k)}finally{j(!1)}})()},[s.id]);const g=S=>{const k=new Date(S),T=new Date().getTime()-k.getTime(),E=Math.floor(T/(1e3*60*60*24));return E===0?"":E===1?"":E<7?`${E}  `:k.toLocaleDateString("ru-RU")},v={pending:{label:"",color:"gray"},new:{label:"",color:"blue"},in_progress:{label:" ",color:"yellow"},review:{label:" ",color:"purple"},completed:{label:"",color:"green"}},y=S=>v[S]||v.pending,N={PREPAYMENT:"",MILESTONE:"",FINAL:"",ADDITIONAL:""};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:" "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500 rounded-lg",children:e.jsx(ct,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:""}),e.jsxs("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:[s.progress||0,"%"]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-lg p-4 border border-green-200 dark:border-green-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-500 rounded-lg",children:e.jsx(tt,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:""}),e.jsx("p",{className:"text-lg font-bold text-green-900 dark:text-green-100 truncate",children:s.client_name||s.user?.username||" "})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-lg p-4 border border-purple-200 dark:border-purple-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-500 rounded-lg",children:e.jsx(pt,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-purple-600 dark:text-purple-400",children:""}),e.jsx("p",{className:"text-lg font-bold text-purple-900 dark:text-purple-100",children:s.deadline?new Date(s.deadline).toLocaleDateString("ru-RU"):" "})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 rounded-lg p-4 border border-orange-200 dark:border-orange-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-500 rounded-lg",children:e.jsx(Ue,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-orange-600 dark:text-orange-400",children:""}),e.jsx("p",{className:"text-lg font-bold text-orange-900 dark:text-orange-100",children:s.created_at?new Date(s.created_at).toLocaleDateString("ru-RU"):""})]})]})})]}),(s.estimated_cost||s.executor_cost||s.final_cost)&&e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-green-100 dark:from-emerald-900/20 dark:to-green-800/20 rounded-lg p-6 border border-emerald-200 dark:border-emerald-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-emerald-500 rounded-lg",children:e.jsx(Ge,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold text-emerald-900 dark:text-emerald-100",children:" "})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.estimated_cost&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-emerald-600 dark:text-emerald-400",children:" "}),e.jsxs("p",{className:"text-xl font-bold text-emerald-900 dark:text-emerald-100",children:[s.estimated_cost.toLocaleString("ru-RU")," "]})]}),s.executor_cost&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-emerald-600 dark:text-emerald-400",children:" "}),e.jsxs("p",{className:"text-xl font-bold text-emerald-900 dark:text-emerald-100",children:[s.executor_cost.toLocaleString("ru-RU")," "]})]}),s.final_cost&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-emerald-600 dark:text-emerald-400",children:" "}),e.jsxs("p",{className:"text-xl font-bold text-emerald-900 dark:text-emerald-100",children:[s.final_cost.toLocaleString("ru-RU")," "]})]})]})]}),s.description&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:" "}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:s.description})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(tt,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:" "})]}),e.jsxs("div",{className:"space-y-4",children:[s.user&&e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-full",children:e.jsx(st,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:""}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:s.user.first_name||s.user.username}),s.user.phone&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(fi,{className:"w-3 h-3 text-gray-400"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:s.user.phone})]}),s.user.email&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(gi,{className:"w-3 h-3 text-gray-400"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:s.user.email})]})]})]}),(s.assigned_executor||s.assigned_to)&&e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-full",children:e.jsx(st,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:""}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:s.assigned_executor?.first_name||s.assigned_executor?.username||s.assigned_to?.first_name||s.assigned_to?.username})]})]}),!s.user&&!s.assigned_executor&&!s.assigned_to&&e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm text-center py-4",children:"  "})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ar,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"  "})]}),e.jsx("button",{onClick:()=>t(`/projects/${s.id}/tasks`),className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"  "})]}),u?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm text-center py-4",children:"..."}):o.length>0?e.jsx("div",{className:"space-y-2",children:o.map(S=>{const k=y(S.status);return e.jsx("div",{onClick:()=>t(`/projects/${s.id}/tasks`),className:"flex items-start gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-600 cursor-pointer transition-colors",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:S.title}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${k.color==="yellow"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":k.color==="blue"?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":"bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-400"}`,children:k.label})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 dark:text-gray-400",children:[S.deadline&&e.jsx("span",{children:new Date(S.deadline).toLocaleDateString("ru-RU")}),S.comments_count!==void 0&&S.comments_count>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Es,{className:"w-3 h-3"}),e.jsx("span",{children:S.comments_count})]})]})]})},S.id)})}):e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm text-center py-4",children:"  "})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:" "})]}),e.jsx("button",{onClick:()=>t(`/projects/${s.id}/finance`),className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"  "})]}),p?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm text-center py-4",children:"..."}):m.length>0?e.jsx("div",{className:"space-y-2",children:m.map(S=>e.jsxs("div",{onClick:()=>t(`/projects/${s.id}/finance`),className:"flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-emerald-300 dark:hover:border-emerald-600 cursor-pointer transition-colors",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:N[S.type]||S.type}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:S.due_date&&new Date(S.due_date).toLocaleDateString("ru-RU")})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:[S.amount.toLocaleString("ru-RU")," "]}),e.jsx("span",{className:`text-xs ${S.status==="PAID"?"text-green-600 dark:text-green-400":"text-yellow-600 dark:text-yellow-400"}`,children:S.status==="PAID"?"":""})]})]},S.id))}):e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm text-center py-4",children:" "})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(yn,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:" "})]}),n?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm text-center py-4",children:"..."}):r.length>0?e.jsx("div",{className:"space-y-3",children:r.slice(0,5).map(S=>e.jsx("div",{className:"flex items-start gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[e.jsx("span",{className:"font-medium",children:S.user_name})," ",e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:S.details})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:g(S.created_at)})]})},S.id))}):e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm text-center py-4",children:" "})]})]})]})},SY=()=>{const{project:s}=Wo(),[t,r]=w.useState([]),[a,n]=w.useState(!0),[i,o]=w.useState(null),[c,u]=w.useState("all"),[h,m]=w.useState(!1),[f,p]=w.useState({title:"",description:"",priority:"medium",deadline:""}),[j,g]=w.useState(!1),[v,y]=w.useState(null),[N,S]=w.useState({title:"",description:"",status:"",priority:"",deadline:""}),[k,_]=w.useState([]),[T,E]=w.useState(""),[z,M]=w.useState(!1),[C,A]=w.useState(!1);w.useEffect(()=>{s?.id&&Z()},[s?.id]);const Z=async()=>{if(s?.id)try{n(!0);const ie=await fe.get(`/admin/api/projects/${s.id}/tasks`);if(ie.data.success){const oe=(ie.data.tasks||[]).filter(de=>de.type!=="REVISION");r(oe)}o(null)}catch(ie){console.error("Error loading tasks:",ie),o("  ")}finally{n(!1)}},I=async()=>{if(s?.id)try{const ie={title:f.title,description:f.description,priority:f.priority,deadline:f.deadline||null,status:"pending"};if(s.assigned_executor_id)ie.assigned_to_id=s.assigned_executor_id;else{o("  :    ");return}(await fe.post(`/admin/api/projects/${s.id}/tasks`,ie)).data.success&&(m(!1),p({title:"",description:"",priority:"medium",deadline:""}),Z())}catch(ie){console.error("Error creating task:",ie),o("  ")}},V=async ie=>{y(ie),S({title:ie.title,description:ie.description||"",status:ie.status,priority:ie.priority,deadline:ie.deadline?ie.deadline.split("T")[0]:""}),g(!0),await R(ie.id)},R=async ie=>{try{M(!0);const oe=await fe.get(`/admin/api/tasks/${ie}/comments`);oe.data.success&&_(oe.data.comments||[])}catch(oe){console.error("Error loading comments:",oe)}finally{M(!1)}},q=async()=>{if(!(!v||!T.trim()))try{A(!0),(await fe.post(`/admin/api/tasks/${v.id}/comments`,{comment:T.trim()})).data.success&&(E(""),await R(v.id))}catch(ie){console.error("Error adding comment:",ie),o("  ")}finally{A(!1)}},J=async()=>{if(v)try{const ie=await fe.put(`/admin/api/tasks/${v.id}`,{title:N.title,description:N.description,status:N.status,priority:N.priority,deadline:N.deadline||null});if(ie.data.success){Z();const oe=ie.data.task;y(oe)}}catch(ie){console.error("Error updating task:",ie),o("  ")}},se=async()=>{if(v&&confirm(` ,     "${v.title}"?`))try{(await fe.delete(`/admin/api/tasks/${v.id}`)).data.success&&(g(!1),y(null),Z())}catch(ie){console.error("Error deleting task:",ie),o("  ")}},Y={pending:{label:"",color:"gray",icon:Ue},new:{label:"",color:"blue",icon:qe},in_progress:{label:" ",color:"yellow",icon:Ue},review:{label:" ",color:"purple",icon:ar},completed:{label:"",color:"green",icon:zr},cancelled:{label:"",color:"red",icon:kl}},ee={low:{label:"",color:"gray"},normal:{label:"",color:"blue"},medium:{label:"",color:"blue"},high:{label:"",color:"orange"},urgent:{label:"",color:"red"}},te=ie=>Y[ie]||Y.pending,K=ie=>ee[ie]||ee.normal,$=t.filter(ie=>c==="all"?!0:ie.status===c),le=t.reduce((ie,oe)=>(ie[oe.status]=(ie[oe.status]||0)+1,ie),{});return a?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Dt,{className:"w-8 h-8 text-blue-500 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:" "}),e.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[e.jsx(Ve,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]})]}),i&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 flex items-center justify-between",children:[e.jsx("p",{className:"text-red-600 dark:text-red-400",children:i}),e.jsx("button",{onClick:()=>o(null),className:"text-red-400 hover:text-red-600",children:e.jsx(Ae,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",children:[e.jsxs("button",{onClick:()=>u("all"),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors ${c==="all"?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[" (",t.length,")"]}),Object.entries(Y).map(([ie,oe])=>e.jsxs("button",{onClick:()=>u(ie),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors ${c===ie?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[oe.label," (",le[ie]||0,")"]},ie))]}),$.length>0?e.jsx("div",{className:"space-y-3",children:$.map(ie=>{const oe=te(ie.status),de=K(ie.priority),U=oe.icon;return e.jsx("div",{onClick:()=>V(ie),className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 hover:shadow-md transition-shadow cursor-pointer",children:e.jsx("div",{className:"flex items-start justify-between gap-4",children:e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:`p-2 rounded-lg ${oe.color==="green"?"bg-green-100 dark:bg-green-900/20":oe.color==="blue"?"bg-blue-100 dark:bg-blue-900/20":oe.color==="yellow"?"bg-yellow-100 dark:bg-yellow-900/20":oe.color==="purple"?"bg-purple-100 dark:bg-purple-900/20":oe.color==="red"?"bg-red-100 dark:bg-red-900/20":"bg-gray-100 dark:bg-gray-900/20"} mt-1`,children:e.jsx(U,{className:`w-5 h-5 ${oe.color==="green"?"text-green-600 dark:text-green-400":oe.color==="blue"?"text-blue-600 dark:text-blue-400":oe.color==="yellow"?"text-yellow-600 dark:text-yellow-400":oe.color==="purple"?"text-purple-600 dark:text-purple-400":oe.color==="red"?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2 flex-wrap",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:ie.title}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${de.color==="red"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":de.color==="orange"?"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400":de.color==="blue"?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":"bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-400"}`,children:de.label}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${oe.color==="green"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":oe.color==="blue"?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":oe.color==="yellow"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":oe.color==="purple"?"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400":oe.color==="red"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-400"}`,children:oe.label})]}),ie.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2",children:ie.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400 flex-wrap",children:[(ie.assigned_to?.first_name||ie.assigned_to?.username||ie.assigned_to_name)&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(st,{className:"w-3 h-3"}),e.jsx("span",{children:ie.assigned_to?.first_name||ie.assigned_to?.username||ie.assigned_to_name})]}),ie.deadline&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(pt,{className:"w-3 h-3"}),e.jsx("span",{children:new Date(ie.deadline).toLocaleDateString("ru-RU")})]}),ie.comments_count!==void 0&&ie.comments_count>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Es,{className:"w-3 h-3"}),e.jsxs("span",{children:[ie.comments_count," ",ie.comments_count===1?"":""]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ue,{className:"w-3 h-3"}),e.jsxs("span",{children:[": ",new Date(ie.created_at).toLocaleDateString("ru-RU")]})]})]})]})]})})},ie.id)})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(ar,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:c==="all"?"  ":"    "}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:c==="all"?`     "${s.title}"`:"  "}),c==="all"&&e.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[e.jsx(Ve,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]})]}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:" "}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[": ",s.title]})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"  *"}),e.jsx("input",{type:"text",value:f.title,onChange:ie=>p({...f,title:ie.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"  "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsx("textarea",{value:f.description,onChange:ie=>p({...f,description:ie.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:" ..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsxs("select",{value:f.priority,onChange:ie=>p({...f,priority:ie.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"normal",children:""}),e.jsx("option",{value:"medium",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"urgent",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsx("input",{type:"date",value:f.deadline,onChange:ie=>p({...f,deadline:ie.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex items-center justify-end gap-3",children:[e.jsx("button",{onClick:()=>{m(!1),p({title:"",description:"",priority:"medium",deadline:""})},className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:""}),e.jsx("button",{onClick:I,disabled:!f.title.trim(),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:" "})]})]})}),j&&v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:" "}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[": ",s.title]})]}),e.jsx("button",{onClick:se,className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:" ",children:e.jsx(Xe,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"  *"}),e.jsx("input",{type:"text",value:N.title,onChange:ie=>S({...N,title:ie.target.value}),onBlur:J,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"  "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsx("textarea",{value:N.description,onChange:ie=>S({...N,description:ie.target.value}),onBlur:J,rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:" ..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsxs("select",{value:N.status,onChange:ie=>{S({...N,status:ie.target.value}),J()},className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"pending",children:""}),e.jsx("option",{value:"new",children:""}),e.jsx("option",{value:"in_progress",children:" "}),e.jsx("option",{value:"review",children:" "}),e.jsx("option",{value:"completed",children:""}),e.jsx("option",{value:"cancelled",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsxs("select",{value:N.priority,onChange:ie=>{S({...N,priority:ie.target.value}),J()},className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"normal",children:""}),e.jsx("option",{value:"medium",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"urgent",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsx("input",{type:"date",value:N.deadline,onChange:ie=>S({...N,deadline:ie.target.value}),onBlur:J,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(Es,{className:"w-5 h-5"})," (",k.length,")"]}),e.jsx("div",{className:"space-y-3 mb-4 max-h-64 overflow-y-auto",children:z?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Dt,{className:"w-6 h-6 text-blue-500 animate-spin"})}):k.length>0?k.map(ie=>e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:(ie.author?.first_name||ie.author?.username||"U")[0].toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:ie.author?.first_name||ie.author?.username||""}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(ie.created_at).toLocaleString("ru-RU")})]})]})}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:ie.comment})]},ie.id)):e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"  "})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:T,onChange:ie=>E(ie.target.value),onKeyPress:ie=>ie.key==="Enter"&&q(),placeholder:" ...",className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("button",{onClick:q,disabled:!T.trim()||C,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:C?e.jsx(Dt,{className:"w-4 h-4 animate-spin"}):e.jsx(Qs,{className:"w-4 h-4"})})]})]})]})}),e.jsx("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex items-center justify-end gap-3",children:e.jsx("button",{onClick:()=>{g(!1),y(null),_([]),E("")},className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:""})})]})})]})},CY=()=>{const{project:s}=Wo(),[t,r]=w.useState([]),[a,n]=w.useState(!0),[i,o]=w.useState(null),[c,u]=w.useState("all");w.useEffect(()=>{s?.id&&h()},[s?.id]);const h=async()=>{if(s?.id)try{n(!0);const y=await fe.get(`/admin/api/projects/${s.id}/tasks`);if(y.data.success){const N=(y.data.tasks||[]).filter(S=>S.type==="REVISION");r(N)}o(null)}catch(y){console.error("Error loading revisions:",y),o("  ")}finally{n(!1)}},m={new:{label:"",color:"blue",icon:qe},in_progress:{label:" ",color:"yellow",icon:Ue},review:{label:" ",color:"purple",icon:wn},completed:{label:"",color:"green",icon:zr},rejected:{label:"",color:"red",icon:kl}},f={low:{label:"",color:"gray"},medium:{label:"",color:"blue"},high:{label:"",color:"orange"},urgent:{label:"",color:"red"}},p=y=>m[y]||m.new,j=y=>f[y]||f.medium,g=t.filter(y=>c==="all"?!0:y.status===c),v=t.reduce((y,N)=>(y[N.status]=(y[N.status]||0)+1,y),{});return a?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Dt,{className:"w-8 h-8 text-blue-500 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:" "}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:[e.jsx(Ve,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]})]}),i&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:e.jsx("p",{className:"text-red-600 dark:text-red-400",children:i})}),e.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 border border-purple-200 dark:border-purple-800",children:e.jsxs("p",{className:"text-sm text-purple-700 dark:text-purple-300",children:[e.jsx("strong",{children:""})," -      .           ."]})}),e.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",children:[e.jsxs("button",{onClick:()=>u("all"),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors ${c==="all"?"bg-purple-500 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[" (",t.length,")"]}),Object.entries(m).map(([y,N])=>e.jsxs("button",{onClick:()=>u(y),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors ${c===y?`bg-${N.color}-500 text-white`:"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[N.label," (",v[y]||0,")"]},y))]}),g.length>0?e.jsx("div",{className:"space-y-3",children:g.map(y=>{const N=p(y.status),S=j(y.priority),k=N.icon;return e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border-2 border-purple-200 dark:border-purple-800 p-4 hover:shadow-md transition-shadow cursor-pointer",children:e.jsx("div",{className:"flex items-start justify-between gap-4",children:e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:`p-2 bg-${N.color}-100 dark:bg-${N.color}-900/20 rounded-lg mt-1`,children:e.jsx(k,{className:`w-5 h-5 text-${N.color}-600 dark:text-${N.color}-400`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2 flex-wrap",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:y.title}),y.created_from_chat&&e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",children:" "}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium bg-${S.color}-100 text-${S.color}-700 dark:bg-${S.color}-900/30 dark:text-${S.color}-400`,children:S.label}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium bg-${N.color}-100 text-${N.color}-700 dark:bg-${N.color}-900/30 dark:text-${N.color}-400`,children:N.label})]}),y.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2",children:y.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400",children:[y.assigned_to_name&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(st,{className:"w-3 h-3"}),e.jsx("span",{children:y.assigned_to_name})]}),y.deadline&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(pt,{className:"w-3 h-3"}),e.jsx("span",{children:new Date(y.deadline).toLocaleDateString("ru-RU")})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ue,{className:"w-3 h-3"}),e.jsxs("span",{children:[": ",new Date(y.created_at).toLocaleDateString("ru-RU")]})]})]})]})]})})},y.id)})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(wn,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:c==="all"?"  ":"    "}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:c==="all"?"     ":"  "}),c==="all"&&e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:[e.jsx(Ve,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]})]})]})},TY=()=>{const{project:s}=Wo(),{user:t}=bp(),[r,a]=w.useState([]),[n,i]=w.useState(!0),[o,c]=w.useState(null),[u,h]=w.useState(""),[m,f]=w.useState(!1),[p,j]=w.useState(null),[g,v]=w.useState(!1),[y,N]=w.useState(null),S=w.useRef(null);w.useEffect(()=>{s?.id&&k()},[s?.id]),w.useEffect(()=>{_()},[r]);const k=async()=>{if(s?.id)try{i(!0);const M=await fe.get(`/admin/api/projects/${s.id}/chat`);if(M.data.success&&M.data.chat){const C=M.data.chat.id;N(C);const A=await fe.get(`/admin/api/chats/${C}/messages`);A.data.success&&a(A.data.messages||[])}c(null)}catch(M){console.error("Error loading chat:",M),c("  ")}finally{i(!1)}},_=()=>{S.current?.scrollIntoView({behavior:"smooth"})},T=async M=>{if(M.preventDefault(),!(!u.trim()||m||!y))try{if(f(!0),(await fe.post(`/admin/api/chats/${y}/messages`,{text:u.trim(),sender_type:"admin",sender_id:t?.id||1})).data.success){const A=await fe.get(`/admin/api/chats/${y}/messages`);A.data.success&&a(A.data.messages||[]),h("")}}catch(C){console.error("Error sending message:",C),alert("  ")}finally{f(!1)}},E=async M=>{if(s?.id)try{(await fe.post("/admin/api/tasks",{project_id:s.id,title:`  : ${M.text.substring(0,50)}...`,description:M.text,type:"TASK",status:"new",priority:"medium",created_from_chat:!0})).data.success&&(alert("  !"),v(!1),j(null))}catch(C){console.error("Error creating task:",C),alert("  ")}},z=async M=>{if(s?.id)try{(await fe.post("/admin/api/tasks",{project_id:s.id,title:`  : ${M.text.substring(0,50)}...`,description:M.text,type:"REVISION",status:"new",priority:"high",created_from_chat:!0})).data.success&&(alert("  !"),v(!1),j(null))}catch(C){console.error("Error creating revision:",C),alert("  ")}};return n?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Dt,{className:"w-8 h-8 text-blue-500 animate-spin"})}):e.jsxs("div",{className:"flex flex-col h-[600px]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"  "}),s.client_id&&e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"w-4 h-4"})," ID: ",s.client_id]})})]}),o&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-4",children:e.jsx("p",{className:"text-red-600 dark:text-red-400",children:o})}),e.jsxs("div",{className:"flex-1 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden flex flex-col",children:[r.length>0?e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[r.map(M=>{const C=!M.is_client;return e.jsx("div",{className:`flex ${C?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[70%] ${C?"order-2":"order-1"}`,children:[e.jsx("div",{className:`text-xs text-gray-500 dark:text-gray-400 mb-1 ${C?"text-right":"text-left"}`,children:M.author_name||M.sender_name||(M.is_client?"":"")}),e.jsxs("div",{className:`relative group rounded-lg px-4 py-3 ${C?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white"}`,children:[e.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:M.text}),M.is_client&&e.jsx("div",{className:"absolute top-0 right-0 -mt-8 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs("div",{className:"flex items-center gap-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-1",children:[e.jsxs("button",{onClick:()=>{j(M),v(!0)},className:"flex items-center gap-1 px-2 py-1 text-xs text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors",title:" ",children:[e.jsx(ar,{className:"w-3 h-3"}),e.jsx("span",{children:""})]}),e.jsxs("button",{onClick:()=>{j(M),z(M)},className:"flex items-center gap-1 px-2 py-1 text-xs text-purple-600 dark:text-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/20 rounded transition-colors",title:" ",children:[e.jsx(wn,{className:"w-3 h-3"}),e.jsx("span",{children:""})]})]})})]}),e.jsxs("div",{className:`flex items-center gap-1 text-xs text-gray-400 mt-1 ${C?"justify-end":"justify-start"}`,children:[e.jsx(Ue,{className:"w-3 h-3"}),e.jsx("span",{children:new Date(M.created_at).toLocaleString("ru-RU")})]})]})},M.id)}),e.jsx("div",{ref:S})]}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center p-8",children:[e.jsx(Es,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"  "}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"   "})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("form",{onSubmit:T,className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:u,onChange:M=>h(M.target.value),placeholder:" ...",className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:m}),e.jsxs("button",{type:"submit",disabled:!u.trim()||m,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[m?e.jsx(Dt,{className:"w-4 h-4 animate-spin"}):e.jsx(Qs,{className:"w-4 h-4"}),e.jsx("span",{children:""})]})]})})]}),g&&p&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"   ?"}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-3 mb-4",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-3",children:p.text})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>E(p),className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:" "}),e.jsx("button",{onClick:()=>{v(!1),j(null)},className:"flex-1 px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:""})]})]})})]})},EY=()=>{const{project:s}=Wo(),[t,r]=w.useState([]),[a,n]=w.useState(!0),[i,o]=w.useState(null),[c,u]=w.useState(!1),[h,m]=w.useState({type:"contract",name:"",number:"",description:""}),[f,p]=w.useState(!1);w.useEffect(()=>{s?.id&&j()},[s?.id]);const j=async()=>{if(s?.id)try{n(!0);const _=await fe.get(`/admin/api/projects/${s.id}/documents`);_.data.success&&r(_.data.documents||[]),o(null)}catch(_){console.error("Error loading documents:",_),o("  ")}finally{n(!1)}},g={contract:{label:"",color:"blue"},act:{label:"",color:"green"},invoice:{label:"",color:"purple"},specification:{label:"",color:"orange"},other:{label:"",color:"gray"}},v={draft:{label:"",color:"gray"},sent:{label:"",color:"blue"},signed:{label:"",color:"green"},rejected:{label:"",color:"red"}},y=_=>(g[_]||g.other).color,N=_=>(v[_]||v.draft).color,S=_=>_?`${(_/(1024*1024)).toFixed(2)} `:"-",k=async()=>{if(s?.id){if(!h.name.trim()){o("  ");return}try{p(!0),(await fe.post(`/admin/api/projects/${s.id}/documents`,{type:h.type,name:h.name.trim(),number:h.number.trim()||null,description:h.description.trim()||null})).data.success&&(u(!1),m({type:"contract",name:"",number:"",description:""}),j(),o(null))}catch(_){console.error("Error creating document:",_),o("  : "+(_.response?.data?.message||_.message))}finally{p(!1)}}};return a?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Dt,{className:"w-8 h-8 text-blue-500 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:" "}),e.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-4 py-2 bg-amber-500 text-white rounded-lg hover:bg-amber-600 transition-colors",children:[e.jsx(Ve,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]})]}),i&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:e.jsx("p",{className:"text-red-600 dark:text-red-400",children:i})}),t.length>0?e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900/50 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:t.map(_=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-900/30 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-${y(_.type)}-100 text-${y(_.type)}-700 dark:bg-${y(_.type)}-900/30 dark:text-${y(_.type)}-400`,children:g[_.type]?.label||_.type})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:_.name})]}),_.description&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:_.description})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:_.number||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-${N(_.status)}-100 text-${N(_.status)}-700 dark:bg-${N(_.status)}-900/30 dark:text-${N(_.status)}-400`,children:v[_.status]?.label||_.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:_.date?new Date(_.date).toLocaleDateString("ru-RU"):new Date(_.created_at).toLocaleDateString("ru-RU")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:S(_.file_size)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[_.file_path&&e.jsx("button",{className:"p-1.5 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors",title:"",children:e.jsx(wt,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1.5 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded transition-colors",title:"",children:e.jsx(Ft,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1.5 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"",children:e.jsx(Xe,{className:"w-4 h-4"})})]})})]},_.id))})]})})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(Ie,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"  "}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"   "}),e.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-4 py-2 bg-amber-500 text-white rounded-lg hover:bg-amber-600 transition-colors",children:[e.jsx(fn,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-lg w-full p-6 shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:" "}),e.jsx("button",{onClick:()=>u(!1),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),i&&e.jsx("div",{className:"mb-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:e.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:i})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"  *"}),e.jsxs("select",{value:h.type,onChange:_=>m({...h,type:_.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:[e.jsx("option",{value:"contract",children:""}),e.jsx("option",{value:"act",children:""}),e.jsx("option",{value:"invoice",children:""}),e.jsx("option",{value:"specification",children:""}),e.jsx("option",{value:"other",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"  *"}),e.jsx("input",{type:"text",value:h.name,onChange:_=>m({...h,name:_.target.value}),placeholder:" 123  01.12.2025",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-amber-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:" "}),e.jsx("input",{type:"text",value:h.number,onChange:_=>m({...h,number:_.target.value}),placeholder:"123",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-amber-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsx("textarea",{value:h.description,onChange:_=>m({...h,description:_.target.value}),placeholder:"   ",rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-amber-500 focus:border-transparent resize-none"})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3 border border-blue-200 dark:border-blue-800",children:e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[e.jsx("strong",{children:":"}),"        .      ."]})})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-6",children:[e.jsx("button",{onClick:k,disabled:f,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-amber-500 text-white rounded-lg hover:bg-amber-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:f?e.jsxs(e.Fragment,{children:[e.jsx(Dt,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ve,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]})}),e.jsx("button",{onClick:()=>{u(!1),o(null)},disabled:f,className:"px-4 py-2.5 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors disabled:opacity-50",children:""})]})]})})]})},AY=()=>{const{project:s}=Wo(),[t,r]=w.useState([]),[a,n]=w.useState({total_amount:0,paid_amount:0,pending_amount:0}),[i,o]=w.useState(null),[c,u]=w.useState(0),[h,m]=w.useState(!0),[f,p]=w.useState(null),[j,g]=w.useState(!1),[v,y]=w.useState({type:"PREPAYMENT",amount:"",due_date:"",description:""}),[N,S]=w.useState(!1);w.useEffect(()=>{s?.id&&(k(),_())},[s?.id]);const k=async()=>{if(s?.id)try{m(!0);const A=await fe.get(`/admin/api/projects/${s.id}/payments`);A.data.success&&(r(A.data.payments||[]),n(A.data.summary||{total_amount:0,paid_amount:0,pending_amount:0})),p(null)}catch(A){console.error("Error loading payments:",A),p("  ")}finally{m(!1)}},_=async()=>{if(s?.id)try{const A=await fe.get(`/admin/hosting/api/project/${s.id}/hosting-costs`);A.data.success&&(o(A.data.finance||null),u(A.data.servers_count||0))}catch(A){console.error("Error loading hosting costs:",A)}},T=async()=>{if(s?.id){if(!v.amount||parseFloat(v.amount)<=0){p("   ");return}try{S(!0),(await fe.post(`/admin/api/projects/${s.id}/payments`,{type:v.type,amount:parseFloat(v.amount),due_date:v.due_date||null,description:v.description||null})).data.success&&(g(!1),y({type:"PREPAYMENT",amount:"",due_date:"",description:""}),k())}catch(A){console.error("Error creating payment:",A),p("  : "+(A.response?.data?.message||A.message))}finally{S(!1)}}},E=async A=>{try{const Z=new Date().toISOString().split("T")[0];(await fe.patch(`/admin/api/payments/${A}`,{status:"PAID",paid_at:Z})).data.success&&k()}catch(Z){console.error("Error updating payment:",Z),p("  ")}},z={PREPAYMENT:"",MILESTONE:"",FINAL:"",ADDITIONAL:""},M={PLANNED:{label:"",color:"gray",icon:Ue},PENDING:{label:"",color:"yellow",icon:Ue},PAID:{label:"",color:"green",icon:it},OVERDUE:{label:"",color:"red",icon:Sa}},C=A=>M[A]||M.PLANNED;return h?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Dt,{className:"w-8 h-8 text-blue-500 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:" "}),e.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-2 px-4 py-2 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition-colors",children:[e.jsx(Ve,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]})]}),f&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:e.jsx("p",{className:"text-red-600 dark:text-red-400",children:f})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg p-6 border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-3 bg-blue-500 rounded-lg",children:e.jsx(Ge,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:[a.total_amount.toLocaleString("ru-RU")," "]})]})]})}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-lg p-6 border border-green-200 dark:border-green-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-3 bg-green-500 rounded-lg",children:e.jsx(ct,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:""}),e.jsxs("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:[a.paid_amount.toLocaleString("ru-RU")," "]})]})]}),e.jsx("div",{className:"w-full bg-green-200 dark:bg-green-900/50 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all",style:{width:`${a.total_amount>0?a.paid_amount/a.total_amount*100:0}%`}})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 rounded-lg p-6 border border-red-200 dark:border-red-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-3 bg-red-500 rounded-lg",children:e.jsx(Sa,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:""}),e.jsxs("p",{className:"text-2xl font-bold text-red-900 dark:text-red-100",children:[a.pending_amount.toLocaleString("ru-RU")," "]})]})]}),e.jsx("div",{className:"w-full bg-red-200 dark:bg-red-900/50 rounded-full h-2",children:e.jsx("div",{className:"bg-red-500 h-2 rounded-full transition-all",style:{width:`${a.total_amount>0?a.pending_amount/a.total_amount*100:0}%`}})})]})]}),i&&c>0&&e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-lg p-6 border border-purple-200 dark:border-purple-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-purple-500 rounded-lg",children:e.jsx(hn,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-purple-600 dark:text-purple-400",children:"  "}),e.jsxs("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:[i.monthly_cost.toLocaleString("ru-RU")," /"]})]})]}),e.jsxs("span",{className:"px-3 py-1 bg-purple-200 dark:bg-purple-900/50 text-purple-700 dark:text-purple-300 rounded-full text-sm font-medium",children:[c," ",c===1?"":c<5?"":""]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-purple-200 dark:border-purple-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400",children:""}),e.jsxs("p",{className:"text-lg font-semibold text-purple-900 dark:text-purple-100",children:[i.total_cost_price.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400",children:" "}),e.jsxs("p",{className:"text-lg font-semibold text-purple-900 dark:text-purple-100",children:[i.total_client_price.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400",children:""}),e.jsxs("p",{className:"text-lg font-semibold text-purple-900 dark:text-purple-100",children:[i.total_service_fee.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:""}),e.jsxs("p",{className:`text-lg font-bold ${i.total_profit>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[i.total_profit>=0?"+":"",i.total_profit.toLocaleString("ru-RU")," "]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:" "})}),t.length>0?e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:t.map(A=>{const Z=C(A.status),I=Z.icon;return e.jsx("div",{className:"px-6 py-4 hover:bg-gray-50 dark:hover:bg-gray-900/30 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:`p-2 bg-${Z.color}-100 dark:bg-${Z.color}-900/20 rounded-lg`,children:e.jsx(I,{className:`w-5 h-5 text-${Z.color}-600 dark:text-${Z.color}-400`})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:z[A.type]||A.type}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium bg-${Z.color}-100 text-${Z.color}-700 dark:bg-${Z.color}-900/30 dark:text-${Z.color}-400`,children:Z.label})]}),A.description&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:A.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400",children:[A.due_date&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(pt,{className:"w-3 h-3"}),e.jsxs("span",{children:[": ",new Date(A.due_date).toLocaleDateString("ru-RU")]})]}),A.paid_at&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(it,{className:"w-3 h-3"}),e.jsxs("span",{children:[": ",new Date(A.paid_at).toLocaleDateString("ru-RU")]})]})]})]})]}),e.jsxs("div",{className:"text-right flex items-center gap-3",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[A.amount.toLocaleString("ru-RU")," "]})}),A.status!=="PAID"&&e.jsx("button",{onClick:()=>E(A.id),className:"px-3 py-1.5 text-sm bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors whitespace-nowrap",children:""})]})]})},A.id)})}):e.jsx("div",{className:"px-6 py-12 text-center",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"      "})})]}),j&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-lg w-full p-6 shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:" "}),e.jsx("button",{onClick:()=>g(!1),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:" "}),e.jsxs("select",{value:v.type,onChange:A=>y({...v,type:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",children:[e.jsx("option",{value:"PREPAYMENT",children:""}),e.jsx("option",{value:"MILESTONE",children:""}),e.jsx("option",{value:"FINAL",children:""}),e.jsx("option",{value:"ADDITIONAL",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:" () *"}),e.jsx("input",{type:"number",value:v.amount,onChange:A=>y({...v,amount:A.target.value}),placeholder:" ",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:" "}),e.jsx("input",{type:"date",value:v.due_date,onChange:A=>y({...v,due_date:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsx("textarea",{value:v.description,onChange:A=>y({...v,description:A.target.value}),placeholder:"   ",rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent resize-none"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-6",children:[e.jsx("button",{onClick:T,disabled:N,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:N?e.jsxs(e.Fragment,{children:[e.jsx(Dt,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ve,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]})}),e.jsx("button",{onClick:()=>g(!1),disabled:N,className:"px-4 py-2.5 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors disabled:opacity-50",children:""})]})]})})]})},DY=()=>{const{project:s}=Wo(),[t,r]=w.useState([]),[a,n]=w.useState(null),[i,o]=w.useState(!0),[c,u]=w.useState(null),[h,m]=w.useState(null),[f,p]=w.useState(!1),[j,g]=w.useState([]),[v,y]=w.useState(null);w.useEffect(()=>{s?.id&&(N(),S())},[s?.id]);const N=async()=>{if(s?.id)try{o(!0);const C=await fe.get(`/admin/hosting/api/servers?project_id=${s.id}`);C.data.success&&r(C.data.servers||[]),u(null)}catch(C){console.error("Error loading hosting:",C),u("    ")}finally{o(!1)}},S=async()=>{if(s?.id)try{const C=await fe.get(`/admin/hosting/api/project/${s.id}/hosting-costs`);C.data.success&&n(C.data.finance||null)}catch(C){console.error("Error loading hosting finance:",C)}},k=(C,A)=>{navigator.clipboard.writeText(C),m(A),setTimeout(()=>m(null),2e3)},_=async()=>{try{const C=await fe.get("/admin/hosting/api/servers");if(C.data.success){const A=t.map(I=>I.id),Z=(C.data.servers||[]).filter(I=>!A.includes(I.id));g(Z)}}catch(C){console.error("Error loading available servers:",C),u("   ")}},T=()=>{_(),p(!0)},E=async()=>{if(!(!v||!s?.id))try{(await fe.put(`/admin/hosting/api/server/${v}`,{project_id:s.id})).data.success&&(p(!1),y(null),N())}catch(C){console.error("Error linking server:",C),u("  ")}},z={active:{label:"",color:"green"},suspended:{label:"",color:"yellow"},expired:{label:"",color:"red"},pending:{label:"",color:"blue"}},M=C=>z[C]||z.pending;return i?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Dt,{className:"w-8 h-8 text-blue-500 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:" "}),e.jsxs("button",{onClick:T,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[e.jsx(hn,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]})]}),c&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:e.jsx("p",{className:"text-red-600 dark:text-red-400",children:c})}),a&&t.length>0&&e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-indigo-100 dark:from-purple-900/20 dark:to-indigo-900/20 rounded-xl p-6 border border-purple-200 dark:border-purple-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-purple-500 rounded-lg",children:e.jsx(Ge,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-purple-900 dark:text-purple-100",children:" "}),e.jsxs("p",{className:"text-sm text-purple-600 dark:text-purple-400",children:[t.length," ",t.length===1?"":t.length<5?"":""," "]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-purple-600 dark:text-purple-400",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:[a.monthly_cost.toLocaleString("ru-RU")," "]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-purple-200 dark:border-purple-700",children:[e.jsxs("div",{className:"bg-white/50 dark:bg-gray-800/50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:""}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[a.total_cost_price.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"bg-white/50 dark:bg-gray-800/50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:" "}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[a.total_client_price.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"bg-white/50 dark:bg-gray-800/50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:""}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[a.total_service_fee.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"bg-white/50 dark:bg-gray-800/50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mb-1",children:""}),e.jsxs("p",{className:`text-lg font-bold ${a.total_profit>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[a.total_profit>=0?"+":"",a.total_profit.toLocaleString("ru-RU")," "]})]})]}),t.some(C=>{const A=new Date(C.next_payment_date),Z=new Date;return Math.ceil((A.getTime()-Z.getTime())/(1e3*60*60*24))<=7})&&e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-yellow-600 dark:text-yellow-400 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-3",children:[e.jsx(qe,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"      7 "})]})]}),t.length>0?e.jsx("div",{className:"space-y-4",children:t.map(C=>{const A=M(C.status);return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-500 rounded-lg",children:e.jsx(hn,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:C.server_name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:C.configuration||" "})]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium bg-${A.color}-100 text-${A.color}-700 dark:bg-${A.color}-900/30 dark:text-${A.color}-400`,children:A.label})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[C.ip_address&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"IP "}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm font-mono text-gray-900 dark:text-white",children:C.ip_address}),e.jsx("button",{onClick:()=>k(C.ip_address,`ip-${C.id}`),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors",title:" IP",children:h===`ip-${C.id}`?e.jsx(it,{className:"w-3 h-3 text-green-600"}):e.jsx(Ks,{className:"w-3 h-3 text-gray-600"})})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:""}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:C.client_name})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:" "}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(C.next_payment_date).toLocaleDateString("ru-RU")})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:""}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:[C.cost_price.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:" "}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:[C.client_price.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:""}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:[C.service_fee.toLocaleString("ru-RU")," "]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:""}),e.jsxs("p",{className:"text-sm font-semibold text-green-600 dark:text-green-400",children:[C.profit_amount.toLocaleString("ru-RU"),"  (",C.profit_percent.toFixed(1),"%)"]})]})]}),C.notes&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:""}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:C.notes})]})]},C.id)})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(hn,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"  "}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"      "}),e.jsxs("button",{onClick:T,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[e.jsx(hn,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:" "}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:['      "',s.title,'"']})]}),e.jsx("div",{className:"p-6 space-y-4",children:j.length>0?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:" "}),e.jsxs("select",{value:v||"",onChange:C=>y(Number(C.target.value)),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:" ..."}),j.map(C=>e.jsxs("option",{value:C.id,children:[C.server_name," - ",C.client_name," (",C.client_price.toLocaleString("ru-RU")," )"]},C.id))]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"    "}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-2",children:'     ""'})]})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex items-center justify-end gap-3",children:[e.jsx("button",{onClick:()=>{p(!1),y(null)},className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:""}),e.jsx("button",{onClick:E,disabled:!v,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:" "})]})]})})]})},Ls={getTasks:async s=>{const t=new URLSearchParams;s?.status&&t.append("status",s.status),s?.assigned_to_id&&t.append("assigned_to_id",s.assigned_to_id.toString()),s?.created_by_id&&t.append("created_by_id",s.created_by_id.toString()),s?.priority&&t.append("priority",s.priority),s?.type&&t.append("type",s.type),s?.project_id&&t.append("project_id",s.project_id.toString());const r=t.toString(),a=r?`/admin/api/tasks/?${r}`:"/admin/api/tasks/";return(await fe.get(a)).data},getMyTasks:async()=>(await fe.get("/admin/api/tasks/my-tasks")).data,getEmployeeTasks:async s=>(await fe.get(`/admin/api/tasks/employee/${s}`)).data,getTask:async s=>(await fe.get(`/admin/api/tasks/${s}`)).data,createTask:async s=>(await fe.post("/admin/api/tasks/",s)).data,updateTask:async(s,t)=>(await fe.put(`/admin/api/tasks/${s}`,t)).data,updateTaskStatus:async(s,t)=>(await fe.put(`/admin/api/tasks/${s}/status`,{status:t})).data,reassignTask:async(s,t)=>(await fe.put(`/admin/api/tasks/${s}/reassign`,{assigned_to_id:t})).data,deleteTask:async s=>(await fe.delete(`/admin/api/tasks/${s}`)).data,getComments:async s=>(await fe.get(`/admin/api/tasks/${s}/comments`)).data,addComment:async(s,t,r=!1,a)=>{const n=new FormData;return n.append("comment",t),n.append("is_internal",r.toString()),a&&a.forEach(o=>{n.append("files",o)}),(await fe.post(`/admin/api/tasks/${s}/comments`,n,{headers:{"Content-Type":"multipart/form-data"},timeout:6e4})).data},markCommentRead:async(s,t)=>(await fe.post(`/admin/api/tasks/${s}/comments/${t}/mark_read`)).data,markAllCommentsRead:async s=>(await fe.post(`/admin/api/tasks/${s}/mark_all_comments_read`)).data,getUnreadCommentsCount:async s=>(await fe.get(`/admin/api/tasks/${s}/unread_comments_count`)).data,getStats:async()=>(await fe.get("/admin/api/tasks/stats/dashboard")).data,getExecutors:async()=>(await fe.get("/admin/api/users/executors")).data.executors||[],getProjects:async()=>(await fe.get("/admin/api/projects/")).data.projects||[],getProjectTasks:async s=>(await fe.get(`/admin/api/projects/${s}/tasks`)).data,updateProgress:async(s,t)=>(await fe.post(`/admin/api/tasks/${s}/progress`,{progress:t})).data,startTimer:async s=>(await fe.post(`/admin/tasks/${s}/timer/start`)).data,stopTimer:async s=>(await fe.post(`/admin/tasks/${s}/timer/stop`)).data,markCompleted:async s=>(await fe.post(`/admin/api/tasks/${s}/mark-completed`)).data,archiveTask:async s=>(await fe.post(`/admin/api/tasks/${s}/archive`)).data,getArchivedTasks:async s=>{const t=new URLSearchParams;return s?.employee_id&&t.append("employee_id",s.employee_id.toString()),s?.date_from&&t.append("date_from",s.date_from),s?.date_to&&t.append("date_to",s.date_to),(await fe.get(`/admin/api/tasks/archive/list?${t}`)).data},uploadFiles:async(s,t)=>{const r=new FormData;return t.forEach(n=>{r.append("files",n)}),(await fe.post(`/admin/api/tasks/${s}/upload-image`,r,{headers:{"Content-Type":"multipart/form-data"}})).data}},Py={bug:"bg-red-100 text-red-800 border-red-300",feature:"bg-blue-100 text-blue-800 border-blue-300",urgent:"bg-orange-100 text-orange-800 border-orange-300",design:"bg-purple-100 text-purple-800 border-purple-300",backend:"bg-green-100 text-green-800 border-green-300",frontend:"bg-cyan-100 text-cyan-800 border-cyan-300",mobile:"bg-pink-100 text-pink-800 border-pink-300",security:"bg-yellow-100 text-yellow-800 border-yellow-300",testing:"bg-indigo-100 text-indigo-800 border-indigo-300",devops:"bg-teal-100 text-teal-800 border-teal-300",api:"bg-lime-100 text-lime-800 border-lime-300",database:"bg-amber-100 text-amber-800 border-amber-300"},J7=s=>{const t=s.toLowerCase();if(Py[t])return Py[t];for(const[r,a]of Object.entries(Py))if(t.includes(r)||r.includes(t))return a;return"bg-gray-100 text-gray-800 border-gray-300"},x1=({tags:s,onRemove:t,editable:r=!1,size:a="sm",className:n=""})=>{if(!s||s.length===0)return null;const i={sm:"text-xs px-2 py-0.5",md:"text-sm px-3 py-1"};return e.jsx("div",{className:`flex flex-wrap gap-1.5 ${n}`,children:s.map((o,c)=>e.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full border font-medium ${J7(o)} ${i[a]} transition-all`,children:[e.jsxs("span",{children:["#",o]}),r&&t&&e.jsx("button",{onClick:u=>{u.stopPropagation(),t(o)},className:"hover:bg-black/10 rounded-full p-0.5 transition-colors",title:" ",children:e.jsx(Ae,{className:"w-3 h-3"})})]},c))})},eD=({value:s,onChange:t,suggestions:r=[]})=>{const[a,n]=w.useState(""),[i,o]=w.useState(!1),c=m=>{const f=m.trim().toLowerCase().replace(/^#/,"");f&&!s.includes(f)&&t([...s,f]),n(""),o(!1)},u=m=>{m.key==="Enter"||m.key===","?(m.preventDefault(),c(a)):m.key==="Backspace"&&!a&&s.length>0&&t(s.slice(0,-1))},h=r.filter(m=>!s.includes(m)&&m.toLowerCase().includes(a.toLowerCase()));return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex flex-wrap gap-1.5 p-2 border border-gray-300 rounded-lg min-h-[42px] focus-within:ring-2 focus-within:ring-blue-500 focus-within:border-blue-500",children:[e.jsx(x1,{tags:s,editable:!0,onRemove:m=>t(s.filter(f=>f!==m))}),e.jsx("input",{type:"text",value:a,onChange:m=>{n(m.target.value),o(!0)},onKeyDown:u,onFocus:()=>o(!0),onBlur:()=>setTimeout(()=>o(!1),200),placeholder:s.length===0?"  (Enter  )...":"",className:"flex-1 min-w-[120px] outline-none text-sm"})]}),i&&h.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-40 overflow-y-auto",children:h.map((m,f)=>e.jsx("button",{onClick:()=>c(m),className:"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm flex items-center gap-2 transition-colors",children:e.jsxs("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${J7(m)}`,children:["#",m]})},f))})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"  Enter     "})]})},RY=({task:s,onView:t,onEdit:r,onDelete:a,onStatusChange:n,onDragStart:i})=>{const[o,c]=w.useState(!!s.timer_started_at),[u,h]=w.useState(0),[m,f]=w.useState(!1),p=w.useRef(0),j=()=>{if(s.color&&s.color!=="normal")return{red:"bg-gradient-to-br from-red-100 to-red-200 border-red-600",yellow:"bg-gradient-to-br from-yellow-100 to-yellow-200 border-yellow-600",green:"bg-gradient-to-br from-green-100 to-green-200 border-green-600"}[s.color]||"";const C={urgent:"bg-gradient-to-br from-red-100 to-red-200 border-red-600",high:"bg-gradient-to-br from-orange-100 to-orange-200 border-orange-500",normal:"bg-gradient-to-br from-blue-100 to-blue-200 border-blue-500",low:"bg-gradient-to-br from-gray-100 to-gray-200 border-gray-400"};return C[s.priority]||C.normal},g=()=>{switch(s.priority){case"urgent":return"bg-red-200 text-red-900";case"high":return"bg-orange-200 text-orange-900";case"normal":return"bg-blue-200 text-blue-900";case"low":return"bg-gray-200 text-gray-900";default:return"bg-gray-200 text-gray-900"}},v=()=>{switch(s.priority){case"urgent":return"";case"high":return"";case"normal":return"";case"low":return"";default:return s.priority.toUpperCase()}},y=()=>{switch(s.status){case"pending":return"bg-blue-200 text-blue-900";case"in_progress":return"bg-yellow-200 text-yellow-900";case"completed":return"bg-green-200 text-green-900";default:return"bg-gray-200 text-gray-900"}},N=()=>{switch(s.status){case"pending":return"";case"in_progress":return" ";case"completed":return"";default:return s.status.toUpperCase()}},S=C=>{if(!C)return"0 0";const A=Math.floor(C/3600),Z=Math.floor(C%3600/60);return`${A} ${Z}`},k=C=>C?new Date(C).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}):null,_=async C=>{C.stopPropagation();try{o?await Ls.stopTimer(s.id):await Ls.startTimer(s.id),c(!o)}catch(A){console.error("Error toggling timer:",A)}},T=(C,A)=>{C.stopPropagation(),n(A)},E=C=>{p.current=Date.now(),f(!0),i&&i(C)},z=()=>{setTimeout(()=>{f(!1)},100)},M=C=>{Date.now()-p.current>200&&!m&&t()};return e.jsxs("div",{draggable:!0,onDragStart:E,onDragEnd:z,className:`group rounded-xl shadow-md hover:shadow-xl transition-all duration-300 p-4 cursor-move relative border-l-4 hover:-translate-y-0.5 ${m?"opacity-50":""} ${j()}`,onClick:M,children:[e.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:C=>{C.stopPropagation(),t()},className:"p-1.5 bg-white/90 hover:bg-blue-50 rounded-md transition-all shadow-sm",title:"",children:e.jsx(Ft,{className:"w-3.5 h-3.5 text-blue-600"})}),e.jsx("button",{onClick:C=>{C.stopPropagation(),a()},className:"p-1.5 bg-white/90 hover:bg-orange-50 rounded-md transition-all shadow-sm",title:" ",children:e.jsx(_l,{className:"w-3.5 h-3.5 text-orange-600"})})]}),e.jsxs("h4",{className:"font-semibold text-gray-900 mb-2 pr-16 text-[0.95rem] leading-tight",children:[s.priority==="urgent"&&e.jsx(qe,{className:"w-4 h-4 inline-block mr-1.5 text-red-600 animate-pulse"}),s.title]}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2 leading-relaxed",children:s.description}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"mb-3",children:e.jsx(x1,{tags:s.tags,size:"sm"})}),e.jsxs("div",{className:"flex gap-2 mb-3 flex-wrap",children:[e.jsx("span",{className:`text-[0.7rem] font-bold px-2 py-1 rounded-md uppercase ${g()}`,children:v()}),e.jsx("span",{className:`text-[0.7rem] font-bold px-2 py-1 rounded-md uppercase ${y()}`,children:N()}),s.is_overdue&&e.jsx("span",{className:"text-[0.7rem] font-bold px-2 py-1 rounded-md uppercase bg-red-200 text-red-900",children:""})]}),s.deadline&&e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-600 mb-3",children:[e.jsx(pt,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:k(s.deadline)})]}),s.status!=="completed"&&e.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[e.jsxs("div",{className:"flex-1 flex items-center gap-2 cursor-pointer hover:scale-105 transition-transform",children:[e.jsx("div",{className:"flex-1 h-2 bg-indigo-100 rounded-full overflow-hidden relative",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-indigo-600 rounded-full transition-all duration-500",style:{width:`${s.progress||0}%`}})}),e.jsxs("span",{className:"text-xs font-bold text-indigo-600 min-w-[40px] text-right",children:[s.progress||0,"%"]})]}),s.time_spent_seconds!==void 0&&s.time_spent_seconds>0&&e.jsx("div",{className:"flex items-center gap-1.5",children:e.jsxs("div",{onClick:_,className:`flex items-center gap-1.5 px-2.5 py-1 rounded-md text-xs font-bold cursor-pointer transition-all ${o?"bg-green-100 text-green-700 animate-pulse":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[o?e.jsx(rm,{className:"w-3 h-3"}):e.jsx(bi,{className:"w-3 h-3"}),e.jsx("span",{children:S(s.time_spent_seconds)})]})}),s.status==="pending"&&e.jsxs("button",{onClick:C=>T(C,"in_progress"),className:"px-3 py-1 bg-yellow-100 text-yellow-700 hover:bg-yellow-200 rounded-md text-xs font-bold transition-all flex items-center gap-1",title:"  ",children:[e.jsx(bi,{className:"w-3 h-3"}),e.jsx("span",{children:""})]}),s.status==="in_progress"&&e.jsxs("button",{onClick:C=>T(C,"completed"),className:"px-3 py-1 bg-green-100 text-green-700 hover:bg-green-200 rounded-md text-xs font-bold transition-all flex items-center gap-1",title:"",children:[e.jsx(it,{className:"w-3 h-3"}),e.jsx("span",{children:""})]})]})]})},MY=({tasks:s,onView:t,onEdit:r,onDelete:a})=>{const n={pending:qe,in_progress:Ue,completed:ar},i={pending:"blue",in_progress:"yellow",completed:"green"},o={pending:"",in_progress:" ",completed:""},c={low:"gray",normal:"blue",high:"orange",urgent:"red"},u={low:"",normal:"",high:"",urgent:""},h=g=>n[g]||qe,m=g=>i[g]||"gray",f=g=>o[g]||g,p=g=>c[g]||"gray",j=g=>u[g]||g;return e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900/50 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(ar,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mb-3"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"  "})]})})}):s.map(g=>{const v=h(g.status),y=m(g.status),N=p(g.priority);return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-900/30 transition-colors cursor-pointer",onClick:()=>t(g),children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[g.type==="REVISION"?e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 rounded-md text-xs font-medium",children:[e.jsx(wn,{className:"w-3 h-3"}),e.jsx("span",{children:""})]}):e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-md text-xs font-medium",children:[e.jsx(ar,{className:"w-3 h-3"}),e.jsx("span",{children:""})]}),g.created_from_chat&&e.jsx("span",{className:"px-1.5 py-0.5 bg-sky-100 dark:bg-sky-900/30 text-sky-700 dark:text-sky-400 rounded text-xs",children:""})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white line-clamp-1",children:g.title}),g.description&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 line-clamp-1 mt-0.5",children:g.description})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:g.project?e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:g.project.title}):e.jsx("span",{className:"text-sm text-gray-400",children:""})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md bg-${y}-100 dark:bg-${y}-900/30 text-${y}-700 dark:text-${y}-400`,children:[e.jsx(v,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"text-xs font-medium",children:f(g.status)})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-md text-xs font-medium bg-${N}-100 dark:bg-${N}-900/30 text-${N}-700 dark:text-${N}-400`,children:j(g.priority)})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:g.assigned_to?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white text-xs font-bold",children:(g.assigned_to.first_name||g.assigned_to.username).charAt(0).toUpperCase()}),e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:g.assigned_to.first_name&&g.assigned_to.last_name?`${g.assigned_to.first_name} ${g.assigned_to.last_name}`:g.assigned_to.username})})]}):e.jsx("span",{className:"text-sm text-gray-400",children:" "})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:g.deadline?e.jsxs("div",{className:"flex items-center gap-1.5 text-sm",children:[e.jsx(pt,{className:"w-3.5 h-3.5 text-gray-400"}),e.jsx("span",{className:g.is_overdue?"text-red-600 dark:text-red-400 font-medium":"text-gray-700 dark:text-gray-300",children:new Date(g.deadline).toLocaleDateString("ru-RU")})]}):e.jsx("span",{className:"text-sm text-gray-400",children:""})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-1",onClick:S=>S.stopPropagation(),children:[e.jsx("button",{onClick:()=>t(g),className:"p-1.5 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded transition-colors",title:"",children:e.jsx(Ft,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>r(g),className:"p-1.5 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",title:"",children:e.jsx(Zs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>a(g.id),className:"p-1.5 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 rounded transition-colors",title:"",children:e.jsx(Xe,{className:"w-4 h-4"})})]})})]},g.id)})})]})})})},OY=({isOpen:s,onClose:t,onSuccess:r,employees:a,projectId:n})=>{const[i,o]=w.useState(!1),[c,u]=w.useState({}),[h,m]=w.useState({title:"",description:"",assigned_to_id:0,priority:"normal",deadline:"",estimated_hours:void 0,color:"normal",tags:[],created_by_admin:!0,project_id:n}),f=["bug","feature","urgent","design","backend","frontend","mobile","security","testing","devops","api","database"];w.useEffect(()=>{if(s){const g=a.length>0?a[0].id:0;m({title:"",description:"",assigned_to_id:g,priority:"normal",deadline:"",estimated_hours:void 0,color:"normal",tags:[],created_by_admin:!0,project_id:n}),u({}),a.length===0&&u({assigned_to:"  .    ."})}},[s,a,n]),w.useEffect(()=>{if(s){const g=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${g}px`,document.body.style.width="100%",document.body.style.overflow="hidden",setTimeout(()=>{const v=document.querySelector(".task-create-modal-content");v&&(v.scrollTop=0)},0)}else{const g=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(g||"0")*-1)}},[s]);const p=async g=>{g.preventDefault();const v={};if(h.title.trim()||(v.title="  "),(!h.assigned_to_id||h.assigned_to_id===0)&&(v.assigned_to=" "),Object.keys(v).length>0){u(v);const y=document.querySelector(".task-create-modal-content");y&&y.scrollTo({top:0,behavior:"smooth"});return}try{o(!0),u({});const y=await Ls.createTask(h);y.success?(r(),t()):alert(`: ${y.message||" "}`)}catch(y){console.error("   :",y),alert(`  : ${y.response?.data?.error||y.message||" "}`)}finally{o(!1)}},j=(g,v)=>{m(y=>({...y,[g]:v}))};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"task-create-modal-content bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ve,{className:"w-6 h-6"}),e.jsx("h3",{className:"text-xl font-bold",children:" "})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:p,className:"p-6 space-y-4",children:[Object.keys(c).length>0&&e.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm font-semibold text-red-800",children:",    :"}),e.jsxs("ul",{className:"mt-2 text-sm text-red-700 list-disc list-inside",children:[c.title&&e.jsx("li",{children:c.title}),c.assigned_to&&e.jsx("li",{children:c.assigned_to})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:h.title,onChange:g=>{j("title",g.target.value),c.title&&u({...c,title:void 0})},className:`w-full px-4 py-3 border-2 rounded-lg outline-none transition-all ${c.title?"border-red-500 focus:border-red-500 focus:ring-2 focus:ring-red-200":"border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200"}`,placeholder:"  ",required:!0}),c.title&&e.jsx("p",{className:"mt-1 text-sm text-red-600 font-medium",children:c.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:h.description,onChange:g=>j("description",g.target.value),rows:4,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all resize-none",placeholder:"  "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx(eD,{value:h.tags||[],onChange:g=>j("tags",g),suggestions:f})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:h.assigned_to_id,onChange:g=>{j("assigned_to_id",parseInt(g.target.value)),c.assigned_to&&u({...c,assigned_to:void 0})},className:`w-full px-4 py-3 border-2 rounded-lg outline-none transition-all ${c.assigned_to?"border-red-500 focus:border-red-500 focus:ring-2 focus:ring-red-200":"border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200"}`,required:!0,children:[e.jsx("option",{value:0,children:" "}),a.map(g=>e.jsxs("option",{value:g.id,children:[g.name," (@",g.username,")"]},g.id))]}),c.assigned_to&&e.jsx("p",{className:"mt-1 text-sm text-red-600 font-medium",children:c.assigned_to})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:h.priority,onChange:g=>j("priority",g.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all",children:[e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"normal",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"urgent",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsxs("select",{value:h.color,onChange:g=>j("color",g.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all",children:[e.jsx("option",{value:"normal",children:" "}),e.jsx("option",{value:"red",children:" "}),e.jsx("option",{value:"yellow",children:" "}),e.jsx("option",{value:"green",children:" "})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"datetime-local",value:h.deadline,onChange:g=>j("deadline",g.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  ()"}),e.jsx("input",{type:"number",value:h.estimated_hours||"",onChange:g=>j("estimated_hours",g.target.value?parseFloat(g.target.value):void 0),min:"0",step:"0.5",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all",placeholder:"0"})]})]}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("span",{className:"font-semibold",children:" :"}),"      ."]})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:i,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:i?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(Ve,{className:"w-5 h-5"})," "]})}),e.jsx("button",{type:"button",onClick:t,disabled:i,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold disabled:opacity-50",children:""})]})]})]})}):null},LY=({isOpen:s,onClose:t,onSuccess:r,task:a,employees:n})=>{const[i,o]=w.useState(!1),[c,u]=w.useState({title:a.title,description:a.description,status:a.status,priority:a.priority,deadline:a.deadline||"",estimated_hours:a.estimated_hours,actual_hours:a.actual_hours,assigned_to_id:a.assigned_to_id,color:a.color||"normal",tags:a.tags||[]}),[h,m]=w.useState(a.deploy_url||""),f=["bug","feature","urgent","design","backend","frontend","mobile","security","testing","devops","api","database"];w.useEffect(()=>{s&&(u({title:a.title,description:a.description,status:a.status,priority:a.priority,deadline:a.deadline?a.deadline.split(".")[0]:"",estimated_hours:a.estimated_hours,actual_hours:a.actual_hours,assigned_to_id:a.assigned_to_id,color:a.color||"normal",tags:a.tags||[]}),m(a.deploy_url||""))},[s,a]),w.useEffect(()=>{if(s){const g=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${g}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const g=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(g||"0")*-1)}},[s]);const p=async g=>{if(g.preventDefault(),!c.title?.trim()){alert("  ");return}try{o(!0);const v={...c,deploy_url:h||void 0};(await Ls.updateTask(a.id,v)).success&&r()}catch(v){console.error("Error updating task:",v),alert("  ")}finally{o(!1)}},j=(g,v)=>{u(y=>({...y,[g]:v}))};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-4 flex items-center justify-between sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ka,{className:"w-6 h-6"}),e.jsx("h3",{className:"text-xl font-bold",children:" "})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:p,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:c.title,onChange:g=>j("title",g.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",placeholder:"  ",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:c.description,onChange:g=>j("description",g.target.value),rows:4,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all resize-none",placeholder:"  "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx(eD,{value:c.tags||[],onChange:g=>j("tags",g),suggestions:f})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:c.status,onChange:g=>j("status",g.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",children:[e.jsx("option",{value:"pending",children:""}),e.jsx("option",{value:"in_progress",children:" "}),e.jsx("option",{value:"completed",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("select",{value:c.assigned_to_id,onChange:g=>j("assigned_to_id",parseInt(g.target.value)),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",children:n.map(g=>e.jsxs("option",{value:g.id,children:[g.name," (@",g.username,")"]},g.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:c.priority,onChange:g=>j("priority",g.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",children:[e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"normal",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"urgent",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsxs("select",{value:c.color,onChange:g=>j("color",g.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",children:[e.jsx("option",{value:"normal",children:" "}),e.jsx("option",{value:"red",children:" "}),e.jsx("option",{value:"yellow",children:" "}),e.jsx("option",{value:"green",children:" "})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"datetime-local",value:c.deadline,onChange:g=>j("deadline",g.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(Gc,{className:"w-4 h-4 text-blue-500"}),"  "]}),e.jsx("input",{type:"url",value:h,onChange:g=>m(g.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",placeholder:"https://example.com/app"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"       "})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  ()"}),e.jsx("input",{type:"number",value:c.estimated_hours||"",onChange:g=>j("estimated_hours",g.target.value?parseFloat(g.target.value):void 0),min:"0",step:"0.5",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  ()"}),e.jsx("input",{type:"number",value:c.actual_hours||"",onChange:g=>j("actual_hours",g.target.value?parseFloat(g.target.value):void 0),min:"0",step:"0.5",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",placeholder:"0"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:i,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:i?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(ka,{className:"w-5 h-5"})," "]})}),e.jsx("button",{type:"button",onClick:t,disabled:i,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold disabled:opacity-50",children:""})]})]})]})}):null},PY=({isOpen:s,onClose:t,task:r,onEdit:a,onDelete:n,onRefresh:i})=>{const[o,c]=w.useState(r),[u,h]=w.useState([]),[m,f]=w.useState(""),[p,j]=w.useState([]),[g,v]=w.useState(!1),[y,N]=w.useState(!1),[S,k]=w.useState(!!r.timer_started_at),[_,T]=w.useState(r.progress||0),[E,z]=w.useState([]),[M,C]=w.useState(r.deploy_url||""),[A,Z]=w.useState(!1);w.useEffect(()=>{s&&(c(r),k(!!r.timer_started_at),T(r.progress||0),C(r.deploy_url||""),Z(!1),I())},[s,r]),w.useEffect(()=>{if(s){const U=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${U}px`,document.body.style.width="100%",document.body.style.overflow="hidden",()=>{const F=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(F||"0")*-1)}}},[s]);const I=async()=>{try{const U=await Ls.getComments(r.id);U.success&&h(U.comments)}catch(U){console.error("Error loading comments:",U)}},V=async()=>{try{if(S){const U=await Ls.stopTimer(o.id);U.success&&(c(U.data),k(!1),i())}else{const U=await Ls.startTimer(o.id);U.success&&(c(U.data),k(!0),i())}}catch(U){console.error("Error toggling timer:",U)}},R=async U=>{try{(await Ls.updateProgress(o.id,U)).success&&(T(U),i())}catch(F){console.error("Error updating progress:",F)}},q=async()=>{try{const U=await Ls.updateTask(o.id,{deploy_url:M});U.success&&(c(U.task),Z(!1),i())}catch(U){console.error("Error updating deploy URL:",U),alert("    ")}},J=async()=>{if(!(!m.trim()&&p.length===0))try{N(!0);const U=await Ls.addComment(o.id,m,g,p);U.success?(f(""),j([]),E.forEach(F=>URL.revokeObjectURL(F)),z([]),v(!1),I(),i()):alert(": "+(U.error||"   "))}catch(U){let F="  ";U.code==="ECONNABORTED"?F="  .     .":U.response?.data?.error&&(F=U.response.data.error),alert(F)}finally{N(!1)}},se=U=>{const F=U.clipboardData?.items;if(!F)return;const Q=[];for(let W=0;W<F.length;W++){const H=F[W];if(H.type.indexOf("image")!==-1){const re=H.getAsFile();if(re){const he=new Date().getTime(),G=new File([re],`screenshot-${he}.png`,{type:re.type});Q.push(G)}}}Q.length>0&&Y(Q)},Y=U=>{const F=[...p,...U];j(F);const Q=[];U.forEach(W=>{if(W.type.startsWith("image/")){const H=URL.createObjectURL(W);Q.push(H)}}),z([...E,...Q])},ee=U=>{const F=p.filter((W,H)=>H!==U);j(F),E[U]&&URL.revokeObjectURL(E[U]);const Q=E.filter((W,H)=>H!==U);z(Q)};w.useEffect(()=>()=>{E.forEach(U=>URL.revokeObjectURL(U))},[E]);const te=async()=>{try{(await Ls.markCompleted(o.id)).success&&(i(),t())}catch(U){console.error("Error marking completed:",U)}},K=async()=>{if(confirm(" ,     ?"))try{(await Ls.archiveTask(o.id)).success&&(i(),t())}catch(U){console.error("Error archiving task:",U)}},$=U=>{if(!U)return"0 0";const F=Math.floor(U/3600),Q=Math.floor(U%3600/60);return`${F} ${Q}`},le=U=>U?new Date(U).toLocaleString("ru-RU"):" ",ie=()=>{switch(o.priority){case"urgent":return"bg-red-100 text-red-700 border-red-300";case"high":return"bg-orange-100 text-orange-700 border-orange-300";case"normal":return"bg-blue-100 text-blue-700 border-blue-300";case"low":return"bg-gray-100 text-gray-700 border-gray-300";default:return"bg-gray-100 text-gray-700 border-gray-300"}},oe=()=>{switch(o.status){case"pending":return"bg-gradient-to-r from-blue-500 to-blue-600";case"in_progress":return"bg-gradient-to-r from-yellow-500 to-orange-500";case"completed":return"bg-gradient-to-r from-green-500 to-emerald-600";default:return"bg-gradient-to-r from-gray-500 to-gray-600"}},de=()=>{switch(o.status){case"pending":return" ";case"in_progress":return" ";case"completed":return"";default:return o.status}};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx("div",{className:`${oe()} text-white px-8 py-6 flex-shrink-0`,children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("h3",{className:"text-2xl font-bold",children:o.title}),o.is_overdue&&e.jsxs("span",{className:"flex items-center gap-1 bg-red-500 px-3 py-1 rounded-full text-sm font-semibold animate-pulse",children:[e.jsx(qe,{className:"w-4 h-4"}),""]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:`px-3 py-1.5 rounded-lg border text-sm font-semibold ${ie()}`,children:[o.priority==="urgent"&&"",o.priority==="high"&&"",o.priority==="normal"&&"",o.priority==="low"&&""]}),e.jsx("span",{className:"px-3 py-1.5 bg-white/20 backdrop-blur-sm rounded-lg text-sm font-semibold",children:de()})]})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-6 h-6"})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"p-6 space-y-4",children:[o.description&&e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 rounded-xl p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ie,{className:"w-5 h-5 text-blue-600"}),e.jsx("h4",{className:"text-lg font-bold text-gray-900",children:""})]}),e.jsx("p",{className:"text-gray-800 text-sm whitespace-pre-wrap leading-relaxed",children:o.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl p-4 border border-indigo-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ct,{className:"w-4 h-4 text-indigo-700"}),e.jsx("h4",{className:"font-bold text-gray-900",children:""})]}),e.jsx("div",{className:"text-center mb-3",children:e.jsxs("span",{className:`text-3xl font-bold ${_<25?"text-red-600":_<50?"text-orange-600":_<75?"text-yellow-600":_<100?"text-blue-600":"text-green-600"}`,children:[_,"%"]})}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{className:"w-full h-3 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full transition-all duration-500 ease-out",style:{width:`${_}%`,background:_<25?"linear-gradient(90deg, #ef4444, #f87171)":_<50?"linear-gradient(90deg, #f97316, #fb923c)":_<75?"linear-gradient(90deg, #eab308, #fde047)":_<100?"linear-gradient(90deg, #3b82f6, #60a5fa)":"linear-gradient(90deg, #22c55e, #4ade80)"}})}),e.jsx("input",{type:"range",min:"0",max:"100",value:_,onChange:U=>R(parseInt(U.target.value)),className:"absolute top-0 left-0 w-full h-3 appearance-none cursor-pointer bg-transparent opacity-0",disabled:o.status==="completed"})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1 text-center",children:"  "})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(st,{className:"w-4 h-4 text-blue-700"}),e.jsx("h4",{className:"font-bold text-gray-900",children:""})]}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:o.assigned_to?.first_name||o.assigned_to?.username||" "})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ue,{className:"w-4 h-4 text-green-700"}),e.jsx("h4",{className:"font-bold text-gray-900",children:""})]}),e.jsx("p",{className:"text-xl font-bold text-gray-900 mb-2",children:$(o.time_spent_seconds)}),o.status!=="completed"&&e.jsxs("button",{onClick:V,className:`w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg font-semibold transition-all text-sm ${S?"bg-red-500 text-white hover:bg-red-600":"bg-green-500 text-white hover:bg-green-600"}`,children:[S?e.jsx(rm,{className:"w-4 h-4"}):e.jsx(bi,{className:"w-4 h-4"}),S?"":""]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-gray-100 rounded-xl p-4 border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(st,{className:"w-4 h-4 text-slate-700"}),e.jsx("h4",{className:"font-bold text-gray-900",children:""})]}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:o.created_by?.first_name||o.created_by?.username||""})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 rounded-xl p-4 border border-orange-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(pt,{className:"w-4 h-4 text-orange-700"}),e.jsx("h4",{className:"font-bold text-gray-900",children:""})]}),e.jsx("p",{className:`text-base font-semibold ${o.is_overdue?"text-red-600":"text-gray-900"}`,children:le(o.deadline)})]}),o.tags&&o.tags.length>0&&e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-4 border border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(di,{className:"w-4 h-4 text-purple-700"}),e.jsx("h4",{className:"font-bold text-gray-900",children:""})]}),e.jsx(x1,{tags:o.tags,size:"sm"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-cyan-50 to-blue-50 rounded-xl p-4 border border-cyan-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Gc,{className:"w-4 h-4 text-cyan-700"}),e.jsx("h4",{className:"font-bold text-gray-900",children:"  "})]}),A?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"url",value:M,onChange:U=>C(U.target.value),placeholder:"https://example.com/app",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"}),e.jsx("button",{onClick:q,className:"px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors text-sm",children:""}),e.jsx("button",{onClick:()=>{C(o.deploy_url||""),Z(!1)},className:"px-4 py-2 bg-gray-200 text-gray-700 font-semibold rounded-lg hover:bg-gray-300 transition-colors text-sm",children:""})]}):e.jsx("div",{className:"flex items-center gap-2",children:o.deploy_url?e.jsxs(e.Fragment,{children:[e.jsxs("a",{href:o.deploy_url,target:"_blank",rel:"noopener noreferrer",className:"flex-1 px-3 py-2 bg-white border border-blue-300 rounded-lg text-blue-600 font-semibold hover:bg-blue-50 transition-colors flex items-center justify-center gap-2 text-sm",children:[" ",e.jsx(Gc,{className:"w-4 h-4"})]}),e.jsx("button",{onClick:()=>Z(!0),className:"px-4 py-2 bg-gray-200 text-gray-700 font-semibold rounded-lg hover:bg-gray-300 transition-colors text-sm",children:""})]}):e.jsxs("button",{onClick:()=>Z(!0),className:"w-full px-3 py-2 bg-blue-100 text-blue-700 font-semibold rounded-lg hover:bg-blue-200 transition-colors flex items-center justify-center gap-2 text-sm",children:[e.jsx(Gc,{className:"w-4 h-4"}),"   "]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-gray-100 rounded-xl p-4 border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Ha,{className:"w-4 h-4 text-slate-700"}),e.jsxs("h4",{className:"font-bold text-gray-900",children:[" (",u.length,")"]})]}),e.jsxs("div",{className:"space-y-2 mb-4 max-h-80 overflow-y-auto",children:[u.map(U=>e.jsxs("div",{className:`p-3 rounded-lg ${U.is_internal?"bg-yellow-50 border border-yellow-200":"bg-white border border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold text-xs text-gray-900",children:U.author?.first_name||U.author?.username}),e.jsx("span",{className:"text-xs text-gray-500",children:le(U.created_at)}),U.is_internal&&e.jsx("span",{className:"text-xs bg-yellow-200 text-yellow-800 px-1.5 py-0.5 rounded font-semibold",children:""})]}),e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap mb-2",children:U.comment}),U.attachments&&U.attachments.length>0&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:U.attachments.map((F,Q)=>{const W=/\.(jpg|jpeg|png|gif|webp)$/i.test(F.original_filename),re=`/admin/${F.path||F.filename}`;return W?e.jsxs("a",{href:re,target:"_blank",rel:"noopener noreferrer",className:"group relative block",children:[e.jsx("img",{src:re,alt:F.original_filename,className:"h-32 w-auto rounded-lg border-2 border-gray-200 hover:border-blue-500 transition-all cursor-pointer object-cover shadow-sm hover:shadow-md",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-opacity rounded-lg flex items-center justify-center",children:e.jsx(Gc,{className:"w-5 h-5 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 max-w-[150px] truncate",children:F.original_filename})]},Q):e.jsxs("a",{href:re,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800 bg-blue-50 px-3 py-2 rounded-lg hover:bg-blue-100 transition-colors",children:[e.jsx(wt,{className:"w-4 h-4"}),F.original_filename]},Q)})})]},U.id)),u.length===0&&e.jsx("p",{className:"text-center text-gray-400 py-4 text-sm",children:"  "})]}),e.jsxs("div",{className:"space-y-3 bg-white p-3 rounded-lg border border-gray-200",children:[e.jsx("textarea",{value:m,onChange:U=>f(U.target.value),onPaste:se,placeholder:" ... (Ctrl+V   )",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none text-sm"}),E.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:E.map((U,F)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:U,alt:`Preview ${F+1}`,className:"w-24 h-24 object-cover rounded-lg border-2 border-gray-200"}),e.jsx("button",{onClick:()=>ee(F),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Ae,{className:"w-3 h-3"})})]},F))}),p.filter(U=>!U.type.startsWith("image/")).length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:p.map((U,F)=>!U.type.startsWith("image/")&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-gray-100 rounded-lg text-sm",children:[e.jsx(rd,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-gray-700",children:U.name}),e.jsx("button",{onClick:()=>ee(F),className:"text-red-500 hover:text-red-700",children:e.jsx(Ae,{className:"w-4 h-4"})})]},F))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-lg cursor-pointer transition-colors",children:[e.jsx(rd,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"text-xs font-medium",children:""}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*,application/pdf,.doc,.docx,.xls,.xlsx,.txt",onChange:U=>Y(Array.from(U.target.files||[])),className:"hidden"})]}),p.length>0&&e.jsxs("span",{className:"text-xs text-gray-600",children:[p.length," ",p.length===1?"":""]}),e.jsx("div",{className:"flex-1"}),e.jsxs("label",{className:"flex items-center gap-1.5 text-xs",children:[e.jsx("input",{type:"checkbox",checked:g,onChange:U=>v(U.target.checked),className:"rounded"}),""]}),e.jsxs("button",{onClick:J,disabled:y||!m.trim()&&p.length===0,className:"flex items-center gap-1.5 px-4 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:[e.jsx(Qs,{className:"w-3.5 h-3.5"}),""]})]})]})]}),o.status==="in_progress"&&e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("button",{onClick:te,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg hover:from-green-600 hover:to-emerald-700 font-bold transition-all shadow-md hover:shadow-lg",children:[e.jsx(it,{className:"w-5 h-5"})," "]})})]})}),e.jsxs("div",{className:"flex-shrink-0 bg-gray-50 px-6 py-3 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:a,className:"flex items-center gap-1.5 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-all font-semibold text-sm",children:[e.jsx(kn,{className:"w-4 h-4"}),""]}),e.jsxs("button",{onClick:K,className:"flex items-center gap-1.5 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-all font-semibold text-sm",children:[e.jsx(_l,{className:"w-4 h-4"}),""]})]}),e.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-semibold text-sm",children:""})]})]})}):null},BY=({filters:s,onFilterChange:t,onClose:r,employees:a,projects:n=[]})=>{const i=(c,u)=>{t({...s,[c]:u||void 0})},o=()=>{t({})};return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:""}),e.jsx("button",{onClick:r,className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsxs("select",{value:s.type||"",onChange:c=>i("type",c.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"TASK",children:""}),e.jsx("option",{value:"REVISION",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsxs("select",{value:s.status||"",onChange:c=>i("status",c.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"pending",children:""}),e.jsx("option",{value:"in_progress",children:" "}),e.jsx("option",{value:"completed",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsxs("select",{value:s.priority||"",onChange:c=>i("priority",c.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"urgent",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"normal",children:""}),e.jsx("option",{value:"low",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsxs("select",{value:s.project_id||"",onChange:c=>i("project_id",c.target.value?parseInt(c.target.value):null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:" "}),n.map(c=>e.jsx("option",{value:c.id,children:c.title},c.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsxs("select",{value:s.assigned_to_id||"",onChange:c=>i("assigned_to_id",c.target.value?parseInt(c.target.value):null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:" "}),a.map(c=>e.jsxs("option",{value:c.id,children:[c.name," (@",c.username,")"]},c.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsxs("select",{value:s.created_by_id||"",onChange:c=>i("created_by_id",c.target.value?parseInt(c.target.value):null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:" "}),a.map(c=>e.jsxs("option",{value:c.id,children:[c.name," (@",c.username,")"]},c.id))]})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:o,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-900 font-medium transition-colors",children:" "})})]})},FY=({stats:s})=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:" "}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-6",children:[e.jsx(zc,{icon:e.jsx(Zj,{className:"w-5 h-5"}),label:" ",value:s.total_tasks,color:"blue"}),e.jsx(zc,{icon:e.jsx(Ue,{className:"w-5 h-5"}),label:"",value:s.pending_tasks,color:"indigo"}),e.jsx(zc,{icon:e.jsx(ct,{className:"w-5 h-5"}),label:" ",value:s.in_progress_tasks,color:"yellow"}),e.jsx(zc,{icon:e.jsx(it,{className:"w-5 h-5"}),label:"",value:s.completed_tasks,color:"green"}),e.jsx(zc,{icon:e.jsx(ir,{className:"w-5 h-5"}),label:"",value:s.overdue_tasks,color:"red"}),e.jsx(zc,{icon:e.jsx(eB,{className:"w-5 h-5"}),label:"",value:s.today_tasks,color:"orange"})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:" "}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsx(q0,{label:"",value:s.priority_stats.urgent,color:"red",icon:e.jsx(qe,{className:"w-4 h-4"})}),e.jsx(q0,{label:"",value:s.priority_stats.high,color:"orange",icon:e.jsx(ir,{className:"w-4 h-4"})}),e.jsx(q0,{label:"",value:s.priority_stats.normal,color:"blue",icon:e.jsx(Zj,{className:"w-4 h-4"})}),e.jsx(q0,{label:"",value:s.priority_stats.low,color:"gray",icon:e.jsx(Ue,{className:"w-4 h-4"})})]})]})]}),zc=({icon:s,label:t,value:r,color:a})=>{const n={blue:"from-blue-500 to-blue-600",indigo:"from-indigo-500 to-indigo-600",yellow:"from-yellow-500 to-yellow-600",green:"from-green-500 to-green-600",red:"from-red-500 to-red-600",orange:"from-orange-500 to-orange-600"};return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-3 rounded-lg bg-gradient-to-r ${n[a]} text-white`,children:s}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r}),e.jsx("div",{className:"text-xs text-gray-600",children:t})]})]})},q0=({label:s,value:t,color:r,icon:a})=>{const n={red:"bg-red-50 border-red-200 text-red-700",orange:"bg-orange-50 border-orange-200 text-orange-700",blue:"bg-blue-50 border-blue-200 text-blue-700",gray:"bg-gray-50 border-gray-200 text-gray-700"};return e.jsxs("div",{className:`flex items-center gap-2 p-3 rounded-lg border ${n[r]}`,children:[a,e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium",children:s}),e.jsx("div",{className:"text-lg font-bold",children:t})]})]})},zY=()=>{const[s,t]=w.useState([]),[r,a]=w.useState(null),[n,i]=w.useState([]),[o,c]=w.useState([]),[u,h]=w.useState(!0),[m,f]=w.useState({}),[p,j]=w.useState(!1),[g,v]=w.useState(""),[y,N]=w.useState("kanban"),[S,k]=w.useState(!1),[_,T]=w.useState(!1),[E,z]=w.useState(!1),[M,C]=w.useState(null),[A,Z]=w.useState(null),[I,V]=w.useState(null),[R,q]=w.useState([]),J=w.useCallback((ce,X="info")=>{const O=Date.now().toString();q(L=>[...L,{id:O,message:ce,type:X}])},[]),se=w.useCallback(ce=>{q(X=>X.filter(O=>O.id!==ce))},[]),Y=w.useCallback(async()=>{try{h(!0),console.log(" Requesting tasks with filters:",m);const ce=await Ls.getTasks(m);console.log(" API Response:",ce),console.log(" Response success:",ce.success),console.log(" Response tasks:",ce.tasks),console.log(" Tasks length:",ce.tasks?.length),ce.success?(t(ce.tasks||[]),console.log(" Tasks set to state:",ce.tasks?.length||0)):(console.error(" API returned success=false:",ce),t([]))}catch(ce){console.error(" Error loading tasks:",ce),console.error(" Error details:",JSON.stringify(ce,null,2)),J("  ","error"),t([])}finally{h(!1)}},[m,J]),ee=w.useCallback(async()=>{try{const ce=await Ls.getStats();ce.success&&a(ce.stats)}catch(ce){console.error("Error loading stats:",ce)}},[]),te=w.useCallback(async()=>{try{const ce=await Ls.getExecutors();i(ce)}catch(ce){console.error("Error loading executors:",ce)}},[]),K=w.useCallback(async()=>{try{const ce=await Ls.getProjects();c(ce)}catch(ce){console.error("Error loading projects:",ce)}},[]);w.useEffect(()=>{Y(),ee(),te(),K()},[Y,ee,te,K]);const $=ce=>{if(!g.trim())return ce;const X=g.toLowerCase();return ce.filter(O=>{const L=O.title.toLowerCase().includes(X),B=O.description?.toLowerCase().includes(X),ne=O.assigned_to?.first_name?.toLowerCase().includes(X)||O.assigned_to?.last_name?.toLowerCase().includes(X)||O.assigned_to?.username?.toLowerCase().includes(X);return L||B||ne})},le=()=>{const ce={},X=$(s);return console.log("=== GROUPING DEBUG ==="),console.log("Total tasks:",s.length),console.log("Filtered tasks:",X.length),console.log("Employees:",n.length,n.map(O=>({id:O.id,username:O.username}))),n.forEach(O=>{ce[O.id]={employee:O,tasks:[]}}),console.log("Grouped keys:",Object.keys(ce)),X.forEach(O=>{console.log("Task",O.id,"assigned_to_id:",O.assigned_to_id,"exists in grouped:",!!ce[O.assigned_to_id]),O.assigned_to_id&&ce[O.assigned_to_id]&&ce[O.assigned_to_id].tasks.push(O)}),console.log("Final grouped:",Object.entries(ce).map(([O,L])=>({id:O,tasksCount:L.tasks.length}))),console.log("=== END DEBUG ==="),ce},ie=ce=>X=>{console.log("Drag start:",ce.title),Z(ce),X.dataTransfer.effectAllowed="move",X.dataTransfer.setData("text/plain",ce.id.toString())},oe=ce=>X=>{X.preventDefault(),X.dataTransfer.dropEffect="move",V(ce)},de=ce=>{const X=ce.currentTarget.getBoundingClientRect(),O=ce.clientX,L=ce.clientY;(O<X.left||O>=X.right||L<X.top||L>=X.bottom)&&V(null)},U=ce=>async X=>{if(X.preventDefault(),X.stopPropagation(),V(null),console.log("Drop on employee:",ce,"dragged task:",A),!A){console.log("No dragged task");return}if(A.assigned_to_id===ce){console.log("Dropped on same executor"),Z(null);return}console.log("Reassigning task...");try{const O=await Ls.reassignTask(A.id,ce);console.log("Reassign response:",O),O.success&&(J(" ","success"),Y(),ee())}catch(O){console.error("Error reassigning task:",O),J("  ","error")}finally{Z(null)}},F=async(ce,X)=>{try{(await Ls.updateTaskStatus(ce,X)).success&&(J(" ","success"),Y(),ee())}catch(O){console.error("Error updating status:",O),J("  ","error")}},Q=()=>{k(!1),Y(),ee()},W=()=>{T(!1),C(null),Y(),ee()},H=async ce=>{if(confirm("    . ?"))try{(await Ls.archiveTask(ce)).success&&(J("   ","success"),Y(),ee(),z(!1),C(null))}catch(X){console.error("Error archiving task:",X),J("  ","error")}},re=ce=>{C(ce),z(!0)},he=ce=>{C(ce),T(!0)},G=le();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-6 py-4 pb-6 space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:" "}),e.jsx("p",{className:"text-gray-600 mt-1",children:"  "})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>j(!p),className:"flex items-center gap-2 px-4 py-2.5 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-300 shadow-sm",children:[e.jsx(gr,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:""})]}),e.jsxs("button",{onClick:()=>window.location.href="/tasks/archive",className:"flex items-center gap-2 px-4 py-2.5 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-300 shadow-sm",children:[e.jsx(_l,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:""})]}),e.jsxs("div",{className:"flex items-center bg-white border border-gray-300 rounded-lg shadow-sm",children:[e.jsxs("button",{onClick:()=>N("kanban"),className:`flex items-center gap-2 px-4 py-2.5 rounded-l-lg transition-all ${y==="kanban"?"bg-blue-500 text-white":"text-gray-700 hover:bg-gray-50"}`,title:"Kanban ",children:[e.jsx(hN,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Kanban"})]}),e.jsxs("button",{onClick:()=>N("table"),className:`flex items-center gap-2 px-4 py-2.5 rounded-r-lg transition-all ${y==="table"?"bg-blue-500 text-white":"text-gray-700 hover:bg-gray-50"}`,title:" ",children:[e.jsx(Am,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:""})]})]}),e.jsx("button",{onClick:()=>{Y(),ee()},className:"p-2.5 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-300 shadow-sm",title:"",children:e.jsx(rs,{className:"w-4 h-4"})}),e.jsxs("button",{onClick:()=>k(!0),className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all shadow-md font-semibold",children:[e.jsx(Ve,{className:"w-5 h-5"})," "]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Fs,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:g,onChange:ce=>v(ce.target.value),placeholder:"    ,   ...",className:"block w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"}),g&&e.jsx("button",{onClick:()=>v(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 transition-colors",title:"",children:e.jsx(Ae,{className:"h-5 w-5"})}),g&&e.jsxs("div",{className:"absolute left-0 right-0 top-full mt-1 text-sm text-gray-500 bg-blue-50 px-3 py-2 rounded-lg border border-blue-200",children:[" : ",$(s).length,"  ",s.length]})]})]}),r&&e.jsx(FY,{stats:r}),p&&e.jsx(BY,{filters:m,onFilterChange:f,onClose:()=>j(!1),employees:n,projects:o}),u?e.jsx("div",{className:"flex items-center justify-center h-96 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):y==="table"?e.jsx(MY,{tasks:$(s),onView:re,onEdit:he,onDelete:H}):e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("div",{className:"flex gap-4 min-w-max p-4",children:[Object.values(G).map(({employee:ce,tasks:X})=>e.jsxs("div",{className:`flex-shrink-0 w-[340px] rounded-xl p-4 transition-all ${I===ce.id?"bg-blue-100 dark:bg-blue-900/30 ring-2 ring-blue-500 shadow-lg":"bg-gray-50 dark:bg-gray-900/30"}`,onDragOver:oe(ce.id),onDragLeave:de,onDrop:U(ce.id),children:[e.jsxs("div",{className:"mb-4 pb-3 border-b border-gray-300 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-bold text-sm shadow",children:(ce.first_name||ce.username).charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-base text-gray-900 dark:text-white truncate",children:ce.first_name&&ce.last_name?`${ce.first_name} ${ce.last_name} (@${ce.username})`:`@${ce.username}`}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:ce.role==="owner"?"":ce.role==="admin"?"":ce.role==="manager"?"":""})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:"px-2.5 py-1 bg-blue-500 text-white rounded-md font-semibold",children:X.filter(O=>O.status==="pending").length}),e.jsx("span",{className:"px-2.5 py-1 bg-yellow-500 text-white rounded-md font-semibold",children:X.filter(O=>O.status==="in_progress").length}),e.jsx("span",{className:"px-2.5 py-1 bg-green-500 text-white rounded-md font-semibold",children:X.filter(O=>O.status==="completed").length})]})]}),e.jsx("div",{className:"space-y-3 min-h-[200px]",children:X.length===0?e.jsx("div",{className:"text-center text-gray-400 py-8 bg-white dark:bg-gray-800 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-600",children:e.jsx("p",{className:"text-sm font-medium",children:" "})}):X.map(O=>e.jsx(RY,{task:O,onView:()=>re(O),onEdit:()=>he(O),onDelete:()=>H(O.id),onStatusChange:L=>F(O.id,L),onDragStart:ie(O)},O.id))})]},ce.id)),Object.keys(G).length===0&&e.jsx("div",{className:"w-full text-center py-12",children:e.jsx("p",{className:"text-gray-400 dark:text-gray-500",children:"   "})})]})})})]}),S&&e.jsx(OY,{isOpen:S,onClose:()=>k(!1),onSuccess:Q,employees:n}),_&&M&&e.jsx(LY,{isOpen:_,onClose:()=>{T(!1),C(null)},onSuccess:W,task:M,employees:n}),E&&M&&e.jsx(PY,{isOpen:E,onClose:()=>{z(!1),C(null)},task:M,onEdit:()=>{z(!1),he(M)},onDelete:()=>H(M.id),onRefresh:Y}),e.jsx(h1,{toasts:R,onRemove:se})]})},ha={getRevisions:async s=>{const t=new URLSearchParams;return s?.project_id&&t.append("project_id",s.project_id.toString()),s?.status&&t.append("status",s.status),s?.priority&&t.append("priority",s.priority),s?.assigned_to_me&&t.append("assigned_to_me","true"),(await fe.get(`/admin/api/revisions?${t}`)).data},getRevision:async s=>(await fe.get(`/admin/api/revisions/${s}`)).data,getStats:async()=>(await fe.get("/admin/api/revisions/stats")).data,createRevision:async s=>(await fe.post("/admin/api/revisions",s)).data,updateRevision:async(s,t)=>(await fe.put(`/admin/api/revisions/${s}`,t)).data,getFiles:async s=>(await fe.get(`/admin/api/revisions/${s}/files`)).data,getMessages:async s=>(await fe.get(`/admin/api/revisions/${s}/messages`)).data,addMessage:async(s,t,r,a)=>{const n=new FormData;return n.append("revision_id",s.toString()),n.append("message",t),n.append("is_internal",r.toString()),a&&a.forEach(o=>{n.append("files",o)}),(await fe.post("/admin/api/revisions/messages",n,{headers:{"Content-Type":"multipart/form-data"}})).data},updateProgress:async(s,t)=>(await fe.post(`/admin/api/revisions/${s}/progress`,{progress:t})).data,startTimer:async s=>(await fe.post(`/admin/api/revisions/${s}/timer/start`)).data,stopTimer:async s=>(await fe.post(`/admin/api/revisions/${s}/timer/stop`)).data,sendForReview:async s=>(await fe.post(`/admin/api/revisions/${s}/send-for-review`)).data,completeRevision:async(s,t,r=" ")=>{const a=new FormData;return t&&a.append("actual_time",t.toString()),a.append("completion_message",r),(await fe.post(`/admin/api/revisions/${s}/complete`,a)).data}},IY=()=>{const[s,t]=w.useState([]),[r,a]=w.useState(!0),[n,i]=w.useState({total_revisions:0,pending_revisions:0,completed_revisions:0,my_revisions:0}),[o,c]=w.useState(""),[u,h]=w.useState(""),[m,f]=w.useState(""),[p,j]=w.useState(!1),[g,v]=w.useState(null),[y,N]=w.useState(!1),[S,k]=w.useState(!1),[_,T]=w.useState([]),[E,z]=w.useState({project_id:"",title:"",description:"",priority:"normal"}),[M,C]=w.useState(""),[A,Z]=w.useState(!1),[I,V]=w.useState([]),[R,q]=w.useState([]),[J,se]=w.useState([]),[Y,ee]=w.useState(null),te=w.useCallback((ce,X="info")=>{ee({message:ce,type:X}),setTimeout(()=>ee(null),3e3)},[]),K=w.useCallback(async()=>{try{a(!0);const ce=await ha.getRevisions({project_id:o?parseInt(o):void 0,status:u||void 0,priority:m||void 0,assigned_to_me:p||void 0});ce.success&&t(ce.data)}catch{te("  ","error")}finally{a(!1)}},[o,u,m,p,te]),$=w.useCallback(async()=>{try{const ce=await ha.getStats();ce.success&&i(ce.data)}catch(ce){console.error("Failed to load stats:",ce)}},[]),le=w.useCallback(async()=>{try{const ce=await ps.getProjects();ce.success&&T(ce.projects)}catch(ce){console.error("Failed to load projects:",ce)}},[]);w.useEffect(()=>{K(),$(),le()},[K,$,le]);const ie=async()=>{if(!E.project_id||!E.title||!E.description){te("   ","error");return}try{(await ha.createRevision({project_id:parseInt(E.project_id),title:E.title,description:E.description,priority:E.priority})).success&&(te("  ","success"),N(!1),z({project_id:"",title:"",description:"",priority:"normal"}),K(),$())}catch{te("   ","error")}},oe=async ce=>{try{const X=await ha.getRevision(ce.id);if(X.success){v(X.data);const[O,L]=await Promise.all([ha.getMessages(ce.id),ha.getFiles(ce.id)]);O.success&&q(O.data),L.success&&se(L.data),k(!0)}}catch{te("   ","error")}},de=async()=>{if(!g||!M.trim()){te("  ","error");return}try{if((await ha.addMessage(g.id,M,A,I)).success){te(" ","success"),C(""),Z(!1),V([]);const X=await ha.getMessages(g.id);X.success&&q(X.data)}}catch{te("   ","error")}},U=async ce=>{if(g)try{(await ha.updateRevision(g.id,{status:ce})).success&&(te(" ","success"),K(),$(),k(!1))}catch{te("  ","error")}},F=async()=>{if(g)try{(await ha.sendForReview(g.id)).success&&(te("   ","success"),K(),$(),k(!1))}catch{te("   ","error")}},Q=async(ce,X)=>{X.stopPropagation();try{await ha.startTimer(ce),K()}catch{te("  ","error")}},W=async(ce,X)=>{X.stopPropagation();try{await ha.stopTimer(ce),K()}catch{te("  ","error")}},H=ce=>({pending:" ",in_progress:" ",review:" ",completed:"",approved:" ",needs_rework:" ",rejected:""})[ce]||ce,re=ce=>({low:"",normal:"",high:"",urgent:""})[ce]||ce,he=ce=>{const X=Math.floor(ce/3600),O=Math.floor(ce%3600/60);return X>0?`${X} ${O}`:`${O}`},G=w.useMemo(()=>s,[s]);return e.jsxs("div",{className:"p-8 max-w-[1920px] mx-auto",children:[Y&&e.jsx("div",{className:`fixed top-4 right-4 z-50 px-6 py-3 rounded-lg shadow-lg ${Y.type==="success"?"bg-green-500":Y.type==="error"?"bg-red-500":"bg-blue-500"} text-white flex items-center gap-2`,children:e.jsx("span",{children:Y.message})}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-violet-500 to-purple-600 flex items-center justify-center",children:e.jsx(wn,{className:"w-6 h-6 text-white"})})," "]}),e.jsx("p",{className:"text-gray-500 mt-1",children:"   "})]}),e.jsxs("button",{onClick:()=>N(!0),className:"px-6 py-3 bg-gradient-to-r from-violet-500 to-purple-600 text-white rounded-xl hover:shadow-lg transition-all duration-200 flex items-center gap-2",children:[e.jsx(Ve,{className:"w-5 h-5"})," "]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-violet-100 flex items-center justify-center",children:e.jsx(Ie,{className:"w-6 h-6 text-violet-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n.total_revisions}),e.jsx("div",{className:"text-sm text-gray-500",children:" "})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-yellow-100 flex items-center justify-center",children:e.jsx(Ue,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n.pending_revisions}),e.jsx("div",{className:"text-sm text-gray-500",children:" "})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-green-100 flex items-center justify-center",children:e.jsx(zr,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n.completed_revisions}),e.jsx("div",{className:"text-sm text-gray-500",children:""})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-100 flex items-center justify-center",children:e.jsx(qe,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n.my_revisions}),e.jsx("div",{className:"text-sm text-gray-500",children:" "})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(gr,{className:"w-5 h-5 text-gray-400"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:""})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("select",{value:o,onChange:ce=>c(ce.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:" "}),_.map(ce=>e.jsx("option",{value:ce.id,children:ce.title},ce.id))]}),e.jsxs("select",{value:u,onChange:ce=>h(ce.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"pending",children:" "}),e.jsx("option",{value:"in_progress",children:" "}),e.jsx("option",{value:"review",children:" "}),e.jsx("option",{value:"completed",children:""})]}),e.jsxs("select",{value:m,onChange:ce=>f(ce.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"normal",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"urgent",children:""})]}),e.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 border border-gray-200 rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:p,onChange:ce=>j(ce.target.checked),className:"w-4 h-4 text-violet-600 rounded focus:ring-2 focus:ring-violet-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:" "})]}),e.jsx("button",{onClick:()=>{c(""),h(""),f(""),j(!1)},className:"px-4 py-2 border border-gray-200 rounded-lg hover:bg-gray-50 text-gray-700",children:""})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:r?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-6 py-12 text-center",children:e.jsx(Dt,{className:"w-8 h-8 animate-spin mx-auto text-violet-500"})})}):G.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-6 py-12 text-center text-gray-500",children:"  "})}):G.map(ce=>e.jsxs("tr",{onClick:()=>oe(ce),className:"hover:bg-gray-50 cursor-pointer transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["#",ce.revision_number]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:ce.project?.title||""}),e.jsx("div",{className:"text-xs text-gray-500",children:ce.project?.status})]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:ce.title}),e.jsx("div",{className:"text-xs text-gray-500 line-clamp-1",children:ce.description})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-violet-100 text-violet-700",children:H(ce.status)})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`text-sm font-medium ${ce.priority==="urgent"?"text-red-600":ce.priority==="high"?"text-orange-600":ce.priority==="normal"?"text-blue-600":"text-green-600"}`,children:re(ce.priority)})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2 max-w-[100px]",children:e.jsx("div",{className:"bg-violet-600 h-2 rounded-full transition-all",style:{width:`${ce.progress||0}%`}})}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[ce.progress||0,"%"]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:he(ce.time_spent_seconds||0)}),ce.timer_started_at?e.jsx("button",{onClick:X=>W(ce.id,X),className:"p-1 hover:bg-red-100 rounded transition-colors",children:e.jsx(rm,{className:"w-4 h-4 text-red-600"})}):e.jsx("button",{onClick:X=>Q(ce.id,X),className:"p-1 hover:bg-green-100 rounded transition-colors",children:e.jsx(bi,{className:"w-4 h-4 text-green-600"})})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>oe(ce),className:"text-violet-600 hover:text-violet-700 font-medium text-sm",children:""})})]},ce.id))})]})})}),y&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:" "}),e.jsx("button",{onClick:()=>N(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsxs("select",{value:E.project_id,onChange:ce=>z({...E,project_id:ce.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:" "}),_.map(ce=>e.jsx("option",{value:ce.id,children:ce.title},ce.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:E.title,onChange:ce=>z({...E,title:ce.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent",placeholder:"  "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("textarea",{value:E.description,onChange:ce=>z({...E,description:ce.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent",placeholder:"      "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("select",{value:E.priority,onChange:ce=>z({...E,priority:ce.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent",children:[e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"normal",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"urgent",children:""})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-100 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>N(!1),className:"px-6 py-2 border border-gray-200 rounded-lg hover:bg-gray-50 text-gray-700",children:""}),e.jsx("button",{onClick:ie,className:"px-6 py-2 bg-gradient-to-r from-violet-500 to-purple-600 text-white rounded-lg hover:shadow-lg transition-all",children:""})]})]})}),S&&g&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[" #",g.revision_number," - ",g.title]}),e.jsx("button",{onClick:()=>k(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-6 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:""}),e.jsx("div",{className:"font-medium",children:g.project?.title})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:""}),e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-violet-100 text-violet-700",children:H(g.status)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:""}),e.jsx("div",{className:"font-medium",children:re(g.priority)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:""}),e.jsx("div",{className:"text-sm",children:g.description})]})]}),J.length>0&&e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("div",{className:"text-sm font-medium mb-3",children:""}),e.jsx("div",{className:"space-y-2",children:J.map(ce=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white rounded-lg",children:[ce.file_type==="image"?e.jsx(tm,{className:"w-4 h-4 text-gray-400"}):e.jsx(Ie,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm flex-1 truncate",children:ce.original_filename}),e.jsx("a",{href:ce.download_url,download:!0,className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(wt,{className:"w-4 h-4 text-gray-600"})})]},ce.id))})]})]}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("div",{className:"bg-gray-50 rounded-xl p-4 h-[400px] overflow-y-auto mb-4",children:R.length===0?e.jsx("div",{className:"text-center text-gray-500 py-8",children:"  "}):e.jsx("div",{className:"space-y-3",children:R.map(ce=>e.jsxs("div",{className:`p-4 rounded-lg ${ce.is_internal?"bg-yellow-50 border-l-4 border-yellow-400":"bg-white"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("div",{className:"font-medium text-sm",children:ce.sender_name}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(ce.created_at).toLocaleString("ru-RU")})]}),e.jsx("div",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:ce.message||ce.content}),ce.is_internal&&e.jsx("div",{className:"mt-2 text-xs text-yellow-700",children:" "})]},ce.id))})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("textarea",{value:M,onChange:ce=>C(ce.target.value),rows:3,placeholder:" ...",className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:A,onChange:ce=>Z(ce.target.checked),className:"w-4 h-4 text-violet-600 rounded focus:ring-2 focus:ring-violet-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:" "})]}),e.jsxs("button",{onClick:de,className:"px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 flex items-center gap-2",children:[e.jsx(Qs,{className:"w-4 h-4"}),""]})]})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-100 flex justify-between",children:[e.jsxs("div",{className:"flex gap-2",children:[g.status==="in_progress"&&e.jsxs("button",{onClick:F,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Qs,{className:"w-4 h-4"}),"  "]}),g.status==="pending"&&e.jsxs("button",{onClick:()=>U("in_progress"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(bi,{className:"w-4 h-4"}),"  "]}),g.status!=="completed"&&e.jsxs("button",{onClick:()=>U("completed"),className:"px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 flex items-center gap-2",children:[e.jsx(zr,{className:"w-4 h-4"}),""]})]}),e.jsx("button",{onClick:()=>k(!1),className:"px-6 py-2 border border-gray-200 rounded-lg hover:bg-gray-50",children:""})]})]})})]})};class $Y{async getClients(t){try{const r=new URLSearchParams;t?.search&&r.append("search",t.search),t?.status&&r.append("status",t.status),t?.type&&r.append("type",t.type),t?.manager_id&&r.append("manager_id",t.manager_id.toString()),t?.segment&&r.append("segment",t.segment),t?.page&&r.append("page",t.page.toString()),t?.limit&&r.append("limit",t.limit.toString());const a=await fe.get(`/admin/clients/?${r.toString()}`);return{success:!0,clients:a.data.clients,pagination:a.data.pagination,stats:a.data.stats}}catch(r){return console.error("Error fetching clients:",r),{success:!1,message:r.response?.data?.message||r.message||"  ",clients:[],pagination:{total:0,page:1,limit:20,pages:0}}}}async getClient(t){try{return{success:!0,client:(await fe.get(`/admin/clients/api/${t}`)).data.client}}catch(r){return console.error("Error fetching client:",r),{success:!1,message:r.response?.data?.message||"  "}}}async createClient(t){try{return{success:!0,client:(await fe.post("/admin/clients/api",t)).data.client,message:"  "}}catch(r){return console.error("Error creating client:",r),{success:!1,message:r.response?.data?.message||"  "}}}async updateClient(t,r){try{return{success:!0,client:(await fe.put(`/admin/clients/api/${t}`,r)).data.client,message:"  "}}catch(a){return console.error("Error updating client:",a),{success:!1,message:a.response?.data?.message||"  "}}}async deleteClient(t){try{return await fe.delete(`/admin/clients/api/${t}`),{success:!0,message:"  "}}catch(r){return console.error("Error deleting client:",r),{success:!1,message:r.response?.data?.message||"  "}}}async addCommunication(t,r){try{return{success:!0,communication:(await fe.post(`/admin/clients/api/${t}/communication`,r)).communication,message:" "}}catch(a){return console.error("Error adding communication:",a),{success:!1,message:a.response?.data?.message||"  "}}}async getClientTimeline(t){try{return{success:!0,timeline:(await fe.get(`/admin/clients/api/${t}/timeline`)).timeline}}catch(r){return console.error("Error fetching timeline:",r),{success:!1,message:r.response?.data?.message||"  ",timeline:[]}}}async getSegmentStats(){try{return{success:!0,stats:(await fe.get("/admin/clients/api/stats/segments")).stats}}catch(t){return console.error("Error fetching segment stats:",t),{success:!1,message:t.response?.data?.message||"  ",stats:{}}}}async getClientsSimple(){try{return{success:!0,clients:(await fe.get("/admin/clients/simple")).data.clients}}catch(t){return console.error("Error fetching simple clients:",t),{success:!1,message:t.response?.data?.message||"   ",clients:[]}}}}const Pk=new $Y,UY=()=>{const[s,t]=w.useState([]),[r,a]=w.useState(!0),[n,i]=w.useState({page:1,limit:20}),[o,c]=w.useState(!1),[u,h]=w.useState({total:0,page:1,limit:20,pages:1}),[m,f]=w.useState({total:0,active:0,vip:0,new_month:0}),[p,j]=w.useState([]),g=w.useCallback((A,Z="info")=>{const I=Date.now().toString();j(V=>[...V,{id:I,message:A,type:Z}]),setTimeout(()=>{j(V=>V.filter(R=>R.id!==I))},4e3)},[]),v=w.useCallback(A=>{j(Z=>Z.filter(I=>I.id!==A))},[]),y=w.useCallback(async()=>{try{a(!0);const A=await Pk.getClients(n);A.success?(t(A.clients),h(A.pagination),A.stats&&f(A.stats)):g(A.message||"  ","error")}catch(A){console.error("Error loading clients:",A),g("  ","error")}finally{a(!1)}},[n,g]);w.useEffect(()=>{y()},[y]);const N=async A=>{if(!confirm(" ,     ?"))return;const Z=await Pk.deleteClient(A);Z.success?(g("  ","success"),y()):g(Z.message,"error")},S=A=>{i(Z=>({...Z,search:A,page:1}))},k=(A,Z)=>{i(I=>({...I,[A]:Z,page:1}))},_=A=>{i(Z=>({...Z,page:A}))},T=()=>{y()},E=A=>({individual:". ",company:"",ip:"",self_employed:""})[A]||A,z=A=>({new:"",active:"",inactive:"",vip:"VIP",blacklist:" "})[A]||A,M=A=>({new:"bg-blue-100 text-blue-700",active:"bg-green-100 text-green-700",inactive:"bg-gray-100 text-gray-700",vip:"bg-purple-100 text-purple-700",blacklist:"bg-red-100 text-red-700"})[A]||"bg-gray-100 text-gray-700",C=A=>{const I={individual:st,company:A4,ip:A4,self_employed:st}[A]||st;return e.jsx(I,{className:"w-4 h-4"})};return e.jsxs("div",{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:""}),e.jsx("p",{className:"text-gray-600",children:"   CRM"})]}),e.jsxs("button",{className:"bg-gradient-to-r from-orange-600 to-red-600 text-white px-6 py-3 rounded-xl font-semibold hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5 flex items-center gap-2",children:[e.jsx(Ve,{className:"w-5 h-5"})," "]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:e.jsx(tt,{className:"w-6 h-6 text-blue-600"})}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:m.total})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:" "})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:e.jsx(ct,{className:"w-6 h-6 text-green-600"})}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:m.active})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:""})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:e.jsx(Ps,{className:"w-6 h-6 text-purple-600"})}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:m.vip})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"VIP "})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center",children:e.jsx(pt,{className:"w-6 h-6 text-orange-600"})}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:m.new_month})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"  "})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Fs,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"  , email, , ...",className:"w-full pl-12 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all",value:n.search||"",onChange:A=>S(A.target.value)})]}),e.jsxs("button",{onClick:()=>c(!o),className:`px-6 py-3 bg-white border border-gray-200 rounded-xl hover:border-orange-500 transition-all flex items-center gap-2 font-medium ${o?"border-orange-500 text-orange-600":"text-gray-700"}`,children:[e.jsx(gr,{className:"w-5 h-5"}),""]}),e.jsx("button",{onClick:T,className:"px-6 py-3 bg-white border border-gray-200 rounded-xl hover:border-gray-300 transition-all flex items-center gap-2 font-medium text-gray-700",children:e.jsx(rs,{className:"w-5 h-5"})})]}),o&&e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("select",{className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",value:n.status||"",onChange:A=>k("status",A.target.value||void 0),children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"new",children:""}),e.jsx("option",{value:"active",children:""}),e.jsx("option",{value:"inactive",children:""}),e.jsx("option",{value:"vip",children:"VIP"}),e.jsx("option",{value:"blacklist",children:" "})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("select",{className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",value:n.type||"",onChange:A=>k("type",A.target.value||void 0),children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"individual",children:". "}),e.jsx("option",{value:"company",children:""}),e.jsx("option",{value:"ip",children:""}),e.jsx("option",{value:"self_employed",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",placeholder:" ...",className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",value:n.segment||"",onChange:A=>k("segment",A.target.value||void 0)})]})]})}),r?e.jsx("div",{className:"bg-white rounded-3xl p-16 shadow-xl border border-gray-100 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"})}):s.length===0?e.jsx("div",{className:"bg-white rounded-3xl p-16 shadow-xl border border-gray-100",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-orange-100 to-red-100 rounded-3xl flex items-center justify-center mb-6",children:e.jsx(tt,{className:"w-12 h-12 text-orange-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:n.search||n.status||n.type?"  ":" "}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-md",children:n.search||n.status||n.type?"   ":"  ,      "})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"/"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:s.map(A=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-500 to-red-500 rounded-lg flex items-center justify-center text-white font-semibold",children:A.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:A.name}),A.company_name&&e.jsx("div",{className:"text-sm text-gray-500",children:A.company_name})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1",children:[A.email&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(gi,{className:"w-4 h-4"}),A.email]}),A.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(fi,{className:"w-4 h-4"}),A.phone]}),A.telegram&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Ha,{className:"w-4 h-4"}),A.telegram]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[C(A.type),e.jsx("span",{className:"text-sm text-gray-700",children:E(A.type)})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-xs font-semibold ${M(A.status)}`,children:z(A.status)})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[A.projects_count!==void 0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ie,{className:"w-4 h-4"}),A.projects_count]}),A.deals_count!==void 0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ct,{className:"w-4 h-4"}),A.deals_count]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{className:"p-2 hover:bg-blue-50 rounded-lg transition-colors",title:"",children:e.jsx(Ft,{className:"w-4 h-4 text-blue-600"})}),e.jsx("button",{className:"p-2 hover:bg-green-50 rounded-lg transition-colors",title:"",children:e.jsx(Zs,{className:"w-4 h-4 text-green-600"})}),e.jsx("button",{onClick:Z=>{Z.stopPropagation(),N(A.id)},className:"p-2 hover:bg-red-50 rounded-lg transition-colors",title:"",children:e.jsx(Xe,{className:"w-4 h-4 text-red-600"})})]})})]},A.id))})]})})}),u.pages>1&&e.jsxs("div",{className:"flex items-center justify-between bg-white rounded-2xl p-4 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[" ",s.length,"  ",u.total," "]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>_(u.page-1),disabled:u.page===1,className:"px-4 py-2 border border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:""}),e.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,u.pages)},(A,Z)=>{const I=Z+1;return e.jsx("button",{onClick:()=>_(I),className:`px-4 py-2 rounded-lg transition-all ${u.page===I?"bg-orange-600 text-white":"border border-gray-200 hover:bg-gray-50"}`,children:I},I)})}),e.jsx("button",{onClick:()=>_(u.page+1),disabled:u.page===u.pages,className:"px-4 py-2 border border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:""})]})]})]}),e.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:p.map(A=>e.jsxs("div",{className:`flex items-center gap-3 px-6 py-4 rounded-xl shadow-2xl border backdrop-blur-sm animate-slide-in-right ${A.type==="success"?"bg-green-50 border-green-200 text-green-800":A.type==="error"?"bg-red-50 border-red-200 text-red-800":"bg-blue-50 border-blue-200 text-blue-800"}`,children:[e.jsx("span",{className:"flex-1 font-medium",children:A.message}),e.jsx("button",{onClick:()=>v(A.id),className:"p-1 hover:bg-white/50 rounded-lg transition-colors",children:e.jsx(Ae,{className:"w-4 h-4"})})]},A.id))})]})},wd={getLeads:async s=>{const t=new URLSearchParams;return s?.search&&t.append("search",s.search),s?.status&&t.append("status",s.status),s?.source&&t.append("source",s.source),s?.manager_id&&t.append("manager_id",s.manager_id.toString()),s?.client_id&&t.append("client_id",s.client_id.toString()),s?.page&&t.append("page",s.page.toString()),s?.limit&&t.append("limit",s.limit.toString()),(await fe.get(`/admin/leads/api?${t}`)).data},getLead:async s=>(await fe.get(`/admin/leads/api/${s}`)).data,createLead:async s=>(await fe.post("/admin/leads/api",s)).data,updateLead:async(s,t)=>(await fe.put(`/admin/leads/api/${s}`,t)).data,updateLeadStatus:async(s,t,r)=>(await fe.put(`/admin/leads/api/${s}/status`,{status:t,lost_reason:r})).data,convertLead:async(s,t)=>(await fe.post(`/admin/leads/api/${s}/convert`,t)).data,getFunnelStats:async(s="month")=>(await fe.get(`/admin/leads/api/stats/funnel?period=${s}`)).data},VY=()=>{const[s,t]=w.useState([]),[r,a]=w.useState(!0),[n,i]=w.useState({page:1,limit:20}),[o,c]=w.useState(!1),[u,h]=w.useState({total:0,page:1,limit:20,pages:1}),[m,f]=w.useState(null),[p,j]=w.useState(0),[g,v]=w.useState(!1),[y,N]=w.useState(!1),[S,k]=w.useState(!1),[_,T]=w.useState(!1),[E,z]=w.useState(null),[M,C]=w.useState([]),A=w.useCallback((W,H="info")=>{const re=Date.now().toString();C(he=>[...he,{id:re,message:W,type:H}]),setTimeout(()=>{C(he=>he.filter(G=>G.id!==re))},4e3)},[]),Z=w.useCallback(async()=>{try{a(!0);const W=await wd.getLeads(n);W.success&&(t(W.leads),h(W.pagination))}catch(W){console.error("Error loading leads:",W),A("  ","error")}finally{a(!1)}},[n,A]),I=w.useCallback(async()=>{try{const W=await wd.getFunnelStats("month");W.success&&(f(W.funnel),j(W.metrics.win_rate||0))}catch(W){console.error("Error loading funnel stats:",W)}},[]);w.useEffect(()=>{Z(),I()},[Z,I]);const V=w.useCallback(()=>{Z(),I()},[Z,I]),R=w.useCallback(()=>{i(W=>({...W,page:1}))},[]),q=w.useCallback(()=>{i({page:1,limit:20})},[]),J=w.useCallback(W=>{i(H=>({...H,status:W,page:1}))},[]),se=w.useCallback(async W=>{if(confirm(" ,     ?"))try{A("    ","info")}catch(H){console.error("Error deleting lead:",H),A("  ","error")}},[A]),Y=w.useCallback(()=>{v(!0),document.body.style.overflow="hidden"},[]),ee=w.useCallback(()=>{v(!1),document.body.style.overflow="auto"},[]),te=w.useCallback(W=>{z(W),N(!0),document.body.style.overflow="hidden"},[]),K=w.useCallback(()=>{N(!1),z(null),document.body.style.overflow="auto"},[]),$=w.useCallback(W=>{z(W),k(!0),document.body.style.overflow="hidden"},[]),le=w.useCallback(()=>{k(!1),z(null),document.body.style.overflow="auto"},[]),ie=w.useCallback(W=>{z(W),T(!0),document.body.style.overflow="hidden"},[]),oe=w.useCallback(()=>{T(!1),z(null),document.body.style.overflow="auto"},[]),de=w.useCallback(W=>{i(H=>({...H,page:W}))},[]),U=W=>({new:"",contact_made:" ",qualification:"",proposal_sent:" ",negotiation:"",won:"",lost:"",postponed:""})[W]||W,F=W=>({new:"bg-blue-100 text-blue-700",contact_made:"bg-pink-100 text-pink-700",qualification:"bg-teal-100 text-teal-700",proposal_sent:"bg-purple-100 text-purple-700",negotiation:"bg-orange-100 text-orange-700",won:"bg-green-100 text-green-700",lost:"bg-red-100 text-red-700",postponed:"bg-gray-100 text-gray-700"})[W]||"bg-gray-100 text-gray-700",Q=W=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0}).format(W);return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"max-w-[2000px] mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx(ct,{className:"w-7 h-7 text-white"})})," "]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"  "})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>c(!o),className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-200",children:[e.jsx(gr,{className:"w-5 h-5"}),""]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-200",children:[e.jsx(wt,{className:"w-5 h-5"}),""]}),e.jsx("button",{onClick:V,className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-200",children:e.jsx(rs,{className:"w-5 h-5"})}),e.jsxs("button",{onClick:Y,className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-cyan-500 to-blue-600 text-white rounded-lg hover:from-cyan-600 hover:to-blue-700 transition-all shadow-lg",children:[e.jsx(Ve,{className:"w-5 h-5"})," "]})]})]}),m&&e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h5",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Ar,{className:"w-5 h-5 text-cyan-600"})," "]}),e.jsxs("div",{className:"px-4 py-1 bg-green-100 text-green-700 rounded-full text-sm font-semibold",children:[": ",p.toFixed(1),"%"]})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-3",children:[e.jsxs("button",{onClick:()=>J("new"),className:"bg-gradient-to-br from-blue-500 to-purple-600 text-white rounded-xl p-4 hover:scale-105 transition-transform shadow-lg",children:[e.jsx("div",{className:"text-3xl font-bold",children:m.new}),e.jsx("div",{className:"text-sm opacity-90 mt-1",children:""})]}),e.jsxs("button",{onClick:()=>J("contact_made"),className:"bg-gradient-to-br from-pink-500 to-red-500 text-white rounded-xl p-4 hover:scale-105 transition-transform shadow-lg",children:[e.jsx("div",{className:"text-3xl font-bold",children:m.contact_made}),e.jsx("div",{className:"text-sm opacity-90 mt-1",children:""})]}),e.jsxs("button",{onClick:()=>J("qualification"),className:"bg-gradient-to-br from-cyan-400 to-blue-500 text-white rounded-xl p-4 hover:scale-105 transition-transform shadow-lg",children:[e.jsx("div",{className:"text-3xl font-bold",children:m.qualification}),e.jsx("div",{className:"text-sm opacity-90 mt-1",children:""})]}),e.jsxs("button",{onClick:()=>J("proposal_sent"),className:"bg-gradient-to-br from-emerald-400 to-teal-500 text-white rounded-xl p-4 hover:scale-105 transition-transform shadow-lg",children:[e.jsx("div",{className:"text-3xl font-bold",children:m.proposal_sent}),e.jsx("div",{className:"text-sm opacity-90 mt-1",children:""})]}),e.jsxs("button",{onClick:()=>J("negotiation"),className:"bg-gradient-to-br from-orange-400 to-pink-500 text-white rounded-xl p-4 hover:scale-105 transition-transform shadow-lg",children:[e.jsx("div",{className:"text-3xl font-bold",children:m.negotiation}),e.jsx("div",{className:"text-sm opacity-90 mt-1",children:""})]}),e.jsxs("button",{onClick:()=>J("won"),className:"bg-gradient-to-br from-teal-500 to-blue-700 text-white rounded-xl p-4 hover:scale-105 transition-transform shadow-lg",children:[e.jsx("div",{className:"text-3xl font-bold",children:m.won}),e.jsx("div",{className:"text-sm opacity-90 mt-1",children:""})]}),e.jsxs("button",{onClick:()=>J("lost"),className:"text-gray-800 rounded-xl p-4 hover:scale-105 transition-transform shadow-lg",children:[e.jsx("div",{className:"text-3xl font-bold",children:m.lost}),e.jsx("div",{className:"text-sm opacity-90 mt-1",children:""})]})]})]}),o&&e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:n.search||"",onChange:W=>i({...n,search:W.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",placeholder:", ..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:n.status||"",onChange:W=>i({...n,status:W.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"new",children:""}),e.jsx("option",{value:"contact_made",children:" "}),e.jsx("option",{value:"qualification",children:""}),e.jsx("option",{value:"proposal_sent",children:" "}),e.jsx("option",{value:"negotiation",children:""}),e.jsx("option",{value:"won",children:""}),e.jsx("option",{value:"lost",children:""}),e.jsx("option",{value:"postponed",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:n.source||"",onChange:W=>i({...n,source:W.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"website",children:""}),e.jsx("option",{value:"telegram",children:"Telegram"}),e.jsx("option",{value:"referral",children:""}),e.jsx("option",{value:"ads",children:""}),e.jsx("option",{value:"social",children:". "}),e.jsx("option",{value:"cold",children:""}),e.jsx("option",{value:"other",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" ID"}),e.jsx("input",{type:"number",value:n.client_id||"",onChange:W=>i({...n,client_id:W.target.value?+W.target.value:void 0}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",placeholder:"ID "})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("button",{onClick:R,className:"flex-1 px-4 py-2 bg-cyan-600 text-white rounded-lg hover:bg-cyan-700 transition-all font-semibold",children:""}),e.jsx("button",{onClick:q,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all font-semibold",children:""})]})]})}),e.jsx("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden border border-gray-100",children:r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600"})}):s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-cyan-100 to-blue-100 rounded-3xl flex items-center justify-center mb-6 mx-auto",children:e.jsx(ct,{className:"w-12 h-12 text-cyan-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"  "}),e.jsx("p",{className:"text-gray-600 mb-6",children:"  ,   "}),e.jsxs("button",{onClick:Y,className:"inline-flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-cyan-500 to-blue-600 text-white rounded-xl font-semibold hover:shadow-xl transition-all",children:[e.jsx(Ve,{className:"w-5 h-5"}),"  "]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-cyan-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"ID"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"/"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"  "}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:s.map(W=>e.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-cyan-50/50 hover:to-blue-50/50 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:["#",W.id]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:W.title}),W.source&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[": ",W.source]}),W.converted_to_deal_id&&e.jsx("div",{className:"mt-2",children:e.jsxs("a",{href:"/deals",className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 rounded-md text-xs font-medium hover:bg-green-200 transition-colors",title:`   #${W.converted_to_deal_id}`,children:[e.jsx(vn,{className:"w-3 h-3"}),e.jsxs("span",{children:[" #",W.converted_to_deal_id]}),e.jsx(Yj,{className:"w-3 h-3"})]})})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${F(W.status)}`,children:U(W.status)})}),e.jsxs("td",{className:"px-6 py-4",children:[W.client_name&&e.jsx("div",{className:"font-semibold text-gray-900",children:W.client_name}),e.jsx("div",{className:"text-sm text-gray-600",children:W.contact_name||W.contact_phone||"-"})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 font-medium",children:W.budget?Q(W.budget):"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[W.probability,"%"]}),e.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-cyan-500 to-blue-600 transition-all",style:{width:`${W.probability}%`}})})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:W.manager_name||"-"}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-600",children:[W.days_in_funnel||0," ."]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>$(W),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:" ",children:e.jsx(Yj,{className:"w-4 h-4"})}),W.status!=="won"&&W.status!=="lost"&&e.jsx("button",{onClick:()=>ie(W),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"  ",children:e.jsx(vn,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>te(W),className:"p-2 text-cyan-600 hover:bg-cyan-50 rounded-lg transition-colors",title:"",children:e.jsx(Zs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>se(W.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"",children:e.jsx(Xe,{className:"w-4 h-4"})})]})})]},W.id))})]})}),u.pages>1&&e.jsxs("div",{className:"px-6 py-4 border-t border-gray-100 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[" ",s.length,"  ",u.total," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>de(u.page-1),disabled:u.page===1,className:"px-4 py-2 bg-white border-2 border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:" "}),[...Array(Math.min(u.pages,5))].map((W,H)=>{const re=H+1;return e.jsx("button",{onClick:()=>de(re),className:`px-4 py-2 rounded-lg transition-all ${u.page===re?"bg-gradient-to-r from-cyan-500 to-blue-600 text-white":"bg-white border-2 border-gray-200 hover:bg-gray-50"}`,children:re},re)}),e.jsx("button",{onClick:()=>de(u.page+1),disabled:u.page===u.pages,className:"px-4 py-2 bg-white border-2 border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:" "})]})]})]})})]}),g&&e.jsx(HY,{onClose:ee,onSuccess:()=>{ee(),V(),A("  ","success")},showToast:A}),y&&E&&e.jsx(qY,{lead:E,onClose:K,onSuccess:()=>{K(),V(),A("  ","success")},showToast:A}),S&&E&&e.jsx(WY,{lead:E,onClose:le,onSuccess:()=>{le(),V(),A("  ","success")},showToast:A}),_&&E&&e.jsx(YY,{lead:E,onClose:oe,onSuccess:()=>{oe(),V(),A("    ","success")},showToast:A}),e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:M.map(W=>e.jsx("div",{className:`px-6 py-3 rounded-lg shadow-lg text-white ${W.type==="success"?"bg-green-500":W.type==="error"?"bg-red-500":"bg-blue-500"} animate-slide-in`,children:W.message},W.id))})]})},HY=({onClose:s,onSuccess:t,showToast:r})=>{const[a,n]=w.useState({title:"",source:"",client_id:"",contact_name:"",contact_phone:"",contact_email:"",contact_telegram:"",contact_whatsapp:"",description:"",requirements:"",budget:"",probability:"50",expected_close_date:"",next_action_date:"",notes:""}),[i,o]=w.useState(!1),c=async u=>{if(u.preventDefault(),!a.title.trim()){r(" ","error");return}o(!0);try{const h={title:a.title,source:a.source||void 0,client_id:a.client_id?+a.client_id:void 0,contact_name:a.contact_name||void 0,contact_phone:a.contact_phone||void 0,contact_email:a.contact_email||void 0,contact_telegram:a.contact_telegram||void 0,contact_whatsapp:a.contact_whatsapp||void 0,description:a.description||void 0,requirements:a.requirements||void 0,budget:a.budget?+a.budget:void 0,probability:a.probability?+a.probability:50,expected_close_date:a.expected_close_date||void 0,next_action_date:a.next_action_date||void 0,notes:a.notes||void 0},m=await wd.createLead(h);m.success?t():r(m.message||"  ","error")}catch(h){console.error("Error creating lead:",h),r(h.response?.data?.message||"  ","error")}finally{o(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black/50 backdrop-blur-sm",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-3xl bg-white rounded-3xl shadow-2xl",children:[e.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-cyan-500 to-blue-600 px-6 py-5 rounded-t-3xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:" "}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(Ae,{className:"w-6 h-6 text-white"})})]})}),e.jsxs("form",{onSubmit:c,className:"p-6 space-y-6 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a.title,onChange:u=>n({...a,title:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",placeholder:" ",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:a.source,onChange:u=>n({...a,source:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"website",children:""}),e.jsx("option",{value:"telegram",children:"Telegram"}),e.jsx("option",{value:"referral",children:""}),e.jsx("option",{value:"ads",children:""}),e.jsx("option",{value:"social",children:". "}),e.jsx("option",{value:"cold",children:""}),e.jsx("option",{value:"other",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ID "}),e.jsx("input",{type:"number",value:a.client_id,onChange:u=>n({...a,client_id:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",placeholder:"   "})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-bold text-gray-900",children:" "}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"text",value:a.contact_name,onChange:u=>n({...a,contact_name:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",placeholder:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"tel",value:a.contact_phone,onChange:u=>n({...a,contact_phone:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",placeholder:"+7 (999) 123-45-67"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:a.contact_email,onChange:u=>n({...a,contact_email:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",placeholder:"email@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Telegram"}),e.jsx("input",{type:"text",value:a.contact_telegram,onChange:u=>n({...a,contact_telegram:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",placeholder:"@username"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:a.description,onChange:u=>n({...a,description:u.target.value}),rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all resize-none",placeholder:" "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:a.requirements,onChange:u=>n({...a,requirements:u.target.value}),rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all resize-none",placeholder:" "})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"number",value:a.budget,onChange:u=>n({...a,budget:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",placeholder:"0",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" (%)"}),e.jsx("input",{type:"number",value:a.probability,onChange:u=>n({...a,probability:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",min:"0",max:"100"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  "}),e.jsx("input",{type:"date",value:a.expected_close_date,onChange:u=>n({...a,expected_close_date:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  "}),e.jsx("input",{type:"date",value:a.next_action_date,onChange:u=>n({...a,next_action_date:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:a.notes,onChange:u=>n({...a,notes:u.target.value}),rows:2,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all resize-none",placeholder:" "})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 rounded-b-3xl flex items-center justify-end gap-3 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 transition-all",children:""}),e.jsx("button",{onClick:c,disabled:i,className:"px-6 py-3 bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-semibold rounded-xl hover:from-cyan-600 hover:to-blue-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:i?"...":" "})]})]})})})},qY=({lead:s,onClose:t,onSuccess:r,showToast:a})=>{const[n,i]=w.useState({title:s.title||"",source:s.source||"",client_id:s.client_id?.toString()||"",contact_name:s.contact_name||"",contact_phone:s.contact_phone||"",contact_email:s.contact_email||"",contact_telegram:s.contact_telegram||"",description:s.description||"",requirements:s.requirements||"",budget:s.budget?.toString()||"",probability:s.probability?.toString()||"50",expected_close_date:s.expected_close_date||"",notes:s.notes||""}),[o,c]=w.useState(!1),u=async h=>{if(h.preventDefault(),!n.title.trim()){a(" ","error");return}c(!0);try{const m={title:n.title,source:n.source||void 0,client_id:n.client_id?+n.client_id:void 0,contact_name:n.contact_name||void 0,contact_phone:n.contact_phone||void 0,contact_email:n.contact_email||void 0,contact_telegram:n.contact_telegram||void 0,description:n.description||void 0,requirements:n.requirements||void 0,budget:n.budget?+n.budget:void 0,probability:n.probability?+n.probability:50,expected_close_date:n.expected_close_date||void 0,notes:n.notes||void 0},f=await wd.updateLead(s.id,m);f.success?r():a(f.message||"  ","error")}catch(m){console.error("Error updating lead:",m),a(m.response?.data?.message||"  ","error")}finally{c(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black/50 backdrop-blur-sm",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-3xl bg-white rounded-3xl shadow-2xl",children:[e.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-cyan-500 to-blue-600 px-6 py-5 rounded-t-3xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:" "}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(Ae,{className:"w-6 h-6 text-white"})})]})}),e.jsxs("form",{onSubmit:u,className:"p-6 space-y-6 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:n.title,onChange:h=>i({...n,title:h.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:n.source,onChange:h=>i({...n,source:h.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"website",children:""}),e.jsx("option",{value:"telegram",children:"Telegram"}),e.jsx("option",{value:"referral",children:""}),e.jsx("option",{value:"ads",children:""}),e.jsx("option",{value:"social",children:". "}),e.jsx("option",{value:"cold",children:""}),e.jsx("option",{value:"other",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"number",value:n.budget,onChange:h=>i({...n,budget:h.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",min:"0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" (%)"}),e.jsx("input",{type:"number",value:n.probability,onChange:h=>i({...n,probability:h.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",min:"0",max:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:n.description,onChange:h=>i({...n,description:h.target.value}),rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all resize-none"})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 rounded-b-3xl flex items-center justify-end gap-3 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 transition-all",children:""}),e.jsx("button",{onClick:u,disabled:o,className:"px-6 py-3 bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-semibold rounded-xl hover:from-cyan-600 hover:to-blue-700 transition-all shadow-lg disabled:opacity-50",children:o?"...":""})]})]})})})},WY=({lead:s,onClose:t,onSuccess:r,showToast:a})=>{const[n,i]=w.useState(s.status),[o,c]=w.useState(""),[u,h]=w.useState(!1),m=async f=>{f.preventDefault(),h(!0);try{const p=await wd.updateLeadStatus(s.id,n,o||void 0);p.success?r():a(p.message||"  ","error")}catch(p){console.error("Error updating status:",p),a(p.response?.data?.message||"  ","error")}finally{h(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black/50 backdrop-blur-sm",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md bg-white rounded-3xl shadow-2xl",children:[e.jsx("div",{className:"bg-gradient-to-r from-cyan-500 to-blue-600 px-6 py-5 rounded-t-3xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:" "}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(Ae,{className:"w-6 h-6 text-white"})})]})}),e.jsxs("form",{onSubmit:m,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsxs("select",{value:n,onChange:f=>i(f.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",children:[e.jsx("option",{value:"new",children:""}),e.jsx("option",{value:"contact_made",children:" "}),e.jsx("option",{value:"qualification",children:""}),e.jsx("option",{value:"proposal_sent",children:" "}),e.jsx("option",{value:"negotiation",children:""}),e.jsx("option",{value:"won",children:""}),e.jsx("option",{value:"lost",children:""}),e.jsx("option",{value:"postponed",children:""})]})]}),n==="lost"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("textarea",{value:o,onChange:f=>c(f.target.value),rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all resize-none",placeholder:" ..."})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 transition-all",children:""}),e.jsx("button",{type:"submit",disabled:u,className:"px-6 py-3 bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-semibold rounded-xl hover:from-cyan-600 hover:to-blue-700 transition-all shadow-lg disabled:opacity-50",children:u?"...":""})]})]})]})})})},YY=({lead:s,onClose:t,onSuccess:r,showToast:a})=>{const[n,i]=w.useState({title:s.title,amount:s.budget?.toString()||"",prepayment_percent:"50",priority:"normal",start_date:"",end_date:s.expected_close_date||"",description:s.description||""}),[o,c]=w.useState(!1),u=async h=>{if(h.preventDefault(),!n.amount||+n.amount<=0){a("  ","error");return}c(!0);try{const m={title:n.title,amount:+n.amount,prepayment_percent:n.prepayment_percent?+n.prepayment_percent:void 0,priority:n.priority,start_date:n.start_date||void 0,end_date:n.end_date||void 0,description:n.description||void 0},f=await wd.convertLead(s.id,m);f.success?(r(),setTimeout(()=>{window.location.href="/deals"},1500)):a(f.message||" ","error")}catch(m){console.error("Error converting lead:",m),a(m.response?.data?.message||" ","error")}finally{c(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black/50 backdrop-blur-sm",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-2xl bg-white rounded-3xl shadow-2xl",children:[e.jsx("div",{className:"bg-gradient-to-r from-cyan-500 to-blue-600 px-6 py-5 rounded-t-3xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:"  "}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(Ae,{className:"w-6 h-6 text-white"})})]})}),e.jsxs("form",{onSubmit:u,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"text",value:n.title,onChange:h=>i({...n,title:h.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:n.amount,onChange:h=>i({...n,amount:h.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",required:!0,min:"0"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" (%)"}),e.jsx("input",{type:"number",value:n.prepayment_percent,onChange:h=>i({...n,prepayment_percent:h.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",min:"0",max:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:n.priority,onChange:h=>i({...n,priority:h.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all",children:[e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"normal",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"urgent",children:""})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"date",value:n.start_date,onChange:h=>i({...n,start_date:h.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"date",value:n.end_date,onChange:h=>i({...n,end_date:h.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:n.description,onChange:h=>i({...n,description:h.target.value}),rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all resize-none"})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 transition-all",children:""}),e.jsx("button",{type:"submit",disabled:o,className:"px-6 py-3 bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-semibold rounded-xl hover:from-cyan-600 hover:to-blue-700 transition-all shadow-lg disabled:opacity-50",children:o?"...":""})]})]})]})})})},Wh={getDeals:async s=>{const t=new URLSearchParams;return s?.search&&t.append("search",s.search),s?.status&&t.append("status",s.status),s?.client_id&&t.append("client_id",s.client_id.toString()),s?.manager_id&&t.append("manager_id",s.manager_id.toString()),s?.executor_id&&t.append("executor_id",s.executor_id.toString()),s?.priority&&t.append("priority",s.priority),s?.page&&t.append("page",s.page.toString()),s?.limit&&t.append("limit",s.limit.toString()),(await fe.get(`/admin/deals/api?${t}`)).data},createDeal:async s=>(await fe.post("/admin/deals/api",s)).data,updateDealStatus:async(s,t)=>(await fe.put(`/admin/deals/api/${s}/status`,{status:t})).data,addPayment:async(s,t,r,a)=>(await fe.post(`/admin/deals/api/${s}/payment`,{amount:t,type:r,description:a})).data,convertToProject:async(s,t)=>(await fe.post(`/admin/deals/api/${s}/convert-to-project`,t)).data,getPipeline:async()=>(await fe.get("/admin/deals/api/pipeline")).data},GY=()=>{const[s,t]=w.useState([]),[r,a]=w.useState(!0),[n,i]=w.useState({page:1,limit:20}),[o,c]=w.useState(!1),[u,h]=w.useState({total:0,page:1,limit:20,pages:1}),[m,f]=w.useState({total:0,active:0,completed_month:0,total_amount:0,paid_amount:0,payment_progress:0}),[p,j]=w.useState("table"),[g,v]=w.useState(null),[y,N]=w.useState(null),[S,k]=w.useState(!1),[_,T]=w.useState(!1),[E,z]=w.useState(null),[M,C]=w.useState([]),A=w.useCallback((Q,W="info")=>{const H=Date.now().toString();C(re=>[...re,{id:H,message:Q,type:W}]),setTimeout(()=>{C(re=>re.filter(he=>he.id!==H))},4e3)},[]),Z=w.useCallback(async()=>{try{a(!0);const Q=await Wh.getDeals(n);if(Q.success){t(Q.deals),h(Q.pagination);const W=Q.pagination.total,H=["new","discussion","contract_prep","contract_signed","prepayment","in_work","testing","acceptance","payment"],re=Q.deals.filter(ce=>H.includes(ce.status)).length,he=Q.deals.reduce((ce,X)=>ce+(X.amount||0),0),G=Q.deals.reduce((ce,X)=>ce+(X.paid_amount||0),0);f({total:W,active:re,completed_month:0,total_amount:he,paid_amount:G,payment_progress:he>0?G/he*100:0})}}catch(Q){console.error("Error loading deals:",Q),A("  ","error")}finally{a(!1)}},[n,A]),I=w.useCallback(async()=>{try{const Q=await Wh.getPipeline();Q.success&&(v(Q.pipeline),N(Q.stats))}catch(Q){console.error("Error loading pipeline:",Q),A("  ","error")}},[A]);w.useEffect(()=>{p==="table"?Z():I()},[p,Z,I]);const V=w.useCallback(()=>{p==="table"?Z():I()},[p,Z,I]),R=w.useCallback(()=>{i(Q=>({...Q,page:1}))},[]),q=w.useCallback(()=>{i({page:1,limit:20})},[]),J=w.useCallback(()=>{j(Q=>Q==="table"?"kanban":"table")},[]),se=w.useCallback(()=>{k(!0),document.body.style.overflow="hidden"},[]),Y=w.useCallback(()=>{k(!1),document.body.style.overflow="auto"},[]),ee=w.useCallback(Q=>{z(Q),T(!0),document.body.style.overflow="hidden"},[]),te=w.useCallback(()=>{T(!1),z(null),document.body.style.overflow="auto"},[]),K=w.useCallback(async Q=>{if(confirm("     ?"))try{const W=await Wh.convertToProject(Q,{});W.success?(A("    ","success"),setTimeout(()=>{window.location.href="/projects"},1500)):A(W.message||" ","error")}catch(W){console.error("Error converting deal:",W),A(W.response?.data?.message||" ","error")}},[A]),$=w.useCallback(Q=>{i(W=>({...W,page:Q}))},[]),le=Q=>({new:"",discussion:"",contract_prep:" ",contract_signed:" ",prepayment:" ",in_work:" ",testing:"",acceptance:"",payment:" ",completed:"",cancelled:""})[Q]||Q,ie=Q=>({new:"bg-blue-100 text-blue-700",discussion:"bg-pink-100 text-pink-700",contract_prep:"bg-orange-100 text-orange-700",contract_signed:"bg-green-100 text-green-700",prepayment:"bg-rose-100 text-rose-700",in_work:"bg-teal-100 text-teal-700",testing:"bg-cyan-100 text-cyan-700",acceptance:"bg-purple-100 text-purple-700",payment:"bg-amber-100 text-amber-700",completed:"bg-emerald-100 text-emerald-700",cancelled:"bg-red-100 text-red-700"})[Q]||"bg-gray-100 text-gray-700",oe=Q=>({low:"",normal:"",high:"",urgent:""})[Q]||Q,de=Q=>({low:"bg-gray-100 text-gray-700",normal:"bg-blue-100 text-blue-700",high:"bg-orange-100 text-orange-700",urgent:"bg-red-100 text-red-700"})[Q]||"bg-gray-100 text-gray-700",U=Q=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0}).format(Q),F=Q=>["contract_signed","prepayment","in_work"].includes(Q.status)&&!Q.project_id;return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"max-w-[2000px] mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx(P4,{className:"w-7 h-7 text-white"})})," "]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"   "})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>c(!o),className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-200",children:[e.jsx(gr,{className:"w-5 h-5"}),""]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-200",children:[e.jsx(wt,{className:"w-5 h-5"}),""]}),e.jsx("button",{onClick:V,className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-200",children:e.jsx(rs,{className:"w-5 h-5"})}),e.jsx("button",{onClick:J,className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-200",children:p==="table"?e.jsxs(e.Fragment,{children:[e.jsx(hN,{className:"w-5 h-5"}),""]}):e.jsxs(e.Fragment,{children:[e.jsx(Am,{className:"w-5 h-5"}),""]})}),e.jsxs("button",{onClick:se,className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg hover:from-green-600 hover:to-emerald-700 transition-all shadow-lg",children:[e.jsx(Ve,{className:"w-5 h-5"})," "]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl p-6 text-white shadow-xl",children:[e.jsx("div",{className:"text-4xl font-bold mb-2",children:m.total}),e.jsx("div",{className:"text-sm opacity-90",children:" "})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-6 text-white shadow-xl",children:[e.jsx("div",{className:"text-4xl font-bold mb-2",children:m.active}),e.jsx("div",{className:"text-sm opacity-90",children:""})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-amber-600 rounded-2xl p-6 text-white shadow-xl",children:[e.jsx("div",{className:"text-4xl font-bold mb-2",children:U(m.total_amount)}),e.jsx("div",{className:"text-sm opacity-90",children:" "})]}),e.jsxs("div",{className:"bg-gradient-to-br from-cyan-500 to-blue-600 rounded-2xl p-6 text-white shadow-xl",children:[e.jsxs("div",{className:"text-4xl font-bold mb-2",children:[m.payment_progress.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm opacity-90",children:""})]})]}),o&&e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:e.jsxs("div",{className:"grid grid-cols-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:n.search||"",onChange:Q=>i({...n,search:Q.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all",placeholder:", ..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:n.status||"",onChange:Q=>i({...n,status:Q.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"new",children:""}),e.jsx("option",{value:"discussion",children:""}),e.jsx("option",{value:"contract_prep",children:" "}),e.jsx("option",{value:"contract_signed",children:" "}),e.jsx("option",{value:"prepayment",children:" "}),e.jsx("option",{value:"in_work",children:" "}),e.jsx("option",{value:"testing",children:""}),e.jsx("option",{value:"acceptance",children:""}),e.jsx("option",{value:"payment",children:" "}),e.jsx("option",{value:"completed",children:""}),e.jsx("option",{value:"cancelled",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:n.priority||"",onChange:Q=>i({...n,priority:Q.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"normal",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"urgent",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" ID"}),e.jsx("input",{type:"number",value:n.client_id||"",onChange:Q=>i({...n,client_id:Q.target.value?+Q.target.value:void 0}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all",placeholder:"ID "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" ID"}),e.jsx("input",{type:"number",value:n.manager_id||"",onChange:Q=>i({...n,manager_id:Q.target.value?+Q.target.value:void 0}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all",placeholder:"ID "})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("button",{onClick:R,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all font-semibold",children:""}),e.jsx("button",{onClick:q,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all font-semibold",children:""})]})]})}),p==="table"&&e.jsx("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden border border-gray-100",children:r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-green-100 to-emerald-100 rounded-3xl flex items-center justify-center mb-6 mx-auto",children:e.jsx(P4,{className:"w-12 h-12 text-green-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"  "}),e.jsx("p",{className:"text-gray-600 mb-6",children:"  ,   "}),e.jsxs("button",{onClick:se,className:"inline-flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl font-semibold hover:shadow-xl transition-all",children:[e.jsx(Ve,{className:"w-5 h-5"}),"  "]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-green-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"ID"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:s.map(Q=>e.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-green-50/50 hover:to-emerald-50/50 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:["#",Q.id]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:Q.title}),Q.priority!=="normal"&&e.jsx("span",{className:`inline-block mt-1 px-2 py-1 rounded-full text-xs font-semibold ${de(Q.priority)}`,children:oe(Q.priority)}),Q.project_id&&e.jsx("div",{className:"mt-2",children:e.jsxs("a",{href:`/projects/${Q.project_id}`,className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-700 rounded-md text-xs font-medium hover:bg-blue-200 transition-colors",title:` #${Q.project_id}`,children:[e.jsx(vn,{className:"w-3 h-3"}),e.jsxs("span",{children:[" #",Q.project_id]}),e.jsx(Yj,{className:"w-3 h-3"})]})})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:Q.client_name||"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${ie(Q.status)}`,children:le(Q.status)})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 font-medium",children:U(Q.amount)}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900 font-medium mb-1",children:U(Q.paid_amount||0)}),e.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-red-500 via-orange-500 to-green-500 transition-all",style:{width:`${Q.payment_progress||0}%`}})})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:Q.manager_name||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:Q.executor_name||"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>ee(Q),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:" ",children:e.jsx(Ge,{className:"w-4 h-4"})}),F(Q)&&e.jsx("button",{onClick:()=>K(Q.id),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:" ",children:e.jsx(vn,{className:"w-4 h-4"})})]})})]},Q.id))})]})}),u.pages>1&&e.jsxs("div",{className:"px-6 py-4 border-t border-gray-100 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[" ",s.length,"  ",u.total," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>$(u.page-1),disabled:u.page===1,className:"px-4 py-2 bg-white border-2 border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:" "}),[...Array(Math.min(u.pages,5))].map((Q,W)=>{const H=W+1;return e.jsx("button",{onClick:()=>$(H),className:`px-4 py-2 rounded-lg transition-all ${u.page===H?"bg-gradient-to-r from-green-500 to-emerald-600 text-white":"bg-white border-2 border-gray-200 hover:bg-gray-50"}`,children:H},H)}),e.jsx("button",{onClick:()=>$(u.page+1),disabled:u.page===u.pages,className:"px-4 py-2 bg-white border-2 border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:" "})]})]})]})}),p==="kanban"&&g&&e.jsx(KY,{pipeline:g,stats:y,formatCurrency:U,getStatusLabel:le})]}),S&&e.jsx(XY,{onClose:Y,onSuccess:()=>{Y(),V(),A("  ","success")},showToast:A}),_&&E&&e.jsx(ZY,{deal:E,onClose:te,onSuccess:()=>{te(),V(),A("  ","success")},showToast:A}),e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:M.map(Q=>e.jsx("div",{className:`px-6 py-3 rounded-lg shadow-lg text-white ${Q.type==="success"?"bg-green-500":Q.type==="error"?"bg-red-500":"bg-blue-500"} animate-slide-in`,children:Q.message},Q.id))})]})},KY=({pipeline:s,stats:t,formatCurrency:r,getStatusLabel:a})=>{const n=[{key:"new",label:"",gradient:"from-purple-500 to-pink-600"},{key:"discussion",label:"",gradient:"from-pink-500 to-red-500"},{key:"contract_prep",label:"",gradient:"from-cyan-400 to-blue-500"},{key:"in_work",label:" ",gradient:"from-emerald-400 to-teal-500"},{key:"testing",label:"",gradient:"from-orange-400 to-pink-500"},{key:"payment",label:"",gradient:"from-teal-500 to-blue-700"}];return e.jsx("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4",children:n.map(i=>{const o=s[i.key]||[],c=t?t[i.key]:null;return e.jsx("div",{className:"flex-shrink-0",style:{width:"300px"},children:e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-4 min-h-[500px]",children:[e.jsxs("div",{className:`bg-gradient-to-br ${i.gradient} text-white rounded-xl p-4 mb-4`,children:[e.jsx("div",{className:"font-bold text-lg",children:i.label}),e.jsx("div",{className:"text-sm opacity-90 mt-1",children:c?`${c.count} `:`${o.length} `})]}),e.jsx("div",{className:"space-y-3",children:o.length===0?e.jsx("div",{className:"text-center text-gray-400 py-8",children:" "}):o.map(u=>e.jsxs("div",{className:"bg-white rounded-xl p-4 border-l-4 border-green-500 shadow-md hover:shadow-lg transition-all cursor-move",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h6",{className:"font-bold text-gray-900",children:u.title}),e.jsxs("span",{className:"text-xs font-semibold text-gray-500",children:["#",u.id]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:u.client_name}),e.jsx("div",{className:"text-lg font-bold text-green-600 mb-2",children:r(u.amount)}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden mb-2",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-red-500 via-orange-500 to-green-500",style:{width:`${u.payment_progress||0}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsx("span",{children:u.manager_name||" "}),e.jsxs("span",{children:[u.days_in_status||0," ."]})]})]},u.id))})]})},i.key)})})})},XY=({onClose:s,onSuccess:t,showToast:r})=>{const[a,n]=w.useState({title:"",client_id:"",description:"",technical_requirements:"",amount:"",cost:"",discount:"0",prepayment_percent:"50",start_date:"",end_date:"",manager_id:"",executor_id:"",priority:"normal"}),[i,o]=w.useState(!1),c=async u=>{if(u.preventDefault(),!a.title.trim()){r(" ","error");return}if(!a.client_id){r(" ","error");return}if(!a.amount||+a.amount<=0){r("  ","error");return}o(!0);try{const h={title:a.title,client_id:+a.client_id,description:a.description||void 0,technical_requirements:a.technical_requirements||void 0,amount:+a.amount,cost:a.cost?+a.cost:void 0,discount:a.discount?+a.discount:0,prepayment_percent:a.prepayment_percent?+a.prepayment_percent:50,start_date:a.start_date||void 0,end_date:a.end_date||void 0,manager_id:a.manager_id?+a.manager_id:void 0,executor_id:a.executor_id?+a.executor_id:void 0,priority:a.priority},m=await Wh.createDeal(h);m.success?t():r(m.message||"  ","error")}catch(h){console.error("Error creating deal:",h),r(h.response?.data?.message||"  ","error")}finally{o(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black/50 backdrop-blur-sm",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-3xl bg-white rounded-3xl shadow-2xl",children:[e.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-green-500 to-emerald-600 px-6 py-5 rounded-t-3xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:" "}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(Ae,{className:"w-6 h-6 text-white"})})]})}),e.jsxs("form",{onSubmit:c,className:"p-6 space-y-6 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a.title,onChange:u=>n({...a,title:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all",placeholder:" ",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["ID  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:a.client_id,onChange:u=>n({...a,client_id:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all",placeholder:"ID ",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:a.description,onChange:u=>n({...a,description:u.target.value}),rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all resize-none",placeholder:" "})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:a.amount,onChange:u=>n({...a,amount:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all",placeholder:"0",min:"0",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"number",value:a.cost,onChange:u=>n({...a,cost:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all",placeholder:"0",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"number",value:a.discount,onChange:u=>n({...a,discount:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all",placeholder:"0",min:"0"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" (%)"}),e.jsx("input",{type:"number",value:a.prepayment_percent,onChange:u=>n({...a,prepayment_percent:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all",min:"0",max:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:a.priority,onChange:u=>n({...a,priority:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all",children:[e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"normal",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"urgent",children:""})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"date",value:a.start_date,onChange:u=>n({...a,start_date:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"date",value:a.end_date,onChange:u=>n({...a,end_date:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ID "}),e.jsx("input",{type:"number",value:a.manager_id,onChange:u=>n({...a,manager_id:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all",placeholder:"ID "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ID "}),e.jsx("input",{type:"number",value:a.executor_id,onChange:u=>n({...a,executor_id:u.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all",placeholder:"ID "})]})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 rounded-b-3xl flex items-center justify-end gap-3 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 transition-all",children:""}),e.jsx("button",{onClick:c,disabled:i,className:"px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-semibold rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:i?"...":" "})]})]})})})},ZY=({deal:s,onClose:t,onSuccess:r,showToast:a})=>{const[n,i]=w.useState({amount:"",type:"payment",description:""}),[o,c]=w.useState(!1),u=async h=>{if(h.preventDefault(),!n.amount||+n.amount<=0){a("     0","error");return}c(!0);try{const m=await Wh.addPayment(s.id,+n.amount,n.type,n.description||void 0);m.success?r():a(m.message||"  ","error")}catch(m){console.error("Error adding payment:",m),a(m.response?.data?.message||"  ","error")}finally{c(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black/50 backdrop-blur-sm",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md bg-white rounded-3xl shadow-2xl",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 px-6 py-5 rounded-t-3xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:" "}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(Ae,{className:"w-6 h-6 text-white"})})]})}),e.jsxs("form",{onSubmit:u,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:n.amount,onChange:h=>i({...n,amount:h.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all",placeholder:"0",min:"1",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsxs("select",{value:n.type,onChange:h=>i({...n,type:h.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all",children:[e.jsx("option",{value:"prepayment",children:""}),e.jsx("option",{value:"payment",children:""}),e.jsx("option",{value:"final",children:" "})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:n.description,onChange:h=>i({...n,description:h.target.value}),rows:2,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all resize-none",placeholder:" "})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 transition-all",children:""}),e.jsx("button",{type:"submit",disabled:o,className:"px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-semibold rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all shadow-lg disabled:opacity-50",children:o?"...":" "})]})]})]})})})},Vo={getContractors:async s=>{const t=new URLSearchParams;return s?.search&&t.append("search",s.search),s?.specialization&&t.append("specialization",s.specialization),s?.status&&t.append("status",s.status),s?.page&&t.append("page",s.page.toString()),s?.limit&&t.append("limit",s.limit.toString()),(await fe.get(`/admin/api/contractors/?${t}`)).data},getContractor:async s=>(await fe.get(`/admin/api/contractors/${s}`)).data,createContractor:async s=>(await fe.post("/admin/api/contractors/",s)).data,updateContractor:async(s,t)=>(await fe.put(`/admin/api/contractors/${s}`,t)).data,deleteContractor:async s=>(await fe.delete(`/admin/api/contractors/${s}`)).data,changePassword:async(s,t)=>(await fe.post(`/admin/api/contractors/${s}/change-password`,{new_password:t})).data,createPayment:async(s,t)=>(await fe.post(`/admin/api/contractors/${s}/payments`,t)).data},QY=({contractor:s,onView:t,onEdit:r,onDelete:a,onCreatePayment:n})=>{const i=s.first_name&&s.last_name?`${s.first_name} ${s.last_name}`:s.username,o=c=>c?`${c.toLocaleString("ru-RU")} `:"0 ";return e.jsxs("div",{className:"bg-white rounded-2xl shadow-md hover:shadow-xl transition-all duration-200 overflow-hidden border border-gray-100",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:i}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:"inline-block px-3 py-1 bg-green-500 text-white text-xs rounded-full font-medium",children:""}),e.jsx("span",{className:"inline-block px-3 py-1 bg-blue-500 text-white text-xs rounded-full font-medium",children:""})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"flex items-center gap-1 text-yellow-300",children:[...Array(5)].map((c,u)=>e.jsx(Ps,{className:"w-4 h-4 fill-current"},u))}),e.jsx("span",{className:"text-sm mt-1 block",children:"5/5"})]})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-1",children:"Email"}),e.jsx("p",{className:"text-sm text-gray-900 truncate",title:s.email,children:s.email||" "})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-1",children:"Username"}),e.jsx("p",{className:"text-sm text-gray-900 truncate",title:s.username,children:s.username||" "})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-1",children:" "}),e.jsx("p",{className:"text-sm text-gray-900",children:s.created_at?new Date(s.created_at).toLocaleDateString("ru-RU"):" "})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-1",children:""}),e.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-medium ${s.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:s.is_active?"":""})]})]})]}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 grid grid-cols-3 gap-4 border-t border-gray-100",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-gray-900",children:"0"}),e.jsx("div",{className:"text-xs text-gray-500",children:""})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-gray-900",children:"0"}),e.jsx("div",{className:"text-xs text-gray-500",children:""})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-gray-900 truncate",title:o(s.total_payments),children:s.total_payments?o(s.total_payments).slice(0,10)+(o(s.total_payments).length>10?"...":""):"0 "}),e.jsx("div",{className:"text-xs text-gray-500",children:""})]})]}),e.jsxs("div",{className:"p-4 flex flex-wrap gap-2 border-t border-gray-100",children:[e.jsxs("button",{onClick:t,className:"flex items-center gap-1 px-3 py-2 text-sm bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors",children:[e.jsx(Ft,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("button",{onClick:n,className:"flex items-center gap-1 px-3 py-2 text-sm bg-green-50 text-green-600 rounded-lg hover:bg-green-100 transition-colors",children:[e.jsx(Ge,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("button",{onClick:r,className:"flex items-center gap-1 px-3 py-2 text-sm bg-yellow-50 text-yellow-600 rounded-lg hover:bg-yellow-100 transition-colors",children:[e.jsx(kn,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("button",{onClick:a,className:"flex items-center gap-1 px-3 py-2 text-sm bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors",children:[e.jsx(Xe,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:""})]})]})]})},JY=({isOpen:s,onClose:t,onSuccess:r})=>{const[a,n]=w.useState(!1),[i,o]=w.useState({username:"",email:"",first_name:"",last_name:"",role:"executor",is_active:!0,admin_login:"",admin_password:"",force_password_change:!1});w.useEffect(()=>{s&&o({username:"",email:"",first_name:"",last_name:"",role:"executor",is_active:!0,admin_login:"",admin_password:"",force_password_change:!1})},[s]),w.useEffect(()=>{if(s){const h=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${h}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const h=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(h||"0")*-1)}},[s]);const c=async h=>{if(h.preventDefault(),!i.username.trim()){alert(" username");return}if(!i.email.trim()){alert(" email");return}if(!i.admin_password.trim()){alert("   ");return}try{n(!0);const m=await Vo.createContractor(i);m.success?r():alert("  : "+m.message)}catch(m){console.error("Error creating contractor:",m),alert("  ")}finally{n(!1)}},u=(h,m)=>{o(f=>({...f,[h]:m}))};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-4 flex items-center justify-between sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ve,{className:"w-6 h-6"}),e.jsx("h3",{className:"text-xl font-bold",children:" "})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:c,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Username ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:i.username,onChange:h=>u("username",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all",placeholder:" username",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",value:i.email,onChange:h=>u("email",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all",placeholder:" email",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:i.first_name,onChange:h=>u("first_name",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all",placeholder:" "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:i.last_name,onChange:h=>u("last_name",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all",placeholder:" "})]})]}),e.jsx("hr",{className:"my-6"}),e.jsx("h6",{className:"text-lg font-semibold text-gray-900 mb-4",children:"  "}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  "}),e.jsx("input",{type:"text",value:i.admin_login,onChange:h=>u("admin_login",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all",placeholder:"  username   "})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["   ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"password",value:i.admin_password,onChange:h=>u("admin_password",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all",placeholder:" ",required:!0})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"forcePasswordChange",checked:i.force_password_change,onChange:h=>u("force_password_change",h.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"forcePasswordChange",className:"text-sm text-gray-700",children:"     "})]}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-blue-900",children:"          ."})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:a,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:a?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(Ve,{className:"w-5 h-5"})," "]})}),e.jsx("button",{type:"button",onClick:t,disabled:a,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold disabled:opacity-50",children:""})]})]})]})}):null},eG=({isOpen:s,onClose:t,onSuccess:r,contractor:a})=>{const[n,i]=w.useState(!1),[o,c]=w.useState(!1),[u,h]=w.useState(""),[m,f]=w.useState(!1),[p,j]=w.useState({username:a.username,email:a.email,first_name:a.first_name||"",last_name:a.last_name||"",telegram_id:a.telegram_id,is_active:a.is_active});w.useEffect(()=>{s&&(j({username:a.username,email:a.email,first_name:a.first_name||"",last_name:a.last_name||"",telegram_id:a.telegram_id,is_active:a.is_active}),c(!1),h(""))},[s,a]),w.useEffect(()=>{if(s){const N=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${N}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const N=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(N||"0")*-1)}},[s]);const g=async N=>{if(N.preventDefault(),!p.username?.trim()){alert("  ");return}if(!p.email?.trim()){alert(" email");return}try{i(!0),(await Vo.updateContractor(a.id,p)).success&&r()}catch(S){console.error("Error updating contractor:",S),alert("  ")}finally{i(!1)}},v=async N=>{if(N.preventDefault(),!u.trim()){alert("  ");return}if(u.length<6){alert("     6 ");return}try{f(!0),(await Vo.changePassword(a.id,u)).success&&(alert("  "),c(!1),h(""))}catch(S){console.error("Error changing password:",S),alert("  ")}finally{f(!1)}},y=(N,S)=>{j(k=>({...k,[N]:S}))};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-4 flex items-center justify-between sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ka,{className:"w-6 h-6"}),e.jsx("h3",{className:"text-xl font-bold",children:" "})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:g,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:p.username,onChange:N=>y("username",N.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",placeholder:"  ",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",value:p.email,onChange:N=>y("email",N.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",placeholder:" email",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:p.first_name,onChange:N=>y("first_name",N.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",placeholder:" "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:p.last_name,onChange:N=>y("last_name",N.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",placeholder:" "})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Telegram ID"}),e.jsx("input",{type:"number",value:p.telegram_id||"",onChange:N=>y("telegram_id",N.target.value?parseInt(N.target.value):void 0),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",placeholder:" Telegram ID"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:p.is_active,onChange:N=>y("is_active",N.target.checked),className:"w-5 h-5 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-semibold text-gray-700",children:""})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsxs("button",{type:"button",onClick:()=>c(!o),className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-all font-semibold",children:[e.jsx(Kj,{className:"w-4 h-4"}),o?"  ":" "]})}),o&&e.jsxs("div",{className:"bg-gray-50 border-2 border-gray-200 rounded-lg p-4 space-y-3",children:[e.jsx("h4",{className:"font-semibold text-gray-700",children:" "}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"password",value:u,onChange:N=>h(N.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",placeholder:" 6 ",minLength:6})]}),e.jsx("button",{type:"button",onClick:v,disabled:m,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:m?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(Kj,{className:"w-4 h-4"})," "]})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:n,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:n?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(ka,{className:"w-5 h-5"})," "]})}),e.jsx("button",{type:"button",onClick:t,disabled:n,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold disabled:opacity-50",children:""})]})]})]})}):null},tG=({isOpen:s,onClose:t,contractorId:r,onEdit:a,onDelete:n})=>{const[i,o]=w.useState(!1),[c,u]=w.useState(null),[h,m]=w.useState([]),[f,p]=w.useState([]);w.useEffect(()=>{s&&j()},[s,r]),w.useEffect(()=>{if(s){const y=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${y}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const y=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(y||"0")*-1)}},[s]);const j=async()=>{try{o(!0);const y=await Vo.getContractor(r);y.success&&(u(y.contractor),m(y.assignments||[]),p(y.payments||[]))}catch(y){console.error("Error loading contractor details:",y),alert("   ")}finally{o(!1)}},g=y=>y?new Date(y).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):" ",v=y=>{const S={pending:{label:" ",color:"bg-yellow-100 text-yellow-800"},paid:{label:"",color:"bg-green-100 text-green-800"},cancelled:{label:"",color:"bg-red-100 text-red-800"},active:{label:"",color:"bg-blue-100 text-blue-800"},completed:{label:"",color:"bg-gray-100 text-gray-800"}}[y]||{label:y,color:"bg-gray-100 text-gray-800"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${S.color}`,children:S.label})};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-4 flex items-center justify-between sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ft,{className:"w-6 h-6"}),e.jsx("h3",{className:"text-xl font-bold",children:" "})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6",children:i?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):c?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-900 mb-4",children:"  "}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500",children:" "}),e.jsx("p",{className:"text-gray-900",children:c.username})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500",children:"Email"}),e.jsx("p",{className:"text-gray-900",children:c.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500",children:""}),e.jsx("p",{className:"text-gray-900",children:c.first_name||" "})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500",children:""}),e.jsx("p",{className:"text-gray-900",children:c.last_name||" "})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500",children:"Telegram ID"}),e.jsx("p",{className:"text-gray-900",children:c.telegram_id||" "})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500",children:""}),e.jsx("p",{className:"text-gray-900",children:c.is_active?e.jsx("span",{className:"text-green-600 font-semibold",children:""}):e.jsx("span",{className:"text-red-600 font-semibold",children:""})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500",children:" "}),e.jsx("p",{className:"text-gray-900",children:g(c.created_at)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500",children:" "}),e.jsx("p",{className:"text-gray-900",children:g(c.last_login)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500",children:" "}),e.jsx("p",{className:"text-gray-900 font-bold text-lg",children:c.total_payments?`${c.total_payments.toFixed(2)} `:"0.00 "})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(pt,{className:"w-5 h-5"}),"   (",h.length,")"]}),h.length>0?e.jsx("div",{className:"space-y-3",children:h.map(y=>e.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-gray-900",children:y.project_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[g(y.start_date)," - ",g(y.end_date)]})]}),v(y.status)]})},y.id))}):e.jsx("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:e.jsx("p",{className:"text-gray-500",children:"   "})})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Ge,{className:"w-5 h-5"}),"  (",f.length,")"]}),f.length>0?e.jsx("div",{className:"space-y-3",children:f.map(y=>e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-4 hover:border-green-300 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-lg text-gray-900",children:[y.amount.toFixed(2)," "]}),e.jsx("p",{className:"text-sm text-gray-500",children:g(y.payment_date||y.created_at)})]}),v(y.status)]}),e.jsx("p",{className:"text-gray-700",children:y.description})]},y.id))}):e.jsx("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:e.jsx("p",{className:"text-gray-500",children:"  "})})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[e.jsxs("button",{type:"button",onClick:a,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all font-semibold",children:[e.jsx(kn,{className:"w-5 h-5"}),""]}),e.jsxs("button",{type:"button",onClick:n,className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all font-semibold flex items-center gap-2",children:[e.jsx(Xe,{className:"w-5 h-5"}),""]}),e.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold",children:""})]})]}):e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 rounded-lg p-4",children:e.jsx("p",{className:"text-red-900",children:"    "})})})]})}):null},sG=({isOpen:s,onClose:t,onSuccess:r,contractorId:a,contractorName:n})=>{const[i,o]=w.useState(!1),[c,u]=w.useState({amount:0,description:""});w.useEffect(()=>{s&&u({amount:0,description:""})},[s]),w.useEffect(()=>{if(s){const f=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${f}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const f=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(f||"0")*-1)}},[s]);const h=async f=>{if(f.preventDefault(),!c.amount||c.amount<=0){alert("  ");return}if(!c.description.trim()){alert("  ");return}try{o(!0),(await Vo.createPayment(a,c)).success&&r()}catch(p){console.error("Error creating payment:",p),alert("  ")}finally{o(!1)}},m=(f,p)=>{u(j=>({...j,[f]:p}))};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-4 flex items-center justify-between sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ge,{className:"w-6 h-6"}),e.jsx("h3",{className:"text-xl font-bold",children:" "})]}),e.jsx("button",{type:"button",onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:h,className:"p-6 space-y-4",children:[e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("span",{className:"font-semibold",children:":"})," ",n]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" () ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:c.amount||"",onChange:f=>m("amount",f.target.value?parseFloat(f.target.value):0),min:"0",step:"0.01",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all",placeholder:" ",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:c.description,onChange:f=>m("description",f.target.value),rows:4,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all resize-none",placeholder:"   (:    )",required:!0})]}),e.jsx("div",{className:"bg-green-50 border-l-4 border-green-500 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-green-900",children:[e.jsx("span",{className:"font-semibold",children:":"}),'      " ".        .']})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:i,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:i?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(Ge,{className:"w-5 h-5"})," "]})}),e.jsx("button",{type:"button",onClick:t,disabled:i,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold disabled:opacity-50",children:""})]})]})]})}):null},rG=()=>{const[s,t]=w.useState([]),[r,a]=w.useState(!0),[n,i]=w.useState({}),[o,c]=w.useState(!1),[u,h]=w.useState(1),[m,f]=w.useState(0),p=12,[j,g]=w.useState(!1),[v,y]=w.useState(!1),[N,S]=w.useState(!1),[k,_]=w.useState(!1),[T,E]=w.useState(null),[z,M]=w.useState([]),C=w.useCallback((le,ie="info")=>{const oe=Date.now().toString();M(de=>[...de,{id:oe,message:le,type:ie}])},[]),A=w.useCallback(le=>{M(ie=>ie.filter(oe=>oe.id!==le))},[]),Z=w.useCallback(async()=>{try{a(!0);const le=await Vo.getContractors({...n,page:u,limit:p});le.success&&(t(le.data),f(le.total))}catch(le){console.error("Error loading contractors:",le),C("  ","error")}finally{a(!1)}},[n,u,C]);w.useEffect(()=>{Z()},[Z]);const I=()=>{g(!1),C("  ","success"),Z()},V=()=>{y(!1),E(null),C("  ","success"),Z()},R=async le=>{if(confirm(" ,     ?    ."))try{const ie=await Vo.deleteContractor(le);ie.success?(C(" ","success"),Z(),S(!1),E(null)):alert(" : "+ie.message)}catch(ie){console.error("Error deleting contractor:",ie),C("  ","error")}},q=le=>{E(le),S(!0)},J=le=>{E(le),y(!0)},se=le=>{E(le),_(!0)},Y=()=>{_(!1),E(null),C("  ","success"),Z()},ee=()=>{h(1),Z()},te=()=>{i({}),h(1)},K=Math.ceil(m/p),$=le=>{h(le)};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"max-w-[2000px] mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:" "}),e.jsx("p",{className:"text-gray-600 mt-1",children:"  "})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>c(!o),className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-200",children:[e.jsx(gr,{className:"w-5 h-5"}),""]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-200",children:[e.jsx(wt,{className:"w-5 h-5"}),""]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-200",children:[e.jsx(tP,{className:"w-5 h-5"}),""]}),e.jsx("button",{onClick:Z,className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-200",children:e.jsx(rs,{className:"w-5 h-5"})}),e.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all shadow-lg",children:[e.jsx(Ve,{className:"w-5 h-5"})," "]})]})]}),o&&e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:n.search||"",onChange:le=>i({...n,search:le.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",placeholder:", email, username..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:n.specialization||"",onChange:le=>i({...n,specialization:le.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"developer",children:""}),e.jsx("option",{value:"designer",children:""}),e.jsx("option",{value:"tester",children:""}),e.jsx("option",{value:"manager",children:""}),e.jsx("option",{value:"analyst",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:n.status||"",onChange:le=>i({...n,status:le.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"active",children:""}),e.jsx("option",{value:"inactive",children:""})]})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("button",{onClick:ee,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-all font-semibold",children:""}),e.jsx("button",{onClick:te,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all font-semibold",children:""})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):s.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-400 text-lg",children:"  "})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(le=>e.jsx(QY,{contractor:le,onView:()=>q(le),onEdit:()=>J(le),onDelete:()=>R(le.id),onCreatePayment:()=>se(le)},le.id))}),K>1&&e.jsxs("div",{className:"mt-6 flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>$(u-1),disabled:u===1,className:"px-4 py-2 bg-white border-2 border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:" "}),[...Array(K)].map((le,ie)=>{const oe=ie+1;return oe===1||oe===K||oe>=u-1&&oe<=u+1?e.jsx("button",{onClick:()=>$(oe),className:`px-4 py-2 rounded-lg transition-all ${u===oe?"bg-indigo-600 text-white":"bg-white border-2 border-gray-200 hover:bg-gray-50"}`,children:oe},oe):oe===u-2||oe===u+2?e.jsx("span",{children:"..."},oe):null}),e.jsx("button",{onClick:()=>$(u+1),disabled:u===K,className:"px-4 py-2 bg-white border-2 border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:" "})]})]})})]}),j&&e.jsx(JY,{isOpen:j,onClose:()=>g(!1),onSuccess:I}),v&&T&&e.jsx(eG,{isOpen:v,onClose:()=>{y(!1),E(null)},onSuccess:V,contractor:T}),N&&T&&e.jsx(tG,{isOpen:N,onClose:()=>{S(!1),E(null)},contractor:T,onEdit:()=>{S(!1),J(T)},onDelete:()=>R(T.id)}),k&&T&&e.jsx(sG,{isOpen:k,onClose:()=>{_(!1),E(null)},onSuccess:Y,contractor:T}),e.jsx(h1,{toasts:z,onRemove:A})]})};class aG{async getProjectsWithFiles(t){try{const r=new URLSearchParams;t?.search&&r.append("search",t.search),t?.status&&r.append("status",t.status),t?.page&&r.append("page",t.page.toString()),t?.limit&&r.append("per_page",t.limit.toString());const[a,n]=await Promise.all([fe.get(`/admin/projects/?${r.toString()}`),this.getAllFiles()]),i=a.data.projects,o=n.files||[],c=new Map;o.forEach(m=>{c.has(m.project_id)||c.set(m.project_id,[]),c.get(m.project_id).push(m)});const u=i.map(m=>({...m,files:c.get(m.id)||[],files_count:c.get(m.id)?.length||0}));let h=u;return t?.has_files!==void 0&&(h=u.filter(m=>t.has_files?(m.files_count||0)>0:(m.files_count||0)===0)),{success:!0,projects:h,pagination:a.data.pagination||{total:h.length,page:t?.page||1,limit:t?.limit||20,pages:Math.ceil(h.length/(t?.limit||20))}}}catch(r){return console.error("Error fetching projects with files:",r),{success:!1,message:r.response?.data?.message||"  ",projects:[],pagination:{total:0,page:1,limit:20,pages:0}}}}async getAllFiles(){try{return{success:!0,files:(await fe.get("/admin/files/all")).data.files}}catch(t){return console.error("Error fetching all files:",t),{success:!1,message:t.response?.data?.message||"  ",files:[]}}}async getProjectFiles(t){try{return{success:!0,files:(await fe.get(`/admin/files/project/${t}`)).data.files}}catch(r){return console.error(`Error fetching files for project ${t}:`,r),{success:!1,message:r.response?.data?.message||"  ",files:[]}}}async uploadFile(t,r,a){try{const n=new FormData;return n.append("file",r),a&&n.append("description",a),{success:!0,file:(await fe.post(`/admin/files/upload/${t}`,n,{headers:{"Content-Type":"multipart/form-data"}})).data.file,message:"  "}}catch(n){return console.error("Error uploading file:",n),{success:!1,message:n.response?.data?.message||"  "}}}async deleteFile(t){try{const r=await fe.delete(`/admin/files/delete/${t}`);return{success:!0,message:"  "}}catch(r){return console.error("Error deleting file:",r),{success:!1,message:r.response?.data?.message||"  "}}}getDownloadUrl(t){return`/admin/files/download/${t}`}async getStats(){try{const[t,r]=await Promise.all([fe.get("/admin/projects/?per_page=1000"),this.getAllFiles()]),a=t.data.projects||[],n=r.files||[],i=new Set(n.map(c=>c.project_id)),o=n.reduce((c,u)=>c+(u.file_size||0),0);return{success:!0,stats:{total_projects:a.length,projects_with_files:i.size,projects_without_files:a.length-i.size,total_files:n.length,total_size:o}}}catch(t){return console.error("Error fetching stats:",t),{success:!1,message:t.response?.data?.message||"  ",stats:{total_projects:0,projects_with_files:0,projects_without_files:0,total_files:0,total_size:0}}}}}const fh=new aG,nG=()=>{const{currentTheme:s}=hp(),[t,r]=w.useState([]),[a,n]=w.useState(!0),[i,o]=w.useState({total_projects:0,projects_with_files:0,projects_without_files:0,total_files:0,total_size:0}),[c,u]=w.useState({search:"",page:1,limit:20}),[h,m]=w.useState(new Set),[f,p]=w.useState(null),[j,g]=w.useState([]),v=w.useCallback((T,E="info")=>{const z=Date.now();g(M=>[...M,{id:z,message:T,type:E}]),setTimeout(()=>{g(M=>M.filter(C=>C.id!==z))},3e3)},[]),y=w.useCallback(async()=>{try{n(!0);const[T,E]=await Promise.all([fh.getProjectsWithFiles(c),fh.getStats()]);T.success?r(T.projects):v(T.message||"  ","error"),E.success&&o(E.stats)}catch(T){console.error("Error loading data:",T),v("  ","error")}finally{n(!1)}},[c,v]);w.useEffect(()=>{y()},[y]);const N=T=>{m(E=>{const z=new Set(E);return z.has(T)?z.delete(T):z.add(T),z})},S=async(T,E,z)=>{try{p(T);const M=await fh.uploadFile(T,E,z);M.success?(v("  ","success"),await y()):v(M.message||"  ","error")}catch(M){console.error("Error uploading file:",M),v("  ","error")}finally{p(null)}},k=async(T,E)=>{if(confirm(" ,     ?"))try{const z=await fh.deleteFile(T);z.success?(v("  ","success"),await y()):v(z.message||"  ","error")}catch(z){console.error("Error deleting file:",z),v("  ","error")}},_=T=>{if(T===0)return"0 B";const E=1024,z=["B","KB","MB","GB"],M=Math.floor(Math.log(T)/Math.log(E));return Math.round(T/Math.pow(E,M)*100)/100+" "+z[M]};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${s.text}`,children:" "}),e.jsx("p",{className:"text-gray-500 mt-1",children:"  "})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:`${s.card} ${s.border} border rounded-lg p-4`,children:[e.jsx("div",{className:"text-sm text-gray-500",children:" "}),e.jsx("div",{className:`text-2xl font-bold ${s.text}`,children:i.total_projects})]}),e.jsxs("div",{className:`${s.card} ${s.border} border rounded-lg p-4`,children:[e.jsx("div",{className:"text-sm text-gray-500",children:" "}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.projects_with_files})]}),e.jsxs("div",{className:`${s.card} ${s.border} border rounded-lg p-4`,children:[e.jsx("div",{className:"text-sm text-gray-500",children:" "}),e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:i.projects_without_files})]}),e.jsxs("div",{className:`${s.card} ${s.border} border rounded-lg p-4`,children:[e.jsx("div",{className:"text-sm text-gray-500",children:" "}),e.jsx("div",{className:`text-2xl font-bold ${s.primary}`,children:i.total_files}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:_(i.total_size)})]})]}),e.jsx("div",{className:`${s.card} ${s.border} border rounded-lg p-4`,children:e.jsx("input",{type:"text",placeholder:"   ...",value:c.search||"",onChange:T=>u({...c,search:T.target.value,page:1}),className:`w-full px-4 py-2 border ${s.border} rounded-lg ${s.input} ${s.text}`})}),a?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:`inline-block animate-spin rounded-full h-12 w-12 border-b-2 ${s.primary}`}),e.jsx("p",{className:`mt-4 ${s.text}`,children:" ..."})]}):t.length===0?e.jsxs("div",{className:`${s.card} ${s.border} border rounded-lg p-12 text-center`,children:[e.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),e.jsx("h3",{className:`text-xl font-semibold ${s.text} mb-2`,children:"  "}),e.jsx("p",{className:"text-gray-500",children:"   "})]}):e.jsx("div",{className:"space-y-4",children:t.map(T=>{const E=h.has(T.id),z=(T.files_count||0)>0;return e.jsxs("div",{className:`${s.card} ${s.border} border rounded-lg overflow-hidden`,children:[e.jsx("div",{className:`p-4 cursor-pointer hover:bg-opacity-50 ${s.hover}`,onClick:()=>N(T.id),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`transform transition-transform ${E?"rotate-90":""}`,children:""}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold ${s.text}`,children:T.title}),e.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-500 mt-1",children:[e.jsxs("span",{children:["ID: ",T.id]}),T.user&&e.jsxs("span",{children:[": ",T.user.first_name," ",T.user.last_name]}),e.jsx("span",{className:z?"text-green-600":"text-orange-600",children:z?` ${T.files_count} `:"  "})]})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${T.status==="completed"?"bg-green-100 text-green-800":T.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:T.status_name||T.status})})]})}),E&&e.jsxs("div",{className:`border-t ${s.border} p-4 space-y-4`,children:[e.jsxs("div",{className:`p-4 rounded-lg ${s.hover}`,children:[e.jsx("h4",{className:`font-semibold ${s.text} mb-3`,children:" "}),e.jsx("input",{type:"file",onChange:M=>{const C=M.target.files?.[0];C&&(S(T.id,C),M.target.value="")},disabled:f===T.id,className:`w-full px-4 py-2 border ${s.border} rounded-lg ${s.input}`}),f===T.id&&e.jsx("p",{className:"text-sm text-blue-600 mt-2",children:" ..."})]}),T.files&&T.files.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:`font-semibold ${s.text}`,children:" :"}),T.files.map(M=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${s.hover} border ${s.border}`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-2xl",children:M.file_type==="archive"?"":M.file_type==="image"?"":M.file_type==="document"?"":""}),e.jsxs("div",{children:[e.jsx("div",{className:`font-medium ${s.text}`,children:M.original_filename}),e.jsxs("div",{className:"text-sm text-gray-500",children:[_(M.file_size),"  ",new Date(M.uploaded_at).toLocaleDateString(),M.description&&`  ${M.description}`]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("a",{href:fh.getDownloadUrl(M.id),download:!0,className:`px-3 py-1 rounded ${s.primary} text-white hover:opacity-80`,children:""}),e.jsx("button",{onClick:()=>k(M.id,T.id),className:"px-3 py-1 rounded bg-red-600 text-white hover:bg-red-700",children:""})]})]},M.id))]}):e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx("p",{children:"  "}),e.jsx("p",{className:"text-sm mt-2",children:"     "})]})]})]},T.id)})}),e.jsx("div",{className:"fixed bottom-4 right-4 space-y-2 z-50",children:j.map(T=>e.jsx("div",{className:`px-6 py-3 rounded-lg shadow-lg text-white ${T.type==="success"?"bg-green-600":T.type==="error"?"bg-red-600":"bg-blue-600"}`,children:T.message},T.id))})]})};class iG{async getArchivedTasks(t){try{const r=new URLSearchParams;t?.employee_id&&r.append("employee_id",t.employee_id.toString()),t?.date_from&&r.append("date_from",t.date_from),t?.date_to&&r.append("date_to",t.date_to);const a=await fe.get(`/admin/api/tasks/archive/list?${r.toString()}`);return{success:!0,tasks_by_date:a.data.tasks_by_date,total_tasks:a.data.total_tasks}}catch(r){return console.error("Error fetching archived tasks:",r),{success:!1,message:r.response?.data?.message||r.response?.data?.error||"   ",tasks_by_date:{},total_tasks:0}}}async archiveTask(t){try{const r=await fe.post(`/admin/api/tasks/${t}/archive`);return{success:r.data.success,message:r.data.success?"  ":r.data.error}}catch(r){return console.error("Error archiving task:",r),{success:!1,message:r.response?.data?.message||r.response?.data?.error||"  "}}}async restoreTask(t){try{const r=await fe.put(`/admin/api/tasks/${t}`,{task_metadata:{archived:!1}});return{success:r.data.success,message:r.data.success?"  ":r.data.error}}catch(r){return console.error("Error restoring task:",r),{success:!1,message:r.response?.data?.message||r.response?.data?.error||"  "}}}async getEmployees(){try{return{success:!0,employees:((await fe.get("/admin/api/users/executors")).data.executors||[]).filter(a=>["executor","owner"].includes(a.role)&&a.is_active)}}catch(t){return console.error("Error fetching employees:",t),{success:!1,message:t.response?.data?.message||"  ",employees:[]}}}}const By=new iG,lG=()=>{const{currentTheme:s}=hp(),[t,r]=w.useState({}),[a,n]=w.useState(0),[i,o]=w.useState(!0),[c,u]=w.useState({}),[h,m]=w.useState([]),[f,p]=w.useState([]),j=w.useCallback((C,A="info")=>{const Z=Date.now();p(I=>[...I,{id:Z,message:C,type:A}]),setTimeout(()=>{p(I=>I.filter(V=>V.id!==Z))},3e3)},[]),g=w.useCallback(async()=>{try{o(!0);const C=await By.getArchivedTasks(c);C.success?(r(C.tasks_by_date),n(C.total_tasks)):j(C.message||"   ","error")}catch(C){console.error("Error loading archived tasks:",C),j("   ","error")}finally{o(!1)}},[c,j]),v=w.useCallback(async()=>{try{const C=await By.getEmployees();C.success&&m(C.employees)}catch(C){console.error("Error loading employees:",C)}},[]);w.useEffect(()=>{g()},[g]),w.useEffect(()=>{v()},[v]);const y=async C=>{if(confirm(" ,       ?"))try{const A=await By.restoreTask(C);A.success?(j("  ","success"),await g()):j(A.message||"  ","error")}catch(A){console.error("Error restoring task:",A),j("  ","error")}},N=()=>{g()},S=()=>{u({})},k=C=>{const A=new Date(C),Z=new Date,I=new Date(Z);return I.setDate(I.getDate()-1),A.toDateString()===Z.toDateString()?"":A.toDateString()===I.toDateString()?"":A.toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})},_=C=>{switch(C){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"normal":return"bg-blue-100 text-blue-800";case"low":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},T=C=>{switch(C){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},E=C=>({urgent:"",high:"",normal:"",low:""})[C]||C,z=C=>({completed:"",in_progress:" ",pending:""})[C]||C,M=Object.keys(t||{}).sort((C,A)=>new Date(A).getTime()-new Date(C).getTime());return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:`${s.card} ${s.border} border rounded-lg p-6`,children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${s.text}`,children:" "}),e.jsxs("p",{className:"text-gray-500 mt-1",children:["  : ",a," "]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${s.text} mb-2`,children:""}),e.jsxs("select",{value:c.employee_id||"",onChange:C=>u({...c,employee_id:C.target.value?parseInt(C.target.value):void 0}),className:`w-full px-3 py-2 border ${s.border} rounded-lg ${s.input} ${s.text}`,children:[e.jsx("option",{value:"",children:" "}),h.map(C=>e.jsxs("option",{value:C.id,children:[C.first_name," ",C.last_name]},C.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${s.text} mb-2`,children:" "}),e.jsx("input",{type:"date",value:c.date_from||"",onChange:C=>u({...c,date_from:C.target.value}),className:`w-full px-3 py-2 border ${s.border} rounded-lg ${s.input} ${s.text}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${s.text} mb-2`,children:" "}),e.jsx("input",{type:"date",value:c.date_to||"",onChange:C=>u({...c,date_to:C.target.value}),className:`w-full px-3 py-2 border ${s.border} rounded-lg ${s.input} ${s.text}`})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("button",{onClick:N,className:`px-4 py-2 rounded-lg ${s.primary} text-white hover:opacity-90`,children:""}),e.jsx("button",{onClick:S,className:`px-4 py-2 rounded-lg border ${s.border} ${s.text} hover:bg-gray-50`,children:""})]})]})]}),i?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:`inline-block animate-spin rounded-full h-12 w-12 border-b-2 ${s.primary}`}),e.jsx("p",{className:`mt-4 ${s.text}`,children:"  ..."})]}):M.length===0?e.jsxs("div",{className:`${s.card} ${s.border} border rounded-lg p-12 text-center`,children:[e.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),e.jsx("h3",{className:`text-xl font-semibold ${s.text} mb-2`,children:" "}),e.jsx("p",{className:"text-gray-500",children:"      "})]}):e.jsx("div",{className:"space-y-6",children:M.map(C=>{const A=t[C]||{},Z=Object.values(A).reduce((I,V)=>I+V.tasks.length,0);return e.jsxs("div",{className:`${s.card} ${s.border} border rounded-lg p-6`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 pb-4 border-b",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:""}),e.jsxs("div",{children:[e.jsx("h2",{className:`text-xl font-bold ${s.text}`,children:k(C)}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(C).toLocaleDateString("ru-RU",{weekday:"long"})})]})]}),e.jsxs("div",{className:`px-4 py-2 rounded-full ${s.primary} text-white font-semibold`,children:[Z," ",Z===1?"":""]})]}),e.jsx("div",{className:"space-y-6",children:Object.entries(A).map(([I,V])=>{const R=V.employee,q=V.tasks;return e.jsxs("div",{className:"space-y-4",children:[R&&e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg ${s.hover}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full ${s.primary} text-white flex items-center justify-center font-semibold`,children:R.first_name?.[0]||R.username[0].toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:`font-semibold ${s.text}`,children:[R.first_name," ",R.last_name]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["@",R.username]})]}),e.jsxs("div",{className:`px-3 py-1 rounded-full ${s.primary} text-white text-sm`,children:[q.length," ",q.length===1?"":""]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:q.map(J=>e.jsxs("div",{className:`${s.card} border-l-4 border-green-500 p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow`,children:[e.jsx("h3",{className:`font-semibold ${s.text} mb-2`,children:J.title}),J.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:J.description}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs ${T(J.status)}`,children:z(J.status)}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${_(J.priority)}`,children:E(J.priority)})]}),J.completed_at&&e.jsxs("div",{className:"text-xs text-gray-500 mb-3",children:[": ",new Date(J.completed_at).toLocaleString("ru-RU")]}),e.jsx("button",{onClick:()=>y(J.id),className:"w-full px-3 py-2 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",children:""})]},J.id))})]},I)})})]},C)})}),e.jsx("div",{className:"fixed bottom-4 right-4 space-y-2 z-50",children:f.map(C=>e.jsx("div",{className:`px-6 py-3 rounded-lg shadow-lg text-white ${C.type==="success"?"bg-green-600":C.type==="error"?"bg-red-600":"bg-blue-600"}`,children:C.message},C.id))})]})};class oG{async getUserTasks(t){try{const r=new URLSearchParams;t&&r.append("assigned_to_id",t.toString()),r.append("per_page","1000");const a=await fe.get(`/admin/api/tasks/?${r.toString()}`),n={pending:[],in_progress:[],completed:[]},i=a.data.tasks||[];return i.forEach(o=>{o.status==="pending"?n.pending.push(o):o.status==="in_progress"?n.in_progress.push(o):o.status==="completed"&&n.completed.push(o)}),{success:!0,tasksByStatus:n,total:i.length}}catch(r){return console.error("Error fetching user tasks:",r),{success:!1,message:r.response?.data?.message||"  ",tasksByStatus:{pending:[],in_progress:[],completed:[]},total:0}}}async updateTaskStatus(t,r){try{const a=await fe.put(`/admin/api/tasks/${t}`,{status:r});return{success:a.data.success,message:a.data.success?"  ":a.data.error}}catch(a){return console.error("Error updating task status:",a),{success:!1,message:a.response?.data?.message||a.response?.data?.error||"  "}}}async getExecutors(){try{return{success:!0,executors:((await fe.get("/admin/api/users/executors")).data.executors||[]).filter(a=>["executor","owner"].includes(a.role)&&a.is_active)}}catch(t){return console.error("Error fetching executors:",t),{success:!1,message:t.response?.data?.message||"  ",executors:[]}}}async createTask(t){try{return{success:!0,message:"  ",task:(await fe.post("/admin/api/tasks",t)).data}}catch(r){return console.error("Error creating task:",r),{success:!1,message:r.response?.data?.message||"  "}}}async getTask(t){try{return{success:!0,task:(await fe.get(`/admin/api/tasks/${t}`)).data}}catch(r){return console.error("Error fetching task:",r),{success:!1,message:r.response?.data?.message||"  ",task:null}}}async deleteTask(t){try{const r=await fe.delete(`/admin/api/tasks/${t}`);return{success:!0,message:" "}}catch(r){return console.error("Error deleting task:",r),{success:!1,message:r.response?.data?.detail||r.response?.data?.message||"  "}}}}const Ic=new oG,cG=()=>{const{currentTheme:s}=hp(),[t,r]=w.useState({pending:[],in_progress:[],completed:[]}),[a,n]=w.useState(!0),[i,o]=w.useState([]),[c,u]=w.useState(void 0),[h,m]=w.useState([]),[f,p]=w.useState(null),[j,g]=w.useState(null),[v,y]=w.useState(!1),[N,S]=w.useState(!1),[k,_]=w.useState(null),[T,E]=w.useState({title:"",description:"",priority:"normal",deadline:"",assigned_to_id:""}),z=w.useRef(null);w.useRef({});const M=w.useCallback(()=>{const H=z.current;if(!H)return;const re=H.getContext("2d");if(!re)return;H.width=window.innerWidth,H.height=window.innerHeight;const he=[],G=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"];for(let X=0;X<150;X++)he.push({x:Math.random()*H.width,y:-10,w:Math.random()*10+5,h:Math.random()*5+3,color:G[Math.floor(Math.random()*G.length)],speed:Math.random()*3+2,rotation:Math.random()*360,rotationSpeed:Math.random()*10-5});function ce(){re.clearRect(0,0,H.width,H.height),he.forEach((X,O)=>{X.y+=X.speed,X.rotation+=X.rotationSpeed,re.save(),re.translate(X.x+X.w/2,X.y+X.h/2),re.rotate(X.rotation*Math.PI/180),re.fillStyle=X.color,re.fillRect(-X.w/2,-X.h/2,X.w,X.h),re.restore(),X.y>H.height&&he.splice(O,1)}),he.length>0?requestAnimationFrame(ce):re.clearRect(0,0,H.width,H.height)}ce()},[]),C=w.useCallback(()=>{const H=["  !","  !"," !  !"," !    !"," !"," !  !"],re=H[Math.floor(Math.random()*H.length)];A(re,"success")},[]),A=w.useCallback((H,re="info")=>{const he=Date.now();m(G=>[...G,{id:he,message:H,type:re}]),setTimeout(()=>{m(G=>G.filter(ce=>ce.id!==he))},3e3)},[]),Z=w.useCallback(async()=>{try{n(!0);const H=await Ic.getUserTasks(c);H.success?r(H.tasksByStatus):A(H.message||"  ","error")}catch(H){console.error("Error loading tasks:",H),A("  ","error")}finally{n(!1)}},[c,A]),I=w.useCallback(async()=>{const H=await Ic.getExecutors();H.success&&o(H.executors)},[]);w.useEffect(()=>{Z()},[Z]),w.useEffect(()=>{I()},[I]),w.useEffect(()=>{const H=setInterval(()=>{Z()},3e4);return()=>clearInterval(H)},[Z]);const V=(H,re)=>{p(re),H.dataTransfer.effectAllowed="move"},R=()=>{p(null),g(null)},q=(H,re)=>{H.preventDefault(),H.stopPropagation(),g(re)},J=H=>{H.preventDefault(),H.stopPropagation();const re=H.currentTarget.getBoundingClientRect();(H.clientX<re.left||H.clientX>=re.right||H.clientY<re.top||H.clientY>=re.bottom)&&g(null)},se=H=>{H.preventDefault(),H.dataTransfer.dropEffect="move"},Y=async H=>{if(!f)return;g(null);const re=f.status;if(re===H){p(null);return}const he={...t};he[re]=he[re].filter(ce=>ce.id!==f.id),he[H]=[{...f,status:H},...he[H]],r(he),H==="completed"&&(M(),C());const G=await Ic.updateTaskStatus(f.id,H);G.success?A(`   "${le(H)}"`,"success"):(A(G.message||"  ","error"),await Z()),p(null)},ee=async H=>{if(H.preventDefault(),!T.title){A("  ","error");return}const re={title:T.title,description:T.description||void 0,priority:T.priority,deadline:T.deadline||void 0,assigned_to_id:T.assigned_to_id?parseInt(T.assigned_to_id):null,created_by_admin:!0},he=await Ic.createTask(re);he.success?(A("  ","success"),y(!1),E({title:"",description:"",priority:"normal",deadline:"",assigned_to_id:""}),await Z()):A(he.message||"  ","error")},te=async H=>{const re=await Ic.getTask(H);re.success&&re.task?(_(re.task),S(!0)):A(re.message||"  ","error")},K=async(H,re)=>{if(!confirm(" ,     ?"))return;const he=await Ic.deleteTask(H);he.success?(A(" ","success"),await Z()):A(he.message||"  ","error")},$=H=>{const re=new Date,G=new Date(H).getTime()-re.getTime();if(G<=0)return{text:"",colorClass:"bg-red-100 text-red-800 animate-pulse",isOverdue:!0};const ce=Math.floor(G/(1e3*60*60*24)),X=Math.floor(G%(1e3*60*60*24)/(1e3*60*60)),O=Math.floor(G%(1e3*60*60)/(1e3*60)),L=Math.floor(G%(1e3*60)/1e3);let B="";ce>0?B=`${ce} ${X}`:X>0?B=`${X} ${O}`:B=`${O} ${L}`;let ne="bg-green-100 text-green-800";return G<1e3*60*60?ne="bg-red-100 text-red-800":G<1e3*60*60*6?ne="bg-orange-100 text-orange-800":G<1e3*60*60*24&&(ne="bg-yellow-100 text-yellow-800"),{text:B,colorClass:ne,isOverdue:!1}},le=H=>({pending:"",in_progress:" ",completed:""})[H]||H,ie=H=>{switch(H){case"urgent":return"border-l-4 border-red-500 bg-gradient-to-r from-red-50 to-white";case"high":return"border-l-4 border-orange-500 bg-gradient-to-r from-orange-50 to-white";case"normal":return"border-l-4 border-blue-500 bg-gradient-to-r from-blue-50 to-white";case"low":return"border-l-4 border-gray-500 bg-gradient-to-r from-gray-50 to-white";default:return"border-l-4 border-gray-300 bg-white"}},oe=H=>({urgent:"",high:"",normal:"",low:""})[H]||H,de=H=>{switch(H){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"normal":return"bg-blue-100 text-blue-800";case"low":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},U=H=>{switch(H){case"pending":return"from-yellow-500 to-orange-500";case"in_progress":return"from-blue-500 to-cyan-500";case"completed":return"from-green-500 to-emerald-500";default:return"from-gray-500 to-slate-500"}},F=t.pending.length+t.in_progress.length+t.completed.length,Q=({task:H})=>{const[re,he]=w.useState(H.deadline?$(H.deadline):null);return w.useEffect(()=>{if(!H.deadline)return;const G=setInterval(()=>{he($(H.deadline))},1e3);return()=>clearInterval(G)},[H.deadline]),e.jsxs("div",{draggable:!0,onDragStart:G=>V(G,H),onDragEnd:R,className:`${ie(H.priority)} rounded-lg p-4 mb-3 cursor-grab active:cursor-grabbing hover:shadow-md transition-all relative ${f?.id===H.id?"opacity-50 scale-95":""}`,children:[e.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>te(H.id),className:"bg-white border border-gray-300 rounded p-1 hover:bg-gray-100",title:"",children:e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),e.jsx("button",{onClick:()=>K(H.id),className:"bg-white border border-gray-300 rounded p-1 hover:bg-red-100 text-red-600",title:"",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),e.jsxs("h3",{className:`font-semibold ${s.text} mb-2 pr-16`,children:[H.priority==="urgent"&&e.jsx("span",{className:"text-red-600 mr-1",children:""}),H.title]}),H.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:H.description}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${de(H.priority)}`,children:oe(H.priority)}),H.created_by_admin&&e.jsx("span",{className:"px-2 py-1 rounded text-xs font-semibold bg-gradient-to-r from-yellow-400 to-orange-400 text-white",children:" "}),H.project_name&&e.jsx("span",{className:"px-2 py-1 rounded text-xs bg-purple-100 text-purple-800",children:H.project_name})]}),re&&e.jsxs("div",{className:`px-2 py-1 rounded text-xs font-semibold mb-2 inline-flex items-center gap-1 ${re.colorClass}`,children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),re.text]}),e.jsxs("div",{className:"text-xs text-gray-500 flex justify-between items-center",children:[e.jsxs("span",{children:[e.jsx("svg",{className:"w-3 h-3 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),H.assigned_to_name||" "]}),e.jsx("span",{children:new Date(H.created_at).toLocaleDateString()})]})]})},W=({status:H,tasks:re})=>e.jsxs("div",{className:`flex-1 min-w-[350px] ${s.card} rounded-2xl overflow-hidden shadow-lg`,children:[e.jsx("div",{className:`bg-gradient-to-r ${U(H)} p-5 text-white`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2",children:[H==="pending"&&e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),H==="in_progress"&&e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),H==="completed"&&e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),le(H)]}),e.jsx("span",{className:"bg-white/30 px-3 py-1 rounded-full text-sm font-semibold",children:re.length})]})}),e.jsx("div",{className:`p-4 min-h-[400px] transition-all ${j===H?"bg-blue-50 ring-2 ring-blue-400 ring-inset":""}`,onDragEnter:he=>q(he,H),onDragLeave:J,onDragOver:se,onDrop:()=>Y(H),children:re.length===0?e.jsxs("div",{className:"text-center text-gray-400 py-12",children:[e.jsxs("div",{className:"text-6xl mb-4",children:[H==="pending"&&"",H==="in_progress"&&"",H==="completed"&&""]}),e.jsx("p",{children:" "})]}):re.map(he=>e.jsx(Q,{task:he},he.id))})]});return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("canvas",{ref:z,className:"fixed top-0 left-0 w-full h-full pointer-events-none z-50"}),e.jsxs("div",{className:`${s.card} ${s.border} border rounded-lg p-6`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:`text-3xl font-bold ${s.text}`,children:[" ",i.length>0&&c&&e.jsxs("select",{value:c||"my",onChange:H=>u(H.target.value==="my"?void 0:parseInt(H.target.value)),className:`ml-4 px-4 py-2 border ${s.border} rounded-lg ${s.input} ${s.text} text-base`,children:[e.jsx("option",{value:"my",children:" "}),i.map(H=>e.jsxs("option",{value:H.id,children:[H.first_name," ",H.last_name," (@",H.username,")"]},H.id))]})]}),e.jsx("p",{className:"text-gray-500 mt-1",children:"-   "})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>y(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})," "]}),e.jsxs("button",{onClick:Z,className:`px-4 py-2 ${s.primary} text-white rounded-lg hover:opacity-80 transition-opacity flex items-center gap-2`,children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),""]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:`text-3xl font-bold ${s.text}`,children:F}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:" "})]}),e.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[e.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:t.pending.length}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:""})]}),e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:t.in_progress.length}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:" "})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:t.completed.length}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:""})]})]})]}),a?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:`inline-block animate-spin rounded-full h-12 w-12 border-b-2 ${s.primary}`}),e.jsx("p",{className:`mt-4 ${s.text}`,children:" ..."})]}):e.jsxs("div",{className:"flex gap-6 overflow-x-auto pb-4",children:[e.jsx(W,{status:"pending",tasks:t.pending}),e.jsx(W,{status:"in_progress",tasks:t.in_progress}),e.jsx(W,{status:"completed",tasks:t.completed})]}),v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${s.card} rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto`,children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:`text-2xl font-bold ${s.text}`,children:"  "})}),e.jsxs("form",{onSubmit:ee,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${s.text} mb-2`,children:"  *"}),e.jsx("input",{type:"text",required:!0,value:T.title,onChange:H=>E({...T,title:H.target.value}),className:`w-full px-4 py-2 border ${s.border} rounded-lg ${s.input} ${s.text}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${s.text} mb-2`,children:""}),e.jsx("textarea",{rows:3,value:T.description,onChange:H=>E({...T,description:H.target.value}),className:`w-full px-4 py-2 border ${s.border} rounded-lg ${s.input} ${s.text}`})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${s.text} mb-2`,children:""}),e.jsxs("select",{value:T.priority,onChange:H=>E({...T,priority:H.target.value}),className:`w-full px-4 py-2 border ${s.border} rounded-lg ${s.input} ${s.text}`,children:[e.jsx("option",{value:"low",children:""}),e.jsx("option",{value:"normal",children:""}),e.jsx("option",{value:"high",children:""}),e.jsx("option",{value:"urgent",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${s.text} mb-2`,children:""}),e.jsx("input",{type:"datetime-local",value:T.deadline,onChange:H=>E({...T,deadline:H.target.value}),className:`w-full px-4 py-2 border ${s.border} rounded-lg ${s.input} ${s.text}`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${s.text} mb-2`,children:" "}),e.jsxs("select",{value:T.assigned_to_id,onChange:H=>E({...T,assigned_to_id:H.target.value}),className:`w-full px-4 py-2 border ${s.border} rounded-lg ${s.input} ${s.text}`,children:[e.jsx("option",{value:"",children:" "}),i.map(H=>e.jsxs("option",{value:H.id,children:[H.first_name," ",H.last_name," (@",H.username,")"]},H.id))]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{y(!1),E({title:"",description:"",priority:"normal",deadline:"",assigned_to_id:""})},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-100",children:""}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:""})]})]})]})}),N&&k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${s.card} rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto`,children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:`text-2xl font-bold ${s.text}`,children:k.title})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("strong",{className:s.text,children:":"}),e.jsx("p",{className:"text-gray-600 mt-1",children:k.description||" "})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("strong",{className:s.text,children:":"}),e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${k.status==="completed"?"bg-green-100 text-green-800":k.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:le(k.status)})})]}),e.jsxs("div",{children:[e.jsx("strong",{className:s.text,children:":"}),e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${de(k.priority)}`,children:oe(k.priority)})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("strong",{className:s.text,children:":"}),e.jsx("p",{className:"text-gray-600 mt-1",children:k.assigned_to_name||" "})]}),e.jsxs("div",{children:[e.jsx("strong",{className:s.text,children:":"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:[k.created_by_name,k.created_by_admin&&e.jsx("span",{className:"ml-2 px-2 py-1 bg-yellow-100 text-yellow-800 rounded text-xs",children:""})]})]})]}),k.deadline&&e.jsxs("div",{children:[e.jsx("strong",{className:s.text,children:":"}),e.jsx("p",{className:"text-gray-600 mt-1",children:new Date(k.deadline).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("strong",{className:s.text,children:":"}),e.jsx("p",{className:"text-gray-600 mt-1",children:new Date(k.created_at).toLocaleString()})]})]}),e.jsx("div",{className:"p-6 border-t border-gray-200 flex justify-end",children:e.jsx("button",{onClick:()=>{S(!1),_(null)},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-100",children:""})})]})}),e.jsx("div",{className:"fixed bottom-4 right-4 space-y-2 z-50",children:h.map(H=>e.jsx("div",{className:`px-6 py-3 rounded-lg shadow-lg text-white ${H.type==="success"?"bg-green-600":H.type==="error"?"bg-red-600":"bg-blue-600"}`,children:H.message},H.id))})]})},Yh={getChats:async()=>(await fe.get("/admin/api/chats")).data,getChatMessages:async s=>(await fe.get(`/admin/api/chats/${s}/messages`)).data,sendMessage:async(s,t)=>(await fe.post(`/admin/api/chats/${s}/messages`,t,{headers:{"Content-Type":"multipart/form-data"}})).data,togglePinChat:async s=>(await fe.post(`/admin/api/chats/${s}/pin`)).data,toggleHideChat:async s=>(await fe.post(`/admin/api/chats/${s}/hide`)).data},dG=()=>{const s=Wa(),[t,r]=w.useState([]),[a,n]=w.useState(!0),[i,o]=w.useState([]),c=w.useCallback((y,N="info")=>{const S=Date.now().toString();o(k=>[...k,{id:S,message:y,type:N}]),setTimeout(()=>{o(k=>k.filter(_=>_.id!==S))},4e3)},[]),u=w.useCallback(async()=>{try{const y=await Yh.getChats();r(y)}catch(y){console.error("Error loading chats:",y),c("  ","error")}finally{n(!1)}},[c]);w.useEffect(()=>{u();const y=setInterval(u,1e4);return()=>clearInterval(y)},[u]);const h=async(y,N)=>{N.stopPropagation();try{const S=await Yh.togglePinChat(y);c(S.message,"success"),await u()}catch(S){console.error("Error pinning chat:",S),S.response?.status===403?c("      ","error"):c("  ","error")}},m=async(y,N)=>{N.stopPropagation();try{const S=await Yh.toggleHideChat(y);c(S.message,"success"),await u()}catch(S){console.error("Error hiding chat:",S),S.response?.status===403?c("      ","error"):c("  ","error")}},f=y=>{if(!y)return"";const N=new Date(y),k=new Date().getTime()-N.getTime(),_=Math.floor(k/6e4);if(_<1)return" ";if(_<60)return`${_}  `;const T=Math.floor(_/60);if(T<24)return`${T}  `;const E=Math.floor(T/24);return E<7?`${E}  `:N.toLocaleDateString("ru-RU")},p=y=>{switch(y){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},j=y=>({completed:"",in_progress:" ",pending:"",cancelled:""})[y]||y,v=[...t].sort((y,N)=>{if(y.is_pinned_by_owner!==N.is_pinned_by_owner)return y.is_pinned_by_owner?-1:1;const S=y.last_message_at?new Date(y.last_message_at).getTime():0;return(N.last_message_at?new Date(N.last_message_at).getTime():0)-S}).filter(y=>!y.is_hidden_by_owner);return a?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx(Dt,{className:"w-8 h-8 animate-spin text-blue-600"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:" "}),e.jsx("p",{className:"text-gray-600 mt-2",children:"     "})]}),e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:i.map(y=>e.jsx("div",{className:`px-6 py-3 rounded-lg shadow-lg text-white ${y.type==="success"?"bg-green-500":y.type==="error"?"bg-red-500":"bg-blue-500"} animate-slide-in`,children:y.message},y.id))}),v.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ha,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"  "}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:" ,    "})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(y=>e.jsxs("div",{onClick:()=>s(`/chats/${y.id}`),className:`bg-white rounded-xl shadow-md hover:shadow-xl transition-all duration-300 cursor-pointer transform hover:-translate-y-1 relative ${y.unread_by_executor>0?"ring-2 ring-blue-500":""}`,children:[e.jsxs("div",{className:"absolute top-3 right-3 flex gap-2",children:[y.is_pinned_by_owner&&e.jsx("button",{onClick:N=>h(y.id,N),className:"p-2 rounded-full bg-blue-100 text-blue-600 hover:bg-blue-200 transition-colors",title:" ",children:e.jsx($4,{className:"w-4 h-4 fill-current"})}),!y.is_pinned_by_owner&&e.jsx("button",{onClick:N=>h(y.id,N),className:"p-2 rounded-full bg-gray-100 text-gray-400 hover:bg-gray-200 transition-colors",title:" ",children:e.jsx($4,{className:"w-4 h-4"})}),e.jsx("button",{onClick:N=>m(y.id,N),className:"p-2 rounded-full bg-gray-100 text-gray-400 hover:bg-gray-200 transition-colors",title:" ",children:e.jsx($o,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4 pr-16",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800 mb-1",children:y.project.title}),e.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${p(y.project.status)}`,children:j(y.project.status)})]}),y.unread_by_executor>0&&e.jsx("span",{className:"bg-blue-500 text-white text-xs font-bold rounded-full w-6 h-6 flex items-center justify-center",children:y.unread_by_executor})]}),y.project.client_name&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm mb-3",children:[e.jsx(st,{className:"w-4 h-4"}),e.jsx("span",{children:y.project.client_name})]}),y.last_message?e.jsxs("div",{className:"mb-3",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[e.jsxs("span",{className:"font-semibold",children:[y.last_message.sender_type==="client"?"":"",":"]})," ",y.last_message.message_text||e.jsxs("span",{className:"italic flex items-center gap-1",children:[e.jsx(rd,{className:"w-3 h-3"}),""]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-gray-400 text-xs",children:[e.jsx(Ue,{className:"w-3 h-3"}),e.jsx("span",{children:f(y.last_message_at)})]})]}):e.jsx("p",{className:"text-sm text-gray-400 italic mb-3",children:" "}),e.jsxs("button",{className:`w-full py-2 px-4 rounded-lg font-medium transition-all flex items-center justify-center gap-2 ${y.unread_by_executor>0?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white hover:from-blue-700 hover:to-indigo-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(Ha,{className:"w-4 h-4"})," "]})]})]},y.id))})]})},uG=()=>{const{chatId:s}=yT(),t=Wa(),r=w.useRef(null),a=w.useRef(null),[n,i]=w.useState([]),[o,c]=w.useState(!0),[u,h]=w.useState(!1),[m,f]=w.useState(""),[p,j]=w.useState([]),[g,v]=w.useState([]),y=w.useCallback((z,M="info")=>{const C=Date.now().toString();v(A=>[...A,{id:C,message:z,type:M}]),setTimeout(()=>{v(A=>A.filter(Z=>Z.id!==C))},4e3)},[]),N=w.useCallback(async()=>{if(s)try{const z=await Yh.getChatMessages(parseInt(s)),M=r.current&&r.current.getBoundingClientRect().bottom<=window.innerHeight+100;i(z.messages),(M||o)&&setTimeout(()=>{r.current?.scrollIntoView({behavior:"smooth"})},100)}catch(z){console.error("Error loading messages:",z),y("  ","error")}finally{c(!1)}},[s,o,y]);w.useEffect(()=>{N();const z=setInterval(N,3e3);return()=>clearInterval(z)},[N]);const S=z=>{z.target.files&&j(Array.from(z.target.files))},k=z=>{j(M=>M.filter((C,A)=>A!==z))},_=async z=>{if(z.preventDefault(),!s||!m.trim()&&p.length===0){y("    ","error");return}try{h(!0);const M=new FormData;m.trim()&&M.append("message_text",m.trim()),p.forEach(C=>{M.append("attachments",C)}),await Yh.sendMessage(parseInt(s),M),f(""),j([]),a.current&&(a.current.value=""),y(" ","success"),await N()}catch(M){console.error("Error sending message:",M),y("  ","error")}finally{h(!1)}},T=z=>new Date(z).toLocaleString("ru-RU",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}),E=z=>z<1024?z+" B":z<1024*1024?(z/1024).toFixed(1)+" KB":(z/(1024*1024)).toFixed(1)+" MB";return o?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx(Dt,{className:"w-8 h-8 animate-spin text-blue-600"})}):e.jsxs("div",{className:"flex flex-col h-screen bg-gray-50",children:[e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:g.map(z=>e.jsx("div",{className:`px-6 py-3 rounded-lg shadow-lg text-white ${z.type==="success"?"bg-green-500":z.type==="error"?"bg-red-500":"bg-blue-500"} animate-slide-in`,children:z.message},z.id))}),e.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>t("/chats"),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx(rE,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800",children:" "}),e.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",s]})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-4",children:n.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[e.jsx("div",{className:"bg-white rounded-full p-6 mb-4 shadow-md",children:e.jsx(st,{className:"w-12 h-12 text-gray-400"})}),e.jsx("p",{className:"text-gray-500 text-lg font-medium",children:" "}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"   !"})]}):e.jsxs(e.Fragment,{children:[n.map(z=>e.jsx("div",{className:`flex ${z.sender_type==="executor"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[70%] rounded-2xl px-4 py-3 ${z.sender_type==="executor"?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white":"bg-white shadow-md text-gray-800"}`,children:[e.jsx("div",{className:"text-xs font-semibold mb-1 opacity-80",children:z.sender_type==="client"?"":""}),z.message_text&&e.jsx("div",{className:"whitespace-pre-wrap break-words mb-1",children:z.message_text}),z.attachments&&z.attachments.length>0&&e.jsx("div",{className:"mt-2 space-y-1",children:z.attachments.map((M,C)=>e.jsxs("a",{href:M.url,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-2 p-2 rounded-lg ${z.sender_type==="executor"?"bg-white/20 hover:bg-white/30":"bg-gray-100 hover:bg-gray-200"} transition-colors`,children:[e.jsx(rd,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm truncate flex-1",children:M.filename}),e.jsx("span",{className:"text-xs opacity-75",children:E(M.size)})]},C))}),e.jsx("div",{className:`text-xs mt-2 ${z.sender_type==="executor"?"text-white/70":"text-gray-500"}`,children:T(z.created_at)})]})},z.id)),e.jsx("div",{ref:r})]})}),e.jsx("div",{className:"bg-white border-t border-gray-200 px-6 py-4",children:e.jsxs("form",{onSubmit:_,className:"space-y-3",children:[p.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:p.map((z,M)=>e.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 text-blue-700 px-3 py-2 rounded-lg text-sm",children:[e.jsx(rd,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate max-w-[200px]",children:z.name}),e.jsx("button",{type:"button",onClick:()=>k(M),className:"hover:bg-blue-200 rounded p-1 transition-colors",children:e.jsx(Ae,{className:"w-3 h-3"})})]},M))}),e.jsxs("div",{className:"flex items-end gap-3",children:[e.jsx("input",{ref:a,type:"file",multiple:!0,onChange:S,className:"hidden",id:"file-input"}),e.jsx("label",{htmlFor:"file-input",className:"p-3 bg-gray-100 hover:bg-gray-200 rounded-lg cursor-pointer transition-colors",title:" ",children:e.jsx(rd,{className:"w-5 h-5 text-gray-600"})}),e.jsx("textarea",{value:m,onChange:z=>f(z.target.value),onKeyDown:z=>{z.key==="Enter"&&!z.shiftKey&&(z.preventDefault(),_(z))},placeholder:" ... (Enter - , Shift+Enter -  )",className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none resize-none",rows:3}),e.jsx("button",{type:"submit",disabled:u||!m.trim()&&p.length===0,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:u?e.jsx(Dt,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(Qs,{className:"w-5 h-5"}),""]})})]})]})})]})},Pa={getChats:async(s=!1,t=50,r=0)=>(await fe.get("/admin/avito/chats",{params:{unread_only:s,limit:t,offset:r}})).data,getChatInfo:async s=>(await fe.get(`/admin/avito/chats/${s}`)).data,getChatMessages:async(s,t=100,r=0)=>(await fe.get(`/admin/avito/chats/${s}/messages`,{params:{limit:t,offset:r}})).data,sendMessage:async(s,t)=>(await fe.post(`/admin/avito/chats/${s}/messages`,{text:t})).data,deleteMessage:async(s,t)=>(await fe.post(`/admin/avito/chats/${s}/messages/${t}/delete`)).data,uploadImage:async(s,t)=>{const r=new FormData;return r.append("file",t),(await fe.post(`/admin/avito/chats/${s}/images`,r,{headers:{"Content-Type":"multipart/form-data"}})).data},markChatAsRead:async s=>(await fe.post(`/admin/avito/chats/${s}/read`)).data,generateAiResponse:async s=>(await fe.post(`/admin/avito/chats/${s}/ai-suggest`)).data,createLead:async s=>(await fe.post(`/admin/avito/chats/${s}/create-lead`)).data,getAiSalesSuggestions:async(s,t,r)=>(await fe.post(`/admin/avito/chats/${s}/ai-sales`,{industry:t,action_type:r})).data,getIndustries:async(s="")=>(await fe.get("/admin/avito/ai-sales/industries",{params:{partial:s}})).data,configure:async s=>(await fe.post("/admin/avito/configure",{user_id:s})).data,setupWebhook:async()=>(await fe.post("/admin/avito/setup-webhook")).data,updateClientStatus:async(s,t,r)=>(await fe.post(`/admin/avito/chats/${s}/status`,{status:t,notes:r})).data,exportChat:async s=>(await fe.get(`/admin/avito/chats/${s}/export`,{responseType:"blob"})).data,startPolling:async()=>(await fe.post("/admin/avito/polling/start")).data,stopPolling:async()=>(await fe.post("/admin/avito/polling/stop")).data,getPollingStatus:async()=>(await fe.get("/admin/avito/polling/status")).data,toggleAutoResponse:async s=>(await fe.post("/admin/avito/auto-response/toggle",{enabled:s})).data,getDebugStatus:async()=>(await fe.get("/admin/avito/debug")).data},hG=()=>{const[s,t]=w.useState([]),[r,a]=w.useState(null),[n,i]=w.useState([]),[o,c]=w.useState(""),[u,h]=w.useState(""),[m,f]=w.useState(!1),[p,j]=w.useState(!0),[g,v]=w.useState(!1),[y,N]=w.useState(null),[S,k]=w.useState(!1),[_,T]=w.useState(!1),[E,z]=w.useState(""),[M,C]=w.useState(null),[A,Z]=w.useState(!1),[I,V]=w.useState(null),[R,q]=w.useState(!1),[J,se]=w.useState(!1),[Y,ee]=w.useState(!1),[te,K]=w.useState([]),$=w.useCallback((ne,me="info")=>{const xe=Date.now();K(_e=>[..._e,{id:xe,message:ne,type:me}]),setTimeout(()=>{K(_e=>_e.filter(Ce=>Ce.id!==xe))},3e3)},[]),le=w.useCallback(async()=>{try{j(!0);const ne=await Pa.getChats(m);t(ne.chats),N(ne.current_user_id)}catch(ne){console.error("Error loading chats:",ne),$(ne.response?.data?.message||"  ","error")}finally{j(!1)}},[m,$]),ie=w.useCallback(async ne=>{try{v(!0);const me=await Pa.getChatMessages(ne);i(me.messages),await Pa.markChatAsRead(ne),le()}catch(me){console.error("Error loading messages:",me),$("  ","error")}finally{v(!1)}},[le,$]),oe=w.useCallback(async ne=>{if(ne.preventDefault(),!(!r||!o.trim()))try{const me=await Pa.sendMessage(r.id,o.trim());i(xe=>[...xe,me]),c("")}catch(me){console.error("Error sending message:",me),$("  ","error")}},[r,o,$]),de=w.useCallback(async ne=>{if(!(!r||!ne.target.files?.[0]))try{const me=ne.target.files[0],xe=await Pa.uploadImage(r.id,me);i(_e=>[..._e,xe]),$(" ","success")}catch(me){console.error("Error uploading image:",me),$("  ","error")}},[r,$]),U=w.useCallback(ne=>{a(ne),ie(ne.id)},[ie]),F=w.useCallback(async()=>{if(r)try{q(!0),V(null);const ne=await Pa.generateAiResponse(r.id);V(ne.suggestion)}catch(ne){console.error("Error generating AI suggestion:",ne),$("  AI ","error")}},[r,$]),Q=w.useCallback(()=>{I&&(c(I),q(!1))},[I]),W=w.useCallback(async()=>{if(r&&confirm("    ?"))try{const ne=await Pa.createLead(r.id);ne.status==="success"?$(` "${ne.lead_data.name}"  `,"success"):$("  ","info")}catch(ne){console.error("Error creating lead:",ne),$("  ","error")}},[r,$]),H=w.useCallback(async ne=>{if(!r||!E.trim()){$("   ","error");return}try{Z(!0);const me=await Pa.getAiSalesSuggestions(r.id,E,ne);C(me)}catch(me){console.error("Error generating AI sales:",me),$("  AI ","error")}finally{Z(!1)}},[r,E,$]),re=w.useCallback(ne=>{c(ne),T(!1),$("   ","success")},[$]),he=w.useCallback(async()=>{if(r)try{const ne=await Pa.exportChat(r.id),me=window.URL.createObjectURL(ne),xe=document.createElement("a");xe.href=me,xe.download=`avito_chat_${r.id}_${new Date().toISOString().split("T")[0]}.txt`,document.body.appendChild(xe),xe.click(),window.URL.revokeObjectURL(me),document.body.removeChild(xe),$(" ","success")}catch(ne){console.error("Error exporting chat:",ne),$("  ","error")}},[r,$]),G=w.useCallback(async()=>{try{const ne=await Pa.getPollingStatus();se(ne.polling_active),ee(ne.auto_response_enabled)}catch(ne){console.error("Error loading polling status:",ne)}},[]),ce=w.useCallback(async()=>{try{const ne=await Pa.toggleAutoResponse(!Y);ee(ne.enabled),$(ne.message,"success"),G()}catch(ne){console.error("Error toggling auto response:",ne),$("  ","error")}},[Y,$,G]),X=w.useMemo(()=>s.filter(ne=>{const xe=ne.users.find(Te=>Te.id!==y)?.name||"",_e=ne.last_message?.content?.text||"",Ce=u.toLowerCase();return xe.toLowerCase().includes(Ce)||_e.toLowerCase().includes(Ce)}),[s,u,y]),O=w.useMemo(()=>s.reduce((ne,me)=>ne+me.unread_count,0),[s]),L=w.useCallback(ne=>ne.users.find(me=>me.id!==y),[y]),B=w.useCallback(ne=>{const me=new Date(ne*1e3),xe=new Date;return me.toDateString()===xe.toDateString()?me.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}):me.toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit"})},[]);return w.useEffect(()=>{le(),G();const ne=setInterval(le,3e4);return()=>clearInterval(ne)},[le,G]),e.jsxs("div",{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-pink-500 to-rose-600 flex items-center justify-center shadow-lg",children:e.jsx(Es,{className:"w-6 h-6 text-gray-900"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" "}),e.jsx("p",{className:"text-sm text-gray-600",children:"   "})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-white rounded-xl border border-gray-200",children:[e.jsx(kf,{className:"w-5 h-5 text-purple-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"AI "}),e.jsx("button",{onClick:ce,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${Y?"bg-green-500":"bg-gray-600"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${Y?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("button",{onClick:le,className:"px-4 py-2 bg-white hover:bg-gray-50 rounded-xl border border-gray-200 text-gray-900 transition-colors flex items-center gap-2",children:[e.jsx(rs,{className:"w-4 h-4"}),""]}),e.jsxs("button",{onClick:()=>k(!0),className:"px-4 py-2 bg-gradient-to-r from-pink-500 to-rose-600 hover:from-pink-600 hover:to-rose-700 rounded-xl text-gray-900 transition-all flex items-center gap-2",children:[e.jsx(Na,{className:"w-4 h-4"}),""]})]})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[e.jsx("div",{className:"col-span-4 space-y-4",children:e.jsxs("div",{className:"bg-white backdrop-blur-xl rounded-2xl border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-4 space-y-3 border-b border-gray-200",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-600"}),e.jsx("input",{type:"text",placeholder:" ...",value:u,onChange:ne=>h(ne.target.value),className:"w-full pl-10 pr-4 py-2 bg-white border border-gray-200 rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-pink-500"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m,onChange:ne=>f(ne.target.checked),className:"rounded border-gray-300 bg-white"})," "]}),e.jsxs("span",{className:"px-3 py-1 bg-pink-500/20 text-pink-300 rounded-full text-sm font-medium",children:[O," "]})]})]}),e.jsx("div",{className:"max-h-[600px] overflow-y-auto",children:p?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx(Kc,{className:"w-6 h-6 animate-spin text-pink-500"})}):X.length===0?e.jsxs("div",{className:"text-center p-8 text-gray-600",children:[e.jsx(Es,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:" "})]}):X.map(ne=>{const xe=L(ne)?.name||"",_e=ne.last_message?.content?.text||" ",Ce=ne.last_message?B(ne.last_message.created):"";return e.jsx("button",{onClick:()=>U(ne),className:`w-full p-4 border-b border-gray-100 hover:bg-white transition-colors text-left ${r?.id===ne.id?"bg-gray-50":""}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-pink-500 to-rose-600 flex items-center justify-center text-gray-900 font-bold flex-shrink-0",children:xe.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"font-medium text-gray-900 truncate",children:xe}),ne.unread_count>0&&e.jsx("span",{className:"px-2 py-0.5 bg-pink-500 text-gray-900 text-xs rounded-full",children:ne.unread_count})]}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:_e})]}),e.jsx("span",{className:"text-xs text-gray-600",children:Ce})]})},ne.id)})})]})}),e.jsx("div",{className:"col-span-8",children:r?e.jsxs("div",{className:"h-full bg-white backdrop-blur-xl rounded-2xl border border-gray-200 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-pink-500 to-rose-600 flex items-center justify-center text-gray-900 font-bold",children:L(r)?.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:L(r)?.name}),r.context?.value?.title&&e.jsxs("p",{className:"text-sm text-gray-600",children:[r.context.value.title," - ",r.context.value.price," ."]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>T(!0),className:"p-2 hover:bg-white rounded-lg text-purple-400 transition-colors",title:"AI ",children:e.jsx(vn,{className:"w-5 h-5"})}),e.jsx("button",{onClick:W,className:"p-2 hover:bg-white rounded-lg text-green-400 transition-colors",title:" ",children:e.jsx(Ps,{className:"w-5 h-5"})}),e.jsx("button",{onClick:he,className:"p-2 hover:bg-white rounded-lg text-blue-400 transition-colors",title:" ",children:e.jsx(wt,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:g?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(Kc,{className:"w-6 h-6 animate-spin text-pink-500"})}):n.map(ne=>e.jsx("div",{className:`flex ${ne.direction==="out"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[70%] rounded-2xl p-3 ${ne.direction==="out"?"bg-gradient-to-r from-pink-500 to-rose-600 text-gray-900":"bg-gray-50 text-gray-900"}`,children:[ne.type==="text"&&ne.content.text&&e.jsx("p",{className:"text-sm",children:ne.content.text}),ne.type==="image"&&ne.content.image&&e.jsx("img",{src:ne.content.image["640x480"]||ne.content.image["1280x960"],alt:"Attachment",className:"max-w-xs rounded-lg cursor-pointer",onClick:()=>window.open(ne.content.image?.["1280x960"],"_blank")}),e.jsx("p",{className:"text-xs opacity-70 mt-1",children:B(ne.created)})]})},ne.id))}),R&&e.jsxs("div",{className:"p-4 bg-purple-500/10 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[e.jsx(kf,{className:"w-5 h-5 text-purple-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"AI   "}),I?e.jsx("div",{className:"p-3 bg-white rounded-lg border border-gray-200",children:e.jsx("p",{className:"text-sm text-gray-900",children:I})}):e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Kc,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{className:"text-sm",children:" ..."})]})]}),e.jsx("button",{onClick:()=>q(!1),className:"text-gray-600 hover:text-gray-900",children:e.jsx(Ae,{className:"w-4 h-4"})})]}),I&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:Q,className:"px-3 py-1.5 bg-green-500 hover:bg-green-600 text-gray-900 rounded-lg text-sm transition-colors",children:[e.jsx(ss,{className:"w-4 h-4 inline mr-1"}),""]}),e.jsxs("button",{onClick:F,className:"px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-gray-900 rounded-lg text-sm transition-colors",children:[e.jsx(rs,{className:"w-4 h-4 inline mr-1"})," "]})]})]}),e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsxs("form",{onSubmit:oe,className:"flex items-center gap-2",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:de,className:"hidden",id:"image-upload"}),e.jsx("label",{htmlFor:"image-upload",className:"p-2 hover:bg-white rounded-lg text-gray-600 hover:text-gray-900 cursor-pointer transition-colors",children:e.jsx(tm,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",onClick:F,className:"p-2 hover:bg-white rounded-lg text-purple-400 hover:text-purple-300 transition-colors",title:"AI ",children:e.jsx(kf,{className:"w-5 h-5"})}),e.jsx("input",{type:"text",value:o,onChange:ne=>c(ne.target.value),placeholder:" ...",className:"flex-1 px-4 py-2 bg-white border border-gray-200 rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-pink-500"}),e.jsxs("button",{type:"submit",disabled:!o.trim(),className:"px-4 py-2 bg-gradient-to-r from-pink-500 to-rose-600 hover:from-pink-600 hover:to-rose-700 rounded-xl text-gray-900 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(Qs,{className:"w-4 h-4"}),""]})]})})]}):e.jsx("div",{className:"h-full bg-white backdrop-blur-xl rounded-2xl border border-gray-200 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Es,{className:"w-16 h-16 mx-auto mb-4 text-gray-600"}),e.jsx("p",{className:"text-xl text-gray-600",children:"    "})]})})})]}),_&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-[#1a1d2e] rounded-2xl border border-gray-200 max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(vn,{className:"w-6 h-6 text-purple-400"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"AI "})]}),e.jsx("button",{onClick:()=>T(!1),className:"text-gray-600 hover:text-gray-900",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),e.jsx("input",{type:"text",value:E,onChange:ne=>z(ne.target.value),placeholder:", , ...",className:"w-full px-4 py-2 bg-white border border-gray-200 rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:()=>H("startup_offer"),disabled:A,className:"px-4 py-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 rounded-xl text-gray-900 transition-all disabled:opacity-50",children:" "}),e.jsx("button",{onClick:()=>H("suggest_response"),disabled:A,className:"px-4 py-3 bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700 rounded-xl text-gray-900 transition-all disabled:opacity-50",children:" "})]}),A&&e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx(Kc,{className:"w-6 h-6 animate-spin text-purple-500"})}),M&&!A&&e.jsxs("div",{className:"space-y-3",children:[M.offer&&e.jsxs("div",{className:"p-4 bg-white rounded-xl border border-gray-200",children:[e.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:M.offer}),e.jsx("button",{onClick:()=>re(M.offer),className:"mt-3 px-4 py-2 bg-green-500 hover:bg-green-600 rounded-lg text-gray-900 text-sm transition-colors",children:""})]}),M.variants&&e.jsx("div",{className:"space-y-2",children:M.variants.map((ne,me)=>e.jsxs("div",{className:"p-4 bg-white rounded-xl border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:ne.title}),e.jsx("p",{className:"text-gray-900",children:ne.text}),e.jsx("button",{onClick:()=>re(ne.text),className:"mt-2 px-3 py-1.5 bg-green-500 hover:bg-green-600 rounded-lg text-gray-900 text-sm transition-colors",children:""})]},me))})]})]})]})}),e.jsx("div",{className:"fixed bottom-4 right-4 space-y-2 z-50",children:te.map(ne=>e.jsx("div",{className:`px-4 py-3 rounded-xl shadow-lg backdrop-blur-sm border ${ne.type==="success"?"bg-green-500/90 border-green-400":ne.type==="error"?"bg-red-500/90 border-red-400":"bg-blue-500/90 border-blue-400"} text-gray-900`,children:ne.message},ne.id))})]})},$c={getStats:async()=>{const t=(await fe.get("/admin/documents/api/list")).data;if(!t.success)throw new Error(t.message||"Failed to load statistics");const r=t.documents;return{total:r.length,contracts:r.filter(a=>a.type==="contract").length,invoices:r.filter(a=>a.type==="invoice").length,acts:r.filter(a=>a.type==="act").length,other:r.filter(a=>a.type==="other").length}},getDocuments:async s=>{const t=new URLSearchParams;s?.type&&t.append("type",s.type),s?.search&&t.append("search",s.search),s?.project_id&&t.append("project_id",s.project_id.toString());const r=`/admin/documents/api/list${t.toString()?`?${t.toString()}`:""}`,a=await fe.get(r);if(!a.data.success)throw new Error(a.data.message||"Failed to load documents");return a.data.documents},uploadDocument:async s=>{const t=new FormData;return t.append("file",s.file),t.append("name",s.name),t.append("type",s.type),s.description&&t.append("description",s.description),s.number&&t.append("number",s.number),s.project_id&&t.append("project_id",s.project_id.toString()),(await fe.post("/admin/documents/api/upload",t,{headers:{"Content-Type":"multipart/form-data"}})).data},downloadDocument:async s=>(await fe.get(`/admin/documents/api/download/${s}`,{responseType:"blob"})).data,deleteDocument:async s=>(await fe.delete(`/admin/documents/api/${s}`)).data,getProjects:async()=>{const s=await fe.get("/admin/documents/api/projects");if(!s.data.success)throw new Error(s.data.message||"Failed to load projects");return s.data.projects}},mG=()=>{const[s,t]=w.useState([]),[r,a]=w.useState([]),[n,i]=w.useState([]),[o,c]=w.useState({total:0,contracts:0,invoices:0,acts:0,other:0}),[u,h]=w.useState(!0),[m,f]=w.useState(!1),[p,j]=w.useState(""),[g,v]=w.useState(""),[y,N]=w.useState(""),[S,k]=w.useState(!1),[_,T]=w.useState({name:"",type:"invoice",number:"",description:"",project_id:"",file:null}),[E,z]=w.useState([]),M=w.useCallback((Y,ee="info")=>{const te=Date.now().toString();z(K=>[...K,{id:te,message:Y,type:ee}]),setTimeout(()=>{z(K=>K.filter($=>$.id!==te))},4e3)},[]),C=w.useCallback(async()=>{try{const[Y,ee,te]=await Promise.all([$c.getDocuments(),$c.getStats(),$c.getProjects()]);t(Y),a(Y),c(ee),i(te)}catch(Y){console.error("Error loading documents:",Y),M("  ","error")}finally{h(!1)}},[M]);w.useEffect(()=>{C()},[C]),w.useEffect(()=>{let Y=[...s];if(p){const ee=p.toLowerCase();Y=Y.filter(te=>te.name.toLowerCase().includes(ee)||te.number?.toLowerCase().includes(ee)||te.description?.toLowerCase().includes(ee))}g&&(Y=Y.filter(ee=>ee.type===g)),y&&(Y=Y.filter(ee=>ee.project_id?.toString()===y)),a(Y)},[s,p,g,y]);const A=async()=>{if(!_.name||!_.type||!_.file){M("  ","error");return}f(!0);try{const Y=await $c.uploadDocument({file:_.file,name:_.name,type:_.type,description:_.description||void 0,number:_.number||void 0,project_id:_.project_id?parseInt(_.project_id):void 0});Y.success?(M(Y.message,"success"),k(!1),T({name:"",type:"invoice",number:"",description:"",project_id:"",file:null}),await C()):M(Y.message,"error")}catch(Y){console.error("Error uploading document:",Y),Y.response?.status===403?M("      ","error"):M("  ","error")}finally{f(!1)}},Z=async Y=>{try{const ee=await $c.downloadDocument(Y.id),te=window.URL.createObjectURL(ee),K=document.createElement("a");K.href=te;const $=Y.file_path.split(".").pop()||"";K.download=$?`${Y.name}.${$}`:Y.name,document.body.appendChild(K),K.click(),document.body.removeChild(K),window.URL.revokeObjectURL(te),M(" ","success")}catch(ee){console.error("Error downloading document:",ee),ee.response?.status===403?M("    ","error"):ee.response?.status===404?M("  ","error"):M("  ","error")}},I=async Y=>{if(window.confirm(` ,     "${Y.name}"?`))try{const ee=await $c.deleteDocument(Y.id);ee.success?(M(ee.message,"success"),await C()):M(ee.message,"error")}catch(ee){console.error("Error deleting document:",ee),ee.response?.status===403?M("     ","error"):M("  ","error")}},V=Y=>{if(!Y)return"0 B";const ee=1024,te=["B","KB","MB","GB"],K=Math.floor(Math.log(Y)/Math.log(ee));return`${Math.round(Y/Math.pow(ee,K)*100)/100} ${te[K]}`},R=Y=>Y?new Date(Y).toLocaleDateString("ru-RU",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"",q=Y=>Y.includes("pdf")?e.jsx(Tr,{className:"w-5 h-5 text-red-500"}):Y.includes("word")||Y.includes("document")?e.jsx(Ie,{className:"w-5 h-5 text-blue-500"}):Y.includes("excel")||Y.includes("spreadsheet")?e.jsx(Ie,{className:"w-5 h-5 text-green-500"}):Y.includes("image")?e.jsx(Tr,{className:"w-5 h-5 text-purple-500"}):e.jsx(Tr,{className:"w-5 h-5 text-gray-500"}),J=Y=>{const ee={contract:"bg-red-100 text-red-800",invoice:"bg-blue-100 text-blue-800",act:"bg-green-100 text-green-800",other:"bg-gray-100 text-gray-800"},te={contract:"",invoice:"",act:"",other:""};return e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${ee[Y]}`,children:te[Y]})},se=Y=>{switch(Y){case"contract":return e.jsx(Ie,{className:"w-8 h-8"});case"invoice":return e.jsx(Ie,{className:"w-8 h-8"});case"act":return e.jsx(Ie,{className:"w-8 h-8"});default:return e.jsx(Tr,{className:"w-8 h-8"})}};return u?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx(Dt,{className:"w-8 h-8 animate-spin text-blue-600"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-amber-600 to-orange-600 bg-clip-text text-transparent",children:""}),e.jsx("p",{className:"text-gray-600 mt-2",children:"  "})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>C(),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2",children:[e.jsx(rs,{className:"w-4 h-4"}),""]}),e.jsxs("button",{onClick:()=>k(!0),className:"px-4 py-2 bg-gradient-to-r from-amber-600 to-orange-600 text-white rounded-lg hover:from-amber-700 hover:to-orange-700 transition-all flex items-center gap-2 shadow-lg",children:[e.jsx(fn,{className:"w-4 h-4"})," "]})]})]}),e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:E.map(Y=>e.jsx("div",{className:`px-6 py-3 rounded-lg shadow-lg text-white ${Y.type==="success"?"bg-green-500":Y.type==="error"?"bg-red-500":"bg-blue-500"} animate-slide-in`,children:Y.message},Y.id))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 text-white shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-100 text-sm font-medium mb-1",children:" "}),e.jsx("p",{className:"text-3xl font-bold",children:o.total})]}),e.jsx("div",{className:"opacity-75",children:se("other")})]})}),e.jsx("div",{className:"bg-gradient-to-br from-red-500 to-red-600 rounded-xl p-6 text-white shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-red-100 text-sm font-medium mb-1",children:""}),e.jsx("p",{className:"text-3xl font-bold",children:o.contracts})]}),e.jsx("div",{className:"opacity-75",children:se("contract")})]})}),e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm font-medium mb-1",children:""}),e.jsx("p",{className:"text-3xl font-bold",children:o.invoices})]}),e.jsx("div",{className:"opacity-75",children:se("invoice")})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 text-white shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm font-medium mb-1",children:""}),e.jsx("p",{className:"text-3xl font-bold",children:o.acts})]}),e.jsx("div",{className:"opacity-75",children:se("act")})]})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-md p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"  , , ...",value:p,onChange:Y=>j(Y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(gr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsxs("select",{value:g,onChange:Y=>v(Y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 appearance-none bg-white",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"contract",children:""}),e.jsx("option",{value:"invoice",children:""}),e.jsx("option",{value:"act",children:""}),e.jsx("option",{value:"other",children:""})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(gr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsxs("select",{value:y,onChange:Y=>N(Y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 appearance-none bg-white",children:[e.jsx("option",{value:"",children:" "}),n.map(Y=>e.jsx("option",{value:Y.id,children:Y.title},Y.id))]})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-800 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:" "}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-center font-semibold",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:r.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:8,className:"px-6 py-12 text-center",children:[e.jsx(Ie,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:" "}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"  "})]})}):r.map(Y=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[q(Y.file_type),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:Y.name}),Y.description&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:Y.description})]})]})}),e.jsx("td",{className:"px-6 py-4",children:J(Y.type)}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:Y.number||""}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:Y.project_name||""}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:V(Y.file_size)}),e.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:R(Y.created_at)}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:Y.created_by||""}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>Z(Y),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"",children:e.jsx(wt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>I(Y),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"",children:e.jsx(Xe,{className:"w-4 h-4"})})]})})]},Y.id))})]})})}),S&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:" "}),e.jsx("button",{onClick:()=>k(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:_.name,onChange:Y=>T({..._,name:Y.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"  "})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:_.type,onChange:Y=>T({..._,type:Y.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500",children:[e.jsx("option",{value:"invoice",children:""}),e.jsx("option",{value:"act",children:""}),e.jsx("option",{value:"contract",children:""}),e.jsx("option",{value:"other",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"text",value:_.number,onChange:Y=>T({..._,number:Y.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"123"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:_.project_id,onChange:Y=>T({..._,project_id:Y.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500",children:[e.jsx("option",{value:"",children:" "}),n.map(Y=>e.jsxs("option",{value:Y.id,children:[Y.title," ",Y.client_name&&`(${Y.client_name})`]},Y.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:_.description,onChange:Y=>T({..._,description:Y.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 resize-none",placeholder:"   "})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-amber-500 transition-colors",children:[e.jsx("input",{type:"file",onChange:Y=>T({..._,file:Y.target.files?.[0]||null}),className:"hidden",id:"file-upload",accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png"}),e.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[e.jsx(fn,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),_.file?e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:_.file.name}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:V(_.file.size)})]}):e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-1",children:"   "}),e.jsx("p",{className:"text-xs text-gray-500",children:"PDF, Word, Excel, "})]})]})]})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 flex items-center justify-end gap-3 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>k(!1),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:""}),e.jsx("button",{onClick:A,disabled:m,className:"px-6 py-2 bg-gradient-to-r from-amber-600 to-orange-600 text-white rounded-lg hover:from-amber-700 hover:to-orange-700 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:m?e.jsxs(e.Fragment,{children:[e.jsx(Dt,{className:"w-4 h-4 animate-spin"}),"..."]}):e.jsxs(e.Fragment,{children:[e.jsx(fn,{className:"w-4 h-4"}),""]})})]})]})})]})},ho={getList:async s=>{const t=new URLSearchParams;return s?.page&&t.append("page",s.page.toString()),s?.per_page&&t.append("per_page",s.per_page.toString()),s?.category&&t.append("category",s.category),s?.search&&t.append("search",s.search),s?.featured_only!==void 0&&t.append("featured_only",s.featured_only.toString()),s?.visible_only!==void 0&&t.append("visible_only",s.visible_only.toString()),s?.sort_by&&t.append("sort_by",s.sort_by),(await fe.get(`/api/portfolio/?${t.toString()}`)).data},getCategories:async()=>(await fe.get("/api/portfolio/categories")).data,getItem:async s=>(await fe.get(`/api/portfolio/${s}`)).data,create:async s=>{const t=new FormData;return t.append("title",s.title),s.subtitle&&t.append("subtitle",s.subtitle),t.append("description",s.description),t.append("category",s.category),s.technologies&&t.append("technologies",s.technologies),t.append("complexity",s.complexity||"medium"),t.append("complexity_level",(s.complexity_level||5).toString()),s.development_time&&t.append("development_time",s.development_time.toString()),s.cost&&t.append("cost",s.cost.toString()),s.cost_range&&t.append("cost_range",s.cost_range),t.append("show_cost",(s.show_cost||!1).toString()),s.demo_link&&t.append("demo_link",s.demo_link),s.repository_link&&t.append("repository_link",s.repository_link),t.append("external_links",s.external_links||"[]"),t.append("is_featured",(s.is_featured||!1).toString()),t.append("is_visible",(s.is_visible!==!1).toString()),t.append("sort_order",(s.sort_order||0).toString()),s.tags&&t.append("tags",s.tags),s.client_name&&t.append("client_name",s.client_name),t.append("project_status",s.project_status||"completed"),s.completed_at&&t.append("completed_at",s.completed_at),s.main_image&&t.append("main_image",s.main_image),(await fe.post("/api/portfolio/",t,{headers:{"Content-Type":"multipart/form-data"}})).data},update:async(s,t)=>{const r=new FormData;return r.append("title",t.title),r.append("subtitle",t.subtitle||""),r.append("description",t.description),r.append("category",t.category),r.append("technologies",t.technologies||""),r.append("complexity",t.complexity||"medium"),r.append("complexity_level",(t.complexity_level||5).toString()),r.append("development_time",(t.development_time||0).toString()),r.append("cost",(t.cost||0).toString()),r.append("cost_range",t.cost_range||""),r.append("show_cost",(t.show_cost||!1).toString()),r.append("demo_link",t.demo_link||""),r.append("repository_link",t.repository_link||""),r.append("external_links",t.external_links||"[]"),r.append("is_featured",(t.is_featured||!1).toString()),r.append("is_visible",(t.is_visible!==!1).toString()),r.append("sort_order",(t.sort_order||0).toString()),r.append("tags",t.tags||""),r.append("client_name",t.client_name||""),r.append("project_status",t.project_status||"completed"),r.append("remove_main_image",(t.remove_main_image||!1).toString()),t.main_image&&r.append("main_image",t.main_image),(await fe.put(`/api/portfolio/${s}`,r,{headers:{"Content-Type":"multipart/form-data"}})).data},delete:async s=>(await fe.delete(`/api/portfolio/${s}`)).data,uploadImage:async(s,t)=>{const r=new FormData;return r.append("file",s),t&&r.append("subfolder",t),(await fe.post("/api/portfolio/upload-image",r,{headers:{"Content-Type":"multipart/form-data"}})).data},reorder:async s=>(await fe.post("/api/portfolio/reorder",{projects:s})).data,getStats:async()=>(await fe.get("/api/portfolio/stats/overview")).data,publishToTelegram:async s=>(await fe.post(`/api/portfolio/${s}/publish`)).data,updatePublished:async s=>(await fe.put(`/api/portfolio/${s}/update-published`)).data,unpublish:async s=>(await fe.delete(`/api/portfolio/${s}/unpublish`)).data},xG=()=>{const[s,t]=w.useState(!0),[r,a]=w.useState([]),[n,i]=w.useState(null),[o,c]=w.useState([]),[u,h]=w.useState(1),[m,f]=w.useState(1),[p,j]=w.useState(0),g=12,[v,y]=w.useState(""),[N,S]=w.useState(""),[k,_]=w.useState(""),[T,E]=w.useState("created_desc"),[z,M]=w.useState("grid"),[C,A]=w.useState(!1),[Z,I]=w.useState(null),[V,R]=w.useState(!1),[q,J]=w.useState({title:"",subtitle:"",description:"",category:"",technologies:"",complexity:"medium",complexity_level:5,development_time:void 0,cost:void 0,cost_range:"",show_cost:!1,demo_link:"",repository_link:"",external_links:"[]",is_featured:!1,is_visible:!0,sort_order:0,tags:"",client_name:"",project_status:"completed",completed_at:""}),[se,Y]=w.useState(null),[ee,te]=w.useState(""),[K,$]=w.useState(!1),[le,ie]=w.useState([]),oe=w.useCallback((B,ne="info")=>{const me=Date.now().toString();ie(xe=>[...xe,{id:me,message:B,type:ne}]),setTimeout(()=>{ie(xe=>xe.filter(_e=>_e.id!==me))},4e3)},[]),de=w.useCallback(async()=>{try{t(!0);const B=k==="active",ne=k==="featured",[me,xe,_e]=await Promise.all([ho.getList({page:u,per_page:g,category:N||void 0,search:v||void 0,featured_only:ne,visible_only:B,sort_by:T}),ho.getStats(),ho.getCategories()]);me.success&&(a(me.data),f(me.pagination.pages),j(me.pagination.total)),xe.success&&i(xe.stats),_e.success&&c(_e.categories)}catch(B){console.error("Error loading portfolio:",B),oe("  ","error")}finally{t(!1)}},[u,N,v,T,k,oe]);w.useEffect(()=>{de()},[de]);const U=B=>{B?(I(B),J({title:B.title,subtitle:B.subtitle||"",description:B.description,category:B.category,technologies:B.technologies||"",complexity:B.complexity,complexity_level:B.complexity_level,development_time:B.development_time,cost:B.cost,cost_range:B.cost_range||"",show_cost:B.show_cost,demo_link:B.demo_link||"",repository_link:B.repository_link||"",external_links:JSON.stringify(B.external_links||[]),is_featured:B.is_featured,is_visible:B.is_visible,sort_order:B.sort_order,tags:B.tags||"",client_name:B.client_name||"",project_status:B.project_status,completed_at:B.completed_at||""}),B.main_image&&te(`http://localhost:8001/uploads/portfolio/${B.main_image}`)):(I(null),Q()),A(!0),document.body.style.overflow="hidden"},F=()=>{A(!1),I(null),Q(),document.body.style.overflow="auto"},Q=()=>{J({title:"",subtitle:"",description:"",category:"",technologies:"",complexity:"medium",complexity_level:5,development_time:void 0,cost:void 0,cost_range:"",show_cost:!1,demo_link:"",repository_link:"",external_links:"[]",is_featured:!1,is_visible:!0,sort_order:0,tags:"",client_name:"",project_status:"completed",completed_at:""}),Y(null),te(""),$(!1)},W=B=>{const ne=B.target.files?.[0];if(ne){if(ne.size>10*1024*1024){oe("  .  10MB","error");return}Y(ne);const me=new FileReader;me.onloadend=()=>{te(me.result)},me.readAsDataURL(ne),$(!1)}},H=()=>{Y(null),te(""),$(!0)},re=async B=>{if(B.preventDefault(),!q.title||!q.description||!q.category){oe("  ","error");return}try{R(!0);const ne={...q,main_image:se||void 0};if(Z){ne.remove_main_image=K;const me=await ho.update(Z.id,ne);me.success&&(oe(me.message,"success"),F(),de())}else{const me=await ho.create(ne);me.success&&(oe(me.message,"success"),F(),de())}}catch(ne){console.error("Error saving project:",ne),oe(ne.response?.data?.detail||"  ","error")}finally{R(!1)}},he=async B=>{if(confirm(` ,     "${B.title}"?    .`))try{const ne=await ho.delete(B.id);ne.success&&(oe(ne.message,"success"),de())}catch(ne){console.error("Error deleting project:",ne),oe(ne.response?.data?.detail||"  ","error")}},G=async B=>{if(B.is_published){oe("    Telegram","info");return}try{const ne=await ho.publishToTelegram(B.id);ne.success&&(oe(ne.message,"success"),de())}catch(ne){console.error("Error publishing to Telegram:",ne),oe(ne.response?.data?.detail||"   Telegram","error")}},ce=B=>new Date(B).toLocaleDateString("ru-RU",{year:"numeric",month:"2-digit",day:"2-digit"}),X=B=>({telegram_bots:"Telegram ",web_development:"-",mobile_apps:" ",ai_integration:"AI ",automation:"",ecommerce:"E-commerce",other:""})[B]||B,O=B=>{const ne={simple:"bg-green-100 text-green-800",medium:"bg-blue-100 text-blue-800",complex:"bg-orange-100 text-orange-800",premium:"bg-purple-100 text-purple-800"},me={simple:"",medium:"",complex:"",premium:""};return e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${ne[B]}`,children:me[B]})},L=B=>{const ne={completed:"bg-green-100 text-green-800",in_progress:"bg-blue-100 text-blue-800",demo:"bg-yellow-100 text-yellow-800"},me={completed:"",in_progress:" ",demo:"-"};return e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${ne[B]}`,children:me[B]})};return s&&!n?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx(Dt,{className:"w-8 h-8 animate-spin text-purple-600"})}):e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 via-pink-50 to-rose-50 p-6",children:[e.jsxs("div",{className:"max-w-[2000px] mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:""}),e.jsx("p",{className:"text-gray-600 mt-1",children:"  "})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:de,className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-200",children:[e.jsx(rs,{className:"w-5 h-5"}),""]}),e.jsxs("button",{onClick:()=>U(),className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-lg",children:[e.jsx(Ve,{className:"w-5 h-5"})," "]})]})]}),n&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 rounded-xl shadow-lg p-6 border border-purple-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-violet-500 flex items-center justify-center shadow-lg",children:e.jsx(fE,{className:"w-6 h-6 text-white"})})}),e.jsx("div",{className:"text-3xl font-bold text-purple-700 mb-1",children:n.total}),e.jsx("div",{className:"text-sm text-gray-600 uppercase tracking-wide",children:" "})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl shadow-lg p-6 border border-green-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center shadow-lg",children:e.jsx(Ft,{className:"w-6 h-6 text-white"})})}),e.jsx("div",{className:"text-3xl font-bold text-green-700 mb-1",children:n.visible}),e.jsx("div",{className:"text-sm text-gray-600 uppercase tracking-wide",children:""})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-amber-50 rounded-xl shadow-lg p-6 border border-yellow-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-yellow-500 to-amber-500 flex items-center justify-center shadow-lg",children:e.jsx($f,{className:"w-6 h-6 text-white"})})}),e.jsx("div",{className:"text-3xl font-bold text-yellow-700 mb-1",children:n.featured}),e.jsx("div",{className:"text-sm text-gray-600 uppercase tracking-wide",children:""})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl shadow-lg p-6 border border-blue-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center shadow-lg",children:e.jsx(ct,{className:"w-6 h-6 text-white"})})}),e.jsx("div",{className:"text-3xl font-bold text-blue-700 mb-1",children:n.total_views}),e.jsx("div",{className:"text-sm text-gray-600 uppercase tracking-wide",children:""})]}),e.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-rose-50 rounded-xl shadow-lg p-6 border border-pink-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-pink-500 to-rose-500 flex items-center justify-center shadow-lg",children:e.jsx(vn,{className:"w-6 h-6 text-white"})})}),e.jsx("div",{className:"text-3xl font-bold text-pink-700 mb-1",children:Object.keys(n.categories).length}),e.jsx("div",{className:"text-sm text-gray-600 uppercase tracking-wide",children:""})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"lg:col-span-2 relative",children:[e.jsx(Fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"  , , ...",value:v,onChange:B=>{y(B.target.value),h(1)},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),e.jsxs("select",{value:N,onChange:B=>{S(B.target.value),h(1)},className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"",children:" "}),o.map(B=>e.jsxs("option",{value:B.id,children:[B.name," (",B.count,")"]},B.id))]}),e.jsxs("select",{value:k,onChange:B=>{_(B.target.value),h(1)},className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"active",children:""}),e.jsx("option",{value:"featured",children:""})]}),e.jsxs("select",{value:T,onChange:B=>E(B.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"created_desc",children:" "}),e.jsx("option",{value:"created_asc",children:" "}),e.jsx("option",{value:"title_asc",children:"  -"}),e.jsx("option",{value:"title_desc",children:"  -"}),e.jsx("option",{value:"order_asc",children:" "})]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[e.jsx("span",{className:"text-sm text-gray-600",children:":"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>M("grid"),className:`p-2 rounded-lg transition-all ${z==="grid"?"bg-purple-100 text-purple-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:e.jsx(cE,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>M("list"),className:`p-2 rounded-lg transition-all ${z==="list"?"bg-purple-100 text-purple-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:e.jsx(Am,{className:"w-5 h-5"})})]})]})]}),r.length===0?e.jsx("div",{className:"bg-white rounded-3xl p-16 shadow-xl border border-gray-100",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-purple-100 to-pink-100 rounded-3xl flex items-center justify-center mb-6",children:e.jsx(vn,{className:"w-12 h-12 text-purple-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:" "}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-md",children:"    ,  "}),e.jsxs("button",{onClick:()=>U(),className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-8 py-3 rounded-xl font-semibold hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5 flex items-center gap-2",children:[e.jsx(Ve,{className:"w-5 h-5"}),"  "]})]})}):z==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:r.map(B=>e.jsxs("div",{className:`bg-white rounded-2xl shadow-lg overflow-hidden transition-all duration-300 hover:shadow-xl hover:-translate-y-1 ${B.is_featured?"ring-2 ring-yellow-400":""}`,children:[e.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-purple-500 to-pink-500",children:[B.main_image?e.jsx("img",{src:`http://localhost:8001/uploads/portfolio/${B.main_image}`,alt:B.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(tm,{className:"w-16 h-16 text-white opacity-50"})}),B.is_featured&&e.jsxs("div",{className:"absolute top-3 right-3 bg-yellow-400 text-yellow-900 px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1",children:[e.jsx(Ps,{className:"w-3 h-3"}),""]}),!B.is_visible&&e.jsxs("div",{className:"absolute top-3 left-3 bg-gray-800 text-white px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1",children:[e.jsx($o,{className:"w-3 h-3"}),""]})]}),e.jsxs("div",{className:"p-5",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsx("h3",{className:"text-lg font-bold text-gray-900 line-clamp-1",children:B.title})}),B.subtitle&&e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-1",children:B.subtitle}),e.jsx("p",{className:"text-sm text-gray-700 mb-4 line-clamp-2",children:B.description}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 rounded text-xs font-semibold",children:X(B.category)}),O(B.complexity),L(B.project_status)]}),e.jsxs("div",{className:"flex items-center gap-4 mb-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ft,{className:"w-4 h-4"}),B.views_count]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(B4,{className:"w-4 h-4"}),B.likes_count]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>U(B),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all text-sm font-semibold",children:[e.jsx(Zs,{className:"w-4 h-4"}),""]}),e.jsx("button",{onClick:()=>G(B),className:"px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-all",title:"  Telegram",children:e.jsx(Qs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>he(B),className:"px-3 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-all",title:"",children:e.jsx(Xe,{className:"w-4 h-4"})})]})]})]},B.id))}):e.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-800 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-center font-semibold",children:""})]})}),e.jsx("tbody",{children:r.map((B,ne)=>e.jsxs("tr",{className:`border-b border-gray-200 hover:bg-gray-50 transition-colors ${ne%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex-shrink-0 overflow-hidden",children:B.main_image?e.jsx("img",{src:`http://localhost:8001/uploads/portfolio/${B.main_image}`,alt:B.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(tm,{className:"w-6 h-6 text-white opacity-50"})})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[B.title,B.is_featured&&e.jsx(Ps,{className:"w-4 h-4 text-yellow-500"}),!B.is_visible&&e.jsx($o,{className:"w-4 h-4 text-gray-400"})]}),B.subtitle&&e.jsx("div",{className:"text-sm text-gray-600",children:B.subtitle})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-semibold",children:X(B.category)})}),e.jsx("td",{className:"px-6 py-4",children:L(B.project_status)}),e.jsx("td",{className:"px-6 py-4",children:O(B.complexity)}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ft,{className:"w-4 h-4"}),B.views_count]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(B4,{className:"w-4 h-4"}),B.likes_count]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:ce(B.created_at)}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>U(B),className:"p-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-all",title:"",children:e.jsx(Zs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>G(B),className:"p-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-all",title:"  Telegram",children:e.jsx(Qs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>he(B),className:"p-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-all",title:"",children:e.jsx(Xe,{className:"w-4 h-4"})})]})})]},B.id))})]})}),m>1&&e.jsxs("div",{className:"flex items-center justify-between bg-white rounded-xl shadow-md p-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[" ",r.length,"  ",p," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>h(B=>Math.max(1,B-1)),disabled:u===1,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:""}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,m)},(B,ne)=>{let me;return m<=5||u<=3?me=ne+1:u>=m-2?me=m-4+ne:me=u-2+ne,e.jsx("button",{onClick:()=>h(me),className:`w-10 h-10 rounded-lg transition-all ${u===me?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:me},ne)})}),e.jsx("button",{onClick:()=>h(B=>Math.min(m,B+1)),disabled:u===m,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:""})]})]})]}),C&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-4 rounded-t-2xl flex items-center justify-between z-10",children:[e.jsx("h2",{className:"text-xl font-bold",children:Z?" ":" "}),e.jsx("button",{onClick:F,className:"p-2 hover:bg-white/20 rounded-lg transition-all",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("form",{onSubmit:re,className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:q.title,onChange:B=>J({...q,title:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Telegram   -",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"text",value:q.subtitle,onChange:B=>J({...q,subtitle:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"    "})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:q.description,onChange:B=>J({...q,description:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",rows:4,placeholder:"  ,  ,  ...",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:q.category,onChange:B=>J({...q,category:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0,children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"telegram_bots",children:"Telegram "}),e.jsx("option",{value:"web_development",children:"-"}),e.jsx("option",{value:"mobile_apps",children:" "}),e.jsx("option",{value:"ai_integration",children:"AI "}),e.jsx("option",{value:"automation",children:""}),e.jsx("option",{value:"ecommerce",children:"E-commerce"}),e.jsx("option",{value:"other",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:q.complexity,onChange:B=>J({...q,complexity:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"simple",children:""}),e.jsx("option",{value:"medium",children:""}),e.jsx("option",{value:"complex",children:""}),e.jsx("option",{value:"premium",children:""})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:q.technologies,onChange:B=>J({...q,technologies:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Python, PostgreSQL, Redis, Docker"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:", "}),e.jsx("input",{type:"number",value:q.cost||"",onChange:B=>J({...q,cost:B.target.value?Number(B.target.value):void 0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"50000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:", "}),e.jsx("input",{type:"number",value:q.development_time||"",onChange:B=>J({...q,development_time:B.target.value?Number(B.target.value):void 0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"14"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"date",value:q.completed_at,onChange:B=>J({...q,completed_at:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"-"}),e.jsx("input",{type:"url",value:q.demo_link,onChange:B=>J({...q,demo_link:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"https://demo.example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"url",value:q.repository_link,onChange:B=>J({...q,repository_link:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"https://github.com/username/repo"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:q.client_name,onChange:B=>J({...q,client_name:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:" "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsxs("select",{value:q.project_status,onChange:B=>J({...q,project_status:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"completed",children:""}),e.jsx("option",{value:"in_progress",children:" "}),e.jsx("option",{value:"demo",children:"-"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  "}),e.jsx("input",{type:"text",value:q.tags,onChange:B=>J({...q,tags:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:", , "})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-purple-500 transition-all",children:ee?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:ee,alt:"Preview",className:"w-full h-40 object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:H,className:"absolute top-2 right-2 p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all",children:e.jsx(Ae,{className:"w-4 h-4"})})]}):e.jsxs("label",{className:"cursor-pointer block",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:W,className:"hidden"}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(fn,{className:"w-8 h-8 text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-600",children:" "}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG  10MB"})]})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:" "}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:q.is_featured,onChange:B=>J({...q,is_featured:B.target.checked}),className:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:" "})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:q.is_visible,onChange:B=>J({...q,is_visible:B.target.checked}),className:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"  "})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:q.show_cost,onChange:B=>J({...q,show_cost:B.target.checked}),className:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:" "})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"number",value:q.sort_order,onChange:B=>J({...q,sort_order:Number(B.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"0"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"  =   "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  (1-10)"}),e.jsx("input",{type:"number",min:"1",max:"10",value:q.complexity_level,onChange:B=>J({...q,complexity_level:Number(B.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]})]})})}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 rounded-b-2xl flex items-center justify-end gap-3 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:F,className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all font-semibold",children:""}),e.jsx("button",{onClick:re,disabled:V,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:V?e.jsxs(e.Fragment,{children:[e.jsx(Dt,{className:"w-5 h-5 animate-spin"}),"..."]}):e.jsx(e.Fragment,{children:""})})]})]})}),e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:le.map(B=>e.jsx("div",{className:`px-6 py-3 rounded-lg shadow-lg text-white ${B.type==="success"?"bg-green-500":B.type==="error"?"bg-red-500":"bg-blue-500"} animate-slide-in`,children:B.message},B.id))})]})},dl={getCategories:async s=>{const t=s?{type:s}:{};return(await fe.get("/admin/api/finance/categories",{params:t})).data},createCategory:async s=>(await fe.post("/admin/api/finance/categories",s)).data,updateCategory:async(s,t)=>(await fe.put(`/admin/api/finance/categories/${s}`,t)).data,deleteCategory:async s=>(await fe.delete(`/admin/api/finance/categories/${s}`)).data,getTransactions:async s=>(await fe.get("/admin/api/finance/transactions",{params:s})).data,createTransaction:async s=>(await fe.post("/admin/api/finance/transactions",s)).data,updateTransaction:async(s,t)=>(await fe.put(`/admin/api/finance/transactions/${s}`,t)).data,deleteTransaction:async s=>(await fe.delete(`/admin/api/finance/transactions/${s}`)).data,getSummary:async(s,t)=>{const r={};return s&&(r.date_from=s),t&&(r.date_to=t),(await fe.get("/admin/api/finance/analytics/summary",{params:r})).data},getMonthlyAnalytics:async s=>{const t=s?{year:s}:{};return(await fe.get("/admin/api/finance/analytics/monthly",{params:t})).data},getBudgets:async()=>(await fe.get("/admin/api/finance/budgets")).data,createBudget:async s=>(await fe.post("/admin/api/finance/budgets",s)).data,updateBudget:async(s,t)=>(await fe.put(`/admin/api/finance/budgets/${s}`,t)).data,deleteBudget:async s=>(await fe.delete(`/admin/api/finance/budgets/${s}`)).data},fG=()=>{const[s,t]=w.useState(!0),[r,a]=w.useState([]),[n,i]=w.useState([]),[o,c]=w.useState(null),[u,h]=w.useState("all"),[m,f]=w.useState(""),[p,j]=w.useState(""),[g,v]=w.useState(null),[y,N]=w.useState(!1),[S,k]=w.useState(!1),[_,T]=w.useState(null),[E,z]=w.useState("income"),[M,C]=w.useState([]),A=w.useCallback((ee,te="info")=>{const K=Date.now().toString();C($=>[...$,{id:K,message:ee,type:te}]),setTimeout(()=>{C($=>$.filter(le=>le.id!==K))},4e3)},[]),Z=w.useCallback(async()=>{try{t(!0);const ee={limit:50,offset:0};u!=="all"&&(ee.type=u),m&&(ee.date_from=m),p&&(ee.date_to=p),g&&(ee.category_id=g);const[te,K,$]=await Promise.all([dl.getTransactions(ee),dl.getCategories(),dl.getSummary(m,p)]);te.success&&a(te.data),K.success&&i(K.data),$.success&&c($.data)}catch(ee){console.error("Error loading finance data:",ee),A("  ","error")}finally{t(!1)}},[u,m,p,g,A]);w.useEffect(()=>{Z()},[Z]);const I=async ee=>{try{const te=await dl.createTransaction(ee);te.success&&(A(te.message,"success"),N(!1),T(null),Z())}catch(te){console.error("Error creating transaction:",te),A(te.response?.data?.detail||"  ","error")}},V=async(ee,te)=>{try{const K=await dl.updateTransaction(ee,te);K.success&&(A(K.message,"success"),N(!1),T(null),Z())}catch(K){console.error("Error updating transaction:",K),A(K.response?.data?.detail||"  ","error")}},R=async ee=>{if(confirm(" ,     ?"))try{const te=await dl.deleteTransaction(ee);te.success&&(A(te.message,"success"),Z())}catch(te){console.error("Error deleting transaction:",te),A(te.response?.data?.detail||"  ","error")}},q=async ee=>{try{const te=await dl.createCategory(ee);te.success&&(A(te.message,"success"),k(!1),Z())}catch(te){console.error("Error creating category:",te),A(te.response?.data?.detail||"  ","error")}},J=async ee=>{if(confirm(" ,     ?"))try{const te=await dl.deleteCategory(ee);te.success&&(A(te.message,"success"),Z())}catch(te){console.error("Error deleting category:",te),A(te.response?.data?.detail||"  ","error")}},se=ee=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",maximumFractionDigits:0}).format(ee),Y=ee=>new Date(ee).toLocaleDateString("ru-RU",{year:"numeric",month:"short",day:"numeric"});return s&&!o?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx(Dt,{className:"w-8 h-8 animate-spin text-emerald-600"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"max-w-[2000px] mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-emerald-600 to-teal-600 bg-clip-text text-transparent",children:""}),e.jsx("p",{className:"text-gray-600 mt-1",children:"   "})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>k(!0),className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-200",children:[e.jsx(yp,{className:"w-5 h-5"}),""]}),e.jsx("button",{onClick:Z,className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-200",children:e.jsx(rs,{className:"w-5 h-5"})}),e.jsxs("button",{onClick:()=>{z("income"),T(null),N(!0)},className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-lg hover:from-emerald-700 hover:to-teal-700 transition-all shadow-lg",children:[e.jsx(Ve,{className:"w-5 h-5"})," "]})]})]}),o&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl shadow-lg p-6 border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center shadow-lg",children:e.jsx(ct,{className:"w-6 h-6 text-white"})}),e.jsxs("span",{className:"text-sm text-green-600 font-medium",children:[o.income.count," "]})]}),e.jsx("div",{className:"text-3xl font-bold text-green-700 mb-1",children:se(o.income.total)}),e.jsx("div",{className:"text-sm text-gray-600 uppercase tracking-wide",children:""})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 rounded-xl shadow-lg p-6 border border-red-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-red-500 to-rose-500 flex items-center justify-center shadow-lg",children:e.jsx(Sa,{className:"w-6 h-6 text-white"})}),e.jsxs("span",{className:"text-sm text-red-600 font-medium",children:[o.expenses.count," "]})]}),e.jsx("div",{className:"text-3xl font-bold text-red-700 mb-1",children:se(o.expenses.total)}),e.jsx("div",{className:"text-sm text-gray-600 uppercase tracking-wide",children:""})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 rounded-xl shadow-lg p-6 border border-purple-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-violet-500 flex items-center justify-center shadow-lg",children:e.jsx(Ge,{className:"w-6 h-6 text-white"})})}),e.jsx("div",{className:`text-3xl font-bold mb-1 ${o.profit>=0?"text-purple-700":"text-red-700"}`,children:se(o.profit)}),e.jsx("div",{className:"text-sm text-gray-600 uppercase tracking-wide",children:""})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl shadow-lg p-6 border border-blue-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center shadow-lg",children:e.jsx(fN,{className:"w-6 h-6 text-white"})})}),e.jsx("div",{className:"text-3xl font-bold text-blue-700 mb-1",children:se(o.income.total-o.expenses.total)}),e.jsx("div",{className:"text-sm text-gray-600 uppercase tracking-wide",children:""})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gr,{className:"w-5 h-5 text-gray-500"}),e.jsx("span",{className:"font-semibold text-gray-700",children:":"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>h("all"),className:`px-4 py-2 rounded-lg transition-all ${u==="all"?"bg-emerald-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:""}),e.jsx("button",{onClick:()=>h("income"),className:`px-4 py-2 rounded-lg transition-all ${u==="income"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:""}),e.jsx("button",{onClick:()=>h("expense"),className:`px-4 py-2 rounded-lg transition-all ${u==="expense"?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pt,{className:"w-5 h-5 text-gray-500"}),e.jsx("input",{type:"date",value:m,onChange:ee=>f(ee.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none"}),e.jsx("span",{className:"text-gray-500",children:""}),e.jsx("input",{type:"date",value:p,onChange:ee=>j(ee.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none"})]}),(m||p||u!=="all")&&e.jsx("button",{onClick:()=>{h("all"),f(""),j(""),v(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all",children:""})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:" "}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all",children:[e.jsx(wt,{className:"w-4 h-4"}),""]})]}),e.jsx("div",{className:"space-y-3",children:r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ge,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"  "}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"  "})]}):r.map(ee=>e.jsxs("div",{className:"flex items-center gap-4 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-all",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${ee.type==="income"?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:ee.type==="income"?e.jsx(xP,{className:"w-6 h-6"}):e.jsx(dP,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:ee.description}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-3 mt-1",children:[e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium",style:{backgroundColor:ee.category.color+"20",color:ee.category.color},children:ee.category.name}),e.jsx("span",{children:Y(ee.date)}),ee.project&&e.jsxs("span",{className:"text-blue-600",children:[" ",ee.project.title]})]})]}),e.jsxs("div",{className:`text-xl font-bold ${ee.type==="income"?"text-green-600":"text-red-600"}`,children:[ee.type==="income"?"+":"-",se(ee.amount)]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{T(ee),z(ee.type),N(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-all",title:"",children:e.jsx(Zs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>R(ee.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"",children:e.jsx(Xe,{className:"w-4 h-4"})})]})]},ee.id))})]}),o&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.top_income_categories.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"  "}),e.jsx("div",{className:"space-y-3",children:o.top_income_categories.map((ee,te)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-100 text-green-600 flex items-center justify-center font-bold text-sm",children:te+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-800",children:ee.name}),e.jsx("div",{className:"text-sm text-green-600 font-semibold",children:se(ee.total)})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[(ee.total/o.income.total*100).toFixed(1),"%"]})]},te))})]}),o.top_expense_categories.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"  "}),e.jsx("div",{className:"space-y-3",children:o.top_expense_categories.map((ee,te)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-red-100 text-red-600 flex items-center justify-center font-bold text-sm",children:te+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-800",children:ee.name}),e.jsx("div",{className:"text-sm text-red-600 font-semibold",children:se(ee.total)})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[(ee.total/o.expenses.total*100).toFixed(1),"%"]})]},te))})]})]})]}),y&&e.jsx(pG,{isOpen:y,onClose:()=>{N(!1),T(null)},onSave:_?V:I,transaction:_,categories:n,type:E,onTypeChange:z}),S&&e.jsx(gG,{isOpen:S,onClose:()=>{k(!1)},onCreate:q,onDelete:J,categories:n}),e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:M.map(ee=>e.jsx("div",{className:`px-6 py-3 rounded-lg shadow-lg text-white ${ee.type==="success"?"bg-green-500":ee.type==="error"?"bg-red-500":ee.type==="warning"?"bg-yellow-500":"bg-blue-500"} animate-slide-in`,children:ee.message},ee.id))})]})},pG=({isOpen:s,onClose:t,onSave:r,transaction:a,categories:n,type:i,onTypeChange:o})=>{const[c,u]=w.useState({amount:a?.amount||0,type:a?.type||i,description:a?.description||"",date:a?.date?a.date.split("T")[0]:new Date().toISOString().split("T")[0],category_id:a?.category.id||0,project_id:a?.project?.id,contractor_name:a?.contractor_name||"",account:a?.account||"card",receipt_url:a?.receipt_url||"",notes:a?.notes||"",is_recurring:a?.is_recurring||!1,recurring_period:a?.recurring_period||""}),h=n.filter(f=>f.type===c.type),m=f=>{f.preventDefault(),a?r(a.id,c):r(c)};return s?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:a?" ":" "}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-all",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:m,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{u({...c,type:"income",category_id:0}),o("income")},className:`flex-1 py-3 rounded-lg font-semibold transition-all ${c.type==="income"?"bg-green-600 text-white":"bg-gray-100 text-gray-700"}`,children:""}),e.jsx("button",{type:"button",onClick:()=>{u({...c,type:"expense",category_id:0}),o("expense")},className:`flex-1 py-3 rounded-lg font-semibold transition-all ${c.type==="expense"?"bg-red-600 text-white":"bg-gray-100 text-gray-700"}`,children:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"number",step:"0.01",value:c.amount,onChange:f=>u({...c,amount:parseFloat(f.target.value)}),className:"w-full px-4 py-3 text-2xl font-bold border-2 border-gray-200 rounded-lg focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none transition-all text-center",placeholder:"0.00",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" *"}),e.jsxs("select",{value:c.category_id,onChange:f=>u({...c,category_id:parseInt(f.target.value)}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none transition-all",required:!0,children:[e.jsx("option",{value:0,children:" "}),h.map(f=>e.jsx("option",{value:f.id,children:f.name},f.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"text",value:c.description,onChange:f=>u({...c,description:f.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none transition-all",placeholder:" ",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"date",value:c.date,onChange:f=>u({...c,date:f.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:c.account,onChange:f=>u({...c,account:f.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none transition-all",children:[e.jsx("option",{value:"card",children:""}),e.jsx("option",{value:"cash",children:""}),e.jsx("option",{value:"bank",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:c.contractor_name||"",onChange:f=>u({...c,contractor_name:f.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none transition-all",placeholder:" /"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:c.notes||"",onChange:f=>u({...c,notes:f.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none transition-all",rows:3,placeholder:" "})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:t,className:"flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all font-semibold",children:""}),e.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-lg hover:from-emerald-700 hover:to-teal-700 transition-all font-semibold shadow-lg",children:a?"":""})]})]})]})}):null},gG=({isOpen:s,onClose:t,onCreate:r,onDelete:a,categories:n})=>{const[i,o]=w.useState(!1),[c,u]=w.useState({name:"",type:"income",description:"",color:"#10b981",icon:"fas fa-circle"}),h=()=>{u({name:"",type:"income",description:"",color:"#10b981",icon:"fas fa-circle"})},m=j=>{j.preventDefault(),r(c),o(!1),h()};if(!s)return null;const f=n.filter(j=>j.type==="income"),p=n.filter(j=>j.type==="expense");return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:" "}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-all",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[!i&&e.jsxs("button",{onClick:()=>o(!0),className:"w-full py-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-lg hover:from-emerald-700 hover:to-teal-700 transition-all font-semibold shadow-lg flex items-center justify-center gap-2",children:[e.jsx(Ve,{className:"w-5 h-5"})," "]}),i&&e.jsxs("form",{onSubmit:m,className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>u({...c,type:"income"}),className:`flex-1 py-2 rounded-lg font-semibold transition-all ${c.type==="income"?"bg-green-600 text-white":"bg-gray-200 text-gray-700"}`,children:""}),e.jsx("button",{type:"button",onClick:()=>u({...c,type:"expense"}),className:`flex-1 py-2 rounded-lg font-semibold transition-all ${c.type==="expense"?"bg-red-600 text-white":"bg-gray-200 text-gray-700"}`,children:""})]}),e.jsx("input",{type:"text",value:c.name,onChange:j=>u({...c,name:j.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-emerald-500 outline-none",placeholder:" ",required:!0}),e.jsx("input",{type:"text",value:c.description||"",onChange:j=>u({...c,description:j.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-emerald-500 outline-none",placeholder:" ()"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all font-semibold",children:""}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-all font-semibold",children:""})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-green-700 mb-3",children:" "}),e.jsxs("div",{className:"space-y-2",children:[f.map(j=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:j.color+"40",color:j.color},children:e.jsx(Ge,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-800",children:j.name}),j.description&&e.jsx("div",{className:"text-sm text-gray-500",children:j.description})]})]}),e.jsx("button",{onClick:()=>a(j.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-all",children:e.jsx(Xe,{className:"w-4 h-4"})})]},j.id)),f.length===0&&e.jsx("p",{className:"text-gray-400 text-center py-4",children:"  "})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-red-700 mb-3",children:" "}),e.jsxs("div",{className:"space-y-2",children:[p.map(j=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:j.color+"40",color:j.color},children:e.jsx(Ge,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-800",children:j.name}),j.description&&e.jsx("div",{className:"text-sm text-gray-500",children:j.description})]})]}),e.jsx("button",{onClick:()=>a(j.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-all",children:e.jsx(Xe,{className:"w-4 h-4"})})]},j.id)),p.length===0&&e.jsx("p",{className:"text-gray-400 text-center py-4",children:"  "})]})]})]})]})})},Uc={getServices:async s=>{const t=new URLSearchParams;return s?.service_type&&t.append("service_type",s.service_type),s?.status&&t.append("status",s.status),(await fe.get(`/admin/api/services?${t}`)).data},getService:async s=>(await fe.get(`/admin/api/services/${s}`)).data,createService:async s=>(await fe.post("/admin/api/services",s)).data,updateService:async(s,t)=>(await fe.put(`/admin/api/services/${s}`,t)).data,deleteService:async s=>(await fe.delete(`/admin/api/services/${s}`)).data,createExpense:async(s,t)=>(await fe.post(`/admin/api/services/${s}/expense`,t)).data,getStats:async(s="month")=>(await fe.get(`/admin/api/services/stats?period=${s}`)).data,getUpcomingBilling:async(s=30)=>(await fe.get(`/admin/api/services/billing/upcoming?days_ahead=${s}`)).data,resetUsage:async s=>(await fe.post(`/admin/api/services/${s}/reset-usage`)).data},bG=()=>{const[s,t]=w.useState([]),[r,a]=w.useState(!0),[n,i]=w.useState(null),[o,c]=w.useState(""),[u,h]=w.useState(""),[m,f]=w.useState(""),[p,j]=w.useState(!1),[g,v]=w.useState(!1),[y,N]=w.useState(!1),[S,k]=w.useState(null),[_,T]=w.useState({name:"",provider_type:"ai",description:"",website:"",pricing_model:"monthly",contact_info:"{}"}),[E,z]=w.useState({name:"",provider_type:"ai",description:"",website:"",pricing_model:"monthly",status:"active",contact_info:"{}"}),[M,C]=w.useState({amount:"",expense_type:"subscription",description:"",expense_date:new Date().toISOString().split("T")[0],project_id:"",is_recurring:!1,recurring_period:"monthly"}),[A,Z]=w.useState([]),[I,V]=w.useState(null),R=w.useCallback((U,F="info")=>{V({message:U,type:F}),setTimeout(()=>V(null),3e3)},[]),q=w.useCallback(async()=>{try{a(!0);const U=await Uc.getServices({service_type:u||void 0,status:m||void 0});U.success&&t(U.services)}catch{R("  ","error")}finally{a(!1)}},[u,m,R]),J=w.useCallback(async()=>{try{const U=await Uc.getStats("month");U.success&&i(U.statistics)}catch(U){console.error("Failed to load stats:",U)}},[]),se=w.useCallback(async()=>{try{const U=await ps.getProjects();U.success&&Z(U.projects)}catch(U){console.error("Failed to load projects:",U)}},[]);w.useEffect(()=>{q(),J(),se()},[q,J,se]);const Y=async()=>{if(!_.name||!_.provider_type){R("  ","error");return}try{let U={};try{U=JSON.parse(_.contact_info)}catch{R("  JSON   ","error");return}(await Uc.createService({..._,contact_info:U})).success&&(R("  ","success"),j(!1),T({name:"",provider_type:"ai",description:"",website:"",pricing_model:"monthly",contact_info:"{}"}),q(),J())}catch{R("   ","error")}},ee=U=>{k(U),z({name:U.name,provider_type:U.provider_type,description:U.description||"",website:U.website||"",pricing_model:U.pricing_model||"monthly",status:U.status,contact_info:JSON.stringify(U.contact_info||{},null,2)}),v(!0)},te=async()=>{if(S)try{let U={};try{U=JSON.parse(E.contact_info)}catch{R("  JSON   ","error");return}(await Uc.updateService(S.id,{...E,contact_info:U})).success&&(R("  ","success"),v(!1),q(),J())}catch{R("   ","error")}},K=async U=>{if(confirm(" ,     ?"))try{(await Uc.deleteService(U)).success&&(R(" ","success"),q(),J())}catch{R("   ","error")}},$=U=>{k(U),C({amount:"",expense_type:"subscription",description:"",expense_date:new Date().toISOString().split("T")[0],project_id:"",is_recurring:!1,recurring_period:"monthly"}),N(!0)},le=async()=>{if(!S||!M.amount){R("  ","error");return}try{(await Uc.createExpense(S.id,{amount:parseFloat(M.amount),expense_type:M.expense_type,description:M.description,expense_date:M.expense_date,project_id:M.project_id?parseInt(M.project_id):void 0,is_recurring:M.is_recurring,recurring_period:M.is_recurring?M.recurring_period:void 0})).success&&(R(" ","success"),N(!1),q(),J())}catch{R("   ","error")}},ie=U=>({ai:"-",hosting:"",payment:"",analytics:"",storage:"",email:"Email",sms:"SMS",cdn:"CDN",monitoring:"",other:""})[U]||U,oe=U=>({monthly:"",yearly:"",usage:" ",per_request:" ",one_time:"",custom:""})[U]||U,de=w.useMemo(()=>s.filter(U=>!o||U.name.toLowerCase().includes(o.toLowerCase())||U.description?.toLowerCase().includes(o.toLowerCase())),[s,o]);return e.jsxs("div",{className:"p-8 max-w-[1920px] mx-auto",children:[I&&e.jsx("div",{className:`fixed top-4 right-4 z-50 px-6 py-3 rounded-lg shadow-lg ${I.type==="success"?"bg-green-500":I.type==="error"?"bg-red-500":"bg-blue-500"} text-white`,children:I.message}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-teal-500 to-cyan-600 flex items-center justify-center",children:e.jsx(fE,{className:"w-6 h-6 text-white"})})," "]}),e.jsx("p",{className:"text-gray-500 mt-1",children:"      "})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:q,className:"px-4 py-2 border border-gray-200 rounded-xl hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(rs,{className:"w-4 h-4"}),""]}),e.jsxs("button",{onClick:()=>j(!0),className:"px-6 py-3 bg-gradient-to-r from-teal-500 to-cyan-600 text-white rounded-xl hover:shadow-lg transition-all flex items-center gap-2",children:[e.jsx(Ve,{className:"w-5 h-5"})," "]})]})]}),n&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-teal-100 flex items-center justify-center",children:e.jsx(hn,{className:"w-6 h-6 text-teal-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n.total_services}),e.jsx("div",{className:"text-sm text-gray-500",children:" "})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-green-100 flex items-center justify-center",children:e.jsx(zr,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n.active_services}),e.jsx("div",{className:"text-sm text-gray-500",children:""})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-orange-100 flex items-center justify-center",children:e.jsx(Ge,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[Math.round(n.month_cost_so_far),""]}),e.jsx("div",{className:"text-sm text-gray-500",children:"  "})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-100 flex items-center justify-center",children:e.jsx(ct,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[Math.round(n.projected_month_cost),""]}),e.jsx("div",{className:"text-sm text-gray-500",children:"  "})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(gr,{className:"w-5 h-5 text-gray-400"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:""})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("input",{type:"text",placeholder:" ...",value:o,onChange:U=>c(U.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"}),e.jsxs("select",{value:u,onChange:U=>h(U.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"ai",children:"-"}),e.jsx("option",{value:"hosting",children:""}),e.jsx("option",{value:"payment",children:""}),e.jsx("option",{value:"analytics",children:""}),e.jsx("option",{value:"storage",children:""}),e.jsx("option",{value:"other",children:""})]}),e.jsxs("select",{value:m,onChange:U=>f(U.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"active",children:""}),e.jsx("option",{value:"inactive",children:""})]}),e.jsx("button",{onClick:()=>{c(""),h(""),f("")},className:"px-4 py-2 border border-gray-200 rounded-lg hover:bg-gray-50",children:""})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:" "}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:" "}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:""}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:r?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:e.jsx(Dt,{className:"w-8 h-8 animate-spin mx-auto text-teal-500"})})}):de.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:"  "})}):de.map(U=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:U.name}),e.jsx("div",{className:"text-xs text-gray-500 line-clamp-1",children:U.description||" "})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-teal-100 text-teal-700",children:ie(U.provider_type)})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:oe(U.pricing_model||"monthly")}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[U.statistics?.monthly_cost||0,""]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${U.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:U.status==="active"?"":""})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>ee(U),className:"p-2 hover:bg-teal-100 rounded-lg transition-colors",title:"",children:e.jsx(kn,{className:"w-4 h-4 text-teal-600"})}),e.jsx("button",{onClick:()=>$(U),className:"p-2 hover:bg-green-100 rounded-lg transition-colors",title:" ",children:e.jsx(Ve,{className:"w-4 h-4 text-green-600"})}),e.jsx("button",{onClick:()=>K(U.id),className:"p-2 hover:bg-red-100 rounded-lg transition-colors",title:"",children:e.jsx(Xe,{className:"w-4 h-4 text-red-600"})})]})})]},U.id))})]})})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"  "}),e.jsx("button",{onClick:()=>j(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(Ae,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),e.jsx("input",{type:"text",value:_.name,onChange:U=>T({..._,name:U.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),e.jsxs("select",{value:_.provider_type,onChange:U=>T({..._,provider_type:U.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",children:[e.jsx("option",{value:"ai",children:"-"}),e.jsx("option",{value:"hosting",children:""}),e.jsx("option",{value:"payment",children:" "}),e.jsx("option",{value:"analytics",children:""}),e.jsx("option",{value:"storage",children:""}),e.jsx("option",{value:"other",children:""})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:_.description,onChange:U=>T({..._,description:U.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"-"}),e.jsx("input",{type:"url",value:_.website,onChange:U=>T({..._,website:U.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),e.jsxs("select",{value:_.pricing_model,onChange:U=>T({..._,pricing_model:U.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",children:[e.jsx("option",{value:"monthly",children:" "}),e.jsx("option",{value:"yearly",children:" "}),e.jsx("option",{value:"usage",children:" "}),e.jsx("option",{value:"per_request",children:" "}),e.jsx("option",{value:"one_time",children:" "}),e.jsx("option",{value:"custom",children:""})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  (JSON)"}),e.jsx("textarea",{value:_.contact_info,onChange:U=>T({..._,contact_info:U.target.value}),rows:3,placeholder:'{"email": "support@service.com", "phone": "+1234567890"}',className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent font-mono text-sm"})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-100 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>j(!1),className:"px-6 py-2 border border-gray-200 rounded-lg hover:bg-gray-50",children:""}),e.jsx("button",{onClick:Y,className:"px-6 py-2 bg-gradient-to-r from-teal-500 to-cyan-600 text-white rounded-lg hover:shadow-lg",children:""})]})]})}),g&&S&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:" "}),e.jsx("button",{onClick:()=>v(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(Ae,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:E.name,onChange:U=>z({...E,name:U.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("select",{value:E.status,onChange:U=>z({...E,status:U.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500",children:[e.jsx("option",{value:"active",children:""}),e.jsx("option",{value:"inactive",children:""})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:E.description,onChange:U=>z({...E,description:U.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500"})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-100 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>v(!1),className:"px-6 py-2 border border-gray-200 rounded-lg hover:bg-gray-50",children:""}),e.jsx("button",{onClick:te,className:"px-6 py-2 bg-gradient-to-r from-teal-500 to-cyan-600 text-white rounded-lg hover:shadow-lg",children:""})]})]})}),y&&S&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-lg w-full",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:" "}),e.jsx("button",{onClick:()=>N(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[": ",S.name]})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"number",step:"0.01",value:M.amount,onChange:U=>C({...M,amount:U.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),e.jsxs("select",{value:M.expense_type,onChange:U=>C({...M,expense_type:U.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500",children:[e.jsx("option",{value:"subscription",children:""}),e.jsx("option",{value:"usage",children:""}),e.jsx("option",{value:"one_time",children:" "})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:M.description,onChange:U=>C({...M,description:U.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),e.jsx("input",{type:"date",value:M.expense_date,onChange:U=>C({...M,expense_date:U.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:M.is_recurring,onChange:U=>C({...M,is_recurring:U.target.checked}),className:"w-4 h-4 text-teal-600 rounded focus:ring-2 focus:ring-teal-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:" "})]})})]}),e.jsxs("div",{className:"p-6 border-t border-gray-100 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>N(!1),className:"px-6 py-2 border border-gray-200 rounded-lg hover:bg-gray-50",children:""}),e.jsx("button",{onClick:le,className:"px-6 py-2 bg-gradient-to-r from-teal-500 to-cyan-600 text-white rounded-lg hover:shadow-lg",children:""})]})]})})]})},Bk={getDashboard:async(s=30)=>(await fe.get("/admin/api/analytics/dashboard",{params:{days:s}})).data,getUserAnalytics:async(s=30)=>(await fe.get("/admin/api/analytics/users",{params:{days:s}})).data,getProjectAnalytics:async(s=30)=>(await fe.get("/admin/api/analytics/projects",{params:{days:s}})).data,getFinanceAnalytics:async(s=30)=>(await fe.get("/admin/api/analytics/finance",{params:{days:s}})).data,exportAnalytics:async(s="json",t=30)=>(await fe.get("/admin/api/analytics/export",{params:{format:s,days:t}})).data};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Pm(s){return s+.5|0}const pl=(s,t,r)=>Math.max(Math.min(s,r),t);function Rh(s){return pl(Pm(s*2.55),0,255)}function Nl(s){return pl(Pm(s*255),0,255)}function ci(s){return pl(Pm(s/2.55)/100,0,1)}function Fk(s){return pl(Pm(s*100),0,100)}const ma={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Pw=[..."0123456789ABCDEF"],yG=s=>Pw[s&15],vG=s=>Pw[(s&240)>>4]+Pw[s&15],W0=s=>(s&240)>>4===(s&15),jG=s=>W0(s.r)&&W0(s.g)&&W0(s.b)&&W0(s.a);function wG(s){var t=s.length,r;return s[0]==="#"&&(t===4||t===5?r={r:255&ma[s[1]]*17,g:255&ma[s[2]]*17,b:255&ma[s[3]]*17,a:t===5?ma[s[4]]*17:255}:(t===7||t===9)&&(r={r:ma[s[1]]<<4|ma[s[2]],g:ma[s[3]]<<4|ma[s[4]],b:ma[s[5]]<<4|ma[s[6]],a:t===9?ma[s[7]]<<4|ma[s[8]]:255})),r}const NG=(s,t)=>s<255?t(s):"";function _G(s){var t=jG(s)?yG:vG;return s?"#"+t(s.r)+t(s.g)+t(s.b)+NG(s.a,t):void 0}const kG=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function tD(s,t,r){const a=t*Math.min(r,1-r),n=(i,o=(i+s/30)%12)=>r-a*Math.max(Math.min(o-3,9-o,1),-1);return[n(0),n(8),n(4)]}function SG(s,t,r){const a=(n,i=(n+s/60)%6)=>r-r*t*Math.max(Math.min(i,4-i,1),0);return[a(5),a(3),a(1)]}function CG(s,t,r){const a=tD(s,1,.5);let n;for(t+r>1&&(n=1/(t+r),t*=n,r*=n),n=0;n<3;n++)a[n]*=1-t-r,a[n]+=t;return a}function TG(s,t,r,a,n){return s===n?(t-r)/a+(t<r?6:0):t===n?(r-s)/a+2:(s-t)/a+4}function f1(s){const r=s.r/255,a=s.g/255,n=s.b/255,i=Math.max(r,a,n),o=Math.min(r,a,n),c=(i+o)/2;let u,h,m;return i!==o&&(m=i-o,h=c>.5?m/(2-i-o):m/(i+o),u=TG(r,a,n,m,i),u=u*60+.5),[u|0,h||0,c]}function p1(s,t,r,a){return(Array.isArray(t)?s(t[0],t[1],t[2]):s(t,r,a)).map(Nl)}function g1(s,t,r){return p1(tD,s,t,r)}function EG(s,t,r){return p1(CG,s,t,r)}function AG(s,t,r){return p1(SG,s,t,r)}function sD(s){return(s%360+360)%360}function DG(s){const t=kG.exec(s);let r=255,a;if(!t)return;t[5]!==a&&(r=t[6]?Rh(+t[5]):Nl(+t[5]));const n=sD(+t[2]),i=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?a=EG(n,i,o):t[1]==="hsv"?a=AG(n,i,o):a=g1(n,i,o),{r:a[0],g:a[1],b:a[2],a:r}}function RG(s,t){var r=f1(s);r[0]=sD(r[0]+t),r=g1(r),s.r=r[0],s.g=r[1],s.b=r[2]}function MG(s){if(!s)return;const t=f1(s),r=t[0],a=Fk(t[1]),n=Fk(t[2]);return s.a<255?`hsla(${r}, ${a}%, ${n}%, ${ci(s.a)})`:`hsl(${r}, ${a}%, ${n}%)`}const zk={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ik={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function OG(){const s={},t=Object.keys(Ik),r=Object.keys(zk);let a,n,i,o,c;for(a=0;a<t.length;a++){for(o=c=t[a],n=0;n<r.length;n++)i=r[n],c=c.replace(i,zk[i]);i=parseInt(Ik[o],16),s[c]=[i>>16&255,i>>8&255,i&255]}return s}let Y0;function LG(s){Y0||(Y0=OG(),Y0.transparent=[0,0,0,0]);const t=Y0[s.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const PG=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function BG(s){const t=PG.exec(s);let r=255,a,n,i;if(t){if(t[7]!==a){const o=+t[7];r=t[8]?Rh(o):pl(o*255,0,255)}return a=+t[1],n=+t[3],i=+t[5],a=255&(t[2]?Rh(a):pl(a,0,255)),n=255&(t[4]?Rh(n):pl(n,0,255)),i=255&(t[6]?Rh(i):pl(i,0,255)),{r:a,g:n,b:i,a:r}}}function FG(s){return s&&(s.a<255?`rgba(${s.r}, ${s.g}, ${s.b}, ${ci(s.a)})`:`rgb(${s.r}, ${s.g}, ${s.b})`)}const Fy=s=>s<=.0031308?s*12.92:Math.pow(s,1/2.4)*1.055-.055,Vc=s=>s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4);function zG(s,t,r){const a=Vc(ci(s.r)),n=Vc(ci(s.g)),i=Vc(ci(s.b));return{r:Nl(Fy(a+r*(Vc(ci(t.r))-a))),g:Nl(Fy(n+r*(Vc(ci(t.g))-n))),b:Nl(Fy(i+r*(Vc(ci(t.b))-i))),a:s.a+r*(t.a-s.a)}}function G0(s,t,r){if(s){let a=f1(s);a[t]=Math.max(0,Math.min(a[t]+a[t]*r,t===0?360:1)),a=g1(a),s.r=a[0],s.g=a[1],s.b=a[2]}}function rD(s,t){return s&&Object.assign(t||{},s)}function $k(s){var t={r:0,g:0,b:0,a:255};return Array.isArray(s)?s.length>=3&&(t={r:s[0],g:s[1],b:s[2],a:255},s.length>3&&(t.a=Nl(s[3]))):(t=rD(s,{r:0,g:0,b:0,a:1}),t.a=Nl(t.a)),t}function IG(s){return s.charAt(0)==="r"?BG(s):DG(s)}let aD=class Bw{constructor(t){if(t instanceof Bw)return t;const r=typeof t;let a;r==="object"?a=$k(t):r==="string"&&(a=wG(t)||LG(t)||IG(t)),this._rgb=a,this._valid=!!a}get valid(){return this._valid}get rgb(){var t=rD(this._rgb);return t&&(t.a=ci(t.a)),t}set rgb(t){this._rgb=$k(t)}rgbString(){return this._valid?FG(this._rgb):void 0}hexString(){return this._valid?_G(this._rgb):void 0}hslString(){return this._valid?MG(this._rgb):void 0}mix(t,r){if(t){const a=this.rgb,n=t.rgb;let i;const o=r===i?.5:r,c=2*o-1,u=a.a-n.a,h=((c*u===-1?c:(c+u)/(1+c*u))+1)/2;i=1-h,a.r=255&h*a.r+i*n.r+.5,a.g=255&h*a.g+i*n.g+.5,a.b=255&h*a.b+i*n.b+.5,a.a=o*a.a+(1-o)*n.a,this.rgb=a}return this}interpolate(t,r){return t&&(this._rgb=zG(this._rgb,t._rgb,r)),this}clone(){return new Bw(this.rgb)}alpha(t){return this._rgb.a=Nl(t),this}clearer(t){const r=this._rgb;return r.a*=1-t,this}greyscale(){const t=this._rgb,r=Pm(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=r,this}opaquer(t){const r=this._rgb;return r.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return G0(this._rgb,2,t),this}darken(t){return G0(this._rgb,2,-t),this}saturate(t){return G0(this._rgb,1,t),this}desaturate(t){return G0(this._rgb,1,-t),this}rotate(t){return RG(this._rgb,t),this}};/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function si(){}const $G=(()=>{let s=0;return()=>s++})();function St(s){return s==null}function As(s){if(Array.isArray&&Array.isArray(s))return!0;const t=Object.prototype.toString.call(s);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function ft(s){return s!==null&&Object.prototype.toString.call(s)==="[object Object]"}function ur(s){return(typeof s=="number"||s instanceof Number)&&isFinite(+s)}function rn(s,t){return ur(s)?s:t}function lt(s,t){return typeof s>"u"?t:s}const UG=(s,t)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100:+s/t,nD=(s,t)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100*t:+s;function Wt(s,t,r){if(s&&typeof s.call=="function")return s.apply(r,t)}function Et(s,t,r,a){let n,i,o;if(As(s))for(i=s.length,n=0;n<i;n++)t.call(r,s[n],n);else if(ft(s))for(o=Object.keys(s),i=o.length,n=0;n<i;n++)t.call(r,s[o[n]],o[n])}function sp(s,t){let r,a,n,i;if(!s||!t||s.length!==t.length)return!1;for(r=0,a=s.length;r<a;++r)if(n=s[r],i=t[r],n.datasetIndex!==i.datasetIndex||n.index!==i.index)return!1;return!0}function rp(s){if(As(s))return s.map(rp);if(ft(s)){const t=Object.create(null),r=Object.keys(s),a=r.length;let n=0;for(;n<a;++n)t[r[n]]=rp(s[r[n]]);return t}return s}function iD(s){return["__proto__","prototype","constructor"].indexOf(s)===-1}function VG(s,t,r,a){if(!iD(s))return;const n=t[s],i=r[s];ft(n)&&ft(i)?gm(n,i,a):t[s]=rp(i)}function gm(s,t,r){const a=As(t)?t:[t],n=a.length;if(!ft(s))return s;r=r||{};const i=r.merger||VG;let o;for(let c=0;c<n;++c){if(o=a[c],!ft(o))continue;const u=Object.keys(o);for(let h=0,m=u.length;h<m;++h)i(u[h],s,o,r)}return s}function Gh(s,t){return gm(s,t,{merger:HG})}function HG(s,t,r){if(!iD(s))return;const a=t[s],n=r[s];ft(a)&&ft(n)?Gh(a,n):Object.prototype.hasOwnProperty.call(t,s)||(t[s]=rp(n))}const Uk={"":s=>s,x:s=>s.x,y:s=>s.y};function qG(s){const t=s.split("."),r=[];let a="";for(const n of t)a+=n,a.endsWith("\\")?a=a.slice(0,-1)+".":(r.push(a),a="");return r}function WG(s){const t=qG(s);return r=>{for(const a of t){if(a==="")break;r=r&&r[a]}return r}}function Ho(s,t){return(Uk[t]||(Uk[t]=WG(t)))(s)}function b1(s){return s.charAt(0).toUpperCase()+s.slice(1)}const bm=s=>typeof s<"u",Al=s=>typeof s=="function",Vk=(s,t)=>{if(s.size!==t.size)return!1;for(const r of s)if(!t.has(r))return!1;return!0};function YG(s){return s.type==="mouseup"||s.type==="click"||s.type==="contextmenu"}const At=Math.PI,ts=2*At,GG=ts+At,ap=Number.POSITIVE_INFINITY,KG=At/180,Bs=At/2,mo=At/4,Hk=At*2/3,lD=Math.log10,bn=Math.sign;function Kh(s,t,r){return Math.abs(s-t)<r}function qk(s){const t=Math.round(s);s=Kh(s,t,s/1e3)?t:s;const r=Math.pow(10,Math.floor(lD(s))),a=s/r;return(a<=1?1:a<=2?2:a<=5?5:10)*r}function XG(s){const t=[],r=Math.sqrt(s);let a;for(a=1;a<r;a++)s%a===0&&(t.push(a),t.push(s/a));return r===(r|0)&&t.push(r),t.sort((n,i)=>n-i).pop(),t}function ZG(s){return typeof s=="symbol"||typeof s=="object"&&s!==null&&!(Symbol.toPrimitive in s||"toString"in s||"valueOf"in s)}function ym(s){return!ZG(s)&&!isNaN(parseFloat(s))&&isFinite(s)}function QG(s,t){const r=Math.round(s);return r-t<=s&&r+t>=s}function JG(s,t,r){let a,n,i;for(a=0,n=s.length;a<n;a++)i=s[a][r],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function ui(s){return s*(At/180)}function eK(s){return s*(180/At)}function Wk(s){if(!ur(s))return;let t=1,r=0;for(;Math.round(s*t)/t!==s;)t*=10,r++;return r}function oD(s,t){const r=t.x-s.x,a=t.y-s.y,n=Math.sqrt(r*r+a*a);let i=Math.atan2(a,r);return i<-.5*At&&(i+=ts),{angle:i,distance:n}}function Fw(s,t){return Math.sqrt(Math.pow(t.x-s.x,2)+Math.pow(t.y-s.y,2))}function tK(s,t){return(s-t+GG)%ts-At}function Xr(s){return(s%ts+ts)%ts}function vm(s,t,r,a){const n=Xr(s),i=Xr(t),o=Xr(r),c=Xr(i-n),u=Xr(o-n),h=Xr(n-i),m=Xr(n-o);return n===i||n===o||a&&i===o||c>u&&h<m}function or(s,t,r){return Math.max(t,Math.min(r,s))}function sK(s){return or(s,-32768,32767)}function hi(s,t,r,a=1e-6){return s>=Math.min(t,r)-a&&s<=Math.max(t,r)+a}function y1(s,t,r){r=r||(o=>s[o]<t);let a=s.length-1,n=0,i;for(;a-n>1;)i=n+a>>1,r(i)?n=i:a=i;return{lo:n,hi:a}}const Eo=(s,t,r,a)=>y1(s,r,a?n=>{const i=s[n][t];return i<r||i===r&&s[n+1][t]===r}:n=>s[n][t]<r),rK=(s,t,r)=>y1(s,r,a=>s[a][t]>=r);function aK(s,t,r){let a=0,n=s.length;for(;a<n&&s[a]<t;)a++;for(;n>a&&s[n-1]>r;)n--;return a>0||n<s.length?s.slice(a,n):s}const cD=["push","pop","shift","splice","unshift"];function nK(s,t){if(s._chartjs){s._chartjs.listeners.push(t);return}Object.defineProperty(s,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),cD.forEach(r=>{const a="_onData"+b1(r),n=s[r];Object.defineProperty(s,r,{configurable:!0,enumerable:!1,value(...i){const o=n.apply(this,i);return s._chartjs.listeners.forEach(c=>{typeof c[a]=="function"&&c[a](...i)}),o}})})}function Yk(s,t){const r=s._chartjs;if(!r)return;const a=r.listeners,n=a.indexOf(t);n!==-1&&a.splice(n,1),!(a.length>0)&&(cD.forEach(i=>{delete s[i]}),delete s._chartjs)}function dD(s){const t=new Set(s);return t.size===s.length?s:Array.from(t)}const uD=(function(){return typeof window>"u"?function(s){return s()}:window.requestAnimationFrame})();function hD(s,t){let r=[],a=!1;return function(...n){r=n,a||(a=!0,uD.call(window,()=>{a=!1,s.apply(t,r)}))}}function iK(s,t){let r;return function(...a){return t?(clearTimeout(r),r=setTimeout(s,t,a)):s.apply(this,a),t}}const v1=s=>s==="start"?"left":s==="end"?"right":"center",tr=(s,t,r)=>s==="start"?t:s==="end"?r:(t+r)/2,lK=(s,t,r,a)=>s===(a?"left":"right")?r:s==="center"?(t+r)/2:t;function oK(s,t,r){const a=t.length;let n=0,i=a;if(s._sorted){const{iScale:o,vScale:c,_parsed:u}=s,h=s.dataset&&s.dataset.options?s.dataset.options.spanGaps:null,m=o.axis,{min:f,max:p,minDefined:j,maxDefined:g}=o.getUserBounds();if(j){if(n=Math.min(Eo(u,m,f).lo,r?a:Eo(t,m,o.getPixelForValue(f)).lo),h){const v=u.slice(0,n+1).reverse().findIndex(y=>!St(y[c.axis]));n-=Math.max(0,v)}n=or(n,0,a-1)}if(g){let v=Math.max(Eo(u,o.axis,p,!0).hi+1,r?0:Eo(t,m,o.getPixelForValue(p),!0).hi+1);if(h){const y=u.slice(v-1).findIndex(N=>!St(N[c.axis]));v+=Math.max(0,y)}i=or(v,n,a)-n}else i=a-n}return{start:n,count:i}}function cK(s){const{xScale:t,yScale:r,_scaleRanges:a}=s,n={xmin:t.min,xmax:t.max,ymin:r.min,ymax:r.max};if(!a)return s._scaleRanges=n,!0;const i=a.xmin!==t.min||a.xmax!==t.max||a.ymin!==r.min||a.ymax!==r.max;return Object.assign(a,n),i}const K0=s=>s===0||s===1,Gk=(s,t,r)=>-(Math.pow(2,10*(s-=1))*Math.sin((s-t)*ts/r)),Kk=(s,t,r)=>Math.pow(2,-10*s)*Math.sin((s-t)*ts/r)+1,Xh={linear:s=>s,easeInQuad:s=>s*s,easeOutQuad:s=>-s*(s-2),easeInOutQuad:s=>(s/=.5)<1?.5*s*s:-.5*(--s*(s-2)-1),easeInCubic:s=>s*s*s,easeOutCubic:s=>(s-=1)*s*s+1,easeInOutCubic:s=>(s/=.5)<1?.5*s*s*s:.5*((s-=2)*s*s+2),easeInQuart:s=>s*s*s*s,easeOutQuart:s=>-((s-=1)*s*s*s-1),easeInOutQuart:s=>(s/=.5)<1?.5*s*s*s*s:-.5*((s-=2)*s*s*s-2),easeInQuint:s=>s*s*s*s*s,easeOutQuint:s=>(s-=1)*s*s*s*s+1,easeInOutQuint:s=>(s/=.5)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2),easeInSine:s=>-Math.cos(s*Bs)+1,easeOutSine:s=>Math.sin(s*Bs),easeInOutSine:s=>-.5*(Math.cos(At*s)-1),easeInExpo:s=>s===0?0:Math.pow(2,10*(s-1)),easeOutExpo:s=>s===1?1:-Math.pow(2,-10*s)+1,easeInOutExpo:s=>K0(s)?s:s<.5?.5*Math.pow(2,10*(s*2-1)):.5*(-Math.pow(2,-10*(s*2-1))+2),easeInCirc:s=>s>=1?s:-(Math.sqrt(1-s*s)-1),easeOutCirc:s=>Math.sqrt(1-(s-=1)*s),easeInOutCirc:s=>(s/=.5)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1),easeInElastic:s=>K0(s)?s:Gk(s,.075,.3),easeOutElastic:s=>K0(s)?s:Kk(s,.075,.3),easeInOutElastic(s){return K0(s)?s:s<.5?.5*Gk(s*2,.1125,.45):.5+.5*Kk(s*2-1,.1125,.45)},easeInBack(s){return s*s*((1.70158+1)*s-1.70158)},easeOutBack(s){return(s-=1)*s*((1.70158+1)*s+1.70158)+1},easeInOutBack(s){let t=1.70158;return(s/=.5)<1?.5*(s*s*(((t*=1.525)+1)*s-t)):.5*((s-=2)*s*(((t*=1.525)+1)*s+t)+2)},easeInBounce:s=>1-Xh.easeOutBounce(1-s),easeOutBounce(s){return s<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375},easeInOutBounce:s=>s<.5?Xh.easeInBounce(s*2)*.5:Xh.easeOutBounce(s*2-1)*.5+.5};function j1(s){if(s&&typeof s=="object"){const t=s.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Xk(s){return j1(s)?s:new aD(s)}function zy(s){return j1(s)?s:new aD(s).saturate(.5).darken(.1).hexString()}const dK=["x","y","borderWidth","radius","tension"],uK=["color","borderColor","backgroundColor"];function hK(s){s.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),s.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),s.set("animations",{colors:{type:"color",properties:uK},numbers:{type:"number",properties:dK}}),s.describe("animations",{_fallback:"animation"}),s.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function mK(s){s.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Zk=new Map;function xK(s,t){t=t||{};const r=s+JSON.stringify(t);let a=Zk.get(r);return a||(a=new Intl.NumberFormat(s,t),Zk.set(r,a)),a}function w1(s,t,r){return xK(t,r).format(s)}const fK={values(s){return As(s)?s:""+s},numeric(s,t,r){if(s===0)return"0";const a=this.chart.options.locale;let n,i=s;if(r.length>1){const h=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(h<1e-4||h>1e15)&&(n="scientific"),i=pK(s,r)}const o=lD(Math.abs(i)),c=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),u={notation:n,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(u,this.options.ticks.format),w1(s,a,u)}};function pK(s,t){let r=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(r)>=1&&s!==Math.floor(s)&&(r=s-Math.floor(s)),r}var mD={formatters:fK};function gK(s){s.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,r)=>r.lineWidth,tickColor:(t,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:mD.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),s.route("scale.ticks","color","","color"),s.route("scale.grid","color","","borderColor"),s.route("scale.border","color","","borderColor"),s.route("scale.title","color","","color"),s.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),s.describe("scales",{_fallback:"scale"}),s.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const qo=Object.create(null),zw=Object.create(null);function Zh(s,t){if(!t)return s;const r=t.split(".");for(let a=0,n=r.length;a<n;++a){const i=r[a];s=s[i]||(s[i]=Object.create(null))}return s}function Iy(s,t,r){return typeof t=="string"?gm(Zh(s,t),r):gm(Zh(s,""),t)}class bK{constructor(t,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=a=>a.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(a,n)=>zy(n.backgroundColor),this.hoverBorderColor=(a,n)=>zy(n.borderColor),this.hoverColor=(a,n)=>zy(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(r)}set(t,r){return Iy(this,t,r)}get(t){return Zh(this,t)}describe(t,r){return Iy(zw,t,r)}override(t,r){return Iy(qo,t,r)}route(t,r,a,n){const i=Zh(this,t),o=Zh(this,a),c="_"+r;Object.defineProperties(i,{[c]:{value:i[r],writable:!0},[r]:{enumerable:!0,get(){const u=this[c],h=o[n];return ft(u)?Object.assign({},h,u):lt(u,h)},set(u){this[c]=u}}})}apply(t){t.forEach(r=>r(this))}}var gs=new bK({_scriptable:s=>!s.startsWith("on"),_indexable:s=>s!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[hK,mK,gK]);function yK(s){return!s||St(s.size)||St(s.family)?null:(s.style?s.style+" ":"")+(s.weight?s.weight+" ":"")+s.size+"px "+s.family}function Qk(s,t,r,a,n){let i=t[n];return i||(i=t[n]=s.measureText(n).width,r.push(n)),i>a&&(a=i),a}function xo(s,t,r){const a=s.currentDevicePixelRatio,n=r!==0?Math.max(r/2,.5):0;return Math.round((t-n)*a)/a+n}function Jk(s,t){!t&&!s||(t=t||s.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,s.width,s.height),t.restore())}function Iw(s,t,r,a){xD(s,t,r,a,null)}function xD(s,t,r,a,n){let i,o,c,u,h,m,f,p;const j=t.pointStyle,g=t.rotation,v=t.radius;let y=(g||0)*KG;if(j&&typeof j=="object"&&(i=j.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){s.save(),s.translate(r,a),s.rotate(y),s.drawImage(j,-j.width/2,-j.height/2,j.width,j.height),s.restore();return}if(!(isNaN(v)||v<=0)){switch(s.beginPath(),j){default:n?s.ellipse(r,a,n/2,v,0,0,ts):s.arc(r,a,v,0,ts),s.closePath();break;case"triangle":m=n?n/2:v,s.moveTo(r+Math.sin(y)*m,a-Math.cos(y)*v),y+=Hk,s.lineTo(r+Math.sin(y)*m,a-Math.cos(y)*v),y+=Hk,s.lineTo(r+Math.sin(y)*m,a-Math.cos(y)*v),s.closePath();break;case"rectRounded":h=v*.516,u=v-h,o=Math.cos(y+mo)*u,f=Math.cos(y+mo)*(n?n/2-h:u),c=Math.sin(y+mo)*u,p=Math.sin(y+mo)*(n?n/2-h:u),s.arc(r-f,a-c,h,y-At,y-Bs),s.arc(r+p,a-o,h,y-Bs,y),s.arc(r+f,a+c,h,y,y+Bs),s.arc(r-p,a+o,h,y+Bs,y+At),s.closePath();break;case"rect":if(!g){u=Math.SQRT1_2*v,m=n?n/2:u,s.rect(r-m,a-u,2*m,2*u);break}y+=mo;case"rectRot":f=Math.cos(y)*(n?n/2:v),o=Math.cos(y)*v,c=Math.sin(y)*v,p=Math.sin(y)*(n?n/2:v),s.moveTo(r-f,a-c),s.lineTo(r+p,a-o),s.lineTo(r+f,a+c),s.lineTo(r-p,a+o),s.closePath();break;case"crossRot":y+=mo;case"cross":f=Math.cos(y)*(n?n/2:v),o=Math.cos(y)*v,c=Math.sin(y)*v,p=Math.sin(y)*(n?n/2:v),s.moveTo(r-f,a-c),s.lineTo(r+f,a+c),s.moveTo(r+p,a-o),s.lineTo(r-p,a+o);break;case"star":f=Math.cos(y)*(n?n/2:v),o=Math.cos(y)*v,c=Math.sin(y)*v,p=Math.sin(y)*(n?n/2:v),s.moveTo(r-f,a-c),s.lineTo(r+f,a+c),s.moveTo(r+p,a-o),s.lineTo(r-p,a+o),y+=mo,f=Math.cos(y)*(n?n/2:v),o=Math.cos(y)*v,c=Math.sin(y)*v,p=Math.sin(y)*(n?n/2:v),s.moveTo(r-f,a-c),s.lineTo(r+f,a+c),s.moveTo(r+p,a-o),s.lineTo(r-p,a+o);break;case"line":o=n?n/2:Math.cos(y)*v,c=Math.sin(y)*v,s.moveTo(r-o,a-c),s.lineTo(r+o,a+c);break;case"dash":s.moveTo(r,a),s.lineTo(r+Math.cos(y)*(n?n/2:v),a+Math.sin(y)*v);break;case!1:s.closePath();break}s.fill(),t.borderWidth>0&&s.stroke()}}function jm(s,t,r){return r=r||.5,!t||s&&s.x>t.left-r&&s.x<t.right+r&&s.y>t.top-r&&s.y<t.bottom+r}function Tp(s,t){s.save(),s.beginPath(),s.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),s.clip()}function Ep(s){s.restore()}function vK(s,t,r,a,n){if(!t)return s.lineTo(r.x,r.y);if(n==="middle"){const i=(t.x+r.x)/2;s.lineTo(i,t.y),s.lineTo(i,r.y)}else n==="after"!=!!a?s.lineTo(t.x,r.y):s.lineTo(r.x,t.y);s.lineTo(r.x,r.y)}function jK(s,t,r,a){if(!t)return s.lineTo(r.x,r.y);s.bezierCurveTo(a?t.cp1x:t.cp2x,a?t.cp1y:t.cp2y,a?r.cp2x:r.cp1x,a?r.cp2y:r.cp1y,r.x,r.y)}function wK(s,t){t.translation&&s.translate(t.translation[0],t.translation[1]),St(t.rotation)||s.rotate(t.rotation),t.color&&(s.fillStyle=t.color),t.textAlign&&(s.textAlign=t.textAlign),t.textBaseline&&(s.textBaseline=t.textBaseline)}function NK(s,t,r,a,n){if(n.strikethrough||n.underline){const i=s.measureText(a),o=t-i.actualBoundingBoxLeft,c=t+i.actualBoundingBoxRight,u=r-i.actualBoundingBoxAscent,h=r+i.actualBoundingBoxDescent,m=n.strikethrough?(u+h)/2:h;s.strokeStyle=s.fillStyle,s.beginPath(),s.lineWidth=n.decorationWidth||2,s.moveTo(o,m),s.lineTo(c,m),s.stroke()}}function _K(s,t){const r=s.fillStyle;s.fillStyle=t.color,s.fillRect(t.left,t.top,t.width,t.height),s.fillStyle=r}function wm(s,t,r,a,n,i={}){const o=As(t)?t:[t],c=i.strokeWidth>0&&i.strokeColor!=="";let u,h;for(s.save(),s.font=n.string,wK(s,i),u=0;u<o.length;++u)h=o[u],i.backdrop&&_K(s,i.backdrop),c&&(i.strokeColor&&(s.strokeStyle=i.strokeColor),St(i.strokeWidth)||(s.lineWidth=i.strokeWidth),s.strokeText(h,r,a,i.maxWidth)),s.fillText(h,r,a,i.maxWidth),NK(s,r,a,h,i),a+=Number(n.lineHeight);s.restore()}function np(s,t){const{x:r,y:a,w:n,h:i,radius:o}=t;s.arc(r+o.topLeft,a+o.topLeft,o.topLeft,1.5*At,At,!0),s.lineTo(r,a+i-o.bottomLeft),s.arc(r+o.bottomLeft,a+i-o.bottomLeft,o.bottomLeft,At,Bs,!0),s.lineTo(r+n-o.bottomRight,a+i),s.arc(r+n-o.bottomRight,a+i-o.bottomRight,o.bottomRight,Bs,0,!0),s.lineTo(r+n,a+o.topRight),s.arc(r+n-o.topRight,a+o.topRight,o.topRight,0,-Bs,!0),s.lineTo(r+o.topLeft,a)}const kK=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,SK=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function CK(s,t){const r=(""+s).match(kK);if(!r||r[1]==="normal")return t*1.2;switch(s=+r[2],r[3]){case"px":return s;case"%":s/=100;break}return t*s}const TK=s=>+s||0;function N1(s,t){const r={},a=ft(t),n=a?Object.keys(t):t,i=ft(s)?a?o=>lt(s[o],s[t[o]]):o=>s[o]:()=>s;for(const o of n)r[o]=TK(i(o));return r}function fD(s){return N1(s,{top:"y",right:"x",bottom:"y",left:"x"})}function od(s){return N1(s,["topLeft","topRight","bottomLeft","bottomRight"])}function Ca(s){const t=fD(s);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function cr(s,t){s=s||{},t=t||gs.font;let r=lt(s.size,t.size);typeof r=="string"&&(r=parseInt(r,10));let a=lt(s.style,t.style);a&&!(""+a).match(SK)&&(console.warn('Invalid font style specified: "'+a+'"'),a=void 0);const n={family:lt(s.family,t.family),lineHeight:CK(lt(s.lineHeight,t.lineHeight),r),size:r,style:a,weight:lt(s.weight,t.weight),string:""};return n.string=yK(n),n}function X0(s,t,r,a){let n,i,o;for(n=0,i=s.length;n<i;++n)if(o=s[n],o!==void 0&&o!==void 0)return o}function EK(s,t,r){const{min:a,max:n}=s,i=nD(t,(n-a)/2),o=(c,u)=>r&&c===0?0:c+u;return{min:o(a,-Math.abs(i)),max:o(n,i)}}function Go(s,t){return Object.assign(Object.create(s),t)}function _1(s,t=[""],r,a,n=()=>s[0]){const i=r||s;typeof a>"u"&&(a=yD("_fallback",s));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:s,_rootScopes:i,_fallback:a,_getTarget:n,override:c=>_1([c,...s],t,i,a)};return new Proxy(o,{deleteProperty(c,u){return delete c[u],delete c._keys,delete s[0][u],!0},get(c,u){return gD(c,u,()=>BK(u,t,s,c))},getOwnPropertyDescriptor(c,u){return Reflect.getOwnPropertyDescriptor(c._scopes[0],u)},getPrototypeOf(){return Reflect.getPrototypeOf(s[0])},has(c,u){return tS(c).includes(u)},ownKeys(c){return tS(c)},set(c,u,h){const m=c._storage||(c._storage=n());return c[u]=m[u]=h,delete c._keys,!0}})}function Nd(s,t,r,a){const n={_cacheable:!1,_proxy:s,_context:t,_subProxy:r,_stack:new Set,_descriptors:pD(s,a),setContext:i=>Nd(s,i,r,a),override:i=>Nd(s.override(i),t,r,a)};return new Proxy(n,{deleteProperty(i,o){return delete i[o],delete s[o],!0},get(i,o,c){return gD(i,o,()=>DK(i,o,c))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(s,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(s,o)},getPrototypeOf(){return Reflect.getPrototypeOf(s)},has(i,o){return Reflect.has(s,o)},ownKeys(){return Reflect.ownKeys(s)},set(i,o,c){return s[o]=c,delete i[o],!0}})}function pD(s,t={scriptable:!0,indexable:!0}){const{_scriptable:r=t.scriptable,_indexable:a=t.indexable,_allKeys:n=t.allKeys}=s;return{allKeys:n,scriptable:r,indexable:a,isScriptable:Al(r)?r:()=>r,isIndexable:Al(a)?a:()=>a}}const AK=(s,t)=>s?s+b1(t):t,k1=(s,t)=>ft(t)&&s!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function gD(s,t,r){if(Object.prototype.hasOwnProperty.call(s,t)||t==="constructor")return s[t];const a=r();return s[t]=a,a}function DK(s,t,r){const{_proxy:a,_context:n,_subProxy:i,_descriptors:o}=s;let c=a[t];return Al(c)&&o.isScriptable(t)&&(c=RK(t,c,s,r)),As(c)&&c.length&&(c=MK(t,c,s,o.isIndexable)),k1(t,c)&&(c=Nd(c,n,i&&i[t],o)),c}function RK(s,t,r,a){const{_proxy:n,_context:i,_subProxy:o,_stack:c}=r;if(c.has(s))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+s);c.add(s);let u=t(i,o||a);return c.delete(s),k1(s,u)&&(u=S1(n._scopes,n,s,u)),u}function MK(s,t,r,a){const{_proxy:n,_context:i,_subProxy:o,_descriptors:c}=r;if(typeof i.index<"u"&&a(s))return t[i.index%t.length];if(ft(t[0])){const u=t,h=n._scopes.filter(m=>m!==u);t=[];for(const m of u){const f=S1(h,n,s,m);t.push(Nd(f,i,o&&o[s],c))}}return t}function bD(s,t,r){return Al(s)?s(t,r):s}const OK=(s,t)=>s===!0?t:typeof s=="string"?Ho(t,s):void 0;function LK(s,t,r,a,n){for(const i of t){const o=OK(r,i);if(o){s.add(o);const c=bD(o._fallback,r,n);if(typeof c<"u"&&c!==r&&c!==a)return c}else if(o===!1&&typeof a<"u"&&r!==a)return null}return!1}function S1(s,t,r,a){const n=t._rootScopes,i=bD(t._fallback,r,a),o=[...s,...n],c=new Set;c.add(a);let u=eS(c,o,r,i||r,a);return u===null||typeof i<"u"&&i!==r&&(u=eS(c,o,i,u,a),u===null)?!1:_1(Array.from(c),[""],n,i,()=>PK(t,r,a))}function eS(s,t,r,a,n){for(;r;)r=LK(s,t,r,a,n);return r}function PK(s,t,r){const a=s._getTarget();t in a||(a[t]={});const n=a[t];return As(n)&&ft(r)?r:n||{}}function BK(s,t,r,a){let n;for(const i of t)if(n=yD(AK(i,s),r),typeof n<"u")return k1(s,n)?S1(r,a,s,n):n}function yD(s,t){for(const r of t){if(!r)continue;const a=r[s];if(typeof a<"u")return a}}function tS(s){let t=s._keys;return t||(t=s._keys=FK(s._scopes)),t}function FK(s){const t=new Set;for(const r of s)for(const a of Object.keys(r).filter(n=>!n.startsWith("_")))t.add(a);return Array.from(t)}const zK=Number.EPSILON||1e-14,_d=(s,t)=>t<s.length&&!s[t].skip&&s[t],vD=s=>s==="x"?"y":"x";function IK(s,t,r,a){const n=s.skip?t:s,i=t,o=r.skip?t:r,c=Fw(i,n),u=Fw(o,i);let h=c/(c+u),m=u/(c+u);h=isNaN(h)?0:h,m=isNaN(m)?0:m;const f=a*h,p=a*m;return{previous:{x:i.x-f*(o.x-n.x),y:i.y-f*(o.y-n.y)},next:{x:i.x+p*(o.x-n.x),y:i.y+p*(o.y-n.y)}}}function $K(s,t,r){const a=s.length;let n,i,o,c,u,h=_d(s,0);for(let m=0;m<a-1;++m)if(u=h,h=_d(s,m+1),!(!u||!h)){if(Kh(t[m],0,zK)){r[m]=r[m+1]=0;continue}n=r[m]/t[m],i=r[m+1]/t[m],c=Math.pow(n,2)+Math.pow(i,2),!(c<=9)&&(o=3/Math.sqrt(c),r[m]=n*o*t[m],r[m+1]=i*o*t[m])}}function UK(s,t,r="x"){const a=vD(r),n=s.length;let i,o,c,u=_d(s,0);for(let h=0;h<n;++h){if(o=c,c=u,u=_d(s,h+1),!c)continue;const m=c[r],f=c[a];o&&(i=(m-o[r])/3,c[`cp1${r}`]=m-i,c[`cp1${a}`]=f-i*t[h]),u&&(i=(u[r]-m)/3,c[`cp2${r}`]=m+i,c[`cp2${a}`]=f+i*t[h])}}function VK(s,t="x"){const r=vD(t),a=s.length,n=Array(a).fill(0),i=Array(a);let o,c,u,h=_d(s,0);for(o=0;o<a;++o)if(c=u,u=h,h=_d(s,o+1),!!u){if(h){const m=h[t]-u[t];n[o]=m!==0?(h[r]-u[r])/m:0}i[o]=c?h?bn(n[o-1])!==bn(n[o])?0:(n[o-1]+n[o])/2:n[o-1]:n[o]}$K(s,n,i),UK(s,i,t)}function Z0(s,t,r){return Math.max(Math.min(s,r),t)}function HK(s,t){let r,a,n,i,o,c=jm(s[0],t);for(r=0,a=s.length;r<a;++r)o=i,i=c,c=r<a-1&&jm(s[r+1],t),i&&(n=s[r],o&&(n.cp1x=Z0(n.cp1x,t.left,t.right),n.cp1y=Z0(n.cp1y,t.top,t.bottom)),c&&(n.cp2x=Z0(n.cp2x,t.left,t.right),n.cp2y=Z0(n.cp2y,t.top,t.bottom)))}function qK(s,t,r,a,n){let i,o,c,u;if(t.spanGaps&&(s=s.filter(h=>!h.skip)),t.cubicInterpolationMode==="monotone")VK(s,n);else{let h=a?s[s.length-1]:s[0];for(i=0,o=s.length;i<o;++i)c=s[i],u=IK(h,c,s[Math.min(i+1,o-(a?0:1))%o],t.tension),c.cp1x=u.previous.x,c.cp1y=u.previous.y,c.cp2x=u.next.x,c.cp2y=u.next.y,h=c}t.capBezierPoints&&HK(s,r)}function C1(){return typeof window<"u"&&typeof document<"u"}function T1(s){let t=s.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function ip(s,t,r){let a;return typeof s=="string"?(a=parseInt(s,10),s.indexOf("%")!==-1&&(a=a/100*t.parentNode[r])):a=s,a}const Ap=s=>s.ownerDocument.defaultView.getComputedStyle(s,null);function WK(s,t){return Ap(s).getPropertyValue(t)}const YK=["top","right","bottom","left"];function zo(s,t,r){const a={};r=r?"-"+r:"";for(let n=0;n<4;n++){const i=YK[n];a[i]=parseFloat(s[t+"-"+i+r])||0}return a.width=a.left+a.right,a.height=a.top+a.bottom,a}const GK=(s,t,r)=>(s>0||t>0)&&(!r||!r.shadowRoot);function KK(s,t){const r=s.touches,a=r&&r.length?r[0]:s,{offsetX:n,offsetY:i}=a;let o=!1,c,u;if(GK(n,i,s.target))c=n,u=i;else{const h=t.getBoundingClientRect();c=a.clientX-h.left,u=a.clientY-h.top,o=!0}return{x:c,y:u,box:o}}function No(s,t){if("native"in s)return s;const{canvas:r,currentDevicePixelRatio:a}=t,n=Ap(r),i=n.boxSizing==="border-box",o=zo(n,"padding"),c=zo(n,"border","width"),{x:u,y:h,box:m}=KK(s,r),f=o.left+(m&&c.left),p=o.top+(m&&c.top);let{width:j,height:g}=t;return i&&(j-=o.width+c.width,g-=o.height+c.height),{x:Math.round((u-f)/j*r.width/a),y:Math.round((h-p)/g*r.height/a)}}function XK(s,t,r){let a,n;if(t===void 0||r===void 0){const i=s&&T1(s);if(!i)t=s.clientWidth,r=s.clientHeight;else{const o=i.getBoundingClientRect(),c=Ap(i),u=zo(c,"border","width"),h=zo(c,"padding");t=o.width-h.width-u.width,r=o.height-h.height-u.height,a=ip(c.maxWidth,i,"clientWidth"),n=ip(c.maxHeight,i,"clientHeight")}}return{width:t,height:r,maxWidth:a||ap,maxHeight:n||ap}}const gl=s=>Math.round(s*10)/10;function ZK(s,t,r,a){const n=Ap(s),i=zo(n,"margin"),o=ip(n.maxWidth,s,"clientWidth")||ap,c=ip(n.maxHeight,s,"clientHeight")||ap,u=XK(s,t,r);let{width:h,height:m}=u;if(n.boxSizing==="content-box"){const p=zo(n,"border","width"),j=zo(n,"padding");h-=j.width+p.width,m-=j.height+p.height}return h=Math.max(0,h-i.width),m=Math.max(0,a?h/a:m-i.height),h=gl(Math.min(h,o,u.maxWidth)),m=gl(Math.min(m,c,u.maxHeight)),h&&!m&&(m=gl(h/2)),(t!==void 0||r!==void 0)&&a&&u.height&&m>u.height&&(m=u.height,h=gl(Math.floor(m*a))),{width:h,height:m}}function sS(s,t,r){const a=t||1,n=gl(s.height*a),i=gl(s.width*a);s.height=gl(s.height),s.width=gl(s.width);const o=s.canvas;return o.style&&(r||!o.style.height&&!o.style.width)&&(o.style.height=`${s.height}px`,o.style.width=`${s.width}px`),s.currentDevicePixelRatio!==a||o.height!==n||o.width!==i?(s.currentDevicePixelRatio=a,o.height=n,o.width=i,s.ctx.setTransform(a,0,0,a,0,0),!0):!1}const QK=(function(){let s=!1;try{const t={get passive(){return s=!0,!1}};C1()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return s})();function rS(s,t){const r=WK(s,t),a=r&&r.match(/^(\d+)(\.\d+)?px$/);return a?+a[1]:void 0}function _o(s,t,r,a){return{x:s.x+r*(t.x-s.x),y:s.y+r*(t.y-s.y)}}function JK(s,t,r,a){return{x:s.x+r*(t.x-s.x),y:a==="middle"?r<.5?s.y:t.y:a==="after"?r<1?s.y:t.y:r>0?t.y:s.y}}function eX(s,t,r,a){const n={x:s.cp2x,y:s.cp2y},i={x:t.cp1x,y:t.cp1y},o=_o(s,n,r),c=_o(n,i,r),u=_o(i,t,r),h=_o(o,c,r),m=_o(c,u,r);return _o(h,m,r)}const tX=function(s,t){return{x(r){return s+s+t-r},setWidth(r){t=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,a){return r-a},leftForLtr(r,a){return r-a}}},sX=function(){return{x(s){return s},setWidth(s){},textAlign(s){return s},xPlus(s,t){return s+t},leftForLtr(s,t){return s}}};function cd(s,t,r){return s?tX(t,r):sX()}function jD(s,t){let r,a;(t==="ltr"||t==="rtl")&&(r=s.canvas.style,a=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",t,"important"),s.prevTextDirection=a)}function wD(s,t){t!==void 0&&(delete s.prevTextDirection,s.canvas.style.setProperty("direction",t[0],t[1]))}function ND(s){return s==="angle"?{between:vm,compare:tK,normalize:Xr}:{between:hi,compare:(t,r)=>t-r,normalize:t=>t}}function aS({start:s,end:t,count:r,loop:a,style:n}){return{start:s%r,end:t%r,loop:a&&(t-s+1)%r===0,style:n}}function rX(s,t,r){const{property:a,start:n,end:i}=r,{between:o,normalize:c}=ND(a),u=t.length;let{start:h,end:m,loop:f}=s,p,j;if(f){for(h+=u,m+=u,p=0,j=u;p<j&&o(c(t[h%u][a]),n,i);++p)h--,m--;h%=u,m%=u}return m<h&&(m+=u),{start:h,end:m,loop:f,style:s.style}}function _D(s,t,r){if(!r)return[s];const{property:a,start:n,end:i}=r,o=t.length,{compare:c,between:u,normalize:h}=ND(a),{start:m,end:f,loop:p,style:j}=rX(s,t,r),g=[];let v=!1,y=null,N,S,k;const _=()=>u(n,k,N)&&c(n,k)!==0,T=()=>c(i,N)===0||u(i,k,N),E=()=>v||_(),z=()=>!v||T();for(let M=m,C=m;M<=f;++M)S=t[M%o],!S.skip&&(N=h(S[a]),N!==k&&(v=u(N,n,i),y===null&&E()&&(y=c(N,n)===0?M:C),y!==null&&z()&&(g.push(aS({start:y,end:M,loop:p,count:o,style:j})),y=null),C=M,k=N));return y!==null&&g.push(aS({start:y,end:f,loop:p,count:o,style:j})),g}function kD(s,t){const r=[],a=s.segments;for(let n=0;n<a.length;n++){const i=_D(a[n],s.points,t);i.length&&r.push(...i)}return r}function aX(s,t,r,a){let n=0,i=t-1;if(r&&!a)for(;n<t&&!s[n].skip;)n++;for(;n<t&&s[n].skip;)n++;for(n%=t,r&&(i+=n);i>n&&s[i%t].skip;)i--;return i%=t,{start:n,end:i}}function nX(s,t,r,a){const n=s.length,i=[];let o=t,c=s[t],u;for(u=t+1;u<=r;++u){const h=s[u%n];h.skip||h.stop?c.skip||(a=!1,i.push({start:t%n,end:(u-1)%n,loop:a}),t=o=h.stop?u:null):(o=u,c.skip&&(t=u)),c=h}return o!==null&&i.push({start:t%n,end:o%n,loop:a}),i}function iX(s,t){const r=s.points,a=s.options.spanGaps,n=r.length;if(!n)return[];const i=!!s._loop,{start:o,end:c}=aX(r,n,i,a);if(a===!0)return nS(s,[{start:o,end:c,loop:i}],r,t);const u=c<o?c+n:c,h=!!s._fullLoop&&o===0&&c===n-1;return nS(s,nX(r,o,u,h),r,t)}function nS(s,t,r,a){return!a||!a.setContext||!r?t:lX(s,t,r,a)}function lX(s,t,r,a){const n=s._chart.getContext(),i=iS(s.options),{_datasetIndex:o,options:{spanGaps:c}}=s,u=r.length,h=[];let m=i,f=t[0].start,p=f;function j(g,v,y,N){const S=c?-1:1;if(g!==v){for(g+=u;r[g%u].skip;)g-=S;for(;r[v%u].skip;)v+=S;g%u!==v%u&&(h.push({start:g%u,end:v%u,loop:y,style:N}),m=N,f=v%u)}}for(const g of t){f=c?f:g.start;let v=r[f%u],y;for(p=f+1;p<=g.end;p++){const N=r[p%u];y=iS(a.setContext(Go(n,{type:"segment",p0:v,p1:N,p0DataIndex:(p-1)%u,p1DataIndex:p%u,datasetIndex:o}))),oX(y,m)&&j(f,p-1,g.loop,m),v=N,m=y}f<p-1&&j(f,p-1,g.loop,m)}return h}function iS(s){return{backgroundColor:s.backgroundColor,borderCapStyle:s.borderCapStyle,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderJoinStyle:s.borderJoinStyle,borderWidth:s.borderWidth,borderColor:s.borderColor}}function oX(s,t){if(!t)return!1;const r=[],a=function(n,i){return j1(i)?(r.includes(i)||r.push(i),r.indexOf(i)):i};return JSON.stringify(s,a)!==JSON.stringify(t,a)}function Q0(s,t,r){return s.options.clip?s[r]:t[r]}function cX(s,t){const{xScale:r,yScale:a}=s;return r&&a?{left:Q0(r,t,"left"),right:Q0(r,t,"right"),top:Q0(a,t,"top"),bottom:Q0(a,t,"bottom")}:t}function SD(s,t){const r=t._clip;if(r.disabled)return!1;const a=cX(t,s.chartArea);return{left:r.left===!1?0:a.left-(r.left===!0?0:r.left),right:r.right===!1?s.width:a.right+(r.right===!0?0:r.right),top:r.top===!1?0:a.top-(r.top===!0?0:r.top),bottom:r.bottom===!1?s.height:a.bottom+(r.bottom===!0?0:r.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class dX{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,r,a,n){const i=r.listeners[n],o=r.duration;i.forEach(c=>c({chart:t,initial:r.initial,numSteps:o,currentStep:Math.min(a-r.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=uD.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let r=0;this._charts.forEach((a,n)=>{if(!a.running||!a.items.length)return;const i=a.items;let o=i.length-1,c=!1,u;for(;o>=0;--o)u=i[o],u._active?(u._total>a.duration&&(a.duration=u._total),u.tick(t),c=!0):(i[o]=i[i.length-1],i.pop());c&&(n.draw(),this._notify(n,a,t,"progress")),i.length||(a.running=!1,this._notify(n,a,t,"complete"),a.initial=!1),r+=i.length}),this._lastDate=t,r===0&&(this._running=!1)}_getAnims(t){const r=this._charts;let a=r.get(t);return a||(a={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(t,a)),a}listen(t,r,a){this._getAnims(t).listeners[r].push(a)}add(t,r){!r||!r.length||this._getAnims(t).items.push(...r)}has(t){return this._getAnims(t).items.length>0}start(t){const r=this._charts.get(t);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((a,n)=>Math.max(a,n._duration),0),this._refresh())}running(t){if(!this._running)return!1;const r=this._charts.get(t);return!(!r||!r.running||!r.items.length)}stop(t){const r=this._charts.get(t);if(!r||!r.items.length)return;const a=r.items;let n=a.length-1;for(;n>=0;--n)a[n].cancel();r.items=[],this._notify(t,r,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var ni=new dX;const lS="transparent",uX={boolean(s,t,r){return r>.5?t:s},color(s,t,r){const a=Xk(s||lS),n=a.valid&&Xk(t||lS);return n&&n.valid?n.mix(a,r).hexString():t},number(s,t,r){return s+(t-s)*r}};class hX{constructor(t,r,a,n){const i=r[a];n=X0([t.to,n,i,t.from]);const o=X0([t.from,i,n]);this._active=!0,this._fn=t.fn||uX[t.type||typeof o],this._easing=Xh[t.easing]||Xh.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=r,this._prop=a,this._from=o,this._to=n,this._promises=void 0}active(){return this._active}update(t,r,a){if(this._active){this._notify(!1);const n=this._target[this._prop],i=a-this._start,o=this._duration-i;this._start=a,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=X0([t.to,r,n,t.from]),this._from=X0([t.from,n,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const r=t-this._start,a=this._duration,n=this._prop,i=this._from,o=this._loop,c=this._to;let u;if(this._active=i!==c&&(o||r<a),!this._active){this._target[n]=c,this._notify(!0);return}if(r<0){this._target[n]=i;return}u=r/a%2,u=o&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[n]=this._fn(i,c,u)}wait(){const t=this._promises||(this._promises=[]);return new Promise((r,a)=>{t.push({res:r,rej:a})})}_notify(t){const r=t?"res":"rej",a=this._promises||[];for(let n=0;n<a.length;n++)a[n][r]()}}class CD{constructor(t,r){this._chart=t,this._properties=new Map,this.configure(r)}configure(t){if(!ft(t))return;const r=Object.keys(gs.animation),a=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{const i=t[n];if(!ft(i))return;const o={};for(const c of r)o[c]=i[c];(As(i.properties)&&i.properties||[n]).forEach(c=>{(c===n||!a.has(c))&&a.set(c,o)})})}_animateOptions(t,r){const a=r.options,n=xX(t,a);if(!n)return[];const i=this._createAnimations(n,a);return a.$shared&&mX(t.options.$animations,a).then(()=>{t.options=a},()=>{}),i}_createAnimations(t,r){const a=this._properties,n=[],i=t.$animations||(t.$animations={}),o=Object.keys(r),c=Date.now();let u;for(u=o.length-1;u>=0;--u){const h=o[u];if(h.charAt(0)==="$")continue;if(h==="options"){n.push(...this._animateOptions(t,r));continue}const m=r[h];let f=i[h];const p=a.get(h);if(f)if(p&&f.active()){f.update(p,m,c);continue}else f.cancel();if(!p||!p.duration){t[h]=m;continue}i[h]=f=new hX(p,t,h,m),n.push(f)}return n}update(t,r){if(this._properties.size===0){Object.assign(t,r);return}const a=this._createAnimations(t,r);if(a.length)return ni.add(this._chart,a),!0}}function mX(s,t){const r=[],a=Object.keys(t);for(let n=0;n<a.length;n++){const i=s[a[n]];i&&i.active()&&r.push(i.wait())}return Promise.all(r)}function xX(s,t){if(!t)return;let r=s.options;if(!r){s.options=t;return}return r.$shared&&(s.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function oS(s,t){const r=s&&s.options||{},a=r.reverse,n=r.min===void 0?t:0,i=r.max===void 0?t:0;return{start:a?i:n,end:a?n:i}}function fX(s,t,r){if(r===!1)return!1;const a=oS(s,r),n=oS(t,r);return{top:n.end,right:a.end,bottom:n.start,left:a.start}}function pX(s){let t,r,a,n;return ft(s)?(t=s.top,r=s.right,a=s.bottom,n=s.left):t=r=a=n=s,{top:t,right:r,bottom:a,left:n,disabled:s===!1}}function TD(s,t){const r=[],a=s._getSortedDatasetMetas(t);let n,i;for(n=0,i=a.length;n<i;++n)r.push(a[n].index);return r}function cS(s,t,r,a={}){const n=s.keys,i=a.mode==="single";let o,c,u,h;if(t===null)return;let m=!1;for(o=0,c=n.length;o<c;++o){if(u=+n[o],u===r){if(m=!0,a.all)continue;break}h=s.values[u],ur(h)&&(i||t===0||bn(t)===bn(h))&&(t+=h)}return!m&&!a.all?0:t}function gX(s,t){const{iScale:r,vScale:a}=t,n=r.axis==="x"?"x":"y",i=a.axis==="x"?"x":"y",o=Object.keys(s),c=new Array(o.length);let u,h,m;for(u=0,h=o.length;u<h;++u)m=o[u],c[u]={[n]:m,[i]:s[m]};return c}function $y(s,t){const r=s&&s.options.stacked;return r||r===void 0&&t.stack!==void 0}function bX(s,t,r){return`${s.id}.${t.id}.${r.stack||r.type}`}function yX(s){const{min:t,max:r,minDefined:a,maxDefined:n}=s.getUserBounds();return{min:a?t:Number.NEGATIVE_INFINITY,max:n?r:Number.POSITIVE_INFINITY}}function vX(s,t,r){const a=s[t]||(s[t]={});return a[r]||(a[r]={})}function dS(s,t,r,a){for(const n of t.getMatchingVisibleMetas(a).reverse()){const i=s[n.index];if(r&&i>0||!r&&i<0)return n.index}return null}function uS(s,t){const{chart:r,_cachedMeta:a}=s,n=r._stacks||(r._stacks={}),{iScale:i,vScale:o,index:c}=a,u=i.axis,h=o.axis,m=bX(i,o,a),f=t.length;let p;for(let j=0;j<f;++j){const g=t[j],{[u]:v,[h]:y}=g,N=g._stacks||(g._stacks={});p=N[h]=vX(n,m,v),p[c]=y,p._top=dS(p,o,!0,a.type),p._bottom=dS(p,o,!1,a.type);const S=p._visualValues||(p._visualValues={});S[c]=y}}function Uy(s,t){const r=s.scales;return Object.keys(r).filter(a=>r[a].axis===t).shift()}function jX(s,t){return Go(s,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function wX(s,t,r){return Go(s,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:r,index:t,mode:"default",type:"data"})}function ph(s,t){const r=s.controller.index,a=s.vScale&&s.vScale.axis;if(a){t=t||s._parsed;for(const n of t){const i=n._stacks;if(!i||i[a]===void 0||i[a][r]===void 0)return;delete i[a][r],i[a]._visualValues!==void 0&&i[a]._visualValues[r]!==void 0&&delete i[a]._visualValues[r]}}}const Vy=s=>s==="reset"||s==="none",hS=(s,t)=>t?s:Object.assign({},s),NX=(s,t,r)=>s&&!t.hidden&&t._stacked&&{keys:TD(r,!0),values:null};class Dp{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,r){this.chart=t,this._ctx=t.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=$y(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&ph(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,r=this._cachedMeta,a=this.getDataset(),n=(f,p,j,g)=>f==="x"?p:f==="r"?g:j,i=r.xAxisID=lt(a.xAxisID,Uy(t,"x")),o=r.yAxisID=lt(a.yAxisID,Uy(t,"y")),c=r.rAxisID=lt(a.rAxisID,Uy(t,"r")),u=r.indexAxis,h=r.iAxisID=n(u,i,o,c),m=r.vAxisID=n(u,o,i,c);r.xScale=this.getScaleForId(i),r.yScale=this.getScaleForId(o),r.rScale=this.getScaleForId(c),r.iScale=this.getScaleForId(h),r.vScale=this.getScaleForId(m)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const r=this._cachedMeta;return t===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Yk(this._data,this),t._stacked&&ph(t)}_dataCheck(){const t=this.getDataset(),r=t.data||(t.data=[]),a=this._data;if(ft(r)){const n=this._cachedMeta;this._data=gX(r,n)}else if(a!==r){if(a){Yk(a,this);const n=this._cachedMeta;ph(n),n._parsed=[]}r&&Object.isExtensible(r)&&nK(r,this),this._syncList=[],this._data=r}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const r=this._cachedMeta,a=this.getDataset();let n=!1;this._dataCheck();const i=r._stacked;r._stacked=$y(r.vScale,r),r.stack!==a.stack&&(n=!0,ph(r),r.stack=a.stack),this._resyncElements(t),(n||i!==r._stacked)&&(uS(this,r._parsed),r._stacked=$y(r.vScale,r))}configure(){const t=this.chart.config,r=t.datasetScopeKeys(this._type),a=t.getOptionScopes(this.getDataset(),r,!0);this.options=t.createResolver(a,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,r){const{_cachedMeta:a,_data:n}=this,{iScale:i,_stacked:o}=a,c=i.axis;let u=t===0&&r===n.length?!0:a._sorted,h=t>0&&a._parsed[t-1],m,f,p;if(this._parsing===!1)a._parsed=n,a._sorted=!0,p=n;else{As(n[t])?p=this.parseArrayData(a,n,t,r):ft(n[t])?p=this.parseObjectData(a,n,t,r):p=this.parsePrimitiveData(a,n,t,r);const j=()=>f[c]===null||h&&f[c]<h[c];for(m=0;m<r;++m)a._parsed[m+t]=f=p[m],u&&(j()&&(u=!1),h=f);a._sorted=u}o&&uS(this,p)}parsePrimitiveData(t,r,a,n){const{iScale:i,vScale:o}=t,c=i.axis,u=o.axis,h=i.getLabels(),m=i===o,f=new Array(n);let p,j,g;for(p=0,j=n;p<j;++p)g=p+a,f[p]={[c]:m||i.parse(h[g],g),[u]:o.parse(r[g],g)};return f}parseArrayData(t,r,a,n){const{xScale:i,yScale:o}=t,c=new Array(n);let u,h,m,f;for(u=0,h=n;u<h;++u)m=u+a,f=r[m],c[u]={x:i.parse(f[0],m),y:o.parse(f[1],m)};return c}parseObjectData(t,r,a,n){const{xScale:i,yScale:o}=t,{xAxisKey:c="x",yAxisKey:u="y"}=this._parsing,h=new Array(n);let m,f,p,j;for(m=0,f=n;m<f;++m)p=m+a,j=r[p],h[m]={x:i.parse(Ho(j,c),p),y:o.parse(Ho(j,u),p)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,r,a){const n=this.chart,i=this._cachedMeta,o=r[t.axis],c={keys:TD(n,!0),values:r._stacks[t.axis]._visualValues};return cS(c,o,i.index,{mode:a})}updateRangeFromParsed(t,r,a,n){const i=a[r.axis];let o=i===null?NaN:i;const c=n&&a._stacks[r.axis];n&&c&&(n.values=c,o=cS(n,i,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,r){const a=this._cachedMeta,n=a._parsed,i=a._sorted&&t===a.iScale,o=n.length,c=this._getOtherScale(t),u=NX(r,a,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:m,max:f}=yX(c);let p,j;function g(){j=n[p];const v=j[c.axis];return!ur(j[t.axis])||m>v||f<v}for(p=0;p<o&&!(!g()&&(this.updateRangeFromParsed(h,t,j,u),i));++p);if(i){for(p=o-1;p>=0;--p)if(!g()){this.updateRangeFromParsed(h,t,j,u);break}}return h}getAllParsedValues(t){const r=this._cachedMeta._parsed,a=[];let n,i,o;for(n=0,i=r.length;n<i;++n)o=r[n][t.axis],ur(o)&&a.push(o);return a}getMaxOverflow(){return!1}getLabelAndValue(t){const r=this._cachedMeta,a=r.iScale,n=r.vScale,i=this.getParsed(t);return{label:a?""+a.getLabelForValue(i[a.axis]):"",value:n?""+n.getLabelForValue(i[n.axis]):""}}_update(t){const r=this._cachedMeta;this.update(t||"default"),r._clip=pX(lt(this.options.clip,fX(r.xScale,r.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,r=this.chart,a=this._cachedMeta,n=a.data||[],i=r.chartArea,o=[],c=this._drawStart||0,u=this._drawCount||n.length-c,h=this.options.drawActiveElementsOnTop;let m;for(a.dataset&&a.dataset.draw(t,i,c,u),m=c;m<c+u;++m){const f=n[m];f.hidden||(f.active&&h?o.push(f):f.draw(t,i))}for(m=0;m<o.length;++m)o[m].draw(t,i)}getStyle(t,r){const a=r?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(a):this.resolveDataElementOptions(t||0,a)}getContext(t,r,a){const n=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];i=o.$context||(o.$context=wX(this.getContext(),t,o)),i.parsed=this.getParsed(t),i.raw=n.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=jX(this.chart.getContext(),this.index)),i.dataset=n,i.index=i.datasetIndex=this.index;return i.active=!!r,i.mode=a,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,r){return this._resolveElementOptions(this.dataElementType.id,r,t)}_resolveElementOptions(t,r="default",a){const n=r==="active",i=this._cachedDataOpts,o=t+"-"+r,c=i[o],u=this.enableOptionSharing&&bm(a);if(c)return hS(c,u);const h=this.chart.config,m=h.datasetElementScopeKeys(this._type,t),f=n?[`${t}Hover`,"hover",t,""]:[t,""],p=h.getOptionScopes(this.getDataset(),m),j=Object.keys(gs.elements[t]),g=()=>this.getContext(a,n,r),v=h.resolveNamedOptions(p,j,g,f);return v.$shared&&(v.$shared=u,i[o]=Object.freeze(hS(v,u))),v}_resolveAnimations(t,r,a){const n=this.chart,i=this._cachedDataOpts,o=`animation-${r}`,c=i[o];if(c)return c;let u;if(n.options.animation!==!1){const m=this.chart.config,f=m.datasetAnimationScopeKeys(this._type,r),p=m.getOptionScopes(this.getDataset(),f);u=m.createResolver(p,this.getContext(t,a,r))}const h=new CD(n,u&&u.animations);return u&&u._cacheable&&(i[o]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,r){return!r||Vy(t)||this.chart._animationsDisabled}_getSharedOptions(t,r){const a=this.resolveDataElementOptions(t,r),n=this._sharedOptions,i=this.getSharedOptions(a),o=this.includeOptions(r,i)||i!==n;return this.updateSharedOptions(i,r,a),{sharedOptions:i,includeOptions:o}}updateElement(t,r,a,n){Vy(n)?Object.assign(t,a):this._resolveAnimations(r,n).update(t,a)}updateSharedOptions(t,r,a){t&&!Vy(r)&&this._resolveAnimations(void 0,r).update(t,a)}_setStyle(t,r,a,n){t.active=n;const i=this.getStyle(r,n);this._resolveAnimations(r,a,n).update(t,{options:!n&&this.getSharedOptions(i)||i})}removeHoverStyle(t,r,a){this._setStyle(t,a,"active",!1)}setHoverStyle(t,r,a){this._setStyle(t,a,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const r=this._data,a=this._cachedMeta.data;for(const[c,u,h]of this._syncList)this[c](u,h);this._syncList=[];const n=a.length,i=r.length,o=Math.min(i,n);o&&this.parse(0,o),i>n?this._insertElements(n,i-n,t):i<n&&this._removeElements(i,n-i)}_insertElements(t,r,a=!0){const n=this._cachedMeta,i=n.data,o=t+r;let c;const u=h=>{for(h.length+=r,c=h.length-1;c>=o;c--)h[c]=h[c-r]};for(u(i),c=t;c<o;++c)i[c]=new this.dataElementType;this._parsing&&u(n._parsed),this.parse(t,r),a&&this.updateElements(i,t,r,"reset")}updateElements(t,r,a,n){}_removeElements(t,r){const a=this._cachedMeta;if(this._parsing){const n=a._parsed.splice(t,r);a._stacked&&ph(a,n)}a.data.splice(t,r)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[r,a,n]=t;this[r](a,n)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,r){r&&this._sync(["_removeElements",t,r]);const a=arguments.length-2;a&&this._sync(["_insertElements",t,a])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function _X(s,t){if(!s._cache.$bar){const r=s.getMatchingVisibleMetas(t);let a=[];for(let n=0,i=r.length;n<i;n++)a=a.concat(r[n].controller.getAllParsedValues(s));s._cache.$bar=dD(a.sort((n,i)=>n-i))}return s._cache.$bar}function kX(s){const t=s.iScale,r=_X(t,s.type);let a=t._length,n,i,o,c;const u=()=>{o===32767||o===-32768||(bm(c)&&(a=Math.min(a,Math.abs(o-c)||a)),c=o)};for(n=0,i=r.length;n<i;++n)o=t.getPixelForValue(r[n]),u();for(c=void 0,n=0,i=t.ticks.length;n<i;++n)o=t.getPixelForTick(n),u();return a}function SX(s,t,r,a){const n=r.barThickness;let i,o;return St(n)?(i=t.min*r.categoryPercentage,o=r.barPercentage):(i=n*a,o=1),{chunk:i/a,ratio:o,start:t.pixels[s]-i/2}}function CX(s,t,r,a){const n=t.pixels,i=n[s];let o=s>0?n[s-1]:null,c=s<n.length-1?n[s+1]:null;const u=r.categoryPercentage;o===null&&(o=i-(c===null?t.end-t.start:c-i)),c===null&&(c=i+i-o);const h=i-(i-Math.min(o,c))/2*u;return{chunk:Math.abs(c-o)/2*u/a,ratio:r.barPercentage,start:h}}function TX(s,t,r,a){const n=r.parse(s[0],a),i=r.parse(s[1],a),o=Math.min(n,i),c=Math.max(n,i);let u=o,h=c;Math.abs(o)>Math.abs(c)&&(u=c,h=o),t[r.axis]=h,t._custom={barStart:u,barEnd:h,start:n,end:i,min:o,max:c}}function ED(s,t,r,a){return As(s)?TX(s,t,r,a):t[r.axis]=r.parse(s,a),t}function mS(s,t,r,a){const n=s.iScale,i=s.vScale,o=n.getLabels(),c=n===i,u=[];let h,m,f,p;for(h=r,m=r+a;h<m;++h)p=t[h],f={},f[n.axis]=c||n.parse(o[h],h),u.push(ED(p,f,i,h));return u}function Hy(s){return s&&s.barStart!==void 0&&s.barEnd!==void 0}function EX(s,t,r){return s!==0?bn(s):(t.isHorizontal()?1:-1)*(t.min>=r?1:-1)}function AX(s){let t,r,a,n,i;return s.horizontal?(t=s.base>s.x,r="left",a="right"):(t=s.base<s.y,r="bottom",a="top"),t?(n="end",i="start"):(n="start",i="end"),{start:r,end:a,reverse:t,top:n,bottom:i}}function DX(s,t,r,a){let n=t.borderSkipped;const i={};if(!n){s.borderSkipped=i;return}if(n===!0){s.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:c,reverse:u,top:h,bottom:m}=AX(s);n==="middle"&&r&&(s.enableBorderRadius=!0,(r._top||0)===a?n=h:(r._bottom||0)===a?n=m:(i[xS(m,o,c,u)]=!0,n=h)),i[xS(n,o,c,u)]=!0,s.borderSkipped=i}function xS(s,t,r,a){return a?(s=RX(s,t,r),s=fS(s,r,t)):s=fS(s,t,r),s}function RX(s,t,r){return s===t?r:s===r?t:s}function fS(s,t,r){return s==="start"?t:s==="end"?r:s}function MX(s,{inflateAmount:t},r){s.inflateAmount=t==="auto"?r===1?.33:0:t}class OX extends Dp{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,r,a,n){return mS(t,r,a,n)}parseArrayData(t,r,a,n){return mS(t,r,a,n)}parseObjectData(t,r,a,n){const{iScale:i,vScale:o}=t,{xAxisKey:c="x",yAxisKey:u="y"}=this._parsing,h=i.axis==="x"?c:u,m=o.axis==="x"?c:u,f=[];let p,j,g,v;for(p=a,j=a+n;p<j;++p)v=r[p],g={},g[i.axis]=i.parse(Ho(v,h),p),f.push(ED(Ho(v,m),g,o,p));return f}updateRangeFromParsed(t,r,a,n){super.updateRangeFromParsed(t,r,a,n);const i=a._custom;i&&r===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const r=this._cachedMeta,{iScale:a,vScale:n}=r,i=this.getParsed(t),o=i._custom,c=Hy(o)?"["+o.start+", "+o.end+"]":""+n.getLabelForValue(i[n.axis]);return{label:""+a.getLabelForValue(i[a.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,t)}updateElements(t,r,a,n){const i=n==="reset",{index:o,_cachedMeta:{vScale:c}}=this,u=c.getBasePixel(),h=c.isHorizontal(),m=this._getRuler(),{sharedOptions:f,includeOptions:p}=this._getSharedOptions(r,n);for(let j=r;j<r+a;j++){const g=this.getParsed(j),v=i||St(g[c.axis])?{base:u,head:u}:this._calculateBarValuePixels(j),y=this._calculateBarIndexPixels(j,m),N=(g._stacks||{})[c.axis],S={horizontal:h,base:v.base,enableBorderRadius:!N||Hy(g._custom)||o===N._top||o===N._bottom,x:h?v.head:y.center,y:h?y.center:v.head,height:h?y.size:Math.abs(v.size),width:h?Math.abs(v.size):y.size};p&&(S.options=f||this.resolveDataElementOptions(j,t[j].active?"active":n));const k=S.options||t[j].options;DX(S,k,N,o),MX(S,k,m.ratio),this.updateElement(t[j],j,S,n)}}_getStacks(t,r){const{iScale:a}=this._cachedMeta,n=a.getMatchingVisibleMetas(this._type).filter(m=>m.controller.options.grouped),i=a.options.stacked,o=[],c=this._cachedMeta.controller.getParsed(r),u=c&&c[a.axis],h=m=>{const f=m._parsed.find(j=>j[a.axis]===u),p=f&&f[m.vScale.axis];if(St(p)||isNaN(p))return!0};for(const m of n)if(!(r!==void 0&&h(m))&&((i===!1||o.indexOf(m.stack)===-1||i===void 0&&m.stack===void 0)&&o.push(m.stack),m.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,r=this.chart.options.indexAxis;return Object.keys(t).filter(a=>t[a].axis===r).shift()}_getAxis(){const t={},r=this.getFirstScaleIdForIndexAxis();for(const a of this.chart.data.datasets)t[lt(this.chart.options.indexAxis==="x"?a.xAxisID:a.yAxisID,r)]=!0;return Object.keys(t)}_getStackIndex(t,r,a){const n=this._getStacks(t,a),i=r!==void 0?n.indexOf(r):-1;return i===-1?n.length-1:i}_getRuler(){const t=this.options,r=this._cachedMeta,a=r.iScale,n=[];let i,o;for(i=0,o=r.data.length;i<o;++i)n.push(a.getPixelForValue(this.getParsed(i)[a.axis],i));const c=t.barThickness;return{min:c||kX(r),pixels:n,start:a._startPixel,end:a._endPixel,stackCount:this._getStackCount(),scale:a,grouped:t.grouped,ratio:c?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:r,_stacked:a,index:n},options:{base:i,minBarLength:o}}=this,c=i||0,u=this.getParsed(t),h=u._custom,m=Hy(h);let f=u[r.axis],p=0,j=a?this.applyStack(r,u,a):f,g,v;j!==f&&(p=j-f,j=f),m&&(f=h.barStart,j=h.barEnd-h.barStart,f!==0&&bn(f)!==bn(h.barEnd)&&(p=0),p+=f);const y=!St(i)&&!m?i:p;let N=r.getPixelForValue(y);if(this.chart.getDataVisibility(t)?g=r.getPixelForValue(p+j):g=N,v=g-N,Math.abs(v)<o){v=EX(v,r,c)*o,f===c&&(N-=v/2);const S=r.getPixelForDecimal(0),k=r.getPixelForDecimal(1),_=Math.min(S,k),T=Math.max(S,k);N=Math.max(Math.min(N,T),_),g=N+v,a&&!m&&(u._stacks[r.axis]._visualValues[n]=r.getValueForPixel(g)-r.getValueForPixel(N))}if(N===r.getPixelForValue(c)){const S=bn(v)*r.getLineWidthForValue(c)/2;N+=S,v-=S}return{size:v,base:N,head:g,center:g+v/2}}_calculateBarIndexPixels(t,r){const a=r.scale,n=this.options,i=n.skipNull,o=lt(n.maxBarThickness,1/0);let c,u;const h=this._getAxisCount();if(r.grouped){const m=i?this._getStackCount(t):r.stackCount,f=n.barThickness==="flex"?CX(t,r,n,m*h):SX(t,r,n,m*h),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,j=this._getAxis().indexOf(lt(p,this.getFirstScaleIdForIndexAxis())),g=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0)+j;c=f.start+f.chunk*g+f.chunk/2,u=Math.min(o,f.chunk*f.ratio)}else c=a.getPixelForValue(this.getParsed(t)[a.axis],t),u=Math.min(o,r.min*r.ratio);return{base:c-u/2,head:c+u/2,center:c,size:u}}draw(){const t=this._cachedMeta,r=t.vScale,a=t.data,n=a.length;let i=0;for(;i<n;++i)this.getParsed(i)[r.axis]!==null&&!a[i].hidden&&a[i].draw(this._ctx)}}function LX(s,t,r){let a=1,n=1,i=0,o=0;if(t<ts){const c=s,u=c+t,h=Math.cos(c),m=Math.sin(c),f=Math.cos(u),p=Math.sin(u),j=(k,_,T)=>vm(k,c,u,!0)?1:Math.max(_,_*r,T,T*r),g=(k,_,T)=>vm(k,c,u,!0)?-1:Math.min(_,_*r,T,T*r),v=j(0,h,f),y=j(Bs,m,p),N=g(At,h,f),S=g(At+Bs,m,p);a=(v-N)/2,n=(y-S)/2,i=-(v+N)/2,o=-(y+S)/2}return{ratioX:a,ratioY:n,offsetX:i,offsetY:o}}class PX extends Dp{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const r=t.data,{labels:{pointStyle:a,textAlign:n,color:i,useBorderRadius:o,borderRadius:c}}=t.legend.options;return r.labels.length&&r.datasets.length?r.labels.map((u,h)=>{const f=t.getDatasetMeta(0).controller.getStyle(h);return{text:u,fillStyle:f.backgroundColor,fontColor:i,hidden:!t.getDataVisibility(h),lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:f.borderWidth,strokeStyle:f.borderColor,textAlign:n,pointStyle:a,borderRadius:o&&(c||f.borderRadius),index:h}}):[]}},onClick(t,r,a){a.chart.toggleDataVisibility(r.index),a.chart.update()}}}};constructor(t,r){super(t,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,r){const a=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=a;else{let i=u=>+a[u];if(ft(a[t])){const{key:u="value"}=this._parsing;i=h=>+Ho(a[h],u)}let o,c;for(o=t,c=t+r;o<c;++o)n._parsed[o]=i(o)}}_getRotation(){return ui(this.options.rotation-90)}_getCircumference(){return ui(this.options.circumference)}_getRotationExtents(){let t=ts,r=-ts;for(let a=0;a<this.chart.data.datasets.length;++a)if(this.chart.isDatasetVisible(a)&&this.chart.getDatasetMeta(a).type===this._type){const n=this.chart.getDatasetMeta(a).controller,i=n._getRotation(),o=n._getCircumference();t=Math.min(t,i),r=Math.max(r,i+o)}return{rotation:t,circumference:r-t}}update(t){const r=this.chart,{chartArea:a}=r,n=this._cachedMeta,i=n.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,c=Math.max((Math.min(a.width,a.height)-o)/2,0),u=Math.min(UG(this.options.cutout,c),1),h=this._getRingWeight(this.index),{circumference:m,rotation:f}=this._getRotationExtents(),{ratioX:p,ratioY:j,offsetX:g,offsetY:v}=LX(f,m,u),y=(a.width-o)/p,N=(a.height-o)/j,S=Math.max(Math.min(y,N)/2,0),k=nD(this.options.radius,S),_=Math.max(k*u,0),T=(k-_)/this._getVisibleDatasetWeightTotal();this.offsetX=g*k,this.offsetY=v*k,n.total=this.calculateTotal(),this.outerRadius=k-T*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-T*h,0),this.updateElements(i,0,i.length,t)}_circumference(t,r){const a=this.options,n=this._cachedMeta,i=this._getCircumference();return r&&a.animation.animateRotate||!this.chart.getDataVisibility(t)||n._parsed[t]===null||n.data[t].hidden?0:this.calculateCircumference(n._parsed[t]*i/ts)}updateElements(t,r,a,n){const i=n==="reset",o=this.chart,c=o.chartArea,h=o.options.animation,m=(c.left+c.right)/2,f=(c.top+c.bottom)/2,p=i&&h.animateScale,j=p?0:this.innerRadius,g=p?0:this.outerRadius,{sharedOptions:v,includeOptions:y}=this._getSharedOptions(r,n);let N=this._getRotation(),S;for(S=0;S<r;++S)N+=this._circumference(S,i);for(S=r;S<r+a;++S){const k=this._circumference(S,i),_=t[S],T={x:m+this.offsetX,y:f+this.offsetY,startAngle:N,endAngle:N+k,circumference:k,outerRadius:g,innerRadius:j};y&&(T.options=v||this.resolveDataElementOptions(S,_.active?"active":n)),N+=k,this.updateElement(_,S,T,n)}}calculateTotal(){const t=this._cachedMeta,r=t.data;let a=0,n;for(n=0;n<r.length;n++){const i=t._parsed[n];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(n)&&!r[n].hidden&&(a+=Math.abs(i))}return a}calculateCircumference(t){const r=this._cachedMeta.total;return r>0&&!isNaN(t)?ts*(Math.abs(t)/r):0}getLabelAndValue(t){const r=this._cachedMeta,a=this.chart,n=a.data.labels||[],i=w1(r._parsed[t],a.options.locale);return{label:n[t]||"",value:i}}getMaxBorderWidth(t){let r=0;const a=this.chart;let n,i,o,c,u;if(!t){for(n=0,i=a.data.datasets.length;n<i;++n)if(a.isDatasetVisible(n)){o=a.getDatasetMeta(n),t=o.data,c=o.controller;break}}if(!t)return 0;for(n=0,i=t.length;n<i;++n)u=c.resolveDataElementOptions(n),u.borderAlign!=="inner"&&(r=Math.max(r,u.borderWidth||0,u.hoverBorderWidth||0));return r}getMaxOffset(t){let r=0;for(let a=0,n=t.length;a<n;++a){const i=this.resolveDataElementOptions(a);r=Math.max(r,i.offset||0,i.hoverOffset||0)}return r}_getRingWeightOffset(t){let r=0;for(let a=0;a<t;++a)this.chart.isDatasetVisible(a)&&(r+=this._getRingWeight(a));return r}_getRingWeight(t){return Math.max(lt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class BX extends Dp{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const r=this._cachedMeta,{dataset:a,data:n=[],_dataset:i}=r,o=this.chart._animationsDisabled;let{start:c,count:u}=oK(r,n,o);this._drawStart=c,this._drawCount=u,cK(r)&&(c=0,u=n.length),a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!i._decimated,a.points=n;const h=this.resolveDatasetElementOptions(t);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(a,void 0,{animated:!o,options:h},t),this.updateElements(n,c,u,t)}updateElements(t,r,a,n){const i=n==="reset",{iScale:o,vScale:c,_stacked:u,_dataset:h}=this._cachedMeta,{sharedOptions:m,includeOptions:f}=this._getSharedOptions(r,n),p=o.axis,j=c.axis,{spanGaps:g,segment:v}=this.options,y=ym(g)?g:Number.POSITIVE_INFINITY,N=this.chart._animationsDisabled||i||n==="none",S=r+a,k=t.length;let _=r>0&&this.getParsed(r-1);for(let T=0;T<k;++T){const E=t[T],z=N?E:{};if(T<r||T>=S){z.skip=!0;continue}const M=this.getParsed(T),C=St(M[j]),A=z[p]=o.getPixelForValue(M[p],T),Z=z[j]=i||C?c.getBasePixel():c.getPixelForValue(u?this.applyStack(c,M,u):M[j],T);z.skip=isNaN(A)||isNaN(Z)||C,z.stop=T>0&&Math.abs(M[p]-_[p])>y,v&&(z.parsed=M,z.raw=h.data[T]),f&&(z.options=m||this.resolveDataElementOptions(T,E.active?"active":n)),N||this.updateElement(E,T,z,n),_=M}}getMaxOverflow(){const t=this._cachedMeta,r=t.dataset,a=r.options&&r.options.borderWidth||0,n=t.data||[];if(!n.length)return a;const i=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(a,i,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}function fo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class E1{static override(t){Object.assign(E1.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return fo()}parse(){return fo()}format(){return fo()}add(){return fo()}diff(){return fo()}startOf(){return fo()}endOf(){return fo()}}var FX={_date:E1};function zX(s,t,r,a){const{controller:n,data:i,_sorted:o}=s,c=n._cachedMeta.iScale,u=s.dataset&&s.dataset.options?s.dataset.options.spanGaps:null;if(c&&t===c.axis&&t!=="r"&&o&&i.length){const h=c._reversePixels?rK:Eo;if(a){if(n._sharedOptions){const m=i[0],f=typeof m.getRange=="function"&&m.getRange(t);if(f){const p=h(i,t,r-f),j=h(i,t,r+f);return{lo:p.lo,hi:j.hi}}}}else{const m=h(i,t,r);if(u){const{vScale:f}=n._cachedMeta,{_parsed:p}=s,j=p.slice(0,m.lo+1).reverse().findIndex(v=>!St(v[f.axis]));m.lo-=Math.max(0,j);const g=p.slice(m.hi).findIndex(v=>!St(v[f.axis]));m.hi+=Math.max(0,g)}return m}}return{lo:0,hi:i.length-1}}function Rp(s,t,r,a,n){const i=s.getSortedVisibleDatasetMetas(),o=r[t];for(let c=0,u=i.length;c<u;++c){const{index:h,data:m}=i[c],{lo:f,hi:p}=zX(i[c],t,o,n);for(let j=f;j<=p;++j){const g=m[j];g.skip||a(g,h,j)}}}function IX(s){const t=s.indexOf("x")!==-1,r=s.indexOf("y")!==-1;return function(a,n){const i=t?Math.abs(a.x-n.x):0,o=r?Math.abs(a.y-n.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function qy(s,t,r,a,n){const i=[];return!n&&!s.isPointInArea(t)||Rp(s,r,t,function(c,u,h){!n&&!jm(c,s.chartArea,0)||c.inRange(t.x,t.y,a)&&i.push({element:c,datasetIndex:u,index:h})},!0),i}function $X(s,t,r,a){let n=[];function i(o,c,u){const{startAngle:h,endAngle:m}=o.getProps(["startAngle","endAngle"],a),{angle:f}=oD(o,{x:t.x,y:t.y});vm(f,h,m)&&n.push({element:o,datasetIndex:c,index:u})}return Rp(s,r,t,i),n}function UX(s,t,r,a,n,i){let o=[];const c=IX(r);let u=Number.POSITIVE_INFINITY;function h(m,f,p){const j=m.inRange(t.x,t.y,n);if(a&&!j)return;const g=m.getCenterPoint(n);if(!(!!i||s.isPointInArea(g))&&!j)return;const y=c(t,g);y<u?(o=[{element:m,datasetIndex:f,index:p}],u=y):y===u&&o.push({element:m,datasetIndex:f,index:p})}return Rp(s,r,t,h),o}function Wy(s,t,r,a,n,i){return!i&&!s.isPointInArea(t)?[]:r==="r"&&!a?$X(s,t,r,n):UX(s,t,r,a,n,i)}function pS(s,t,r,a,n){const i=[],o=r==="x"?"inXRange":"inYRange";let c=!1;return Rp(s,r,t,(u,h,m)=>{u[o]&&u[o](t[r],n)&&(i.push({element:u,datasetIndex:h,index:m}),c=c||u.inRange(t.x,t.y,n))}),a&&!c?[]:i}var VX={modes:{index(s,t,r,a){const n=No(t,s),i=r.axis||"x",o=r.includeInvisible||!1,c=r.intersect?qy(s,n,i,a,o):Wy(s,n,i,!1,a,o),u=[];return c.length?(s.getSortedVisibleDatasetMetas().forEach(h=>{const m=c[0].index,f=h.data[m];f&&!f.skip&&u.push({element:f,datasetIndex:h.index,index:m})}),u):[]},dataset(s,t,r,a){const n=No(t,s),i=r.axis||"xy",o=r.includeInvisible||!1;let c=r.intersect?qy(s,n,i,a,o):Wy(s,n,i,!1,a,o);if(c.length>0){const u=c[0].datasetIndex,h=s.getDatasetMeta(u).data;c=[];for(let m=0;m<h.length;++m)c.push({element:h[m],datasetIndex:u,index:m})}return c},point(s,t,r,a){const n=No(t,s),i=r.axis||"xy",o=r.includeInvisible||!1;return qy(s,n,i,a,o)},nearest(s,t,r,a){const n=No(t,s),i=r.axis||"xy",o=r.includeInvisible||!1;return Wy(s,n,i,r.intersect,a,o)},x(s,t,r,a){const n=No(t,s);return pS(s,n,"x",r.intersect,a)},y(s,t,r,a){const n=No(t,s);return pS(s,n,"y",r.intersect,a)}}};const AD=["left","top","right","bottom"];function gh(s,t){return s.filter(r=>r.pos===t)}function gS(s,t){return s.filter(r=>AD.indexOf(r.pos)===-1&&r.box.axis===t)}function bh(s,t){return s.sort((r,a)=>{const n=t?a:r,i=t?r:a;return n.weight===i.weight?n.index-i.index:n.weight-i.weight})}function HX(s){const t=[];let r,a,n,i,o,c;for(r=0,a=(s||[]).length;r<a;++r)n=s[r],{position:i,options:{stack:o,stackWeight:c=1}}=n,t.push({index:r,box:n,pos:i,horizontal:n.isHorizontal(),weight:n.weight,stack:o&&i+o,stackWeight:c});return t}function qX(s){const t={};for(const r of s){const{stack:a,pos:n,stackWeight:i}=r;if(!a||!AD.includes(n))continue;const o=t[a]||(t[a]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return t}function WX(s,t){const r=qX(s),{vBoxMaxWidth:a,hBoxMaxHeight:n}=t;let i,o,c;for(i=0,o=s.length;i<o;++i){c=s[i];const{fullSize:u}=c.box,h=r[c.stack],m=h&&c.stackWeight/h.weight;c.horizontal?(c.width=m?m*a:u&&t.availableWidth,c.height=n):(c.width=a,c.height=m?m*n:u&&t.availableHeight)}return r}function YX(s){const t=HX(s),r=bh(t.filter(h=>h.box.fullSize),!0),a=bh(gh(t,"left"),!0),n=bh(gh(t,"right")),i=bh(gh(t,"top"),!0),o=bh(gh(t,"bottom")),c=gS(t,"x"),u=gS(t,"y");return{fullSize:r,leftAndTop:a.concat(i),rightAndBottom:n.concat(u).concat(o).concat(c),chartArea:gh(t,"chartArea"),vertical:a.concat(n).concat(u),horizontal:i.concat(o).concat(c)}}function bS(s,t,r,a){return Math.max(s[r],t[r])+Math.max(s[a],t[a])}function DD(s,t){s.top=Math.max(s.top,t.top),s.left=Math.max(s.left,t.left),s.bottom=Math.max(s.bottom,t.bottom),s.right=Math.max(s.right,t.right)}function GX(s,t,r,a){const{pos:n,box:i}=r,o=s.maxPadding;if(!ft(n)){r.size&&(s[n]-=r.size);const f=a[r.stack]||{size:0,count:1};f.size=Math.max(f.size,r.horizontal?i.height:i.width),r.size=f.size/f.count,s[n]+=r.size}i.getPadding&&DD(o,i.getPadding());const c=Math.max(0,t.outerWidth-bS(o,s,"left","right")),u=Math.max(0,t.outerHeight-bS(o,s,"top","bottom")),h=c!==s.w,m=u!==s.h;return s.w=c,s.h=u,r.horizontal?{same:h,other:m}:{same:m,other:h}}function KX(s){const t=s.maxPadding;function r(a){const n=Math.max(t[a]-s[a],0);return s[a]+=n,n}s.y+=r("top"),s.x+=r("left"),r("right"),r("bottom")}function XX(s,t){const r=t.maxPadding;function a(n){const i={left:0,top:0,right:0,bottom:0};return n.forEach(o=>{i[o]=Math.max(t[o],r[o])}),i}return a(s?["left","right"]:["top","bottom"])}function Mh(s,t,r,a){const n=[];let i,o,c,u,h,m;for(i=0,o=s.length,h=0;i<o;++i){c=s[i],u=c.box,u.update(c.width||t.w,c.height||t.h,XX(c.horizontal,t));const{same:f,other:p}=GX(t,r,c,a);h|=f&&n.length,m=m||p,u.fullSize||n.push(c)}return h&&Mh(n,t,r,a)||m}function J0(s,t,r,a,n){s.top=r,s.left=t,s.right=t+a,s.bottom=r+n,s.width=a,s.height=n}function yS(s,t,r,a){const n=r.padding;let{x:i,y:o}=t;for(const c of s){const u=c.box,h=a[c.stack]||{placed:0,weight:1},m=c.stackWeight/h.weight||1;if(c.horizontal){const f=t.w*m,p=h.size||u.height;bm(h.start)&&(o=h.start),u.fullSize?J0(u,n.left,o,r.outerWidth-n.right-n.left,p):J0(u,t.left+h.placed,o,f,p),h.start=o,h.placed+=f,o=u.bottom}else{const f=t.h*m,p=h.size||u.width;bm(h.start)&&(i=h.start),u.fullSize?J0(u,i,n.top,p,r.outerHeight-n.bottom-n.top):J0(u,i,t.top+h.placed,p,f),h.start=i,h.placed+=f,i=u.right}}t.x=i,t.y=o}var wa={addBox(s,t){s.boxes||(s.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(r){t.draw(r)}}]},s.boxes.push(t)},removeBox(s,t){const r=s.boxes?s.boxes.indexOf(t):-1;r!==-1&&s.boxes.splice(r,1)},configure(s,t,r){t.fullSize=r.fullSize,t.position=r.position,t.weight=r.weight},update(s,t,r,a){if(!s)return;const n=Ca(s.options.layout.padding),i=Math.max(t-n.width,0),o=Math.max(r-n.height,0),c=YX(s.boxes),u=c.vertical,h=c.horizontal;Et(s.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const m=u.reduce((v,y)=>y.box.options&&y.box.options.display===!1?v:v+1,0)||1,f=Object.freeze({outerWidth:t,outerHeight:r,padding:n,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/m,hBoxMaxHeight:o/2}),p=Object.assign({},n);DD(p,Ca(a));const j=Object.assign({maxPadding:p,w:i,h:o,x:n.left,y:n.top},n),g=WX(u.concat(h),f);Mh(c.fullSize,j,f,g),Mh(u,j,f,g),Mh(h,j,f,g)&&Mh(u,j,f,g),KX(j),yS(c.leftAndTop,j,f,g),j.x+=j.w,j.y+=j.h,yS(c.rightAndBottom,j,f,g),s.chartArea={left:j.left,top:j.top,right:j.left+j.w,bottom:j.top+j.h,height:j.h,width:j.w},Et(c.chartArea,v=>{const y=v.box;Object.assign(y,s.chartArea),y.update(j.w,j.h,{left:0,top:0,right:0,bottom:0})})}};class RD{acquireContext(t,r){}releaseContext(t){return!1}addEventListener(t,r,a){}removeEventListener(t,r,a){}getDevicePixelRatio(){return 1}getMaximumSize(t,r,a,n){return r=Math.max(0,r||t.width),a=a||t.height,{width:r,height:Math.max(0,n?Math.floor(r/n):a)}}isAttached(t){return!0}updateConfig(t){}}class ZX extends RD{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Lf="$chartjs",QX={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},vS=s=>s===null||s==="";function JX(s,t){const r=s.style,a=s.getAttribute("height"),n=s.getAttribute("width");if(s[Lf]={initial:{height:a,width:n,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",vS(n)){const i=rS(s,"width");i!==void 0&&(s.width=i)}if(vS(a))if(s.style.height==="")s.height=s.width/(t||2);else{const i=rS(s,"height");i!==void 0&&(s.height=i)}return s}const MD=QK?{passive:!0}:!1;function eZ(s,t,r){s&&s.addEventListener(t,r,MD)}function tZ(s,t,r){s&&s.canvas&&s.canvas.removeEventListener(t,r,MD)}function sZ(s,t){const r=QX[s.type]||s.type,{x:a,y:n}=No(s,t);return{type:r,chart:t,native:s,x:a!==void 0?a:null,y:n!==void 0?n:null}}function lp(s,t){for(const r of s)if(r===t||r.contains(t))return!0}function rZ(s,t,r){const a=s.canvas,n=new MutationObserver(i=>{let o=!1;for(const c of i)o=o||lp(c.addedNodes,a),o=o&&!lp(c.removedNodes,a);o&&r()});return n.observe(document,{childList:!0,subtree:!0}),n}function aZ(s,t,r){const a=s.canvas,n=new MutationObserver(i=>{let o=!1;for(const c of i)o=o||lp(c.removedNodes,a),o=o&&!lp(c.addedNodes,a);o&&r()});return n.observe(document,{childList:!0,subtree:!0}),n}const Nm=new Map;let jS=0;function OD(){const s=window.devicePixelRatio;s!==jS&&(jS=s,Nm.forEach((t,r)=>{r.currentDevicePixelRatio!==s&&t()}))}function nZ(s,t){Nm.size||window.addEventListener("resize",OD),Nm.set(s,t)}function iZ(s){Nm.delete(s),Nm.size||window.removeEventListener("resize",OD)}function lZ(s,t,r){const a=s.canvas,n=a&&T1(a);if(!n)return;const i=hD((c,u)=>{const h=n.clientWidth;r(c,u),h<n.clientWidth&&r()},window),o=new ResizeObserver(c=>{const u=c[0],h=u.contentRect.width,m=u.contentRect.height;h===0&&m===0||i(h,m)});return o.observe(n),nZ(s,i),o}function Yy(s,t,r){r&&r.disconnect(),t==="resize"&&iZ(s)}function oZ(s,t,r){const a=s.canvas,n=hD(i=>{s.ctx!==null&&r(sZ(i,s))},s);return eZ(a,t,n),n}class cZ extends RD{acquireContext(t,r){const a=t&&t.getContext&&t.getContext("2d");return a&&a.canvas===t?(JX(t,r),a):null}releaseContext(t){const r=t.canvas;if(!r[Lf])return!1;const a=r[Lf].initial;["height","width"].forEach(i=>{const o=a[i];St(o)?r.removeAttribute(i):r.setAttribute(i,o)});const n=a.style||{};return Object.keys(n).forEach(i=>{r.style[i]=n[i]}),r.width=r.width,delete r[Lf],!0}addEventListener(t,r,a){this.removeEventListener(t,r);const n=t.$proxies||(t.$proxies={}),o={attach:rZ,detach:aZ,resize:lZ}[r]||oZ;n[r]=o(t,r,a)}removeEventListener(t,r){const a=t.$proxies||(t.$proxies={}),n=a[r];if(!n)return;({attach:Yy,detach:Yy,resize:Yy}[r]||tZ)(t,r,n),a[r]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,r,a,n){return ZK(t,r,a,n)}isAttached(t){const r=t&&T1(t);return!!(r&&r.isConnected)}}function dZ(s){return!C1()||typeof OffscreenCanvas<"u"&&s instanceof OffscreenCanvas?ZX:cZ}let ki=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:r,y:a}=this.getProps(["x","y"],t);return{x:r,y:a}}hasValue(){return ym(this.x)&&ym(this.y)}getProps(t,r){const a=this.$animations;if(!r||!a)return this;const n={};return t.forEach(i=>{n[i]=a[i]&&a[i].active()?a[i]._to:this[i]}),n}};function uZ(s,t){const r=s.options.ticks,a=hZ(s),n=Math.min(r.maxTicksLimit||a,a),i=r.major.enabled?xZ(t):[],o=i.length,c=i[0],u=i[o-1],h=[];if(o>n)return fZ(t,h,i,o/n),h;const m=mZ(i,t,n);if(o>0){let f,p;const j=o>1?Math.round((u-c)/(o-1)):null;for(ef(t,h,m,St(j)?0:c-j,c),f=0,p=o-1;f<p;f++)ef(t,h,m,i[f],i[f+1]);return ef(t,h,m,u,St(j)?t.length:u+j),h}return ef(t,h,m),h}function hZ(s){const t=s.options.offset,r=s._tickSize(),a=s._length/r+(t?0:1),n=s._maxLength/r;return Math.floor(Math.min(a,n))}function mZ(s,t,r){const a=pZ(s),n=t.length/r;if(!a)return Math.max(n,1);const i=XG(a);for(let o=0,c=i.length-1;o<c;o++){const u=i[o];if(u>n)return u}return Math.max(n,1)}function xZ(s){const t=[];let r,a;for(r=0,a=s.length;r<a;r++)s[r].major&&t.push(r);return t}function fZ(s,t,r,a){let n=0,i=r[0],o;for(a=Math.ceil(a),o=0;o<s.length;o++)o===i&&(t.push(s[o]),n++,i=r[n*a])}function ef(s,t,r,a,n){const i=lt(a,0),o=Math.min(lt(n,s.length),s.length);let c=0,u,h,m;for(r=Math.ceil(r),n&&(u=n-a,r=u/Math.floor(u/r)),m=i;m<0;)c++,m=Math.round(i+c*r);for(h=Math.max(i,0);h<o;h++)h===m&&(t.push(s[h]),c++,m=Math.round(i+c*r))}function pZ(s){const t=s.length;let r,a;if(t<2)return!1;for(a=s[0],r=1;r<t;++r)if(s[r]-s[r-1]!==a)return!1;return a}const gZ=s=>s==="left"?"right":s==="right"?"left":s,wS=(s,t,r)=>t==="top"||t==="left"?s[t]+r:s[t]-r,NS=(s,t)=>Math.min(t||s,s);function _S(s,t){const r=[],a=s.length/t,n=s.length;let i=0;for(;i<n;i+=a)r.push(s[Math.floor(i)]);return r}function bZ(s,t,r){const a=s.ticks.length,n=Math.min(t,a-1),i=s._startPixel,o=s._endPixel,c=1e-6;let u=s.getPixelForTick(n),h;if(!(r&&(a===1?h=Math.max(u-i,o-u):t===0?h=(s.getPixelForTick(1)-u)/2:h=(u-s.getPixelForTick(n-1))/2,u+=n<t?h:-h,u<i-c||u>o+c)))return u}function yZ(s,t){Et(s,r=>{const a=r.gc,n=a.length/2;let i;if(n>t){for(i=0;i<n;++i)delete r.data[a[i]];a.splice(0,n)}})}function yh(s){return s.drawTicks?s.tickLength:0}function kS(s,t){if(!s.display)return 0;const r=cr(s.font,t),a=Ca(s.padding);return(As(s.text)?s.text.length:1)*r.lineHeight+a.height}function vZ(s,t){return Go(s,{scale:t,type:"scale"})}function jZ(s,t,r){return Go(s,{tick:r,index:t,type:"tick"})}function wZ(s,t,r){let a=v1(s);return(r&&t!=="right"||!r&&t==="right")&&(a=gZ(a)),a}function NZ(s,t,r,a){const{top:n,left:i,bottom:o,right:c,chart:u}=s,{chartArea:h,scales:m}=u;let f=0,p,j,g;const v=o-n,y=c-i;if(s.isHorizontal()){if(j=tr(a,i,c),ft(r)){const N=Object.keys(r)[0],S=r[N];g=m[N].getPixelForValue(S)+v-t}else r==="center"?g=(h.bottom+h.top)/2+v-t:g=wS(s,r,t);p=c-i}else{if(ft(r)){const N=Object.keys(r)[0],S=r[N];j=m[N].getPixelForValue(S)-y+t}else r==="center"?j=(h.left+h.right)/2-y+t:j=wS(s,r,t);g=tr(a,o,n),f=r==="left"?-Bs:Bs}return{titleX:j,titleY:g,maxWidth:p,rotation:f}}class zd extends ki{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,r){return t}getUserBounds(){let{_userMin:t,_userMax:r,_suggestedMin:a,_suggestedMax:n}=this;return t=rn(t,Number.POSITIVE_INFINITY),r=rn(r,Number.NEGATIVE_INFINITY),a=rn(a,Number.POSITIVE_INFINITY),n=rn(n,Number.NEGATIVE_INFINITY),{min:rn(t,a),max:rn(r,n),minDefined:ur(t),maxDefined:ur(r)}}getMinMax(t){let{min:r,max:a,minDefined:n,maxDefined:i}=this.getUserBounds(),o;if(n&&i)return{min:r,max:a};const c=this.getMatchingVisibleMetas();for(let u=0,h=c.length;u<h;++u)o=c[u].controller.getMinMax(this,t),n||(r=Math.min(r,o.min)),i||(a=Math.max(a,o.max));return r=i&&r>a?a:r,a=n&&r>a?r:a,{min:rn(r,rn(a,r)),max:rn(a,rn(r,a))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Wt(this.options.beforeUpdate,[this])}update(t,r,a){const{beginAtZero:n,grace:i,ticks:o}=this.options,c=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=r,this._margins=a=Object.assign({left:0,right:0,top:0,bottom:0},a),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+a.left+a.right:this.height+a.top+a.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=EK(this,i,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const u=c<this.ticks.length;this._convertTicksToLabels(u?_S(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=uZ(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,r,a;this.isHorizontal()?(r=this.left,a=this.right):(r=this.top,a=this.bottom,t=!t),this._startPixel=r,this._endPixel=a,this._reversePixels=t,this._length=a-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Wt(this.options.afterUpdate,[this])}beforeSetDimensions(){Wt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Wt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Wt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Wt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const r=this.options.ticks;let a,n,i;for(a=0,n=t.length;a<n;a++)i=t[a],i.label=Wt(r.callback,[i.value,a,t],this)}afterTickToLabelConversion(){Wt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Wt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,r=t.ticks,a=NS(this.ticks.length,t.ticks.maxTicksLimit),n=r.minRotation||0,i=r.maxRotation;let o=n,c,u,h;if(!this._isVisible()||!r.display||n>=i||a<=1||!this.isHorizontal()){this.labelRotation=n;return}const m=this._getLabelSizes(),f=m.widest.width,p=m.highest.height,j=or(this.chart.width-f,0,this.maxWidth);c=t.offset?this.maxWidth/a:j/(a-1),f+6>c&&(c=j/(a-(t.offset?.5:1)),u=this.maxHeight-yh(t.grid)-r.padding-kS(t.title,this.chart.options.font),h=Math.sqrt(f*f+p*p),o=eK(Math.min(Math.asin(or((m.highest.height+6)/c,-1,1)),Math.asin(or(u/h,-1,1))-Math.asin(or(p/h,-1,1)))),o=Math.max(n,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){Wt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Wt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:r,options:{ticks:a,title:n,grid:i}}=this,o=this._isVisible(),c=this.isHorizontal();if(o){const u=kS(n,r.options.font);if(c?(t.width=this.maxWidth,t.height=yh(i)+u):(t.height=this.maxHeight,t.width=yh(i)+u),a.display&&this.ticks.length){const{first:h,last:m,widest:f,highest:p}=this._getLabelSizes(),j=a.padding*2,g=ui(this.labelRotation),v=Math.cos(g),y=Math.sin(g);if(c){const N=a.mirror?0:y*f.width+v*p.height;t.height=Math.min(this.maxHeight,t.height+N+j)}else{const N=a.mirror?0:v*f.width+y*p.height;t.width=Math.min(this.maxWidth,t.width+N+j)}this._calculatePadding(h,m,y,v)}}this._handleMargins(),c?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,r,a,n){const{ticks:{align:i,padding:o},position:c}=this.options,u=this.labelRotation!==0,h=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const m=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,j=0;u?h?(p=n*t.width,j=a*r.height):(p=a*t.height,j=n*r.width):i==="start"?j=r.width:i==="end"?p=t.width:i!=="inner"&&(p=t.width/2,j=r.width/2),this.paddingLeft=Math.max((p-m+o)*this.width/(this.width-m),0),this.paddingRight=Math.max((j-f+o)*this.width/(this.width-f),0)}else{let m=r.height/2,f=t.height/2;i==="start"?(m=0,f=t.height):i==="end"&&(m=r.height,f=0),this.paddingTop=m+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Wt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:r}=this.options;return r==="top"||r==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let r,a;for(r=0,a=t.length;r<a;r++)St(t[r].label)&&(t.splice(r,1),a--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const r=this.options.ticks.sampleSize;let a=this.ticks;r<a.length&&(a=_S(a,r)),this._labelSizes=t=this._computeLabelSizes(a,a.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,r,a){const{ctx:n,_longestTextCache:i}=this,o=[],c=[],u=Math.floor(r/NS(r,a));let h=0,m=0,f,p,j,g,v,y,N,S,k,_,T;for(f=0;f<r;f+=u){if(g=t[f].label,v=this._resolveTickFontOptions(f),n.font=y=v.string,N=i[y]=i[y]||{data:{},gc:[]},S=v.lineHeight,k=_=0,!St(g)&&!As(g))k=Qk(n,N.data,N.gc,k,g),_=S;else if(As(g))for(p=0,j=g.length;p<j;++p)T=g[p],!St(T)&&!As(T)&&(k=Qk(n,N.data,N.gc,k,T),_+=S);o.push(k),c.push(_),h=Math.max(k,h),m=Math.max(_,m)}yZ(i,r);const E=o.indexOf(h),z=c.indexOf(m),M=C=>({width:o[C]||0,height:c[C]||0});return{first:M(0),last:M(r-1),widest:M(E),highest:M(z),widths:o,heights:c}}getLabelForValue(t){return t}getPixelForValue(t,r){return NaN}getValueForPixel(t){}getPixelForTick(t){const r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const r=this._startPixel+t*this._length;return sK(this._alignToPixels?xo(this.chart,r,0):r)}getDecimalForPixel(t){const r=(t-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:r}=this;return t<0&&r<0?r:t>0&&r>0?t:0}getContext(t){const r=this.ticks||[];if(t>=0&&t<r.length){const a=r[t];return a.$context||(a.$context=jZ(this.getContext(),t,a))}return this.$context||(this.$context=vZ(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,r=ui(this.labelRotation),a=Math.abs(Math.cos(r)),n=Math.abs(Math.sin(r)),i=this._getLabelSizes(),o=t.autoSkipPadding||0,c=i?i.widest.width+o:0,u=i?i.highest.height+o:0;return this.isHorizontal()?u*a>c*n?c/a:u/n:u*n<c*a?u/a:c/n}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const r=this.axis,a=this.chart,n=this.options,{grid:i,position:o,border:c}=n,u=i.offset,h=this.isHorizontal(),f=this.ticks.length+(u?1:0),p=yh(i),j=[],g=c.setContext(this.getContext()),v=g.display?g.width:0,y=v/2,N=function(J){return xo(a,J,v)};let S,k,_,T,E,z,M,C,A,Z,I,V;if(o==="top")S=N(this.bottom),z=this.bottom-p,C=S-y,Z=N(t.top)+y,V=t.bottom;else if(o==="bottom")S=N(this.top),Z=t.top,V=N(t.bottom)-y,z=S+y,C=this.top+p;else if(o==="left")S=N(this.right),E=this.right-p,M=S-y,A=N(t.left)+y,I=t.right;else if(o==="right")S=N(this.left),A=t.left,I=N(t.right)-y,E=S+y,M=this.left+p;else if(r==="x"){if(o==="center")S=N((t.top+t.bottom)/2+.5);else if(ft(o)){const J=Object.keys(o)[0],se=o[J];S=N(this.chart.scales[J].getPixelForValue(se))}Z=t.top,V=t.bottom,z=S+y,C=z+p}else if(r==="y"){if(o==="center")S=N((t.left+t.right)/2);else if(ft(o)){const J=Object.keys(o)[0],se=o[J];S=N(this.chart.scales[J].getPixelForValue(se))}E=S-y,M=E-p,A=t.left,I=t.right}const R=lt(n.ticks.maxTicksLimit,f),q=Math.max(1,Math.ceil(f/R));for(k=0;k<f;k+=q){const J=this.getContext(k),se=i.setContext(J),Y=c.setContext(J),ee=se.lineWidth,te=se.color,K=Y.dash||[],$=Y.dashOffset,le=se.tickWidth,ie=se.tickColor,oe=se.tickBorderDash||[],de=se.tickBorderDashOffset;_=bZ(this,k,u),_!==void 0&&(T=xo(a,_,ee),h?E=M=A=I=T:z=C=Z=V=T,j.push({tx1:E,ty1:z,tx2:M,ty2:C,x1:A,y1:Z,x2:I,y2:V,width:ee,color:te,borderDash:K,borderDashOffset:$,tickWidth:le,tickColor:ie,tickBorderDash:oe,tickBorderDashOffset:de}))}return this._ticksLength=f,this._borderValue=S,j}_computeLabelItems(t){const r=this.axis,a=this.options,{position:n,ticks:i}=a,o=this.isHorizontal(),c=this.ticks,{align:u,crossAlign:h,padding:m,mirror:f}=i,p=yh(a.grid),j=p+m,g=f?-m:j,v=-ui(this.labelRotation),y=[];let N,S,k,_,T,E,z,M,C,A,Z,I,V="middle";if(n==="top")E=this.bottom-g,z=this._getXAxisLabelAlignment();else if(n==="bottom")E=this.top+g,z=this._getXAxisLabelAlignment();else if(n==="left"){const q=this._getYAxisLabelAlignment(p);z=q.textAlign,T=q.x}else if(n==="right"){const q=this._getYAxisLabelAlignment(p);z=q.textAlign,T=q.x}else if(r==="x"){if(n==="center")E=(t.top+t.bottom)/2+j;else if(ft(n)){const q=Object.keys(n)[0],J=n[q];E=this.chart.scales[q].getPixelForValue(J)+j}z=this._getXAxisLabelAlignment()}else if(r==="y"){if(n==="center")T=(t.left+t.right)/2-j;else if(ft(n)){const q=Object.keys(n)[0],J=n[q];T=this.chart.scales[q].getPixelForValue(J)}z=this._getYAxisLabelAlignment(p).textAlign}r==="y"&&(u==="start"?V="top":u==="end"&&(V="bottom"));const R=this._getLabelSizes();for(N=0,S=c.length;N<S;++N){k=c[N],_=k.label;const q=i.setContext(this.getContext(N));M=this.getPixelForTick(N)+i.labelOffset,C=this._resolveTickFontOptions(N),A=C.lineHeight,Z=As(_)?_.length:1;const J=Z/2,se=q.color,Y=q.textStrokeColor,ee=q.textStrokeWidth;let te=z;o?(T=M,z==="inner"&&(N===S-1?te=this.options.reverse?"left":"right":N===0?te=this.options.reverse?"right":"left":te="center"),n==="top"?h==="near"||v!==0?I=-Z*A+A/2:h==="center"?I=-R.highest.height/2-J*A+A:I=-R.highest.height+A/2:h==="near"||v!==0?I=A/2:h==="center"?I=R.highest.height/2-J*A:I=R.highest.height-Z*A,f&&(I*=-1),v!==0&&!q.showLabelBackdrop&&(T+=A/2*Math.sin(v))):(E=M,I=(1-Z)*A/2);let K;if(q.showLabelBackdrop){const $=Ca(q.backdropPadding),le=R.heights[N],ie=R.widths[N];let oe=I-$.top,de=0-$.left;switch(V){case"middle":oe-=le/2;break;case"bottom":oe-=le;break}switch(z){case"center":de-=ie/2;break;case"right":de-=ie;break;case"inner":N===S-1?de-=ie:N>0&&(de-=ie/2);break}K={left:de,top:oe,width:ie+$.width,height:le+$.height,color:q.backdropColor}}y.push({label:_,font:C,textOffset:I,options:{rotation:v,color:se,strokeColor:Y,strokeWidth:ee,textAlign:te,textBaseline:V,translation:[T,E],backdrop:K}})}return y}_getXAxisLabelAlignment(){const{position:t,ticks:r}=this.options;if(-ui(this.labelRotation))return t==="top"?"left":"right";let n="center";return r.align==="start"?n="left":r.align==="end"?n="right":r.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:r,ticks:{crossAlign:a,mirror:n,padding:i}}=this.options,o=this._getLabelSizes(),c=t+i,u=o.widest.width;let h,m;return r==="left"?n?(m=this.right+i,a==="near"?h="left":a==="center"?(h="center",m+=u/2):(h="right",m+=u)):(m=this.right-c,a==="near"?h="right":a==="center"?(h="center",m-=u/2):(h="left",m=this.left)):r==="right"?n?(m=this.left+i,a==="near"?h="right":a==="center"?(h="center",m-=u/2):(h="left",m-=u)):(m=this.left+c,a==="near"?h="left":a==="center"?(h="center",m+=u/2):(h="right",m=this.right)):h="right",{textAlign:h,x:m}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:r},left:a,top:n,width:i,height:o}=this;r&&(t.save(),t.fillStyle=r,t.fillRect(a,n,i,o),t.restore())}getLineWidthForValue(t){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const n=this.ticks.findIndex(i=>i.value===t);return n>=0?r.setContext(this.getContext(n)).lineWidth:0}drawGrid(t){const r=this.options.grid,a=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,o;const c=(u,h,m)=>{!m.width||!m.color||(a.save(),a.lineWidth=m.width,a.strokeStyle=m.color,a.setLineDash(m.borderDash||[]),a.lineDashOffset=m.borderDashOffset,a.beginPath(),a.moveTo(u.x,u.y),a.lineTo(h.x,h.y),a.stroke(),a.restore())};if(r.display)for(i=0,o=n.length;i<o;++i){const u=n[i];r.drawOnChartArea&&c({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),r.drawTicks&&c({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:r,options:{border:a,grid:n}}=this,i=a.setContext(this.getContext()),o=a.display?i.width:0;if(!o)return;const c=n.setContext(this.getContext(0)).lineWidth,u=this._borderValue;let h,m,f,p;this.isHorizontal()?(h=xo(t,this.left,o)-o/2,m=xo(t,this.right,c)+c/2,f=p=u):(f=xo(t,this.top,o)-o/2,p=xo(t,this.bottom,c)+c/2,h=m=u),r.save(),r.lineWidth=i.width,r.strokeStyle=i.color,r.beginPath(),r.moveTo(h,f),r.lineTo(m,p),r.stroke(),r.restore()}drawLabels(t){if(!this.options.ticks.display)return;const a=this.ctx,n=this._computeLabelArea();n&&Tp(a,n);const i=this.getLabelItems(t);for(const o of i){const c=o.options,u=o.font,h=o.label,m=o.textOffset;wm(a,h,0,m,u,c)}n&&Ep(a)}drawTitle(){const{ctx:t,options:{position:r,title:a,reverse:n}}=this;if(!a.display)return;const i=cr(a.font),o=Ca(a.padding),c=a.align;let u=i.lineHeight/2;r==="bottom"||r==="center"||ft(r)?(u+=o.bottom,As(a.text)&&(u+=i.lineHeight*(a.text.length-1))):u+=o.top;const{titleX:h,titleY:m,maxWidth:f,rotation:p}=NZ(this,u,r,c);wm(t,a.text,0,0,i,{color:a.color,maxWidth:f,rotation:p,textAlign:wZ(c,r,n),textBaseline:"middle",translation:[h,m]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,r=t.ticks&&t.ticks.z||0,a=lt(t.grid&&t.grid.z,-1),n=lt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==zd.prototype.draw?[{z:r,draw:i=>{this.draw(i)}}]:[{z:a,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:r,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(t){const r=this.chart.getSortedVisibleDatasetMetas(),a=this.axis+"AxisID",n=[];let i,o;for(i=0,o=r.length;i<o;++i){const c=r[i];c[a]===this.id&&(!t||c.type===t)&&n.push(c)}return n}_resolveTickFontOptions(t){const r=this.options.ticks.setContext(this.getContext(t));return cr(r.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class tf{constructor(t,r,a){this.type=t,this.scope=r,this.override=a,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const r=Object.getPrototypeOf(t);let a;SZ(r)&&(a=this.register(r));const n=this.items,i=t.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in n||(n[i]=t,_Z(t,o,a),this.override&&gs.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const r=this.items,a=t.id,n=this.scope;a in r&&delete r[a],n&&a in gs[n]&&(delete gs[n][a],this.override&&delete qo[a])}}function _Z(s,t,r){const a=gm(Object.create(null),[r?gs.get(r):{},gs.get(t),s.defaults]);gs.set(t,a),s.defaultRoutes&&kZ(t,s.defaultRoutes),s.descriptors&&gs.describe(t,s.descriptors)}function kZ(s,t){Object.keys(t).forEach(r=>{const a=r.split("."),n=a.pop(),i=[s].concat(a).join("."),o=t[r].split("."),c=o.pop(),u=o.join(".");gs.route(i,n,u,c)})}function SZ(s){return"id"in s&&"defaults"in s}class CZ{constructor(){this.controllers=new tf(Dp,"datasets",!0),this.elements=new tf(ki,"elements"),this.plugins=new tf(Object,"plugins"),this.scales=new tf(zd,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,r,a){[...r].forEach(n=>{const i=a||this._getRegistryForType(n);a||i.isForType(n)||i===this.plugins&&n.id?this._exec(t,i,n):Et(n,o=>{const c=a||this._getRegistryForType(o);this._exec(t,c,o)})})}_exec(t,r,a){const n=b1(t);Wt(a["before"+n],[],a),r[t](a),Wt(a["after"+n],[],a)}_getRegistryForType(t){for(let r=0;r<this._typedRegistries.length;r++){const a=this._typedRegistries[r];if(a.isForType(t))return a}return this.plugins}_get(t,r,a){const n=r.get(t);if(n===void 0)throw new Error('"'+t+'" is not a registered '+a+".");return n}}var ln=new CZ;class TZ{constructor(){this._init=void 0}notify(t,r,a,n){if(r==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const i=n?this._descriptors(t).filter(n):this._descriptors(t),o=this._notify(i,t,r,a);return r==="afterDestroy"&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,r,a,n){n=n||{};for(const i of t){const o=i.plugin,c=o[a],u=[r,n,i.options];if(Wt(c,u,o)===!1&&n.cancelable)return!1}return!0}invalidate(){St(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),r}_createDescriptors(t,r){const a=t&&t.config,n=lt(a.options&&a.options.plugins,{}),i=EZ(a);return n===!1&&!r?[]:DZ(t,i,n,r)}_notifyStateChanges(t){const r=this._oldCache||[],a=this._cache,n=(i,o)=>i.filter(c=>!o.some(u=>c.plugin.id===u.plugin.id));this._notify(n(r,a),t,"stop"),this._notify(n(a,r),t,"start")}}function EZ(s){const t={},r=[],a=Object.keys(ln.plugins.items);for(let i=0;i<a.length;i++)r.push(ln.getPlugin(a[i]));const n=s.plugins||[];for(let i=0;i<n.length;i++){const o=n[i];r.indexOf(o)===-1&&(r.push(o),t[o.id]=!0)}return{plugins:r,localIds:t}}function AZ(s,t){return!t&&s===!1?null:s===!0?{}:s}function DZ(s,{plugins:t,localIds:r},a,n){const i=[],o=s.getContext();for(const c of t){const u=c.id,h=AZ(a[u],n);h!==null&&i.push({plugin:c,options:RZ(s.config,{plugin:c,local:r[u]},h,o)})}return i}function RZ(s,{plugin:t,local:r},a,n){const i=s.pluginScopeKeys(t),o=s.getOptionScopes(a,i);return r&&t.defaults&&o.push(t.defaults),s.createResolver(o,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function $w(s,t){const r=gs.datasets[s]||{};return((t.datasets||{})[s]||{}).indexAxis||t.indexAxis||r.indexAxis||"x"}function MZ(s,t){let r=s;return s==="_index_"?r=t:s==="_value_"&&(r=t==="x"?"y":"x"),r}function OZ(s,t){return s===t?"_index_":"_value_"}function SS(s){if(s==="x"||s==="y"||s==="r")return s}function LZ(s){if(s==="top"||s==="bottom")return"x";if(s==="left"||s==="right")return"y"}function Uw(s,...t){if(SS(s))return s;for(const r of t){const a=r.axis||LZ(r.position)||s.length>1&&SS(s[0].toLowerCase());if(a)return a}throw new Error(`Cannot determine type of '${s}' axis. Please provide 'axis' or 'position' option.`)}function CS(s,t,r){if(r[t+"AxisID"]===s)return{axis:t}}function PZ(s,t){if(t.data&&t.data.datasets){const r=t.data.datasets.filter(a=>a.xAxisID===s||a.yAxisID===s);if(r.length)return CS(s,"x",r[0])||CS(s,"y",r[0])}return{}}function BZ(s,t){const r=qo[s.type]||{scales:{}},a=t.scales||{},n=$w(s.type,t),i=Object.create(null);return Object.keys(a).forEach(o=>{const c=a[o];if(!ft(c))return console.error(`Invalid scale configuration for scale: ${o}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const u=Uw(o,c,PZ(o,s),gs.scales[c.type]),h=OZ(u,n),m=r.scales||{};i[o]=Gh(Object.create(null),[{axis:u},c,m[u],m[h]])}),s.data.datasets.forEach(o=>{const c=o.type||s.type,u=o.indexAxis||$w(c,t),m=(qo[c]||{}).scales||{};Object.keys(m).forEach(f=>{const p=MZ(f,u),j=o[p+"AxisID"]||p;i[j]=i[j]||Object.create(null),Gh(i[j],[{axis:p},a[j],m[f]])})}),Object.keys(i).forEach(o=>{const c=i[o];Gh(c,[gs.scales[c.type],gs.scale])}),i}function LD(s){const t=s.options||(s.options={});t.plugins=lt(t.plugins,{}),t.scales=BZ(s,t)}function PD(s){return s=s||{},s.datasets=s.datasets||[],s.labels=s.labels||[],s}function FZ(s){return s=s||{},s.data=PD(s.data),LD(s),s}const TS=new Map,BD=new Set;function sf(s,t){let r=TS.get(s);return r||(r=t(),TS.set(s,r),BD.add(r)),r}const vh=(s,t,r)=>{const a=Ho(t,r);a!==void 0&&s.add(a)};class zZ{constructor(t){this._config=FZ(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=PD(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),LD(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return sf(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,r){return sf(`${t}.transition.${r}`,()=>[[`datasets.${t}.transitions.${r}`,`transitions.${r}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,r){return sf(`${t}-${r}`,()=>[[`datasets.${t}.elements.${r}`,`datasets.${t}`,`elements.${r}`,""]])}pluginScopeKeys(t){const r=t.id,a=this.type;return sf(`${a}-plugin-${r}`,()=>[[`plugins.${r}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,r){const a=this._scopeCache;let n=a.get(t);return(!n||r)&&(n=new Map,a.set(t,n)),n}getOptionScopes(t,r,a){const{options:n,type:i}=this,o=this._cachedScopes(t,a),c=o.get(r);if(c)return c;const u=new Set;r.forEach(m=>{t&&(u.add(t),m.forEach(f=>vh(u,t,f))),m.forEach(f=>vh(u,n,f)),m.forEach(f=>vh(u,qo[i]||{},f)),m.forEach(f=>vh(u,gs,f)),m.forEach(f=>vh(u,zw,f))});const h=Array.from(u);return h.length===0&&h.push(Object.create(null)),BD.has(r)&&o.set(r,h),h}chartOptionScopes(){const{options:t,type:r}=this;return[t,qo[r]||{},gs.datasets[r]||{},{type:r},gs,zw]}resolveNamedOptions(t,r,a,n=[""]){const i={$shared:!0},{resolver:o,subPrefixes:c}=ES(this._resolverCache,t,n);let u=o;if($Z(o,r)){i.$shared=!1,a=Al(a)?a():a;const h=this.createResolver(t,a,c);u=Nd(o,a,h)}for(const h of r)i[h]=u[h];return i}createResolver(t,r,a=[""],n){const{resolver:i}=ES(this._resolverCache,t,a);return ft(r)?Nd(i,r,void 0,n):i}}function ES(s,t,r){let a=s.get(t);a||(a=new Map,s.set(t,a));const n=r.join();let i=a.get(n);return i||(i={resolver:_1(t,r),subPrefixes:r.filter(c=>!c.toLowerCase().includes("hover"))},a.set(n,i)),i}const IZ=s=>ft(s)&&Object.getOwnPropertyNames(s).some(t=>Al(s[t]));function $Z(s,t){const{isScriptable:r,isIndexable:a}=pD(s);for(const n of t){const i=r(n),o=a(n),c=(o||i)&&s[n];if(i&&(Al(c)||IZ(c))||o&&As(c))return!0}return!1}var UZ="4.5.1";const VZ=["top","bottom","left","right","chartArea"];function AS(s,t){return s==="top"||s==="bottom"||VZ.indexOf(s)===-1&&t==="x"}function DS(s,t){return function(r,a){return r[s]===a[s]?r[t]-a[t]:r[s]-a[s]}}function RS(s){const t=s.chart,r=t.options.animation;t.notifyPlugins("afterRender"),Wt(r&&r.onComplete,[s],t)}function HZ(s){const t=s.chart,r=t.options.animation;Wt(r&&r.onProgress,[s],t)}function FD(s){return C1()&&typeof s=="string"?s=document.getElementById(s):s&&s.length&&(s=s[0]),s&&s.canvas&&(s=s.canvas),s}const Pf={},MS=s=>{const t=FD(s);return Object.values(Pf).filter(r=>r.canvas===t).pop()};function qZ(s,t,r){const a=Object.keys(s);for(const n of a){const i=+n;if(i>=t){const o=s[n];delete s[n],(r>0||i>t)&&(s[i+r]=o)}}}function WZ(s,t,r,a){return!r||s.type==="mouseout"?null:a?t:s}let Bm=class{static defaults=gs;static instances=Pf;static overrides=qo;static registry=ln;static version=UZ;static getChart=MS;static register(...t){ln.add(...t),OS()}static unregister(...t){ln.remove(...t),OS()}constructor(t,r){const a=this.config=new zZ(r),n=FD(t),i=MS(n);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=a.createResolver(a.chartOptionScopes(),this.getContext());this.platform=new(a.platform||dZ(n)),this.platform.updateConfig(a);const c=this.platform.acquireContext(n,o.aspectRatio),u=c&&c.canvas,h=u&&u.height,m=u&&u.width;if(this.id=$G(),this.ctx=c,this.canvas=u,this.width=m,this.height=h,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new TZ,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=iK(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],Pf[this.id]=this,!c||!u){console.error("Failed to create chart: can't acquire context from the given item");return}ni.listen(this,"complete",RS),ni.listen(this,"progress",HZ),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:r},width:a,height:n,_aspectRatio:i}=this;return St(t)?r&&i?i:n?a/n:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return ln}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():sS(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Jk(this.canvas,this.ctx),this}stop(){return ni.stop(this),this}resize(t,r){ni.running(this)?this._resizeBeforeDraw={width:t,height:r}:this._resize(t,r)}_resize(t,r){const a=this.options,n=this.canvas,i=a.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(n,t,r,i),c=a.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,sS(this,c,!0)&&(this.notifyPlugins("resize",{size:o}),Wt(a.onResize,[this,o],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){const r=this.options.scales||{};Et(r,(a,n)=>{a.id=n})}buildOrUpdateScales(){const t=this.options,r=t.scales,a=this.scales,n=Object.keys(a).reduce((o,c)=>(o[c]=!1,o),{});let i=[];r&&(i=i.concat(Object.keys(r).map(o=>{const c=r[o],u=Uw(o,c),h=u==="r",m=u==="x";return{options:c,dposition:h?"chartArea":m?"bottom":"left",dtype:h?"radialLinear":m?"category":"linear"}}))),Et(i,o=>{const c=o.options,u=c.id,h=Uw(u,c),m=lt(c.type,o.dtype);(c.position===void 0||AS(c.position,h)!==AS(o.dposition))&&(c.position=o.dposition),n[u]=!0;let f=null;if(u in a&&a[u].type===m)f=a[u];else{const p=ln.getScale(m);f=new p({id:u,type:m,ctx:this.ctx,chart:this}),a[f.id]=f}f.init(c,t)}),Et(n,(o,c)=>{o||delete a[c]}),Et(a,o=>{wa.configure(this,o,o.options),wa.addBox(this,o)})}_updateMetasets(){const t=this._metasets,r=this.data.datasets.length,a=t.length;if(t.sort((n,i)=>n.index-i.index),a>r){for(let n=r;n<a;++n)this._destroyDatasetMeta(n);t.splice(r,a-r)}this._sortedMetasets=t.slice(0).sort(DS("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:r}}=this;t.length>r.length&&delete this._stacks,t.forEach((a,n)=>{r.filter(i=>i===a._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const t=[],r=this.data.datasets;let a,n;for(this._removeUnreferencedMetasets(),a=0,n=r.length;a<n;a++){const i=r[a];let o=this.getDatasetMeta(a);const c=i.type||this.config.type;if(o.type&&o.type!==c&&(this._destroyDatasetMeta(a),o=this.getDatasetMeta(a)),o.type=c,o.indexAxis=i.indexAxis||$w(c,this.options),o.order=i.order||0,o.index=a,o.label=""+i.label,o.visible=this.isDatasetVisible(a),o.controller)o.controller.updateIndex(a),o.controller.linkScales();else{const u=ln.getController(c),{datasetElementType:h,dataElementType:m}=gs.datasets[c];Object.assign(u,{dataElementType:ln.getElement(m),datasetElementType:h&&ln.getElement(h)}),o.controller=new u(this,a),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Et(this.data.datasets,(t,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const r=this.config;r.update();const a=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!a.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let h=0,m=this.data.datasets.length;h<m;h++){const{controller:f}=this.getDatasetMeta(h),p=!n&&i.indexOf(f)===-1;f.buildOrUpdateElements(p),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=a.layout.autoPadding?o:0,this._updateLayout(o),n||Et(i,h=>{h.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(DS("z","_idx"));const{_active:c,_lastEvent:u}=this;u?this._eventHandler(u,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){Et(this.scales,t=>{wa.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,r=new Set(Object.keys(this._listeners)),a=new Set(t.events);(!Vk(r,a)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,r=this._getUniformDataChanges()||[];for(const{method:a,start:n,count:i}of r){const o=a==="_removeElements"?-i:i;qZ(t,n,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const r=this.data.datasets.length,a=i=>new Set(t.filter(o=>o[0]===i).map((o,c)=>c+","+o.splice(1).join(","))),n=a(0);for(let i=1;i<r;i++)if(!Vk(n,a(i)))return;return Array.from(n).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;wa.update(this,this.width,this.height,t);const r=this.chartArea,a=r.width<=0||r.height<=0;this._layers=[],Et(this.boxes,n=>{a&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,i)=>{n._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let r=0,a=this.data.datasets.length;r<a;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,a=this.data.datasets.length;r<a;++r)this._updateDataset(r,Al(t)?t({datasetIndex:r}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,r){const a=this.getDatasetMeta(t),n={meta:a,index:t,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(a.controller._update(r),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ni.has(this)?this.attached&&!ni.running(this)&&ni.start(this):(this.draw(),RS({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:a,height:n}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(a,n)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const r=this._layers;for(t=0;t<r.length&&r[t].z<=0;++t)r[t].draw(this.chartArea);for(this._drawDatasets();t<r.length;++t)r[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const r=this._sortedMetasets,a=[];let n,i;for(n=0,i=r.length;n<i;++n){const o=r[n];(!t||o.visible)&&a.push(o)}return a}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let r=t.length-1;r>=0;--r)this._drawDataset(t[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const r=this.ctx,a={meta:t,index:t.index,cancelable:!0},n=SD(this,t);this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(n&&Tp(r,n),t.controller.draw(),n&&Ep(r),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(t){return jm(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,r,a,n){const i=VX.modes[r];return typeof i=="function"?i(this,t,a,n):[]}getDatasetMeta(t){const r=this.data.datasets[t],a=this._metasets;let n=a.filter(i=>i&&i._dataset===r).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:t,_dataset:r,_parsed:[],_sorted:!1},a.push(n)),n}getContext(){return this.$context||(this.$context=Go(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const r=this.data.datasets[t];if(!r)return!1;const a=this.getDatasetMeta(t);return typeof a.hidden=="boolean"?!a.hidden:!r.hidden}setDatasetVisibility(t,r){const a=this.getDatasetMeta(t);a.hidden=!r}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,r,a){const n=a?"show":"hide",i=this.getDatasetMeta(t),o=i.controller._resolveAnimations(void 0,n);bm(r)?(i.data[r].hidden=!a,this.update()):(this.setDatasetVisibility(t,a),o.update(i,{visible:a}),this.update(c=>c.datasetIndex===t?n:void 0))}hide(t,r){this._updateVisibility(t,r,!1)}show(t,r){this._updateVisibility(t,r,!0)}_destroyDatasetMeta(t){const r=this._metasets[t];r&&r.controller&&r.controller._destroy(),delete this._metasets[t]}_stop(){let t,r;for(this.stop(),ni.remove(this),t=0,r=this.data.datasets.length;t<r;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:r}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Jk(t,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete Pf[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,r=this.platform,a=(i,o)=>{r.addEventListener(this,i,o),t[i]=o},n=(i,o,c)=>{i.offsetX=o,i.offsetY=c,this._eventHandler(i)};Et(this.options.events,i=>a(i,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,r=this.platform,a=(u,h)=>{r.addEventListener(this,u,h),t[u]=h},n=(u,h)=>{t[u]&&(r.removeEventListener(this,u,h),delete t[u])},i=(u,h)=>{this.canvas&&this.resize(u,h)};let o;const c=()=>{n("attach",c),this.attached=!0,this.resize(),a("resize",i),a("detach",o)};o=()=>{this.attached=!1,n("resize",i),this._stop(),this._resize(0,0),a("attach",c)},r.isAttached(this.canvas)?c():o()}unbindEvents(){Et(this._listeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._listeners={},Et(this._responsiveListeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,r,a){const n=a?"set":"remove";let i,o,c,u;for(r==="dataset"&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+n+"DatasetHoverStyle"]()),c=0,u=t.length;c<u;++c){o=t[c];const h=o&&this.getDatasetMeta(o.datasetIndex).controller;h&&h[n+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const r=this._active||[],a=t.map(({datasetIndex:i,index:o})=>{const c=this.getDatasetMeta(i);if(!c)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:c.data[o],index:o}});!sp(a,r)&&(this._active=a,this._lastEvent=null,this._updateHoverStyles(a,r))}notifyPlugins(t,r,a){return this._plugins.notify(this,t,r,a)}isPluginEnabled(t){return this._plugins._cache.filter(r=>r.plugin.id===t).length===1}_updateHoverStyles(t,r,a){const n=this.options.hover,i=(u,h)=>u.filter(m=>!h.some(f=>m.datasetIndex===f.datasetIndex&&m.index===f.index)),o=i(r,t),c=a?t:i(t,r);o.length&&this.updateHoverStyle(o,n.mode,!1),c.length&&n.mode&&this.updateHoverStyle(c,n.mode,!0)}_eventHandler(t,r){const a={event:t,replay:r,cancelable:!0,inChartArea:this.isPointInArea(t)},n=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",a,n)===!1)return;const i=this._handleEvent(t,r,a.inChartArea);return a.cancelable=!1,this.notifyPlugins("afterEvent",a,n),(i||a.changed)&&this.render(),this}_handleEvent(t,r,a){const{_active:n=[],options:i}=this,o=r,c=this._getActiveElements(t,n,a,o),u=YG(t),h=WZ(t,this._lastEvent,a,u);a&&(this._lastEvent=null,Wt(i.onHover,[t,c,this],this),u&&Wt(i.onClick,[t,c,this],this));const m=!sp(c,n);return(m||r)&&(this._active=c,this._updateHoverStyles(c,n,r)),this._lastEvent=h,m}_getActiveElements(t,r,a,n){if(t.type==="mouseout")return[];if(!a)return r;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,n)}};function OS(){return Et(Bm.instances,s=>s._plugins.invalidate())}function YZ(s,t,r){const{startAngle:a,x:n,y:i,outerRadius:o,innerRadius:c,options:u}=t,{borderWidth:h,borderJoinStyle:m}=u,f=Math.min(h/o,Xr(a-r));if(s.beginPath(),s.arc(n,i,o-h/2,a+f/2,r-f/2),c>0){const p=Math.min(h/c,Xr(a-r));s.arc(n,i,c+h/2,r-p/2,a+p/2,!0)}else{const p=Math.min(h/2,o*Xr(a-r));if(m==="round")s.arc(n,i,p,r-At/2,a+At/2,!0);else if(m==="bevel"){const j=2*p*p,g=-j*Math.cos(r+At/2)+n,v=-j*Math.sin(r+At/2)+i,y=j*Math.cos(a+At/2)+n,N=j*Math.sin(a+At/2)+i;s.lineTo(g,v),s.lineTo(y,N)}}s.closePath(),s.moveTo(0,0),s.rect(0,0,s.canvas.width,s.canvas.height),s.clip("evenodd")}function GZ(s,t,r){const{startAngle:a,pixelMargin:n,x:i,y:o,outerRadius:c,innerRadius:u}=t;let h=n/c;s.beginPath(),s.arc(i,o,c,a-h,r+h),u>n?(h=n/u,s.arc(i,o,u,r+h,a-h,!0)):s.arc(i,o,n,r+Bs,a-Bs),s.closePath(),s.clip()}function KZ(s){return N1(s,["outerStart","outerEnd","innerStart","innerEnd"])}function XZ(s,t,r,a){const n=KZ(s.options.borderRadius),i=(r-t)/2,o=Math.min(i,a*t/2),c=u=>{const h=(r-Math.min(i,u))*a/2;return or(u,0,Math.min(i,h))};return{outerStart:c(n.outerStart),outerEnd:c(n.outerEnd),innerStart:or(n.innerStart,0,o),innerEnd:or(n.innerEnd,0,o)}}function Hc(s,t,r,a){return{x:r+s*Math.cos(t),y:a+s*Math.sin(t)}}function op(s,t,r,a,n,i){const{x:o,y:c,startAngle:u,pixelMargin:h,innerRadius:m}=t,f=Math.max(t.outerRadius+a+r-h,0),p=m>0?m+a+r+h:0;let j=0;const g=n-u;if(a){const q=m>0?m-a:0,J=f>0?f-a:0,se=(q+J)/2,Y=se!==0?g*se/(se+a):g;j=(g-Y)/2}const v=Math.max(.001,g*f-r/At)/f,y=(g-v)/2,N=u+y+j,S=n-y-j,{outerStart:k,outerEnd:_,innerStart:T,innerEnd:E}=XZ(t,p,f,S-N),z=f-k,M=f-_,C=N+k/z,A=S-_/M,Z=p+T,I=p+E,V=N+T/Z,R=S-E/I;if(s.beginPath(),i){const q=(C+A)/2;if(s.arc(o,c,f,C,q),s.arc(o,c,f,q,A),_>0){const ee=Hc(M,A,o,c);s.arc(ee.x,ee.y,_,A,S+Bs)}const J=Hc(I,S,o,c);if(s.lineTo(J.x,J.y),E>0){const ee=Hc(I,R,o,c);s.arc(ee.x,ee.y,E,S+Bs,R+Math.PI)}const se=(S-E/p+(N+T/p))/2;if(s.arc(o,c,p,S-E/p,se,!0),s.arc(o,c,p,se,N+T/p,!0),T>0){const ee=Hc(Z,V,o,c);s.arc(ee.x,ee.y,T,V+Math.PI,N-Bs)}const Y=Hc(z,N,o,c);if(s.lineTo(Y.x,Y.y),k>0){const ee=Hc(z,C,o,c);s.arc(ee.x,ee.y,k,N-Bs,C)}}else{s.moveTo(o,c);const q=Math.cos(C)*f+o,J=Math.sin(C)*f+c;s.lineTo(q,J);const se=Math.cos(A)*f+o,Y=Math.sin(A)*f+c;s.lineTo(se,Y)}s.closePath()}function ZZ(s,t,r,a,n){const{fullCircles:i,startAngle:o,circumference:c}=t;let u=t.endAngle;if(i){op(s,t,r,a,u,n);for(let h=0;h<i;++h)s.fill();isNaN(c)||(u=o+(c%ts||ts))}return op(s,t,r,a,u,n),s.fill(),u}function QZ(s,t,r,a,n){const{fullCircles:i,startAngle:o,circumference:c,options:u}=t,{borderWidth:h,borderJoinStyle:m,borderDash:f,borderDashOffset:p,borderRadius:j}=u,g=u.borderAlign==="inner";if(!h)return;s.setLineDash(f||[]),s.lineDashOffset=p,g?(s.lineWidth=h*2,s.lineJoin=m||"round"):(s.lineWidth=h,s.lineJoin=m||"bevel");let v=t.endAngle;if(i){op(s,t,r,a,v,n);for(let y=0;y<i;++y)s.stroke();isNaN(c)||(v=o+(c%ts||ts))}g&&GZ(s,t,v),u.selfJoin&&v-o>=At&&j===0&&m!=="miter"&&YZ(s,t,v),i||(op(s,t,r,a,v,n),s.stroke())}class zD extends ki{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,r,a){const n=this.getProps(["x","y"],a),{angle:i,distance:o}=oD(n,{x:t,y:r}),{startAngle:c,endAngle:u,innerRadius:h,outerRadius:m,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],a),p=(this.options.spacing+this.options.borderWidth)/2,j=lt(f,u-c),g=vm(i,c,u)&&c!==u,v=j>=ts||g,y=hi(o,h+p,m+p);return v&&y}getCenterPoint(t){const{x:r,y:a,startAngle:n,endAngle:i,innerRadius:o,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:u,spacing:h}=this.options,m=(n+i)/2,f=(o+c+h+u)/2;return{x:r+Math.cos(m)*f,y:a+Math.sin(m)*f}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:r,circumference:a}=this,n=(r.offset||0)/4,i=(r.spacing||0)/2,o=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=a>ts?Math.floor(a/ts):0,a===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const c=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(c)*n,Math.sin(c)*n);const u=1-Math.sin(Math.min(At,a||0)),h=n*u;t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,ZZ(t,this,h,i,o),QZ(t,this,h,i,o),t.restore()}}function ID(s,t,r=t){s.lineCap=lt(r.borderCapStyle,t.borderCapStyle),s.setLineDash(lt(r.borderDash,t.borderDash)),s.lineDashOffset=lt(r.borderDashOffset,t.borderDashOffset),s.lineJoin=lt(r.borderJoinStyle,t.borderJoinStyle),s.lineWidth=lt(r.borderWidth,t.borderWidth),s.strokeStyle=lt(r.borderColor,t.borderColor)}function JZ(s,t,r){s.lineTo(r.x,r.y)}function eQ(s){return s.stepped?vK:s.tension||s.cubicInterpolationMode==="monotone"?jK:JZ}function $D(s,t,r={}){const a=s.length,{start:n=0,end:i=a-1}=r,{start:o,end:c}=t,u=Math.max(n,o),h=Math.min(i,c),m=n<o&&i<o||n>c&&i>c;return{count:a,start:u,loop:t.loop,ilen:h<u&&!m?a+h-u:h-u}}function tQ(s,t,r,a){const{points:n,options:i}=t,{count:o,start:c,loop:u,ilen:h}=$D(n,r,a),m=eQ(i);let{move:f=!0,reverse:p}=a||{},j,g,v;for(j=0;j<=h;++j)g=n[(c+(p?h-j:j))%o],!g.skip&&(f?(s.moveTo(g.x,g.y),f=!1):m(s,v,g,p,i.stepped),v=g);return u&&(g=n[(c+(p?h:0))%o],m(s,v,g,p,i.stepped)),!!u}function sQ(s,t,r,a){const n=t.points,{count:i,start:o,ilen:c}=$D(n,r,a),{move:u=!0,reverse:h}=a||{};let m=0,f=0,p,j,g,v,y,N;const S=_=>(o+(h?c-_:_))%i,k=()=>{v!==y&&(s.lineTo(m,y),s.lineTo(m,v),s.lineTo(m,N))};for(u&&(j=n[S(0)],s.moveTo(j.x,j.y)),p=0;p<=c;++p){if(j=n[S(p)],j.skip)continue;const _=j.x,T=j.y,E=_|0;E===g?(T<v?v=T:T>y&&(y=T),m=(f*m+_)/++f):(k(),s.lineTo(_,T),g=E,f=0,v=y=T),N=T}k()}function Vw(s){const t=s.options,r=t.borderDash&&t.borderDash.length;return!s._decimated&&!s._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!r?sQ:tQ}function rQ(s){return s.stepped?JK:s.tension||s.cubicInterpolationMode==="monotone"?eX:_o}function aQ(s,t,r,a){let n=t._path;n||(n=t._path=new Path2D,t.path(n,r,a)&&n.closePath()),ID(s,t.options),s.stroke(n)}function nQ(s,t,r,a){const{segments:n,options:i}=t,o=Vw(t);for(const c of n)ID(s,i,c.style),s.beginPath(),o(s,t,c,{start:r,end:r+a-1})&&s.closePath(),s.stroke()}const iQ=typeof Path2D=="function";function lQ(s,t,r,a){iQ&&!t.options.segment?aQ(s,t,r,a):nQ(s,t,r,a)}class Fm extends ki{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,r){const a=this.options;if((a.tension||a.cubicInterpolationMode==="monotone")&&!a.stepped&&!this._pointsUpdated){const n=a.spanGaps?this._loop:this._fullLoop;qK(this._points,a,t,n,r),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=iX(this,this.options.segment))}first(){const t=this.segments,r=this.points;return t.length&&r[t[0].start]}last(){const t=this.segments,r=this.points,a=t.length;return a&&r[t[a-1].end]}interpolate(t,r){const a=this.options,n=t[r],i=this.points,o=kD(this,{property:r,start:n,end:n});if(!o.length)return;const c=[],u=rQ(a);let h,m;for(h=0,m=o.length;h<m;++h){const{start:f,end:p}=o[h],j=i[f],g=i[p];if(j===g){c.push(j);continue}const v=Math.abs((n-j[r])/(g[r]-j[r])),y=u(j,g,v,a.stepped);y[r]=t[r],c.push(y)}return c.length===1?c[0]:c}pathSegment(t,r,a){return Vw(this)(t,this,r,a)}path(t,r,a){const n=this.segments,i=Vw(this);let o=this._loop;r=r||0,a=a||this.points.length-r;for(const c of n)o&=i(t,this,c,{start:r,end:r+a-1});return!!o}draw(t,r,a,n){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),lQ(t,this,a,n),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function LS(s,t,r,a){const n=s.options,{[r]:i}=s.getProps([r],a);return Math.abs(t-i)<n.radius+n.hitRadius}class UD extends ki{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,r,a){const n=this.options,{x:i,y:o}=this.getProps(["x","y"],a);return Math.pow(t-i,2)+Math.pow(r-o,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(t,r){return LS(this,t,"x",r)}inYRange(t,r){return LS(this,t,"y",r)}getCenterPoint(t){const{x:r,y:a}=this.getProps(["x","y"],t);return{x:r,y:a}}size(t){t=t||this.options||{};let r=t.radius||0;r=Math.max(r,r&&t.hoverRadius||0);const a=r&&t.borderWidth||0;return(r+a)*2}draw(t,r){const a=this.options;this.skip||a.radius<.1||!jm(this,r,this.size(a)/2)||(t.strokeStyle=a.borderColor,t.lineWidth=a.borderWidth,t.fillStyle=a.backgroundColor,Iw(t,a,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function VD(s,t){const{x:r,y:a,base:n,width:i,height:o}=s.getProps(["x","y","base","width","height"],t);let c,u,h,m,f;return s.horizontal?(f=o/2,c=Math.min(r,n),u=Math.max(r,n),h=a-f,m=a+f):(f=i/2,c=r-f,u=r+f,h=Math.min(a,n),m=Math.max(a,n)),{left:c,top:h,right:u,bottom:m}}function bl(s,t,r,a){return s?0:or(t,r,a)}function oQ(s,t,r){const a=s.options.borderWidth,n=s.borderSkipped,i=fD(a);return{t:bl(n.top,i.top,0,r),r:bl(n.right,i.right,0,t),b:bl(n.bottom,i.bottom,0,r),l:bl(n.left,i.left,0,t)}}function cQ(s,t,r){const{enableBorderRadius:a}=s.getProps(["enableBorderRadius"]),n=s.options.borderRadius,i=od(n),o=Math.min(t,r),c=s.borderSkipped,u=a||ft(n);return{topLeft:bl(!u||c.top||c.left,i.topLeft,0,o),topRight:bl(!u||c.top||c.right,i.topRight,0,o),bottomLeft:bl(!u||c.bottom||c.left,i.bottomLeft,0,o),bottomRight:bl(!u||c.bottom||c.right,i.bottomRight,0,o)}}function dQ(s){const t=VD(s),r=t.right-t.left,a=t.bottom-t.top,n=oQ(s,r/2,a/2),i=cQ(s,r/2,a/2);return{outer:{x:t.left,y:t.top,w:r,h:a,radius:i},inner:{x:t.left+n.l,y:t.top+n.t,w:r-n.l-n.r,h:a-n.t-n.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,i.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(n.b,n.r))}}}}function Gy(s,t,r,a){const n=t===null,i=r===null,c=s&&!(n&&i)&&VD(s,a);return c&&(n||hi(t,c.left,c.right))&&(i||hi(r,c.top,c.bottom))}function uQ(s){return s.topLeft||s.topRight||s.bottomLeft||s.bottomRight}function hQ(s,t){s.rect(t.x,t.y,t.w,t.h)}function Ky(s,t,r={}){const a=s.x!==r.x?-t:0,n=s.y!==r.y?-t:0,i=(s.x+s.w!==r.x+r.w?t:0)-a,o=(s.y+s.h!==r.y+r.h?t:0)-n;return{x:s.x+a,y:s.y+n,w:s.w+i,h:s.h+o,radius:s.radius}}class HD extends ki{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:r,options:{borderColor:a,backgroundColor:n}}=this,{inner:i,outer:o}=dQ(this),c=uQ(o.radius)?np:hQ;t.save(),(o.w!==i.w||o.h!==i.h)&&(t.beginPath(),c(t,Ky(o,r,i)),t.clip(),c(t,Ky(i,-r,o)),t.fillStyle=a,t.fill("evenodd")),t.beginPath(),c(t,Ky(i,r)),t.fillStyle=n,t.fill(),t.restore()}inRange(t,r,a){return Gy(this,t,r,a)}inXRange(t,r){return Gy(this,t,null,r)}inYRange(t,r){return Gy(this,null,t,r)}getCenterPoint(t){const{x:r,y:a,base:n,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(r+n)/2:r,y:i?a:(a+n)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}function mQ(s,t,r){const a=s.segments,n=s.points,i=t.points,o=[];for(const c of a){let{start:u,end:h}=c;h=Mp(u,h,n);const m=Hw(r,n[u],n[h],c.loop);if(!t.segments){o.push({source:c,target:m,start:n[u],end:n[h]});continue}const f=kD(t,m);for(const p of f){const j=Hw(r,i[p.start],i[p.end],p.loop),g=_D(c,n,j);for(const v of g)o.push({source:v,target:p,start:{[r]:PS(m,j,"start",Math.max)},end:{[r]:PS(m,j,"end",Math.min)}})}}return o}function Hw(s,t,r,a){if(a)return;let n=t[s],i=r[s];return s==="angle"&&(n=Xr(n),i=Xr(i)),{property:s,start:n,end:i}}function xQ(s,t){const{x:r=null,y:a=null}=s||{},n=t.points,i=[];return t.segments.forEach(({start:o,end:c})=>{c=Mp(o,c,n);const u=n[o],h=n[c];a!==null?(i.push({x:u.x,y:a}),i.push({x:h.x,y:a})):r!==null&&(i.push({x:r,y:u.y}),i.push({x:r,y:h.y}))}),i}function Mp(s,t,r){for(;t>s;t--){const a=r[t];if(!isNaN(a.x)&&!isNaN(a.y))break}return t}function PS(s,t,r,a){return s&&t?a(s[r],t[r]):s?s[r]:t?t[r]:0}function qD(s,t){let r=[],a=!1;return As(s)?(a=!0,r=s):r=xQ(s,t),r.length?new Fm({points:r,options:{tension:0},_loop:a,_fullLoop:a}):null}function BS(s){return s&&s.fill!==!1}function fQ(s,t,r){let n=s[t].fill;const i=[t];let o;if(!r)return n;for(;n!==!1&&i.indexOf(n)===-1;){if(!ur(n))return n;if(o=s[n],!o)return!1;if(o.visible)return n;i.push(n),n=o.fill}return!1}function pQ(s,t,r){const a=vQ(s);if(ft(a))return isNaN(a.value)?!1:a;let n=parseFloat(a);return ur(n)&&Math.floor(n)===n?gQ(a[0],t,n,r):["origin","start","end","stack","shape"].indexOf(a)>=0&&a}function gQ(s,t,r,a){return(s==="-"||s==="+")&&(r=t+r),r===t||r<0||r>=a?!1:r}function bQ(s,t){let r=null;return s==="start"?r=t.bottom:s==="end"?r=t.top:ft(s)?r=t.getPixelForValue(s.value):t.getBasePixel&&(r=t.getBasePixel()),r}function yQ(s,t,r){let a;return s==="start"?a=r:s==="end"?a=t.options.reverse?t.min:t.max:ft(s)?a=s.value:a=t.getBaseValue(),a}function vQ(s){const t=s.options,r=t.fill;let a=lt(r&&r.target,r);return a===void 0&&(a=!!t.backgroundColor),a===!1||a===null?!1:a===!0?"origin":a}function jQ(s){const{scale:t,index:r,line:a}=s,n=[],i=a.segments,o=a.points,c=wQ(t,r);c.push(qD({x:null,y:t.bottom},a));for(let u=0;u<i.length;u++){const h=i[u];for(let m=h.start;m<=h.end;m++)NQ(n,o[m],c)}return new Fm({points:n,options:{}})}function wQ(s,t){const r=[],a=s.getMatchingVisibleMetas("line");for(let n=0;n<a.length;n++){const i=a[n];if(i.index===t)break;i.hidden||r.unshift(i.dataset)}return r}function NQ(s,t,r){const a=[];for(let n=0;n<r.length;n++){const i=r[n],{first:o,last:c,point:u}=_Q(i,t,"x");if(!(!u||o&&c)){if(o)a.unshift(u);else if(s.push(u),!c)break}}s.push(...a)}function _Q(s,t,r){const a=s.interpolate(t,r);if(!a)return{};const n=a[r],i=s.segments,o=s.points;let c=!1,u=!1;for(let h=0;h<i.length;h++){const m=i[h],f=o[m.start][r],p=o[m.end][r];if(hi(n,f,p)){c=n===f,u=n===p;break}}return{first:c,last:u,point:a}}class WD{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,r,a){const{x:n,y:i,radius:o}=this;return r=r||{start:0,end:ts},t.arc(n,i,o,r.end,r.start,!0),!a.bounds}interpolate(t){const{x:r,y:a,radius:n}=this,i=t.angle;return{x:r+Math.cos(i)*n,y:a+Math.sin(i)*n,angle:i}}}function kQ(s){const{chart:t,fill:r,line:a}=s;if(ur(r))return SQ(t,r);if(r==="stack")return jQ(s);if(r==="shape")return!0;const n=CQ(s);return n instanceof WD?n:qD(n,a)}function SQ(s,t){const r=s.getDatasetMeta(t);return r&&s.isDatasetVisible(t)?r.dataset:null}function CQ(s){return(s.scale||{}).getPointPositionForValue?EQ(s):TQ(s)}function TQ(s){const{scale:t={},fill:r}=s,a=bQ(r,t);if(ur(a)){const n=t.isHorizontal();return{x:n?a:null,y:n?null:a}}return null}function EQ(s){const{scale:t,fill:r}=s,a=t.options,n=t.getLabels().length,i=a.reverse?t.max:t.min,o=yQ(r,t,i),c=[];if(a.grid.circular){const u=t.getPointPositionForValue(0,i);return new WD({x:u.x,y:u.y,radius:t.getDistanceFromCenterForValue(o)})}for(let u=0;u<n;++u)c.push(t.getPointPositionForValue(u,o));return c}function Xy(s,t,r){const a=kQ(t),{chart:n,index:i,line:o,scale:c,axis:u}=t,h=o.options,m=h.fill,f=h.backgroundColor,{above:p=f,below:j=f}=m||{},g=n.getDatasetMeta(i),v=SD(n,g);a&&o.points.length&&(Tp(s,r),AQ(s,{line:o,target:a,above:p,below:j,area:r,scale:c,axis:u,clip:v}),Ep(s))}function AQ(s,t){const{line:r,target:a,above:n,below:i,area:o,scale:c,clip:u}=t,h=r._loop?"angle":t.axis;s.save();let m=i;i!==n&&(h==="x"?(FS(s,a,o.top),Zy(s,{line:r,target:a,color:n,scale:c,property:h,clip:u}),s.restore(),s.save(),FS(s,a,o.bottom)):h==="y"&&(zS(s,a,o.left),Zy(s,{line:r,target:a,color:i,scale:c,property:h,clip:u}),s.restore(),s.save(),zS(s,a,o.right),m=n)),Zy(s,{line:r,target:a,color:m,scale:c,property:h,clip:u}),s.restore()}function FS(s,t,r){const{segments:a,points:n}=t;let i=!0,o=!1;s.beginPath();for(const c of a){const{start:u,end:h}=c,m=n[u],f=n[Mp(u,h,n)];i?(s.moveTo(m.x,m.y),i=!1):(s.lineTo(m.x,r),s.lineTo(m.x,m.y)),o=!!t.pathSegment(s,c,{move:o}),o?s.closePath():s.lineTo(f.x,r)}s.lineTo(t.first().x,r),s.closePath(),s.clip()}function zS(s,t,r){const{segments:a,points:n}=t;let i=!0,o=!1;s.beginPath();for(const c of a){const{start:u,end:h}=c,m=n[u],f=n[Mp(u,h,n)];i?(s.moveTo(m.x,m.y),i=!1):(s.lineTo(r,m.y),s.lineTo(m.x,m.y)),o=!!t.pathSegment(s,c,{move:o}),o?s.closePath():s.lineTo(r,f.y)}s.lineTo(r,t.first().y),s.closePath(),s.clip()}function Zy(s,t){const{line:r,target:a,property:n,color:i,scale:o,clip:c}=t,u=mQ(r,a,n);for(const{source:h,target:m,start:f,end:p}of u){const{style:{backgroundColor:j=i}={}}=h,g=a!==!0;s.save(),s.fillStyle=j,DQ(s,o,c,g&&Hw(n,f,p)),s.beginPath();const v=!!r.pathSegment(s,h);let y;if(g){v?s.closePath():IS(s,a,p,n);const N=!!a.pathSegment(s,m,{move:v,reverse:!0});y=v&&N,y||IS(s,a,f,n)}s.closePath(),s.fill(y?"evenodd":"nonzero"),s.restore()}}function DQ(s,t,r,a){const n=t.chart.chartArea,{property:i,start:o,end:c}=a||{};if(i==="x"||i==="y"){let u,h,m,f;i==="x"?(u=o,h=n.top,m=c,f=n.bottom):(u=n.left,h=o,m=n.right,f=c),s.beginPath(),r&&(u=Math.max(u,r.left),m=Math.min(m,r.right),h=Math.max(h,r.top),f=Math.min(f,r.bottom)),s.rect(u,h,m-u,f-h),s.clip()}}function IS(s,t,r,a){const n=t.interpolate(r,a);n&&s.lineTo(n.x,n.y)}var YD={id:"filler",afterDatasetsUpdate(s,t,r){const a=(s.data.datasets||[]).length,n=[];let i,o,c,u;for(o=0;o<a;++o)i=s.getDatasetMeta(o),c=i.dataset,u=null,c&&c.options&&c instanceof Fm&&(u={visible:s.isDatasetVisible(o),index:o,fill:pQ(c,o,a),chart:s,axis:i.controller.options.indexAxis,scale:i.vScale,line:c}),i.$filler=u,n.push(u);for(o=0;o<a;++o)u=n[o],!(!u||u.fill===!1)&&(u.fill=fQ(n,o,r.propagate))},beforeDraw(s,t,r){const a=r.drawTime==="beforeDraw",n=s.getSortedVisibleDatasetMetas(),i=s.chartArea;for(let o=n.length-1;o>=0;--o){const c=n[o].$filler;c&&(c.line.updateControlPoints(i,c.axis),a&&c.fill&&Xy(s.ctx,c,i))}},beforeDatasetsDraw(s,t,r){if(r.drawTime!=="beforeDatasetsDraw")return;const a=s.getSortedVisibleDatasetMetas();for(let n=a.length-1;n>=0;--n){const i=a[n].$filler;BS(i)&&Xy(s.ctx,i,s.chartArea)}},beforeDatasetDraw(s,t,r){const a=t.meta.$filler;!BS(a)||r.drawTime!=="beforeDatasetDraw"||Xy(s.ctx,a,s.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const $S=(s,t)=>{let{boxHeight:r=t,boxWidth:a=t}=s;return s.usePointStyle&&(r=Math.min(r,t),a=s.pointStyleWidth||Math.min(a,t)),{boxWidth:a,boxHeight:r,itemHeight:Math.max(t,r)}},RQ=(s,t)=>s!==null&&t!==null&&s.datasetIndex===t.datasetIndex&&s.index===t.index;class US extends ki{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,r,a){this.maxWidth=t,this.maxHeight=r,this._margins=a,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let r=Wt(t.generateLabels,[this.chart],this)||[];t.filter&&(r=r.filter(a=>t.filter(a,this.chart.data))),t.sort&&(r=r.sort((a,n)=>t.sort(a,n,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:t,ctx:r}=this;if(!t.display){this.width=this.height=0;return}const a=t.labels,n=cr(a.font),i=n.size,o=this._computeTitleHeight(),{boxWidth:c,itemHeight:u}=$S(a,i);let h,m;r.font=n.string,this.isHorizontal()?(h=this.maxWidth,m=this._fitRows(o,i,c,u)+10):(m=this.maxHeight,h=this._fitCols(o,n,c,u)+10),this.width=Math.min(h,t.maxWidth||this.maxWidth),this.height=Math.min(m,t.maxHeight||this.maxHeight)}_fitRows(t,r,a,n){const{ctx:i,maxWidth:o,options:{labels:{padding:c}}}=this,u=this.legendHitBoxes=[],h=this.lineWidths=[0],m=n+c;let f=t;i.textAlign="left",i.textBaseline="middle";let p=-1,j=-m;return this.legendItems.forEach((g,v)=>{const y=a+r/2+i.measureText(g.text).width;(v===0||h[h.length-1]+y+2*c>o)&&(f+=m,h[h.length-(v>0?0:1)]=0,j+=m,p++),u[v]={left:0,top:j,row:p,width:y,height:n},h[h.length-1]+=y+c}),f}_fitCols(t,r,a,n){const{ctx:i,maxHeight:o,options:{labels:{padding:c}}}=this,u=this.legendHitBoxes=[],h=this.columnSizes=[],m=o-t;let f=c,p=0,j=0,g=0,v=0;return this.legendItems.forEach((y,N)=>{const{itemWidth:S,itemHeight:k}=MQ(a,r,i,y,n);N>0&&j+k+2*c>m&&(f+=p+c,h.push({width:p,height:j}),g+=p+c,v++,p=j=0),u[N]={left:g,top:j,col:v,width:S,height:k},p=Math.max(p,S),j+=k+c}),f+=p,h.push({width:p,height:j}),f}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:a,labels:{padding:n},rtl:i}}=this,o=cd(i,this.left,this.width);if(this.isHorizontal()){let c=0,u=tr(a,this.left+n,this.right-this.lineWidths[c]);for(const h of r)c!==h.row&&(c=h.row,u=tr(a,this.left+n,this.right-this.lineWidths[c])),h.top+=this.top+t+n,h.left=o.leftForLtr(o.x(u),h.width),u+=h.width+n}else{let c=0,u=tr(a,this.top+t+n,this.bottom-this.columnSizes[c].height);for(const h of r)h.col!==c&&(c=h.col,u=tr(a,this.top+t+n,this.bottom-this.columnSizes[c].height)),h.top=u,h.left+=this.left+n,h.left=o.leftForLtr(o.x(h.left),h.width),u+=h.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Tp(t,this),this._draw(),Ep(t)}}_draw(){const{options:t,columnSizes:r,lineWidths:a,ctx:n}=this,{align:i,labels:o}=t,c=gs.color,u=cd(t.rtl,this.left,this.width),h=cr(o.font),{padding:m}=o,f=h.size,p=f/2;let j;this.drawTitle(),n.textAlign=u.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=h.string;const{boxWidth:g,boxHeight:v,itemHeight:y}=$S(o,f),N=function(E,z,M){if(isNaN(g)||g<=0||isNaN(v)||v<0)return;n.save();const C=lt(M.lineWidth,1);if(n.fillStyle=lt(M.fillStyle,c),n.lineCap=lt(M.lineCap,"butt"),n.lineDashOffset=lt(M.lineDashOffset,0),n.lineJoin=lt(M.lineJoin,"miter"),n.lineWidth=C,n.strokeStyle=lt(M.strokeStyle,c),n.setLineDash(lt(M.lineDash,[])),o.usePointStyle){const A={radius:v*Math.SQRT2/2,pointStyle:M.pointStyle,rotation:M.rotation,borderWidth:C},Z=u.xPlus(E,g/2),I=z+p;xD(n,A,Z,I,o.pointStyleWidth&&g)}else{const A=z+Math.max((f-v)/2,0),Z=u.leftForLtr(E,g),I=od(M.borderRadius);n.beginPath(),Object.values(I).some(V=>V!==0)?np(n,{x:Z,y:A,w:g,h:v,radius:I}):n.rect(Z,A,g,v),n.fill(),C!==0&&n.stroke()}n.restore()},S=function(E,z,M){wm(n,M.text,E,z+y/2,h,{strikethrough:M.hidden,textAlign:u.textAlign(M.textAlign)})},k=this.isHorizontal(),_=this._computeTitleHeight();k?j={x:tr(i,this.left+m,this.right-a[0]),y:this.top+m+_,line:0}:j={x:this.left+m,y:tr(i,this.top+_+m,this.bottom-r[0].height),line:0},jD(this.ctx,t.textDirection);const T=y+m;this.legendItems.forEach((E,z)=>{n.strokeStyle=E.fontColor,n.fillStyle=E.fontColor;const M=n.measureText(E.text).width,C=u.textAlign(E.textAlign||(E.textAlign=o.textAlign)),A=g+p+M;let Z=j.x,I=j.y;u.setWidth(this.width),k?z>0&&Z+A+m>this.right&&(I=j.y+=T,j.line++,Z=j.x=tr(i,this.left+m,this.right-a[j.line])):z>0&&I+T>this.bottom&&(Z=j.x=Z+r[j.line].width+m,j.line++,I=j.y=tr(i,this.top+_+m,this.bottom-r[j.line].height));const V=u.x(Z);if(N(V,I,E),Z=lK(C,Z+g+p,k?Z+A:this.right,t.rtl),S(u.x(Z),I,E),k)j.x+=A+m;else if(typeof E.text!="string"){const R=h.lineHeight;j.y+=GD(E,R)+m}else j.y+=T}),wD(this.ctx,t.textDirection)}drawTitle(){const t=this.options,r=t.title,a=cr(r.font),n=Ca(r.padding);if(!r.display)return;const i=cd(t.rtl,this.left,this.width),o=this.ctx,c=r.position,u=a.size/2,h=n.top+u;let m,f=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),m=this.top+h,f=tr(t.align,f,this.right-p);else{const g=this.columnSizes.reduce((v,y)=>Math.max(v,y.height),0);m=h+tr(t.align,this.top,this.bottom-g-t.labels.padding-this._computeTitleHeight())}const j=tr(c,f,f+p);o.textAlign=i.textAlign(v1(c)),o.textBaseline="middle",o.strokeStyle=r.color,o.fillStyle=r.color,o.font=a.string,wm(o,r.text,j,m,a)}_computeTitleHeight(){const t=this.options.title,r=cr(t.font),a=Ca(t.padding);return t.display?r.lineHeight+a.height:0}_getLegendItemAt(t,r){let a,n,i;if(hi(t,this.left,this.right)&&hi(r,this.top,this.bottom)){for(i=this.legendHitBoxes,a=0;a<i.length;++a)if(n=i[a],hi(t,n.left,n.left+n.width)&&hi(r,n.top,n.top+n.height))return this.legendItems[a]}return null}handleEvent(t){const r=this.options;if(!PQ(t.type,r))return;const a=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const n=this._hoveredItem,i=RQ(n,a);n&&!i&&Wt(r.onLeave,[t,n,this],this),this._hoveredItem=a,a&&!i&&Wt(r.onHover,[t,a,this],this)}else a&&Wt(r.onClick,[t,a,this],this)}}function MQ(s,t,r,a,n){const i=OQ(a,s,t,r),o=LQ(n,a,t.lineHeight);return{itemWidth:i,itemHeight:o}}function OQ(s,t,r,a){let n=s.text;return n&&typeof n!="string"&&(n=n.reduce((i,o)=>i.length>o.length?i:o)),t+r.size/2+a.measureText(n).width}function LQ(s,t,r){let a=s;return typeof t.text!="string"&&(a=GD(t,r)),a}function GD(s,t){const r=s.text?s.text.length:0;return t*r}function PQ(s,t){return!!((s==="mousemove"||s==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(s==="click"||s==="mouseup"))}var KD={id:"legend",_element:US,start(s,t,r){const a=s.legend=new US({ctx:s.ctx,options:r,chart:s});wa.configure(s,a,r),wa.addBox(s,a)},stop(s){wa.removeBox(s,s.legend),delete s.legend},beforeUpdate(s,t,r){const a=s.legend;wa.configure(s,a,r),a.options=r},afterUpdate(s){const t=s.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(s,t){t.replay||s.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(s,t,r){const a=t.datasetIndex,n=r.chart;n.isDatasetVisible(a)?(n.hide(a),t.hidden=!0):(n.show(a),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:s=>s.chart.options.color,boxWidth:40,padding:10,generateLabels(s){const t=s.data.datasets,{labels:{usePointStyle:r,pointStyle:a,textAlign:n,color:i,useBorderRadius:o,borderRadius:c}}=s.legend.options;return s._getSortedDatasetMetas().map(u=>{const h=u.controller.getStyle(r?0:void 0),m=Ca(h.borderWidth);return{text:t[u.index].label,fillStyle:h.backgroundColor,fontColor:i,hidden:!u.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(m.width+m.height)/4,strokeStyle:h.borderColor,pointStyle:a||h.pointStyle,rotation:h.rotation,textAlign:n||h.textAlign,borderRadius:o&&(c||h.borderRadius),datasetIndex:u.index}},this)}},title:{color:s=>s.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:s=>!s.startsWith("on"),labels:{_scriptable:s=>!["generateLabels","filter","sort"].includes(s)}}};class XD extends ki{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,r){const a=this.options;if(this.left=0,this.top=0,!a.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=r;const n=As(a.text)?a.text.length:1;this._padding=Ca(a.padding);const i=n*cr(a.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:r,left:a,bottom:n,right:i,options:o}=this,c=o.align;let u=0,h,m,f;return this.isHorizontal()?(m=tr(c,a,i),f=r+t,h=i-a):(o.position==="left"?(m=a+t,f=tr(c,n,r),u=At*-.5):(m=i-t,f=tr(c,r,n),u=At*.5),h=n-r),{titleX:m,titleY:f,maxWidth:h,rotation:u}}draw(){const t=this.ctx,r=this.options;if(!r.display)return;const a=cr(r.font),i=a.lineHeight/2+this._padding.top,{titleX:o,titleY:c,maxWidth:u,rotation:h}=this._drawArgs(i);wm(t,r.text,0,0,a,{color:r.color,maxWidth:u,rotation:h,textAlign:v1(r.align),textBaseline:"middle",translation:[o,c]})}}function BQ(s,t){const r=new XD({ctx:s.ctx,options:t,chart:s});wa.configure(s,r,t),wa.addBox(s,r),s.titleBlock=r}var ZD={id:"title",_element:XD,start(s,t,r){BQ(s,r)},stop(s){const t=s.titleBlock;wa.removeBox(s,t),delete s.titleBlock},beforeUpdate(s,t,r){const a=s.titleBlock;wa.configure(s,a,r),a.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Oh={average(s){if(!s.length)return!1;let t,r,a=new Set,n=0,i=0;for(t=0,r=s.length;t<r;++t){const c=s[t].element;if(c&&c.hasValue()){const u=c.tooltipPosition();a.add(u.x),n+=u.y,++i}}return i===0||a.size===0?!1:{x:[...a].reduce((c,u)=>c+u)/a.size,y:n/i}},nearest(s,t){if(!s.length)return!1;let r=t.x,a=t.y,n=Number.POSITIVE_INFINITY,i,o,c;for(i=0,o=s.length;i<o;++i){const u=s[i].element;if(u&&u.hasValue()){const h=u.getCenterPoint(),m=Fw(t,h);m<n&&(n=m,c=u)}}if(c){const u=c.tooltipPosition();r=u.x,a=u.y}return{x:r,y:a}}};function nn(s,t){return t&&(As(t)?Array.prototype.push.apply(s,t):s.push(t)),s}function ii(s){return(typeof s=="string"||s instanceof String)&&s.indexOf(`
`)>-1?s.split(`
`):s}function FQ(s,t){const{element:r,datasetIndex:a,index:n}=t,i=s.getDatasetMeta(a).controller,{label:o,value:c}=i.getLabelAndValue(n);return{chart:s,label:o,parsed:i.getParsed(n),raw:s.data.datasets[a].data[n],formattedValue:c,dataset:i.getDataset(),dataIndex:n,datasetIndex:a,element:r}}function VS(s,t){const r=s.chart.ctx,{body:a,footer:n,title:i}=s,{boxWidth:o,boxHeight:c}=t,u=cr(t.bodyFont),h=cr(t.titleFont),m=cr(t.footerFont),f=i.length,p=n.length,j=a.length,g=Ca(t.padding);let v=g.height,y=0,N=a.reduce((_,T)=>_+T.before.length+T.lines.length+T.after.length,0);if(N+=s.beforeBody.length+s.afterBody.length,f&&(v+=f*h.lineHeight+(f-1)*t.titleSpacing+t.titleMarginBottom),N){const _=t.displayColors?Math.max(c,u.lineHeight):u.lineHeight;v+=j*_+(N-j)*u.lineHeight+(N-1)*t.bodySpacing}p&&(v+=t.footerMarginTop+p*m.lineHeight+(p-1)*t.footerSpacing);let S=0;const k=function(_){y=Math.max(y,r.measureText(_).width+S)};return r.save(),r.font=h.string,Et(s.title,k),r.font=u.string,Et(s.beforeBody.concat(s.afterBody),k),S=t.displayColors?o+2+t.boxPadding:0,Et(a,_=>{Et(_.before,k),Et(_.lines,k),Et(_.after,k)}),S=0,r.font=m.string,Et(s.footer,k),r.restore(),y+=g.width,{width:y,height:v}}function zQ(s,t){const{y:r,height:a}=t;return r<a/2?"top":r>s.height-a/2?"bottom":"center"}function IQ(s,t,r,a){const{x:n,width:i}=a,o=r.caretSize+r.caretPadding;if(s==="left"&&n+i+o>t.width||s==="right"&&n-i-o<0)return!0}function $Q(s,t,r,a){const{x:n,width:i}=r,{width:o,chartArea:{left:c,right:u}}=s;let h="center";return a==="center"?h=n<=(c+u)/2?"left":"right":n<=i/2?h="left":n>=o-i/2&&(h="right"),IQ(h,s,t,r)&&(h="center"),h}function HS(s,t,r){const a=r.yAlign||t.yAlign||zQ(s,r);return{xAlign:r.xAlign||t.xAlign||$Q(s,t,r,a),yAlign:a}}function UQ(s,t){let{x:r,width:a}=s;return t==="right"?r-=a:t==="center"&&(r-=a/2),r}function VQ(s,t,r){let{y:a,height:n}=s;return t==="top"?a+=r:t==="bottom"?a-=n+r:a-=n/2,a}function qS(s,t,r,a){const{caretSize:n,caretPadding:i,cornerRadius:o}=s,{xAlign:c,yAlign:u}=r,h=n+i,{topLeft:m,topRight:f,bottomLeft:p,bottomRight:j}=od(o);let g=UQ(t,c);const v=VQ(t,u,h);return u==="center"?c==="left"?g+=h:c==="right"&&(g-=h):c==="left"?g-=Math.max(m,p)+n:c==="right"&&(g+=Math.max(f,j)+n),{x:or(g,0,a.width-t.width),y:or(v,0,a.height-t.height)}}function rf(s,t,r){const a=Ca(r.padding);return t==="center"?s.x+s.width/2:t==="right"?s.x+s.width-a.right:s.x+a.left}function WS(s){return nn([],ii(s))}function HQ(s,t,r){return Go(s,{tooltip:t,tooltipItems:r,type:"tooltip"})}function YS(s,t){const r=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return r?s.override(r):s}const QD={beforeTitle:si,title(s){if(s.length>0){const t=s[0],r=t.chart.data.labels,a=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(a>0&&t.dataIndex<a)return r[t.dataIndex]}return""},afterTitle:si,beforeBody:si,beforeLabel:si,label(s){if(this&&this.options&&this.options.mode==="dataset")return s.label+": "+s.formattedValue||s.formattedValue;let t=s.dataset.label||"";t&&(t+=": ");const r=s.formattedValue;return St(r)||(t+=r),t},labelColor(s){const r=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(s){const r=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:si,afterBody:si,beforeFooter:si,footer:si,afterFooter:si};function Sr(s,t,r,a){const n=s[t].call(r,a);return typeof n>"u"?QD[t].call(r,a):n}class GS extends ki{static positioners=Oh;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const r=this.chart,a=this.options.setContext(this.getContext()),n=a.enabled&&r.options.animation&&a.animations,i=new CD(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=HQ(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,r){const{callbacks:a}=r,n=Sr(a,"beforeTitle",this,t),i=Sr(a,"title",this,t),o=Sr(a,"afterTitle",this,t);let c=[];return c=nn(c,ii(n)),c=nn(c,ii(i)),c=nn(c,ii(o)),c}getBeforeBody(t,r){return WS(Sr(r.callbacks,"beforeBody",this,t))}getBody(t,r){const{callbacks:a}=r,n=[];return Et(t,i=>{const o={before:[],lines:[],after:[]},c=YS(a,i);nn(o.before,ii(Sr(c,"beforeLabel",this,i))),nn(o.lines,Sr(c,"label",this,i)),nn(o.after,ii(Sr(c,"afterLabel",this,i))),n.push(o)}),n}getAfterBody(t,r){return WS(Sr(r.callbacks,"afterBody",this,t))}getFooter(t,r){const{callbacks:a}=r,n=Sr(a,"beforeFooter",this,t),i=Sr(a,"footer",this,t),o=Sr(a,"afterFooter",this,t);let c=[];return c=nn(c,ii(n)),c=nn(c,ii(i)),c=nn(c,ii(o)),c}_createItems(t){const r=this._active,a=this.chart.data,n=[],i=[],o=[];let c=[],u,h;for(u=0,h=r.length;u<h;++u)c.push(FQ(this.chart,r[u]));return t.filter&&(c=c.filter((m,f,p)=>t.filter(m,f,p,a))),t.itemSort&&(c=c.sort((m,f)=>t.itemSort(m,f,a))),Et(c,m=>{const f=YS(t.callbacks,m);n.push(Sr(f,"labelColor",this,m)),i.push(Sr(f,"labelPointStyle",this,m)),o.push(Sr(f,"labelTextColor",this,m))}),this.labelColors=n,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=c,c}update(t,r){const a=this.options.setContext(this.getContext()),n=this._active;let i,o=[];if(!n.length)this.opacity!==0&&(i={opacity:0});else{const c=Oh[a.position].call(this,n,this._eventPosition);o=this._createItems(a),this.title=this.getTitle(o,a),this.beforeBody=this.getBeforeBody(o,a),this.body=this.getBody(o,a),this.afterBody=this.getAfterBody(o,a),this.footer=this.getFooter(o,a);const u=this._size=VS(this,a),h=Object.assign({},c,u),m=HS(this.chart,a,h),f=qS(a,h,m,this.chart);this.xAlign=m.xAlign,this.yAlign=m.yAlign,i={opacity:1,x:f.x,y:f.y,width:u.width,height:u.height,caretX:c.x,caretY:c.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&a.external&&a.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(t,r,a,n){const i=this.getCaretPosition(t,a,n);r.lineTo(i.x1,i.y1),r.lineTo(i.x2,i.y2),r.lineTo(i.x3,i.y3)}getCaretPosition(t,r,a){const{xAlign:n,yAlign:i}=this,{caretSize:o,cornerRadius:c}=a,{topLeft:u,topRight:h,bottomLeft:m,bottomRight:f}=od(c),{x:p,y:j}=t,{width:g,height:v}=r;let y,N,S,k,_,T;return i==="center"?(_=j+v/2,n==="left"?(y=p,N=y-o,k=_+o,T=_-o):(y=p+g,N=y+o,k=_-o,T=_+o),S=y):(n==="left"?N=p+Math.max(u,m)+o:n==="right"?N=p+g-Math.max(h,f)-o:N=this.caretX,i==="top"?(k=j,_=k-o,y=N-o,S=N+o):(k=j+v,_=k+o,y=N+o,S=N-o),T=k),{x1:y,x2:N,x3:S,y1:k,y2:_,y3:T}}drawTitle(t,r,a){const n=this.title,i=n.length;let o,c,u;if(i){const h=cd(a.rtl,this.x,this.width);for(t.x=rf(this,a.titleAlign,a),r.textAlign=h.textAlign(a.titleAlign),r.textBaseline="middle",o=cr(a.titleFont),c=a.titleSpacing,r.fillStyle=a.titleColor,r.font=o.string,u=0;u<i;++u)r.fillText(n[u],h.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+c,u+1===i&&(t.y+=a.titleMarginBottom-c)}}_drawColorBox(t,r,a,n,i){const o=this.labelColors[a],c=this.labelPointStyles[a],{boxHeight:u,boxWidth:h}=i,m=cr(i.bodyFont),f=rf(this,"left",i),p=n.x(f),j=u<m.lineHeight?(m.lineHeight-u)/2:0,g=r.y+j;if(i.usePointStyle){const v={radius:Math.min(h,u)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},y=n.leftForLtr(p,h)+h/2,N=g+u/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,Iw(t,v,y,N),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Iw(t,v,y,N)}else{t.lineWidth=ft(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const v=n.leftForLtr(p,h),y=n.leftForLtr(n.xPlus(p,1),h-2),N=od(o.borderRadius);Object.values(N).some(S=>S!==0)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,np(t,{x:v,y:g,w:h,h:u,radius:N}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),np(t,{x:y,y:g+1,w:h-2,h:u-2,radius:N}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(v,g,h,u),t.strokeRect(v,g,h,u),t.fillStyle=o.backgroundColor,t.fillRect(y,g+1,h-2,u-2))}t.fillStyle=this.labelTextColors[a]}drawBody(t,r,a){const{body:n}=this,{bodySpacing:i,bodyAlign:o,displayColors:c,boxHeight:u,boxWidth:h,boxPadding:m}=a,f=cr(a.bodyFont);let p=f.lineHeight,j=0;const g=cd(a.rtl,this.x,this.width),v=function(M){r.fillText(M,g.x(t.x+j),t.y+p/2),t.y+=p+i},y=g.textAlign(o);let N,S,k,_,T,E,z;for(r.textAlign=o,r.textBaseline="middle",r.font=f.string,t.x=rf(this,y,a),r.fillStyle=a.bodyColor,Et(this.beforeBody,v),j=c&&y!=="right"?o==="center"?h/2+m:h+2+m:0,_=0,E=n.length;_<E;++_){for(N=n[_],S=this.labelTextColors[_],r.fillStyle=S,Et(N.before,v),k=N.lines,c&&k.length&&(this._drawColorBox(r,t,_,g,a),p=Math.max(f.lineHeight,u)),T=0,z=k.length;T<z;++T)v(k[T]),p=f.lineHeight;Et(N.after,v)}j=0,p=f.lineHeight,Et(this.afterBody,v),t.y-=i}drawFooter(t,r,a){const n=this.footer,i=n.length;let o,c;if(i){const u=cd(a.rtl,this.x,this.width);for(t.x=rf(this,a.footerAlign,a),t.y+=a.footerMarginTop,r.textAlign=u.textAlign(a.footerAlign),r.textBaseline="middle",o=cr(a.footerFont),r.fillStyle=a.footerColor,r.font=o.string,c=0;c<i;++c)r.fillText(n[c],u.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a.footerSpacing}}drawBackground(t,r,a,n){const{xAlign:i,yAlign:o}=this,{x:c,y:u}=t,{width:h,height:m}=a,{topLeft:f,topRight:p,bottomLeft:j,bottomRight:g}=od(n.cornerRadius);r.fillStyle=n.backgroundColor,r.strokeStyle=n.borderColor,r.lineWidth=n.borderWidth,r.beginPath(),r.moveTo(c+f,u),o==="top"&&this.drawCaret(t,r,a,n),r.lineTo(c+h-p,u),r.quadraticCurveTo(c+h,u,c+h,u+p),o==="center"&&i==="right"&&this.drawCaret(t,r,a,n),r.lineTo(c+h,u+m-g),r.quadraticCurveTo(c+h,u+m,c+h-g,u+m),o==="bottom"&&this.drawCaret(t,r,a,n),r.lineTo(c+j,u+m),r.quadraticCurveTo(c,u+m,c,u+m-j),o==="center"&&i==="left"&&this.drawCaret(t,r,a,n),r.lineTo(c,u+f),r.quadraticCurveTo(c,u,c+f,u),r.closePath(),r.fill(),n.borderWidth>0&&r.stroke()}_updateAnimationTarget(t){const r=this.chart,a=this.$animations,n=a&&a.x,i=a&&a.y;if(n||i){const o=Oh[t.position].call(this,this._active,this._eventPosition);if(!o)return;const c=this._size=VS(this,t),u=Object.assign({},o,this._size),h=HS(r,t,u),m=qS(t,u,h,r);(n._to!==m.x||i._to!==m.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=c.width,this.height=c.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,m))}}_willRender(){return!!this.opacity}draw(t){const r=this.options.setContext(this.getContext());let a=this.opacity;if(!a)return;this._updateAnimationTarget(r);const n={width:this.width,height:this.height},i={x:this.x,y:this.y};a=Math.abs(a)<.001?0:a;const o=Ca(r.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&c&&(t.save(),t.globalAlpha=a,this.drawBackground(i,t,n,r),jD(t,r.textDirection),i.y+=o.top,this.drawTitle(i,t,r),this.drawBody(i,t,r),this.drawFooter(i,t,r),wD(t,r.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,r){const a=this._active,n=t.map(({datasetIndex:c,index:u})=>{const h=this.chart.getDatasetMeta(c);if(!h)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:h.data[u],index:u}}),i=!sp(a,n),o=this._positionChanged(n,r);(i||o)&&(this._active=n,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,r,a=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,i=this._active||[],o=this._getActiveElements(t,i,r,a),c=this._positionChanged(o,t),u=r||!sp(o,i)||c;return u&&(this._active=o,(n.enabled||n.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,r))),u}_getActiveElements(t,r,a,n){const i=this.options;if(t.type==="mouseout")return[];if(!n)return r.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,i.mode,i,a);return i.reverse&&o.reverse(),o}_positionChanged(t,r){const{caretX:a,caretY:n,options:i}=this,o=Oh[i.position].call(this,t,r);return o!==!1&&(a!==o.x||n!==o.y)}}var JD={id:"tooltip",_element:GS,positioners:Oh,afterInit(s,t,r){r&&(s.tooltip=new GS({chart:s,options:r}))},beforeUpdate(s,t,r){s.tooltip&&s.tooltip.initialize(r)},reset(s,t,r){s.tooltip&&s.tooltip.initialize(r)},afterDraw(s){const t=s.tooltip;if(t&&t._willRender()){const r={tooltip:t};if(s.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0})===!1)return;t.draw(s.ctx),s.notifyPlugins("afterTooltipDraw",r)}},afterEvent(s,t){if(s.tooltip){const r=t.replay;s.tooltip.handleEvent(t.event,r,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(s,t)=>t.bodyFont.size,boxWidth:(s,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:QD},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:s=>s!=="filter"&&s!=="itemSort"&&s!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const qQ=(s,t,r,a)=>(typeof t=="string"?(r=s.push(t)-1,a.unshift({index:r,label:t})):isNaN(t)&&(r=null),r);function WQ(s,t,r,a){const n=s.indexOf(t);if(n===-1)return qQ(s,t,r,a);const i=s.lastIndexOf(t);return n!==i?r:n}const YQ=(s,t)=>s===null?null:or(Math.round(s),0,t);function KS(s){const t=this.getLabels();return s>=0&&s<t.length?t[s]:s}class e8 extends zd{static id="category";static defaults={ticks:{callback:KS}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const r=this._addedLabels;if(r.length){const a=this.getLabels();for(const{index:n,label:i}of r)a[n]===i&&a.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,r){if(St(t))return null;const a=this.getLabels();return r=isFinite(r)&&a[r]===t?r:WQ(a,t,lt(r,t),this._addedLabels),YQ(r,a.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:a,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(a=0),r||(n=this.getLabels().length-1)),this.min=a,this.max=n}buildTicks(){const t=this.min,r=this.max,a=this.options.offset,n=[];let i=this.getLabels();i=t===0&&r===i.length-1?i:i.slice(t,r+1),this._valueRange=Math.max(i.length-(a?0:1),1),this._startValue=this.min-(a?.5:0);for(let o=t;o<=r;o++)n.push({value:o});return n}getLabelForValue(t){return KS.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function GQ(s,t){const r=[],{bounds:n,step:i,min:o,max:c,precision:u,count:h,maxTicks:m,maxDigits:f,includeBounds:p}=s,j=i||1,g=m-1,{min:v,max:y}=t,N=!St(o),S=!St(c),k=!St(h),_=(y-v)/(f+1);let T=qk((y-v)/g/j)*j,E,z,M,C;if(T<1e-14&&!N&&!S)return[{value:v},{value:y}];C=Math.ceil(y/T)-Math.floor(v/T),C>g&&(T=qk(C*T/g/j)*j),St(u)||(E=Math.pow(10,u),T=Math.ceil(T*E)/E),n==="ticks"?(z=Math.floor(v/T)*T,M=Math.ceil(y/T)*T):(z=v,M=y),N&&S&&i&&QG((c-o)/i,T/1e3)?(C=Math.round(Math.min((c-o)/T,m)),T=(c-o)/C,z=o,M=c):k?(z=N?o:z,M=S?c:M,C=h-1,T=(M-z)/C):(C=(M-z)/T,Kh(C,Math.round(C),T/1e3)?C=Math.round(C):C=Math.ceil(C));const A=Math.max(Wk(T),Wk(z));E=Math.pow(10,St(u)?A:u),z=Math.round(z*E)/E,M=Math.round(M*E)/E;let Z=0;for(N&&(p&&z!==o?(r.push({value:o}),z<o&&Z++,Kh(Math.round((z+Z*T)*E)/E,o,XS(o,_,s))&&Z++):z<o&&Z++);Z<C;++Z){const I=Math.round((z+Z*T)*E)/E;if(S&&I>c)break;r.push({value:I})}return S&&p&&M!==c?r.length&&Kh(r[r.length-1].value,c,XS(c,_,s))?r[r.length-1].value=c:r.push({value:c}):(!S||M===c)&&r.push({value:M}),r}function XS(s,t,{horizontal:r,minRotation:a}){const n=ui(a),i=(r?Math.sin(n):Math.cos(n))||.001,o=.75*t*(""+s).length;return Math.min(t/i,o)}class KQ extends zd{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,r){return St(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:r,maxDefined:a}=this.getUserBounds();let{min:n,max:i}=this;const o=u=>n=r?n:u,c=u=>i=a?i:u;if(t){const u=bn(n),h=bn(i);u<0&&h<0?c(0):u>0&&h>0&&o(0)}if(n===i){let u=i===0?1:Math.abs(i*.05);c(i+u),t||o(n-u)}this.min=n,this.max=i}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:r,stepSize:a}=t,n;return a?(n=Math.ceil(this.max/a)-Math.floor(this.min/a)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${a} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),r=r||11),r&&(n=Math.min(r,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,r=t.ticks;let a=this.getTickLimit();a=Math.max(2,a);const n={maxTicks:a,bounds:t.bounds,min:t.min,max:t.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},i=this._range||this,o=GQ(n,i);return t.bounds==="ticks"&&JG(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let r=this.min,a=this.max;if(super.configure(),this.options.offset&&t.length){const n=(a-r)/Math.max(t.length-1,1)/2;r-=n,a+=n}this._startValue=r,this._endValue=a,this._valueRange=a-r}getLabelForValue(t){return w1(t,this.chart.options.locale,this.options.ticks.format)}}class t8 extends KQ{static id="linear";static defaults={ticks:{callback:mD.formatters.numeric}};determineDataLimits(){const{min:t,max:r}=this.getMinMax(!0);this.min=ur(t)?t:0,this.max=ur(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),r=t?this.width:this.height,a=ui(this.options.ticks.minRotation),n=(t?Math.sin(a):Math.cos(a))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,i.lineHeight/n))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const Op={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Cr=Object.keys(Op);function ZS(s,t){return s-t}function QS(s,t){if(St(t))return null;const r=s._adapter,{parser:a,round:n,isoWeekday:i}=s._parseOpts;let o=t;return typeof a=="function"&&(o=a(o)),ur(o)||(o=typeof a=="string"?r.parse(o,a):r.parse(o)),o===null?null:(n&&(o=n==="week"&&(ym(i)||i===!0)?r.startOf(o,"isoWeek",i):r.startOf(o,n)),+o)}function JS(s,t,r,a){const n=Cr.length;for(let i=Cr.indexOf(s);i<n-1;++i){const o=Op[Cr[i]],c=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((r-t)/(c*o.size))<=a)return Cr[i]}return Cr[n-1]}function XQ(s,t,r,a,n){for(let i=Cr.length-1;i>=Cr.indexOf(r);i--){const o=Cr[i];if(Op[o].common&&s._adapter.diff(n,a,o)>=t-1)return o}return Cr[r?Cr.indexOf(r):0]}function ZQ(s){for(let t=Cr.indexOf(s)+1,r=Cr.length;t<r;++t)if(Op[Cr[t]].common)return Cr[t]}function e3(s,t,r){if(!r)s[t]=!0;else if(r.length){const{lo:a,hi:n}=y1(r,t),i=r[a]>=t?r[a]:r[n];s[i]=!0}}function QQ(s,t,r,a){const n=s._adapter,i=+n.startOf(t[0].value,a),o=t[t.length-1].value;let c,u;for(c=i;c<=o;c=+n.add(c,1,a))u=r[c],u>=0&&(t[u].major=!0);return t}function t3(s,t,r){const a=[],n={},i=t.length;let o,c;for(o=0;o<i;++o)c=t[o],n[c]=o,a.push({value:c,major:!1});return i===0||!r?a:QQ(s,a,n,r)}class s3 extends zd{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,r={}){const a=t.time||(t.time={}),n=this._adapter=new FX._date(t.adapters.date);n.init(r),Gh(a.displayFormats,n.formats()),this._parseOpts={parser:a.parser,round:a.round,isoWeekday:a.isoWeekday},super.init(t),this._normalized=r.normalized}parse(t,r){return t===void 0?null:QS(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,r=this._adapter,a=t.time.unit||"day";let{min:n,max:i,minDefined:o,maxDefined:c}=this.getUserBounds();function u(h){!o&&!isNaN(h.min)&&(n=Math.min(n,h.min)),!c&&!isNaN(h.max)&&(i=Math.max(i,h.max))}(!o||!c)&&(u(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&u(this.getMinMax(!1))),n=ur(n)&&!isNaN(n)?n:+r.startOf(Date.now(),a),i=ur(i)&&!isNaN(i)?i:+r.endOf(Date.now(),a)+1,this.min=Math.min(n,i-1),this.max=Math.max(n+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY;return t.length&&(r=t[0],a=t[t.length-1]),{min:r,max:a}}buildTicks(){const t=this.options,r=t.time,a=t.ticks,n=a.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const i=this.min,o=this.max,c=aK(n,i,o);return this._unit=r.unit||(a.autoSkip?JS(r.minUnit,this.min,this.max,this._getLabelCapacity(i)):XQ(this,c.length,r.minUnit,this.min,this.max)),this._majorUnit=!a.major.enabled||this._unit==="year"?void 0:ZQ(this._unit),this.initOffsets(n),t.reverse&&c.reverse(),t3(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let r=0,a=0,n,i;this.options.offset&&t.length&&(n=this.getDecimalForValue(t[0]),t.length===1?r=1-n:r=(this.getDecimalForValue(t[1])-n)/2,i=this.getDecimalForValue(t[t.length-1]),t.length===1?a=i:a=(i-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;r=or(r,0,o),a=or(a,0,o),this._offsets={start:r,end:a,factor:1/(r+1+a)}}_generate(){const t=this._adapter,r=this.min,a=this.max,n=this.options,i=n.time,o=i.unit||JS(i.minUnit,r,a,this._getLabelCapacity(r)),c=lt(n.ticks.stepSize,1),u=o==="week"?i.isoWeekday:!1,h=ym(u)||u===!0,m={};let f=r,p,j;if(h&&(f=+t.startOf(f,"isoWeek",u)),f=+t.startOf(f,h?"day":o),t.diff(a,r,o)>1e5*c)throw new Error(r+" and "+a+" are too far apart with stepSize of "+c+" "+o);const g=n.ticks.source==="data"&&this.getDataTimestamps();for(p=f,j=0;p<a;p=+t.add(p,c,o),j++)e3(m,p,g);return(p===a||n.bounds==="ticks"||j===1)&&e3(m,p,g),Object.keys(m).sort(ZS).map(v=>+v)}getLabelForValue(t){const r=this._adapter,a=this.options.time;return a.tooltipFormat?r.format(t,a.tooltipFormat):r.format(t,a.displayFormats.datetime)}format(t,r){const n=this.options.time.displayFormats,i=this._unit,o=r||n[i];return this._adapter.format(t,o)}_tickFormatFunction(t,r,a,n){const i=this.options,o=i.ticks.callback;if(o)return Wt(o,[t,r,a],this);const c=i.time.displayFormats,u=this._unit,h=this._majorUnit,m=u&&c[u],f=h&&c[h],p=a[r],j=h&&f&&p&&p.major;return this._adapter.format(t,n||(j?f:m))}generateTickLabels(t){let r,a,n;for(r=0,a=t.length;r<a;++r)n=t[r],n.label=this._tickFormatFunction(n.value,r,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const r=this._offsets,a=this.getDecimalForValue(t);return this.getPixelForDecimal((r.start+a)*r.factor)}getValueForPixel(t){const r=this._offsets,a=this.getDecimalForPixel(t)/r.factor-r.end;return this.min+a*(this.max-this.min)}_getLabelSize(t){const r=this.options.ticks,a=this.ctx.measureText(t).width,n=ui(this.isHorizontal()?r.maxRotation:r.minRotation),i=Math.cos(n),o=Math.sin(n),c=this._resolveTickFontOptions(0).size;return{w:a*i+c*o,h:a*o+c*i}}_getLabelCapacity(t){const r=this.options.time,a=r.displayFormats,n=a[r.unit]||a.millisecond,i=this._tickFormatFunction(t,0,t3(this,[t],this._majorUnit),n),o=this._getLabelSize(i),c=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return c>0?c:1}getDataTimestamps(){let t=this._cache.data||[],r,a;if(t.length)return t;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(r=0,a=n.length;r<a;++r)t=t.concat(n[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let r,a;if(t.length)return t;const n=this.getLabels();for(r=0,a=n.length;r<a;++r)t.push(QS(this,n[r]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return dD(t.sort(ZS))}}function af(s,t,r){let a=0,n=s.length-1,i,o,c,u;r?(t>=s[a].pos&&t<=s[n].pos&&({lo:a,hi:n}=Eo(s,"pos",t)),{pos:i,time:c}=s[a],{pos:o,time:u}=s[n]):(t>=s[a].time&&t<=s[n].time&&({lo:a,hi:n}=Eo(s,"time",t)),{time:i,pos:c}=s[a],{time:o,pos:u}=s[n]);const h=o-i;return h?c+(u-c)*(t-i)/h:c}class Aae extends s3{static id="timeseries";static defaults=s3.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(t);this._minPos=af(r,this.min),this._tableRange=af(r,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:r,max:a}=this,n=[],i=[];let o,c,u,h,m;for(o=0,c=t.length;o<c;++o)h=t[o],h>=r&&h<=a&&n.push(h);if(n.length<2)return[{time:r,pos:0},{time:a,pos:1}];for(o=0,c=n.length;o<c;++o)m=n[o+1],u=n[o-1],h=n[o],Math.round((m+u)/2)!==h&&i.push({time:h,pos:o/(c-1)});return i}_generate(){const t=this.min,r=this.max;let a=super.getDataTimestamps();return(!a.includes(t)||!a.length)&&a.splice(0,0,t),(!a.includes(r)||a.length===1)&&a.push(r),a.sort((n,i)=>n-i)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const r=this.getDataTimestamps(),a=this.getLabelTimestamps();return r.length&&a.length?t=this.normalize(r.concat(a)):t=r.length?r:a,t=this._cache.all=t,t}getDecimalForValue(t){return(af(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const r=this._offsets,a=this.getDecimalForPixel(t)/r.factor-r.end;return af(this._table,a*this._tableRange+this._minPos,!0)}}const s8="label";function r3(s,t){typeof s=="function"?s(t):s&&(s.current=t)}function JQ(s,t){const r=s.options;r&&t&&Object.assign(r,t)}function r8(s,t){s.labels=t}function a8(s,t,r=s8){const a=[];s.datasets=t.map(n=>{const i=s.datasets.find(o=>o[r]===n[r]);return!i||!n.data||a.includes(i)?{...n}:(a.push(i),Object.assign(i,n),i)})}function eJ(s,t=s8){const r={labels:[],datasets:[]};return r8(r,s.labels),a8(r,s.datasets,t),r}function tJ(s,t){const{height:r=150,width:a=300,redraw:n=!1,datasetIdKey:i,type:o,data:c,options:u,plugins:h=[],fallbackContent:m,updateMode:f,...p}=s,j=w.useRef(null),g=w.useRef(null),v=()=>{j.current&&(g.current=new Bm(j.current,{type:o,data:eJ(c,i),options:u&&{...u},plugins:h}),r3(t,g.current))},y=()=>{r3(t,null),g.current&&(g.current.destroy(),g.current=null)};return w.useEffect(()=>{!n&&g.current&&u&&JQ(g.current,u)},[n,u]),w.useEffect(()=>{!n&&g.current&&r8(g.current.config.data,c.labels)},[n,c.labels]),w.useEffect(()=>{!n&&g.current&&c.datasets&&a8(g.current.config.data,c.datasets,i)},[n,c.datasets]),w.useEffect(()=>{g.current&&(n?(y(),setTimeout(v)):g.current.update(f))},[n,u,c.labels,c.datasets,f]),w.useEffect(()=>{g.current&&(y(),setTimeout(v))},[o]),w.useEffect(()=>(v(),()=>y()),[]),e.jsx("canvas",{ref:j,role:"img",height:r,width:a,...p,children:m})}const sJ=w.forwardRef(tJ);function A1(s,t){return Bm.register(t),w.forwardRef((r,a)=>e.jsx(sJ,{...r,ref:a,type:s}))}const n8=A1("line",BX),rJ=A1("bar",OX),i8=A1("doughnut",PX);Bm.register(e8,t8,UD,Fm,HD,zD,ZD,JD,KD,YD);const aJ=()=>{const[s,t]=w.useState(!0),[r,a]=w.useState(!1),[n,i]=w.useState(7),[o,c]=w.useState("users"),[u,h]=w.useState(null),[m,f]=w.useState([]),p=w.useCallback((C,A="info")=>{const Z=Date.now().toString();f(I=>[...I,{id:Z,message:C,type:A}]),setTimeout(()=>{f(I=>I.filter(V=>V.id!==Z))},4e3)},[]),j=w.useCallback(async()=>{t(!0);try{const C=await Bk.getDashboard(n);C.success?(h(C.data),p("  ","success")):p("   ","error")}catch(C){console.error("Error loading analytics:",C),p("   ","error")}finally{t(!1)}},[n,p]);w.useEffect(()=>{j()},[j]);const g=w.useCallback(()=>{j()},[j]),v=w.useCallback(C=>{i(C)},[]),y=w.useCallback(async()=>{a(!0);try{const C=await Bk.exportAnalytics("json",n);if(C.success){const A=JSON.stringify(C,null,2),Z=new Blob([A],{type:"application/json"}),I=URL.createObjectURL(Z),V=document.createElement("a");V.href=I,V.download=`analytics_report_${n}days_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(V),V.click(),document.body.removeChild(V),URL.revokeObjectURL(I),p("  ","success")}else p("  ","error")}catch(C){console.error("Error exporting report:",C),p("  ","error")}finally{a(!1)}},[n,p]),N=w.useCallback(()=>{p("       ","info")},[p]),S=w.useMemo(()=>{if(!u)return null;let C=[],A=[],Z="",I="",V="";if(o==="users"&&u.user_statistics?.daily_registrations)C=u.user_statistics.daily_registrations.map(R=>new Date(R.date).toLocaleDateString("ru-RU",{day:"numeric",month:"short"})),A=u.user_statistics.daily_registrations.map(R=>R.registrations),Z=" ",I="#667eea",V="rgba(102, 126, 234, 0.1)";else if(o==="projects"&&u.project_statistics?.daily_projects)C=u.project_statistics.daily_projects.map(R=>new Date(R.date).toLocaleDateString("ru-RU",{day:"numeric",month:"short"})),A=u.project_statistics.daily_projects.map(R=>R.projects),Z=" ",I="#28a745",V="rgba(40, 167, 69, 0.1)";else if(o==="revenue"){const R=n;C=Array.from({length:R},(J,se)=>{const Y=new Date;return Y.setDate(Y.getDate()-(R-1-se)),Y.toLocaleDateString("ru-RU",{day:"numeric",month:"short"})});const q=5e4;A=Array.from({length:R},(J,se)=>Math.round(q+Math.random()*25e3+se*500)),Z=" ()",I="#ffc107",V="rgba(255, 193, 7, 0.1)"}return{labels:C,datasets:[{label:Z,data:A,borderColor:I,backgroundColor:V,tension:.4,fill:!0,pointBackgroundColor:I,pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6}]}},[u,o,n]),k=w.useMemo(()=>{if(!u?.project_statistics?.status_distribution)return null;const C=u.project_statistics.status_distribution;return{labels:["","",""," ","","",""],datasets:[{data:[C.new||0,C.review||0,C.accepted||0,C.in_progress||0,C.testing||0,C.completed||0,C.cancelled||0],backgroundColor:["#17a2b8","#ffc107","#28a745","#007bff","#6f42c1","#20c997","#dc3545"],borderWidth:0}]}},[u]),_=w.useMemo(()=>({labels:["","","",""],datasets:[{label:" ",data:[15,25,12,8],backgroundColor:["#28a745","#ffc107","#fd7e14","#dc3545"],borderRadius:8}]}),[]),T={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:"#fff",font:{size:12}}}},scales:{y:{beginAtZero:!0,ticks:{color:"#9ca3af"},grid:{color:"rgba(255, 255, 255, 0.1)"}},x:{ticks:{color:"#9ca3af"},grid:{color:"rgba(255, 255, 255, 0.1)"}}}},E={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:"#fff",font:{size:11}}}}},z=C=>new Intl.NumberFormat("ru-RU").format(Math.round(C)),M=C=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0,maximumFractionDigits:0}).format(C);return s&&!u?e.jsx("div",{className:"p-8 flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Dt,{className:"w-12 h-12 animate-spin text-purple-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:" ..."})]})}):e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-rose-500 to-orange-600 flex items-center justify-center shadow-lg shadow-rose-500/50",children:e.jsx(yn,{className:"w-6 h-6 text-gray-900"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"  "}),e.jsx("p",{className:"text-gray-600",children:"   "})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:g,disabled:s,className:"px-4 py-2.5 bg-gray-50 hover:bg-gray-100 text-gray-900 rounded-xl transition-all duration-300 flex items-center gap-2 border border-gray-200",children:[e.jsx(rs,{className:`w-4 h-4 ${s?"animate-spin":""}`}),e.jsx("span",{children:""})]}),e.jsxs("button",{onClick:y,disabled:r,className:"px-4 py-2.5 bg-gradient-to-br from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-gray-900 rounded-xl transition-all duration-300 flex items-center gap-2 shadow-lg shadow-green-500/50",children:[r?e.jsx(Dt,{className:"w-4 h-4 animate-spin"}):e.jsx(wt,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]}),e.jsxs("button",{onClick:N,className:"px-4 py-2.5 bg-gradient-to-br from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700 text-gray-900 rounded-xl transition-all duration-300 flex items-center gap-2 shadow-lg shadow-blue-500/50",children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsx("span",{children:"  "})]})]})]}),e.jsx("div",{className:"bg-white backdrop-blur-sm border border-gray-200 rounded-2xl p-6",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-gray-900 font-semibold mb-1",children:" "}),e.jsx("p",{className:"text-sm text-gray-600",children:"    "})]}),e.jsx("div",{className:"flex gap-2",children:[7,30,90,365].map(C=>e.jsx("button",{onClick:()=>v(C),className:`px-6 py-2.5 rounded-xl font-medium transition-all duration-300 ${n===C?"bg-gradient-to-br from-purple-500 to-pink-500 text-gray-900 shadow-lg":"bg-white text-gray-600 hover:bg-gray-50 hover:text-gray-900 border border-gray-200"}`,children:C===7?"7 ":C===30?"30 ":C===90?"90 ":""},C))})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-500/20 to-pink-500/20 backdrop-blur-sm border border-purple-500/30 rounded-2xl p-6 hover:scale-105 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center shadow-lg",children:e.jsx(tt,{className:"w-6 h-6 text-gray-900"})}),e.jsxs("span",{className:"text-xs text-purple-300 bg-purple-500/20 px-2 py-1 rounded-lg",children:["+",u?.user_statistics?.new_users||0,"  "]})]}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-1",children:z(u?.user_statistics?.total_users||0)}),e.jsx("p",{className:"text-purple-200",children:" "})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500/20 to-emerald-500/20 backdrop-blur-sm border border-green-500/30 rounded-2xl p-6 hover:scale-105 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center shadow-lg",children:e.jsx(ct,{className:"w-6 h-6 text-gray-900"})}),e.jsx("span",{className:"text-xs text-green-300 bg-green-500/20 px-2 py-1 rounded-lg",children:"  "})]}),e.jsxs("h3",{className:"text-3xl font-bold text-gray-900 mb-1",children:[(u?.conversion_funnel?.overall_conversion||0).toFixed(1),"%"]}),e.jsx("p",{className:"text-green-200",children:" "})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500/20 to-cyan-500/20 backdrop-blur-sm border border-blue-500/30 rounded-2xl p-6 hover:scale-105 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center shadow-lg",children:e.jsx(Ge,{className:"w-6 h-6 text-gray-900"})}),e.jsxs("span",{className:"text-xs text-blue-300 bg-blue-500/20 px-2 py-1 rounded-lg",children:[". : ",M(u?.financial_report?.avg_check||0)]})]}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-1",children:M(u?.financial_report?.total_revenue||0)}),e.jsx("p",{className:"text-blue-200",children:""})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-500/20 to-orange-500/20 backdrop-blur-sm border border-amber-500/30 rounded-2xl p-6 hover:scale-105 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-amber-500 to-orange-500 flex items-center justify-center shadow-lg",children:e.jsx(Ps,{className:"w-6 h-6 text-gray-900"})}),e.jsx("span",{className:"text-xs text-amber-300 bg-amber-500/20 px-2 py-1 rounded-lg",children:"AI "})]}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-1",children:(u?.consultant_statistics?.avg_rating||0).toFixed(1)}),e.jsx("p",{className:"text-amber-200",children:" "})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white backdrop-blur-sm border border-gray-200 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Lh,{className:"w-5 h-5 text-purple-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" "})]}),e.jsx("div",{className:"flex gap-2",children:["users","projects","revenue"].map(C=>e.jsx("button",{onClick:()=>c(C),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 ${o===C?"bg-gradient-to-br from-purple-500 to-pink-500 text-gray-900":"bg-white text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:C==="users"?"":C==="projects"?"":""},C))})]}),e.jsx("div",{className:"h-[300px]",children:S&&e.jsx(n8,{data:S,options:T})})]}),e.jsxs("div",{className:"bg-white backdrop-blur-sm border border-gray-200 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Ar,{className:"w-5 h-5 text-purple-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" "})]}),e.jsx("div",{className:"space-y-3",children:[{label:"",value:u?.conversion_funnel?.total_users||0,width:100,gradient:"from-purple-500 to-pink-500"},{label:" ",value:u?.conversion_funnel?.users_with_projects||0,width:u?.conversion_funnel?.project_creation_rate||0,gradient:"from-blue-500 to-cyan-500"},{label:" ",value:u?.conversion_funnel?.users_with_accepted_projects||0,width:u?.conversion_funnel?.project_acceptance_rate||0,gradient:"from-green-500 to-emerald-500"},{label:" ",value:u?.conversion_funnel?.users_with_completed_projects||0,width:u?.conversion_funnel?.project_completion_rate||0,gradient:"from-amber-500 to-orange-500"}].map((C,A)=>e.jsx("div",{className:"group",children:e.jsx("div",{className:`bg-gradient-to-br ${C.gradient} rounded-xl p-4 transition-all duration-300 hover:scale-105 hover:shadow-lg`,style:{width:`${C.width}%`},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-900 text-sm font-medium",children:C.label}),e.jsx("span",{className:"text-gray-900 text-lg font-bold bg-gray-100 px-2 py-1 rounded-lg",children:C.value})]})})},A))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white backdrop-blur-sm border border-gray-200 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Lh,{className:"w-5 h-5 text-purple-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" "})]}),e.jsx("div",{className:"h-[300px]",children:k&&e.jsx(i8,{data:k,options:E})})]}),e.jsxs("div",{className:"bg-white backdrop-blur-sm border border-gray-200 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx($f,{className:"w-5 h-5 text-purple-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" "})]}),e.jsx("div",{className:"h-[300px]",children:e.jsx(rJ,{data:_,options:T})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white backdrop-blur-sm border border-gray-200 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Ua,{className:"w-5 h-5 text-purple-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" "})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[{label:"  AI",value:`${(u?.performance_metrics?.avg_response_time||0).toFixed(1)}`},{label:"  ",value:`${(u?.performance_metrics?.avg_acceptance_time||0).toFixed(1)}`},{label:" ",value:`${(u?.performance_metrics?.avg_development_time||0).toFixed(1)}`},{label:" ",value:`${(u?.performance_metrics?.time_estimation_accuracy||0).toFixed(1)}%`}].map((C,A)=>e.jsxs("div",{className:"bg-white rounded-xl p-4 hover:bg-gray-50 transition-all duration-300",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:C.value}),e.jsx("div",{className:"text-sm text-gray-600",children:C.label})]},A))}),e.jsx("div",{className:"space-y-4",children:[{label:"  AI",value:(u?.consultant_statistics?.avg_rating||0)*20,color:"bg-green-500"},{label:"  ",value:u?.conversion_funnel?.overall_conversion||0,color:"bg-blue-500"},{label:" ",value:u?.engagement_metrics?.retention_rate||0,color:"bg-cyan-500"}].map((C,A)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-700",children:C.label}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[C.value.toFixed(1),"%"]})]}),e.jsx("div",{className:"h-2 bg-gray-50 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${C.color} rounded-full transition-all duration-500`,style:{width:`${C.value}%`}})})]},A))})]}),e.jsxs("div",{className:"bg-white backdrop-blur-sm border border-gray-200 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Lh,{className:"w-5 h-5 text-purple-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" "})]}),e.jsx("div",{className:"space-y-4",children:[{label:"  (DAU)",value:u?.engagement_metrics?.daily_active_users||0,width:75},{label:"   ",value:u?.project_statistics?.new_projects||0,width:60},{label:" ",value:u?.project_statistics?.completed_projects||0,width:45},{label:" ",value:u?.consultant_statistics?.new_sessions||0,width:85},{label:"   ",value:M(u?.financial_report?.avg_check||0),width:70,isString:!0}].map((C,A)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:C.label}),e.jsx("div",{className:"h-8 bg-gray-50 rounded-lg overflow-hidden relative",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-emerald-500 transition-all duration-500",style:{width:`${C.width}%`}})})]}),e.jsx("div",{className:"text-lg font-bold text-gray-900 min-w-[80px] text-right",children:C.isString?C.value:z(C.value)})]},A))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white backdrop-blur-sm border border-gray-200 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx($f,{className:"w-5 h-5 text-purple-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"   "})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-600",children:""}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-600",children:""}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-600",children:""})]})}),e.jsx("tbody",{children:[{name:"@user123",projects:3,revenue:15e4},{name:"@company_bot",projects:2,revenue:12e4},{name:"@startup_xyz",projects:1,revenue:8e4},{name:"@ecommerce_pro",projects:2,revenue:75e3},{name:"@crypto_trader",projects:1,revenue:6e4}].map((C,A)=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-white transition-colors",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-gray-900 text-xs font-bold",children:A+1}),e.jsx("span",{className:"text-gray-900",children:C.name})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-300 rounded-lg text-sm",children:C.projects})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-gray-900 font-semibold",children:M(C.revenue)})})]},A))})]})})]}),e.jsxs("div",{className:"bg-white backdrop-blur-sm border border-gray-200 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Ie,{className:"w-5 h-5 text-purple-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"  "})]}),e.jsx("div",{className:"space-y-4",children:u?.consultant_statistics?.popular_topics&&Object.keys(u.consultant_statistics.popular_topics).length>0?Object.entries(u.consultant_statistics.popular_topics).sort(([,C],[,A])=>A-C).slice(0,5).map(([C,A],Z)=>{const I=Math.max(...Object.values(u.consultant_statistics?.popular_topics||{})),V=A/I*100;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-700",children:C}),e.jsx("span",{className:"px-2 py-1 bg-purple-500/20 text-purple-300 rounded-lg text-xs font-semibold",children:A})]}),e.jsx("div",{className:"h-2 bg-gray-50 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-pink-500 rounded-full transition-all duration-500",style:{width:`${V}%`}})})]},Z)}):e.jsx("p",{className:"text-center text-gray-600 py-8",children:"   "})})]})]}),e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:m.map(C=>e.jsx("div",{className:`px-4 py-3 rounded-xl shadow-lg backdrop-blur-sm border transition-all duration-300 ${C.type==="success"?"bg-green-500/20 border-green-500/50 text-green-300":C.type==="error"?"bg-red-500/20 border-red-500/50 text-red-300":"bg-blue-500/20 border-blue-500/50 text-blue-300"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[C.type==="success"?e.jsx(ct,{className:"w-4 h-4"}):C.type==="error"?e.jsx(Sa,{className:"w-4 h-4"}):e.jsx(yn,{className:"w-4 h-4"}),e.jsx("span",{children:C.message})]})},C.id))})]})},jh={getDashboardMetrics:async()=>(await fe.get("/admin/api/reports/dashboard-metrics")).data,getProjectsReport:async s=>{const t={};return s?.start_date&&(t.start_date=s.start_date),s?.end_date&&(t.end_date=s.end_date),s?.status&&(t.status=s.status),s?.executor_id&&(t.executor_id=s.executor_id),(await fe.get("/admin/api/reports/projects",{params:t})).data},getFinancialReport:async s=>{const t={};return s?.start_date&&(t.start_date=s.start_date),s?.end_date&&(t.end_date=s.end_date),(await fe.get("/admin/api/reports/financial",{params:t})).data},getExecutorReport:async s=>(await fe.get(`/admin/api/reports/executor/${s}`)).data,getQuickStats:async(s="month")=>(await fe.get("/admin/api/reports/quick-stats",{params:{period:s}})).data,getPnLReport:async(s="month",t,r)=>{const a={period:s};return t&&(a.start_date=t),r&&(a.end_date=r),(await fe.get("/admin/api/reports/pnl",{params:a})).data},exportToExcel:async(s,t)=>{const r={report_type:s};t?.start_date&&(r.start_date=t.start_date),t?.end_date&&(r.end_date=t.end_date),t?.status&&(r.status=t.status),t?.executor_id&&(r.executor_id=t.executor_id);const a=await fe.get("/admin/api/reports/export/excel",{params:r,responseType:"blob"}),n=window.URL.createObjectURL(new Blob([a.data])),i=document.createElement("a");return i.href=n,i.setAttribute("download",`${s}_report_${new Date().toISOString().split("T")[0]}.xlsx`),document.body.appendChild(i),i.click(),i.remove(),{success:!0}}};Bm.register(e8,t8,UD,Fm,HD,zD,ZD,JD,KD,YD);const nJ=()=>{const[s,t]=w.useState(!0),[r,a]=w.useState("overview"),[n,i]=w.useState("week"),[o,c]=w.useState(null),[u,h]=w.useState(null),[m,f]=w.useState(null),[p,j]=w.useState(null),[g,v]=w.useState([]),[y,N]=w.useState(""),[S,k]=w.useState(""),[_,T]=w.useState(""),[E,z]=w.useState(""),[M,C]=w.useState([]),A=w.useCallback((oe,de="info")=>{const U=Date.now().toString();C(F=>[...F,{id:U,message:oe,type:de}]),setTimeout(()=>{C(F=>F.filter(Q=>Q.id!==U))},4e3)},[]),Z=w.useCallback(async()=>{try{const oe=await jh.getDashboardMetrics();oe.success&&c(oe.metrics)}catch(oe){console.error("Error loading dashboard metrics:",oe),A("   ","error")}},[A]),I=w.useCallback(async oe=>{try{const de=await jh.getQuickStats(oe);de.success&&h(de.stats)}catch(de){console.error("Error loading quick stats:",de),A("   ","error")}},[A]),V=w.useCallback(async()=>{try{const oe={};y&&(oe.start_date=y),S&&(oe.end_date=S),_&&(oe.status=_),E&&(oe.executor_id=parseInt(E));const de=await jh.getProjectsReport(oe);de.success&&f(de.report)}catch(oe){console.error("Error loading projects report:",oe),A("    ","error")}},[y,S,_,E,A]),R=w.useCallback(async()=>{try{const oe={};y&&(oe.start_date=y),S&&(oe.end_date=S);const de=await jh.getFinancialReport(oe);de.success&&j(de.report)}catch(oe){console.error("Error loading financial report:",oe),A("   ","error")}},[y,S,A]);w.useEffect(()=>{(async()=>{t(!0),await Promise.all([Z(),I(n)]),t(!1)})()},[Z,I,n]),w.useEffect(()=>{r==="financial"?R():r==="projects"&&V()},[r,R,V]);const q=oe=>{i(oe),J(oe),I(oe)},J=oe=>{const de=new Date;let U;switch(oe){case"today":U=de;break;case"week":U=new Date(de.getTime()-10080*60*1e3);break;case"month":U=new Date(de.getFullYear(),de.getMonth(),1);break;case"year":U=new Date(de.getFullYear(),0,1);break;default:U=new Date(de.getTime()-10080*60*1e3)}N(U.toISOString().split("T")[0]),k(de.toISOString().split("T")[0])},se=()=>{r==="financial"?R():r==="projects"&&V()},Y=async oe=>{try{const de={};y&&(de.start_date=y),S&&(de.end_date=S),oe==="projects"&&_&&(de.status=_),oe==="projects"&&E&&(de.executor_id=parseInt(E)),await jh.exportToExcel(oe,de),A("  ","success")}catch(de){console.error("Error exporting report:",de),A("  ","error")}},ee=async()=>{t(!0),await Promise.all([Z(),I(n)]),r==="financial"?await R():r==="projects"&&await V(),t(!1),A(" ","success")},te=oe=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",maximumFractionDigits:0}).format(oe),K=oe=>new Date(oe).toLocaleDateString("ru-RU",{year:"numeric",month:"short",day:"numeric"}),$=oe=>{const U={new:{label:"",className:"bg-blue-100 text-blue-700"},in_progress:{label:" ",className:"bg-yellow-100 text-yellow-700"},completed:{label:"",className:"bg-green-100 text-green-700"},overdue:{label:"",className:"bg-red-100 text-red-700"},cancelled:{label:"",className:"bg-gray-100 text-gray-700"}}[oe]||{label:oe,className:"bg-gray-100 text-gray-700"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${U.className}`,children:U.label})},le=w.useMemo(()=>p?.monthly_data?{labels:p.monthly_data.map(oe=>oe.month),datasets:[{label:"",data:p.monthly_data.map(oe=>oe.income),borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",tension:.4,fill:!0},{label:"",data:p.monthly_data.map(oe=>oe.expense),borderColor:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",tension:.4,fill:!0}]}:{labels:[],datasets:[]},[p]),ie=w.useMemo(()=>{if(!p?.expense_categories)return{labels:[],datasets:[]};const oe=Object.keys(p.expense_categories),de=Object.values(p.expense_categories);return{labels:oe,datasets:[{data:de,backgroundColor:["#667eea","#764ba2","#f093fb","#f5576c","#4facfe","#00f2fe","#43e97b","#38f9d7"]}]}},[p]);return s&&!o?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx(Dt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"max-w-[2000px] mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"  "}),e.jsx("p",{className:"text-gray-600 mt-1",children:"    "})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("button",{onClick:ee,disabled:s,className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-200 disabled:opacity-50",children:e.jsx(rs,{className:`w-5 h-5 ${s?"animate-spin":""}`})})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4 border border-gray-200",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"date",value:y,onChange:oe=>N(oe.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"}),e.jsx("span",{className:"text-gray-500",children:""}),e.jsx("input",{type:"date",value:S,onChange:oe=>k(oe.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"}),e.jsxs("button",{onClick:se,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-all",children:[e.jsx(gr,{className:"w-4 h-4"}),""]})]}),e.jsx("div",{className:"flex items-center gap-2 ml-auto",children:["today","week","month","year"].map(oe=>e.jsxs("button",{onClick:()=>q(oe),className:`px-4 py-2 rounded-lg transition-all ${n===oe?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:[oe==="today"&&"",oe==="week"&&"",oe==="month"&&"",oe==="year"&&""]},oe))})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"flex border-b border-gray-200",children:[{id:"overview",label:"",icon:yp},{id:"financial",label:"",icon:Ge},{id:"projects",label:"",icon:Ia},{id:"executors",label:"",icon:tt}].map(oe=>{const de=oe.icon;return e.jsxs("button",{onClick:()=>a(oe.id),className:`flex-1 flex items-center justify-center gap-2 px-6 py-4 font-medium transition-all relative ${r===oe.id?"text-indigo-600 bg-indigo-50":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(de,{className:"w-5 h-5"}),oe.label,r===oe.id&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-indigo-600 to-purple-600"})]},oe.id)})}),e.jsxs("div",{className:"p-6",children:[r==="overview"&&e.jsxs("div",{className:"space-y-6",children:[o&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl shadow-lg p-6 border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center shadow-lg",children:e.jsx(ct,{className:"w-6 h-6 text-white"})}),e.jsxs("span",{className:`flex items-center gap-1 text-sm font-medium ${o.changes.income_change>=0?"text-green-600":"text-red-600"}`,children:[o.changes.income_change>=0?e.jsx(T4,{className:"w-4 h-4"}):e.jsx(C4,{className:"w-4 h-4"}),Math.abs(o.changes.income_change).toFixed(1),"%"]})]}),e.jsx("div",{className:"text-3xl font-bold text-green-700 mb-1",children:te(o.current_month.income)}),e.jsx("div",{className:"text-sm text-gray-600",children:"  "})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 rounded-xl shadow-lg p-6 border border-red-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-red-500 to-rose-500 flex items-center justify-center shadow-lg",children:e.jsx(Sa,{className:"w-6 h-6 text-white"})}),e.jsxs("span",{className:`flex items-center gap-1 text-sm font-medium ${o.changes.expense_change>=0?"text-red-600":"text-green-600"}`,children:[o.changes.expense_change>=0?e.jsx(T4,{className:"w-4 h-4"}):e.jsx(C4,{className:"w-4 h-4"}),Math.abs(o.changes.expense_change).toFixed(1),"%"]})]}),e.jsx("div",{className:"text-3xl font-bold text-red-700 mb-1",children:te(o.current_month.expense)}),e.jsx("div",{className:"text-sm text-gray-600",children:""})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl shadow-lg p-6 border border-blue-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center shadow-lg",children:e.jsx(Ge,{className:"w-6 h-6 text-white"})})}),e.jsx("div",{className:`text-3xl font-bold mb-1 ${o.current_month.profit>=0?"text-blue-700":"text-red-700"}`,children:te(o.current_month.profit)}),e.jsx("div",{className:"text-sm text-gray-600",children:""})]}),u&&e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 rounded-xl shadow-lg p-6 border border-purple-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-violet-500 flex items-center justify-center shadow-lg",children:e.jsx(Ia,{className:"w-6 h-6 text-white"})})}),e.jsx("div",{className:"text-3xl font-bold text-purple-700 mb-1",children:u.projects.completed}),e.jsxs("div",{className:"text-sm text-gray-600",children:["  (",u.projects.completion_rate.toFixed(1),"% )"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"    "}),e.jsx("div",{className:"h-80",children:e.jsx(n8,{data:le,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top"}},scales:{y:{beginAtZero:!0,ticks:{callback:function(oe){return te(oe)}}}}}})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:" "}),e.jsx("div",{className:"h-80",children:e.jsx(i8,{data:ie,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}})})]})]}),u&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(HF,{className:"w-5 h-5 text-yellow-500"})," "]}),e.jsxs("div",{className:"space-y-3",children:[u.top_clients.slice(0,5).map((oe,de)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-yellow-100 text-yellow-700 text-xs font-bold",children:de+1}),e.jsx("span",{className:"text-gray-700",children:oe.name})]}),e.jsx("span",{className:"font-semibold text-gray-900",children:te(oe.total_revenue)})]},de)),u.top_clients.length===0&&e.jsx("div",{className:"text-center text-gray-500 py-4",children:" "})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Ps,{className:"w-5 h-5 text-blue-500"})," "]}),e.jsx("div",{className:"space-y-3",children:u.projects&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-blue-50",children:[e.jsx("span",{className:"text-gray-700",children:" "}),e.jsx("span",{className:"font-semibold text-blue-700",children:u.projects.total})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-green-50",children:[e.jsx("span",{className:"text-gray-700",children:""}),e.jsx("span",{className:"font-semibold text-green-700",children:u.projects.completed})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-yellow-50",children:[e.jsx("span",{className:"text-gray-700",children:" "}),e.jsx("span",{className:"font-semibold text-yellow-700",children:u.projects.in_progress})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(tt,{className:"w-5 h-5 text-green-500"})," "]}),e.jsxs("div",{className:"space-y-3",children:[u.top_executors.slice(0,5).map((oe,de)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-green-100 text-green-700 text-xs font-bold",children:de+1}),e.jsx("span",{className:"text-gray-700",children:oe.name})]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[oe.completed_count," "]})]},de)),u.top_executors.length===0&&e.jsx("div",{className:"text-center text-gray-500 py-4",children:" "})]})]})]})]}),r==="financial"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl shadow-lg p-6 border border-indigo-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[e.jsx(Fr,{className:"w-5 h-5 text-indigo-600"}),"     (P&L)"]}),e.jsx("p",{className:"text-gray-600",children:"         "})]}),e.jsxs("a",{href:"/admin/reports/pnl-page",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg",children:[e.jsx(Gc,{className:"w-5 h-5"}),"  "]})]}),p&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg border border-gray-200",children:[e.jsx(ct,{className:"w-8 h-8 text-green-500 mx-auto mb-2"}),e.jsx("div",{className:"text-sm text-gray-600",children:""}),e.jsx("div",{className:"text-2xl font-bold text-green-700",children:te(p.summary.total_income)})]}),e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg border border-gray-200",children:[e.jsx(Sa,{className:"w-8 h-8 text-red-500 mx-auto mb-2"}),e.jsx("div",{className:"text-sm text-gray-600",children:""}),e.jsx("div",{className:"text-2xl font-bold text-red-700",children:te(p.summary.total_expense)})]}),e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg border border-gray-200",children:[e.jsx(Fr,{className:"w-8 h-8 text-blue-500 mx-auto mb-2"}),e.jsx("div",{className:"text-sm text-gray-600",children:""}),e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:te(p.summary.profit)})]})]})]}),p&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:" "}),e.jsxs("button",{onClick:()=>Y("financial"),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all",children:[e.jsx(wt,{className:"w-4 h-4"}),"Excel"]})]}),p.monthly_data&&p.monthly_data.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 text-gray-600 font-semibold",children:""}),e.jsx("th",{className:"text-right py-3 px-4 text-gray-600 font-semibold",children:""}),e.jsx("th",{className:"text-right py-3 px-4 text-gray-600 font-semibold",children:""}),e.jsx("th",{className:"text-right py-3 px-4 text-gray-600 font-semibold",children:""}),e.jsx("th",{className:"text-right py-3 px-4 text-gray-600 font-semibold",children:""})]})}),e.jsx("tbody",{children:p.monthly_data.map((oe,de)=>{const U=oe.income>0?oe.profit/oe.income*100:0;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 text-gray-700",children:oe.month}),e.jsx("td",{className:"py-3 px-4 text-right text-green-600 font-medium",children:te(oe.income)}),e.jsx("td",{className:"py-3 px-4 text-right text-red-600 font-medium",children:te(oe.expense)}),e.jsx("td",{className:`py-3 px-4 text-right font-medium ${oe.profit>=0?"text-green-600":"text-red-600"}`,children:te(oe.profit)}),e.jsxs("td",{className:"py-3 px-4 text-right text-gray-700",children:[U.toFixed(1),"%"]})]},de)})})]})}):e.jsx("div",{className:"text-center text-gray-500 py-8",children:"    "})]})]}),r==="projects"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4 border border-gray-200",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("select",{value:_,onChange:oe=>T(oe.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"new",children:""}),e.jsx("option",{value:"in_progress",children:" "}),e.jsx("option",{value:"completed",children:""}),e.jsx("option",{value:"overdue",children:""})]}),e.jsx("select",{value:E,onChange:oe=>z(oe.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:e.jsx("option",{value:"",children:" "})})]})}),m&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"  "}),e.jsxs("button",{onClick:()=>Y("projects"),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all",children:[e.jsx(wt,{className:"w-4 h-4"}),"Excel"]})]}),m.projects.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 text-gray-600 font-semibold",children:""}),e.jsx("th",{className:"text-left py-3 px-4 text-gray-600 font-semibold",children:""}),e.jsx("th",{className:"text-left py-3 px-4 text-gray-600 font-semibold",children:""}),e.jsx("th",{className:"text-left py-3 px-4 text-gray-600 font-semibold",children:""}),e.jsx("th",{className:"text-right py-3 px-4 text-gray-600 font-semibold",children:""}),e.jsx("th",{className:"text-left py-3 px-4 text-gray-600 font-semibold",children:""}),e.jsx("th",{className:"text-left py-3 px-4 text-gray-600 font-semibold",children:""})]})}),e.jsx("tbody",{children:m.projects.map(oe=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 text-gray-700",children:oe.title}),e.jsx("td",{className:"py-3 px-4 text-gray-700",children:oe.client}),e.jsx("td",{className:"py-3 px-4 text-gray-700",children:oe.executor||"-"}),e.jsx("td",{className:"py-3 px-4",children:$(oe.status)}),e.jsx("td",{className:"py-3 px-4 text-right text-gray-700",children:te(oe.estimated_cost||0)}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500",style:{width:`${oe.completion_percentage}%`}})}),e.jsxs("span",{className:"text-sm text-gray-600 w-12",children:[oe.completion_percentage,"%"]})]})}),e.jsx("td",{className:"py-3 px-4 text-gray-700",children:oe.deadline?K(oe.deadline):"-"})]},oe.id))})]})}):e.jsx("div",{className:"text-center text-gray-500 py-8",children:" "})]})]}),r==="executors"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"  "}),e.jsx("div",{className:"text-center text-gray-500 py-8",children:"  "})]})})]})]})]}),e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:M.map(oe=>e.jsx("div",{className:`px-6 py-3 rounded-lg shadow-lg text-white ${oe.type==="success"?"bg-green-500":oe.type==="error"?"bg-red-500":"bg-blue-500"} animate-slide-in`,children:oe.message},oe.id))})]})},Ba={getEmployeesWithSettings:async()=>(await fe.get("/admin/notifications/api/employees")).data.employees||[],getEmployees:async()=>(await fe.get("/admin/api/users/api")).data.users||[],getEmployeeSettings:async s=>(await fe.get(`/admin/notifications/api/settings/${s}`)).data.settings,updateEmployeeSettings:async(s,t)=>(await fe.put(`/admin/notifications/api/settings/${s}`,t,{headers:{"Content-Type":"application/json"}})).data,getNotificationTypes:async()=>(await fe.get("/admin/notifications/api/types")).data.types,getQueueStats:async()=>(await fe.get("/admin/notifications/stats/queue")).data,getQueue:async s=>(await fe.get("/admin/notifications/queue",{params:s})).data,getLogs:async s=>(await fe.get("/admin/notifications/log",{params:s})).data,sendTestNotification:async s=>(await fe.post(`/admin/notifications/test/${s}`)).data,processQueue:async()=>(await fe.post("/admin/notifications/process-queue")).data,getStats:async(s=7)=>(await fe.get("/admin/notifications/stats",{params:{days:s}})).data.data,testAdminNotification:async()=>(await fe.post("/admin/api/notifications/test-admin",{message:"   React -"})).data,testErrorNotification:async()=>(await fe.post("/admin/api/notifications/test-error",{error:"   React -",context:{source:"react-admin-panel",timestamp:new Date().toISOString()}})).data,testDailyReport:async()=>(await fe.post("/admin/api/notifications/daily-report")).data,testAvitoNotification:async()=>(await fe.post("/admin/api/notifications/test-avito")).data,getProjects:async()=>(await fe.get("/admin/api/projects/")).data.projects||[],updateProjectStatus:async(s,t,r)=>(await fe.put(`/admin/api/projects/${s}/status`,{status:t,comment:r||"    React -"})).data,getBotStatus:async()=>(await fe.get("/admin/api/notifications/bot-status")).data},iJ=()=>{const[s,t]=w.useState([]),[r,a]=w.useState([]),[n,i]=w.useState(null),[o,c]=w.useState("in_progress"),[u,h]=w.useState(!0),[m,f]=w.useState({online:!1,checking:!0}),[p,j]=w.useState([]),[g,v]=w.useState({}),[y,N]=w.useState([]),S=w.useCallback((q,J="info")=>{const se=Date.now();N(Y=>[...Y,{id:se,message:q,type:J}]),setTimeout(()=>{N(Y=>Y.filter(ee=>ee.id!==se))},3e3)},[]),k=w.useCallback((q,J="info")=>{const se={id:Date.now(),message:q,type:J,timestamp:new Date().toLocaleString("ru-RU")};j(Y=>[se,...Y.slice(0,9)])},[]),_=w.useCallback(async()=>{try{h(!0);const[q,J]=await Promise.all([Ba.getEmployees(),Ba.getProjects()]);t(q),a(J);const se=q.map(async te=>{try{const K=await Ba.getEmployeeSettings(te.id);return{id:te.id,settings:K}}catch{return{id:te.id,settings:null}}}),Y=await Promise.all(se),ee={};Y.forEach(({id:te,settings:K})=>{K&&(ee[te]=K)}),v(ee)}catch(q){console.error("Error loading data:",q),k("  ","error")}finally{h(!1)}},[k]),T=w.useCallback(async()=>{try{f(J=>({...J,checking:!0}));const q=await Ba.getBotStatus();f({online:q.success,username:q.bot_info?.username,checking:!1})}catch{f({online:!1,checking:!1})}},[]),E=w.useCallback(async()=>{try{k("   ...","info");const q=await Ba.testAdminNotification();q.success?(k("  ","success"),S(" ","success")):(k(`: ${q.message}`,"error"),S(" ","error"))}catch(q){console.error("Error:",q),k("  ","error"),S(" ","error")}},[k,S]),z=w.useCallback(async()=>{try{k("    ...","info");const q=await Ba.testErrorNotification();q.success?(k("   ","success"),S(" ","success")):(k(`: ${q.message}`,"error"),S(" ","error"))}catch(q){console.error("Error:",q),k("  ","error"),S(" ","error")}},[k,S]),M=w.useCallback(async()=>{try{k("  ...","info");const q=await Ba.testDailyReport();q.success?(k("  ","success"),S(" ","success")):(k(`: ${q.message}`,"error"),S(" ","error"))}catch(q){console.error("Error:",q),k("  ","error"),S(" ","error")}},[k,S]),C=w.useCallback(async()=>{try{k("  Avito ...","info");const q=await Ba.testAvitoNotification();q.success?(k("Avito  ","success"),S(" ","success")):(k(`: ${q.message}`,"error"),S(" ","error"))}catch(q){console.error("Error:",q),k("  Avito ","error"),S(" ","error")}},[k,S]),A=w.useCallback(async()=>{if(!n){S(" ","error"),k(" ","error");return}if(!r.find(J=>J.id===n)){S("  ","error");return}try{k(`    #${n}...`,"info");const J=await Ba.updateProjectStatus(n,o,"    React -");J.success?(k(`  #${n} `,"success"),S("  ","success")):(k(`: ${J.message}`,"error"),S("  ","error"))}catch(J){console.error("Error:",J),k("  ","error"),S("  ","error")}},[n,o,r,k,S]),Z=w.useCallback(async(q,J,se)=>{try{v(Y=>({...Y,[q]:{...Y[q],[J]:se}})),k(` "${J}" `,"success")}catch(Y){console.error("Error updating setting:",Y),k("  ","error")}},[k]),I=w.useCallback(async q=>{try{const J=g[q];if(!J)return;await Ba.updateEmployeeSettings(q,J),k(" ","success"),S(" ","success")}catch(J){console.error("Error saving settings:",J),k("  ","error"),S(" ","error")}},[g,k,S]),V=w.useCallback(async q=>{try{const J=await Ba.sendTestNotification(q);J.success?(k("   ","success"),S(" ","success")):(k(`: ${J.error}`,"error"),S(" ","error"))}catch(J){console.error("Error:",J),k("  ","error"),S(" ","error")}},[k,S]);w.useEffect(()=>{_(),T()},[_,T]);const R=[{value:"new",label:"",icon:""},{value:"review",label:" ",icon:""},{value:"accepted",label:"",icon:""},{value:"in_progress",label:" ",icon:""},{value:"testing",label:"",icon:""},{value:"completed",label:"",icon:""},{value:"cancelled",label:"",icon:""}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center shadow-lg",children:e.jsx(Zr,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:" "}),e.jsx("p",{className:"text-sm text-gray-200",children:"    "})]})]})}),e.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[e.jsxs("div",{className:"col-span-8 space-y-6",children:[e.jsxs("div",{className:"bg-white/30 backdrop-blur-xl rounded-2xl border border-white/40 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Qs,{className:"w-6 h-6 text-blue-400"}),e.jsx("h2",{className:"text-xl font-bold text-white",children:" "})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:E,className:"px-6 py-4 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 rounded-xl text-white transition-all flex items-center justify-center gap-2 font-medium",children:[e.jsx(Qs,{className:"w-5 h-5"})," "]}),e.jsxs("button",{onClick:z,className:"px-6 py-4 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 rounded-xl text-white transition-all flex items-center justify-center gap-2 font-medium",children:[e.jsx(ir,{className:"w-5 h-5"})," "]}),e.jsxs("button",{onClick:M,className:"px-6 py-4 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 rounded-xl text-white transition-all flex items-center justify-center gap-2 font-medium",children:[e.jsx(Fr,{className:"w-5 h-5"})," "]})]})]}),e.jsxs("div",{className:"bg-white/30 backdrop-blur-xl rounded-2xl border border-white/40 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Ha,{className:"w-6 h-6 text-orange-400"}),e.jsx("h2",{className:"text-xl font-bold text-white",children:" "})]}),e.jsxs("button",{onClick:C,className:"w-full px-6 py-4 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 rounded-xl text-white transition-all flex items-center justify-center gap-2 font-medium",children:[e.jsx(Ha,{className:"w-5 h-5"}),"   "]})]}),e.jsxs("div",{className:"bg-white/30 backdrop-blur-xl rounded-2xl border border-white/40 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(tt,{className:"w-6 h-6 text-purple-400"}),e.jsx("h2",{className:"text-xl font-bold text-white",children:" "})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:" "}),e.jsxs("select",{value:n||"",onChange:q=>i(Number(q.target.value)),className:"w-full px-4 py-2 bg-white/30 border border-white/40 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"",children:" ..."}),r.map(q=>e.jsxs("option",{value:q.id,children:["#",q.id," - ",q.title]},q.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:" "}),e.jsx("select",{value:o,onChange:q=>c(q.target.value),className:"w-full px-4 py-2 bg-white/30 border border-white/40 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-purple-500",children:R.map(q=>e.jsxs("option",{value:q.value,children:[q.icon," ",q.label]},q.value))})]}),e.jsxs("button",{onClick:A,disabled:!n,className:"w-full px-6 py-3 bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 rounded-xl text-white transition-all flex items-center justify-center gap-2 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(rs,{className:"w-5 h-5"}),"  "]})]})]}),e.jsxs("div",{className:"bg-white/30 backdrop-blur-xl rounded-2xl border border-white/40 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Na,{className:"w-6 h-6 text-cyan-400"}),e.jsx("h2",{className:"text-xl font-bold text-white",children:"  "})]}),u?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx(Kc,{className:"w-6 h-6 animate-spin text-blue-500"})}):s.length===0?e.jsxs("div",{className:"text-center p-8 text-white",children:[e.jsx(tt,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"  "})]}):e.jsx("div",{className:"space-y-4",children:s.map(q=>{const J=g[q.id]||{},se=q.full_name?q.full_name.split(" ").map(Y=>Y[0]).join("").toUpperCase():"?";return e.jsxs("div",{className:"p-4 bg-white/30 rounded-xl border border-white/40 hover:bg-white/40 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-bold",children:se}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-white",children:q.full_name}),e.jsxs("p",{className:"text-sm text-white",children:[q.role,"  ",q.email]})]}),e.jsx("button",{onClick:()=>V(q.id),className:"px-3 py-1.5 bg-green-500 hover:bg-green-600 rounded-lg text-white text-sm transition-colors",children:""})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("label",{className:"flex items-center justify-between p-2 bg-white/30 rounded-lg",children:[e.jsx("span",{className:"text-sm text-white",children:" "}),e.jsx("input",{type:"checkbox",checked:J.project_assigned||!1,onChange:Y=>Z(q.id,"project_assigned",Y.target.checked),className:"rounded border-white/40"})]}),e.jsxs("label",{className:"flex items-center justify-between p-2 bg-white/30 rounded-lg",children:[e.jsx("span",{className:"text-sm text-white",children:""}),e.jsx("input",{type:"checkbox",checked:J.project_deadline_reminder||!1,onChange:Y=>Z(q.id,"project_deadline_reminder",Y.target.checked),className:"rounded border-white/40"})]}),e.jsxs("label",{className:"flex items-center justify-between p-2 bg-white/30 rounded-lg",children:[e.jsx("span",{className:"text-sm text-white",children:" "}),e.jsx("input",{type:"checkbox",checked:J.project_status_changed||!1,onChange:Y=>Z(q.id,"project_status_changed",Y.target.checked),className:"rounded border-white/40"})]}),e.jsxs("label",{className:"flex items-center justify-between p-2 bg-white/30 rounded-lg",children:[e.jsx("span",{className:"text-sm text-white",children:" "}),e.jsx("input",{type:"checkbox",checked:J.project_overdue||!1,onChange:Y=>Z(q.id,"project_overdue",Y.target.checked),className:"rounded border-white/40"})]})]}),e.jsxs("button",{onClick:()=>I(q.id),className:"w-full mt-3 px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 rounded-lg text-white transition-all flex items-center justify-center gap-2",children:[e.jsx(it,{className:"w-4 h-4"})," "]})]},q.id)})})]})]}),e.jsxs("div",{className:"col-span-4 space-y-6",children:[e.jsxs("div",{className:"bg-white/30 backdrop-blur-xl rounded-2xl border border-white/40 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(yn,{className:"w-6 h-6 text-green-400"}),e.jsx("h2",{className:"text-lg font-bold text-white",children:" "})]}),e.jsxs("div",{className:`p-4 rounded-xl border mb-4 ${m.checking?"bg-blue-500/20 border-blue-500/40":m.online?"bg-green-500/20 border-green-500/40":"bg-red-500/20 border-red-500/40"}`,children:[e.jsx("div",{className:"flex items-center gap-2 text-white",children:m.checking?e.jsxs(e.Fragment,{children:[e.jsx(Kc,{className:"w-5 h-5 animate-spin"})," ..."]}):m.online?e.jsxs(e.Fragment,{children:[e.jsx(it,{className:"w-5 h-5"})," "]}):e.jsxs(e.Fragment,{children:[e.jsx(kl,{className:"w-5 h-5"})," "]})}),m.username&&e.jsxs("p",{className:"text-sm text-white mt-2",children:["@",m.username]})]}),e.jsxs("button",{onClick:T,className:"w-full px-4 py-2 bg-white/30 hover:bg-white/40 rounded-xl text-white transition-colors flex items-center justify-center gap-2",children:[e.jsx(rs,{className:"w-4 h-4"})," "]})]}),e.jsxs("div",{className:"bg-white/30 backdrop-blur-xl rounded-2xl border border-white/40 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Ue,{className:"w-6 h-6 text-purple-400"}),e.jsx("h2",{className:"text-lg font-bold text-white",children:" "})]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:p.length===0?e.jsx("p",{className:"text-sm text-white text-center py-8",children:"    "}):p.map(q=>e.jsxs("div",{className:`p-3 rounded-lg border-l-4 ${q.type==="success"?"bg-green-500/20 border-green-500":q.type==="error"?"bg-red-500/20 border-red-500":"bg-blue-500/20 border-blue-500"}`,children:[e.jsx("p",{className:"text-sm text-white",children:q.message}),e.jsx("p",{className:"text-xs text-white mt-1",children:q.timestamp})]},q.id))})]})]})]}),e.jsx("div",{className:"fixed bottom-4 right-4 space-y-2 z-50",children:y.map(q=>e.jsx("div",{className:`px-4 py-3 rounded-xl shadow-lg backdrop-blur-sm border ${q.type==="success"?"bg-green-500/90 border-green-400":q.type==="error"?"bg-red-500/90 border-red-400":"bg-blue-500/90 border-blue-400"} text-white`,children:q.message},q.id))})]})},po={getSummary:async()=>(await fe.get("/admin/api/automation/summary")).data,checkOverdue:async()=>(await fe.post("/admin/api/automation/check-overdue")).data,checkUnpaid:async()=>(await fe.post("/admin/api/automation/check-unpaid")).data,runDailyChecks:async()=>(await fe.post("/admin/api/automation/run-daily")).data,sendNotification:async s=>(await fe.post("/admin/api/automation/send-notification",{message:s})).data,startScheduler:async()=>(await fe.post("/admin/api/automation/scheduler/start")).data,stopScheduler:async()=>(await fe.post("/admin/api/automation/scheduler/stop")).data,runTask:async s=>(await fe.post("/admin/api/automation/scheduler/run-task",{task_name:s})).data,getSchedulerStatus:async()=>(await fe.get("/admin/api/automation/scheduler/status")).data},lJ=()=>{const[s,t]=w.useState(null),[r,a]=w.useState(!1),[n,i]=w.useState([]),[o,c]=w.useState(!0),[u,h]=w.useState(null),m=w.useCallback((k,_="info")=>{h({message:k,type:_}),setTimeout(()=>h(null),3e3)},[]),f=w.useCallback((k,_="info")=>{i(T=>[{message:k,type:_,timestamp:new Date},...T].slice(0,50))},[]),p=w.useCallback(async()=>{try{c(!0);const k=await po.getSummary();k.success&&(t(k.summary),a(k.scheduler_running),f(" ","success"))}catch{m("  ","error"),f("  ","error")}finally{c(!1)}},[m,f]);w.useEffect(()=>{p();const k=setInterval(p,3e4);return()=>clearInterval(k)},[p]);const j=async()=>{try{const k=r?await po.stopScheduler():await po.startScheduler();k.success&&(a(!r),f(k.message,"success"),m(k.message,"success"))}catch{m("  ","error"),f("  ","error")}},g=async k=>{try{const _=await po.runTask(k);_.success?(f(_.message,"success"),m(_.message,"success"),setTimeout(p,2e3)):f(_.message,"warning")}catch{m("  ","error"),f("  ","error")}},v=async()=>{try{const k=await po.checkOverdue();k.success&&(f(k.message,"success"),k.projects.length>0&&k.projects.forEach(_=>{f(` #${_.id} "${_.title}"   `,"warning")}),m(k.message,"success"),p())}catch{m("  ","error"),f("  ","error")}},y=async()=>{try{const k=await po.checkUnpaid();if(k.success){let _="";if(k.unpaid_projects.length>0&&(_+=` : ${k.unpaid_projects.length}. `,k.unpaid_projects.forEach(T=>{f(` #${T.id} "${T.title}" -  ${T.remaining}`,"warning")})),k.unpaid_executors.length>0&&(_+=` : ${k.unpaid_executors.length}.`,k.unpaid_executors.forEach(T=>{f(` "${T.executor_name}" -  ${T.remaining}`,"warning")})),_)f(_,"info"),m(_,"info");else{const T="     ";f(T,"success"),m(T,"success")}p()}}catch{m("  ","error"),f("  ","error")}},N=async()=>{const k=prompt("  :");if(k)try{(await po.sendNotification(k)).success?(f("  ","success"),m(" ","success")):(f("   ","error"),m(" ","error"))}catch{m("  ","error"),f("  ","error")}},S=k=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0,maximumFractionDigits:0}).format(k);return e.jsxs("div",{className:"p-8 max-w-[1920px] mx-auto",children:[u&&e.jsx("div",{className:`fixed top-4 right-4 z-50 px-6 py-3 rounded-lg shadow-lg ${u.type==="success"?"bg-green-500":u.type==="error"?"bg-red-500":"bg-blue-500"} text-white`,children:u.message}),e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-yellow-500 to-amber-600 flex items-center justify-center",children:e.jsx(Ua,{className:"w-6 h-6 text-white"})}),"  "]}),e.jsx("p",{className:"text-gray-500 mt-1",children:"    "})]})}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ue,{className:"w-6 h-6 text-gray-400"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:" "})]}),e.jsx("div",{className:`px-4 py-2 rounded-full flex items-center gap-2 ${r?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:r?e.jsxs(e.Fragment,{children:[e.jsx(yn,{className:"w-4 h-4 animate-pulse"}),""]}):e.jsxs(e.Fragment,{children:[e.jsx(rm,{className:"w-4 h-4"}),""]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:" :"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("span",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx(pt,{className:"w-4 h-4 text-gray-400"})," "]}),e.jsx("span",{className:"text-sm text-gray-500",children:"09:00"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("span",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx(Ue,{className:"w-4 h-4 text-gray-400"})," "]}),e.jsx("span",{className:"text-sm text-gray-500",children:" 4 "})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("span",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx(Ge,{className:"w-4 h-4 text-gray-400"})," "]}),e.jsx("span",{className:"text-sm text-gray-500",children:"18:00"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("span",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx(Ie,{className:"w-4 h-4 text-gray-400"})," "]}),e.jsx("span",{className:"text-sm text-gray-500",children:" 10:00"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:":"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:j,className:`w-full px-4 py-3 rounded-lg font-medium flex items-center justify-center gap-2 transition-all ${r?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:r?e.jsxs(e.Fragment,{children:[e.jsx(rm,{className:"w-4 h-4"})," "]}):e.jsxs(e.Fragment,{children:[e.jsx(bi,{className:"w-4 h-4"})," "]})}),e.jsxs("button",{onClick:()=>g("daily_checks"),className:"w-full px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium flex items-center justify-center gap-2",children:[e.jsx(bi,{className:"w-4 h-4"}),"  "]}),e.jsxs("button",{onClick:()=>g("financial_status"),className:"w-full px-4 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium flex items-center justify-center gap-2",children:[e.jsx(Ge,{className:"w-4 h-4"})," "]}),e.jsxs("button",{onClick:()=>g("weekly_report"),className:"w-full px-4 py-3 bg-amber-600 hover:bg-amber-700 text-white rounded-lg font-medium flex items-center justify-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4"})," "]})]})]})]})]}),s&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-violet-500 to-purple-600 rounded-2xl p-6 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center",children:e.jsx(Ie,{className:"w-5 h-5"})}),e.jsx(ct,{className:"w-5 h-5 opacity-50"})]}),e.jsx("div",{className:"text-3xl font-bold mb-1",children:s.total_projects}),e.jsx("div",{className:"text-sm opacity-90",children:" "})]}),e.jsxs("div",{className:"bg-gradient-to-br from-pink-500 to-red-600 rounded-2xl p-6 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center",children:e.jsx(ir,{className:"w-5 h-5"})}),e.jsx(ir,{className:"w-5 h-5 opacity-50"})]}),e.jsx("div",{className:"text-3xl font-bold mb-1",children:s.overdue_count}),e.jsx("div",{className:"text-sm opacity-90",children:""})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-amber-600 rounded-2xl p-6 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center",children:e.jsx(Ge,{className:"w-5 h-5"})}),e.jsx(Ge,{className:"w-5 h-5 opacity-50"})]}),e.jsx("div",{className:"text-3xl font-bold mb-1",children:s.unpaid_projects_count}),e.jsx("div",{className:"text-sm opacity-90",children:""})]}),e.jsxs("div",{className:"bg-gradient-to-br from-cyan-500 to-blue-600 rounded-2xl p-6 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center",children:e.jsx(tt,{className:"w-5 h-5"})}),e.jsx(tt,{className:"w-5 h-5 opacity-50"})]}),e.jsx("div",{className:"text-3xl font-bold mb-1",children:s.unpaid_executors_count}),e.jsx("div",{className:"text-sm opacity-90",children:" "})]})]}),s&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-100 flex items-center justify-center",children:e.jsx(ct,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-blue-700 font-medium",children:"  "}),e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:S(s.total_unpaid_clients)})]})]})}),e.jsx("div",{className:"bg-orange-50 border-l-4 border-orange-500 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-orange-100 flex items-center justify-center",children:e.jsx(ir,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-orange-700 font-medium",children:"  "}),e.jsx("div",{className:"text-2xl font-bold text-orange-900",children:S(s.total_unpaid_executors)})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(zr,{className:"w-5 h-5 text-gray-400"})," "]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:v,className:"px-6 py-4 border-2 border-red-200 rounded-xl hover:bg-red-50 transition-colors text-red-700 font-medium flex items-center justify-center gap-2",children:[e.jsx(ir,{className:"w-5 h-5"})," "]}),e.jsxs("button",{onClick:y,className:"px-6 py-4 border-2 border-amber-200 rounded-xl hover:bg-amber-50 transition-colors text-amber-700 font-medium flex items-center justify-center gap-2",children:[e.jsx(Ge,{className:"w-5 h-5"})," "]}),e.jsxs("button",{onClick:N,className:"px-6 py-4 border-2 border-blue-200 rounded-xl hover:bg-blue-50 transition-colors text-blue-700 font-medium flex items-center justify-center gap-2",children:[e.jsx(Qs,{className:"w-5 h-5"})," "]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(yn,{className:"w-5 h-5 text-gray-400"})," "]}),e.jsx("div",{className:"bg-gray-50 rounded-xl p-4 h-96 overflow-y-auto space-y-2",children:n.length===0?e.jsx("div",{className:"text-center text-gray-500 py-8",children:" "}):n.map((k,_)=>e.jsx("div",{className:`p-3 rounded-lg font-mono text-sm ${k.type==="error"?"bg-red-50 text-red-700 border-l-4 border-red-500":k.type==="warning"?"bg-yellow-50 text-yellow-700 border-l-4 border-yellow-500":k.type==="success"?"bg-green-50 text-green-700 border-l-4 border-green-500":"bg-white text-gray-700 border-l-4 border-blue-500"}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("span",{className:"flex-1",children:k.message}),e.jsx("span",{className:"text-xs opacity-70",children:k.timestamp.toLocaleTimeString("ru-RU")})]})},_))})]})]})},ga={getStats:async()=>(await fe.get("/admin/hosting/api/stats")).data,getServers:async s=>{const t=s?{status:s}:{};return(await fe.get("/admin/hosting/api/servers",{params:t})).data},getServer:async s=>(await fe.get(`/admin/hosting/api/server/${s}`)).data,createServer:async s=>(await fe.post("/admin/hosting/api/server",s)).data,updateServer:async(s,t)=>(await fe.put(`/admin/hosting/api/server/${s}`,t)).data,deleteServer:async s=>(await fe.delete(`/admin/hosting/api/server/${s}`)).data,createPayment:async s=>(await fe.post("/admin/hosting/api/payment",s)).data,getCalendar:async(s,t)=>{const r={};return s&&(r.month=s),t&&(r.year=t),(await fe.get("/admin/hosting/api/calendar",{params:r})).data},searchClients:async s=>(await fe.get("/admin/hosting/api/clients/search",{params:{q:s}})).data,getProjects:async()=>(await fe.get("/admin/hosting/api/projects")).data,getProjectData:async s=>(await fe.get(`/admin/hosting/api/project/${s}`)).data,syncWithTimeweb:async()=>(await fe.post("/admin/hosting/api/timeweb/sync-all")).data,getClientBalance:async s=>(await fe.get(`/admin/hosting/api/balance/${s}`)).data,addClientBalance:async(s,t,r)=>(await fe.post(`/admin/hosting/api/balance/${s}/add?amount=${t}${r?`&description=${encodeURIComponent(r)}`:""}`)).data,getClientTransactions:async(s,t=50)=>(await fe.get(`/admin/hosting/api/balance/${s}/transactions?limit=${t}`)).data,getLowBalanceClients:async(s=5)=>(await fe.get(`/admin/hosting/api/balance/low?days_threshold=${s}`)).data,getBalanceSummary:async()=>(await fe.get("/admin/hosting/api/balance/summary")).data},oJ=({projects:s,value:t,onChange:r,placeholder:a=" ",disabled:n=!1})=>{const[i,o]=w.useState(!1),[c,u]=w.useState(""),h=w.useRef(null),m=w.useRef(null),f=s.find(y=>y.id===t),p=s.filter(y=>y.title.toLowerCase().includes(c.toLowerCase()));console.log("SearchableProjectDropdown:",{totalProjects:s.length,filteredProjects:p.length,searchQuery:c,isOpen:i}),w.useEffect(()=>{const y=N=>{h.current&&!h.current.contains(N.target)&&o(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]),w.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const j=()=>{n||(o(!i),u(""))},g=y=>{r(y),o(!1),u("")},v=y=>{y.stopPropagation(),r(null),u("")};return e.jsxs("div",{ref:h,className:"relative w-full",children:[e.jsxs("button",{type:"button",onClick:j,disabled:n,className:`w-full px-4 py-3 border-2 rounded-lg text-left flex items-center justify-between transition-all ${n?"bg-gray-100 border-gray-200 text-gray-400 cursor-not-allowed":i?"border-sky-500 ring-2 ring-sky-200":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("span",{className:f?"text-gray-800":"text-gray-400",children:f?e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:f.title}),e.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(#",f.id,")"]})]}):a}),e.jsxs("div",{className:"flex items-center gap-2",children:[f&&!n&&e.jsx(Ae,{className:"w-4 h-4 text-gray-400 hover:text-gray-600 cursor-pointer",onClick:v}),e.jsx(_i,{className:`w-5 h-5 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})]}),i&&e.jsxs("div",{className:"absolute z-50 w-full mt-2 bg-white border-2 border-sky-500 rounded-lg shadow-xl max-h-[400px] overflow-hidden",children:[e.jsx("div",{className:"p-3 border-b border-gray-200 sticky top-0 bg-white",children:e.jsxs("div",{className:"relative",children:[e.jsx(Fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{ref:m,type:"text",value:c,onChange:y=>u(y.target.value),placeholder:" ...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-200 focus:border-sky-500"})]})}),e.jsxs("div",{className:"max-h-[300px] overflow-y-auto",children:[e.jsx("button",{type:"button",onClick:()=>{r(null),o(!1)},className:`w-full px-4 py-3 text-left hover:bg-gray-50 transition-colors ${t?"text-gray-700":"bg-sky-50 text-sky-700"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-400"}),e.jsx("span",{className:"font-medium",children:"   "})]})}),p.length===0?e.jsxs("div",{className:"px-4 py-8 text-center text-gray-500",children:[e.jsx("p",{children:"  "}),c&&e.jsx("p",{className:"text-sm mt-1",children:"   "})]}):p.map(y=>e.jsx("button",{type:"button",onClick:()=>g(y.id),className:`w-full px-4 py-3 text-left hover:bg-gray-50 transition-colors border-b border-gray-100 last:border-0 ${t===y.id?"bg-sky-50":""}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${t===y.id?"bg-sky-500":"bg-gray-300"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`font-semibold truncate ${t===y.id?"text-sky-700":"text-gray-800"}`,children:y.title}),e.jsxs("span",{className:"text-xs text-gray-500",children:["#",y.id]})]}),e.jsx("div",{className:"flex items-center gap-2 mt-1 text-xs text-gray-500",children:e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 rounded",children:y.status==="in_progress"?" ":y.status==="new"?"":y.status==="review"?" ":y.status==="accepted"?"":y.status==="testing"?"":y.status})})]})]})},y.id))]})]})]})};function cJ({clientId:s,clientName:t,onBalanceUpdate:r}){const[a,n]=w.useState(null),[i,o]=w.useState(!1),[c,u]=w.useState(!1),[h,m]=w.useState(""),[f,p]=w.useState("");w.useEffect(()=>{s&&j()},[s]);const j=async()=>{if(s)try{o(!0);const T=await ga.getClientBalance(s);n(T.balance)}catch{console.log("Balance not found for client",s)}finally{o(!1)}},g=async()=>{if(!(!s||!h))try{await ga.addClientBalance(s,parseFloat(h),f),u(!1),m(""),p(""),j(),r?.()}catch(T){alert("  : "+T.message)}};if(!s)return e.jsx("div",{className:"text-sm text-gray-500",children:" Client ID"});if(i)return e.jsx("div",{className:"text-sm text-gray-500",children:"..."});const v=a?.days_remaining||0,y=a?.balance||0,N=a?.total_monthly_cost||0,S=()=>v===0?"text-red-600 bg-red-50":v<=3?"text-orange-600 bg-orange-50":v<=7?"text-yellow-600 bg-yellow-50":v>=999?"text-gray-500 bg-gray-50":"text-green-600 bg-green-50",k=()=>v===0?e.jsx(qe,{className:"w-3.5 h-3.5"}):v<=7?e.jsx(qe,{className:"w-3.5 h-3.5"}):e.jsx(ct,{className:"w-3.5 h-3.5"}),_=()=>v>=999?"":`${v} `;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-sm bg-gray-50 px-2 py-1 rounded",children:[e.jsx(fN,{className:"w-4 h-4 text-gray-500"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[y.toFixed(0),""]})]}),e.jsxs("div",{className:`flex items-center gap-1 text-xs font-semibold px-2 py-1 rounded ${S()}`,children:[k(),e.jsx("span",{children:_()})]}),e.jsx("button",{onClick:()=>u(!0),className:"p-1 hover:bg-blue-50 rounded transition-colors group",title:" ",children:e.jsx(Ve,{className:"w-4 h-4 text-blue-600 group-hover:text-blue-700"})})]}),N>0&&e.jsxs("div",{className:"text-xs text-gray-500",children:[N.toFixed(0),"/"]})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:[" : ",t]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"  ()"}),e.jsx("input",{type:"number",value:h,onChange:T=>m(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"4000",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" ()"}),e.jsx("input",{type:"text",value:f,onChange:T=>p(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:" "})]}),a&&N>0&&h&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-700 font-medium mb-1",children:[e.jsx(ct,{className:"w-4 h-4"}),""]}),e.jsxs("div",{className:"text-blue-600",children:[" : ",(y+parseFloat(h||"0")).toFixed(0),""]}),e.jsxs("div",{className:"text-blue-600",children:[" : ~",Math.floor((y+parseFloat(h||"0"))/(N/30))," "]})]})]}),e.jsxs("div",{className:"flex gap-2 mt-6",children:[e.jsx("button",{onClick:g,disabled:!h||parseFloat(h)<=0,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:""}),e.jsx("button",{onClick:()=>{u(!1),m(""),p("")},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:""})]})]})})]})}const dJ=()=>{const[s,t]=w.useState(!1),[r,a]=w.useState([]),[n,i]=w.useState([]),[o,c]=w.useState(null),[u,h]=w.useState([]),[m,f]=w.useState(0),[p,j]=w.useState([]),[g,v]=w.useState(new Date().getMonth()+1),[y,N]=w.useState(new Date().getFullYear()),[S,k]=w.useState(""),[_,T]=w.useState(""),[E,z]=w.useState("next_payment"),[M,C]=w.useState(!1),[A,Z]=w.useState(!1),[I,V]=w.useState(null),[R,q]=w.useState(null),[J,se]=w.useState("servers"),[Y,ee]=w.useState([]),te=w.useCallback((L,B="info")=>{const ne=Date.now().toString();ee(me=>[...me,{id:ne,message:L,type:B}]),setTimeout(()=>{ee(me=>me.filter(xe=>xe.id!==ne))},4e3)},[]),K="hosting_data_cache",$=60*1e3,le=w.useCallback(()=>{try{const L=localStorage.getItem(K);if(L){const{data:B,timestamp:ne}=JSON.parse(L),me=Date.now()-ne;return B.stats&&c(B.stats),B.servers&&(a(B.servers),i(B.servers)),B.projects&&h(B.projects),f(ne),console.log(` Loaded from cache (age: ${Math.round(me/1e3)}s)`),!0}}catch(L){console.error("Error loading from cache:",L)}return!1},[]),ie=w.useCallback(L=>{try{const B=Date.now();localStorage.setItem(K,JSON.stringify({data:L,timestamp:B})),f(B),console.log(" Saved to cache")}catch(B){console.error("Error saving to cache:",B)}},[]),oe=w.useCallback(async(L=!1)=>{try{L||t(!0);const[B,ne,me]=await Promise.all([ga.getStats(),ga.getServers(_||void 0),ga.getProjects()]),xe={};B.success&&(c(B.stats),xe.stats=B.stats),ne.success&&(a(ne.servers),i(ne.servers),xe.servers=ne.servers),me.success&&(h(me.projects),xe.projects=me.projects),ie(xe),L&&console.log(" Background update completed")}catch(B){console.error("Error loading hosting data:",B),L||te("  ","error")}finally{L||t(!1)}},[_,te,ie]),de=w.useCallback(async()=>{try{const L=await ga.getCalendar(g,y);L.success&&j(L.calendar)}catch(L){console.error("Error loading calendar:",L),te("  ","error")}},[g,y,te]),U=w.useCallback(async()=>{try{te("  Timeweb Cloud...","info");const L=await ga.syncWithTimeweb();if(L.success){const B=` :  ${L.created_count},  ${L.updated_count}`;te(B,"success"),await oe(!1)}}catch(L){console.error("Error syncing with Timeweb:",L),te("   Timeweb Cloud","error")}},[oe,te]);w.useEffect(()=>{(async()=>{le()?setTimeout(()=>oe(!0),100):await oe(!1)})()},[]),w.useEffect(()=>{const L=setInterval(()=>{console.log(" Auto-refresh triggered"),oe(!0)},$);return()=>clearInterval(L)},[$]),w.useEffect(()=>{J==="calendar"&&de()},[J,de]),w.useEffect(()=>{let L=[...r];if(S){const B=S.toLowerCase();L=L.filter(ne=>ne.client_name.toLowerCase().includes(B)||ne.server_name.toLowerCase().includes(B)||ne.client_company?.toLowerCase().includes(B)||ne.ip_address?.toLowerCase().includes(B))}_&&(L=L.filter(B=>B.status===_)),L.sort((B,ne)=>E==="next_payment"?new Date(B.next_payment_date).getTime()-new Date(ne.next_payment_date).getTime():E==="profit"?ne.profit_amount-B.profit_amount:E==="client_name"?B.client_name.localeCompare(ne.client_name):0),i(L)},[r,S,_,E]);const F=async L=>{try{const B=await ga.createServer(L);B.success&&(te(B.message,"success"),C(!1),V(null),oe(!1))}catch(B){console.error("Error creating server:",B),te(B.response?.data?.detail||"  ","error")}},Q=async(L,B)=>{try{const ne=await ga.updateServer(L,B);ne.success&&(te(ne.message,"success"),C(!1),V(null),oe(!1))}catch(ne){console.error("Error updating server:",ne),te(ne.response?.data?.detail||"  ","error")}},W=async L=>{if(confirm(` ,     "${L.server_name}"?`))try{const B=await ga.deleteServer(L.id);B.success&&(te(B.message,"success"),oe(!1))}catch(B){console.error("Error deleting server:",B),te(B.response?.data?.detail||"  ","error")}},H=async L=>{try{const B=await ga.createPayment(L);B.success&&(te(B.message,"success"),Z(!1),q(null),oe(!1))}catch(B){console.error("Error creating payment:",B),te(B.response?.data?.detail||"  ","error")}},re=L=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",maximumFractionDigits:0}).format(L),he=L=>new Date(L).toLocaleDateString("ru-RU",{year:"numeric",month:"2-digit",day:"2-digit"}),G=L=>{const B={active:"bg-green-100 text-green-800",overdue:"bg-red-100 text-red-800",suspended:"bg-yellow-100 text-yellow-800",closed:"bg-gray-100 text-gray-800"},ne={active:"",overdue:"",suspended:"",closed:""};return e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${B[L]}`,children:ne[L]})},ce=L=>{const B=new Date(L),ne=new Date;return Math.ceil((B.getTime()-ne.getTime())/(1e3*60*60*24))},X=L=>{let B=g+L,ne=y;B>12?(B=1,ne++):B<1&&(B=12,ne--),v(B),N(ne)},O=L=>["","","","","","","","","","","",""][L-1];return s&&!o?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx(Dt,{className:"w-8 h-8 animate-spin text-sky-600"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"max-w-[2000px] mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-sky-600 to-blue-600 bg-clip-text text-transparent",children:""}),e.jsx("p",{className:"text-gray-600 mt-1",children:"   "})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[m>0&&e.jsxs("div",{className:"text-sm text-gray-500 mr-2",children:[":"," ",new Date(m).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit",second:"2-digit"})]}),e.jsxs("button",{onClick:()=>oe(!1),className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-all border border-gray-200",disabled:s,children:[e.jsx(rs,{className:`w-5 h-5 ${s?"animate-spin":""}`}),""]}),e.jsxs("button",{onClick:U,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-500 text-white rounded-lg hover:from-emerald-600 hover:to-teal-600 transition-all shadow-md",title:"   Timeweb Cloud (  )",children:[e.jsx(Ph,{className:"w-5 h-5"}),"  Timeweb"]}),e.jsxs("button",{onClick:()=>{V(null),C(!0)},className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-sky-600 to-blue-600 text-white rounded-lg hover:from-sky-700 hover:to-blue-700 transition-all shadow-lg",children:[e.jsx(Ve,{className:"w-5 h-5"})," "]})]})]}),o&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 rounded-xl shadow-lg p-6 border border-purple-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-violet-500 flex items-center justify-center shadow-lg",children:e.jsx(ct,{className:"w-6 h-6 text-white"})})}),e.jsx("div",{className:"text-3xl font-bold text-purple-700 mb-1",children:re(o.profit_all_time)}),e.jsx("div",{className:"text-sm text-gray-600 uppercase tracking-wide",children:"   "})]}),e.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-rose-50 rounded-xl shadow-lg p-6 border border-pink-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-pink-500 to-rose-500 flex items-center justify-center shadow-lg",children:e.jsx(Ge,{className:"w-6 h-6 text-white"})})}),e.jsx("div",{className:"text-3xl font-bold text-pink-700 mb-1",children:re(o.profit_month)}),e.jsx("div",{className:"text-sm text-gray-600 uppercase tracking-wide",children:"  "})]}),e.jsxs("div",{className:"bg-gradient-to-br from-cyan-50 to-blue-50 rounded-xl shadow-lg p-6 border border-cyan-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-500 to-blue-500 flex items-center justify-center shadow-lg",children:e.jsx(hn,{className:"w-6 h-6 text-white"})})}),e.jsx("div",{className:"text-3xl font-bold text-cyan-700 mb-1",children:o.active_servers}),e.jsx("div",{className:"text-sm text-gray-600 uppercase tracking-wide",children:" "})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 rounded-xl shadow-lg p-6 border border-orange-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-orange-500 to-amber-500 flex items-center justify-center shadow-lg",children:e.jsx(ir,{className:"w-6 h-6 text-white"})})}),e.jsx("div",{className:"text-3xl font-bold text-orange-700 mb-1",children:o.overdue_count}),e.jsxs("div",{className:"text-sm text-gray-600 uppercase tracking-wide",children:[" (",re(o.overdue_sum),")"]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("div",{className:"flex",children:[e.jsxs("button",{onClick:()=>se("servers"),className:`flex items-center gap-2 px-6 py-4 font-semibold transition-all ${J==="servers"?"border-b-2 border-sky-600 text-sky-600":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(hn,{className:"w-5 h-5"}),""]}),e.jsxs("button",{onClick:()=>se("calendar"),className:`flex items-center gap-2 px-6 py-4 font-semibold transition-all ${J==="calendar"?"border-b-2 border-sky-600 text-sky-600":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(pt,{className:"w-5 h-5"})," "]})]})}),e.jsxs("div",{className:"p-6",children:[J==="servers"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(gr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"  , , IP...",value:S,onChange:L=>k(L.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500"})]}),e.jsxs("select",{value:_,onChange:L=>T(L.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"active",children:""}),e.jsx("option",{value:"overdue",children:""}),e.jsx("option",{value:"suspended",children:""}),e.jsx("option",{value:"closed",children:""})]}),e.jsxs("select",{value:E,onChange:L=>z(L.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500",children:[e.jsx("option",{value:"next_payment",children:"  "}),e.jsx("option",{value:"profit",children:" "}),e.jsx("option",{value:"client_name",children:" "})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-800 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:" / "}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:" "}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:" "}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),e.jsx("th",{className:"px-6 py-4 text-center font-semibold",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:n.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:10,className:"px-6 py-12 text-center",children:[e.jsx(hn,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:" "}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"  "})]})}):n.map(L=>{const B=ce(L.next_payment_date),ne=B<0?"text-red-600 font-bold":B<=3?"text-yellow-600 font-bold":"text-gray-600";return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-800",children:L.client_name}),L.client_company&&e.jsx("div",{className:"text-sm text-gray-500",children:L.client_company})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(cJ,{clientId:L.client_id,clientName:L.client_name,onBalanceUpdate:()=>oe(!1)})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-800",children:L.server_name}),L.ip_address&&e.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-1",children:[e.jsx(Ph,{className:"w-3 h-3"}),L.ip_address]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-600",children:L.configuration||""})}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:he(L.start_date)}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-gray-800",children:[re(L.total_price),"/"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[".: ",re(L.cost_price)]})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-green-600 font-semibold",children:re(L.profit_amount)}),e.jsxs("div",{className:"text-xs text-gray-500",children:["(",L.profit_percent,"%)"]})]}),e.jsxs("td",{className:`px-6 py-4 ${ne}`,children:[e.jsx("div",{children:he(L.next_payment_date)}),e.jsx("div",{className:"text-xs",children:B>=0?` ${B} .`:` ${Math.abs(B)} .`})]}),e.jsx("td",{className:"px-6 py-4",children:G(L.status)}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>{q(L),Z(!0)},className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:" ",children:e.jsx(lE,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{V(L),C(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"",children:e.jsx(Zs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>W(L),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"",children:e.jsx(Xe,{className:"w-4 h-4"})})]})})]},L.id)})})]})})]}),J==="calendar"&&e.jsx(mJ,{events:p,month:g,year:y,onChangeMonth:X,getMonthName:O,formatCurrency:re})]})]})]}),M&&e.jsx(uJ,{isOpen:M,onClose:()=>{C(!1),V(null)},onSave:I?Q:F,server:I,projects:u}),A&&R&&e.jsx(hJ,{isOpen:A,onClose:()=>{Z(!1),q(null)},onSave:H,server:R}),e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:Y.map(L=>e.jsx("div",{className:`px-6 py-3 rounded-lg shadow-lg text-white ${L.type==="success"?"bg-green-500":L.type==="error"?"bg-red-500":L.type==="warning"?"bg-yellow-500":"bg-blue-500"} animate-slide-in`,children:L.message},L.id))})]})},uJ=({isOpen:s,onClose:t,onSave:r,server:a,projects:n})=>{const[i,o]=w.useState({project_id:a?.project_id||null,client_id:a?.client_id||null,client_name:a?.client_name||"",client_company:a?.client_company||null,client_telegram_id:a?.client_telegram_id||null,server_name:a?.server_name||"",configuration:a?.configuration||null,ip_address:a?.ip_address||null,cost_price:a?.cost_price||0,client_price:a?.client_price||0,service_fee:a?.service_fee||0,start_date:a?.start_date?a.start_date.split("T")[0]:new Date().toISOString().split("T")[0],next_payment_date:a?.next_payment_date?a.next_payment_date.split("T")[0]:new Date(Date.now()+2592e6).toISOString().split("T")[0],payment_period:a?.payment_period||"monthly",notes:a?.notes||null}),c=async h=>{if(!h){o({...i,project_id:null});return}try{const m=await ga.getProjectData(parseInt(h));m.success&&m.project&&o({...i,project_id:parseInt(h),client_name:m.project.client_name,client_telegram_id:m.project.client_telegram_id||null,server_name:i.server_name||`  "${m.project.title}"`})}catch(m){console.error("Error loading project data:",m)}},u=h=>{h.preventDefault();const m={...i,start_date:i.start_date+"T00:00:00",next_payment_date:i.next_payment_date+"T00:00:00"};a?r(a.id,m):r(m)};return s?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:a?" ":" "}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-all",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:u,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["   ()",n.length>0&&e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["( : ",n.length,")"]})]}),n.length===0?e.jsx("div",{className:"px-4 py-3 border-2 border-yellow-300 bg-yellow-50 rounded-lg text-sm text-yellow-800",children:" ..."}):e.jsx(oJ,{projects:n,value:i.project_id,onChange:h=>{c(h?h.toString():"")},placeholder:"     "}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"      "})]}),e.jsx("hr",{className:"my-4"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:i.client_name,onChange:h=>o({...i,client_name:h.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:i.client_company||"",onChange:h=>o({...i,client_company:h.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Telegram ID ( )"}),e.jsx("input",{type:"number",value:i.client_telegram_id||"",onChange:h=>o({...i,client_telegram_id:h.target.value?parseInt(h.target.value):null}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:i.server_name,onChange:h=>o({...i,server_name:h.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" (CPU, RAM, SSD)"}),e.jsx("textarea",{value:i.configuration||"",onChange:h=>o({...i,configuration:h.target.value}),rows:2,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none",placeholder:": 2 CPU, 4GB RAM, 50GB SSD"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"IP "}),e.jsx("input",{type:"text",value:i.ip_address||"",onChange:h=>o({...i,ip_address:h.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none",placeholder:"192.168.1.1"})]}),e.jsx("hr",{className:"my-4"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" (/) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",value:i.cost_price,onChange:h=>o({...i,cost_price:parseFloat(h.target.value)}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["   (/) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",value:i.client_price,onChange:h=>o({...i,client_price:parseFloat(h.target.value)}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  (/)"}),e.jsx("input",{type:"number",step:"0.01",value:i.service_fee,onChange:h=>o({...i,service_fee:parseFloat(h.target.value)}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["   ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:i.start_date,onChange:h=>o({...i,start_date:h.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:i.next_payment_date,onChange:h=>o({...i,next_payment_date:h.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:i.payment_period,onChange:h=>o({...i,payment_period:h.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none",required:!0,children:[e.jsx("option",{value:"monthly",children:""}),e.jsx("option",{value:"quarterly",children:"  3 "}),e.jsx("option",{value:"yearly",children:"  "})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:i.notes||"",onChange:h=>o({...i,notes:h.target.value}),rows:3,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:t,className:"flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all font-semibold",children:""}),e.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-gradient-to-r from-sky-600 to-blue-600 text-white rounded-lg hover:from-sky-700 hover:to-blue-700 transition-all font-semibold shadow-lg",children:a?"":""})]})]})]})}):null},hJ=({isOpen:s,onClose:t,onSave:r,server:a})=>{const[n,i]=w.useState({server_id:a.id,amount:a.total_price,payment_date:new Date().toISOString().slice(0,16),expected_date:a.next_payment_date,period_start:a.next_payment_date,period_end:a.next_payment_date,status:"paid",payment_method:null,notes:null}),o=c=>{c.preventDefault(),r(n)};return s?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full",children:[e.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between rounded-t-2xl",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:" "}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-all",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:o,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"bg-sky-50 rounded-lg p-4 mb-4",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:":"}),e.jsx("div",{className:"text-gray-600",children:a.server_name}),e.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[": ",a.client_name]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  () ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",value:n.amount,onChange:c=>i({...n,amount:parseFloat(c.target.value)}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["   ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"datetime-local",value:n.payment_date||"",onChange:c=>i({...n,payment_date:c.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsxs("select",{value:n.payment_method||"",onChange:c=>i({...n,payment_method:c.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none",children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"card",children:""}),e.jsx("option",{value:"bank",children:" "}),e.jsx("option",{value:"cash",children:""}),e.jsx("option",{value:"other",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"date",value:n.period_start.split("T")[0],onChange:c=>i({...n,period_start:c.target.value+"T00:00:00"}),className:"px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none",placeholder:""}),e.jsx("input",{type:"date",value:n.period_end.split("T")[0],onChange:c=>i({...n,period_end:c.target.value+"T00:00:00"}),className:"px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none",placeholder:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:n.notes||"",onChange:c=>i({...n,notes:c.target.value}),rows:2,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-sky-500 outline-none"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:t,className:"flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all font-semibold",children:""}),e.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all font-semibold shadow-lg",children:""})]})]})]})}):null},mJ=({events:s,month:t,year:r,onChangeMonth:a,getMonthName:n,formatCurrency:i})=>{const o={};s.forEach(v=>{o[v.date]||(o[v.date]=[]),o[v.date].push(v)});const c=new Date(r,t-1,1),h=new Date(r,t,0).getDate(),m=c.getDay()===0?6:c.getDay()-1,f=[];let p=Array(m).fill(null),j=1;for(;j<=h;)p.push(j),j++,p.length===7&&(f.push(p),p=[]);if(p.length>0){for(;p.length<7;)p.push(null);f.push(p)}const g=v=>({green:"bg-green-100 text-green-700 border-l-4 border-green-500",blue:"bg-blue-100 text-blue-700 border-l-4 border-blue-500",yellow:"bg-yellow-100 text-yellow-700 border-l-4 border-yellow-500",red:"bg-red-100 text-red-700 border-l-4 border-red-500"})[v]||"bg-gray-100 text-gray-700 border-l-4 border-gray-500";return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h5",{className:"text-xl font-bold text-gray-800",children:"  "}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>a(-1),className:"p-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:e.jsx(aE,{className:"w-5 h-5"})}),e.jsxs("div",{className:"px-6 py-2 bg-sky-50 rounded-lg font-semibold text-gray-800 min-w-[200px] text-center",children:[n(t)," ",r]}),e.jsx("button",{onClick:()=>a(1),className:"p-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:e.jsx(jn,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:["","","","","","",""].map(v=>e.jsx("div",{className:"text-center font-bold text-gray-600 py-2",children:v},v))}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:f.map((v,y)=>v.map((N,S)=>{if(!N)return e.jsx("div",{className:"min-h-[100px] bg-gray-50 rounded-lg border border-gray-200"},`${y}-${S}`);const k=`${r}-${String(t).padStart(2,"0")}-${String(N).padStart(2,"0")}`,_=o[k]||[];return e.jsxs("div",{className:"min-h-[100px] bg-white rounded-lg border border-gray-200 p-2 hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"font-bold text-gray-700 mb-2",children:N}),e.jsx("div",{className:"space-y-1",children:_.map(T=>e.jsx("div",{className:`text-xs p-1 rounded ${g(T.color)}`,title:T.title,children:i(T.amount)},T.id))})]},`${y}-${S}`)}))}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 border-l-4 border-green-500 rounded",children:""}),e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 border-l-4 border-blue-500 rounded",children:""}),e.jsx("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-700 border-l-4 border-yellow-500 rounded",children:" (3 )"}),e.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-700 border-l-4 border-red-500 rounded",children:""})]})]})},wh={getUserPermissions:async s=>(await fe.get(`/admin/permissions/user/${s}`)).data,updateUserPermissions:async(s,t)=>(await fe.post(`/admin/permissions/user/${s}/update`,{module_permissions:t})).data,getRoleTemplate:async s=>(await fe.get(`/admin/permissions/role/${s}/template`)).data,applyRoleTemplate:async(s,t)=>(await fe.post(`/admin/permissions/user/${s}/apply-role-template`,null,{params:{role_name:t}})).data,getStatistics:async()=>(await fe.get("/admin/permissions/statistics")).data,resetUserPermissions:async s=>(await fe.post(`/admin/permissions/user/${s}/reset`)).data,getUsers:async()=>(await fe.get("/admin/api/users/api")).data},Lp="/api/ui-permissions",xJ=async()=>(await fe.get(`${Lp}/structure`)).data.structure,fJ=async s=>(await fe.get(`${Lp}/user/${s}`)).data,pJ=async(s,t)=>(await fe.post(`${Lp}/user/${s}/update`,{permissions:t})).data,gJ=async s=>(await fe.post(`${Lp}/user/${s}/reset`)).data,bJ=(s,t)=>{const r=[];return Object.entries(s).forEach(([a,n])=>{const i={field:[],button:[],section:[],column:[],tab:[],action:[]};Object.entries(n.elements).forEach(([o,c])=>{const u=`${a}.${o}`,h=t[u],m=h?h.is_enabled:!0,f={id:o,name:c.name,enabled:m};c.type in i&&i[c.type].push(f)}),r.push({module:a,moduleName:n.name,elementsByType:i})}),r},yJ={field:Ie,button:YB,section:QB,column:RP,tab:mE,action:Ua},vJ={field:"",button:"",section:"",column:"",tab:"",action:""},jJ=({userId:s,username:t,onSave:r})=>{const[a,n]=w.useState(null),[i,o]=w.useState({}),[c,u]=w.useState(!0),[h,m]=w.useState(!1),[f,p]=w.useState(new Set),[j,g]=w.useState(!1);w.useEffect(()=>{v()},[s]);const v=async()=>{u(!0);try{const[M,C]=await Promise.all([xJ(),fJ(s)]);n(M),o(C.permissions),g(!1)}catch(M){console.error("  :",M)}finally{u(!1)}},y=M=>{const C=new Set(f);C.has(M)?C.delete(M):C.add(M),p(C)},N=(M,C)=>{const A=`${M}.${C}`,Z=i[A]?.is_enabled??!0;o(I=>({...I,[A]:{...I[A],is_enabled:!Z,element_type:I[A]?.element_type||"field"}})),g(!0)},S=(M,C)=>{if(!a)return;const A={...i},Z=a[M]?.elements||{};Object.keys(Z).forEach(I=>{const V=`${M}.${I}`;A[V]={is_enabled:C,element_type:Z[I].type}}),o(A),g(!0)},k=async()=>{m(!0);try{const M={};Object.entries(i).forEach(([C,A])=>{M[C]=A.is_enabled}),await pJ(s,M),g(!1),r?.()}catch(M){console.error(" :",M),alert("    ")}finally{m(!1)}},_=async()=>{if(confirm(" ?        .")){m(!0);try{await gJ(s),await v(),r?.()}catch(M){console.error(" :",M),alert("    ")}finally{m(!1)}}},T=()=>{a&&p(new Set(Object.keys(a)))},E=()=>{p(new Set)};if(c)return e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})});if(!a)return e.jsx("div",{className:"text-center p-12 text-gray-600",children:"    "});const z=bJ(a,i);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"  "}),e.jsxs("p",{className:"text-sm text-gray-600",children:["    ,     ",t]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:T,className:"px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:" "}),e.jsx("button",{onClick:E,className:"px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:" "})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:k,disabled:!j||h,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${j&&!h?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:shadow-lg":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[e.jsx(ka,{className:"w-4 h-4"}),h?"...":" "]}),e.jsxs("button",{onClick:_,disabled:h,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[e.jsx(wn,{className:"w-4 h-4"})," ( )"]}),e.jsxs("button",{onClick:v,disabled:h,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[e.jsx(wn,{className:"w-4 h-4"})," "]})]}),j&&e.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-sm text-yellow-800",children:"    "})]}),e.jsx("div",{className:"space-y-3",children:z.map(M=>{const C=f.has(M.module),A=Object.values(M.elementsByType).reduce((I,V)=>I+V.length,0),Z=Object.values(M.elementsByType).reduce((I,V)=>I+V.filter(R=>R.enabled).length,0);return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-white border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>y(M.module),className:"flex items-center gap-3 flex-1 text-left",children:[C?e.jsx(vp,{className:"w-5 h-5 text-gray-500"}):e.jsx(_i,{className:"w-5 h-5 text-gray-500"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:M.moduleName}),e.jsxs("p",{className:"text-sm text-gray-600",children:[Z,"  ",A,"  "]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:I=>{I.stopPropagation(),S(M.module,!0)},className:"px-3 py-1 text-sm text-green-700 bg-green-50 hover:bg-green-100 rounded-lg transition-colors",children:[e.jsx(Ft,{className:"w-4 h-4 inline mr-1"})," "]}),e.jsxs("button",{onClick:I=>{I.stopPropagation(),S(M.module,!1)},className:"px-3 py-1 text-sm text-red-700 bg-red-50 hover:bg-red-100 rounded-lg transition-colors",children:[e.jsx($o,{className:"w-4 h-4 inline mr-1"})," "]})]})]})}),C&&e.jsx("div",{className:"p-4 space-y-4",children:Object.entries(M.elementsByType).map(([I,V])=>{if(V.length===0)return null;const R=yJ[I],q=vJ[I];return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(R,{className:"w-4 h-4 text-gray-500"}),e.jsx("h5",{className:"font-medium text-gray-700",children:q}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",V.length,")"]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:V.map(J=>e.jsxs("button",{onClick:()=>N(M.module,J.id),className:`flex items-center gap-2 p-2 rounded-lg border transition-all ${J.enabled?"bg-green-50 border-green-200 text-green-900 hover:bg-green-100":"bg-red-50 border-red-200 text-red-900 hover:bg-red-100"}`,children:[J.enabled?e.jsx(zr,{className:"w-4 h-4 text-green-600 flex-shrink-0"}):e.jsx(kl,{className:"w-4 h-4 text-red-600 flex-shrink-0"}),e.jsx("span",{className:"text-sm truncate",children:J.name})]},J.id))})]},I)})})]},M.module)})})]})},wJ={dashboard:"",projects:"",clients:"",leads:"",deals:"",finance:"",documents:"",reports:"",settings:"",users:"",avito:""},NJ=()=>{const[s,t]=w.useState([]),[r,a]=w.useState(null),[n,i]=w.useState(null),[o,c]=w.useState(!1),[u,h]=w.useState(!1),[m,f]=w.useState(new Set),[p,j]=w.useState(null),[g,v]=w.useState("module");w.useEffect(()=>{y()},[]);const y=w.useCallback(async()=>{try{const Z=await wh.getUsers();if(Z.success){const I=Z.users.filter(V=>V.role!=="owner");t(I)}}catch(Z){console.error("Error loading users:",Z),S("  ","error")}},[]),N=w.useCallback(async Z=>{c(!0);try{const I=await wh.getUserPermissions(Z);i(I),a(Z)}catch(I){console.error("Error loading user permissions:",I),S("   ","error")}finally{c(!1)}},[]),S=w.useCallback((Z,I)=>{j({message:Z,type:I}),setTimeout(()=>j(null),4e3)},[]),k=w.useCallback(Z=>{f(I=>{const V=new Set(I);return V.has(Z)?V.delete(Z):V.add(Z),V})},[]),_=w.useCallback((Z,I)=>{n&&i(V=>{if(!V)return V;const R={...V.module_permissions};if(R[Z]||(R[Z]={enabled:!1,permissions:{},data_access:{type:"none",can_view:!1,can_edit:!1,can_delete:!1,can_export:!1}}),R[Z]={...R[Z],enabled:I},!I){const q={};Object.keys(R[Z].permissions).forEach(J=>{q[J]=!1}),R[Z].permissions=q}return{...V,module_permissions:R}})},[n]),T=w.useCallback((Z,I,V)=>{n&&i(R=>{if(!R)return R;const q={...R.module_permissions};return q[Z]||(q[Z]={enabled:!1,permissions:{},data_access:{type:"none",can_view:!1,can_edit:!1,can_delete:!1,can_export:!1}}),q[Z]={...q[Z],permissions:{...q[Z].permissions,[I]:V}},{...R,module_permissions:q}})},[n]),E=w.useCallback((Z,I,V)=>{n&&i(R=>{if(!R)return R;const q={...R.module_permissions};return q[Z]||(q[Z]={enabled:!1,permissions:{},data_access:{type:"none",can_view:!1,can_edit:!1,can_delete:!1,can_export:!1}}),q[Z]={...q[Z],data_access:{...q[Z].data_access,[I]:V}},{...R,module_permissions:q}})},[n]),z=w.useCallback(async Z=>{if(!r){S(" ","error");return}try{const I=await wh.getRoleTemplate(Z);i(V=>V&&{...V,module_permissions:I.modules}),S(`  "${I.name}"`,"success")}catch(I){console.error("Error applying template:",I),S("  ","error")}},[r,S]),M=w.useCallback(async()=>{if(!r||!n){S(" ","error");return}h(!0);try{const Z=await wh.updateUserPermissions(r,n.module_permissions);if(Z.success)S("  !","success");else throw new Error(Z.message)}catch(Z){console.error("Error saving permissions:",Z),S("  ","error")}finally{h(!1)}},[r,n,S]),C=w.useCallback(async()=>{if(!r){S(" ","error");return}if(confirm(" ,       ?"))try{const Z=await wh.resetUserPermissions(r);if(Z.success)S("  ","success"),N(r);else throw new Error(Z.message)}catch(Z){console.error("Error resetting permissions:",Z),S("  ","error")}},[r,S,N]),A=w.useMemo(()=>({view:" ",create:" ",edit:" ",delete:" ",export:" ",assign:" ",convert:" ",close:" ",contact:" ",reports:" ",manage:" ","system.manage":" ","permissions.manage":" ","widgets.manage":" ","messages.send":" ","chats.manage":" ","settings.edit":" ",generate:" ",sign:" ",schedule:" "}),[]);return e.jsxs("div",{className:"bg-gradient-to-br from-red-50 via-pink-50 to-red-100",children:[e.jsx("div",{className:"bg-gradient-to-r from-red-500 to-pink-600 text-white p-8 rounded-3xl shadow-2xl mb-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center",children:e.jsx(Er,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold",children:"  "}),e.jsx("p",{className:"text-red-100 mt-1",children:"     "})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-8 pb-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl p-6 border border-red-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(tt,{className:"w-6 h-6 text-red-500"}),e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:""})]}),e.jsxs("div",{className:"space-y-3 max-h-[600px] overflow-y-auto",children:[s.map(Z=>e.jsx("div",{onClick:()=>N(Z.id),className:`
                    p-4 rounded-2xl cursor-pointer transition-all duration-300
                    ${r===Z.id?"bg-gradient-to-r from-red-100 to-pink-100 border-2 border-red-500 shadow-lg":"bg-gray-50 hover:bg-gray-100 border-2 border-transparent"}
                  `,children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-red-500 to-pink-500 flex items-center justify-center text-white font-bold shadow-lg",children:Z.username[0].toUpperCase()}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-gray-800",children:Z.username}),e.jsxs("div",{className:`
                          text-xs px-2 py-1 rounded-full inline-block mt-1
                          ${Z.role==="executor"?"bg-green-100 text-green-700":""}
                          ${Z.role==="salesperson"?"bg-orange-100 text-orange-700":""}
                          ${Z.role==="admin"?"bg-purple-100 text-purple-700":""}
                        `,children:[Z.role==="executor"?" ":"",Z.role==="salesperson"?" ":"",Z.role==="admin"?" ":""]})]})]})})},Z.id)),s.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx(tt,{className:"w-16 h-16 mx-auto mb-4 opacity-30"}),e.jsx("h4",{className:"font-semibold text-gray-600",children:" "}),e.jsx("p",{className:"text-sm",children:'    ""'})]})]})]}),e.jsxs("div",{className:"lg:col-span-2 bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl p-6 border border-red-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Na,{className:"w-6 h-6 text-red-500"}),e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:" "})]}),r&&g==="module"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>z("executor"),className:"px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl hover:shadow-lg transition-all duration-300 flex items-center gap-2",children:[e.jsx(iE,{className:"w-4 h-4"}),""]}),e.jsxs("button",{onClick:()=>z("salesperson"),className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-amber-500 text-white rounded-xl hover:shadow-lg transition-all duration-300 flex items-center gap-2",children:[e.jsx(vn,{className:"w-4 h-4"}),""]})]})]}),r&&e.jsxs("div",{className:"flex gap-2 mb-6 border-b border-gray-200",children:[e.jsx("button",{onClick:()=>v("module"),className:`px-4 py-2 font-medium transition-all ${g==="module"?"text-red-600 border-b-2 border-red-600":"text-gray-600 hover:text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Er,{className:"w-4 h-4"})," "]})}),e.jsx("button",{onClick:()=>v("ui"),className:`px-4 py-2 font-medium transition-all ${g==="ui"?"text-red-600 border-b-2 border-red-600":"text-gray-600 hover:text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qj,{className:"w-4 h-4"})," UI "]})})]}),o&&e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-red-200 border-t-red-500 rounded-full animate-spin mx-auto mb-4"}),e.jsx("h4",{className:"text-gray-600 font-semibold",children:"  ..."})]}),!o&&!n&&e.jsxs("div",{className:"text-center py-20 text-gray-400",children:[e.jsx(Er,{className:"w-16 h-16 mx-auto mb-4 opacity-30"}),e.jsx("h4",{className:"font-semibold text-gray-600",children:" "}),e.jsx("p",{className:"text-sm",children:"         "})]}),!o&&n&&g==="module"&&e.jsxs("div",{children:[e.jsx("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 rounded-2xl p-5 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-red-500 to-pink-500 flex items-center justify-center text-white font-bold shadow-lg",children:n.user.username[0].toUpperCase()}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800",children:n.user.username}),e.jsx("p",{className:"text-sm text-gray-600",children:n.user.email})]})]})}),e.jsx("div",{className:"space-y-4 max-h-[500px] overflow-y-auto",children:Object.entries(n.available_modules).map(([Z,I])=>{const V=n.module_permissions[Z]||{enabled:!1,permissions:{},data_access:{type:"none",can_view:!1,can_edit:!1,can_delete:!1,can_export:!1}},R=V.enabled,q=m.has(Z);return e.jsxs("div",{className:`
                          rounded-2xl overflow-hidden border-2 transition-all duration-300
                          ${R?"border-green-500 bg-green-50":"border-gray-200 bg-gray-50"}
                        `,children:[e.jsx("div",{className:"p-4 cursor-pointer hover:bg-white/50 transition-colors",onClick:()=>k(Z),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:"text-2xl",children:wJ[Z]||""}),e.jsxs("div",{children:[e.jsx("h6",{className:"font-semibold text-gray-800",children:I.name}),e.jsx("small",{className:"text-gray-500",children:I.description})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:R,onChange:J=>{J.stopPropagation(),_(Z,J.target.checked)}}),e.jsx("div",{className:"w-14 h-7 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-green-500"})]}),q?e.jsx(vp,{className:"w-5 h-5 text-gray-400"}):e.jsx(_i,{className:"w-5 h-5 text-gray-400"})]})]})}),q&&e.jsx("div",{className:"p-5 bg-white/70 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h6",{className:"font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(Er,{className:"w-4 h-4 text-red-500"}),""]}),e.jsx("div",{className:"space-y-2",children:I.permissions.map(J=>{const se=V.permissions[J]||!1;return e.jsxs("label",{className:"flex items-center justify-between p-3 bg-white rounded-xl hover:bg-gray-50 transition-colors cursor-pointer",children:[e.jsx("span",{className:"text-sm text-gray-700",children:A[J]||J}),e.jsx("input",{type:"checkbox",className:"w-5 h-5 text-green-500 rounded focus:ring-green-500",checked:se,onChange:Y=>T(Z,J,Y.target.checked)})]},J)})})]}),e.jsxs("div",{children:[e.jsxs("h6",{className:"font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(Na,{className:"w-4 h-4 text-red-500"}),"  "]}),e.jsxs("select",{className:"w-full p-3 bg-white border border-gray-300 rounded-xl mb-3 focus:ring-2 focus:ring-red-500 focus:border-transparent",value:V.data_access.type,onChange:J=>E(Z,"type",J.target.value),children:[e.jsx("option",{value:"none",children:"  "}),e.jsx("option",{value:"own",children:"  "}),e.jsx("option",{value:"team",children:" "}),e.jsx("option",{value:"all",children:"  "})]}),e.jsx("div",{className:"space-y-2",children:["can_view","can_edit","can_delete","can_export"].map(J=>e.jsxs("label",{className:"flex items-center justify-between p-3 bg-white rounded-xl hover:bg-gray-50 transition-colors cursor-pointer",children:[e.jsxs("span",{className:"text-sm text-gray-700",children:[J==="can_view"&&" ",J==="can_edit"&&" ",J==="can_delete"&&" ",J==="can_export"&&" "]}),e.jsx("input",{type:"checkbox",className:"w-5 h-5 text-green-500 rounded focus:ring-green-500",checked:V.data_access[J],onChange:se=>E(Z,J,se.target.checked)})]},J))})]})]})})]},Z)})}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx("button",{onClick:M,disabled:u,className:"flex-1 px-6 py-4 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-2xl hover:shadow-xl transition-all duration-300 flex items-center justify-center gap-3 font-semibold disabled:opacity-50",children:u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ka,{className:"w-5 h-5"})," "]})}),e.jsxs("button",{onClick:C,className:"px-6 py-4 bg-white border-2 border-red-300 text-red-600 rounded-2xl hover:bg-red-50 transition-all duration-300 flex items-center gap-3 font-semibold",children:[e.jsx(wn,{className:"w-5 h-5"})," "]})]})]}),!o&&r&&g==="ui"&&e.jsx(jJ,{userId:r,username:n?.user.username||`User #${r}`,onSave:()=>{S(" UI   ","success")}})]})]})}),p&&e.jsx("div",{className:`
          fixed top-6 right-6 px-6 py-4 rounded-2xl shadow-2xl border-l-4 z-50
          animate-in slide-in-from-right duration-300
          ${p.type==="success"?"bg-white border-green-500":"bg-white border-red-500"}
        `,children:e.jsxs("div",{className:"flex items-center gap-3",children:[p.type==="success"?e.jsx(zr,{className:"w-6 h-6 text-green-500"}):e.jsx(qe,{className:"w-6 h-6 text-red-500"}),e.jsx("span",{className:"font-medium text-gray-800",children:p.message})]})})]})},go={getUsers:async()=>(await fe.get("/admin/api/users/api")).data,getUser:async s=>(await fe.get(`/admin/api/users/${s}`)).data,createUser:async s=>(await fe.post("/admin/api/users/create",s)).data,updateUser:async(s,t)=>(await fe.put(`/admin/api/users/${s}`,t)).data,changePassword:async(s,t)=>(await fe.put(`/admin/api/users/${s}/password`,{password:t,new_password:t})).data,viewPassword:async s=>(await fe.get(`/admin/api/users/${s}/password/view`)).data,deactivateUser:async s=>(await fe.delete(`/admin/api/users/${s}`)).data,updateNotifications:async(s,t)=>(await fe.put(`/admin/api/users/${s}/notifications`,t)).data,toggleUserStatus:async(s,t)=>(await fe.put(`/admin/api/users/${s}`,{is_active:t})).data,getExecutors:async()=>(await fe.get("/admin/api/users/executors")).data},_J=()=>{const[s,t]=w.useState([]),[r,a]=w.useState(""),[n,i]=w.useState(!1),[o,c]=w.useState(!1),[u,h]=w.useState(!1),[m,f]=w.useState(!1),[p,j]=w.useState(!1),[g,v]=w.useState(null),[y,N]=w.useState(null),[S,k]=w.useState(!1),[_,T]=w.useState(""),[E,z]=w.useState({username:"",password:"",email:"",first_name:"",last_name:"",role:"executor"}),[M,C]=w.useState({first_name:"",last_name:"",email:"",password:"",is_active:!0}),[A,Z]=w.useState(""),[I,V]=w.useState("");w.useEffect(()=>{R()},[]);const R=w.useCallback(async()=>{i(!0);try{const F=await go.getUsers();F.success&&t(F.users)}catch(F){console.error("Error loading users:",F),q("  ","error")}finally{i(!1)}},[]),q=w.useCallback((F,Q)=>{N({message:F,type:Q}),setTimeout(()=>N(null),4e3)},[]),J=w.useMemo(()=>{if(!r)return s;const F=r.toLowerCase();return s.filter(Q=>Q.username.toLowerCase().includes(F)||Q.email?.toLowerCase().includes(F)||Q.first_name?.toLowerCase().includes(F)||Q.last_name?.toLowerCase().includes(F))},[s,r]),se=w.useMemo(()=>({total:s.length,owners:s.filter(F=>F.role==="owner").length,admins:s.filter(F=>F.role==="admin").length,executors:s.filter(F=>F.role==="executor").length,salespeople:s.filter(F=>F.role==="salesperson").length,timleads:s.filter(F=>F.role==="timlead").length}),[s]),Y=w.useCallback(async()=>{if(!E.username||!E.password){q("  ","error");return}try{const F=await go.createUser(E);F.success?(q("  ","success"),c(!1),z({username:"",password:"",email:"",first_name:"",last_name:"",role:"executor"}),R()):q(F.message||F.detail||"  ","error")}catch(F){console.error("Error creating user:",F),q(F.response?.data?.detail||"  ","error")}},[E,q,R]),ee=w.useCallback(async F=>{v(F),C({first_name:F.first_name||"",last_name:F.last_name||"",email:F.email||"",password:"",is_active:F.is_active}),h(!0)},[]),te=w.useCallback(async()=>{if(g)try{const F=await go.updateUser(g.id,M);F.success?(q("  ","success"),h(!1),v(null),R()):q(F.message||"  ","error")}catch(F){console.error("Error updating user:",F),q("  ","error")}},[g,M,q,R]),K=w.useCallback(F=>{v(F),Z(""),V(""),f(!0)},[]),$=w.useCallback(async()=>{if(g){if(A!==I){q("  ","error");return}if(A.length<6){q("    6 ","error");return}try{const F=await go.changePassword(g.id,A);F.success?(q("  ","success"),f(!1),v(null),Z(""),V("")):q(F.message||"  ","error")}catch(F){console.error("Error changing password:",F),q("  ","error")}}},[g,A,I,q]),le=w.useCallback(async F=>{try{const Q=await go.viewPassword(F.id);Q.success?(T(Q.password),v(F),j(!0)):q(Q.message||"   ","error")}catch(Q){console.error("Error viewing password:",Q),q("   ","error")}},[q]),ie=w.useCallback(async F=>{try{const Q=await go.toggleUserStatus(F.id,!F.is_active);Q.success?(q(F.is_active?" ":" ","success"),R()):q(Q.message||"  ","error")}catch(Q){console.error("Error toggling status:",Q),q("  ","error")}},[q,R]),oe=w.useCallback(async F=>{if(confirm(` ,     ${F.username}?`))try{const Q=await go.deactivateUser(F.id);Q.success?(q(" ","success"),R()):q(Q.message||"  ","error")}catch(Q){console.error("Error deleting user:",Q),q("  ","error")}},[q,R]),de=w.useCallback(()=>{navigator.clipboard.writeText(_),q("    ","success")},[_,q]),U=w.useCallback(F=>{switch(F){case"owner":return e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gradient-to-r from-purple-500 to-indigo-600 text-white rounded-full text-sm font-semibold",children:[e.jsx(PP,{className:"w-4 h-4"}),""]});case"admin":return e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gradient-to-r from-blue-500 to-cyan-600 text-white rounded-full text-sm font-semibold",children:[e.jsx(Er,{className:"w-4 h-4"}),""]});case"salesperson":return e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-full text-sm font-semibold",children:[e.jsx(vn,{className:"w-4 h-4"}),""]});case"timlead":return e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gradient-to-r from-orange-500 to-amber-600 text-white rounded-full text-sm font-semibold",children:[e.jsx(st,{className:"w-4 h-4"}),""]});default:return e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gradient-to-r from-pink-500 to-rose-600 text-white rounded-full text-sm font-semibold",children:[e.jsx(st,{className:"w-4 h-4"}),""]})}},[]);return e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 via-slate-50 to-gray-100",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-500 to-slate-600 text-white p-8 rounded-3xl shadow-2xl mb-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center",children:e.jsx(tt,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold",children:" "}),e.jsx("p",{className:"text-gray-100 mt-1",children:"   "})]})]}),e.jsxs("button",{onClick:()=>c(!0),className:"px-6 py-3 bg-white text-gray-700 rounded-2xl hover:shadow-xl transition-all duration-300 flex items-center gap-3 font-semibold",children:[e.jsx(xN,{className:"w-5 h-5"})," "]})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-4 mt-8",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold",children:se.total}),e.jsx("div",{className:"text-sm text-gray-200 mt-1",children:""})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold",children:se.owners}),e.jsx("div",{className:"text-sm text-gray-200 mt-1",children:""})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold",children:se.admins}),e.jsx("div",{className:"text-sm text-gray-200 mt-1",children:""})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold",children:se.executors}),e.jsx("div",{className:"text-sm text-gray-200 mt-1",children:""})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold",children:se.salespeople}),e.jsx("div",{className:"text-sm text-gray-200 mt-1",children:""})]})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-8 pb-8",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-4 mb-6 border border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(Fs,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"    username...",value:r,onChange:F=>a(F.target.value),className:"w-full pl-12 pr-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-500 focus:border-transparent"})]})}),e.jsx("div",{className:"space-y-4",children:n?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-gray-500 rounded-full animate-spin mx-auto mb-4"}),e.jsx("h4",{className:"text-gray-600 font-semibold",children:" ..."})]}):J.length===0?e.jsxs("div",{className:"text-center py-20 text-gray-400",children:[e.jsx(tt,{className:"w-16 h-16 mx-auto mb-4 opacity-30"}),e.jsx("h4",{className:"font-semibold text-gray-600",children:"  "}),e.jsx("p",{className:"text-sm",children:"     "})]}):J.map(F=>e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6 border border-gray-200 hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-gray-500 to-slate-600 flex items-center justify-center text-white font-bold shadow-lg",children:F.username[0].toUpperCase()}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("h5",{className:"text-lg font-bold text-gray-800",children:F.first_name&&F.last_name?`${F.first_name} ${F.last_name}`:F.username}),e.jsx("div",{className:`
                          px-2 py-1 rounded-lg text-xs font-semibold
                          ${F.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}
                        `,children:F.is_active?e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(zr,{className:"w-3 h-3"}),""]}):e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(qe,{className:"w-3 h-3"}),""]})})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["@",F.username]}),F.email&&e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:F.email})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:U(F.role)})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-700",children:F.tasks_count||0}),e.jsx("div",{className:"text-xs text-gray-500 uppercase",children:" "})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-700",children:F.active_tasks||0}),e.jsx("div",{className:"text-xs text-gray-500 uppercase",children:""})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-700",children:F.created_at?new Date(F.created_at).toLocaleDateString():"-"}),e.jsx("div",{className:"text-xs text-gray-500 uppercase",children:""})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[e.jsxs("button",{onClick:()=>ee(F),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-colors flex items-center gap-2 text-sm font-semibold",children:[e.jsx(kn,{className:"w-4 h-4"}),""]}),e.jsxs("button",{onClick:()=>le(F),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-colors flex items-center gap-2 text-sm font-semibold",children:[e.jsx(Ft,{className:"w-4 h-4"})," "]}),e.jsxs("button",{onClick:()=>K(F),className:"px-4 py-2 bg-green-500 text-white rounded-xl hover:bg-green-600 transition-colors flex items-center gap-2 text-sm font-semibold",children:[e.jsx(Kj,{className:"w-4 h-4"})," "]}),F.role!=="owner"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ie(F),className:`px-4 py-2 rounded-xl transition-colors flex items-center gap-2 text-sm font-semibold ${F.is_active?"bg-amber-500 text-white hover:bg-amber-600":"bg-emerald-500 text-white hover:bg-emerald-600"}`,children:F.is_active?e.jsxs(e.Fragment,{children:[e.jsx(QF,{className:"w-4 h-4"}),""]}):e.jsxs(e.Fragment,{children:[e.jsx(KF,{className:"w-4 h-4"}),""]})}),e.jsxs("button",{onClick:()=>oe(F),className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors flex items-center gap-2 text-sm font-semibold",children:[e.jsx(Xe,{className:"w-4 h-4"}),""]})]})]})]},F.id))})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full p-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:" "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Username *"}),e.jsx("input",{type:"text",value:E.username,onChange:F=>z({...E,username:F.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" *"}),e.jsx("input",{type:"password",value:E.password,onChange:F=>z({...E,password:F.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-500 focus:border-transparent"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:E.first_name,onChange:F=>z({...E,first_name:F.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:E.last_name,onChange:F=>z({...E,last_name:F.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:E.email,onChange:F=>z({...E,email:F.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsxs("select",{value:E.role,onChange:F=>z({...E,role:F.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-500 focus:border-transparent",children:[e.jsx("option",{value:"salesperson",children:""}),e.jsx("option",{value:"executor",children:""}),e.jsx("option",{value:"admin",children:""}),e.jsx("option",{value:"owner",children:""})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>c(!1),className:"flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-colors font-semibold",children:""}),e.jsx("button",{onClick:Y,className:"flex-1 px-6 py-3 bg-gradient-to-r from-gray-500 to-slate-600 text-white rounded-xl hover:shadow-lg transition-all duration-300 font-semibold",children:""})]})]})}),u&&g&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full p-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:" "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Username"}),e.jsx("input",{type:"text",value:g.username,disabled:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl bg-gray-100"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:M.first_name,onChange:F=>C({...M,first_name:F.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:M.last_name,onChange:F=>C({...M,last_name:F.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:M.email,onChange:F=>C({...M,email:F.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-500 focus:border-transparent"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:M.is_active,onChange:F=>C({...M,is_active:F.target.checked}),className:"w-5 h-5 text-gray-500 rounded focus:ring-gray-500"}),e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:""})]})})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>h(!1),className:"flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-colors font-semibold",children:""}),e.jsx("button",{onClick:te,className:"flex-1 px-6 py-3 bg-gradient-to-r from-gray-500 to-slate-600 text-white rounded-xl hover:shadow-lg transition-all duration-300 font-semibold",children:""})]})]})}),m&&g&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full p-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:" "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:S?"text":"password",value:A,onChange:F=>Z(F.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-500 focus:border-transparent pr-12"}),e.jsx("button",{onClick:()=>k(!S),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:S?e.jsx($o,{className:"w-5 h-5"}):e.jsx(Ft,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  *"}),e.jsx("input",{type:S?"text":"password",value:I,onChange:F=>V(F.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>f(!1),className:"flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-colors font-semibold",children:""}),e.jsx("button",{onClick:$,className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl hover:shadow-lg transition-all duration-300 font-semibold",children:" "})]})]})}),p&&g&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full p-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:" "}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-4 mb-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700 mb-2",children:[e.jsx(qe,{className:"w-5 h-5"}),e.jsxs("span",{className:"font-semibold",children:[": ",g.username]})]})}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:_,readOnly:!0,className:"flex-1 px-4 py-3 border border-gray-300 rounded-xl bg-gray-50"}),e.jsx("button",{onClick:de,className:"px-4 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-colors",children:""})]})}),e.jsxs("div",{className:"text-xs text-gray-500 mb-6",children:[e.jsx(Er,{className:"w-4 h-4 inline mr-1"}),"    "]}),e.jsx("button",{onClick:()=>j(!1),className:"w-full px-6 py-3 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-colors font-semibold",children:""})]})}),y&&e.jsx("div",{className:`
          fixed top-6 right-6 px-6 py-4 rounded-2xl shadow-2xl border-l-4 z-50
          animate-in slide-in-from-right duration-300
          ${y.type==="success"?"bg-white border-green-500":"bg-white border-red-500"}
        `,children:e.jsxs("div",{className:"flex items-center gap-3",children:[y.type==="success"?e.jsx(zr,{className:"w-6 h-6 text-green-500"}):e.jsx(qe,{className:"w-6 h-6 text-red-500"}),e.jsx("span",{className:"font-medium text-gray-800",children:y.message})]})})]})},kJ=()=>{const{theme:s,setTheme:t}=hp(),[r,a]=w.useState("overview"),n=[{icon:st,title:"",description:"  ",gradient:"from-blue-500 to-cyan-500"},{icon:Zr,title:"",description:" ",gradient:"from-purple-500 to-pink-500"},{icon:Er,title:"",description:"   ",gradient:"from-green-500 to-emerald-500"},{icon:I4,title:" ",description:"  ",gradient:"from-orange-500 to-red-500"},{icon:em,title:"  ",description:"   ",gradient:"from-indigo-500 to-purple-500"},{icon:Na,title:"",description:"  ",gradient:"from-gray-500 to-gray-700"}];return e.jsxs("div",{className:"p-8 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:""}),e.jsx("p",{className:"text-gray-600",children:"    "})]}),e.jsxs("div",{className:"flex gap-2 border-b border-gray-200",children:[e.jsx("button",{onClick:()=>a("overview"),className:`px-6 py-3 font-semibold transition-all ${r==="overview"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,children:""}),e.jsxs("button",{onClick:()=>a("appearance"),className:`px-6 py-3 font-semibold transition-all flex items-center gap-2 ${r==="appearance"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(I4,{className:"w-4 h-4"})," "]})]}),r==="overview"&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map((i,o)=>{const c=i.icon;return e.jsxs("button",{onClick:()=>i.title===" "&&a("appearance"),className:"group bg-white rounded-2xl p-6 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-1 border border-gray-100 text-left",children:[e.jsx("div",{className:`w-14 h-14 rounded-2xl bg-gradient-to-br ${i.gradient} flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300 shadow-lg`,children:e.jsx(c,{className:"w-7 h-7 text-white"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2 group-hover:text-purple-600 transition-colors",children:i.title}),e.jsx("p",{className:"text-sm text-gray-600",children:i.description})]},o)})})}),r==="appearance"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"  "}),e.jsx("p",{className:"text-gray-600 mb-6",children:" ,    "}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.entries(W9).map(([i,o])=>e.jsxs("button",{onClick:()=>t(i),className:`relative bg-white rounded-xl p-6 border-2 transition-all duration-300 hover:shadow-lg ${s===i?"border-blue-600 ring-4 ring-blue-100":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg shadow-sm",style:{background:o.primary}}),e.jsx("div",{className:"w-12 h-12 rounded-lg shadow-sm",style:{background:o.secondary}}),e.jsx("div",{className:"w-12 h-12 rounded-lg shadow-sm",style:{background:o.accent}})]})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:o.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:o.description}),s===i&&e.jsx("div",{className:"absolute top-4 right-4 w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx(ss,{className:"w-5 h-5 text-white"})})]},i))})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-600 via-pink-600 to-red-500 rounded-3xl p-8 text-white shadow-xl",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:" ?"}),e.jsx("p",{className:"text-purple-100 mb-4 max-w-xl",children:"          "}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{className:"bg-white text-purple-600 px-6 py-3 rounded-xl font-semibold hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5",children:""}),e.jsx("button",{className:"bg-white/20 backdrop-blur-sm text-white px-6 py-3 rounded-xl font-semibold hover:bg-white/30 transition-all duration-300",children:"  "})]})]}),e.jsx("div",{className:"hidden lg:block",children:e.jsx("div",{className:"w-32 h-32 bg-white/10 rounded-3xl flex items-center justify-center backdrop-blur-sm",children:e.jsx(Na,{className:"w-16 h-16 text-white/80"})})})]})})]})},nf=window.location.hostname==="localhost"?"http://localhost:8001":window.location.origin,lf=()=>{let s=localStorage.getItem("auth");if(!s){const a={username:"admin",password:"qwerty123"};localStorage.setItem("auth",JSON.stringify(a)),s=JSON.stringify(a)}const{username:t,password:r}=JSON.parse(s);return`Basic ${btoa(`${t}:${r}`)}`},SJ=()=>{const[s,t]=w.useState("record"),[r,a]=w.useState([]),[n,i]=w.useState(!1),[o,c]=w.useState(!1),[u,h]=w.useState(!1),[m,f]=w.useState(0),[p,j]=w.useState(""),[g,v]=w.useState(""),y=w.useRef(null),N=w.useRef(null),[S,k]=w.useState(null),[_,T]=w.useState(!1),[E,z]=w.useState(null),[M,C]=w.useState(!1),[A,Z]=w.useState(null),[I,V]=w.useState(0),[R,q]=w.useState("");w.useEffect(()=>{const H=window.SpeechRecognition||window.webkitSpeechRecognition;if(!H){Z("Web Speech API     .  Chrome  Edge.");return}const re=new H;return re.continuous=!0,re.interimResults=!0,re.lang="ru-RU",re.maxAlternatives=1,re.onresult=he=>{console.log(" Recognition result received:",he);let G="",ce="";for(let X=he.resultIndex;X<he.results.length;X++){const O=he.results[X][0].transcript;he.results[X].isFinal?(ce+=O+" ",console.log(" Final transcript:",O)):(G+=O,console.log(" Interim transcript:",O))}v(G),ce&&j(X=>X+ce)},re.onerror=he=>{console.error("Speech recognition error:",he.error),he.error==="no-speech"||he.error==="aborted"||Z(` : ${he.error}`)},re.onend=()=>{if(o)try{re.start()}catch(he){console.log("Recognition restart failed:",he)}h(!1)},N.current=re,()=>{re&&re.stop()}},[o]),w.useEffect(()=>(o?y.current=setInterval(()=>{f(H=>H+1)},1e3):y.current&&clearInterval(y.current),()=>{y.current&&clearInterval(y.current)}),[o]);const J=H=>{const re=Math.floor(H/3600),he=Math.floor(H%3600/60),G=H%60;return`${re.toString().padStart(2,"0")}:${he.toString().padStart(2,"0")}:${G.toString().padStart(2,"0")}`},se=async()=>{try{Z(null),j(""),v(""),f(0),await navigator.mediaDevices.getUserMedia({audio:!0}),N.current&&(N.current.start(),c(!0),h(!0))}catch(H){Z("     .  ."),console.error("Error starting recording:",H)}},Y=()=>{N.current&&o&&(N.current.stop(),c(!1),h(!1))},ee=()=>{j(""),v(""),f(0)},te=()=>{if(!p)return;const H=new Blob([p],{type:"text/plain;charset=utf-8"}),re=URL.createObjectURL(H),he=document.createElement("a");he.href=re,he.download=`transcript_${new Date().toISOString().split("T")[0]}.txt`,document.body.appendChild(he),he.click(),URL.revokeObjectURL(re),document.body.removeChild(he)},K=()=>{p&&navigator.clipboard.writeText(p).then(()=>{console.log("    ")}).catch(H=>{console.error("  :",H),Z("   ")})},$=(H,re)=>new Promise((he,G)=>{const ce=new XMLHttpRequest;ce.upload.addEventListener("progress",X=>{if(X.lengthComputable){const O=Math.round(X.loaded/X.total*100),L=(X.loaded/(1024*1024)).toFixed(1),B=(X.total/(1024*1024)).toFixed(1);V(O),q(` : ${L} MB  ${B} MB (${O}%)`)}}),ce.addEventListener("load",()=>{if(ce.status>=200&&ce.status<300)try{const X=JSON.parse(ce.responseText);V(100),q(" ,  ..."),he(X)}catch(X){G(new Error("   : "+X))}else try{const X=JSON.parse(ce.responseText);G(new Error(`HTTP ${ce.status}: ${X.detail||ce.statusText}`))}catch{G(new Error(`HTTP ${ce.status}: ${ce.statusText}`))}}),ce.addEventListener("error",()=>{G(new Error(" "))}),ce.addEventListener("abort",()=>{G(new Error(" "))}),ce.open("POST",H),ce.setRequestHeader("Authorization",lf()),ce.send(re)}),le=async H=>{if(H){if(H.size>10*1024*1024*1024){Z("  .  : 10GB");return}z(null),k(H),C(!0),Z(null),V(0),q(" ...");try{const re=new FormData;re.append("video",H);const he=await $(`${nf}/api/v1/transcription/upload-video`,re);z({task_id:he.task_id,status:"processing",progress:0}),V(100),q(" ..."),ie(he.task_id)}catch(re){const he=re?.message||"   ";Z(he),C(!1),q(""),console.error("Error uploading file:",re)}}},ie=async H=>{const re=setInterval(async()=>{try{const he=await fetch(`${nf}/api/v1/transcription/status/${H}`,{headers:{Authorization:lf()}});if(!he.ok)throw new Error("   ");const G=await he.json();z(G),G.status==="processing"?G.stage?q(G.stage):G.progress<20?q("   ..."):G.progress<40?q("  ..."):G.progress<70?q(" ..."):G.progress<90?q(" ..."):q(" ..."):G.status==="completed"?(q(G.stage||"!"),V(100)):G.status==="error"&&q(" "),(G.status==="completed"||G.status==="error")&&(clearInterval(re),C(!1),G.status==="error"&&(Z(G.error||"   "),q("")))}catch(he){console.error("Error polling status:",he),clearInterval(re),C(!1),q(""),Z("    ")}},2e3)},oe=H=>{H.preventDefault(),T(!0)},de=H=>{H.preventDefault(),T(!1)},U=H=>{H.preventDefault(),T(!1);const re=H.dataTransfer.files;if(re.length>0){const he=re[0];he.type.startsWith("video/")||he.type.startsWith("audio/")?le(he):Z(",     ")}},F=()=>{k(null)},Q=async(H,re)=>{try{const G=await(await fetch(`${nf}${H}`,{headers:{Authorization:lf()}})).blob(),ce=window.URL.createObjectURL(G),X=document.createElement("a");X.href=ce,X.download=re,document.body.appendChild(X),X.click(),window.URL.revokeObjectURL(ce),document.body.removeChild(X)}catch(he){console.error("Error downloading file:",he),Z("   ")}},W=async()=>{try{i(!0);const H=await fetch(`${nf}/api/v1/transcription/list`,{headers:{Authorization:lf()}});if(!H.ok)throw new Error("Failed to load history");const re=await H.json();a(re.transcriptions||[])}catch(H){console.error("Error loading history:",H)}finally{i(!1)}};return w.useEffect(()=>{s==="history"&&W()},[s]),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-normal text-gray-900 mb-2",children:" /"}),e.jsx("p",{className:"text-gray-600",children:"       "})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-lg mb-6",children:[e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsx("button",{onClick:()=>t("record"),className:`flex-1 px-6 py-4 text-center font-medium transition-all ${s==="record"?"text-purple-600 border-b-2 border-purple-600 bg-purple-50":"text-gray-600 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(sm,{className:"w-5 h-5"}),e.jsx("span",{children:"  "})]})}),e.jsx("button",{onClick:()=>t("upload"),className:`flex-1 px-6 py-4 text-center font-medium transition-all ${s==="upload"?"text-purple-600 border-b-2 border-purple-600 bg-purple-50":"text-gray-600 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(fn,{className:"w-5 h-5"}),e.jsx("span",{children:" "})]})}),e.jsx("button",{onClick:()=>t("history"),className:`flex-1 px-6 py-4 text-center font-medium transition-all ${s==="history"?"text-purple-600 border-b-2 border-purple-600 bg-purple-50":"text-gray-600 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Ue,{className:"w-5 h-5"}),e.jsx("span",{children:" "})]})})]}),e.jsxs("div",{className:"p-8",children:[s==="record"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 rounded-2xl p-8 border border-purple-200",children:e.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 text-4xl font-light text-gray-900",children:[e.jsx(Ue,{className:"w-8 h-8 text-purple-600"}),J(m)]}),u&&e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-green-100 rounded-full",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-green-800",children:"..."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[o?e.jsxs("button",{onClick:Y,className:"flex items-center gap-3 px-8 py-4 bg-red-600 text-white rounded-xl hover:bg-red-700 transition-all shadow-lg hover:shadow-xl animate-pulse",children:[e.jsx(wP,{className:"w-6 h-6"}),e.jsx("span",{className:"text-lg font-medium",children:""})]}):e.jsxs("button",{onClick:se,className:"flex items-center gap-3 px-8 py-4 bg-purple-600 text-white rounded-xl hover:bg-purple-700 transition-all shadow-lg hover:shadow-xl",children:[e.jsx(bP,{className:"w-6 h-6"}),e.jsx("span",{className:"text-lg font-medium",children:" "})]}),p&&!o&&e.jsxs("button",{onClick:ee,className:"flex items-center gap-2 px-6 py-4 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-all",children:[e.jsx(Xe,{className:"w-5 h-5"}),e.jsx("span",{children:""})]})]}),(p||g)&&e.jsx("div",{className:"w-full max-w-4xl",children:e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:" "}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:K,className:"flex items-center gap-2 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all",title:"   ",children:[e.jsx(Ks,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:""})]}),e.jsxs("button",{onClick:te,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-all",title:"  TXT",children:[e.jsx(wt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:" TXT"})]})]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto bg-gray-50 rounded-lg p-4",children:e.jsxs("p",{className:"text-gray-900 whitespace-pre-wrap leading-relaxed",children:[p,g&&e.jsx("span",{className:"text-gray-500 italic",children:g})]})}),e.jsxs("div",{className:"mt-4 flex items-center justify-between text-sm text-gray-600",children:[e.jsxs("span",{children:[": ",p.length]}),e.jsxs("span",{children:[": ~",p.split(/\s+/).filter(Boolean).length]})]})]})})]})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(qe,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-900",children:[e.jsx("p",{className:"font-medium mb-1",children:"  "}),e.jsxs("ul",{className:"list-disc list-inside text-blue-700 space-y-1",children:[e.jsx("li",{children:"      (   )"}),e.jsx("li",{children:"   Chrome  Edge "}),e.jsx("li",{children:"    "}),e.jsx("li",{children:"     TXT "})]})]})]})})]}),s==="upload"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{onDragOver:oe,onDragLeave:de,onDrop:U,className:`border-2 border-dashed rounded-2xl p-12 text-center transition-all ${_?"border-purple-600 bg-purple-50":"border-gray-300 hover:border-gray-400 bg-gray-50"}`,children:[e.jsx("input",{type:"file",id:"file-upload",className:"hidden",accept:"video/*,audio/*,.m4a,.mp4,.mp3,.wav,.webm,.flac,.ogg",onChange:H=>{const re=H.target.files?.[0];re&&le(re)},disabled:M}),e.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(Sf,{className:"w-10 h-10 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-medium text-gray-900 mb-1",children:"      "}),e.jsx("p",{className:"text-sm text-gray-600",children:": MP4, M4A, MP3, WAV, WebM, FLAC, OGG ( 10GB)"})]})]})]}),S&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Sf,{className:"w-6 h-6 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-900",children:S.name}),e.jsxs("p",{className:"text-sm text-green-700",children:[(S.size/(1024*1024)).toFixed(2)," MB"]})]})]}),e.jsx("button",{onClick:F,disabled:M,className:"p-2 hover:bg-green-100 rounded-lg transition-all disabled:opacity-50",children:e.jsx(Xe,{className:"w-5 h-5 text-green-700"})})]})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(qe,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-900",children:[e.jsx("p",{className:"font-medium mb-1",children:" "}),e.jsxs("ul",{className:"list-disc list-inside text-blue-700 space-y-1",children:[e.jsx("li",{children:" : MP4, AVI, MOV, MP3, WAV  ."}),e.jsx("li",{children:"  : 10GB"}),e.jsx("li",{children:"     "})]})]})]})})]}),A&&e.jsx("div",{className:"mt-6 bg-red-50 border border-red-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(qe,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-900",children:""}),e.jsx("p",{className:"text-sm text-red-700",children:A})]})]})}),M&&R&&!E&&e.jsx("div",{className:"mt-6 bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-xl p-6 shadow-lg",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Dt,{className:"w-5 h-5 text-purple-600 animate-spin"}),e.jsx("span",{className:"text-lg font-medium text-gray-900",children:R})]}),I>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:" "}),e.jsxs("span",{className:"font-medium text-purple-600",children:[I,"%"]})]}),e.jsx("div",{className:"h-3 bg-white rounded-full overflow-hidden shadow-inner",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-purple-600 transition-all duration-300 ease-out",style:{width:`${I}%`}})})]})]})}),E&&e.jsx("div",{className:"mt-6 bg-white border border-gray-200 rounded-xl p-6 shadow-lg",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[E.status==="processing"&&e.jsxs(e.Fragment,{children:[e.jsx(Dt,{className:"w-6 h-6 text-purple-600 animate-spin"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-lg font-medium text-gray-900",children:"..."}),R&&I===100&&e.jsx("span",{className:"text-sm text-gray-600",children:R})]})]}),E.status==="completed"&&e.jsxs(e.Fragment,{children:[e.jsx(zr,{className:"w-6 h-6 text-green-600"}),e.jsx("span",{className:"text-lg font-medium text-green-900",children:"!"})]}),E.status==="error"&&e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"w-6 h-6 text-red-600"}),e.jsx("span",{className:"text-lg font-medium text-red-900",children:""})]})]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[E.progress,"%"]})]}),e.jsx("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-500 ${E.status==="completed"?"bg-gradient-to-r from-green-500 to-green-600":E.status==="error"?"bg-gradient-to-r from-red-500 to-red-600":"bg-gradient-to-r from-purple-500 to-purple-600"}`,style:{width:`${E.progress}%`}})}),E.status==="completed"&&E.result&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4",children:[e.jsxs("button",{onClick:()=>Q(E.result.docx_url,"transcription.docx"),className:"flex items-center justify-center gap-2 px-6 py-3 bg-purple-600 text-white rounded-xl hover:bg-purple-700 transition-all shadow-md hover:shadow-lg",children:[e.jsx(wt,{className:"w-5 h-5"}),e.jsx("span",{children:" DOCX"})]}),e.jsxs("button",{onClick:()=>Q(E.result.audio_url,"audio.mp3"),className:"flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-all shadow-md hover:shadow-lg",children:[e.jsx(R4,{className:"w-5 h-5"}),e.jsx("span",{children:" "})]})]}),E.status==="completed"&&E.result&&e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:" :"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 max-h-64 overflow-y-auto",children:e.jsxs("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:[E.result.transcript.slice(0,500),E.result.transcript.length>500&&"..."]})})]})]})}),s==="history"&&e.jsx("div",{className:"space-y-6",children:n?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Dt,{className:"w-8 h-8 animate-spin text-purple-600"})}):r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ue,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600",children:"  "})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(H=>e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Sf,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:""})]}),e.jsx(zr,{className:"w-5 h-5 text-green-600"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:new Date(H.created_at).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}),e.jsxs("div",{className:"flex gap-4 text-sm text-gray-600 mb-4",children:[e.jsxs("span",{children:[": ",(H.docx_size/1024).toFixed(1)," KB"]}),e.jsxs("span",{children:[": ",(H.audio_size/1024/1024).toFixed(1)," MB"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>Q(H.docx_url,`transcript_${H.task_id.slice(0,8)}.docx`),className:"flex items-center justify-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:[e.jsx(wt,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsxs("button",{onClick:()=>Q(H.audio_url,`audio_${H.task_id.slice(0,8)}.mp3`),className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[e.jsx(R4,{className:"w-4 h-4"}),e.jsx("span",{children:""})]})]})]},H.task_id))})})]})]})]})};var CJ=Object.defineProperty,TJ=Object.defineProperties,EJ=Object.getOwnPropertyDescriptors,a3=Object.getOwnPropertySymbols,AJ=Object.prototype.hasOwnProperty,DJ=Object.prototype.propertyIsEnumerable,qw=(s,t,r)=>t in s?CJ(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,yt=(s,t)=>{for(var r in t||(t={}))AJ.call(t,r)&&qw(s,r,t[r]);if(a3)for(var r of a3(t))DJ.call(t,r)&&qw(s,r,t[r]);return s},kd=(s,t)=>TJ(s,EJ(t)),Me=(s,t,r)=>qw(s,typeof t!="symbol"?t+"":t,r),RJ=(s,t,r)=>new Promise((a,n)=>{var i=u=>{try{c(r.next(u))}catch(h){n(h)}},o=u=>{try{c(r.throw(u))}catch(h){n(h)}},c=u=>u.done?a(u.value):Promise.resolve(u.value).then(i,o);c((r=r.apply(s,t)).next())});class cp{constructor(t){Me(this,"rootKey"),this.rootKey=t}}const MJ=Object.seal({});class Oe extends cp{constructor(t){super(t),Me(this,"root"),this.root=new Array}prepForXml(t){var r;t.stack.push(this);const a=this.root.map(n=>n instanceof cp?n.prepForXml(t):n).filter(n=>n!==void 0);return t.stack.pop(),{[this.rootKey]:a.length?a.length===1&&((r=a[0])!=null&&r._attr)?a[0]:a:MJ}}addChildElement(t){return this.root.push(t),this}}class Pp extends Oe{prepForXml(t){const r=super.prepForXml(t);if(r&&(typeof r[this.rootKey]!="object"||Object.keys(r[this.rootKey]).length))return r}}class Qe extends cp{constructor(t){super("_attr"),Me(this,"xmlKeys"),this.root=t}prepForXml(t){const r={};return Object.entries(this.root).forEach(([a,n])=>{if(n!==void 0){const i=this.xmlKeys&&this.xmlKeys[a]||a;r[i]=n}}),{_attr:r}}}class Bp extends cp{constructor(t){super("_attr"),this.root=t}prepForXml(t){return{_attr:Object.values(this.root).filter(({value:a})=>a!==void 0).reduce((a,{key:n,value:i})=>kd(yt({},a),{[n]:i}),{})}}}class ys extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{val:"w:val",color:"w:color",fill:"w:fill",space:"w:space",sz:"w:sz",type:"w:type",rsidR:"w:rsidR",rsidRPr:"w:rsidRPr",rsidSect:"w:rsidSect",w:"w:w",h:"w:h",top:"w:top",right:"w:right",bottom:"w:bottom",left:"w:left",header:"w:header",footer:"w:footer",gutter:"w:gutter",linePitch:"w:linePitch",pos:"w:pos"})}}var xn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function l8(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Qy={},of={exports:{}},n3;function D1(){if(n3)return of.exports;n3=1;var s=typeof Reflect=="object"?Reflect:null,t=s&&typeof s.apply=="function"?s.apply:function(T,E,z){return Function.prototype.apply.call(T,E,z)},r;s&&typeof s.ownKeys=="function"?r=s.ownKeys:Object.getOwnPropertySymbols?r=function(T){return Object.getOwnPropertyNames(T).concat(Object.getOwnPropertySymbols(T))}:r=function(T){return Object.getOwnPropertyNames(T)};function a(_){console&&console.warn&&console.warn(_)}var n=Number.isNaN||function(T){return T!==T};function i(){i.init.call(this)}of.exports=i,of.exports.once=N,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function c(_){if(typeof _!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof _)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(_){if(typeof _!="number"||_<0||n(_))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+_+".");o=_}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(T){if(typeof T!="number"||T<0||n(T))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+T+".");return this._maxListeners=T,this};function u(_){return _._maxListeners===void 0?i.defaultMaxListeners:_._maxListeners}i.prototype.getMaxListeners=function(){return u(this)},i.prototype.emit=function(T){for(var E=[],z=1;z<arguments.length;z++)E.push(arguments[z]);var M=T==="error",C=this._events;if(C!==void 0)M=M&&C.error===void 0;else if(!M)return!1;if(M){var A;if(E.length>0&&(A=E[0]),A instanceof Error)throw A;var Z=new Error("Unhandled error."+(A?" ("+A.message+")":""));throw Z.context=A,Z}var I=C[T];if(I===void 0)return!1;if(typeof I=="function")t(I,this,E);else for(var V=I.length,R=g(I,V),z=0;z<V;++z)t(R[z],this,E);return!0};function h(_,T,E,z){var M,C,A;if(c(E),C=_._events,C===void 0?(C=_._events=Object.create(null),_._eventsCount=0):(C.newListener!==void 0&&(_.emit("newListener",T,E.listener?E.listener:E),C=_._events),A=C[T]),A===void 0)A=C[T]=E,++_._eventsCount;else if(typeof A=="function"?A=C[T]=z?[E,A]:[A,E]:z?A.unshift(E):A.push(E),M=u(_),M>0&&A.length>M&&!A.warned){A.warned=!0;var Z=new Error("Possible EventEmitter memory leak detected. "+A.length+" "+String(T)+" listeners added. Use emitter.setMaxListeners() to increase limit");Z.name="MaxListenersExceededWarning",Z.emitter=_,Z.type=T,Z.count=A.length,a(Z)}return _}i.prototype.addListener=function(T,E){return h(this,T,E,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(T,E){return h(this,T,E,!0)};function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(_,T,E){var z={fired:!1,wrapFn:void 0,target:_,type:T,listener:E},M=m.bind(z);return M.listener=E,z.wrapFn=M,M}i.prototype.once=function(T,E){return c(E),this.on(T,f(this,T,E)),this},i.prototype.prependOnceListener=function(T,E){return c(E),this.prependListener(T,f(this,T,E)),this},i.prototype.removeListener=function(T,E){var z,M,C,A,Z;if(c(E),M=this._events,M===void 0)return this;if(z=M[T],z===void 0)return this;if(z===E||z.listener===E)--this._eventsCount===0?this._events=Object.create(null):(delete M[T],M.removeListener&&this.emit("removeListener",T,z.listener||E));else if(typeof z!="function"){for(C=-1,A=z.length-1;A>=0;A--)if(z[A]===E||z[A].listener===E){Z=z[A].listener,C=A;break}if(C<0)return this;C===0?z.shift():v(z,C),z.length===1&&(M[T]=z[0]),M.removeListener!==void 0&&this.emit("removeListener",T,Z||E)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(T){var E,z,M;if(z=this._events,z===void 0)return this;if(z.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):z[T]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete z[T]),this;if(arguments.length===0){var C=Object.keys(z),A;for(M=0;M<C.length;++M)A=C[M],A!=="removeListener"&&this.removeAllListeners(A);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(E=z[T],typeof E=="function")this.removeListener(T,E);else if(E!==void 0)for(M=E.length-1;M>=0;M--)this.removeListener(T,E[M]);return this};function p(_,T,E){var z=_._events;if(z===void 0)return[];var M=z[T];return M===void 0?[]:typeof M=="function"?E?[M.listener||M]:[M]:E?y(M):g(M,M.length)}i.prototype.listeners=function(T){return p(this,T,!0)},i.prototype.rawListeners=function(T){return p(this,T,!1)},i.listenerCount=function(_,T){return typeof _.listenerCount=="function"?_.listenerCount(T):j.call(_,T)},i.prototype.listenerCount=j;function j(_){var T=this._events;if(T!==void 0){var E=T[_];if(typeof E=="function")return 1;if(E!==void 0)return E.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function g(_,T){for(var E=new Array(T),z=0;z<T;++z)E[z]=_[z];return E}function v(_,T){for(;T+1<_.length;T++)_[T]=_[T+1];_.pop()}function y(_){for(var T=new Array(_.length),E=0;E<T.length;++E)T[E]=_[E].listener||_[E];return T}function N(_,T){return new Promise(function(E,z){function M(A){_.removeListener(T,C),z(A)}function C(){typeof _.removeListener=="function"&&_.removeListener("error",M),E([].slice.call(arguments))}k(_,T,C,{once:!0}),T!=="error"&&S(_,M,{once:!0})})}function S(_,T,E){typeof _.on=="function"&&k(_,"error",T,E)}function k(_,T,E,z){if(typeof _.on=="function")z.once?_.once(T,E):_.on(T,E);else if(typeof _.addEventListener=="function")_.addEventListener(T,function M(C){z.once&&_.removeEventListener(T,M),E(C)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof _)}return of.exports}var cf={exports:{}},i3;function Ml(){return i3||(i3=1,typeof Object.create=="function"?cf.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:cf.exports=function(t,r){if(r){t.super_=r;var a=function(){};a.prototype=r.prototype,t.prototype=new a,t.prototype.constructor=t}}),cf.exports}function OJ(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var o8={exports:{}},vs=o8.exports={},cn,dn;function Ww(){throw new Error("setTimeout has not been defined")}function Yw(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cn=setTimeout:cn=Ww}catch{cn=Ww}try{typeof clearTimeout=="function"?dn=clearTimeout:dn=Yw}catch{dn=Yw}})();function c8(s){if(cn===setTimeout)return setTimeout(s,0);if((cn===Ww||!cn)&&setTimeout)return cn=setTimeout,setTimeout(s,0);try{return cn(s,0)}catch{try{return cn.call(null,s,0)}catch{return cn.call(this,s,0)}}}function LJ(s){if(dn===clearTimeout)return clearTimeout(s);if((dn===Yw||!dn)&&clearTimeout)return dn=clearTimeout,clearTimeout(s);try{return dn(s)}catch{try{return dn.call(null,s)}catch{return dn.call(this,s)}}}var mi=[],dd=!1,Ao,Bf=-1;function PJ(){!dd||!Ao||(dd=!1,Ao.length?mi=Ao.concat(mi):Bf=-1,mi.length&&d8())}function d8(){if(!dd){var s=c8(PJ);dd=!0;for(var t=mi.length;t;){for(Ao=mi,mi=[];++Bf<t;)Ao&&Ao[Bf].run();Bf=-1,t=mi.length}Ao=null,dd=!1,LJ(s)}}vs.nextTick=function(s){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];mi.push(new u8(s,t)),mi.length===1&&!dd&&c8(d8)};function u8(s,t){this.fun=s,this.array=t}u8.prototype.run=function(){this.fun.apply(null,this.array)};vs.title="browser";vs.browser=!0;vs.env={};vs.argv=[];vs.version="";vs.versions={};function Si(){}vs.on=Si;vs.addListener=Si;vs.once=Si;vs.off=Si;vs.removeListener=Si;vs.removeAllListeners=Si;vs.emit=Si;vs.prependListener=Si;vs.prependOnceListener=Si;vs.listeners=function(s){return[]};vs.binding=function(s){throw new Error("process.binding is not supported")};vs.cwd=function(){return"/"};vs.chdir=function(s){throw new Error("process.chdir is not supported")};vs.umask=function(){return 0};var BJ=o8.exports;const ot=OJ(BJ);var Jy,l3;function h8(){return l3||(l3=1,Jy=D1().EventEmitter),Jy}var ev={},Nh={},o3;function FJ(){if(o3)return Nh;o3=1,Nh.byteLength=c,Nh.toByteArray=h,Nh.fromByteArray=p;for(var s=[],t=[],r=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,i=a.length;n<i;++n)s[n]=a[n],t[a.charCodeAt(n)]=n;t[45]=62,t[95]=63;function o(j){var g=j.length;if(g%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=j.indexOf("=");v===-1&&(v=g);var y=v===g?0:4-v%4;return[v,y]}function c(j){var g=o(j),v=g[0],y=g[1];return(v+y)*3/4-y}function u(j,g,v){return(g+v)*3/4-v}function h(j){var g,v=o(j),y=v[0],N=v[1],S=new r(u(j,y,N)),k=0,_=N>0?y-4:y,T;for(T=0;T<_;T+=4)g=t[j.charCodeAt(T)]<<18|t[j.charCodeAt(T+1)]<<12|t[j.charCodeAt(T+2)]<<6|t[j.charCodeAt(T+3)],S[k++]=g>>16&255,S[k++]=g>>8&255,S[k++]=g&255;return N===2&&(g=t[j.charCodeAt(T)]<<2|t[j.charCodeAt(T+1)]>>4,S[k++]=g&255),N===1&&(g=t[j.charCodeAt(T)]<<10|t[j.charCodeAt(T+1)]<<4|t[j.charCodeAt(T+2)]>>2,S[k++]=g>>8&255,S[k++]=g&255),S}function m(j){return s[j>>18&63]+s[j>>12&63]+s[j>>6&63]+s[j&63]}function f(j,g,v){for(var y,N=[],S=g;S<v;S+=3)y=(j[S]<<16&16711680)+(j[S+1]<<8&65280)+(j[S+2]&255),N.push(m(y));return N.join("")}function p(j){for(var g,v=j.length,y=v%3,N=[],S=16383,k=0,_=v-y;k<_;k+=S)N.push(f(j,k,k+S>_?_:k+S));return y===1?(g=j[v-1],N.push(s[g>>2]+s[g<<4&63]+"==")):y===2&&(g=(j[v-2]<<8)+j[v-1],N.push(s[g>>10]+s[g>>4&63]+s[g<<2&63]+"=")),N.join("")}return Nh}var df={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var c3;function zJ(){return c3||(c3=1,df.read=function(s,t,r,a,n){var i,o,c=n*8-a-1,u=(1<<c)-1,h=u>>1,m=-7,f=r?n-1:0,p=r?-1:1,j=s[t+f];for(f+=p,i=j&(1<<-m)-1,j>>=-m,m+=c;m>0;i=i*256+s[t+f],f+=p,m-=8);for(o=i&(1<<-m)-1,i>>=-m,m+=a;m>0;o=o*256+s[t+f],f+=p,m-=8);if(i===0)i=1-h;else{if(i===u)return o?NaN:(j?-1:1)*(1/0);o=o+Math.pow(2,a),i=i-h}return(j?-1:1)*o*Math.pow(2,i-a)},df.write=function(s,t,r,a,n,i){var o,c,u,h=i*8-n-1,m=(1<<h)-1,f=m>>1,p=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,j=a?0:i-1,g=a?1:-1,v=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(c=isNaN(t)?1:0,o=m):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+f>=1?t+=p/u:t+=p*Math.pow(2,1-f),t*u>=2&&(o++,u/=2),o+f>=m?(c=0,o=m):o+f>=1?(c=(t*u-1)*Math.pow(2,n),o=o+f):(c=t*Math.pow(2,f-1)*Math.pow(2,n),o=0));n>=8;s[r+j]=c&255,j+=g,c/=256,n-=8);for(o=o<<n|c,h+=n;h>0;s[r+j]=o&255,j+=g,o/=256,h-=8);s[r+j-g]|=v*128}),df}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var d3;function Fp(){return d3||(d3=1,(function(s){var t=FJ(),r=zJ(),a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;s.Buffer=c,s.SlowBuffer=S,s.INSPECT_MAX_BYTES=50;var n=2147483647;s.kMaxLength=n,c.TYPED_ARRAY_SUPPORT=i(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{var X=new Uint8Array(1),O={foo:function(){return 42}};return Object.setPrototypeOf(O,Uint8Array.prototype),Object.setPrototypeOf(X,O),X.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function o(X){if(X>n)throw new RangeError('The value "'+X+'" is invalid for option "size"');var O=new Uint8Array(X);return Object.setPrototypeOf(O,c.prototype),O}function c(X,O,L){if(typeof X=="number"){if(typeof O=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(X)}return u(X,O,L)}c.poolSize=8192;function u(X,O,L){if(typeof X=="string")return p(X,O);if(ArrayBuffer.isView(X))return g(X);if(X==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof X);if(he(X,ArrayBuffer)||X&&he(X.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(he(X,SharedArrayBuffer)||X&&he(X.buffer,SharedArrayBuffer)))return v(X,O,L);if(typeof X=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var B=X.valueOf&&X.valueOf();if(B!=null&&B!==X)return c.from(B,O,L);var ne=y(X);if(ne)return ne;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof X[Symbol.toPrimitive]=="function")return c.from(X[Symbol.toPrimitive]("string"),O,L);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof X)}c.from=function(X,O,L){return u(X,O,L)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function h(X){if(typeof X!="number")throw new TypeError('"size" argument must be of type number');if(X<0)throw new RangeError('The value "'+X+'" is invalid for option "size"')}function m(X,O,L){return h(X),X<=0?o(X):O!==void 0?typeof L=="string"?o(X).fill(O,L):o(X).fill(O):o(X)}c.alloc=function(X,O,L){return m(X,O,L)};function f(X){return h(X),o(X<0?0:N(X)|0)}c.allocUnsafe=function(X){return f(X)},c.allocUnsafeSlow=function(X){return f(X)};function p(X,O){if((typeof O!="string"||O==="")&&(O="utf8"),!c.isEncoding(O))throw new TypeError("Unknown encoding: "+O);var L=k(X,O)|0,B=o(L),ne=B.write(X,O);return ne!==L&&(B=B.slice(0,ne)),B}function j(X){for(var O=X.length<0?0:N(X.length)|0,L=o(O),B=0;B<O;B+=1)L[B]=X[B]&255;return L}function g(X){if(he(X,Uint8Array)){var O=new Uint8Array(X);return v(O.buffer,O.byteOffset,O.byteLength)}return j(X)}function v(X,O,L){if(O<0||X.byteLength<O)throw new RangeError('"offset" is outside of buffer bounds');if(X.byteLength<O+(L||0))throw new RangeError('"length" is outside of buffer bounds');var B;return O===void 0&&L===void 0?B=new Uint8Array(X):L===void 0?B=new Uint8Array(X,O):B=new Uint8Array(X,O,L),Object.setPrototypeOf(B,c.prototype),B}function y(X){if(c.isBuffer(X)){var O=N(X.length)|0,L=o(O);return L.length===0||X.copy(L,0,0,O),L}if(X.length!==void 0)return typeof X.length!="number"||G(X.length)?o(0):j(X);if(X.type==="Buffer"&&Array.isArray(X.data))return j(X.data)}function N(X){if(X>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return X|0}function S(X){return+X!=X&&(X=0),c.alloc(+X)}c.isBuffer=function(O){return O!=null&&O._isBuffer===!0&&O!==c.prototype},c.compare=function(O,L){if(he(O,Uint8Array)&&(O=c.from(O,O.offset,O.byteLength)),he(L,Uint8Array)&&(L=c.from(L,L.offset,L.byteLength)),!c.isBuffer(O)||!c.isBuffer(L))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(O===L)return 0;for(var B=O.length,ne=L.length,me=0,xe=Math.min(B,ne);me<xe;++me)if(O[me]!==L[me]){B=O[me],ne=L[me];break}return B<ne?-1:ne<B?1:0},c.isEncoding=function(O){switch(String(O).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(O,L){if(!Array.isArray(O))throw new TypeError('"list" argument must be an Array of Buffers');if(O.length===0)return c.alloc(0);var B;if(L===void 0)for(L=0,B=0;B<O.length;++B)L+=O[B].length;var ne=c.allocUnsafe(L),me=0;for(B=0;B<O.length;++B){var xe=O[B];if(he(xe,Uint8Array))me+xe.length>ne.length?c.from(xe).copy(ne,me):Uint8Array.prototype.set.call(ne,xe,me);else if(c.isBuffer(xe))xe.copy(ne,me);else throw new TypeError('"list" argument must be an Array of Buffers');me+=xe.length}return ne};function k(X,O){if(c.isBuffer(X))return X.length;if(ArrayBuffer.isView(X)||he(X,ArrayBuffer))return X.byteLength;if(typeof X!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof X);var L=X.length,B=arguments.length>2&&arguments[2]===!0;if(!B&&L===0)return 0;for(var ne=!1;;)switch(O){case"ascii":case"latin1":case"binary":return L;case"utf8":case"utf-8":return F(X).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L*2;case"hex":return L>>>1;case"base64":return H(X).length;default:if(ne)return B?-1:F(X).length;O=(""+O).toLowerCase(),ne=!0}}c.byteLength=k;function _(X,O,L){var B=!1;if((O===void 0||O<0)&&(O=0),O>this.length||((L===void 0||L>this.length)&&(L=this.length),L<=0)||(L>>>=0,O>>>=0,L<=O))return"";for(X||(X="utf8");;)switch(X){case"hex":return ee(this,O,L);case"utf8":case"utf-8":return R(this,O,L);case"ascii":return se(this,O,L);case"latin1":case"binary":return Y(this,O,L);case"base64":return V(this,O,L);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te(this,O,L);default:if(B)throw new TypeError("Unknown encoding: "+X);X=(X+"").toLowerCase(),B=!0}}c.prototype._isBuffer=!0;function T(X,O,L){var B=X[O];X[O]=X[L],X[L]=B}c.prototype.swap16=function(){var O=this.length;if(O%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var L=0;L<O;L+=2)T(this,L,L+1);return this},c.prototype.swap32=function(){var O=this.length;if(O%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var L=0;L<O;L+=4)T(this,L,L+3),T(this,L+1,L+2);return this},c.prototype.swap64=function(){var O=this.length;if(O%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var L=0;L<O;L+=8)T(this,L,L+7),T(this,L+1,L+6),T(this,L+2,L+5),T(this,L+3,L+4);return this},c.prototype.toString=function(){var O=this.length;return O===0?"":arguments.length===0?R(this,0,O):_.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(O){if(!c.isBuffer(O))throw new TypeError("Argument must be a Buffer");return this===O?!0:c.compare(this,O)===0},c.prototype.inspect=function(){var O="",L=s.INSPECT_MAX_BYTES;return O=this.toString("hex",0,L).replace(/(.{2})/g,"$1 ").trim(),this.length>L&&(O+=" ... "),"<Buffer "+O+">"},a&&(c.prototype[a]=c.prototype.inspect),c.prototype.compare=function(O,L,B,ne,me){if(he(O,Uint8Array)&&(O=c.from(O,O.offset,O.byteLength)),!c.isBuffer(O))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof O);if(L===void 0&&(L=0),B===void 0&&(B=O?O.length:0),ne===void 0&&(ne=0),me===void 0&&(me=this.length),L<0||B>O.length||ne<0||me>this.length)throw new RangeError("out of range index");if(ne>=me&&L>=B)return 0;if(ne>=me)return-1;if(L>=B)return 1;if(L>>>=0,B>>>=0,ne>>>=0,me>>>=0,this===O)return 0;for(var xe=me-ne,_e=B-L,Ce=Math.min(xe,_e),Te=this.slice(ne,me),Be=O.slice(L,B),ze=0;ze<Ce;++ze)if(Te[ze]!==Be[ze]){xe=Te[ze],_e=Be[ze];break}return xe<_e?-1:_e<xe?1:0};function E(X,O,L,B,ne){if(X.length===0)return-1;if(typeof L=="string"?(B=L,L=0):L>2147483647?L=2147483647:L<-2147483648&&(L=-2147483648),L=+L,G(L)&&(L=ne?0:X.length-1),L<0&&(L=X.length+L),L>=X.length){if(ne)return-1;L=X.length-1}else if(L<0)if(ne)L=0;else return-1;if(typeof O=="string"&&(O=c.from(O,B)),c.isBuffer(O))return O.length===0?-1:z(X,O,L,B,ne);if(typeof O=="number")return O=O&255,typeof Uint8Array.prototype.indexOf=="function"?ne?Uint8Array.prototype.indexOf.call(X,O,L):Uint8Array.prototype.lastIndexOf.call(X,O,L):z(X,[O],L,B,ne);throw new TypeError("val must be string, number or Buffer")}function z(X,O,L,B,ne){var me=1,xe=X.length,_e=O.length;if(B!==void 0&&(B=String(B).toLowerCase(),B==="ucs2"||B==="ucs-2"||B==="utf16le"||B==="utf-16le")){if(X.length<2||O.length<2)return-1;me=2,xe/=2,_e/=2,L/=2}function Ce(Ds,Ur){return me===1?Ds[Ur]:Ds.readUInt16BE(Ur*me)}var Te;if(ne){var Be=-1;for(Te=L;Te<xe;Te++)if(Ce(X,Te)===Ce(O,Be===-1?0:Te-Be)){if(Be===-1&&(Be=Te),Te-Be+1===_e)return Be*me}else Be!==-1&&(Te-=Te-Be),Be=-1}else for(L+_e>xe&&(L=xe-_e),Te=L;Te>=0;Te--){for(var ze=!0,We=0;We<_e;We++)if(Ce(X,Te+We)!==Ce(O,We)){ze=!1;break}if(ze)return Te}return-1}c.prototype.includes=function(O,L,B){return this.indexOf(O,L,B)!==-1},c.prototype.indexOf=function(O,L,B){return E(this,O,L,B,!0)},c.prototype.lastIndexOf=function(O,L,B){return E(this,O,L,B,!1)};function M(X,O,L,B){L=Number(L)||0;var ne=X.length-L;B?(B=Number(B),B>ne&&(B=ne)):B=ne;var me=O.length;B>me/2&&(B=me/2);for(var xe=0;xe<B;++xe){var _e=parseInt(O.substr(xe*2,2),16);if(G(_e))return xe;X[L+xe]=_e}return xe}function C(X,O,L,B){return re(F(O,X.length-L),X,L,B)}function A(X,O,L,B){return re(Q(O),X,L,B)}function Z(X,O,L,B){return re(H(O),X,L,B)}function I(X,O,L,B){return re(W(O,X.length-L),X,L,B)}c.prototype.write=function(O,L,B,ne){if(L===void 0)ne="utf8",B=this.length,L=0;else if(B===void 0&&typeof L=="string")ne=L,B=this.length,L=0;else if(isFinite(L))L=L>>>0,isFinite(B)?(B=B>>>0,ne===void 0&&(ne="utf8")):(ne=B,B=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var me=this.length-L;if((B===void 0||B>me)&&(B=me),O.length>0&&(B<0||L<0)||L>this.length)throw new RangeError("Attempt to write outside buffer bounds");ne||(ne="utf8");for(var xe=!1;;)switch(ne){case"hex":return M(this,O,L,B);case"utf8":case"utf-8":return C(this,O,L,B);case"ascii":case"latin1":case"binary":return A(this,O,L,B);case"base64":return Z(this,O,L,B);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,O,L,B);default:if(xe)throw new TypeError("Unknown encoding: "+ne);ne=(""+ne).toLowerCase(),xe=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function V(X,O,L){return O===0&&L===X.length?t.fromByteArray(X):t.fromByteArray(X.slice(O,L))}function R(X,O,L){L=Math.min(X.length,L);for(var B=[],ne=O;ne<L;){var me=X[ne],xe=null,_e=me>239?4:me>223?3:me>191?2:1;if(ne+_e<=L){var Ce,Te,Be,ze;switch(_e){case 1:me<128&&(xe=me);break;case 2:Ce=X[ne+1],(Ce&192)===128&&(ze=(me&31)<<6|Ce&63,ze>127&&(xe=ze));break;case 3:Ce=X[ne+1],Te=X[ne+2],(Ce&192)===128&&(Te&192)===128&&(ze=(me&15)<<12|(Ce&63)<<6|Te&63,ze>2047&&(ze<55296||ze>57343)&&(xe=ze));break;case 4:Ce=X[ne+1],Te=X[ne+2],Be=X[ne+3],(Ce&192)===128&&(Te&192)===128&&(Be&192)===128&&(ze=(me&15)<<18|(Ce&63)<<12|(Te&63)<<6|Be&63,ze>65535&&ze<1114112&&(xe=ze))}}xe===null?(xe=65533,_e=1):xe>65535&&(xe-=65536,B.push(xe>>>10&1023|55296),xe=56320|xe&1023),B.push(xe),ne+=_e}return J(B)}var q=4096;function J(X){var O=X.length;if(O<=q)return String.fromCharCode.apply(String,X);for(var L="",B=0;B<O;)L+=String.fromCharCode.apply(String,X.slice(B,B+=q));return L}function se(X,O,L){var B="";L=Math.min(X.length,L);for(var ne=O;ne<L;++ne)B+=String.fromCharCode(X[ne]&127);return B}function Y(X,O,L){var B="";L=Math.min(X.length,L);for(var ne=O;ne<L;++ne)B+=String.fromCharCode(X[ne]);return B}function ee(X,O,L){var B=X.length;(!O||O<0)&&(O=0),(!L||L<0||L>B)&&(L=B);for(var ne="",me=O;me<L;++me)ne+=ce[X[me]];return ne}function te(X,O,L){for(var B=X.slice(O,L),ne="",me=0;me<B.length-1;me+=2)ne+=String.fromCharCode(B[me]+B[me+1]*256);return ne}c.prototype.slice=function(O,L){var B=this.length;O=~~O,L=L===void 0?B:~~L,O<0?(O+=B,O<0&&(O=0)):O>B&&(O=B),L<0?(L+=B,L<0&&(L=0)):L>B&&(L=B),L<O&&(L=O);var ne=this.subarray(O,L);return Object.setPrototypeOf(ne,c.prototype),ne};function K(X,O,L){if(X%1!==0||X<0)throw new RangeError("offset is not uint");if(X+O>L)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(O,L,B){O=O>>>0,L=L>>>0,B||K(O,L,this.length);for(var ne=this[O],me=1,xe=0;++xe<L&&(me*=256);)ne+=this[O+xe]*me;return ne},c.prototype.readUintBE=c.prototype.readUIntBE=function(O,L,B){O=O>>>0,L=L>>>0,B||K(O,L,this.length);for(var ne=this[O+--L],me=1;L>0&&(me*=256);)ne+=this[O+--L]*me;return ne},c.prototype.readUint8=c.prototype.readUInt8=function(O,L){return O=O>>>0,L||K(O,1,this.length),this[O]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(O,L){return O=O>>>0,L||K(O,2,this.length),this[O]|this[O+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(O,L){return O=O>>>0,L||K(O,2,this.length),this[O]<<8|this[O+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(O,L){return O=O>>>0,L||K(O,4,this.length),(this[O]|this[O+1]<<8|this[O+2]<<16)+this[O+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(O,L){return O=O>>>0,L||K(O,4,this.length),this[O]*16777216+(this[O+1]<<16|this[O+2]<<8|this[O+3])},c.prototype.readIntLE=function(O,L,B){O=O>>>0,L=L>>>0,B||K(O,L,this.length);for(var ne=this[O],me=1,xe=0;++xe<L&&(me*=256);)ne+=this[O+xe]*me;return me*=128,ne>=me&&(ne-=Math.pow(2,8*L)),ne},c.prototype.readIntBE=function(O,L,B){O=O>>>0,L=L>>>0,B||K(O,L,this.length);for(var ne=L,me=1,xe=this[O+--ne];ne>0&&(me*=256);)xe+=this[O+--ne]*me;return me*=128,xe>=me&&(xe-=Math.pow(2,8*L)),xe},c.prototype.readInt8=function(O,L){return O=O>>>0,L||K(O,1,this.length),this[O]&128?(255-this[O]+1)*-1:this[O]},c.prototype.readInt16LE=function(O,L){O=O>>>0,L||K(O,2,this.length);var B=this[O]|this[O+1]<<8;return B&32768?B|4294901760:B},c.prototype.readInt16BE=function(O,L){O=O>>>0,L||K(O,2,this.length);var B=this[O+1]|this[O]<<8;return B&32768?B|4294901760:B},c.prototype.readInt32LE=function(O,L){return O=O>>>0,L||K(O,4,this.length),this[O]|this[O+1]<<8|this[O+2]<<16|this[O+3]<<24},c.prototype.readInt32BE=function(O,L){return O=O>>>0,L||K(O,4,this.length),this[O]<<24|this[O+1]<<16|this[O+2]<<8|this[O+3]},c.prototype.readFloatLE=function(O,L){return O=O>>>0,L||K(O,4,this.length),r.read(this,O,!0,23,4)},c.prototype.readFloatBE=function(O,L){return O=O>>>0,L||K(O,4,this.length),r.read(this,O,!1,23,4)},c.prototype.readDoubleLE=function(O,L){return O=O>>>0,L||K(O,8,this.length),r.read(this,O,!0,52,8)},c.prototype.readDoubleBE=function(O,L){return O=O>>>0,L||K(O,8,this.length),r.read(this,O,!1,52,8)};function $(X,O,L,B,ne,me){if(!c.isBuffer(X))throw new TypeError('"buffer" argument must be a Buffer instance');if(O>ne||O<me)throw new RangeError('"value" argument is out of bounds');if(L+B>X.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(O,L,B,ne){if(O=+O,L=L>>>0,B=B>>>0,!ne){var me=Math.pow(2,8*B)-1;$(this,O,L,B,me,0)}var xe=1,_e=0;for(this[L]=O&255;++_e<B&&(xe*=256);)this[L+_e]=O/xe&255;return L+B},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(O,L,B,ne){if(O=+O,L=L>>>0,B=B>>>0,!ne){var me=Math.pow(2,8*B)-1;$(this,O,L,B,me,0)}var xe=B-1,_e=1;for(this[L+xe]=O&255;--xe>=0&&(_e*=256);)this[L+xe]=O/_e&255;return L+B},c.prototype.writeUint8=c.prototype.writeUInt8=function(O,L,B){return O=+O,L=L>>>0,B||$(this,O,L,1,255,0),this[L]=O&255,L+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(O,L,B){return O=+O,L=L>>>0,B||$(this,O,L,2,65535,0),this[L]=O&255,this[L+1]=O>>>8,L+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(O,L,B){return O=+O,L=L>>>0,B||$(this,O,L,2,65535,0),this[L]=O>>>8,this[L+1]=O&255,L+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(O,L,B){return O=+O,L=L>>>0,B||$(this,O,L,4,4294967295,0),this[L+3]=O>>>24,this[L+2]=O>>>16,this[L+1]=O>>>8,this[L]=O&255,L+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(O,L,B){return O=+O,L=L>>>0,B||$(this,O,L,4,4294967295,0),this[L]=O>>>24,this[L+1]=O>>>16,this[L+2]=O>>>8,this[L+3]=O&255,L+4},c.prototype.writeIntLE=function(O,L,B,ne){if(O=+O,L=L>>>0,!ne){var me=Math.pow(2,8*B-1);$(this,O,L,B,me-1,-me)}var xe=0,_e=1,Ce=0;for(this[L]=O&255;++xe<B&&(_e*=256);)O<0&&Ce===0&&this[L+xe-1]!==0&&(Ce=1),this[L+xe]=(O/_e>>0)-Ce&255;return L+B},c.prototype.writeIntBE=function(O,L,B,ne){if(O=+O,L=L>>>0,!ne){var me=Math.pow(2,8*B-1);$(this,O,L,B,me-1,-me)}var xe=B-1,_e=1,Ce=0;for(this[L+xe]=O&255;--xe>=0&&(_e*=256);)O<0&&Ce===0&&this[L+xe+1]!==0&&(Ce=1),this[L+xe]=(O/_e>>0)-Ce&255;return L+B},c.prototype.writeInt8=function(O,L,B){return O=+O,L=L>>>0,B||$(this,O,L,1,127,-128),O<0&&(O=255+O+1),this[L]=O&255,L+1},c.prototype.writeInt16LE=function(O,L,B){return O=+O,L=L>>>0,B||$(this,O,L,2,32767,-32768),this[L]=O&255,this[L+1]=O>>>8,L+2},c.prototype.writeInt16BE=function(O,L,B){return O=+O,L=L>>>0,B||$(this,O,L,2,32767,-32768),this[L]=O>>>8,this[L+1]=O&255,L+2},c.prototype.writeInt32LE=function(O,L,B){return O=+O,L=L>>>0,B||$(this,O,L,4,2147483647,-2147483648),this[L]=O&255,this[L+1]=O>>>8,this[L+2]=O>>>16,this[L+3]=O>>>24,L+4},c.prototype.writeInt32BE=function(O,L,B){return O=+O,L=L>>>0,B||$(this,O,L,4,2147483647,-2147483648),O<0&&(O=4294967295+O+1),this[L]=O>>>24,this[L+1]=O>>>16,this[L+2]=O>>>8,this[L+3]=O&255,L+4};function le(X,O,L,B,ne,me){if(L+B>X.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("Index out of range")}function ie(X,O,L,B,ne){return O=+O,L=L>>>0,ne||le(X,O,L,4),r.write(X,O,L,B,23,4),L+4}c.prototype.writeFloatLE=function(O,L,B){return ie(this,O,L,!0,B)},c.prototype.writeFloatBE=function(O,L,B){return ie(this,O,L,!1,B)};function oe(X,O,L,B,ne){return O=+O,L=L>>>0,ne||le(X,O,L,8),r.write(X,O,L,B,52,8),L+8}c.prototype.writeDoubleLE=function(O,L,B){return oe(this,O,L,!0,B)},c.prototype.writeDoubleBE=function(O,L,B){return oe(this,O,L,!1,B)},c.prototype.copy=function(O,L,B,ne){if(!c.isBuffer(O))throw new TypeError("argument should be a Buffer");if(B||(B=0),!ne&&ne!==0&&(ne=this.length),L>=O.length&&(L=O.length),L||(L=0),ne>0&&ne<B&&(ne=B),ne===B||O.length===0||this.length===0)return 0;if(L<0)throw new RangeError("targetStart out of bounds");if(B<0||B>=this.length)throw new RangeError("Index out of range");if(ne<0)throw new RangeError("sourceEnd out of bounds");ne>this.length&&(ne=this.length),O.length-L<ne-B&&(ne=O.length-L+B);var me=ne-B;return this===O&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(L,B,ne):Uint8Array.prototype.set.call(O,this.subarray(B,ne),L),me},c.prototype.fill=function(O,L,B,ne){if(typeof O=="string"){if(typeof L=="string"?(ne=L,L=0,B=this.length):typeof B=="string"&&(ne=B,B=this.length),ne!==void 0&&typeof ne!="string")throw new TypeError("encoding must be a string");if(typeof ne=="string"&&!c.isEncoding(ne))throw new TypeError("Unknown encoding: "+ne);if(O.length===1){var me=O.charCodeAt(0);(ne==="utf8"&&me<128||ne==="latin1")&&(O=me)}}else typeof O=="number"?O=O&255:typeof O=="boolean"&&(O=Number(O));if(L<0||this.length<L||this.length<B)throw new RangeError("Out of range index");if(B<=L)return this;L=L>>>0,B=B===void 0?this.length:B>>>0,O||(O=0);var xe;if(typeof O=="number")for(xe=L;xe<B;++xe)this[xe]=O;else{var _e=c.isBuffer(O)?O:c.from(O,ne),Ce=_e.length;if(Ce===0)throw new TypeError('The value "'+O+'" is invalid for argument "value"');for(xe=0;xe<B-L;++xe)this[xe+L]=_e[xe%Ce]}return this};var de=/[^+/0-9A-Za-z-_]/g;function U(X){if(X=X.split("=")[0],X=X.trim().replace(de,""),X.length<2)return"";for(;X.length%4!==0;)X=X+"=";return X}function F(X,O){O=O||1/0;for(var L,B=X.length,ne=null,me=[],xe=0;xe<B;++xe){if(L=X.charCodeAt(xe),L>55295&&L<57344){if(!ne){if(L>56319){(O-=3)>-1&&me.push(239,191,189);continue}else if(xe+1===B){(O-=3)>-1&&me.push(239,191,189);continue}ne=L;continue}if(L<56320){(O-=3)>-1&&me.push(239,191,189),ne=L;continue}L=(ne-55296<<10|L-56320)+65536}else ne&&(O-=3)>-1&&me.push(239,191,189);if(ne=null,L<128){if((O-=1)<0)break;me.push(L)}else if(L<2048){if((O-=2)<0)break;me.push(L>>6|192,L&63|128)}else if(L<65536){if((O-=3)<0)break;me.push(L>>12|224,L>>6&63|128,L&63|128)}else if(L<1114112){if((O-=4)<0)break;me.push(L>>18|240,L>>12&63|128,L>>6&63|128,L&63|128)}else throw new Error("Invalid code point")}return me}function Q(X){for(var O=[],L=0;L<X.length;++L)O.push(X.charCodeAt(L)&255);return O}function W(X,O){for(var L,B,ne,me=[],xe=0;xe<X.length&&!((O-=2)<0);++xe)L=X.charCodeAt(xe),B=L>>8,ne=L%256,me.push(ne),me.push(B);return me}function H(X){return t.toByteArray(U(X))}function re(X,O,L,B){for(var ne=0;ne<B&&!(ne+L>=O.length||ne>=X.length);++ne)O[ne+L]=X[ne];return ne}function he(X,O){return X instanceof O||X!=null&&X.constructor!=null&&X.constructor.name!=null&&X.constructor.name===O.name}function G(X){return X!==X}var ce=(function(){for(var X="0123456789abcdef",O=new Array(256),L=0;L<16;++L)for(var B=L*16,ne=0;ne<16;++ne)O[B+ne]=X[L]+X[ne];return O})()})(ev)),ev}var tv={},sv={},rv,u3;function m8(){return u3||(u3=1,rv=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),a=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(a)!=="[object Symbol]")return!1;var n=42;t[r]=n;for(var i in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var c=Object.getOwnPropertyDescriptor(t,r);if(c.value!==n||c.enumerable!==!0)return!1}return!0}),rv}var av,h3;function R1(){if(h3)return av;h3=1;var s=m8();return av=function(){return s()&&!!Symbol.toStringTag},av}var nv,m3;function x8(){return m3||(m3=1,nv=Object),nv}var iv,x3;function IJ(){return x3||(x3=1,iv=Error),iv}var lv,f3;function $J(){return f3||(f3=1,lv=EvalError),lv}var ov,p3;function UJ(){return p3||(p3=1,ov=RangeError),ov}var cv,g3;function VJ(){return g3||(g3=1,cv=ReferenceError),cv}var dv,b3;function f8(){return b3||(b3=1,dv=SyntaxError),dv}var uv,y3;function zm(){return y3||(y3=1,uv=TypeError),uv}var hv,v3;function HJ(){return v3||(v3=1,hv=URIError),hv}var mv,j3;function qJ(){return j3||(j3=1,mv=Math.abs),mv}var xv,w3;function WJ(){return w3||(w3=1,xv=Math.floor),xv}var fv,N3;function YJ(){return N3||(N3=1,fv=Math.max),fv}var pv,_3;function GJ(){return _3||(_3=1,pv=Math.min),pv}var gv,k3;function KJ(){return k3||(k3=1,gv=Math.pow),gv}var bv,S3;function XJ(){return S3||(S3=1,bv=Math.round),bv}var yv,C3;function ZJ(){return C3||(C3=1,yv=Number.isNaN||function(t){return t!==t}),yv}var vv,T3;function QJ(){if(T3)return vv;T3=1;var s=ZJ();return vv=function(r){return s(r)||r===0?r:r<0?-1:1},vv}var jv,E3;function JJ(){return E3||(E3=1,jv=Object.getOwnPropertyDescriptor),jv}var wv,A3;function Im(){if(A3)return wv;A3=1;var s=JJ();if(s)try{s([],"length")}catch{s=null}return wv=s,wv}var Nv,D3;function zp(){if(D3)return Nv;D3=1;var s=Object.defineProperty||!1;if(s)try{s({},"a",{value:1})}catch{s=!1}return Nv=s,Nv}var _v,R3;function eee(){if(R3)return _v;R3=1;var s=typeof Symbol<"u"&&Symbol,t=m8();return _v=function(){return typeof s!="function"||typeof Symbol!="function"||typeof s("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},_v}var kv,M3;function p8(){return M3||(M3=1,kv=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),kv}var Sv,O3;function g8(){if(O3)return Sv;O3=1;var s=x8();return Sv=s.getPrototypeOf||null,Sv}var Cv,L3;function tee(){if(L3)return Cv;L3=1;var s="Function.prototype.bind called on incompatible ",t=Object.prototype.toString,r=Math.max,a="[object Function]",n=function(u,h){for(var m=[],f=0;f<u.length;f+=1)m[f]=u[f];for(var p=0;p<h.length;p+=1)m[p+u.length]=h[p];return m},i=function(u,h){for(var m=[],f=h,p=0;f<u.length;f+=1,p+=1)m[p]=u[f];return m},o=function(c,u){for(var h="",m=0;m<c.length;m+=1)h+=c[m],m+1<c.length&&(h+=u);return h};return Cv=function(u){var h=this;if(typeof h!="function"||t.apply(h)!==a)throw new TypeError(s+h);for(var m=i(arguments,1),f,p=function(){if(this instanceof f){var N=h.apply(this,n(m,arguments));return Object(N)===N?N:this}return h.apply(u,n(m,arguments))},j=r(0,h.length-m.length),g=[],v=0;v<j;v++)g[v]="$"+v;if(f=Function("binder","return function ("+o(g,",")+"){ return binder.apply(this,arguments); }")(p),h.prototype){var y=function(){};y.prototype=h.prototype,f.prototype=new y,y.prototype=null}return f},Cv}var Tv,P3;function $m(){if(P3)return Tv;P3=1;var s=tee();return Tv=Function.prototype.bind||s,Tv}var Ev,B3;function M1(){return B3||(B3=1,Ev=Function.prototype.call),Ev}var Av,F3;function b8(){return F3||(F3=1,Av=Function.prototype.apply),Av}var Dv,z3;function see(){return z3||(z3=1,Dv=typeof Reflect<"u"&&Reflect&&Reflect.apply),Dv}var Rv,I3;function ree(){if(I3)return Rv;I3=1;var s=$m(),t=b8(),r=M1(),a=see();return Rv=a||s.call(r,t),Rv}var Mv,$3;function aee(){if($3)return Mv;$3=1;var s=$m(),t=zm(),r=M1(),a=ree();return Mv=function(i){if(i.length<1||typeof i[0]!="function")throw new t("a function is required");return a(s,r,i)},Mv}var Ov,U3;function nee(){if(U3)return Ov;U3=1;var s=aee(),t=Im(),r;try{r=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var a=!!r&&t&&t(Object.prototype,"__proto__"),n=Object,i=n.getPrototypeOf;return Ov=a&&typeof a.get=="function"?s([a.get]):typeof i=="function"?(function(c){return i(c==null?c:n(c))}):!1,Ov}var Lv,V3;function iee(){if(V3)return Lv;V3=1;var s=p8(),t=g8(),r=nee();return Lv=s?function(n){return s(n)}:t?function(n){if(!n||typeof n!="object"&&typeof n!="function")throw new TypeError("getProto: not an object");return t(n)}:r?function(n){return r(n)}:null,Lv}var Pv,H3;function lee(){if(H3)return Pv;H3=1;var s=Function.prototype.call,t=Object.prototype.hasOwnProperty,r=$m();return Pv=r.call(s,t),Pv}var Bv,q3;function O1(){if(q3)return Bv;q3=1;var s,t=x8(),r=IJ(),a=$J(),n=UJ(),i=VJ(),o=f8(),c=zm(),u=HJ(),h=qJ(),m=WJ(),f=YJ(),p=GJ(),j=KJ(),g=XJ(),v=QJ(),y=Function,N=function(Q){try{return y('"use strict"; return ('+Q+").constructor;")()}catch{}},S=Im(),k=zp(),_=function(){throw new c},T=S?(function(){try{return arguments.callee,_}catch{try{return S(arguments,"callee").get}catch{return _}}})():_,E=eee()(),z=iee(),M=g8(),C=p8(),A=b8(),Z=M1(),I={},V=typeof Uint8Array>"u"||!z?s:z(Uint8Array),R={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?s:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?s:ArrayBuffer,"%ArrayIteratorPrototype%":E&&z?z([][Symbol.iterator]()):s,"%AsyncFromSyncIteratorPrototype%":s,"%AsyncFunction%":I,"%AsyncGenerator%":I,"%AsyncGeneratorFunction%":I,"%AsyncIteratorPrototype%":I,"%Atomics%":typeof Atomics>"u"?s:Atomics,"%BigInt%":typeof BigInt>"u"?s:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?s:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?s:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?s:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":r,"%eval%":eval,"%EvalError%":a,"%Float16Array%":typeof Float16Array>"u"?s:Float16Array,"%Float32Array%":typeof Float32Array>"u"?s:Float32Array,"%Float64Array%":typeof Float64Array>"u"?s:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?s:FinalizationRegistry,"%Function%":y,"%GeneratorFunction%":I,"%Int8Array%":typeof Int8Array>"u"?s:Int8Array,"%Int16Array%":typeof Int16Array>"u"?s:Int16Array,"%Int32Array%":typeof Int32Array>"u"?s:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":E&&z?z(z([][Symbol.iterator]())):s,"%JSON%":typeof JSON=="object"?JSON:s,"%Map%":typeof Map>"u"?s:Map,"%MapIteratorPrototype%":typeof Map>"u"||!E||!z?s:z(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":t,"%Object.getOwnPropertyDescriptor%":S,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?s:Promise,"%Proxy%":typeof Proxy>"u"?s:Proxy,"%RangeError%":n,"%ReferenceError%":i,"%Reflect%":typeof Reflect>"u"?s:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?s:Set,"%SetIteratorPrototype%":typeof Set>"u"||!E||!z?s:z(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?s:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":E&&z?z(""[Symbol.iterator]()):s,"%Symbol%":E?Symbol:s,"%SyntaxError%":o,"%ThrowTypeError%":T,"%TypedArray%":V,"%TypeError%":c,"%Uint8Array%":typeof Uint8Array>"u"?s:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?s:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?s:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?s:Uint32Array,"%URIError%":u,"%WeakMap%":typeof WeakMap>"u"?s:WeakMap,"%WeakRef%":typeof WeakRef>"u"?s:WeakRef,"%WeakSet%":typeof WeakSet>"u"?s:WeakSet,"%Function.prototype.call%":Z,"%Function.prototype.apply%":A,"%Object.defineProperty%":k,"%Object.getPrototypeOf%":M,"%Math.abs%":h,"%Math.floor%":m,"%Math.max%":f,"%Math.min%":p,"%Math.pow%":j,"%Math.round%":g,"%Math.sign%":v,"%Reflect.getPrototypeOf%":C};if(z)try{null.error}catch(Q){var q=z(z(Q));R["%Error.prototype%"]=q}var J=function Q(W){var H;if(W==="%AsyncFunction%")H=N("async function () {}");else if(W==="%GeneratorFunction%")H=N("function* () {}");else if(W==="%AsyncGeneratorFunction%")H=N("async function* () {}");else if(W==="%AsyncGenerator%"){var re=Q("%AsyncGeneratorFunction%");re&&(H=re.prototype)}else if(W==="%AsyncIteratorPrototype%"){var he=Q("%AsyncGenerator%");he&&z&&(H=z(he.prototype))}return R[W]=H,H},se={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Y=$m(),ee=lee(),te=Y.call(Z,Array.prototype.concat),K=Y.call(A,Array.prototype.splice),$=Y.call(Z,String.prototype.replace),le=Y.call(Z,String.prototype.slice),ie=Y.call(Z,RegExp.prototype.exec),oe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,de=/\\(\\)?/g,U=function(W){var H=le(W,0,1),re=le(W,-1);if(H==="%"&&re!=="%")throw new o("invalid intrinsic syntax, expected closing `%`");if(re==="%"&&H!=="%")throw new o("invalid intrinsic syntax, expected opening `%`");var he=[];return $(W,oe,function(G,ce,X,O){he[he.length]=X?$(O,de,"$1"):ce||G}),he},F=function(W,H){var re=W,he;if(ee(se,re)&&(he=se[re],re="%"+he[0]+"%"),ee(R,re)){var G=R[re];if(G===I&&(G=J(re)),typeof G>"u"&&!H)throw new c("intrinsic "+W+" exists, but is not available. Please file an issue!");return{alias:he,name:re,value:G}}throw new o("intrinsic "+W+" does not exist!")};return Bv=function(W,H){if(typeof W!="string"||W.length===0)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof H!="boolean")throw new c('"allowMissing" argument must be a boolean');if(ie(/^%?[^%]*%?$/,W)===null)throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var re=U(W),he=re.length>0?re[0]:"",G=F("%"+he+"%",H),ce=G.name,X=G.value,O=!1,L=G.alias;L&&(he=L[0],K(re,te([0,1],L)));for(var B=1,ne=!0;B<re.length;B+=1){var me=re[B],xe=le(me,0,1),_e=le(me,-1);if((xe==='"'||xe==="'"||xe==="`"||_e==='"'||_e==="'"||_e==="`")&&xe!==_e)throw new o("property names with quotes must have matching quotes");if((me==="constructor"||!ne)&&(O=!0),he+="."+me,ce="%"+he+"%",ee(R,ce))X=R[ce];else if(X!=null){if(!(me in X)){if(!H)throw new c("base intrinsic for "+W+" exists, but the property is not available.");return}if(S&&B+1>=re.length){var Ce=S(X,me);ne=!!Ce,ne&&"get"in Ce&&!("originalValue"in Ce.get)?X=Ce.get:X=X[me]}else ne=ee(X,me),X=X[me];ne&&!O&&(R[ce]=X)}}return X},Bv}var Fv={exports:{}},zv,W3;function oee(){if(W3)return zv;W3=1;var s=zp(),t=f8(),r=zm(),a=Im();return zv=function(i,o,c){if(!i||typeof i!="object"&&typeof i!="function")throw new r("`obj` must be an object or a function`");if(typeof o!="string"&&typeof o!="symbol")throw new r("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new r("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new r("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new r("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new r("`loose`, if provided, must be a boolean");var u=arguments.length>3?arguments[3]:null,h=arguments.length>4?arguments[4]:null,m=arguments.length>5?arguments[5]:null,f=arguments.length>6?arguments[6]:!1,p=!!a&&a(i,o);if(s)s(i,o,{configurable:m===null&&p?p.configurable:!m,enumerable:u===null&&p?p.enumerable:!u,value:c,writable:h===null&&p?p.writable:!h});else if(f||!u&&!h&&!m)i[o]=c;else throw new t("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},zv}var Iv,Y3;function cee(){if(Y3)return Iv;Y3=1;var s=zp(),t=function(){return!!s};return t.hasArrayLengthDefineBug=function(){if(!s)return null;try{return s([],"length",{value:1}).length!==1}catch{return!0}},Iv=t,Iv}var $v,G3;function dee(){if(G3)return $v;G3=1;var s=O1(),t=oee(),r=cee()(),a=Im(),n=zm(),i=s("%Math.floor%");return $v=function(c,u){if(typeof c!="function")throw new n("`fn` is not a function");if(typeof u!="number"||u<0||u>4294967295||i(u)!==u)throw new n("`length` must be a positive 32-bit integer");var h=arguments.length>2&&!!arguments[2],m=!0,f=!0;if("length"in c&&a){var p=a(c,"length");p&&!p.configurable&&(m=!1),p&&!p.writable&&(f=!1)}return(m||f||!h)&&(r?t(c,"length",u,!0,!0):t(c,"length",u)),c},$v}var K3;function y8(){return K3||(K3=1,(function(s){var t=$m(),r=O1(),a=dee(),n=zm(),i=r("%Function.prototype.apply%"),o=r("%Function.prototype.call%"),c=r("%Reflect.apply%",!0)||t.call(o,i),u=zp(),h=r("%Math.max%");s.exports=function(p){if(typeof p!="function")throw new n("a function is required");var j=c(t,o,arguments);return a(j,1+h(0,p.length-(arguments.length-1)),!0)};var m=function(){return c(t,i,arguments)};u?u(s.exports,"apply",{value:m}):s.exports.apply=m})(Fv)),Fv.exports}var Uv,X3;function v8(){if(X3)return Uv;X3=1;var s=O1(),t=y8(),r=t(s("String.prototype.indexOf"));return Uv=function(n,i){var o=s(n,!!i);return typeof o=="function"&&r(n,".prototype.")>-1?t(o):o},Uv}var Vv,Z3;function uee(){if(Z3)return Vv;Z3=1;var s=R1()(),t=v8(),r=t("Object.prototype.toString"),a=function(c){return s&&c&&typeof c=="object"&&Symbol.toStringTag in c?!1:r(c)==="[object Arguments]"},n=function(c){return a(c)?!0:c!==null&&typeof c=="object"&&typeof c.length=="number"&&c.length>=0&&r(c)!=="[object Array]"&&r(c.callee)==="[object Function]"},i=(function(){return a(arguments)})();return a.isLegacyArguments=n,Vv=i?a:n,Vv}var Hv,Q3;function hee(){if(Q3)return Hv;Q3=1;var s=Object.prototype.toString,t=Function.prototype.toString,r=/^\s*(?:function)?\*/,a=R1()(),n=Object.getPrototypeOf,i=function(){if(!a)return!1;try{return Function("return function*() {}")()}catch{}},o;return Hv=function(u){if(typeof u!="function")return!1;if(r.test(t.call(u)))return!0;if(!a){var h=s.call(u);return h==="[object GeneratorFunction]"}if(!n)return!1;if(typeof o>"u"){var m=i();o=m?n(m):!1}return n(u)===o},Hv}var qv,J3;function mee(){if(J3)return qv;J3=1;var s=Function.prototype.toString,t=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,r,a;if(typeof t=="function"&&typeof Object.defineProperty=="function")try{r=Object.defineProperty({},"length",{get:function(){throw a}}),a={},t(function(){throw 42},null,r)}catch(S){S!==a&&(t=null)}else t=null;var n=/^\s*class\b/,i=function(k){try{var _=s.call(k);return n.test(_)}catch{return!1}},o=function(k){try{return i(k)?!1:(s.call(k),!0)}catch{return!1}},c=Object.prototype.toString,u="[object Object]",h="[object Function]",m="[object GeneratorFunction]",f="[object HTMLAllCollection]",p="[object HTML document.all class]",j="[object HTMLCollection]",g=typeof Symbol=="function"&&!!Symbol.toStringTag,v=!(0 in[,]),y=function(){return!1};if(typeof document=="object"){var N=document.all;c.call(N)===c.call(document.all)&&(y=function(k){if((v||!k)&&(typeof k>"u"||typeof k=="object"))try{var _=c.call(k);return(_===f||_===p||_===j||_===u)&&k("")==null}catch{}return!1})}return qv=t?function(k){if(y(k))return!0;if(!k||typeof k!="function"&&typeof k!="object")return!1;try{t(k,null,r)}catch(_){if(_!==a)return!1}return!i(k)&&o(k)}:function(k){if(y(k))return!0;if(!k||typeof k!="function"&&typeof k!="object")return!1;if(g)return o(k);if(i(k))return!1;var _=c.call(k);return _!==h&&_!==m&&!/^\[object HTML/.test(_)?!1:o(k)},qv}var Wv,eC;function xee(){if(eC)return Wv;eC=1;var s=mee(),t=Object.prototype.toString,r=Object.prototype.hasOwnProperty,a=function(u,h,m){for(var f=0,p=u.length;f<p;f++)r.call(u,f)&&(m==null?h(u[f],f,u):h.call(m,u[f],f,u))},n=function(u,h,m){for(var f=0,p=u.length;f<p;f++)m==null?h(u.charAt(f),f,u):h.call(m,u.charAt(f),f,u)},i=function(u,h,m){for(var f in u)r.call(u,f)&&(m==null?h(u[f],f,u):h.call(m,u[f],f,u))},o=function(u,h,m){if(!s(h))throw new TypeError("iterator must be a function");var f;arguments.length>=3&&(f=m),t.call(u)==="[object Array]"?a(u,h,f):typeof u=="string"?n(u,h,f):i(u,h,f)};return Wv=o,Wv}var Yv,tC;function fee(){return tC||(tC=1,Yv=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),Yv}var Gv,sC;function pee(){if(sC)return Gv;sC=1;var s=fee(),t=typeof globalThis>"u"?xn:globalThis;return Gv=function(){for(var a=[],n=0;n<s.length;n++)typeof t[s[n]]=="function"&&(a[a.length]=s[n]);return a},Gv}var Kv,rC;function j8(){if(rC)return Kv;rC=1;var s=xee(),t=pee(),r=y8(),a=v8(),n=Im(),i=a("Object.prototype.toString"),o=R1()(),c=typeof globalThis>"u"?xn:globalThis,u=t(),h=a("String.prototype.slice"),m=Object.getPrototypeOf,f=a("Array.prototype.indexOf",!0)||function(y,N){for(var S=0;S<y.length;S+=1)if(y[S]===N)return S;return-1},p={__proto__:null};o&&n&&m?s(u,function(v){var y=new c[v];if(Symbol.toStringTag in y){var N=m(y),S=n(N,Symbol.toStringTag);if(!S){var k=m(N);S=n(k,Symbol.toStringTag)}p["$"+v]=r(S.get)}}):s(u,function(v){var y=new c[v],N=y.slice||y.set;N&&(p["$"+v]=r(N))});var j=function(y){var N=!1;return s(p,function(S,k){if(!N)try{"$"+S(y)===k&&(N=h(k,1))}catch{}}),N},g=function(y){var N=!1;return s(p,function(S,k){if(!N)try{S(y),N=h(k,1)}catch{}}),N};return Kv=function(y){if(!y||typeof y!="object")return!1;if(!o){var N=h(i(y),8,-1);return f(u,N)>-1?N:N!=="Object"?!1:g(y)}return n?j(y):null},Kv}var Xv,aC;function gee(){if(aC)return Xv;aC=1;var s=j8();return Xv=function(r){return!!s(r)},Xv}var nC;function bee(){return nC||(nC=1,(function(s){var t=uee(),r=hee(),a=j8(),n=gee();function i(B){return B.call.bind(B)}var o=typeof BigInt<"u",c=typeof Symbol<"u",u=i(Object.prototype.toString),h=i(Number.prototype.valueOf),m=i(String.prototype.valueOf),f=i(Boolean.prototype.valueOf);if(o)var p=i(BigInt.prototype.valueOf);if(c)var j=i(Symbol.prototype.valueOf);function g(B,ne){if(typeof B!="object")return!1;try{return ne(B),!0}catch{return!1}}s.isArgumentsObject=t,s.isGeneratorFunction=r,s.isTypedArray=n;function v(B){return typeof Promise<"u"&&B instanceof Promise||B!==null&&typeof B=="object"&&typeof B.then=="function"&&typeof B.catch=="function"}s.isPromise=v;function y(B){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(B):n(B)||le(B)}s.isArrayBufferView=y;function N(B){return a(B)==="Uint8Array"}s.isUint8Array=N;function S(B){return a(B)==="Uint8ClampedArray"}s.isUint8ClampedArray=S;function k(B){return a(B)==="Uint16Array"}s.isUint16Array=k;function _(B){return a(B)==="Uint32Array"}s.isUint32Array=_;function T(B){return a(B)==="Int8Array"}s.isInt8Array=T;function E(B){return a(B)==="Int16Array"}s.isInt16Array=E;function z(B){return a(B)==="Int32Array"}s.isInt32Array=z;function M(B){return a(B)==="Float32Array"}s.isFloat32Array=M;function C(B){return a(B)==="Float64Array"}s.isFloat64Array=C;function A(B){return a(B)==="BigInt64Array"}s.isBigInt64Array=A;function Z(B){return a(B)==="BigUint64Array"}s.isBigUint64Array=Z;function I(B){return u(B)==="[object Map]"}I.working=typeof Map<"u"&&I(new Map);function V(B){return typeof Map>"u"?!1:I.working?I(B):B instanceof Map}s.isMap=V;function R(B){return u(B)==="[object Set]"}R.working=typeof Set<"u"&&R(new Set);function q(B){return typeof Set>"u"?!1:R.working?R(B):B instanceof Set}s.isSet=q;function J(B){return u(B)==="[object WeakMap]"}J.working=typeof WeakMap<"u"&&J(new WeakMap);function se(B){return typeof WeakMap>"u"?!1:J.working?J(B):B instanceof WeakMap}s.isWeakMap=se;function Y(B){return u(B)==="[object WeakSet]"}Y.working=typeof WeakSet<"u"&&Y(new WeakSet);function ee(B){return Y(B)}s.isWeakSet=ee;function te(B){return u(B)==="[object ArrayBuffer]"}te.working=typeof ArrayBuffer<"u"&&te(new ArrayBuffer);function K(B){return typeof ArrayBuffer>"u"?!1:te.working?te(B):B instanceof ArrayBuffer}s.isArrayBuffer=K;function $(B){return u(B)==="[object DataView]"}$.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&$(new DataView(new ArrayBuffer(1),0,1));function le(B){return typeof DataView>"u"?!1:$.working?$(B):B instanceof DataView}s.isDataView=le;var ie=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function oe(B){return u(B)==="[object SharedArrayBuffer]"}function de(B){return typeof ie>"u"?!1:(typeof oe.working>"u"&&(oe.working=oe(new ie)),oe.working?oe(B):B instanceof ie)}s.isSharedArrayBuffer=de;function U(B){return u(B)==="[object AsyncFunction]"}s.isAsyncFunction=U;function F(B){return u(B)==="[object Map Iterator]"}s.isMapIterator=F;function Q(B){return u(B)==="[object Set Iterator]"}s.isSetIterator=Q;function W(B){return u(B)==="[object Generator]"}s.isGeneratorObject=W;function H(B){return u(B)==="[object WebAssembly.Module]"}s.isWebAssemblyCompiledModule=H;function re(B){return g(B,h)}s.isNumberObject=re;function he(B){return g(B,m)}s.isStringObject=he;function G(B){return g(B,f)}s.isBooleanObject=G;function ce(B){return o&&g(B,p)}s.isBigIntObject=ce;function X(B){return c&&g(B,j)}s.isSymbolObject=X;function O(B){return re(B)||he(B)||G(B)||ce(B)||X(B)}s.isBoxedPrimitive=O;function L(B){return typeof Uint8Array<"u"&&(K(B)||de(B))}s.isAnyArrayBuffer=L,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(B){Object.defineProperty(s,B,{enumerable:!1,value:function(){throw new Error(B+" is not supported in userland")}})})})(sv)),sv}var Zv,iC;function yee(){return iC||(iC=1,Zv=function(t){return t&&typeof t=="object"&&typeof t.copy=="function"&&typeof t.fill=="function"&&typeof t.readUInt8=="function"}),Zv}var lC;function w8(){return lC||(lC=1,(function(s){var t=Object.getOwnPropertyDescriptors||function(le){for(var ie=Object.keys(le),oe={},de=0;de<ie.length;de++)oe[ie[de]]=Object.getOwnPropertyDescriptor(le,ie[de]);return oe},r=/%[sdj%]/g;s.format=function($){if(!T($)){for(var le=[],ie=0;ie<arguments.length;ie++)le.push(o(arguments[ie]));return le.join(" ")}for(var ie=1,oe=arguments,de=oe.length,U=String($).replace(r,function(Q){if(Q==="%%")return"%";if(ie>=de)return Q;switch(Q){case"%s":return String(oe[ie++]);case"%d":return Number(oe[ie++]);case"%j":try{return JSON.stringify(oe[ie++])}catch{return"[Circular]"}default:return Q}}),F=oe[ie];ie<de;F=oe[++ie])S(F)||!C(F)?U+=" "+F:U+=" "+o(F);return U},s.deprecate=function($,le){if(typeof ot<"u"&&ot.noDeprecation===!0)return $;if(typeof ot>"u")return function(){return s.deprecate($,le).apply(this,arguments)};var ie=!1;function oe(){if(!ie){if(ot.throwDeprecation)throw new Error(le);ot.traceDeprecation?console.trace(le):console.error(le),ie=!0}return $.apply(this,arguments)}return oe};var a={},n=/^$/;if(ot.env.NODE_DEBUG){var i=ot.env.NODE_DEBUG;i=i.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),n=new RegExp("^"+i+"$","i")}s.debuglog=function($){if($=$.toUpperCase(),!a[$])if(n.test($)){var le=ot.pid;a[$]=function(){var ie=s.format.apply(s,arguments);console.error("%s %d: %s",$,le,ie)}}else a[$]=function(){};return a[$]};function o($,le){var ie={seen:[],stylize:u};return arguments.length>=3&&(ie.depth=arguments[2]),arguments.length>=4&&(ie.colors=arguments[3]),N(le)?ie.showHidden=le:le&&s._extend(ie,le),z(ie.showHidden)&&(ie.showHidden=!1),z(ie.depth)&&(ie.depth=2),z(ie.colors)&&(ie.colors=!1),z(ie.customInspect)&&(ie.customInspect=!0),ie.colors&&(ie.stylize=c),m(ie,$,ie.depth)}s.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function c($,le){var ie=o.styles[le];return ie?"\x1B["+o.colors[ie][0]+"m"+$+"\x1B["+o.colors[ie][1]+"m":$}function u($,le){return $}function h($){var le={};return $.forEach(function(ie,oe){le[ie]=!0}),le}function m($,le,ie){if($.customInspect&&le&&I(le.inspect)&&le.inspect!==s.inspect&&!(le.constructor&&le.constructor.prototype===le)){var oe=le.inspect(ie,$);return T(oe)||(oe=m($,oe,ie)),oe}var de=f($,le);if(de)return de;var U=Object.keys(le),F=h(U);if($.showHidden&&(U=Object.getOwnPropertyNames(le)),Z(le)&&(U.indexOf("message")>=0||U.indexOf("description")>=0))return p(le);if(U.length===0){if(I(le)){var Q=le.name?": "+le.name:"";return $.stylize("[Function"+Q+"]","special")}if(M(le))return $.stylize(RegExp.prototype.toString.call(le),"regexp");if(A(le))return $.stylize(Date.prototype.toString.call(le),"date");if(Z(le))return p(le)}var W="",H=!1,re=["{","}"];if(y(le)&&(H=!0,re=["[","]"]),I(le)){var he=le.name?": "+le.name:"";W=" [Function"+he+"]"}if(M(le)&&(W=" "+RegExp.prototype.toString.call(le)),A(le)&&(W=" "+Date.prototype.toUTCString.call(le)),Z(le)&&(W=" "+p(le)),U.length===0&&(!H||le.length==0))return re[0]+W+re[1];if(ie<0)return M(le)?$.stylize(RegExp.prototype.toString.call(le),"regexp"):$.stylize("[Object]","special");$.seen.push(le);var G;return H?G=j($,le,ie,F,U):G=U.map(function(ce){return g($,le,ie,F,ce,H)}),$.seen.pop(),v(G,W,re)}function f($,le){if(z(le))return $.stylize("undefined","undefined");if(T(le)){var ie="'"+JSON.stringify(le).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return $.stylize(ie,"string")}if(_(le))return $.stylize(""+le,"number");if(N(le))return $.stylize(""+le,"boolean");if(S(le))return $.stylize("null","null")}function p($){return"["+Error.prototype.toString.call($)+"]"}function j($,le,ie,oe,de){for(var U=[],F=0,Q=le.length;F<Q;++F)Y(le,String(F))?U.push(g($,le,ie,oe,String(F),!0)):U.push("");return de.forEach(function(W){W.match(/^\d+$/)||U.push(g($,le,ie,oe,W,!0))}),U}function g($,le,ie,oe,de,U){var F,Q,W;if(W=Object.getOwnPropertyDescriptor(le,de)||{value:le[de]},W.get?W.set?Q=$.stylize("[Getter/Setter]","special"):Q=$.stylize("[Getter]","special"):W.set&&(Q=$.stylize("[Setter]","special")),Y(oe,de)||(F="["+de+"]"),Q||($.seen.indexOf(W.value)<0?(S(ie)?Q=m($,W.value,null):Q=m($,W.value,ie-1),Q.indexOf(`
`)>-1&&(U?Q=Q.split(`
`).map(function(H){return"  "+H}).join(`
`).slice(2):Q=`
`+Q.split(`
`).map(function(H){return"   "+H}).join(`
`))):Q=$.stylize("[Circular]","special")),z(F)){if(U&&de.match(/^\d+$/))return Q;F=JSON.stringify(""+de),F.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(F=F.slice(1,-1),F=$.stylize(F,"name")):(F=F.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),F=$.stylize(F,"string"))}return F+": "+Q}function v($,le,ie){var oe=$.reduce(function(de,U){return U.indexOf(`
`)>=0,de+U.replace(/\u001b\[\d\d?m/g,"").length+1},0);return oe>60?ie[0]+(le===""?"":le+`
 `)+" "+$.join(`,
  `)+" "+ie[1]:ie[0]+le+" "+$.join(", ")+" "+ie[1]}s.types=bee();function y($){return Array.isArray($)}s.isArray=y;function N($){return typeof $=="boolean"}s.isBoolean=N;function S($){return $===null}s.isNull=S;function k($){return $==null}s.isNullOrUndefined=k;function _($){return typeof $=="number"}s.isNumber=_;function T($){return typeof $=="string"}s.isString=T;function E($){return typeof $=="symbol"}s.isSymbol=E;function z($){return $===void 0}s.isUndefined=z;function M($){return C($)&&R($)==="[object RegExp]"}s.isRegExp=M,s.types.isRegExp=M;function C($){return typeof $=="object"&&$!==null}s.isObject=C;function A($){return C($)&&R($)==="[object Date]"}s.isDate=A,s.types.isDate=A;function Z($){return C($)&&(R($)==="[object Error]"||$ instanceof Error)}s.isError=Z,s.types.isNativeError=Z;function I($){return typeof $=="function"}s.isFunction=I;function V($){return $===null||typeof $=="boolean"||typeof $=="number"||typeof $=="string"||typeof $=="symbol"||typeof $>"u"}s.isPrimitive=V,s.isBuffer=yee();function R($){return Object.prototype.toString.call($)}function q($){return $<10?"0"+$.toString(10):$.toString(10)}var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function se(){var $=new Date,le=[q($.getHours()),q($.getMinutes()),q($.getSeconds())].join(":");return[$.getDate(),J[$.getMonth()],le].join(" ")}s.log=function(){console.log("%s - %s",se(),s.format.apply(s,arguments))},s.inherits=Ml(),s._extend=function($,le){if(!le||!C(le))return $;for(var ie=Object.keys(le),oe=ie.length;oe--;)$[ie[oe]]=le[ie[oe]];return $};function Y($,le){return Object.prototype.hasOwnProperty.call($,le)}var ee=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;s.promisify=function(le){if(typeof le!="function")throw new TypeError('The "original" argument must be of type Function');if(ee&&le[ee]){var ie=le[ee];if(typeof ie!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(ie,ee,{value:ie,enumerable:!1,writable:!1,configurable:!0}),ie}function ie(){for(var oe,de,U=new Promise(function(W,H){oe=W,de=H}),F=[],Q=0;Q<arguments.length;Q++)F.push(arguments[Q]);F.push(function(W,H){W?de(W):oe(H)});try{le.apply(this,F)}catch(W){de(W)}return U}return Object.setPrototypeOf(ie,Object.getPrototypeOf(le)),ee&&Object.defineProperty(ie,ee,{value:ie,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(ie,t(le))},s.promisify.custom=ee;function te($,le){if(!$){var ie=new Error("Promise was rejected with a falsy value");ie.reason=$,$=ie}return le($)}function K($){if(typeof $!="function")throw new TypeError('The "original" argument must be of type Function');function le(){for(var ie=[],oe=0;oe<arguments.length;oe++)ie.push(arguments[oe]);var de=ie.pop();if(typeof de!="function")throw new TypeError("The last argument must be of type Function");var U=this,F=function(){return de.apply(U,arguments)};$.apply(this,ie).then(function(Q){ot.nextTick(F.bind(null,null,Q))},function(Q){ot.nextTick(te.bind(null,Q,F))})}return Object.setPrototypeOf(le,Object.getPrototypeOf($)),Object.defineProperties(le,t($)),le}s.callbackify=K})(tv)),tv}var Qv,oC;function vee(){if(oC)return Qv;oC=1;function s(p,j){var g=Object.keys(p);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(p);j&&(v=v.filter(function(y){return Object.getOwnPropertyDescriptor(p,y).enumerable})),g.push.apply(g,v)}return g}function t(p){for(var j=1;j<arguments.length;j++){var g=arguments[j]!=null?arguments[j]:{};j%2?s(Object(g),!0).forEach(function(v){r(p,v,g[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(g)):s(Object(g)).forEach(function(v){Object.defineProperty(p,v,Object.getOwnPropertyDescriptor(g,v))})}return p}function r(p,j,g){return j in p?Object.defineProperty(p,j,{value:g,enumerable:!0,configurable:!0,writable:!0}):p[j]=g,p}function a(p,j){if(!(p instanceof j))throw new TypeError("Cannot call a class as a function")}function n(p,j){for(var g=0;g<j.length;g++){var v=j[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(p,v.key,v)}}function i(p,j,g){return j&&n(p.prototype,j),p}var o=Fp(),c=o.Buffer,u=w8(),h=u.inspect,m=h&&h.custom||"inspect";function f(p,j,g){c.prototype.copy.call(p,j,g)}return Qv=(function(){function p(){a(this,p),this.head=null,this.tail=null,this.length=0}return i(p,[{key:"push",value:function(g){var v={data:g,next:null};this.length>0?this.tail.next=v:this.head=v,this.tail=v,++this.length}},{key:"unshift",value:function(g){var v={data:g,next:this.head};this.length===0&&(this.tail=v),this.head=v,++this.length}},{key:"shift",value:function(){if(this.length!==0){var g=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,g}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(g){if(this.length===0)return"";for(var v=this.head,y=""+v.data;v=v.next;)y+=g+v.data;return y}},{key:"concat",value:function(g){if(this.length===0)return c.alloc(0);for(var v=c.allocUnsafe(g>>>0),y=this.head,N=0;y;)f(y.data,v,N),N+=y.data.length,y=y.next;return v}},{key:"consume",value:function(g,v){var y;return g<this.head.data.length?(y=this.head.data.slice(0,g),this.head.data=this.head.data.slice(g)):g===this.head.data.length?y=this.shift():y=v?this._getString(g):this._getBuffer(g),y}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(g){var v=this.head,y=1,N=v.data;for(g-=N.length;v=v.next;){var S=v.data,k=g>S.length?S.length:g;if(k===S.length?N+=S:N+=S.slice(0,g),g-=k,g===0){k===S.length?(++y,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=S.slice(k));break}++y}return this.length-=y,N}},{key:"_getBuffer",value:function(g){var v=c.allocUnsafe(g),y=this.head,N=1;for(y.data.copy(v),g-=y.data.length;y=y.next;){var S=y.data,k=g>S.length?S.length:g;if(S.copy(v,v.length-g,0,k),g-=k,g===0){k===S.length?(++N,y.next?this.head=y.next:this.head=this.tail=null):(this.head=y,y.data=S.slice(k));break}++N}return this.length-=N,v}},{key:m,value:function(g,v){return h(this,t({},v,{depth:0,customInspect:!1}))}}]),p})(),Qv}var Jv,cC;function N8(){if(cC)return Jv;cC=1;function s(o,c){var u=this,h=this._readableState&&this._readableState.destroyed,m=this._writableState&&this._writableState.destroyed;return h||m?(c?c(o):o&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,ot.nextTick(n,this,o)):ot.nextTick(n,this,o)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(o||null,function(f){!c&&f?u._writableState?u._writableState.errorEmitted?ot.nextTick(r,u):(u._writableState.errorEmitted=!0,ot.nextTick(t,u,f)):ot.nextTick(t,u,f):c?(ot.nextTick(r,u),c(f)):ot.nextTick(r,u)}),this)}function t(o,c){n(o,c),r(o)}function r(o){o._writableState&&!o._writableState.emitClose||o._readableState&&!o._readableState.emitClose||o.emit("close")}function a(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function n(o,c){o.emit("error",c)}function i(o,c){var u=o._readableState,h=o._writableState;u&&u.autoDestroy||h&&h.autoDestroy?o.destroy(c):o.emit("error",c)}return Jv={destroy:s,undestroy:a,errorOrDestroy:i},Jv}var ej={},dC;function Id(){if(dC)return ej;dC=1;function s(c,u){c.prototype=Object.create(u.prototype),c.prototype.constructor=c,c.__proto__=u}var t={};function r(c,u,h){h||(h=Error);function m(p,j,g){return typeof u=="string"?u:u(p,j,g)}var f=(function(p){s(j,p);function j(g,v,y){return p.call(this,m(g,v,y))||this}return j})(h);f.prototype.name=h.name,f.prototype.code=c,t[c]=f}function a(c,u){if(Array.isArray(c)){var h=c.length;return c=c.map(function(m){return String(m)}),h>2?"one of ".concat(u," ").concat(c.slice(0,h-1).join(", "),", or ")+c[h-1]:h===2?"one of ".concat(u," ").concat(c[0]," or ").concat(c[1]):"of ".concat(u," ").concat(c[0])}else return"of ".concat(u," ").concat(String(c))}function n(c,u,h){return c.substr(0,u.length)===u}function i(c,u,h){return(h===void 0||h>c.length)&&(h=c.length),c.substring(h-u.length,h)===u}function o(c,u,h){return typeof h!="number"&&(h=0),h+u.length>c.length?!1:c.indexOf(u,h)!==-1}return r("ERR_INVALID_OPT_VALUE",function(c,u){return'The value "'+u+'" is invalid for option "'+c+'"'},TypeError),r("ERR_INVALID_ARG_TYPE",function(c,u,h){var m;typeof u=="string"&&n(u,"not ")?(m="must not be",u=u.replace(/^not /,"")):m="must be";var f;if(i(c," argument"))f="The ".concat(c," ").concat(m," ").concat(a(u,"type"));else{var p=o(c,".")?"property":"argument";f='The "'.concat(c,'" ').concat(p," ").concat(m," ").concat(a(u,"type"))}return f+=". Received type ".concat(typeof h),f},TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",function(c){return"The "+c+" method is not implemented"}),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",function(c){return"Cannot call "+c+" after a stream was destroyed"}),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",function(c){return"Unknown encoding: "+c},TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),ej.codes=t,ej}var tj,uC;function _8(){if(uC)return tj;uC=1;var s=Id().codes.ERR_INVALID_OPT_VALUE;function t(a,n,i){return a.highWaterMark!=null?a.highWaterMark:n?a[i]:null}function r(a,n,i,o){var c=t(n,o,i);if(c!=null){if(!(isFinite(c)&&Math.floor(c)===c)||c<0){var u=o?i:"highWaterMark";throw new s(u,c)}return Math.floor(c)}return a.objectMode?16:16*1024}return tj={getHighWaterMark:r},tj}var sj,hC;function jee(){if(hC)return sj;hC=1,sj=s;function s(r,a){if(t("noDeprecation"))return r;var n=!1;function i(){if(!n){if(t("throwDeprecation"))throw new Error(a);t("traceDeprecation")?console.trace(a):console.warn(a),n=!0}return r.apply(this,arguments)}return i}function t(r){try{if(!xn.localStorage)return!1}catch{return!1}var a=xn.localStorage[r];return a==null?!1:String(a).toLowerCase()==="true"}return sj}var rj,mC;function k8(){if(mC)return rj;mC=1,rj=M;function s(de){var U=this;this.next=null,this.entry=null,this.finish=function(){oe(U,de)}}var t;M.WritableState=E;var r={deprecate:jee()},a=h8(),n=Fp().Buffer,i=xn.Uint8Array||function(){};function o(de){return n.from(de)}function c(de){return n.isBuffer(de)||de instanceof i}var u=N8(),h=_8(),m=h.getHighWaterMark,f=Id().codes,p=f.ERR_INVALID_ARG_TYPE,j=f.ERR_METHOD_NOT_IMPLEMENTED,g=f.ERR_MULTIPLE_CALLBACK,v=f.ERR_STREAM_CANNOT_PIPE,y=f.ERR_STREAM_DESTROYED,N=f.ERR_STREAM_NULL_VALUES,S=f.ERR_STREAM_WRITE_AFTER_END,k=f.ERR_UNKNOWN_ENCODING,_=u.errorOrDestroy;Ml()(M,a);function T(){}function E(de,U,F){t=t||Sd(),de=de||{},typeof F!="boolean"&&(F=U instanceof t),this.objectMode=!!de.objectMode,F&&(this.objectMode=this.objectMode||!!de.writableObjectMode),this.highWaterMark=m(this,de,"writableHighWaterMark",F),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Q=de.decodeStrings===!1;this.decodeStrings=!Q,this.defaultEncoding=de.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(W){J(U,W)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=de.emitClose!==!1,this.autoDestroy=!!de.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}E.prototype.getBuffer=function(){for(var U=this.bufferedRequest,F=[];U;)F.push(U),U=U.next;return F},(function(){try{Object.defineProperty(E.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var z;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(z=Function.prototype[Symbol.hasInstance],Object.defineProperty(M,Symbol.hasInstance,{value:function(U){return z.call(this,U)?!0:this!==M?!1:U&&U._writableState instanceof E}})):z=function(U){return U instanceof this};function M(de){t=t||Sd();var U=this instanceof t;if(!U&&!z.call(M,this))return new M(de);this._writableState=new E(de,this,U),this.writable=!0,de&&(typeof de.write=="function"&&(this._write=de.write),typeof de.writev=="function"&&(this._writev=de.writev),typeof de.destroy=="function"&&(this._destroy=de.destroy),typeof de.final=="function"&&(this._final=de.final)),a.call(this)}M.prototype.pipe=function(){_(this,new v)};function C(de,U){var F=new S;_(de,F),ot.nextTick(U,F)}function A(de,U,F,Q){var W;return F===null?W=new N:typeof F!="string"&&!U.objectMode&&(W=new p("chunk",["string","Buffer"],F)),W?(_(de,W),ot.nextTick(Q,W),!1):!0}M.prototype.write=function(de,U,F){var Q=this._writableState,W=!1,H=!Q.objectMode&&c(de);return H&&!n.isBuffer(de)&&(de=o(de)),typeof U=="function"&&(F=U,U=null),H?U="buffer":U||(U=Q.defaultEncoding),typeof F!="function"&&(F=T),Q.ending?C(this,F):(H||A(this,Q,de,F))&&(Q.pendingcb++,W=I(this,Q,H,de,U,F)),W},M.prototype.cork=function(){this._writableState.corked++},M.prototype.uncork=function(){var de=this._writableState;de.corked&&(de.corked--,!de.writing&&!de.corked&&!de.bufferProcessing&&de.bufferedRequest&&ee(this,de))},M.prototype.setDefaultEncoding=function(U){if(typeof U=="string"&&(U=U.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((U+"").toLowerCase())>-1))throw new k(U);return this._writableState.defaultEncoding=U,this},Object.defineProperty(M.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Z(de,U,F){return!de.objectMode&&de.decodeStrings!==!1&&typeof U=="string"&&(U=n.from(U,F)),U}Object.defineProperty(M.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function I(de,U,F,Q,W,H){if(!F){var re=Z(U,Q,W);Q!==re&&(F=!0,W="buffer",Q=re)}var he=U.objectMode?1:Q.length;U.length+=he;var G=U.length<U.highWaterMark;if(G||(U.needDrain=!0),U.writing||U.corked){var ce=U.lastBufferedRequest;U.lastBufferedRequest={chunk:Q,encoding:W,isBuf:F,callback:H,next:null},ce?ce.next=U.lastBufferedRequest:U.bufferedRequest=U.lastBufferedRequest,U.bufferedRequestCount+=1}else V(de,U,!1,he,Q,W,H);return G}function V(de,U,F,Q,W,H,re){U.writelen=Q,U.writecb=re,U.writing=!0,U.sync=!0,U.destroyed?U.onwrite(new y("write")):F?de._writev(W,U.onwrite):de._write(W,H,U.onwrite),U.sync=!1}function R(de,U,F,Q,W){--U.pendingcb,F?(ot.nextTick(W,Q),ot.nextTick(le,de,U),de._writableState.errorEmitted=!0,_(de,Q)):(W(Q),de._writableState.errorEmitted=!0,_(de,Q),le(de,U))}function q(de){de.writing=!1,de.writecb=null,de.length-=de.writelen,de.writelen=0}function J(de,U){var F=de._writableState,Q=F.sync,W=F.writecb;if(typeof W!="function")throw new g;if(q(F),U)R(de,F,Q,U,W);else{var H=te(F)||de.destroyed;!H&&!F.corked&&!F.bufferProcessing&&F.bufferedRequest&&ee(de,F),Q?ot.nextTick(se,de,F,H,W):se(de,F,H,W)}}function se(de,U,F,Q){F||Y(de,U),U.pendingcb--,Q(),le(de,U)}function Y(de,U){U.length===0&&U.needDrain&&(U.needDrain=!1,de.emit("drain"))}function ee(de,U){U.bufferProcessing=!0;var F=U.bufferedRequest;if(de._writev&&F&&F.next){var Q=U.bufferedRequestCount,W=new Array(Q),H=U.corkedRequestsFree;H.entry=F;for(var re=0,he=!0;F;)W[re]=F,F.isBuf||(he=!1),F=F.next,re+=1;W.allBuffers=he,V(de,U,!0,U.length,W,"",H.finish),U.pendingcb++,U.lastBufferedRequest=null,H.next?(U.corkedRequestsFree=H.next,H.next=null):U.corkedRequestsFree=new s(U),U.bufferedRequestCount=0}else{for(;F;){var G=F.chunk,ce=F.encoding,X=F.callback,O=U.objectMode?1:G.length;if(V(de,U,!1,O,G,ce,X),F=F.next,U.bufferedRequestCount--,U.writing)break}F===null&&(U.lastBufferedRequest=null)}U.bufferedRequest=F,U.bufferProcessing=!1}M.prototype._write=function(de,U,F){F(new j("_write()"))},M.prototype._writev=null,M.prototype.end=function(de,U,F){var Q=this._writableState;return typeof de=="function"?(F=de,de=null,U=null):typeof U=="function"&&(F=U,U=null),de!=null&&this.write(de,U),Q.corked&&(Q.corked=1,this.uncork()),Q.ending||ie(this,Q,F),this},Object.defineProperty(M.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function te(de){return de.ending&&de.length===0&&de.bufferedRequest===null&&!de.finished&&!de.writing}function K(de,U){de._final(function(F){U.pendingcb--,F&&_(de,F),U.prefinished=!0,de.emit("prefinish"),le(de,U)})}function $(de,U){!U.prefinished&&!U.finalCalled&&(typeof de._final=="function"&&!U.destroyed?(U.pendingcb++,U.finalCalled=!0,ot.nextTick(K,de,U)):(U.prefinished=!0,de.emit("prefinish")))}function le(de,U){var F=te(U);if(F&&($(de,U),U.pendingcb===0&&(U.finished=!0,de.emit("finish"),U.autoDestroy))){var Q=de._readableState;(!Q||Q.autoDestroy&&Q.endEmitted)&&de.destroy()}return F}function ie(de,U,F){U.ending=!0,le(de,U),F&&(U.finished?ot.nextTick(F):de.once("finish",F)),U.ended=!0,de.writable=!1}function oe(de,U,F){var Q=de.entry;for(de.entry=null;Q;){var W=Q.callback;U.pendingcb--,W(F),Q=Q.next}U.corkedRequestsFree.next=de}return Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(U){this._writableState&&(this._writableState.destroyed=U)}}),M.prototype.destroy=u.destroy,M.prototype._undestroy=u.undestroy,M.prototype._destroy=function(de,U){U(de)},rj}var aj,xC;function Sd(){if(xC)return aj;xC=1;var s=Object.keys||function(h){var m=[];for(var f in h)m.push(f);return m};aj=o;var t=S8(),r=k8();Ml()(o,t);for(var a=s(r.prototype),n=0;n<a.length;n++){var i=a[n];o.prototype[i]||(o.prototype[i]=r.prototype[i])}function o(h){if(!(this instanceof o))return new o(h);t.call(this,h),r.call(this,h),this.allowHalfOpen=!0,h&&(h.readable===!1&&(this.readable=!1),h.writable===!1&&(this.writable=!1),h.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",c)))}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function c(){this._writableState.ended||ot.nextTick(u,this)}function u(h){h.end()}return Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(m){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=m,this._writableState.destroyed=m)}}),aj}var nj={},uf={exports:{}},fC;function wee(){return fC||(fC=1,(function(s,t){var r=Fp(),a=r.Buffer;function n(o,c){for(var u in o)c[u]=o[u]}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?s.exports=r:(n(r,t),t.Buffer=i);function i(o,c,u){return a(o,c,u)}n(a,i),i.from=function(o,c,u){if(typeof o=="number")throw new TypeError("Argument must not be a number");return a(o,c,u)},i.alloc=function(o,c,u){if(typeof o!="number")throw new TypeError("Argument must be a number");var h=a(o);return c!==void 0?typeof u=="string"?h.fill(c,u):h.fill(c):h.fill(0),h},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return a(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(o)}})(uf,uf.exports)),uf.exports}var pC;function Gw(){if(pC)return nj;pC=1;var s=wee().Buffer,t=s.isEncoding||function(N){switch(N=""+N,N&&N.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(N){if(!N)return"utf8";for(var S;;)switch(N){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return N;default:if(S)return;N=(""+N).toLowerCase(),S=!0}}function a(N){var S=r(N);if(typeof S!="string"&&(s.isEncoding===t||!t(N)))throw new Error("Unknown encoding: "+N);return S||N}nj.StringDecoder=n;function n(N){this.encoding=a(N);var S;switch(this.encoding){case"utf16le":this.text=f,this.end=p,S=4;break;case"utf8":this.fillLast=u,S=4;break;case"base64":this.text=j,this.end=g,S=3;break;default:this.write=v,this.end=y;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=s.allocUnsafe(S)}n.prototype.write=function(N){if(N.length===0)return"";var S,k;if(this.lastNeed){if(S=this.fillLast(N),S===void 0)return"";k=this.lastNeed,this.lastNeed=0}else k=0;return k<N.length?S?S+this.text(N,k):this.text(N,k):S||""},n.prototype.end=m,n.prototype.text=h,n.prototype.fillLast=function(N){if(this.lastNeed<=N.length)return N.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);N.copy(this.lastChar,this.lastTotal-this.lastNeed,0,N.length),this.lastNeed-=N.length};function i(N){return N<=127?0:N>>5===6?2:N>>4===14?3:N>>3===30?4:N>>6===2?-1:-2}function o(N,S,k){var _=S.length-1;if(_<k)return 0;var T=i(S[_]);return T>=0?(T>0&&(N.lastNeed=T-1),T):--_<k||T===-2?0:(T=i(S[_]),T>=0?(T>0&&(N.lastNeed=T-2),T):--_<k||T===-2?0:(T=i(S[_]),T>=0?(T>0&&(T===2?T=0:N.lastNeed=T-3),T):0))}function c(N,S,k){if((S[0]&192)!==128)return N.lastNeed=0,"";if(N.lastNeed>1&&S.length>1){if((S[1]&192)!==128)return N.lastNeed=1,"";if(N.lastNeed>2&&S.length>2&&(S[2]&192)!==128)return N.lastNeed=2,""}}function u(N){var S=this.lastTotal-this.lastNeed,k=c(this,N);if(k!==void 0)return k;if(this.lastNeed<=N.length)return N.copy(this.lastChar,S,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);N.copy(this.lastChar,S,0,N.length),this.lastNeed-=N.length}function h(N,S){var k=o(this,N,S);if(!this.lastNeed)return N.toString("utf8",S);this.lastTotal=k;var _=N.length-(k-this.lastNeed);return N.copy(this.lastChar,0,_),N.toString("utf8",S,_)}function m(N){var S=N&&N.length?this.write(N):"";return this.lastNeed?S+"":S}function f(N,S){if((N.length-S)%2===0){var k=N.toString("utf16le",S);if(k){var _=k.charCodeAt(k.length-1);if(_>=55296&&_<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=N[N.length-2],this.lastChar[1]=N[N.length-1],k.slice(0,-1)}return k}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=N[N.length-1],N.toString("utf16le",S,N.length-1)}function p(N){var S=N&&N.length?this.write(N):"";if(this.lastNeed){var k=this.lastTotal-this.lastNeed;return S+this.lastChar.toString("utf16le",0,k)}return S}function j(N,S){var k=(N.length-S)%3;return k===0?N.toString("base64",S):(this.lastNeed=3-k,this.lastTotal=3,k===1?this.lastChar[0]=N[N.length-1]:(this.lastChar[0]=N[N.length-2],this.lastChar[1]=N[N.length-1]),N.toString("base64",S,N.length-k))}function g(N){var S=N&&N.length?this.write(N):"";return this.lastNeed?S+this.lastChar.toString("base64",0,3-this.lastNeed):S}function v(N){return N.toString(this.encoding)}function y(N){return N&&N.length?this.write(N):""}return nj}var ij,gC;function L1(){if(gC)return ij;gC=1;var s=Id().codes.ERR_STREAM_PREMATURE_CLOSE;function t(i){var o=!1;return function(){if(!o){o=!0;for(var c=arguments.length,u=new Array(c),h=0;h<c;h++)u[h]=arguments[h];i.apply(this,u)}}}function r(){}function a(i){return i.setHeader&&typeof i.abort=="function"}function n(i,o,c){if(typeof o=="function")return n(i,null,o);o||(o={}),c=t(c||r);var u=o.readable||o.readable!==!1&&i.readable,h=o.writable||o.writable!==!1&&i.writable,m=function(){i.writable||p()},f=i._writableState&&i._writableState.finished,p=function(){h=!1,f=!0,u||c.call(i)},j=i._readableState&&i._readableState.endEmitted,g=function(){u=!1,j=!0,h||c.call(i)},v=function(k){c.call(i,k)},y=function(){var k;if(u&&!j)return(!i._readableState||!i._readableState.ended)&&(k=new s),c.call(i,k);if(h&&!f)return(!i._writableState||!i._writableState.ended)&&(k=new s),c.call(i,k)},N=function(){i.req.on("finish",p)};return a(i)?(i.on("complete",p),i.on("abort",y),i.req?N():i.on("request",N)):h&&!i._writableState&&(i.on("end",m),i.on("close",m)),i.on("end",g),i.on("finish",p),o.error!==!1&&i.on("error",v),i.on("close",y),function(){i.removeListener("complete",p),i.removeListener("abort",y),i.removeListener("request",N),i.req&&i.req.removeListener("finish",p),i.removeListener("end",m),i.removeListener("close",m),i.removeListener("finish",p),i.removeListener("end",g),i.removeListener("error",v),i.removeListener("close",y)}}return ij=n,ij}var lj,bC;function Nee(){if(bC)return lj;bC=1;var s;function t(N,S,k){return S in N?Object.defineProperty(N,S,{value:k,enumerable:!0,configurable:!0,writable:!0}):N[S]=k,N}var r=L1(),a=Symbol("lastResolve"),n=Symbol("lastReject"),i=Symbol("error"),o=Symbol("ended"),c=Symbol("lastPromise"),u=Symbol("handlePromise"),h=Symbol("stream");function m(N,S){return{value:N,done:S}}function f(N){var S=N[a];if(S!==null){var k=N[h].read();k!==null&&(N[c]=null,N[a]=null,N[n]=null,S(m(k,!1)))}}function p(N){ot.nextTick(f,N)}function j(N,S){return function(k,_){N.then(function(){if(S[o]){k(m(void 0,!0));return}S[u](k,_)},_)}}var g=Object.getPrototypeOf(function(){}),v=Object.setPrototypeOf((s={get stream(){return this[h]},next:function(){var S=this,k=this[i];if(k!==null)return Promise.reject(k);if(this[o])return Promise.resolve(m(void 0,!0));if(this[h].destroyed)return new Promise(function(z,M){ot.nextTick(function(){S[i]?M(S[i]):z(m(void 0,!0))})});var _=this[c],T;if(_)T=new Promise(j(_,this));else{var E=this[h].read();if(E!==null)return Promise.resolve(m(E,!1));T=new Promise(this[u])}return this[c]=T,T}},t(s,Symbol.asyncIterator,function(){return this}),t(s,"return",function(){var S=this;return new Promise(function(k,_){S[h].destroy(null,function(T){if(T){_(T);return}k(m(void 0,!0))})})}),s),g),y=function(S){var k,_=Object.create(v,(k={},t(k,h,{value:S,writable:!0}),t(k,a,{value:null,writable:!0}),t(k,n,{value:null,writable:!0}),t(k,i,{value:null,writable:!0}),t(k,o,{value:S._readableState.endEmitted,writable:!0}),t(k,u,{value:function(E,z){var M=_[h].read();M?(_[c]=null,_[a]=null,_[n]=null,E(m(M,!1))):(_[a]=E,_[n]=z)},writable:!0}),k));return _[c]=null,r(S,function(T){if(T&&T.code!=="ERR_STREAM_PREMATURE_CLOSE"){var E=_[n];E!==null&&(_[c]=null,_[a]=null,_[n]=null,E(T)),_[i]=T;return}var z=_[a];z!==null&&(_[c]=null,_[a]=null,_[n]=null,z(m(void 0,!0))),_[o]=!0}),S.on("readable",p.bind(null,_)),_};return lj=y,lj}var oj,yC;function _ee(){return yC||(yC=1,oj=function(){throw new Error("Readable.from is not available in the browser")}),oj}var cj,vC;function S8(){if(vC)return cj;vC=1,cj=C;var s;C.ReadableState=M,D1().EventEmitter;var t=function(re,he){return re.listeners(he).length},r=h8(),a=Fp().Buffer,n=xn.Uint8Array||function(){};function i(H){return a.from(H)}function o(H){return a.isBuffer(H)||H instanceof n}var c=w8(),u;c&&c.debuglog?u=c.debuglog("stream"):u=function(){};var h=vee(),m=N8(),f=_8(),p=f.getHighWaterMark,j=Id().codes,g=j.ERR_INVALID_ARG_TYPE,v=j.ERR_STREAM_PUSH_AFTER_EOF,y=j.ERR_METHOD_NOT_IMPLEMENTED,N=j.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,S,k,_;Ml()(C,r);var T=m.errorOrDestroy,E=["error","close","destroy","pause","resume"];function z(H,re,he){if(typeof H.prependListener=="function")return H.prependListener(re,he);!H._events||!H._events[re]?H.on(re,he):Array.isArray(H._events[re])?H._events[re].unshift(he):H._events[re]=[he,H._events[re]]}function M(H,re,he){s=s||Sd(),H=H||{},typeof he!="boolean"&&(he=re instanceof s),this.objectMode=!!H.objectMode,he&&(this.objectMode=this.objectMode||!!H.readableObjectMode),this.highWaterMark=p(this,H,"readableHighWaterMark",he),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=H.emitClose!==!1,this.autoDestroy=!!H.autoDestroy,this.destroyed=!1,this.defaultEncoding=H.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,H.encoding&&(S||(S=Gw().StringDecoder),this.decoder=new S(H.encoding),this.encoding=H.encoding)}function C(H){if(s=s||Sd(),!(this instanceof C))return new C(H);var re=this instanceof s;this._readableState=new M(H,this,re),this.readable=!0,H&&(typeof H.read=="function"&&(this._read=H.read),typeof H.destroy=="function"&&(this._destroy=H.destroy)),r.call(this)}Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(re){this._readableState&&(this._readableState.destroyed=re)}}),C.prototype.destroy=m.destroy,C.prototype._undestroy=m.undestroy,C.prototype._destroy=function(H,re){re(H)},C.prototype.push=function(H,re){var he=this._readableState,G;return he.objectMode?G=!0:typeof H=="string"&&(re=re||he.defaultEncoding,re!==he.encoding&&(H=a.from(H,re),re=""),G=!0),A(this,H,re,!1,G)},C.prototype.unshift=function(H){return A(this,H,null,!0,!1)};function A(H,re,he,G,ce){u("readableAddChunk",re);var X=H._readableState;if(re===null)X.reading=!1,J(H,X);else{var O;if(ce||(O=I(X,re)),O)T(H,O);else if(X.objectMode||re&&re.length>0)if(typeof re!="string"&&!X.objectMode&&Object.getPrototypeOf(re)!==a.prototype&&(re=i(re)),G)X.endEmitted?T(H,new N):Z(H,X,re,!0);else if(X.ended)T(H,new v);else{if(X.destroyed)return!1;X.reading=!1,X.decoder&&!he?(re=X.decoder.write(re),X.objectMode||re.length!==0?Z(H,X,re,!1):ee(H,X)):Z(H,X,re,!1)}else G||(X.reading=!1,ee(H,X))}return!X.ended&&(X.length<X.highWaterMark||X.length===0)}function Z(H,re,he,G){re.flowing&&re.length===0&&!re.sync?(re.awaitDrain=0,H.emit("data",he)):(re.length+=re.objectMode?1:he.length,G?re.buffer.unshift(he):re.buffer.push(he),re.needReadable&&se(H)),ee(H,re)}function I(H,re){var he;return!o(re)&&typeof re!="string"&&re!==void 0&&!H.objectMode&&(he=new g("chunk",["string","Buffer","Uint8Array"],re)),he}C.prototype.isPaused=function(){return this._readableState.flowing===!1},C.prototype.setEncoding=function(H){S||(S=Gw().StringDecoder);var re=new S(H);this._readableState.decoder=re,this._readableState.encoding=this._readableState.decoder.encoding;for(var he=this._readableState.buffer.head,G="";he!==null;)G+=re.write(he.data),he=he.next;return this._readableState.buffer.clear(),G!==""&&this._readableState.buffer.push(G),this._readableState.length=G.length,this};var V=1073741824;function R(H){return H>=V?H=V:(H--,H|=H>>>1,H|=H>>>2,H|=H>>>4,H|=H>>>8,H|=H>>>16,H++),H}function q(H,re){return H<=0||re.length===0&&re.ended?0:re.objectMode?1:H!==H?re.flowing&&re.length?re.buffer.head.data.length:re.length:(H>re.highWaterMark&&(re.highWaterMark=R(H)),H<=re.length?H:re.ended?re.length:(re.needReadable=!0,0))}C.prototype.read=function(H){u("read",H),H=parseInt(H,10);var re=this._readableState,he=H;if(H!==0&&(re.emittedReadable=!1),H===0&&re.needReadable&&((re.highWaterMark!==0?re.length>=re.highWaterMark:re.length>0)||re.ended))return u("read: emitReadable",re.length,re.ended),re.length===0&&re.ended?F(this):se(this),null;if(H=q(H,re),H===0&&re.ended)return re.length===0&&F(this),null;var G=re.needReadable;u("need readable",G),(re.length===0||re.length-H<re.highWaterMark)&&(G=!0,u("length less than watermark",G)),re.ended||re.reading?(G=!1,u("reading or ended",G)):G&&(u("do read"),re.reading=!0,re.sync=!0,re.length===0&&(re.needReadable=!0),this._read(re.highWaterMark),re.sync=!1,re.reading||(H=q(he,re)));var ce;return H>0?ce=U(H,re):ce=null,ce===null?(re.needReadable=re.length<=re.highWaterMark,H=0):(re.length-=H,re.awaitDrain=0),re.length===0&&(re.ended||(re.needReadable=!0),he!==H&&re.ended&&F(this)),ce!==null&&this.emit("data",ce),ce};function J(H,re){if(u("onEofChunk"),!re.ended){if(re.decoder){var he=re.decoder.end();he&&he.length&&(re.buffer.push(he),re.length+=re.objectMode?1:he.length)}re.ended=!0,re.sync?se(H):(re.needReadable=!1,re.emittedReadable||(re.emittedReadable=!0,Y(H)))}}function se(H){var re=H._readableState;u("emitReadable",re.needReadable,re.emittedReadable),re.needReadable=!1,re.emittedReadable||(u("emitReadable",re.flowing),re.emittedReadable=!0,ot.nextTick(Y,H))}function Y(H){var re=H._readableState;u("emitReadable_",re.destroyed,re.length,re.ended),!re.destroyed&&(re.length||re.ended)&&(H.emit("readable"),re.emittedReadable=!1),re.needReadable=!re.flowing&&!re.ended&&re.length<=re.highWaterMark,de(H)}function ee(H,re){re.readingMore||(re.readingMore=!0,ot.nextTick(te,H,re))}function te(H,re){for(;!re.reading&&!re.ended&&(re.length<re.highWaterMark||re.flowing&&re.length===0);){var he=re.length;if(u("maybeReadMore read 0"),H.read(0),he===re.length)break}re.readingMore=!1}C.prototype._read=function(H){T(this,new y("_read()"))},C.prototype.pipe=function(H,re){var he=this,G=this._readableState;switch(G.pipesCount){case 0:G.pipes=H;break;case 1:G.pipes=[G.pipes,H];break;default:G.pipes.push(H);break}G.pipesCount+=1,u("pipe count=%d opts=%j",G.pipesCount,re);var ce=(!re||re.end!==!1)&&H!==ot.stdout&&H!==ot.stderr,X=ce?L:Be;G.endEmitted?ot.nextTick(X):he.once("end",X),H.on("unpipe",O);function O(ze,We){u("onunpipe"),ze===he&&We&&We.hasUnpiped===!1&&(We.hasUnpiped=!0,me())}function L(){u("onend"),H.end()}var B=K(he);H.on("drain",B);var ne=!1;function me(){u("cleanup"),H.removeListener("close",Ce),H.removeListener("finish",Te),H.removeListener("drain",B),H.removeListener("error",_e),H.removeListener("unpipe",O),he.removeListener("end",L),he.removeListener("end",Be),he.removeListener("data",xe),ne=!0,G.awaitDrain&&(!H._writableState||H._writableState.needDrain)&&B()}he.on("data",xe);function xe(ze){u("ondata");var We=H.write(ze);u("dest.write",We),We===!1&&((G.pipesCount===1&&G.pipes===H||G.pipesCount>1&&W(G.pipes,H)!==-1)&&!ne&&(u("false write response, pause",G.awaitDrain),G.awaitDrain++),he.pause())}function _e(ze){u("onerror",ze),Be(),H.removeListener("error",_e),t(H,"error")===0&&T(H,ze)}z(H,"error",_e);function Ce(){H.removeListener("finish",Te),Be()}H.once("close",Ce);function Te(){u("onfinish"),H.removeListener("close",Ce),Be()}H.once("finish",Te);function Be(){u("unpipe"),he.unpipe(H)}return H.emit("pipe",he),G.flowing||(u("pipe resume"),he.resume()),H};function K(H){return function(){var he=H._readableState;u("pipeOnDrain",he.awaitDrain),he.awaitDrain&&he.awaitDrain--,he.awaitDrain===0&&t(H,"data")&&(he.flowing=!0,de(H))}}C.prototype.unpipe=function(H){var re=this._readableState,he={hasUnpiped:!1};if(re.pipesCount===0)return this;if(re.pipesCount===1)return H&&H!==re.pipes?this:(H||(H=re.pipes),re.pipes=null,re.pipesCount=0,re.flowing=!1,H&&H.emit("unpipe",this,he),this);if(!H){var G=re.pipes,ce=re.pipesCount;re.pipes=null,re.pipesCount=0,re.flowing=!1;for(var X=0;X<ce;X++)G[X].emit("unpipe",this,{hasUnpiped:!1});return this}var O=W(re.pipes,H);return O===-1?this:(re.pipes.splice(O,1),re.pipesCount-=1,re.pipesCount===1&&(re.pipes=re.pipes[0]),H.emit("unpipe",this,he),this)},C.prototype.on=function(H,re){var he=r.prototype.on.call(this,H,re),G=this._readableState;return H==="data"?(G.readableListening=this.listenerCount("readable")>0,G.flowing!==!1&&this.resume()):H==="readable"&&!G.endEmitted&&!G.readableListening&&(G.readableListening=G.needReadable=!0,G.flowing=!1,G.emittedReadable=!1,u("on readable",G.length,G.reading),G.length?se(this):G.reading||ot.nextTick(le,this)),he},C.prototype.addListener=C.prototype.on,C.prototype.removeListener=function(H,re){var he=r.prototype.removeListener.call(this,H,re);return H==="readable"&&ot.nextTick($,this),he},C.prototype.removeAllListeners=function(H){var re=r.prototype.removeAllListeners.apply(this,arguments);return(H==="readable"||H===void 0)&&ot.nextTick($,this),re};function $(H){var re=H._readableState;re.readableListening=H.listenerCount("readable")>0,re.resumeScheduled&&!re.paused?re.flowing=!0:H.listenerCount("data")>0&&H.resume()}function le(H){u("readable nexttick read 0"),H.read(0)}C.prototype.resume=function(){var H=this._readableState;return H.flowing||(u("resume"),H.flowing=!H.readableListening,ie(this,H)),H.paused=!1,this};function ie(H,re){re.resumeScheduled||(re.resumeScheduled=!0,ot.nextTick(oe,H,re))}function oe(H,re){u("resume",re.reading),re.reading||H.read(0),re.resumeScheduled=!1,H.emit("resume"),de(H),re.flowing&&!re.reading&&H.read(0)}C.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function de(H){var re=H._readableState;for(u("flow",re.flowing);re.flowing&&H.read()!==null;);}C.prototype.wrap=function(H){var re=this,he=this._readableState,G=!1;H.on("end",function(){if(u("wrapped end"),he.decoder&&!he.ended){var O=he.decoder.end();O&&O.length&&re.push(O)}re.push(null)}),H.on("data",function(O){if(u("wrapped data"),he.decoder&&(O=he.decoder.write(O)),!(he.objectMode&&O==null)&&!(!he.objectMode&&(!O||!O.length))){var L=re.push(O);L||(G=!0,H.pause())}});for(var ce in H)this[ce]===void 0&&typeof H[ce]=="function"&&(this[ce]=(function(L){return function(){return H[L].apply(H,arguments)}})(ce));for(var X=0;X<E.length;X++)H.on(E[X],this.emit.bind(this,E[X]));return this._read=function(O){u("wrapped _read",O),G&&(G=!1,H.resume())},this},typeof Symbol=="function"&&(C.prototype[Symbol.asyncIterator]=function(){return k===void 0&&(k=Nee()),k(this)}),Object.defineProperty(C.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(C.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(C.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(re){this._readableState&&(this._readableState.flowing=re)}}),C._fromList=U,Object.defineProperty(C.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function U(H,re){if(re.length===0)return null;var he;return re.objectMode?he=re.buffer.shift():!H||H>=re.length?(re.decoder?he=re.buffer.join(""):re.buffer.length===1?he=re.buffer.first():he=re.buffer.concat(re.length),re.buffer.clear()):he=re.buffer.consume(H,re.decoder),he}function F(H){var re=H._readableState;u("endReadable",re.endEmitted),re.endEmitted||(re.ended=!0,ot.nextTick(Q,re,H))}function Q(H,re){if(u("endReadableNT",H.endEmitted,H.length),!H.endEmitted&&H.length===0&&(H.endEmitted=!0,re.readable=!1,re.emit("end"),H.autoDestroy)){var he=re._writableState;(!he||he.autoDestroy&&he.finished)&&re.destroy()}}typeof Symbol=="function"&&(C.from=function(H,re){return _===void 0&&(_=_ee()),_(C,H,re)});function W(H,re){for(var he=0,G=H.length;he<G;he++)if(H[he]===re)return he;return-1}return cj}var dj,jC;function C8(){if(jC)return dj;jC=1,dj=c;var s=Id().codes,t=s.ERR_METHOD_NOT_IMPLEMENTED,r=s.ERR_MULTIPLE_CALLBACK,a=s.ERR_TRANSFORM_ALREADY_TRANSFORMING,n=s.ERR_TRANSFORM_WITH_LENGTH_0,i=Sd();Ml()(c,i);function o(m,f){var p=this._transformState;p.transforming=!1;var j=p.writecb;if(j===null)return this.emit("error",new r);p.writechunk=null,p.writecb=null,f!=null&&this.push(f),j(m);var g=this._readableState;g.reading=!1,(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function c(m){if(!(this instanceof c))return new c(m);i.call(this,m),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,m&&(typeof m.transform=="function"&&(this._transform=m.transform),typeof m.flush=="function"&&(this._flush=m.flush)),this.on("prefinish",u)}function u(){var m=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(f,p){h(m,f,p)}):h(this,null,null)}c.prototype.push=function(m,f){return this._transformState.needTransform=!1,i.prototype.push.call(this,m,f)},c.prototype._transform=function(m,f,p){p(new t("_transform()"))},c.prototype._write=function(m,f,p){var j=this._transformState;if(j.writecb=p,j.writechunk=m,j.writeencoding=f,!j.transforming){var g=this._readableState;(j.needTransform||g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}},c.prototype._read=function(m){var f=this._transformState;f.writechunk!==null&&!f.transforming?(f.transforming=!0,this._transform(f.writechunk,f.writeencoding,f.afterTransform)):f.needTransform=!0},c.prototype._destroy=function(m,f){i.prototype._destroy.call(this,m,function(p){f(p)})};function h(m,f,p){if(f)return m.emit("error",f);if(p!=null&&m.push(p),m._writableState.length)throw new n;if(m._transformState.transforming)throw new a;return m.push(null)}return dj}var uj,wC;function kee(){if(wC)return uj;wC=1,uj=t;var s=C8();Ml()(t,s);function t(r){if(!(this instanceof t))return new t(r);s.call(this,r)}return t.prototype._transform=function(r,a,n){n(null,r)},uj}var hj,NC;function See(){if(NC)return hj;NC=1;var s;function t(p){var j=!1;return function(){j||(j=!0,p.apply(void 0,arguments))}}var r=Id().codes,a=r.ERR_MISSING_ARGS,n=r.ERR_STREAM_DESTROYED;function i(p){if(p)throw p}function o(p){return p.setHeader&&typeof p.abort=="function"}function c(p,j,g,v){v=t(v);var y=!1;p.on("close",function(){y=!0}),s===void 0&&(s=L1()),s(p,{readable:j,writable:g},function(S){if(S)return v(S);y=!0,v()});var N=!1;return function(S){if(!y&&!N){if(N=!0,o(p))return p.abort();if(typeof p.destroy=="function")return p.destroy();v(S||new n("pipe"))}}}function u(p){p()}function h(p,j){return p.pipe(j)}function m(p){return!p.length||typeof p[p.length-1]!="function"?i:p.pop()}function f(){for(var p=arguments.length,j=new Array(p),g=0;g<p;g++)j[g]=arguments[g];var v=m(j);if(Array.isArray(j[0])&&(j=j[0]),j.length<2)throw new a("streams");var y,N=j.map(function(S,k){var _=k<j.length-1,T=k>0;return c(S,_,T,function(E){y||(y=E),E&&N.forEach(u),!_&&(N.forEach(u),v(y))})});return j.reduce(h)}return hj=f,hj}var mj,_C;function P1(){if(_C)return mj;_C=1,mj=r;var s=D1().EventEmitter,t=Ml();t(r,s),r.Readable=S8(),r.Writable=k8(),r.Duplex=Sd(),r.Transform=C8(),r.PassThrough=kee(),r.finished=L1(),r.pipeline=See(),r.Stream=r;function r(){s.call(this)}return r.prototype.pipe=function(a,n){var i=this;function o(j){a.writable&&a.write(j)===!1&&i.pause&&i.pause()}i.on("data",o);function c(){i.readable&&i.resume&&i.resume()}a.on("drain",c),!a._isStdio&&(!n||n.end!==!1)&&(i.on("end",h),i.on("close",m));var u=!1;function h(){u||(u=!0,a.end())}function m(){u||(u=!0,typeof a.destroy=="function"&&a.destroy())}function f(j){if(p(),s.listenerCount(this,"error")===0)throw j}i.on("error",f),a.on("error",f);function p(){i.removeListener("data",o),a.removeListener("drain",c),i.removeListener("end",h),i.removeListener("close",m),i.removeListener("error",f),a.removeListener("error",f),i.removeListener("end",p),i.removeListener("close",p),a.removeListener("close",p)}return i.on("end",p),i.on("close",p),a.on("close",p),a.emit("pipe",i),a},mj}var kC;function Cee(){return kC||(kC=1,(function(s){(function(t){t.parser=function(U,F){return new a(U,F)},t.SAXParser=a,t.SAXStream=m,t.createStream=h,t.MAX_BUFFER_LENGTH=64*1024;var r=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function a(U,F){if(!(this instanceof a))return new a(U,F);var Q=this;i(Q),Q.q=Q.c="",Q.bufferCheckPosition=t.MAX_BUFFER_LENGTH,Q.opt=F||{},Q.opt.lowercase=Q.opt.lowercase||Q.opt.lowercasetags,Q.looseCase=Q.opt.lowercase?"toLowerCase":"toUpperCase",Q.tags=[],Q.closed=Q.closedRoot=Q.sawRoot=!1,Q.tag=Q.error=null,Q.strict=!!U,Q.noscript=!!(U||Q.opt.noscript),Q.state=C.BEGIN,Q.strictEntities=Q.opt.strictEntities,Q.ENTITIES=Q.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),Q.attribList=[],Q.opt.xmlns&&(Q.ns=Object.create(v)),Q.trackPosition=Q.opt.position!==!1,Q.trackPosition&&(Q.position=Q.line=Q.column=0),Z(Q,"onready")}Object.create||(Object.create=function(U){function F(){}F.prototype=U;var Q=new F;return Q}),Object.keys||(Object.keys=function(U){var F=[];for(var Q in U)U.hasOwnProperty(Q)&&F.push(Q);return F});function n(U){for(var F=Math.max(t.MAX_BUFFER_LENGTH,10),Q=0,W=0,H=r.length;W<H;W++){var re=U[r[W]].length;if(re>F)switch(r[W]){case"textNode":V(U);break;case"cdata":I(U,"oncdata",U.cdata),U.cdata="";break;case"script":I(U,"onscript",U.script),U.script="";break;default:q(U,"Max buffer length exceeded: "+r[W])}Q=Math.max(Q,re)}var he=t.MAX_BUFFER_LENGTH-Q;U.bufferCheckPosition=he+U.position}function i(U){for(var F=0,Q=r.length;F<Q;F++)U[r[F]]=""}function o(U){V(U),U.cdata!==""&&(I(U,"oncdata",U.cdata),U.cdata=""),U.script!==""&&(I(U,"onscript",U.script),U.script="")}a.prototype={end:function(){J(this)},write:de,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var c;try{c=P1().Stream}catch{c=function(){}}var u=t.EVENTS.filter(function(U){return U!=="error"&&U!=="end"});function h(U,F){return new m(U,F)}function m(U,F){if(!(this instanceof m))return new m(U,F);c.apply(this),this._parser=new a(U,F),this.writable=!0,this.readable=!0;var Q=this;this._parser.onend=function(){Q.emit("end")},this._parser.onerror=function(W){Q.emit("error",W),Q._parser.error=null},this._decoder=null,u.forEach(function(W){Object.defineProperty(Q,"on"+W,{get:function(){return Q._parser["on"+W]},set:function(H){if(!H)return Q.removeAllListeners(W),Q._parser["on"+W]=H,H;Q.on(W,H)},enumerable:!0,configurable:!1})})}m.prototype=Object.create(c.prototype,{constructor:{value:m}}),m.prototype.write=function(U){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(U)){if(!this._decoder){var F=Gw().StringDecoder;this._decoder=new F("utf8")}U=this._decoder.write(U)}return this._parser.write(U.toString()),this.emit("data",U),!0},m.prototype.end=function(U){return U&&U.length&&this.write(U),this._parser.end(),!0},m.prototype.on=function(U,F){var Q=this;return!Q._parser["on"+U]&&u.indexOf(U)!==-1&&(Q._parser["on"+U]=function(){var W=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);W.splice(0,0,U),Q.emit.apply(Q,W)}),c.prototype.on.call(Q,U,F)};var f="[CDATA[",p="DOCTYPE",j="http://www.w3.org/XML/1998/namespace",g="http://www.w3.org/2000/xmlns/",v={xml:j,xmlns:g},y=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,N=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,S=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,k=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function _(U){return U===" "||U===`
`||U==="\r"||U==="	"}function T(U){return U==='"'||U==="'"}function E(U){return U===">"||_(U)}function z(U,F){return U.test(F)}function M(U,F){return!z(U,F)}var C=0;t.STATE={BEGIN:C++,BEGIN_WHITESPACE:C++,TEXT:C++,TEXT_ENTITY:C++,OPEN_WAKA:C++,SGML_DECL:C++,SGML_DECL_QUOTED:C++,DOCTYPE:C++,DOCTYPE_QUOTED:C++,DOCTYPE_DTD:C++,DOCTYPE_DTD_QUOTED:C++,COMMENT_STARTING:C++,COMMENT:C++,COMMENT_ENDING:C++,COMMENT_ENDED:C++,CDATA:C++,CDATA_ENDING:C++,CDATA_ENDING_2:C++,PROC_INST:C++,PROC_INST_BODY:C++,PROC_INST_ENDING:C++,OPEN_TAG:C++,OPEN_TAG_SLASH:C++,ATTRIB:C++,ATTRIB_NAME:C++,ATTRIB_NAME_SAW_WHITE:C++,ATTRIB_VALUE:C++,ATTRIB_VALUE_QUOTED:C++,ATTRIB_VALUE_CLOSED:C++,ATTRIB_VALUE_UNQUOTED:C++,ATTRIB_VALUE_ENTITY_Q:C++,ATTRIB_VALUE_ENTITY_U:C++,CLOSE_TAG:C++,CLOSE_TAG_SAW_WHITE:C++,SCRIPT:C++,SCRIPT_ENDING:C++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(U){var F=t.ENTITIES[U],Q=typeof F=="number"?String.fromCharCode(F):F;t.ENTITIES[U]=Q});for(var A in t.STATE)t.STATE[t.STATE[A]]=A;C=t.STATE;function Z(U,F,Q){U[F]&&U[F](Q)}function I(U,F,Q){U.textNode&&V(U),Z(U,F,Q)}function V(U){U.textNode=R(U.opt,U.textNode),U.textNode&&Z(U,"ontext",U.textNode),U.textNode=""}function R(U,F){return U.trim&&(F=F.trim()),U.normalize&&(F=F.replace(/\s+/g," ")),F}function q(U,F){return V(U),U.trackPosition&&(F+=`
Line: `+U.line+`
Column: `+U.column+`
Char: `+U.c),F=new Error(F),U.error=F,Z(U,"onerror",F),U}function J(U){return U.sawRoot&&!U.closedRoot&&se(U,"Unclosed root tag"),U.state!==C.BEGIN&&U.state!==C.BEGIN_WHITESPACE&&U.state!==C.TEXT&&q(U,"Unexpected end"),V(U),U.c="",U.closed=!0,Z(U,"onend"),a.call(U,U.strict,U.opt),U}function se(U,F){if(typeof U!="object"||!(U instanceof a))throw new Error("bad call to strictFail");U.strict&&q(U,F)}function Y(U){U.strict||(U.tagName=U.tagName[U.looseCase]());var F=U.tags[U.tags.length-1]||U,Q=U.tag={name:U.tagName,attributes:{}};U.opt.xmlns&&(Q.ns=F.ns),U.attribList.length=0,I(U,"onopentagstart",Q)}function ee(U,F){var Q=U.indexOf(":"),W=Q<0?["",U]:U.split(":"),H=W[0],re=W[1];return F&&U==="xmlns"&&(H="xmlns",re=""),{prefix:H,local:re}}function te(U){if(U.strict||(U.attribName=U.attribName[U.looseCase]()),U.attribList.indexOf(U.attribName)!==-1||U.tag.attributes.hasOwnProperty(U.attribName)){U.attribName=U.attribValue="";return}if(U.opt.xmlns){var F=ee(U.attribName,!0),Q=F.prefix,W=F.local;if(Q==="xmlns")if(W==="xml"&&U.attribValue!==j)se(U,"xml: prefix must be bound to "+j+`
Actual: `+U.attribValue);else if(W==="xmlns"&&U.attribValue!==g)se(U,"xmlns: prefix must be bound to "+g+`
Actual: `+U.attribValue);else{var H=U.tag,re=U.tags[U.tags.length-1]||U;H.ns===re.ns&&(H.ns=Object.create(re.ns)),H.ns[W]=U.attribValue}U.attribList.push([U.attribName,U.attribValue])}else U.tag.attributes[U.attribName]=U.attribValue,I(U,"onattribute",{name:U.attribName,value:U.attribValue});U.attribName=U.attribValue=""}function K(U,F){if(U.opt.xmlns){var Q=U.tag,W=ee(U.tagName);Q.prefix=W.prefix,Q.local=W.local,Q.uri=Q.ns[W.prefix]||"",Q.prefix&&!Q.uri&&(se(U,"Unbound namespace prefix: "+JSON.stringify(U.tagName)),Q.uri=W.prefix);var H=U.tags[U.tags.length-1]||U;Q.ns&&H.ns!==Q.ns&&Object.keys(Q.ns).forEach(function(xe){I(U,"onopennamespace",{prefix:xe,uri:Q.ns[xe]})});for(var re=0,he=U.attribList.length;re<he;re++){var G=U.attribList[re],ce=G[0],X=G[1],O=ee(ce,!0),L=O.prefix,B=O.local,ne=L===""?"":Q.ns[L]||"",me={name:ce,value:X,prefix:L,local:B,uri:ne};L&&L!=="xmlns"&&!ne&&(se(U,"Unbound namespace prefix: "+JSON.stringify(L)),me.uri=L),U.tag.attributes[ce]=me,I(U,"onattribute",me)}U.attribList.length=0}U.tag.isSelfClosing=!!F,U.sawRoot=!0,U.tags.push(U.tag),I(U,"onopentag",U.tag),F||(!U.noscript&&U.tagName.toLowerCase()==="script"?U.state=C.SCRIPT:U.state=C.TEXT,U.tag=null,U.tagName=""),U.attribName=U.attribValue="",U.attribList.length=0}function $(U){if(!U.tagName){se(U,"Weird empty close tag."),U.textNode+="</>",U.state=C.TEXT;return}if(U.script){if(U.tagName!=="script"){U.script+="</"+U.tagName+">",U.tagName="",U.state=C.SCRIPT;return}I(U,"onscript",U.script),U.script=""}var F=U.tags.length,Q=U.tagName;U.strict||(Q=Q[U.looseCase]());for(var W=Q;F--;){var H=U.tags[F];if(H.name!==W)se(U,"Unexpected close tag");else break}if(F<0){se(U,"Unmatched closing tag: "+U.tagName),U.textNode+="</"+U.tagName+">",U.state=C.TEXT;return}U.tagName=Q;for(var re=U.tags.length;re-- >F;){var he=U.tag=U.tags.pop();U.tagName=U.tag.name,I(U,"onclosetag",U.tagName);var G={};for(var ce in he.ns)G[ce]=he.ns[ce];var X=U.tags[U.tags.length-1]||U;U.opt.xmlns&&he.ns!==X.ns&&Object.keys(he.ns).forEach(function(O){var L=he.ns[O];I(U,"onclosenamespace",{prefix:O,uri:L})})}F===0&&(U.closedRoot=!0),U.tagName=U.attribValue=U.attribName="",U.attribList.length=0,U.state=C.TEXT}function le(U){var F=U.entity,Q=F.toLowerCase(),W,H="";return U.ENTITIES[F]?U.ENTITIES[F]:U.ENTITIES[Q]?U.ENTITIES[Q]:(F=Q,F.charAt(0)==="#"&&(F.charAt(1)==="x"?(F=F.slice(2),W=parseInt(F,16),H=W.toString(16)):(F=F.slice(1),W=parseInt(F,10),H=W.toString(10))),F=F.replace(/^0+/,""),isNaN(W)||H.toLowerCase()!==F?(se(U,"Invalid character entity"),"&"+U.entity+";"):String.fromCodePoint(W))}function ie(U,F){F==="<"?(U.state=C.OPEN_WAKA,U.startTagPosition=U.position):_(F)||(se(U,"Non-whitespace before first tag."),U.textNode=F,U.state=C.TEXT)}function oe(U,F){var Q="";return F<U.length&&(Q=U.charAt(F)),Q}function de(U){var F=this;if(this.error)throw this.error;if(F.closed)return q(F,"Cannot write after close. Assign an onready handler.");if(U===null)return J(F);typeof U=="object"&&(U=U.toString());for(var Q=0,W="";W=oe(U,Q++),F.c=W,!!W;)switch(F.trackPosition&&(F.position++,W===`
`?(F.line++,F.column=0):F.column++),F.state){case C.BEGIN:if(F.state=C.BEGIN_WHITESPACE,W==="\uFEFF")continue;ie(F,W);continue;case C.BEGIN_WHITESPACE:ie(F,W);continue;case C.TEXT:if(F.sawRoot&&!F.closedRoot){for(var H=Q-1;W&&W!=="<"&&W!=="&";)W=oe(U,Q++),W&&F.trackPosition&&(F.position++,W===`
`?(F.line++,F.column=0):F.column++);F.textNode+=U.substring(H,Q-1)}W==="<"&&!(F.sawRoot&&F.closedRoot&&!F.strict)?(F.state=C.OPEN_WAKA,F.startTagPosition=F.position):(!_(W)&&(!F.sawRoot||F.closedRoot)&&se(F,"Text data outside of root node."),W==="&"?F.state=C.TEXT_ENTITY:F.textNode+=W);continue;case C.SCRIPT:W==="<"?F.state=C.SCRIPT_ENDING:F.script+=W;continue;case C.SCRIPT_ENDING:W==="/"?F.state=C.CLOSE_TAG:(F.script+="<"+W,F.state=C.SCRIPT);continue;case C.OPEN_WAKA:if(W==="!")F.state=C.SGML_DECL,F.sgmlDecl="";else if(!_(W))if(z(y,W))F.state=C.OPEN_TAG,F.tagName=W;else if(W==="/")F.state=C.CLOSE_TAG,F.tagName="";else if(W==="?")F.state=C.PROC_INST,F.procInstName=F.procInstBody="";else{if(se(F,"Unencoded <"),F.startTagPosition+1<F.position){var re=F.position-F.startTagPosition;W=new Array(re).join(" ")+W}F.textNode+="<"+W,F.state=C.TEXT}continue;case C.SGML_DECL:(F.sgmlDecl+W).toUpperCase()===f?(I(F,"onopencdata"),F.state=C.CDATA,F.sgmlDecl="",F.cdata=""):F.sgmlDecl+W==="--"?(F.state=C.COMMENT,F.comment="",F.sgmlDecl=""):(F.sgmlDecl+W).toUpperCase()===p?(F.state=C.DOCTYPE,(F.doctype||F.sawRoot)&&se(F,"Inappropriately located doctype declaration"),F.doctype="",F.sgmlDecl=""):W===">"?(I(F,"onsgmldeclaration",F.sgmlDecl),F.sgmlDecl="",F.state=C.TEXT):(T(W)&&(F.state=C.SGML_DECL_QUOTED),F.sgmlDecl+=W);continue;case C.SGML_DECL_QUOTED:W===F.q&&(F.state=C.SGML_DECL,F.q=""),F.sgmlDecl+=W;continue;case C.DOCTYPE:W===">"?(F.state=C.TEXT,I(F,"ondoctype",F.doctype),F.doctype=!0):(F.doctype+=W,W==="["?F.state=C.DOCTYPE_DTD:T(W)&&(F.state=C.DOCTYPE_QUOTED,F.q=W));continue;case C.DOCTYPE_QUOTED:F.doctype+=W,W===F.q&&(F.q="",F.state=C.DOCTYPE);continue;case C.DOCTYPE_DTD:F.doctype+=W,W==="]"?F.state=C.DOCTYPE:T(W)&&(F.state=C.DOCTYPE_DTD_QUOTED,F.q=W);continue;case C.DOCTYPE_DTD_QUOTED:F.doctype+=W,W===F.q&&(F.state=C.DOCTYPE_DTD,F.q="");continue;case C.COMMENT:W==="-"?F.state=C.COMMENT_ENDING:F.comment+=W;continue;case C.COMMENT_ENDING:W==="-"?(F.state=C.COMMENT_ENDED,F.comment=R(F.opt,F.comment),F.comment&&I(F,"oncomment",F.comment),F.comment=""):(F.comment+="-"+W,F.state=C.COMMENT);continue;case C.COMMENT_ENDED:W!==">"?(se(F,"Malformed comment"),F.comment+="--"+W,F.state=C.COMMENT):F.state=C.TEXT;continue;case C.CDATA:W==="]"?F.state=C.CDATA_ENDING:F.cdata+=W;continue;case C.CDATA_ENDING:W==="]"?F.state=C.CDATA_ENDING_2:(F.cdata+="]"+W,F.state=C.CDATA);continue;case C.CDATA_ENDING_2:W===">"?(F.cdata&&I(F,"oncdata",F.cdata),I(F,"onclosecdata"),F.cdata="",F.state=C.TEXT):W==="]"?F.cdata+="]":(F.cdata+="]]"+W,F.state=C.CDATA);continue;case C.PROC_INST:W==="?"?F.state=C.PROC_INST_ENDING:_(W)?F.state=C.PROC_INST_BODY:F.procInstName+=W;continue;case C.PROC_INST_BODY:if(!F.procInstBody&&_(W))continue;W==="?"?F.state=C.PROC_INST_ENDING:F.procInstBody+=W;continue;case C.PROC_INST_ENDING:W===">"?(I(F,"onprocessinginstruction",{name:F.procInstName,body:F.procInstBody}),F.procInstName=F.procInstBody="",F.state=C.TEXT):(F.procInstBody+="?"+W,F.state=C.PROC_INST_BODY);continue;case C.OPEN_TAG:z(N,W)?F.tagName+=W:(Y(F),W===">"?K(F):W==="/"?F.state=C.OPEN_TAG_SLASH:(_(W)||se(F,"Invalid character in tag name"),F.state=C.ATTRIB));continue;case C.OPEN_TAG_SLASH:W===">"?(K(F,!0),$(F)):(se(F,"Forward-slash in opening tag not followed by >"),F.state=C.ATTRIB);continue;case C.ATTRIB:if(_(W))continue;W===">"?K(F):W==="/"?F.state=C.OPEN_TAG_SLASH:z(y,W)?(F.attribName=W,F.attribValue="",F.state=C.ATTRIB_NAME):se(F,"Invalid attribute name");continue;case C.ATTRIB_NAME:W==="="?F.state=C.ATTRIB_VALUE:W===">"?(se(F,"Attribute without value"),F.attribValue=F.attribName,te(F),K(F)):_(W)?F.state=C.ATTRIB_NAME_SAW_WHITE:z(N,W)?F.attribName+=W:se(F,"Invalid attribute name");continue;case C.ATTRIB_NAME_SAW_WHITE:if(W==="=")F.state=C.ATTRIB_VALUE;else{if(_(W))continue;se(F,"Attribute without value"),F.tag.attributes[F.attribName]="",F.attribValue="",I(F,"onattribute",{name:F.attribName,value:""}),F.attribName="",W===">"?K(F):z(y,W)?(F.attribName=W,F.state=C.ATTRIB_NAME):(se(F,"Invalid attribute name"),F.state=C.ATTRIB)}continue;case C.ATTRIB_VALUE:if(_(W))continue;T(W)?(F.q=W,F.state=C.ATTRIB_VALUE_QUOTED):(se(F,"Unquoted attribute value"),F.state=C.ATTRIB_VALUE_UNQUOTED,F.attribValue=W);continue;case C.ATTRIB_VALUE_QUOTED:if(W!==F.q){W==="&"?F.state=C.ATTRIB_VALUE_ENTITY_Q:F.attribValue+=W;continue}te(F),F.q="",F.state=C.ATTRIB_VALUE_CLOSED;continue;case C.ATTRIB_VALUE_CLOSED:_(W)?F.state=C.ATTRIB:W===">"?K(F):W==="/"?F.state=C.OPEN_TAG_SLASH:z(y,W)?(se(F,"No whitespace between attributes"),F.attribName=W,F.attribValue="",F.state=C.ATTRIB_NAME):se(F,"Invalid attribute name");continue;case C.ATTRIB_VALUE_UNQUOTED:if(!E(W)){W==="&"?F.state=C.ATTRIB_VALUE_ENTITY_U:F.attribValue+=W;continue}te(F),W===">"?K(F):F.state=C.ATTRIB;continue;case C.CLOSE_TAG:if(F.tagName)W===">"?$(F):z(N,W)?F.tagName+=W:F.script?(F.script+="</"+F.tagName,F.tagName="",F.state=C.SCRIPT):(_(W)||se(F,"Invalid tagname in closing tag"),F.state=C.CLOSE_TAG_SAW_WHITE);else{if(_(W))continue;M(y,W)?F.script?(F.script+="</"+W,F.state=C.SCRIPT):se(F,"Invalid tagname in closing tag."):F.tagName=W}continue;case C.CLOSE_TAG_SAW_WHITE:if(_(W))continue;W===">"?$(F):se(F,"Invalid characters in closing tag");continue;case C.TEXT_ENTITY:case C.ATTRIB_VALUE_ENTITY_Q:case C.ATTRIB_VALUE_ENTITY_U:var he,G;switch(F.state){case C.TEXT_ENTITY:he=C.TEXT,G="textNode";break;case C.ATTRIB_VALUE_ENTITY_Q:he=C.ATTRIB_VALUE_QUOTED,G="attribValue";break;case C.ATTRIB_VALUE_ENTITY_U:he=C.ATTRIB_VALUE_UNQUOTED,G="attribValue";break}W===";"?(F[G]+=le(F),F.entity="",F.state=he):z(F.entity.length?k:S,W)?F.entity+=W:(se(F,"Invalid character in entity name"),F[G]+="&"+F.entity+W,F.entity="",F.state=he);continue;default:throw new Error(F,"Unknown state: "+F.state)}return F.position>=F.bufferCheckPosition&&n(F),F}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||(function(){var U=String.fromCharCode,F=Math.floor,Q=function(){var W=16384,H=[],re,he,G=-1,ce=arguments.length;if(!ce)return"";for(var X="";++G<ce;){var O=Number(arguments[G]);if(!isFinite(O)||O<0||O>1114111||F(O)!==O)throw RangeError("Invalid code point: "+O);O<=65535?H.push(O):(O-=65536,re=(O>>10)+55296,he=O%1024+56320,H.push(re,he)),(G+1===ce||H.length>W)&&(X+=U.apply(null,H),H.length=0)}return X};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:Q,configurable:!0,writable:!0}):String.fromCodePoint=Q})()})(s)})(Qy)),Qy}var xj,SC;function B1(){return SC||(SC=1,xj={isArray:function(s){return Array.isArray?Array.isArray(s):Object.prototype.toString.call(s)==="[object Array]"}}),xj}var fj,CC;function F1(){if(CC)return fj;CC=1;var s=B1().isArray;return fj={copyOptions:function(t){var r,a={};for(r in t)t.hasOwnProperty(r)&&(a[r]=t[r]);return a},ensureFlagExists:function(t,r){(!(t in r)||typeof r[t]!="boolean")&&(r[t]=!1)},ensureSpacesExists:function(t){(!("spaces"in t)||typeof t.spaces!="number"&&typeof t.spaces!="string")&&(t.spaces=0)},ensureAlwaysArrayExists:function(t){(!("alwaysArray"in t)||typeof t.alwaysArray!="boolean"&&!s(t.alwaysArray))&&(t.alwaysArray=!1)},ensureKeyExists:function(t,r){(!(t+"Key"in r)||typeof r[t+"Key"]!="string")&&(r[t+"Key"]=r.compact?"_"+t:t)},checkFnExists:function(t,r){return t+"Fn"in r}},fj}var pj,TC;function T8(){if(TC)return pj;TC=1;var s=Cee(),t=F1(),r=B1().isArray,a,n;function i(N){return a=t.copyOptions(N),t.ensureFlagExists("ignoreDeclaration",a),t.ensureFlagExists("ignoreInstruction",a),t.ensureFlagExists("ignoreAttributes",a),t.ensureFlagExists("ignoreText",a),t.ensureFlagExists("ignoreComment",a),t.ensureFlagExists("ignoreCdata",a),t.ensureFlagExists("ignoreDoctype",a),t.ensureFlagExists("compact",a),t.ensureFlagExists("alwaysChildren",a),t.ensureFlagExists("addParent",a),t.ensureFlagExists("trim",a),t.ensureFlagExists("nativeType",a),t.ensureFlagExists("nativeTypeAttributes",a),t.ensureFlagExists("sanitize",a),t.ensureFlagExists("instructionHasAttributes",a),t.ensureFlagExists("captureSpacesBetweenElements",a),t.ensureAlwaysArrayExists(a),t.ensureKeyExists("declaration",a),t.ensureKeyExists("instruction",a),t.ensureKeyExists("attributes",a),t.ensureKeyExists("text",a),t.ensureKeyExists("comment",a),t.ensureKeyExists("cdata",a),t.ensureKeyExists("doctype",a),t.ensureKeyExists("type",a),t.ensureKeyExists("name",a),t.ensureKeyExists("elements",a),t.ensureKeyExists("parent",a),t.checkFnExists("doctype",a),t.checkFnExists("instruction",a),t.checkFnExists("cdata",a),t.checkFnExists("comment",a),t.checkFnExists("text",a),t.checkFnExists("instructionName",a),t.checkFnExists("elementName",a),t.checkFnExists("attributeName",a),t.checkFnExists("attributeValue",a),t.checkFnExists("attributes",a),a}function o(N){var S=Number(N);if(!isNaN(S))return S;var k=N.toLowerCase();return k==="true"?!0:k==="false"?!1:N}function c(N,S){var k;if(a.compact){if(!n[a[N+"Key"]]&&(r(a.alwaysArray)?a.alwaysArray.indexOf(a[N+"Key"])!==-1:a.alwaysArray)&&(n[a[N+"Key"]]=[]),n[a[N+"Key"]]&&!r(n[a[N+"Key"]])&&(n[a[N+"Key"]]=[n[a[N+"Key"]]]),N+"Fn"in a&&typeof S=="string"&&(S=a[N+"Fn"](S,n)),N==="instruction"&&("instructionFn"in a||"instructionNameFn"in a)){for(k in S)if(S.hasOwnProperty(k))if("instructionFn"in a)S[k]=a.instructionFn(S[k],k,n);else{var _=S[k];delete S[k],S[a.instructionNameFn(k,_,n)]=_}}r(n[a[N+"Key"]])?n[a[N+"Key"]].push(S):n[a[N+"Key"]]=S}else{n[a.elementsKey]||(n[a.elementsKey]=[]);var T={};if(T[a.typeKey]=N,N==="instruction"){for(k in S)if(S.hasOwnProperty(k))break;T[a.nameKey]="instructionNameFn"in a?a.instructionNameFn(k,S,n):k,a.instructionHasAttributes?(T[a.attributesKey]=S[k][a.attributesKey],"instructionFn"in a&&(T[a.attributesKey]=a.instructionFn(T[a.attributesKey],k,n))):("instructionFn"in a&&(S[k]=a.instructionFn(S[k],k,n)),T[a.instructionKey]=S[k])}else N+"Fn"in a&&(S=a[N+"Fn"](S,n)),T[a[N+"Key"]]=S;a.addParent&&(T[a.parentKey]=n),n[a.elementsKey].push(T)}}function u(N){if("attributesFn"in a&&N&&(N=a.attributesFn(N,n)),(a.trim||"attributeValueFn"in a||"attributeNameFn"in a||a.nativeTypeAttributes)&&N){var S;for(S in N)if(N.hasOwnProperty(S)&&(a.trim&&(N[S]=N[S].trim()),a.nativeTypeAttributes&&(N[S]=o(N[S])),"attributeValueFn"in a&&(N[S]=a.attributeValueFn(N[S],S,n)),"attributeNameFn"in a)){var k=N[S];delete N[S],N[a.attributeNameFn(S,N[S],n)]=k}}return N}function h(N){var S={};if(N.body&&(N.name.toLowerCase()==="xml"||a.instructionHasAttributes)){for(var k=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g,_;(_=k.exec(N.body))!==null;)S[_[1]]=_[2]||_[3]||_[4];S=u(S)}if(N.name.toLowerCase()==="xml"){if(a.ignoreDeclaration)return;n[a.declarationKey]={},Object.keys(S).length&&(n[a.declarationKey][a.attributesKey]=S),a.addParent&&(n[a.declarationKey][a.parentKey]=n)}else{if(a.ignoreInstruction)return;a.trim&&(N.body=N.body.trim());var T={};a.instructionHasAttributes&&Object.keys(S).length?(T[N.name]={},T[N.name][a.attributesKey]=S):T[N.name]=N.body,c("instruction",T)}}function m(N,S){var k;if(typeof N=="object"&&(S=N.attributes,N=N.name),S=u(S),"elementNameFn"in a&&(N=a.elementNameFn(N,n)),a.compact){if(k={},!a.ignoreAttributes&&S&&Object.keys(S).length){k[a.attributesKey]={};var _;for(_ in S)S.hasOwnProperty(_)&&(k[a.attributesKey][_]=S[_])}!(N in n)&&(r(a.alwaysArray)?a.alwaysArray.indexOf(N)!==-1:a.alwaysArray)&&(n[N]=[]),n[N]&&!r(n[N])&&(n[N]=[n[N]]),r(n[N])?n[N].push(k):n[N]=k}else n[a.elementsKey]||(n[a.elementsKey]=[]),k={},k[a.typeKey]="element",k[a.nameKey]=N,!a.ignoreAttributes&&S&&Object.keys(S).length&&(k[a.attributesKey]=S),a.alwaysChildren&&(k[a.elementsKey]=[]),n[a.elementsKey].push(k);k[a.parentKey]=n,n=k}function f(N){a.ignoreText||!N.trim()&&!a.captureSpacesBetweenElements||(a.trim&&(N=N.trim()),a.nativeType&&(N=o(N)),a.sanitize&&(N=N.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),c("text",N))}function p(N){a.ignoreComment||(a.trim&&(N=N.trim()),c("comment",N))}function j(N){var S=n[a.parentKey];a.addParent||delete n[a.parentKey],n=S}function g(N){a.ignoreCdata||(a.trim&&(N=N.trim()),c("cdata",N))}function v(N){a.ignoreDoctype||(N=N.replace(/^ /,""),a.trim&&(N=N.trim()),c("doctype",N))}function y(N){N.note=N}return pj=function(N,S){var k=s.parser(!0,{}),_={};if(n=_,a=i(S),k.opt={strictEntities:!0},k.onopentag=m,k.ontext=f,k.oncomment=p,k.onclosetag=j,k.onerror=y,k.oncdata=g,k.ondoctype=v,k.onprocessinginstruction=h,k.write(N).close(),_[a.elementsKey]){var T=_[a.elementsKey];delete _[a.elementsKey],_[a.elementsKey]=T,delete _.text}return _},pj}var gj,EC;function Tee(){if(EC)return gj;EC=1;var s=F1(),t=T8();function r(a){var n=s.copyOptions(a);return s.ensureSpacesExists(n),n}return gj=function(a,n){var i,o,c,u;return i=r(n),o=t(a,i),u="compact"in i&&i.compact?"_parent":"parent","addParent"in i&&i.addParent?c=JSON.stringify(o,function(h,m){return h===u?"_":m},i.spaces):c=JSON.stringify(o,null,i.spaces),c.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},gj}var bj,AC;function E8(){if(AC)return bj;AC=1;var s=F1(),t=B1().isArray,r,a;function n(k){var _=s.copyOptions(k);return s.ensureFlagExists("ignoreDeclaration",_),s.ensureFlagExists("ignoreInstruction",_),s.ensureFlagExists("ignoreAttributes",_),s.ensureFlagExists("ignoreText",_),s.ensureFlagExists("ignoreComment",_),s.ensureFlagExists("ignoreCdata",_),s.ensureFlagExists("ignoreDoctype",_),s.ensureFlagExists("compact",_),s.ensureFlagExists("indentText",_),s.ensureFlagExists("indentCdata",_),s.ensureFlagExists("indentAttributes",_),s.ensureFlagExists("indentInstruction",_),s.ensureFlagExists("fullTagEmptyElement",_),s.ensureFlagExists("noQuotesForNativeAttributes",_),s.ensureSpacesExists(_),typeof _.spaces=="number"&&(_.spaces=Array(_.spaces+1).join(" ")),s.ensureKeyExists("declaration",_),s.ensureKeyExists("instruction",_),s.ensureKeyExists("attributes",_),s.ensureKeyExists("text",_),s.ensureKeyExists("comment",_),s.ensureKeyExists("cdata",_),s.ensureKeyExists("doctype",_),s.ensureKeyExists("type",_),s.ensureKeyExists("name",_),s.ensureKeyExists("elements",_),s.checkFnExists("doctype",_),s.checkFnExists("instruction",_),s.checkFnExists("cdata",_),s.checkFnExists("comment",_),s.checkFnExists("text",_),s.checkFnExists("instructionName",_),s.checkFnExists("elementName",_),s.checkFnExists("attributeName",_),s.checkFnExists("attributeValue",_),s.checkFnExists("attributes",_),s.checkFnExists("fullTagEmptyElement",_),_}function i(k,_,T){return(!T&&k.spaces?`
`:"")+Array(_+1).join(k.spaces)}function o(k,_,T){if(_.ignoreAttributes)return"";"attributesFn"in _&&(k=_.attributesFn(k,a,r));var E,z,M,C,A=[];for(E in k)k.hasOwnProperty(E)&&k[E]!==null&&k[E]!==void 0&&(C=_.noQuotesForNativeAttributes&&typeof k[E]!="string"?"":'"',z=""+k[E],z=z.replace(/"/g,"&quot;"),M="attributeNameFn"in _?_.attributeNameFn(E,z,a,r):E,A.push(_.spaces&&_.indentAttributes?i(_,T+1,!1):" "),A.push(M+"="+C+("attributeValueFn"in _?_.attributeValueFn(z,E,a,r):z)+C));return k&&Object.keys(k).length&&_.spaces&&_.indentAttributes&&A.push(i(_,T,!1)),A.join("")}function c(k,_,T){return r=k,a="xml",_.ignoreDeclaration?"":"<?xml"+o(k[_.attributesKey],_,T)+"?>"}function u(k,_,T){if(_.ignoreInstruction)return"";var E;for(E in k)if(k.hasOwnProperty(E))break;var z="instructionNameFn"in _?_.instructionNameFn(E,k[E],a,r):E;if(typeof k[E]=="object")return r=k,a=z,"<?"+z+o(k[E][_.attributesKey],_,T)+"?>";var M=k[E]?k[E]:"";return"instructionFn"in _&&(M=_.instructionFn(M,E,a,r)),"<?"+z+(M?" "+M:"")+"?>"}function h(k,_){return _.ignoreComment?"":"<!--"+("commentFn"in _?_.commentFn(k,a,r):k)+"-->"}function m(k,_){return _.ignoreCdata?"":"<![CDATA["+("cdataFn"in _?_.cdataFn(k,a,r):k.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function f(k,_){return _.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in _?_.doctypeFn(k,a,r):k)+">"}function p(k,_){return _.ignoreText?"":(k=""+k,k=k.replace(/&amp;/g,"&"),k=k.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in _?_.textFn(k,a,r):k)}function j(k,_){var T;if(k.elements&&k.elements.length)for(T=0;T<k.elements.length;++T)switch(k.elements[T][_.typeKey]){case"text":if(_.indentText)return!0;break;case"cdata":if(_.indentCdata)return!0;break;case"instruction":if(_.indentInstruction)return!0;break;case"doctype":case"comment":case"element":return!0;default:return!0}return!1}function g(k,_,T){r=k,a=k.name;var E=[],z="elementNameFn"in _?_.elementNameFn(k.name,k):k.name;E.push("<"+z),k[_.attributesKey]&&E.push(o(k[_.attributesKey],_,T));var M=k[_.elementsKey]&&k[_.elementsKey].length||k[_.attributesKey]&&k[_.attributesKey]["xml:space"]==="preserve";return M||("fullTagEmptyElementFn"in _?M=_.fullTagEmptyElementFn(k.name,k):M=_.fullTagEmptyElement),M?(E.push(">"),k[_.elementsKey]&&k[_.elementsKey].length&&(E.push(v(k[_.elementsKey],_,T+1)),r=k,a=k.name),E.push(_.spaces&&j(k,_)?`
`+Array(T+1).join(_.spaces):""),E.push("</"+z+">")):E.push("/>"),E.join("")}function v(k,_,T,E){return k.reduce(function(z,M){var C=i(_,T,E&&!z);switch(M.type){case"element":return z+C+g(M,_,T);case"comment":return z+C+h(M[_.commentKey],_);case"doctype":return z+C+f(M[_.doctypeKey],_);case"cdata":return z+(_.indentCdata?C:"")+m(M[_.cdataKey],_);case"text":return z+(_.indentText?C:"")+p(M[_.textKey],_);case"instruction":var A={};return A[M[_.nameKey]]=M[_.attributesKey]?M:M[_.instructionKey],z+(_.indentInstruction?C:"")+u(A,_,T)}},"")}function y(k,_,T){var E;for(E in k)if(k.hasOwnProperty(E))switch(E){case _.parentKey:case _.attributesKey:break;case _.textKey:if(_.indentText||T)return!0;break;case _.cdataKey:if(_.indentCdata||T)return!0;break;case _.instructionKey:if(_.indentInstruction||T)return!0;break;case _.doctypeKey:case _.commentKey:return!0;default:return!0}return!1}function N(k,_,T,E,z){r=k,a=_;var M="elementNameFn"in T?T.elementNameFn(_,k):_;if(typeof k>"u"||k===null||k==="")return"fullTagEmptyElementFn"in T&&T.fullTagEmptyElementFn(_,k)||T.fullTagEmptyElement?"<"+M+"></"+M+">":"<"+M+"/>";var C=[];if(_){if(C.push("<"+M),typeof k!="object")return C.push(">"+p(k,T)+"</"+M+">"),C.join("");k[T.attributesKey]&&C.push(o(k[T.attributesKey],T,E));var A=y(k,T,!0)||k[T.attributesKey]&&k[T.attributesKey]["xml:space"]==="preserve";if(A||("fullTagEmptyElementFn"in T?A=T.fullTagEmptyElementFn(_,k):A=T.fullTagEmptyElement),A)C.push(">");else return C.push("/>"),C.join("")}return C.push(S(k,T,E+1,!1)),r=k,a=_,_&&C.push((z?i(T,E,!1):"")+"</"+M+">"),C.join("")}function S(k,_,T,E){var z,M,C,A=[];for(M in k)if(k.hasOwnProperty(M))for(C=t(k[M])?k[M]:[k[M]],z=0;z<C.length;++z){switch(M){case _.declarationKey:A.push(c(C[z],_,T));break;case _.instructionKey:A.push((_.indentInstruction?i(_,T,E):"")+u(C[z],_,T));break;case _.attributesKey:case _.parentKey:break;case _.textKey:A.push((_.indentText?i(_,T,E):"")+p(C[z],_));break;case _.cdataKey:A.push((_.indentCdata?i(_,T,E):"")+m(C[z],_));break;case _.doctypeKey:A.push(i(_,T,E)+f(C[z],_));break;case _.commentKey:A.push(i(_,T,E)+h(C[z],_));break;default:A.push(i(_,T,E)+N(C[z],M,_,T,y(C[z],_)))}E=E&&!A.length}return A.join("")}return bj=function(k,_){_=n(_);var T=[];return r=k,a="_root_",_.compact?T.push(S(k,_,0,!0)):(k[_.declarationKey]&&T.push(c(k[_.declarationKey],_,0)),k[_.elementsKey]&&k[_.elementsKey].length&&T.push(v(k[_.elementsKey],_,0,!T.length))),T.join("")},bj}var yj,DC;function Eee(){if(DC)return yj;DC=1;var s=E8();return yj=function(t,r){t instanceof Buffer&&(t=t.toString());var a=null;if(typeof t=="string")try{a=JSON.parse(t)}catch{throw new Error("The JSON structure is invalid")}else a=t;return s(a,r)},yj}var vj,RC;function Aee(){if(RC)return vj;RC=1;var s=T8(),t=Tee(),r=E8(),a=Eee();return vj={xml2js:s,xml2json:t,js2xml:r,json2xml:a},vj}var A8=Aee();const z1=s=>{switch(s.type){case void 0:case"element":const t=new Ree(s.name,s.attributes),r=s.elements||[];for(const a of r){const n=z1(a);n!==void 0&&t.push(n)}return t;case"text":return s.text;default:return}};class Dee extends Qe{}class Ree extends Oe{static fromXmlString(t){const r=A8.xml2js(t,{compact:!1});return z1(r)}constructor(t,r){super(t),r&&this.root.push(new Dee(r))}push(t){this.root.push(t)}}class Mee extends Oe{constructor(t){super(""),this._attr=t}prepForXml(t){return{_attr:this._attr}}}class D8 extends Oe{constructor(t,r){super(t),r&&(this.root=r.root)}}const $r=s=>{if(isNaN(s))throw new Error(`Invalid value '${s}' specified. Must be an integer.`);return Math.floor(s)},Ip=s=>{const t=$r(s);if(t<0)throw new Error(`Invalid value '${s}' specified. Must be a positive integer.`);return t},R8=(s,t)=>{const r=t*2;if(s.length!==r||isNaN(+`0x${s}`))throw new Error(`Invalid hex value '${s}'. Expected ${r} digit hex value`);return s},MC=s=>R8(s,1),M8=s=>{const t=s.slice(-2),r=s.substring(0,s.length-2);return`${Number(r)}${t}`},O8=s=>{const t=M8(s);if(parseFloat(t)<0)throw new Error(`Invalid value '${t}' specified. Expected a positive number.`);return t},Cd=s=>{if(s==="auto")return s;const t=s.charAt(0)==="#"?s.substring(1):s;return R8(t,3)},Do=s=>typeof s=="string"?M8(s):$r(s),Oee=s=>typeof s=="string"?O8(s):Ip(s),$a=s=>typeof s=="string"?O8(s):Ip(s),Lee=Ip,Pee=Ip,Bee=s=>s.toISOString();class Le extends Oe{constructor(t,r=!0){super(t),r!==!0&&this.root.push(new ys({val:r}))}}class jj extends Oe{constructor(t,r){super(t),this.root.push(new ys({val:Oee(r)}))}}class ud extends Oe{constructor(t,r){super(t),this.root.push(new ys({val:r}))}}const _h=(s,t)=>new _n({name:s,attributes:{value:{key:"w:val",value:t}}});class Qh extends Oe{constructor(t,r){super(t),this.root.push(new ys({val:r}))}}class bo extends Oe{constructor(t,r){super(t),this.root.push(r)}}class _n extends Oe{constructor({name:t,attributes:r,children:a}){super(t),r&&this.root.push(new Bp(r)),a&&this.root.push(...a)}}const sr={START:"start",CENTER:"center",END:"end",BOTH:"both",MEDIUM_KASHIDA:"mediumKashida",DISTRIBUTE:"distribute",NUM_TAB:"numTab",HIGH_KASHIDA:"highKashida",LOW_KASHIDA:"lowKashida",THAI_DISTRIBUTE:"thaiDistribute",LEFT:"left",RIGHT:"right",JUSTIFIED:"both"};class Fee extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{val:"w:val"})}}class zee extends Oe{constructor(t){super("w:jc"),this.root.push(new Fee({val:t}))}}class ls extends Oe{constructor(t,{color:r,size:a,space:n,style:i}){super(t),this.root.push(new Iee({style:i,color:r===void 0?void 0:Cd(r),size:a===void 0?void 0:Lee(a),space:n===void 0?void 0:Pee(n)}))}}class Iee extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{style:"w:val",color:"w:color",size:"w:sz",space:"w:space"})}}const I1={SINGLE:"single",NONE:"none"};class $ee extends Pp{constructor(t){super("w:pBdr"),t.top&&this.root.push(new ls("w:top",t.top)),t.bottom&&this.root.push(new ls("w:bottom",t.bottom)),t.left&&this.root.push(new ls("w:left",t.left)),t.right&&this.root.push(new ls("w:right",t.right))}}class Uee extends Oe{constructor(){super("w:pBdr");const t=new ls("w:bottom",{color:"auto",space:1,style:I1.SINGLE,size:6});this.root.push(t)}}class Vee extends Oe{constructor({start:t,end:r,left:a,right:n,hanging:i,firstLine:o}){super("w:ind"),this.root.push(new Bp({start:{key:"w:start",value:t===void 0?void 0:Do(t)},end:{key:"w:end",value:r===void 0?void 0:Do(r)},left:{key:"w:left",value:a===void 0?void 0:Do(a)},right:{key:"w:right",value:n===void 0?void 0:Do(n)},hanging:{key:"w:hanging",value:i===void 0?void 0:$a(i)},firstLine:{key:"w:firstLine",value:o===void 0?void 0:$a(o)}}))}}let Hee=class extends Oe{constructor(){super("w:br")}};const $1={BEGIN:"begin",END:"end",SEPARATE:"separate"};class U1 extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{type:"w:fldCharType",dirty:"w:dirty"})}}class hf extends Oe{constructor(t){super("w:fldChar"),this.root.push(new U1({type:$1.BEGIN,dirty:t}))}}class mf extends Oe{constructor(t){super("w:fldChar"),this.root.push(new U1({type:$1.SEPARATE,dirty:t}))}}class xf extends Oe{constructor(t){super("w:fldChar"),this.root.push(new U1({type:$1.END,dirty:t}))}}const Td={DEFAULT:"default",PRESERVE:"preserve"};class Ed extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{space:"xml:space"})}}class qee extends Oe{constructor(){super("w:instrText"),this.root.push(new Ed({space:Td.PRESERVE})),this.root.push("PAGE")}}class Wee extends Oe{constructor(){super("w:instrText"),this.root.push(new Ed({space:Td.PRESERVE})),this.root.push("NUMPAGES")}}class Yee extends Oe{constructor(){super("w:instrText"),this.root.push(new Ed({space:Td.PRESERVE})),this.root.push("SECTIONPAGES")}}class Gee extends Oe{constructor(){super("w:instrText"),this.root.push(new Ed({space:Td.PRESERVE})),this.root.push("SECTION")}}class Kee extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{fill:"w:fill",color:"w:color",type:"w:val"})}}class L8 extends Oe{constructor({fill:t,color:r,type:a}){super("w:shd"),this.root.push(new Kee({fill:t===void 0?void 0:Cd(t),color:r===void 0?void 0:Cd(r),type:a}))}}class Xee extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{id:"w:id",author:"w:author",date:"w:date"})}}const Zee={DOT:"dot"};class Qee extends Oe{constructor(t){super("w:em"),this.root.push(new ys({val:t}))}}class Jee extends Qee{constructor(t=Zee.DOT){super(t)}}class ete extends Oe{constructor(t){super("w:spacing"),this.root.push(new ys({val:Do(t)}))}}class tte extends Oe{constructor(t){super("w:color"),this.root.push(new ys({val:Cd(t)}))}}class ste extends Oe{constructor(t){super("w:highlight"),this.root.push(new ys({val:t}))}}class rte extends Oe{constructor(t){super("w:highlightCs"),this.root.push(new ys({val:t}))}}const ate=s=>new _n({name:"w:lang",attributes:{value:{key:"w:val",value:s.value},eastAsia:{key:"w:eastAsia",value:s.eastAsia},bidirectional:{key:"w:bidi",value:s.bidirectional}}});class OC extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{ascii:"w:ascii",cs:"w:cs",eastAsia:"w:eastAsia",hAnsi:"w:hAnsi",hint:"w:hint"})}}class wj extends Oe{constructor(t,r){if(super("w:rFonts"),typeof t=="string"){const a=t;this.root.push(new OC({ascii:a,cs:a,eastAsia:a,hAnsi:a,hint:r}))}else{const a=t;this.root.push(new OC(a))}}}let P8=class extends Oe{constructor(t){super("w:vertAlign"),this.root.push(new ys({val:t}))}};class nte extends P8{constructor(){super("superscript")}}class ite extends P8{constructor(){super("subscript")}}const B8={SINGLE:"single"};class lte extends Oe{constructor(t=B8.SINGLE,r){super("w:u"),this.root.push(new ys({val:t,color:r===void 0?void 0:Cd(r)}))}}class Ko extends Pp{constructor(t){var r,a;if(super("w:rPr"),!t)return;t.style&&this.push(new ud("w:rStyle",t.style)),t.font&&(typeof t.font=="string"?this.push(new wj(t.font)):"name"in t.font?this.push(new wj(t.font.name,t.font.hint)):this.push(new wj(t.font))),t.bold!==void 0&&this.push(new Le("w:b",t.bold)),(t.boldComplexScript===void 0&&t.bold!==void 0||t.boldComplexScript)&&this.push(new Le("w:bCs",(r=t.boldComplexScript)!=null?r:t.bold)),t.italics!==void 0&&this.push(new Le("w:i",t.italics)),(t.italicsComplexScript===void 0&&t.italics!==void 0||t.italicsComplexScript)&&this.push(new Le("w:iCs",(a=t.italicsComplexScript)!=null?a:t.italics)),t.smallCaps!==void 0?this.push(new Le("w:smallCaps",t.smallCaps)):t.allCaps!==void 0&&this.push(new Le("w:caps",t.allCaps)),t.strike!==void 0&&this.push(new Le("w:strike",t.strike)),t.doubleStrike!==void 0&&this.push(new Le("w:dstrike",t.doubleStrike)),t.emboss!==void 0&&this.push(new Le("w:emboss",t.emboss)),t.imprint!==void 0&&this.push(new Le("w:imprint",t.imprint)),t.noProof!==void 0&&this.push(new Le("w:noProof",t.noProof)),t.snapToGrid!==void 0&&this.push(new Le("w:snapToGrid",t.snapToGrid)),t.vanish&&this.push(new Le("w:vanish",t.vanish)),t.color&&this.push(new tte(t.color)),t.characterSpacing&&this.push(new ete(t.characterSpacing)),t.scale!==void 0&&this.push(new Qh("w:w",t.scale)),t.kern&&this.push(new jj("w:kern",t.kern)),t.position&&this.push(new ud("w:position",t.position)),t.size!==void 0&&this.push(new jj("w:sz",t.size));const n=t.sizeComplexScript===void 0||t.sizeComplexScript===!0?t.size:t.sizeComplexScript;n&&this.push(new jj("w:szCs",n)),t.highlight&&this.push(new ste(t.highlight));const i=t.highlightComplexScript===void 0||t.highlightComplexScript===!0?t.highlight:t.highlightComplexScript;i&&this.push(new rte(i)),t.underline&&this.push(new lte(t.underline.type,t.underline.color)),t.effect&&this.push(new ud("w:effect",t.effect)),t.border&&this.push(new ls("w:bdr",t.border)),t.shading&&this.push(new L8(t.shading)),t.subScript&&this.push(new ite),t.superScript&&this.push(new nte),t.rightToLeft!==void 0&&this.push(new Le("w:rtl",t.rightToLeft)),t.emphasisMark&&this.push(new Jee(t.emphasisMark.type)),t.language&&this.push(ate(t.language)),t.specVanish&&this.push(new Le("w:specVanish",t.vanish)),t.math&&this.push(new Le("w:oMath",t.math)),t.revision&&this.push(new ote(t.revision))}push(t){this.root.push(t)}}class ote extends Oe{constructor(t){super("w:rPrChange"),this.root.push(new Xee({id:t.id,author:t.author,date:t.date})),this.addChildElement(new Ko(t))}}class LC extends Oe{constructor(t){var r;super("w:t"),typeof t=="string"?(this.root.push(new Ed({space:Td.PRESERVE})),this.root.push(t)):(this.root.push(new Ed({space:(r=t.space)!=null?r:Td.DEFAULT})),this.root.push(t.text))}}const ff={CURRENT:"CURRENT",TOTAL_PAGES:"TOTAL_PAGES",TOTAL_PAGES_IN_SECTION:"TOTAL_PAGES_IN_SECTION",CURRENT_SECTION:"SECTION"};class $p extends Oe{constructor(t){if(super("w:r"),Me(this,"properties"),this.properties=new Ko(t),this.root.push(this.properties),t.break)for(let r=0;r<t.break;r++)this.root.push(new Hee);if(t.children)for(const r of t.children){if(typeof r=="string"){switch(r){case ff.CURRENT:this.root.push(new hf),this.root.push(new qee),this.root.push(new mf),this.root.push(new xf);break;case ff.TOTAL_PAGES:this.root.push(new hf),this.root.push(new Wee),this.root.push(new mf),this.root.push(new xf);break;case ff.TOTAL_PAGES_IN_SECTION:this.root.push(new hf),this.root.push(new Yee),this.root.push(new mf),this.root.push(new xf);break;case ff.CURRENT_SECTION:this.root.push(new hf),this.root.push(new Gee),this.root.push(new mf),this.root.push(new xf);break;default:this.root.push(new LC(r));break}continue}this.root.push(r)}else t.text!==void 0&&this.root.push(new LC(t.text))}}class kt extends $p{constructor(t){super(typeof t=="string"?{text:t}:t)}}var Nj={},Bt={},_j,PC;function Um(){if(PC)return _j;PC=1,_j=s;function s(t,r){if(!t)throw new Error(r||"Assertion failed")}return s.equal=function(r,a,n){if(r!=a)throw new Error(n||"Assertion failed: "+r+" != "+a)},_j}var BC;function Sn(){if(BC)return Bt;BC=1;var s=Um(),t=Ml();Bt.inherits=t;function r(I,V){return(I.charCodeAt(V)&64512)!==55296||V<0||V+1>=I.length?!1:(I.charCodeAt(V+1)&64512)===56320}function a(I,V){if(Array.isArray(I))return I.slice();if(!I)return[];var R=[];if(typeof I=="string")if(V){if(V==="hex")for(I=I.replace(/[^a-z0-9]+/ig,""),I.length%2!==0&&(I="0"+I),J=0;J<I.length;J+=2)R.push(parseInt(I[J]+I[J+1],16))}else for(var q=0,J=0;J<I.length;J++){var se=I.charCodeAt(J);se<128?R[q++]=se:se<2048?(R[q++]=se>>6|192,R[q++]=se&63|128):r(I,J)?(se=65536+((se&1023)<<10)+(I.charCodeAt(++J)&1023),R[q++]=se>>18|240,R[q++]=se>>12&63|128,R[q++]=se>>6&63|128,R[q++]=se&63|128):(R[q++]=se>>12|224,R[q++]=se>>6&63|128,R[q++]=se&63|128)}else for(J=0;J<I.length;J++)R[J]=I[J]|0;return R}Bt.toArray=a;function n(I){for(var V="",R=0;R<I.length;R++)V+=c(I[R].toString(16));return V}Bt.toHex=n;function i(I){var V=I>>>24|I>>>8&65280|I<<8&16711680|(I&255)<<24;return V>>>0}Bt.htonl=i;function o(I,V){for(var R="",q=0;q<I.length;q++){var J=I[q];V==="little"&&(J=i(J)),R+=u(J.toString(16))}return R}Bt.toHex32=o;function c(I){return I.length===1?"0"+I:I}Bt.zero2=c;function u(I){return I.length===7?"0"+I:I.length===6?"00"+I:I.length===5?"000"+I:I.length===4?"0000"+I:I.length===3?"00000"+I:I.length===2?"000000"+I:I.length===1?"0000000"+I:I}Bt.zero8=u;function h(I,V,R,q){var J=R-V;s(J%4===0);for(var se=new Array(J/4),Y=0,ee=V;Y<se.length;Y++,ee+=4){var te;q==="big"?te=I[ee]<<24|I[ee+1]<<16|I[ee+2]<<8|I[ee+3]:te=I[ee+3]<<24|I[ee+2]<<16|I[ee+1]<<8|I[ee],se[Y]=te>>>0}return se}Bt.join32=h;function m(I,V){for(var R=new Array(I.length*4),q=0,J=0;q<I.length;q++,J+=4){var se=I[q];V==="big"?(R[J]=se>>>24,R[J+1]=se>>>16&255,R[J+2]=se>>>8&255,R[J+3]=se&255):(R[J+3]=se>>>24,R[J+2]=se>>>16&255,R[J+1]=se>>>8&255,R[J]=se&255)}return R}Bt.split32=m;function f(I,V){return I>>>V|I<<32-V}Bt.rotr32=f;function p(I,V){return I<<V|I>>>32-V}Bt.rotl32=p;function j(I,V){return I+V>>>0}Bt.sum32=j;function g(I,V,R){return I+V+R>>>0}Bt.sum32_3=g;function v(I,V,R,q){return I+V+R+q>>>0}Bt.sum32_4=v;function y(I,V,R,q,J){return I+V+R+q+J>>>0}Bt.sum32_5=y;function N(I,V,R,q){var J=I[V],se=I[V+1],Y=q+se>>>0,ee=(Y<q?1:0)+R+J;I[V]=ee>>>0,I[V+1]=Y}Bt.sum64=N;function S(I,V,R,q){var J=V+q>>>0,se=(J<V?1:0)+I+R;return se>>>0}Bt.sum64_hi=S;function k(I,V,R,q){var J=V+q;return J>>>0}Bt.sum64_lo=k;function _(I,V,R,q,J,se,Y,ee){var te=0,K=V;K=K+q>>>0,te+=K<V?1:0,K=K+se>>>0,te+=K<se?1:0,K=K+ee>>>0,te+=K<ee?1:0;var $=I+R+J+Y+te;return $>>>0}Bt.sum64_4_hi=_;function T(I,V,R,q,J,se,Y,ee){var te=V+q+se+ee;return te>>>0}Bt.sum64_4_lo=T;function E(I,V,R,q,J,se,Y,ee,te,K){var $=0,le=V;le=le+q>>>0,$+=le<V?1:0,le=le+se>>>0,$+=le<se?1:0,le=le+ee>>>0,$+=le<ee?1:0,le=le+K>>>0,$+=le<K?1:0;var ie=I+R+J+Y+te+$;return ie>>>0}Bt.sum64_5_hi=E;function z(I,V,R,q,J,se,Y,ee,te,K){var $=V+q+se+ee+K;return $>>>0}Bt.sum64_5_lo=z;function M(I,V,R){var q=V<<32-R|I>>>R;return q>>>0}Bt.rotr64_hi=M;function C(I,V,R){var q=I<<32-R|V>>>R;return q>>>0}Bt.rotr64_lo=C;function A(I,V,R){return I>>>R}Bt.shr64_hi=A;function Z(I,V,R){var q=I<<32-R|V>>>R;return q>>>0}return Bt.shr64_lo=Z,Bt}var kj={},FC;function Vm(){if(FC)return kj;FC=1;var s=Sn(),t=Um();function r(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return kj.BlockHash=r,r.prototype.update=function(n,i){if(n=s.toArray(n,i),this.pending?this.pending=this.pending.concat(n):this.pending=n,this.pendingTotal+=n.length,this.pending.length>=this._delta8){n=this.pending;var o=n.length%this._delta8;this.pending=n.slice(n.length-o,n.length),this.pending.length===0&&(this.pending=null),n=s.join32(n,0,n.length-o,this.endian);for(var c=0;c<n.length;c+=this._delta32)this._update(n,c,c+this._delta32)}return this},r.prototype.digest=function(n){return this.update(this._pad()),t(this.pending===null),this._digest(n)},r.prototype._pad=function(){var n=this.pendingTotal,i=this._delta8,o=i-(n+this.padLength)%i,c=new Array(o+this.padLength);c[0]=128;for(var u=1;u<o;u++)c[u]=0;if(n<<=3,this.endian==="big"){for(var h=8;h<this.padLength;h++)c[u++]=0;c[u++]=0,c[u++]=0,c[u++]=0,c[u++]=0,c[u++]=n>>>24&255,c[u++]=n>>>16&255,c[u++]=n>>>8&255,c[u++]=n&255}else for(c[u++]=n&255,c[u++]=n>>>8&255,c[u++]=n>>>16&255,c[u++]=n>>>24&255,c[u++]=0,c[u++]=0,c[u++]=0,c[u++]=0,h=8;h<this.padLength;h++)c[u++]=0;return c},kj}var yo={},an={},zC;function F8(){if(zC)return an;zC=1;var s=Sn(),t=s.rotr32;function r(m,f,p,j){if(m===0)return a(f,p,j);if(m===1||m===3)return i(f,p,j);if(m===2)return n(f,p,j)}an.ft_1=r;function a(m,f,p){return m&f^~m&p}an.ch32=a;function n(m,f,p){return m&f^m&p^f&p}an.maj32=n;function i(m,f,p){return m^f^p}an.p32=i;function o(m){return t(m,2)^t(m,13)^t(m,22)}an.s0_256=o;function c(m){return t(m,6)^t(m,11)^t(m,25)}an.s1_256=c;function u(m){return t(m,7)^t(m,18)^m>>>3}an.g0_256=u;function h(m){return t(m,17)^t(m,19)^m>>>10}return an.g1_256=h,an}var Sj,IC;function cte(){if(IC)return Sj;IC=1;var s=Sn(),t=Vm(),r=F8(),a=s.rotl32,n=s.sum32,i=s.sum32_5,o=r.ft_1,c=t.BlockHash,u=[1518500249,1859775393,2400959708,3395469782];function h(){if(!(this instanceof h))return new h;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return s.inherits(h,c),Sj=h,h.blockSize=512,h.outSize=160,h.hmacStrength=80,h.padLength=64,h.prototype._update=function(f,p){for(var j=this.W,g=0;g<16;g++)j[g]=f[p+g];for(;g<j.length;g++)j[g]=a(j[g-3]^j[g-8]^j[g-14]^j[g-16],1);var v=this.h[0],y=this.h[1],N=this.h[2],S=this.h[3],k=this.h[4];for(g=0;g<j.length;g++){var _=~~(g/20),T=i(a(v,5),o(_,y,N,S),k,j[g],u[_]);k=S,S=N,N=a(y,30),y=v,v=T}this.h[0]=n(this.h[0],v),this.h[1]=n(this.h[1],y),this.h[2]=n(this.h[2],N),this.h[3]=n(this.h[3],S),this.h[4]=n(this.h[4],k)},h.prototype._digest=function(f){return f==="hex"?s.toHex32(this.h,"big"):s.split32(this.h,"big")},Sj}var Cj,$C;function z8(){if($C)return Cj;$C=1;var s=Sn(),t=Vm(),r=F8(),a=Um(),n=s.sum32,i=s.sum32_4,o=s.sum32_5,c=r.ch32,u=r.maj32,h=r.s0_256,m=r.s1_256,f=r.g0_256,p=r.g1_256,j=t.BlockHash,g=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function v(){if(!(this instanceof v))return new v;j.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=g,this.W=new Array(64)}return s.inherits(v,j),Cj=v,v.blockSize=512,v.outSize=256,v.hmacStrength=192,v.padLength=64,v.prototype._update=function(N,S){for(var k=this.W,_=0;_<16;_++)k[_]=N[S+_];for(;_<k.length;_++)k[_]=i(p(k[_-2]),k[_-7],f(k[_-15]),k[_-16]);var T=this.h[0],E=this.h[1],z=this.h[2],M=this.h[3],C=this.h[4],A=this.h[5],Z=this.h[6],I=this.h[7];for(a(this.k.length===k.length),_=0;_<k.length;_++){var V=o(I,m(C),c(C,A,Z),this.k[_],k[_]),R=n(h(T),u(T,E,z));I=Z,Z=A,A=C,C=n(M,V),M=z,z=E,E=T,T=n(V,R)}this.h[0]=n(this.h[0],T),this.h[1]=n(this.h[1],E),this.h[2]=n(this.h[2],z),this.h[3]=n(this.h[3],M),this.h[4]=n(this.h[4],C),this.h[5]=n(this.h[5],A),this.h[6]=n(this.h[6],Z),this.h[7]=n(this.h[7],I)},v.prototype._digest=function(N){return N==="hex"?s.toHex32(this.h,"big"):s.split32(this.h,"big")},Cj}var Tj,UC;function dte(){if(UC)return Tj;UC=1;var s=Sn(),t=z8();function r(){if(!(this instanceof r))return new r;t.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return s.inherits(r,t),Tj=r,r.blockSize=512,r.outSize=224,r.hmacStrength=192,r.padLength=64,r.prototype._digest=function(n){return n==="hex"?s.toHex32(this.h.slice(0,7),"big"):s.split32(this.h.slice(0,7),"big")},Tj}var Ej,VC;function I8(){if(VC)return Ej;VC=1;var s=Sn(),t=Vm(),r=Um(),a=s.rotr64_hi,n=s.rotr64_lo,i=s.shr64_hi,o=s.shr64_lo,c=s.sum64,u=s.sum64_hi,h=s.sum64_lo,m=s.sum64_4_hi,f=s.sum64_4_lo,p=s.sum64_5_hi,j=s.sum64_5_lo,g=t.BlockHash,v=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function y(){if(!(this instanceof y))return new y;g.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=v,this.W=new Array(160)}s.inherits(y,g),Ej=y,y.blockSize=1024,y.outSize=512,y.hmacStrength=192,y.padLength=128,y.prototype._prepareBlock=function(R,q){for(var J=this.W,se=0;se<32;se++)J[se]=R[q+se];for(;se<J.length;se+=2){var Y=Z(J[se-4],J[se-3]),ee=I(J[se-4],J[se-3]),te=J[se-14],K=J[se-13],$=C(J[se-30],J[se-29]),le=A(J[se-30],J[se-29]),ie=J[se-32],oe=J[se-31];J[se]=m(Y,ee,te,K,$,le,ie,oe),J[se+1]=f(Y,ee,te,K,$,le,ie,oe)}},y.prototype._update=function(R,q){this._prepareBlock(R,q);var J=this.W,se=this.h[0],Y=this.h[1],ee=this.h[2],te=this.h[3],K=this.h[4],$=this.h[5],le=this.h[6],ie=this.h[7],oe=this.h[8],de=this.h[9],U=this.h[10],F=this.h[11],Q=this.h[12],W=this.h[13],H=this.h[14],re=this.h[15];r(this.k.length===J.length);for(var he=0;he<J.length;he+=2){var G=H,ce=re,X=z(oe,de),O=M(oe,de),L=N(oe,de,U,F,Q),B=S(oe,de,U,F,Q,W),ne=this.k[he],me=this.k[he+1],xe=J[he],_e=J[he+1],Ce=p(G,ce,X,O,L,B,ne,me,xe,_e),Te=j(G,ce,X,O,L,B,ne,me,xe,_e);G=T(se,Y),ce=E(se,Y),X=k(se,Y,ee,te,K),O=_(se,Y,ee,te,K,$);var Be=u(G,ce,X,O),ze=h(G,ce,X,O);H=Q,re=W,Q=U,W=F,U=oe,F=de,oe=u(le,ie,Ce,Te),de=h(ie,ie,Ce,Te),le=K,ie=$,K=ee,$=te,ee=se,te=Y,se=u(Ce,Te,Be,ze),Y=h(Ce,Te,Be,ze)}c(this.h,0,se,Y),c(this.h,2,ee,te),c(this.h,4,K,$),c(this.h,6,le,ie),c(this.h,8,oe,de),c(this.h,10,U,F),c(this.h,12,Q,W),c(this.h,14,H,re)},y.prototype._digest=function(R){return R==="hex"?s.toHex32(this.h,"big"):s.split32(this.h,"big")};function N(V,R,q,J,se){var Y=V&q^~V&se;return Y<0&&(Y+=4294967296),Y}function S(V,R,q,J,se,Y){var ee=R&J^~R&Y;return ee<0&&(ee+=4294967296),ee}function k(V,R,q,J,se){var Y=V&q^V&se^q&se;return Y<0&&(Y+=4294967296),Y}function _(V,R,q,J,se,Y){var ee=R&J^R&Y^J&Y;return ee<0&&(ee+=4294967296),ee}function T(V,R){var q=a(V,R,28),J=a(R,V,2),se=a(R,V,7),Y=q^J^se;return Y<0&&(Y+=4294967296),Y}function E(V,R){var q=n(V,R,28),J=n(R,V,2),se=n(R,V,7),Y=q^J^se;return Y<0&&(Y+=4294967296),Y}function z(V,R){var q=a(V,R,14),J=a(V,R,18),se=a(R,V,9),Y=q^J^se;return Y<0&&(Y+=4294967296),Y}function M(V,R){var q=n(V,R,14),J=n(V,R,18),se=n(R,V,9),Y=q^J^se;return Y<0&&(Y+=4294967296),Y}function C(V,R){var q=a(V,R,1),J=a(V,R,8),se=i(V,R,7),Y=q^J^se;return Y<0&&(Y+=4294967296),Y}function A(V,R){var q=n(V,R,1),J=n(V,R,8),se=o(V,R,7),Y=q^J^se;return Y<0&&(Y+=4294967296),Y}function Z(V,R){var q=a(V,R,19),J=a(R,V,29),se=i(V,R,6),Y=q^J^se;return Y<0&&(Y+=4294967296),Y}function I(V,R){var q=n(V,R,19),J=n(R,V,29),se=o(V,R,6),Y=q^J^se;return Y<0&&(Y+=4294967296),Y}return Ej}var Aj,HC;function ute(){if(HC)return Aj;HC=1;var s=Sn(),t=I8();function r(){if(!(this instanceof r))return new r;t.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return s.inherits(r,t),Aj=r,r.blockSize=1024,r.outSize=384,r.hmacStrength=192,r.padLength=128,r.prototype._digest=function(n){return n==="hex"?s.toHex32(this.h.slice(0,12),"big"):s.split32(this.h.slice(0,12),"big")},Aj}var qC;function hte(){return qC||(qC=1,yo.sha1=cte(),yo.sha224=dte(),yo.sha256=z8(),yo.sha384=ute(),yo.sha512=I8()),yo}var Dj={},WC;function mte(){if(WC)return Dj;WC=1;var s=Sn(),t=Vm(),r=s.rotl32,a=s.sum32,n=s.sum32_3,i=s.sum32_4,o=t.BlockHash;function c(){if(!(this instanceof c))return new c;o.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}s.inherits(c,o),Dj.ripemd160=c,c.blockSize=512,c.outSize=160,c.hmacStrength=192,c.padLength=64,c.prototype._update=function(y,N){for(var S=this.h[0],k=this.h[1],_=this.h[2],T=this.h[3],E=this.h[4],z=S,M=k,C=_,A=T,Z=E,I=0;I<80;I++){var V=a(r(i(S,u(I,k,_,T),y[f[I]+N],h(I)),j[I]),E);S=E,E=T,T=r(_,10),_=k,k=V,V=a(r(i(z,u(79-I,M,C,A),y[p[I]+N],m(I)),g[I]),Z),z=Z,Z=A,A=r(C,10),C=M,M=V}V=n(this.h[1],_,A),this.h[1]=n(this.h[2],T,Z),this.h[2]=n(this.h[3],E,z),this.h[3]=n(this.h[4],S,M),this.h[4]=n(this.h[0],k,C),this.h[0]=V},c.prototype._digest=function(y){return y==="hex"?s.toHex32(this.h,"little"):s.split32(this.h,"little")};function u(v,y,N,S){return v<=15?y^N^S:v<=31?y&N|~y&S:v<=47?(y|~N)^S:v<=63?y&S|N&~S:y^(N|~S)}function h(v){return v<=15?0:v<=31?1518500249:v<=47?1859775393:v<=63?2400959708:2840853838}function m(v){return v<=15?1352829926:v<=31?1548603684:v<=47?1836072691:v<=63?2053994217:0}var f=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],p=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],j=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],g=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return Dj}var Rj,YC;function xte(){if(YC)return Rj;YC=1;var s=Sn(),t=Um();function r(a,n,i){if(!(this instanceof r))return new r(a,n,i);this.Hash=a,this.blockSize=a.blockSize/8,this.outSize=a.outSize/8,this.inner=null,this.outer=null,this._init(s.toArray(n,i))}return Rj=r,r.prototype._init=function(n){n.length>this.blockSize&&(n=new this.Hash().update(n).digest()),t(n.length<=this.blockSize);for(var i=n.length;i<this.blockSize;i++)n.push(0);for(i=0;i<n.length;i++)n[i]^=54;for(this.inner=new this.Hash().update(n),i=0;i<n.length;i++)n[i]^=106;this.outer=new this.Hash().update(n)},r.prototype.update=function(n,i){return this.inner.update(n,i),this},r.prototype.digest=function(n){return this.outer.update(this.inner.digest()),this.outer.digest(n)},Rj}var GC;function fte(){return GC||(GC=1,(function(s){var t=s;t.utils=Sn(),t.common=Vm(),t.sha=hte(),t.ripemd=mte(),t.hmac=xte(),t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160})(Nj)),Nj}fte();let pte="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",gte=(s,t=21)=>(r=t)=>{let a="",n=r|0;for(;n--;)a+=s[Math.random()*s.length|0];return a},bte=(s=21)=>{let t="",r=s|0;for(;r--;)t+=pte[Math.random()*64|0];return t};const Fa=s=>Math.floor(s*72*20),V1=(s=0)=>{let t=s;return()=>++t},yte=()=>V1(),vte=()=>V1(1),jte=()=>V1(),wte=()=>bte().toLowerCase(),kh=s=>gte("1234567890abcdef",s)(),Nte=()=>`${kh(8)}-${kh(4)}-${kh(4)}-${kh(4)}-${kh(12)}`;class _te extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{xmlns:"xmlns"})}}class kte extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{id:"Id",type:"Type",target:"Target",targetMode:"TargetMode"})}}const Ste={EXTERNAL:"External"};class Cte extends Oe{constructor(t,r,a,n){super("Relationship"),this.root.push(new kte({id:t,type:r,target:a,targetMode:n}))}}class Xo extends Oe{constructor(){super("Relationships"),this.root.push(new _te({xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}))}createRelationship(t,r,a,n){const i=new Cte(`rId${t}`,r,a,n);return this.root.push(i),i}get RelationshipCount(){return this.root.length-1}}class Tte extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{id:"w:id",initials:"w:initials",author:"w:author",date:"w:date"})}}class Ete extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{"xmlns:cx":"xmlns:cx","xmlns:cx1":"xmlns:cx1","xmlns:cx2":"xmlns:cx2","xmlns:cx3":"xmlns:cx3","xmlns:cx4":"xmlns:cx4","xmlns:cx5":"xmlns:cx5","xmlns:cx6":"xmlns:cx6","xmlns:cx7":"xmlns:cx7","xmlns:cx8":"xmlns:cx8","xmlns:mc":"xmlns:mc","xmlns:aink":"xmlns:aink","xmlns:am3d":"xmlns:am3d","xmlns:o":"xmlns:o","xmlns:r":"xmlns:r","xmlns:m":"xmlns:m","xmlns:v":"xmlns:v","xmlns:wp14":"xmlns:wp14","xmlns:wp":"xmlns:wp","xmlns:w10":"xmlns:w10","xmlns:w":"xmlns:w","xmlns:w14":"xmlns:w14","xmlns:w15":"xmlns:w15","xmlns:w16cex":"xmlns:w16cex","xmlns:w16cid":"xmlns:w16cid","xmlns:w16":"xmlns:w16","xmlns:w16sdtdh":"xmlns:w16sdtdh","xmlns:w16se":"xmlns:w16se","xmlns:wpg":"xmlns:wpg","xmlns:wpi":"xmlns:wpi","xmlns:wne":"xmlns:wne","xmlns:wps":"xmlns:wps"})}}class Ate extends Oe{constructor({id:t,initials:r,author:a,date:n=new Date,children:i}){super("w:comment"),this.root.push(new Tte({id:t,initials:r,author:a,date:n.toISOString()}));for(const o of i)this.root.push(o)}}class Dte extends Oe{constructor({children:t}){super("w:comments"),Me(this,"relationships"),this.root.push(new Ete({"xmlns:cx":"http://schemas.microsoft.com/office/drawing/2014/chartex","xmlns:cx1":"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex","xmlns:cx2":"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex","xmlns:cx3":"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex","xmlns:cx4":"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex","xmlns:cx5":"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex","xmlns:cx6":"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex","xmlns:cx7":"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex","xmlns:cx8":"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:aink":"http://schemas.microsoft.com/office/drawing/2016/ink","xmlns:am3d":"http://schemas.microsoft.com/office/drawing/2017/model3d","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:m":"http://schemas.openxmlformats.org/officeDocument/2006/math","xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:wp14":"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing","xmlns:wp":"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing","xmlns:w10":"urn:schemas-microsoft-com:office:word","xmlns:w":"http://schemas.openxmlformats.org/wordprocessingml/2006/main","xmlns:w14":"http://schemas.microsoft.com/office/word/2010/wordml","xmlns:w15":"http://schemas.microsoft.com/office/word/2012/wordml","xmlns:w16cex":"http://schemas.microsoft.com/office/word/2018/wordml/cex","xmlns:w16cid":"http://schemas.microsoft.com/office/word/2016/wordml/cid","xmlns:w16":"http://schemas.microsoft.com/office/word/2018/wordml","xmlns:w16sdtdh":"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash","xmlns:w16se":"http://schemas.microsoft.com/office/word/2015/wordml/symex","xmlns:wpg":"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup","xmlns:wpi":"http://schemas.microsoft.com/office/word/2010/wordprocessingInk","xmlns:wne":"http://schemas.microsoft.com/office/word/2006/wordml","xmlns:wps":"http://schemas.microsoft.com/office/word/2010/wordprocessingShape"}));for(const r of t)this.root.push(new Ate(r));this.relationships=new Xo}get Relationships(){return this.relationships}}class Rte extends Oe{constructor(){super("w:pageBreakBefore")}}const Kw={AUTO:"auto"};class Mte extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{after:"w:after",before:"w:before",line:"w:line",lineRule:"w:lineRule",beforeAutoSpacing:"w:beforeAutospacing",afterAutoSpacing:"w:afterAutospacing"})}}class Ote extends Oe{constructor(t){super("w:spacing"),this.root.push(new Mte(t))}}const yl={HEADING_1:"Heading1",HEADING_2:"Heading2",HEADING_3:"Heading3",HEADING_4:"Heading4",HEADING_5:"Heading5",HEADING_6:"Heading6",TITLE:"Title"};let pf=class extends Oe{constructor(t){super("w:pStyle"),this.root.push(new ys({val:t}))}};class Lte extends Oe{constructor(t){super("w:tabs");for(const r of t)this.root.push(new Bte(r))}}const KC={LEFT:"left",RIGHT:"right"};class Pte extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{val:"w:val",pos:"w:pos",leader:"w:leader"})}}class Bte extends Oe{constructor({type:t,position:r,leader:a}){super("w:tab"),this.root.push(new Pte({val:t,pos:r,leader:a}))}}class Mj extends Oe{constructor(t,r){super("w:numPr"),this.root.push(new Fte(r)),this.root.push(new zte(t))}}class Fte extends Oe{constructor(t){if(super("w:ilvl"),t>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new ys({val:t}))}}class zte extends Oe{constructor(t){super("w:numId"),this.root.push(new ys({val:typeof t=="string"?`{${t}}`:t}))}}class Ite extends Oe{constructor(){super(...arguments),Me(this,"fileChild",Symbol())}}class $te extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{id:"r:id",history:"w:history",anchor:"w:anchor"})}}class Ute extends Oe{constructor(t,r,a){super("w:hyperlink"),Me(this,"linkId"),this.linkId=r;const n={history:1,anchor:a||void 0,id:a?void 0:`rId${this.linkId}`},i=new $te(n);this.root.push(i),t.forEach(o=>{this.root.push(o)})}}class Vte extends Oe{constructor(t){super("w:externalHyperlink"),this.options=t}}class Hte extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{id:"w:id",name:"w:name"})}}class qte extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{id:"w:id"})}}class Wte{constructor(t){Me(this,"bookmarkUniqueNumericId",jte()),Me(this,"start"),Me(this,"children"),Me(this,"end");const r=this.bookmarkUniqueNumericId();this.start=new Yte(t.id,r),this.children=t.children,this.end=new Gte(r)}}class Yte extends Oe{constructor(t,r){super("w:bookmarkStart");const a=new Hte({name:t,id:r});this.root.push(a)}}class Gte extends Oe{constructor(t){super("w:bookmarkEnd");const r=new qte({id:t});this.root.push(r)}}class Kte extends Oe{constructor(t){super("w:outlineLvl"),this.level=t,this.root.push(new ys({val:t}))}}const Xte={TOP:"top",CENTER:"center",BOTTOM:"bottom"};kd(yt({},Xte),{BOTH:"both"});class Zte extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{verticalAlign:"w:val"})}}class Qte extends Oe{constructor(t){super("w:vAlign"),this.root.push(new Zte({verticalAlign:t}))}}class Jte extends Oe{constructor({space:t,count:r,separate:a,equalWidth:n,children:i}){super("w:cols"),this.root.push(new Bp({space:{key:"w:space",value:t===void 0?void 0:$a(t)},count:{key:"w:num",value:r===void 0?void 0:$r(r)},separate:{key:"w:sep",value:a},equalWidth:{key:"w:equalWidth",value:n}})),!n&&i&&i.forEach(o=>this.addChildElement(o))}}const ese=({type:s,linePitch:t,charSpace:r})=>new _n({name:"w:docGrid",attributes:{type:{key:"w:type",value:s},linePitch:{key:"w:linePitch",value:$r(t)},charSpace:{key:"w:charSpace",value:r?$r(r):void 0}}}),hd={DEFAULT:"default",FIRST:"first",EVEN:"even"};class tse extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{type:"w:type",id:"r:id"})}}const XC={HEADER:"w:headerReference",FOOTER:"w:footerReference"};class Oj extends Oe{constructor(t,r){super(t),this.root.push(new tse({type:r.type||hd.DEFAULT,id:`rId${r.id}`}))}}const sse=({countBy:s,start:t,restart:r,distance:a})=>new _n({name:"w:lnNumType",attributes:{countBy:{key:"w:countBy",value:s===void 0?void 0:$r(s)},start:{key:"w:start",value:t===void 0?void 0:$r(t)},restart:{key:"w:restart",value:r},distance:{key:"w:distance",value:a===void 0?void 0:$a(a)}}});class ZC extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{display:"w:display",offsetFrom:"w:offsetFrom",zOrder:"w:zOrder"})}}class rse extends Pp{constructor(t){if(super("w:pgBorders"),!t)return this;t.pageBorders?this.root.push(new ZC({display:t.pageBorders.display,offsetFrom:t.pageBorders.offsetFrom,zOrder:t.pageBorders.zOrder})):this.root.push(new ZC({})),t.pageBorderTop&&this.root.push(new ls("w:top",t.pageBorderTop)),t.pageBorderLeft&&this.root.push(new ls("w:left",t.pageBorderLeft)),t.pageBorderBottom&&this.root.push(new ls("w:bottom",t.pageBorderBottom)),t.pageBorderRight&&this.root.push(new ls("w:right",t.pageBorderRight))}}class ase extends Oe{constructor(t,r,a,n,i,o,c){super("w:pgMar"),this.root.push(new Bp({top:{key:"w:top",value:Do(t)},right:{key:"w:right",value:$a(r)},bottom:{key:"w:bottom",value:Do(a)},left:{key:"w:left",value:$a(n)},header:{key:"w:header",value:$a(i)},footer:{key:"w:footer",value:$a(o)},gutter:{key:"w:gutter",value:$a(c)}}))}}class nse extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{start:"w:start",formatType:"w:fmt",separator:"w:chapSep"})}}class ise extends Oe{constructor({start:t,formatType:r,separator:a}){super("w:pgNumType"),this.root.push(new nse({start:t===void 0?void 0:$r(t),formatType:r,separator:a}))}}const Xw={PORTRAIT:"portrait",LANDSCAPE:"landscape"},lse=({width:s,height:t,orientation:r,code:a})=>{const n=$a(s),i=$a(t);return new _n({name:"w:pgSz",attributes:{width:{key:"w:w",value:r===Xw.LANDSCAPE?i:n},height:{key:"w:h",value:r===Xw.LANDSCAPE?n:i},orientation:{key:"w:orient",value:r},code:{key:"w:code",value:a}}})};class ose extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{val:"w:val"})}}class cse extends Oe{constructor(t){super("w:textDirection"),this.root.push(new ose({val:t}))}}class dse extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{val:"w:val"})}}class use extends Oe{constructor(t){super("w:type"),this.root.push(new dse({val:t}))}}const vo={TOP:1440,RIGHT:1440,BOTTOM:1440,LEFT:1440,HEADER:708,FOOTER:708,GUTTER:0},Lj={WIDTH:11906,HEIGHT:16838,ORIENTATION:Xw.PORTRAIT};class hse extends Oe{constructor({page:{size:{width:t=Lj.WIDTH,height:r=Lj.HEIGHT,orientation:a=Lj.ORIENTATION}={},margin:{top:n=vo.TOP,right:i=vo.RIGHT,bottom:o=vo.BOTTOM,left:c=vo.LEFT,header:u=vo.HEADER,footer:h=vo.FOOTER,gutter:m=vo.GUTTER}={},pageNumbers:f={},borders:p,textDirection:j}={},grid:{linePitch:g=360,charSpace:v,type:y}={},headerWrapperGroup:N={},footerWrapperGroup:S={},lineNumbers:k,titlePage:_,verticalAlign:T,column:E,type:z}={}){super("w:sectPr"),this.addHeaderFooterGroup(XC.HEADER,N),this.addHeaderFooterGroup(XC.FOOTER,S),z&&this.root.push(new use(z)),this.root.push(lse({width:t,height:r,orientation:a})),this.root.push(new ase(n,i,o,c,u,h,m)),p&&this.root.push(new rse(p)),k&&this.root.push(sse(k)),this.root.push(new ise(f)),E&&this.root.push(new Jte(E)),T&&this.root.push(new Qte(T)),_!==void 0&&this.root.push(new Le("w:titlePg",_)),j&&this.root.push(new cse(j)),this.root.push(ese({linePitch:g,charSpace:v,type:y}))}addHeaderFooterGroup(t,r){r.default&&this.root.push(new Oj(t,{type:hd.DEFAULT,id:r.default.View.ReferenceId})),r.first&&this.root.push(new Oj(t,{type:hd.FIRST,id:r.first.View.ReferenceId})),r.even&&this.root.push(new Oj(t,{type:hd.EVEN,id:r.even.View.ReferenceId}))}}class mse extends Oe{constructor(){super("w:body"),Me(this,"sections",[])}addSection(t){const r=this.sections.pop();this.root.push(this.createSectionParagraph(r)),this.sections.push(new hse(t))}prepForXml(t){return this.sections.length===1&&(this.root.splice(0,1),this.root.push(this.sections.pop())),super.prepForXml(t)}push(t){this.root.push(t)}createSectionParagraph(t){const r=new ht({}),a=new Ad({});return a.push(t),r.addChildElement(a),r}}const QC={wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance",cx:"http://schemas.microsoft.com/office/drawing/2014/chartex",cx1:"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex",cx2:"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex",cx3:"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex",cx4:"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex",cx5:"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex",cx6:"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex",cx7:"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex",cx8:"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex",aink:"http://schemas.microsoft.com/office/drawing/2016/ink",am3d:"http://schemas.microsoft.com/office/drawing/2017/model3d",w16cex:"http://schemas.microsoft.com/office/word/2018/wordml/cex",w16cid:"http://schemas.microsoft.com/office/word/2016/wordml/cid",w16:"http://schemas.microsoft.com/office/word/2018/wordml",w16sdtdh:"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash",w16se:"http://schemas.microsoft.com/office/word/2015/wordml/symex"};class Up extends Qe{constructor(t,r){super(yt({Ignorable:r},Object.fromEntries(t.map(a=>[a,QC[a]])))),Me(this,"xmlKeys",yt({Ignorable:"mc:Ignorable"},Object.fromEntries(Object.keys(QC).map(a=>[a,`xmlns:${a}`]))))}}class xse extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{color:"w:color",themeColor:"w:themeColor",themeShade:"w:themeShade",themeTint:"w:themeTint"})}}class fse extends Oe{constructor(t){super("w:background"),this.root.push(new xse({color:t.color===void 0?void 0:Cd(t.color),themeColor:t.themeColor,themeShade:t.themeShade===void 0?void 0:MC(t.themeShade),themeTint:t.themeTint===void 0?void 0:MC(t.themeTint)}))}}class pse extends Oe{constructor(t){super("w:document"),Me(this,"body"),this.root.push(new Up(["wpc","mc","o","r","m","v","wp14","wp","w10","w","w14","w15","wpg","wpi","wne","wps","cx","cx1","cx2","cx3","cx4","cx5","cx6","cx7","cx8","aink","am3d","w16cex","w16cid","w16","w16sdtdh","w16se"],"w14 w15 wp14")),this.body=new mse,t.background&&this.root.push(new fse(t.background)),this.root.push(this.body)}add(t){return this.body.push(t),this}get Body(){return this.body}}class $8{constructor(t){Me(this,"document"),Me(this,"relationships"),this.document=new pse(t),this.relationships=new Xo}get View(){return this.document}get Relationships(){return this.relationships}}class gse extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{val:"w:val"})}}class bse extends Oe{constructor(){super("w:wordWrap"),this.root.push(new gse({val:0}))}}const yse=s=>{var t,r;return new _n({name:"w:framePr",attributes:{anchorLock:{key:"w:anchorLock",value:s.anchorLock},dropCap:{key:"w:dropCap",value:s.dropCap},width:{key:"w:w",value:s.width},height:{key:"w:h",value:s.height},x:{key:"w:x",value:s.position?s.position.x:void 0},y:{key:"w:y",value:s.position?s.position.y:void 0},anchorHorizontal:{key:"w:hAnchor",value:s.anchor.horizontal},anchorVertical:{key:"w:vAnchor",value:s.anchor.vertical},spaceHorizontal:{key:"w:hSpace",value:(t=s.space)==null?void 0:t.horizontal},spaceVertical:{key:"w:vSpace",value:(r=s.space)==null?void 0:r.vertical},rule:{key:"w:hRule",value:s.rule},alignmentX:{key:"w:xAlign",value:s.alignment?s.alignment.x:void 0},alignmentY:{key:"w:yAlign",value:s.alignment?s.alignment.y:void 0},lines:{key:"w:lines",value:s.lines},wrap:{key:"w:wrap",value:s.wrap}}})};class Ad extends Pp{constructor(t){var r,a;if(super("w:pPr"),Me(this,"numberingReferences",[]),!t)return this;t.heading&&this.push(new pf(t.heading)),t.bullet&&this.push(new pf("ListParagraph")),t.numbering&&!t.style&&!t.heading&&(t.numbering.custom||this.push(new pf("ListParagraph"))),t.style&&this.push(new pf(t.style)),t.keepNext!==void 0&&this.push(new Le("w:keepNext",t.keepNext)),t.keepLines!==void 0&&this.push(new Le("w:keepLines",t.keepLines)),t.pageBreakBefore&&this.push(new Rte),t.frame&&this.push(yse(t.frame)),t.widowControl!==void 0&&this.push(new Le("w:widowControl",t.widowControl)),t.bullet&&this.push(new Mj(1,t.bullet.level)),t.numbering?(this.numberingReferences.push({reference:t.numbering.reference,instance:(r=t.numbering.instance)!=null?r:0}),this.push(new Mj(`${t.numbering.reference}-${(a=t.numbering.instance)!=null?a:0}`,t.numbering.level))):t.numbering===!1&&this.push(new Mj(0,0)),t.border&&this.push(new $ee(t.border)),t.thematicBreak&&this.push(new Uee),t.shading&&this.push(new L8(t.shading)),t.wordWrap&&this.push(new bse),t.overflowPunctuation&&this.push(new Le("w:overflowPunct",t.overflowPunctuation));const n=[...t.rightTabStop!==void 0?[{type:KC.RIGHT,position:t.rightTabStop}]:[],...t.tabStops?t.tabStops:[],...t.leftTabStop!==void 0?[{type:KC.LEFT,position:t.leftTabStop}]:[]];n.length>0&&this.push(new Lte(n)),t.bidirectional!==void 0&&this.push(new Le("w:bidi",t.bidirectional)),t.spacing&&this.push(new Ote(t.spacing)),t.indent&&this.push(new Vee(t.indent)),t.contextualSpacing!==void 0&&this.push(new Le("w:contextualSpacing",t.contextualSpacing)),t.alignment&&this.push(new zee(t.alignment)),t.outlineLevel!==void 0&&this.push(new Kte(t.outlineLevel)),t.suppressLineNumbers!==void 0&&this.push(new Le("w:suppressLineNumbers",t.suppressLineNumbers)),t.autoSpaceEastAsianText!==void 0&&this.push(new Le("w:autoSpaceDN",t.autoSpaceEastAsianText)),t.run&&this.push(new Ko(t.run))}push(t){this.root.push(t)}prepForXml(t){if(t.viewWrapper instanceof $8)for(const r of this.numberingReferences)t.file.Numbering.createConcreteNumberingInstance(r.reference,r.instance);return super.prepForXml(t)}}class ht extends Ite{constructor(t){if(super("w:p"),Me(this,"properties"),typeof t=="string")return this.properties=new Ad({}),this.root.push(this.properties),this.root.push(new kt(t)),this;if(this.properties=new Ad(t),this.root.push(this.properties),t.text&&this.root.push(new kt(t.text)),t.children)for(const r of t.children){if(r instanceof Wte){this.root.push(r.start);for(const a of r.children)this.root.push(a);this.root.push(r.end);continue}this.root.push(r)}}prepForXml(t){for(const r of this.root)if(r instanceof Vte){const a=this.root.indexOf(r),n=new Ute(r.options.children,wte());t.viewWrapper.Relationships.createRelationship(n.linkId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",r.options.link,Ste.EXTERNAL),this.root[a]=n}return super.prepForXml(t)}addRunToFront(t){return this.root.splice(1,0,t),this}}const qc={style:I1.NONE,size:0,color:"auto"},Wc={style:I1.SINGLE,size:4,color:"auto"};class vse extends Oe{constructor(t){super("w:tblBorders"),t.top?this.root.push(new ls("w:top",t.top)):this.root.push(new ls("w:top",Wc)),t.left?this.root.push(new ls("w:left",t.left)):this.root.push(new ls("w:left",Wc)),t.bottom?this.root.push(new ls("w:bottom",t.bottom)):this.root.push(new ls("w:bottom",Wc)),t.right?this.root.push(new ls("w:right",t.right)):this.root.push(new ls("w:right",Wc)),t.insideHorizontal?this.root.push(new ls("w:insideH",t.insideHorizontal)):this.root.push(new ls("w:insideH",Wc)),t.insideVertical?this.root.push(new ls("w:insideV",t.insideVertical)):this.root.push(new ls("w:insideV",Wc))}}Me(vse,"NONE",{top:qc,bottom:qc,left:qc,right:qc,insideHorizontal:qc,insideVertical:qc});class jse extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{xmlns:"xmlns",vt:"xmlns:vt"})}}class wse extends Oe{constructor(){super("Properties"),this.root.push(new jse({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"}))}}class Nse extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{xmlns:"xmlns"})}}class _se extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{contentType:"ContentType",extension:"Extension"})}}class ri extends Oe{constructor(t,r){super("Default"),this.root.push(new _se({contentType:t,extension:r}))}}class kse extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{contentType:"ContentType",partName:"PartName"})}}class xa extends Oe{constructor(t,r){super("Override"),this.root.push(new kse({contentType:t,partName:r}))}}class Sse extends Oe{constructor(){super("Types"),this.root.push(new Nse({xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"})),this.root.push(new ri("image/png","png")),this.root.push(new ri("image/jpeg","jpeg")),this.root.push(new ri("image/jpeg","jpg")),this.root.push(new ri("image/bmp","bmp")),this.root.push(new ri("image/gif","gif")),this.root.push(new ri("image/svg+xml","svg")),this.root.push(new ri("application/vnd.openxmlformats-package.relationships+xml","rels")),this.root.push(new ri("application/xml","xml")),this.root.push(new ri("application/vnd.openxmlformats-officedocument.obfuscatedFont","odttf")),this.root.push(new xa("application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml","/word/document.xml")),this.root.push(new xa("application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml","/word/styles.xml")),this.root.push(new xa("application/vnd.openxmlformats-package.core-properties+xml","/docProps/core.xml")),this.root.push(new xa("application/vnd.openxmlformats-officedocument.custom-properties+xml","/docProps/custom.xml")),this.root.push(new xa("application/vnd.openxmlformats-officedocument.extended-properties+xml","/docProps/app.xml")),this.root.push(new xa("application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml","/word/numbering.xml")),this.root.push(new xa("application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml","/word/footnotes.xml")),this.root.push(new xa("application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml","/word/settings.xml")),this.root.push(new xa("application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml","/word/comments.xml")),this.root.push(new xa("application/vnd.openxmlformats-officedocument.wordprocessingml.fontTable+xml","/word/fontTable.xml"))}addFooter(t){this.root.push(new xa("application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml",`/word/footer${t}.xml`))}addHeader(t){this.root.push(new xa("application/vnd.openxmlformats-officedocument.wordprocessingml.header+xml",`/word/header${t}.xml`))}}class Cse extends Oe{constructor(t){super("cp:coreProperties"),this.root.push(new Up(["cp","dc","dcterms","dcmitype","xsi"])),t.title&&this.root.push(new bo("dc:title",t.title)),t.subject&&this.root.push(new bo("dc:subject",t.subject)),t.creator&&this.root.push(new bo("dc:creator",t.creator)),t.keywords&&this.root.push(new bo("cp:keywords",t.keywords)),t.description&&this.root.push(new bo("dc:description",t.description)),t.lastModifiedBy&&this.root.push(new bo("cp:lastModifiedBy",t.lastModifiedBy)),t.revision&&this.root.push(new bo("cp:revision",String(t.revision))),this.root.push(new JC("dcterms:created")),this.root.push(new JC("dcterms:modified"))}}class Tse extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{type:"xsi:type"})}}class JC extends Oe{constructor(t){super(t),this.root.push(new Tse({type:"dcterms:W3CDTF"})),this.root.push(Bee(new Date))}}class Ese extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{xmlns:"xmlns",vt:"xmlns:vt"})}}class Ase extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{fmtid:"fmtid",pid:"pid",name:"name"})}}class Dse extends Oe{constructor(t,r){super("property"),this.root.push(new Ase({fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:t.toString(),name:r.name})),this.root.push(new Rse(r.value))}}class Rse extends Oe{constructor(t){super("vt:lpwstr"),this.root.push(t)}}class Mse extends Oe{constructor(t){super("Properties"),Me(this,"nextId"),Me(this,"properties",[]),this.root.push(new Ese({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"})),this.nextId=2;for(const r of t)this.addCustomProperty(r)}prepForXml(t){return this.properties.forEach(r=>this.root.push(r)),super.prepForXml(t)}addCustomProperty(t){this.properties.push(new Dse(this.nextId++,t))}}const gf=({id:s,fontKey:t,subsetted:r},a)=>new _n({name:a,attributes:yt({id:{key:"r:id",value:s}},t?{fontKey:{key:"w:fontKey",value:`{${t}}`}}:{}),children:[...r?[new Le("w:subsetted",r)]:[]]}),Ose=({name:s,altName:t,panose1:r,charset:a,family:n,notTrueType:i,pitch:o,sig:c,embedRegular:u,embedBold:h,embedItalic:m,embedBoldItalic:f})=>new _n({name:"w:font",attributes:{name:{key:"w:name",value:s}},children:[...t?[_h("w:altName",t)]:[],...r?[_h("w:panose1",r)]:[],...a?[_h("w:charset",a)]:[],_h("w:family",n),...i?[new Le("w:notTrueType",i)]:[],_h("w:pitch",o),...c?[new _n({name:"w:sig",attributes:{usb0:{key:"w:usb0",value:c.usb0},usb1:{key:"w:usb1",value:c.usb1},usb2:{key:"w:usb2",value:c.usb2},usb3:{key:"w:usb3",value:c.usb3},csb0:{key:"w:csb0",value:c.csb0},csb1:{key:"w:csb1",value:c.csb1}}})]:[],...u?[gf(u,"w:embedRegular")]:[],...h?[gf(h,"w:embedBold")]:[],...m?[gf(m,"w:embedItalic")]:[],...f?[gf(f,"w:embedBoldItalic")]:[]]}),Lse=({name:s,index:t,fontKey:r,characterSet:a})=>Ose({name:s,sig:{usb0:"E0002AFF",usb1:"C000247B",usb2:"00000009",usb3:"00000000",csb0:"000001FF",csb1:"00000000"},charset:a,family:"auto",pitch:"variable",embedRegular:{fontKey:r,id:`rId${t}`}}),Pse=s=>new _n({name:"w:fonts",attributes:{mc:{key:"xmlns:mc",value:"http://schemas.openxmlformats.org/markup-compatibility/2006"},r:{key:"xmlns:r",value:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"},w:{key:"xmlns:w",value:"http://schemas.openxmlformats.org/wordprocessingml/2006/main"},w14:{key:"xmlns:w14",value:"http://schemas.microsoft.com/office/word/2010/wordml"},w15:{key:"xmlns:w15",value:"http://schemas.microsoft.com/office/word/2012/wordml"},w16cex:{key:"xmlns:w16cex",value:"http://schemas.microsoft.com/office/word/2018/wordml/cex"},w16cid:{key:"xmlns:w16cid",value:"http://schemas.microsoft.com/office/word/2016/wordml/cid"},w16:{key:"xmlns:w16",value:"http://schemas.microsoft.com/office/word/2018/wordml"},w16sdtdh:{key:"xmlns:w16sdtdh",value:"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash"},w16se:{key:"xmlns:w16se",value:"http://schemas.microsoft.com/office/word/2015/wordml/symex"},Ignorable:{key:"mc:Ignorable",value:"w14 w15 w16se w16cid w16 w16cex w16sdtdh"}},children:s.map((t,r)=>Lse({name:t.name,index:r+1,fontKey:t.fontKey}))});class Bse{constructor(t){Me(this,"fontTable"),Me(this,"relationships"),Me(this,"fontOptionsWithKey",[]),this.options=t,this.fontOptionsWithKey=t.map(r=>kd(yt({},r),{fontKey:Nte()})),this.fontTable=Pse(this.fontOptionsWithKey),this.relationships=new Xo;for(let r=0;r<t.length;r++)this.relationships.createRelationship(r+1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/font",`fonts/${t[r].name}.odttf`)}get View(){return this.fontTable}get Relationships(){return this.relationships}}class Fse extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type"})}}let zse=class extends D8{constructor(t,r){super("w:ftr",r),Me(this,"refId"),this.refId=t,r||this.root.push(new Fse({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape"}))}get ReferenceId(){return this.refId}add(t){this.root.push(t)}};class Ise{constructor(t,r,a){Me(this,"footer"),Me(this,"relationships"),this.media=t,this.footer=new zse(r,a),this.relationships=new Xo}add(t){this.footer.add(t)}addChildElement(t){this.footer.addChildElement(t)}get View(){return this.footer}get Relationships(){return this.relationships}get Media(){return this.media}}class $se extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{type:"w:type",id:"w:id"})}}class Use extends Oe{constructor(){super("w:footnoteRef")}}class Vse extends $p{constructor(){super({style:"FootnoteReference"}),this.root.push(new Use)}}const eT={SEPERATOR:"separator",CONTINUATION_SEPERATOR:"continuationSeparator"};class Pj extends Oe{constructor(t){super("w:footnote"),this.root.push(new $se({type:t.type,id:t.id}));for(let r=0;r<t.children.length;r++){const a=t.children[r];r===0&&a.addRunToFront(new Vse),this.root.push(a)}}}class Hse extends Oe{constructor(){super("w:continuationSeparator")}}class qse extends $p{constructor(){super({}),this.root.push(new Hse)}}class Wse extends Oe{constructor(){super("w:separator")}}class Yse extends $p{constructor(){super({}),this.root.push(new Wse)}}class Gse extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"})}}class Kse extends Oe{constructor(){super("w:footnotes"),this.root.push(new Gse({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"}));const t=new Pj({id:-1,type:eT.SEPERATOR,children:[new ht({spacing:{after:0,line:240,lineRule:Kw.AUTO},children:[new Yse]})]});this.root.push(t);const r=new Pj({id:0,type:eT.CONTINUATION_SEPERATOR,children:[new ht({spacing:{after:0,line:240,lineRule:Kw.AUTO},children:[new qse]})]});this.root.push(r)}createFootNote(t,r){const a=new Pj({id:t,children:r});this.root.push(a)}}class Xse{constructor(){Me(this,"footnotess"),Me(this,"relationships"),this.footnotess=new Kse,this.relationships=new Xo}get View(){return this.footnotess}get Relationships(){return this.relationships}}class Zse extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type",cx:"xmlns:cx",cx1:"xmlns:cx1",cx2:"xmlns:cx2",cx3:"xmlns:cx3",cx4:"xmlns:cx4",cx5:"xmlns:cx5",cx6:"xmlns:cx6",cx7:"xmlns:cx7",cx8:"xmlns:cx8",w16cid:"xmlns:w16cid",w16se:"xmlns:w16se"})}}let Qse=class extends D8{constructor(t,r){super("w:hdr",r),Me(this,"refId"),this.refId=t,r||this.root.push(new Zse({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",cx:"http://schemas.microsoft.com/office/drawing/2014/chartex",cx1:"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex",cx2:"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex",cx3:"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex",cx4:"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex",cx5:"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex",cx6:"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex",cx7:"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex",cx8:"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex",w16cid:"http://schemas.microsoft.com/office/word/2016/wordml/cid",w16se:"http://schemas.microsoft.com/office/word/2015/wordml/symex"}))}get ReferenceId(){return this.refId}add(t){this.root.push(t)}};class Jse{constructor(t,r,a){Me(this,"header"),Me(this,"relationships"),this.media=t,this.header=new Qse(r,a),this.relationships=new Xo}add(t){return this.header.add(t),this}addChildElement(t){this.header.addChildElement(t)}get View(){return this.header}get Relationships(){return this.relationships}get Media(){return this.media}}class ere{constructor(){Me(this,"map"),this.map=new Map}addImage(t,r){this.map.set(t,r)}get Array(){return Array.from(this.map.values())}}const ai={BULLET:"bullet"};class tre extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{ilvl:"w:ilvl",tentative:"w15:tentative"})}}class sre extends Oe{constructor(t){super("w:numFmt"),this.root.push(new ys({val:t}))}}class rre extends Oe{constructor(t){super("w:lvlText"),this.root.push(new ys({val:t}))}}class are extends Oe{constructor(t){super("w:lvlJc"),this.root.push(new ys({val:t}))}}class nre extends Oe{constructor(t){super("w:suff"),this.root.push(new ys({val:t}))}}class ire extends Oe{constructor(){super("w:isLgl")}}class lre extends Oe{constructor({level:t,format:r,text:a,alignment:n=sr.START,start:i=1,style:o,suffix:c,isLegalNumberingStyle:u}){if(super("w:lvl"),Me(this,"paragraphProperties"),Me(this,"runProperties"),this.root.push(new Qh("w:start",$r(i))),r&&this.root.push(new sre(r)),c&&this.root.push(new nre(c)),u&&this.root.push(new ire),a&&this.root.push(new rre(a)),this.root.push(new are(n)),this.paragraphProperties=new Ad(o&&o.paragraph),this.runProperties=new Ko(o&&o.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties),t>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new tre({ilvl:$r(t),tentative:1}))}}class ore extends lre{}class cre extends Oe{constructor(t){super("w:multiLevelType"),this.root.push(new ys({val:t}))}}class dre extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{abstractNumId:"w:abstractNumId",restartNumberingAfterBreak:"w15:restartNumberingAfterBreak"})}}class tT extends Oe{constructor(t,r){super("w:abstractNum"),Me(this,"id"),this.root.push(new dre({abstractNumId:$r(t),restartNumberingAfterBreak:0})),this.root.push(new cre("hybridMultilevel")),this.id=t;for(const a of r)this.root.push(new ore(a))}}class ure extends Oe{constructor(t){super("w:abstractNumId"),this.root.push(new ys({val:t}))}}class hre extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{numId:"w:numId"})}}class sT extends Oe{constructor(t){if(super("w:num"),Me(this,"numId"),Me(this,"reference"),Me(this,"instance"),this.numId=t.numId,this.reference=t.reference,this.instance=t.instance,this.root.push(new hre({numId:$r(t.numId)})),this.root.push(new ure($r(t.abstractNumId))),t.overrideLevels&&t.overrideLevels.length)for(const r of t.overrideLevels)this.root.push(new xre(r.num,r.start))}}class mre extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{ilvl:"w:ilvl"})}}class xre extends Oe{constructor(t,r){super("w:lvlOverride"),this.root.push(new mre({ilvl:t})),r!==void 0&&this.root.push(new pre(r))}}class fre extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{val:"w:val"})}}class pre extends Oe{constructor(t){super("w:startOverride"),this.root.push(new fre({val:t}))}}class gre extends Oe{constructor(t){super("w:numbering"),Me(this,"abstractNumberingMap",new Map),Me(this,"concreteNumberingMap",new Map),Me(this,"referenceConfigMap",new Map),Me(this,"abstractNumUniqueNumericId",yte()),Me(this,"concreteNumUniqueNumericId",vte()),this.root.push(new Up(["wpc","mc","o","r","m","v","wp14","wp","w10","w","w14","w15","wpg","wpi","wne","wps"],"w14 w15 wp14"));const r=new tT(this.abstractNumUniqueNumericId(),[{level:0,format:ai.BULLET,text:"",alignment:sr.LEFT,style:{paragraph:{indent:{left:Fa(.5),hanging:Fa(.25)}}}},{level:1,format:ai.BULLET,text:"",alignment:sr.LEFT,style:{paragraph:{indent:{left:Fa(1),hanging:Fa(.25)}}}},{level:2,format:ai.BULLET,text:"",alignment:sr.LEFT,style:{paragraph:{indent:{left:2160,hanging:Fa(.25)}}}},{level:3,format:ai.BULLET,text:"",alignment:sr.LEFT,style:{paragraph:{indent:{left:2880,hanging:Fa(.25)}}}},{level:4,format:ai.BULLET,text:"",alignment:sr.LEFT,style:{paragraph:{indent:{left:3600,hanging:Fa(.25)}}}},{level:5,format:ai.BULLET,text:"",alignment:sr.LEFT,style:{paragraph:{indent:{left:4320,hanging:Fa(.25)}}}},{level:6,format:ai.BULLET,text:"",alignment:sr.LEFT,style:{paragraph:{indent:{left:5040,hanging:Fa(.25)}}}},{level:7,format:ai.BULLET,text:"",alignment:sr.LEFT,style:{paragraph:{indent:{left:5760,hanging:Fa(.25)}}}},{level:8,format:ai.BULLET,text:"",alignment:sr.LEFT,style:{paragraph:{indent:{left:6480,hanging:Fa(.25)}}}}]);this.concreteNumberingMap.set("default-bullet-numbering",new sT({numId:1,abstractNumId:r.id,reference:"default-bullet-numbering",instance:0,overrideLevels:[{num:0,start:1}]})),this.abstractNumberingMap.set("default-bullet-numbering",r);for(const a of t.config)this.abstractNumberingMap.set(a.reference,new tT(this.abstractNumUniqueNumericId(),a.levels)),this.referenceConfigMap.set(a.reference,a.levels)}prepForXml(t){for(const r of this.abstractNumberingMap.values())this.root.push(r);for(const r of this.concreteNumberingMap.values())this.root.push(r);return super.prepForXml(t)}createConcreteNumberingInstance(t,r){const a=this.abstractNumberingMap.get(t);if(!a)return;const n=`${t}-${r}`;if(this.concreteNumberingMap.has(n))return;const i=this.referenceConfigMap.get(t),o=i&&i[0].start,c={numId:this.concreteNumUniqueNumericId(),abstractNumId:a.id,reference:t,instance:r,overrideLevels:[o&&Number.isInteger(o)?{num:0,start:o}:{num:0,start:1}]};this.concreteNumberingMap.set(n,new sT(c))}get ConcreteNumbering(){return Array.from(this.concreteNumberingMap.values())}get ReferenceConfig(){return Array.from(this.referenceConfigMap.values())}}class bre extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{version:"w:val",name:"w:name",uri:"w:uri"})}}class yre extends Oe{constructor(t){super("w:compatSetting"),this.root.push(new bre({version:t,uri:"http://schemas.microsoft.com/office/word",name:"compatibilityMode"}))}}class vre extends Oe{constructor(t){super("w:compat"),t.version&&this.root.push(new yre(t.version)),t.useSingleBorderforContiguousCells&&this.root.push(new Le("w:useSingleBorderforContiguousCells",t.useSingleBorderforContiguousCells)),t.wordPerfectJustification&&this.root.push(new Le("w:wpJustification",t.wordPerfectJustification)),t.noTabStopForHangingIndent&&this.root.push(new Le("w:noTabHangInd",t.noTabStopForHangingIndent)),t.noLeading&&this.root.push(new Le("w:noLeading",t.noLeading)),t.spaceForUnderline&&this.root.push(new Le("w:spaceForUL",t.spaceForUnderline)),t.noColumnBalance&&this.root.push(new Le("w:noColumnBalance",t.noColumnBalance)),t.balanceSingleByteDoubleByteWidth&&this.root.push(new Le("w:balanceSingleByteDoubleByteWidth",t.balanceSingleByteDoubleByteWidth)),t.noExtraLineSpacing&&this.root.push(new Le("w:noExtraLineSpacing",t.noExtraLineSpacing)),t.doNotLeaveBackslashAlone&&this.root.push(new Le("w:doNotLeaveBackslashAlone",t.doNotLeaveBackslashAlone)),t.underlineTrailingSpaces&&this.root.push(new Le("w:ulTrailSpace",t.underlineTrailingSpaces)),t.doNotExpandShiftReturn&&this.root.push(new Le("w:doNotExpandShiftReturn",t.doNotExpandShiftReturn)),t.spacingInWholePoints&&this.root.push(new Le("w:spacingInWholePoints",t.spacingInWholePoints)),t.lineWrapLikeWord6&&this.root.push(new Le("w:lineWrapLikeWord6",t.lineWrapLikeWord6)),t.printBodyTextBeforeHeader&&this.root.push(new Le("w:printBodyTextBeforeHeader",t.printBodyTextBeforeHeader)),t.printColorsBlack&&this.root.push(new Le("w:printColBlack",t.printColorsBlack)),t.spaceWidth&&this.root.push(new Le("w:wpSpaceWidth",t.spaceWidth)),t.showBreaksInFrames&&this.root.push(new Le("w:showBreaksInFrames",t.showBreaksInFrames)),t.subFontBySize&&this.root.push(new Le("w:subFontBySize",t.subFontBySize)),t.suppressBottomSpacing&&this.root.push(new Le("w:suppressBottomSpacing",t.suppressBottomSpacing)),t.suppressTopSpacing&&this.root.push(new Le("w:suppressTopSpacing",t.suppressTopSpacing)),t.suppressSpacingAtTopOfPage&&this.root.push(new Le("w:suppressSpacingAtTopOfPage",t.suppressSpacingAtTopOfPage)),t.suppressTopSpacingWP&&this.root.push(new Le("w:suppressTopSpacingWP",t.suppressTopSpacingWP)),t.suppressSpBfAfterPgBrk&&this.root.push(new Le("w:suppressSpBfAfterPgBrk",t.suppressSpBfAfterPgBrk)),t.swapBordersFacingPages&&this.root.push(new Le("w:swapBordersFacingPages",t.swapBordersFacingPages)),t.convertMailMergeEsc&&this.root.push(new Le("w:convMailMergeEsc",t.convertMailMergeEsc)),t.truncateFontHeightsLikeWP6&&this.root.push(new Le("w:truncateFontHeightsLikeWP6",t.truncateFontHeightsLikeWP6)),t.macWordSmallCaps&&this.root.push(new Le("w:mwSmallCaps",t.macWordSmallCaps)),t.usePrinterMetrics&&this.root.push(new Le("w:usePrinterMetrics",t.usePrinterMetrics)),t.doNotSuppressParagraphBorders&&this.root.push(new Le("w:doNotSuppressParagraphBorders",t.doNotSuppressParagraphBorders)),t.wrapTrailSpaces&&this.root.push(new Le("w:wrapTrailSpaces",t.wrapTrailSpaces)),t.footnoteLayoutLikeWW8&&this.root.push(new Le("w:footnoteLayoutLikeWW8",t.footnoteLayoutLikeWW8)),t.shapeLayoutLikeWW8&&this.root.push(new Le("w:shapeLayoutLikeWW8",t.shapeLayoutLikeWW8)),t.alignTablesRowByRow&&this.root.push(new Le("w:alignTablesRowByRow",t.alignTablesRowByRow)),t.forgetLastTabAlignment&&this.root.push(new Le("w:forgetLastTabAlignment",t.forgetLastTabAlignment)),t.adjustLineHeightInTable&&this.root.push(new Le("w:adjustLineHeightInTable",t.adjustLineHeightInTable)),t.autoSpaceLikeWord95&&this.root.push(new Le("w:autoSpaceLikeWord95",t.autoSpaceLikeWord95)),t.noSpaceRaiseLower&&this.root.push(new Le("w:noSpaceRaiseLower",t.noSpaceRaiseLower)),t.doNotUseHTMLParagraphAutoSpacing&&this.root.push(new Le("w:doNotUseHTMLParagraphAutoSpacing",t.doNotUseHTMLParagraphAutoSpacing)),t.layoutRawTableWidth&&this.root.push(new Le("w:layoutRawTableWidth",t.layoutRawTableWidth)),t.layoutTableRowsApart&&this.root.push(new Le("w:layoutTableRowsApart",t.layoutTableRowsApart)),t.useWord97LineBreakRules&&this.root.push(new Le("w:useWord97LineBreakRules",t.useWord97LineBreakRules)),t.doNotBreakWrappedTables&&this.root.push(new Le("w:doNotBreakWrappedTables",t.doNotBreakWrappedTables)),t.doNotSnapToGridInCell&&this.root.push(new Le("w:doNotSnapToGridInCell",t.doNotSnapToGridInCell)),t.selectFieldWithFirstOrLastCharacter&&this.root.push(new Le("w:selectFldWithFirstOrLastChar",t.selectFieldWithFirstOrLastCharacter)),t.applyBreakingRules&&this.root.push(new Le("w:applyBreakingRules",t.applyBreakingRules)),t.doNotWrapTextWithPunctuation&&this.root.push(new Le("w:doNotWrapTextWithPunct",t.doNotWrapTextWithPunctuation)),t.doNotUseEastAsianBreakRules&&this.root.push(new Le("w:doNotUseEastAsianBreakRules",t.doNotUseEastAsianBreakRules)),t.useWord2002TableStyleRules&&this.root.push(new Le("w:useWord2002TableStyleRules",t.useWord2002TableStyleRules)),t.growAutofit&&this.root.push(new Le("w:growAutofit",t.growAutofit)),t.useFELayout&&this.root.push(new Le("w:useFELayout",t.useFELayout)),t.useNormalStyleForList&&this.root.push(new Le("w:useNormalStyleForList",t.useNormalStyleForList)),t.doNotUseIndentAsNumberingTabStop&&this.root.push(new Le("w:doNotUseIndentAsNumberingTabStop",t.doNotUseIndentAsNumberingTabStop)),t.useAlternateEastAsianLineBreakRules&&this.root.push(new Le("w:useAltKinsokuLineBreakRules",t.useAlternateEastAsianLineBreakRules)),t.allowSpaceOfSameStyleInTable&&this.root.push(new Le("w:allowSpaceOfSameStyleInTable",t.allowSpaceOfSameStyleInTable)),t.doNotSuppressIndentation&&this.root.push(new Le("w:doNotSuppressIndentation",t.doNotSuppressIndentation)),t.doNotAutofitConstrainedTables&&this.root.push(new Le("w:doNotAutofitConstrainedTables",t.doNotAutofitConstrainedTables)),t.autofitToFirstFixedWidthCell&&this.root.push(new Le("w:autofitToFirstFixedWidthCell",t.autofitToFirstFixedWidthCell)),t.underlineTabInNumberingList&&this.root.push(new Le("w:underlineTabInNumList",t.underlineTabInNumberingList)),t.displayHangulFixedWidth&&this.root.push(new Le("w:displayHangulFixedWidth",t.displayHangulFixedWidth)),t.splitPgBreakAndParaMark&&this.root.push(new Le("w:splitPgBreakAndParaMark",t.splitPgBreakAndParaMark)),t.doNotVerticallyAlignCellWithSp&&this.root.push(new Le("w:doNotVertAlignCellWithSp",t.doNotVerticallyAlignCellWithSp)),t.doNotBreakConstrainedForcedTable&&this.root.push(new Le("w:doNotBreakConstrainedForcedTable",t.doNotBreakConstrainedForcedTable)),t.ignoreVerticalAlignmentInTextboxes&&this.root.push(new Le("w:doNotVertAlignInTxbx",t.ignoreVerticalAlignmentInTextboxes)),t.useAnsiKerningPairs&&this.root.push(new Le("w:useAnsiKerningPairs",t.useAnsiKerningPairs)),t.cachedColumnBalance&&this.root.push(new Le("w:cachedColBalance",t.cachedColumnBalance))}}class jre extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"})}}class wre extends Oe{constructor(t){var r,a,n,i,o,c,u,h;super("w:settings"),this.root.push(new jre({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"})),this.root.push(new Le("w:displayBackgroundShape",!0)),t.trackRevisions!==void 0&&this.root.push(new Le("w:trackRevisions",t.trackRevisions)),t.evenAndOddHeaders!==void 0&&this.root.push(new Le("w:evenAndOddHeaders",t.evenAndOddHeaders)),t.updateFields!==void 0&&this.root.push(new Le("w:updateFields",t.updateFields)),t.defaultTabStop!==void 0&&this.root.push(new Qh("w:defaultTabStop",t.defaultTabStop)),((r=t.hyphenation)==null?void 0:r.autoHyphenation)!==void 0&&this.root.push(new Le("w:autoHyphenation",t.hyphenation.autoHyphenation)),((a=t.hyphenation)==null?void 0:a.hyphenationZone)!==void 0&&this.root.push(new Qh("w:hyphenationZone",t.hyphenation.hyphenationZone)),((n=t.hyphenation)==null?void 0:n.consecutiveHyphenLimit)!==void 0&&this.root.push(new Qh("w:consecutiveHyphenLimit",t.hyphenation.consecutiveHyphenLimit)),((i=t.hyphenation)==null?void 0:i.doNotHyphenateCaps)!==void 0&&this.root.push(new Le("w:doNotHyphenateCaps",t.hyphenation.doNotHyphenateCaps)),this.root.push(new vre(kd(yt({},(o=t.compatibility)!=null?o:{}),{version:(h=(u=(c=t.compatibility)==null?void 0:c.version)!=null?u:t.compatibilityModeVersion)!=null?h:15})))}}class U8 extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{val:"w:val"})}}class Nre extends Oe{constructor(t){super("w:name"),this.root.push(new U8({val:t}))}}class _re extends Oe{constructor(t){super("w:uiPriority"),this.root.push(new U8({val:$r(t)}))}}class kre extends Qe{constructor(){super(...arguments),Me(this,"xmlKeys",{type:"w:type",styleId:"w:styleId",default:"w:default",customStyle:"w:customStyle"})}}class V8 extends Oe{constructor(t,r){super("w:style"),this.root.push(new kre(t)),r.name&&this.root.push(new Nre(r.name)),r.basedOn&&this.root.push(new ud("w:basedOn",r.basedOn)),r.next&&this.root.push(new ud("w:next",r.next)),r.link&&this.root.push(new ud("w:link",r.link)),r.uiPriority!==void 0&&this.root.push(new _re(r.uiPriority)),r.semiHidden!==void 0&&this.root.push(new Le("w:semiHidden",r.semiHidden)),r.unhideWhenUsed!==void 0&&this.root.push(new Le("w:unhideWhenUsed",r.unhideWhenUsed)),r.quickFormat!==void 0&&this.root.push(new Le("w:qFormat",r.quickFormat))}}class Vp extends V8{constructor(t){super({type:"paragraph",styleId:t.id},t),Me(this,"paragraphProperties"),Me(this,"runProperties"),this.paragraphProperties=new Ad(t.paragraph),this.runProperties=new Ko(t.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties)}}class Hp extends V8{constructor(t){super({type:"character",styleId:t.id},yt({uiPriority:99,unhideWhenUsed:!0},t)),Me(this,"runProperties"),this.runProperties=new Ko(t.run),this.root.push(this.runProperties)}}class Ol extends Vp{constructor(t){super(yt({basedOn:"Normal",next:"Normal",quickFormat:!0},t))}}class Sre extends Ol{constructor(t){super(yt({id:"Title",name:"Title"},t))}}class Cre extends Ol{constructor(t){super(yt({id:"Heading1",name:"Heading 1"},t))}}class Tre extends Ol{constructor(t){super(yt({id:"Heading2",name:"Heading 2"},t))}}class Ere extends Ol{constructor(t){super(yt({id:"Heading3",name:"Heading 3"},t))}}class Are extends Ol{constructor(t){super(yt({id:"Heading4",name:"Heading 4"},t))}}class Dre extends Ol{constructor(t){super(yt({id:"Heading5",name:"Heading 5"},t))}}class Rre extends Ol{constructor(t){super(yt({id:"Heading6",name:"Heading 6"},t))}}class Mre extends Ol{constructor(t){super(yt({id:"Strong",name:"Strong"},t))}}class Ore extends Vp{constructor(t){super(yt({id:"ListParagraph",name:"List Paragraph",basedOn:"Normal",quickFormat:!0},t))}}class Lre extends Vp{constructor(t){super(yt({id:"FootnoteText",name:"footnote text",link:"FootnoteTextChar",basedOn:"Normal",uiPriority:99,semiHidden:!0,unhideWhenUsed:!0,paragraph:{spacing:{after:0,line:240,lineRule:Kw.AUTO}},run:{size:20}},t))}}class Pre extends Hp{constructor(t){super(yt({id:"FootnoteReference",name:"footnote reference",basedOn:"DefaultParagraphFont",semiHidden:!0,run:{superScript:!0}},t))}}class Bre extends Hp{constructor(t){super(yt({id:"FootnoteTextChar",name:"Footnote Text Char",basedOn:"DefaultParagraphFont",link:"FootnoteText",semiHidden:!0,run:{size:20}},t))}}class Fre extends Hp{constructor(t){super(yt({id:"Hyperlink",name:"Hyperlink",basedOn:"DefaultParagraphFont",run:{color:"0563C1",underline:{type:B8.SINGLE}}},t))}}class Zw extends Oe{constructor(t){if(super("w:styles"),t.initialStyles&&this.root.push(t.initialStyles),t.importedStyles)for(const r of t.importedStyles)this.root.push(r);if(t.paragraphStyles)for(const r of t.paragraphStyles)this.root.push(new Vp(r));if(t.characterStyles)for(const r of t.characterStyles)this.root.push(new Hp(r))}}class zre extends Oe{constructor(t){super("w:pPrDefault"),this.root.push(new Ad(t))}}class Ire extends Oe{constructor(t){super("w:rPrDefault"),this.root.push(new Ko(t))}}class $re extends Oe{constructor(t){super("w:docDefaults"),Me(this,"runPropertiesDefaults"),Me(this,"paragraphPropertiesDefaults"),this.runPropertiesDefaults=new Ire(t.run),this.paragraphPropertiesDefaults=new zre(t.paragraph),this.root.push(this.runPropertiesDefaults),this.root.push(this.paragraphPropertiesDefaults)}}class Ure{newInstance(t){const r=A8.xml2js(t,{compact:!1});let a;for(const o of r.elements||[])o.name==="w:styles"&&(a=o);if(a===void 0)throw new Error("can not find styles element");const n=a.elements||[];return new Zw({initialStyles:new Mee(a.attributes),importedStyles:n.map(o=>z1(o))})}}class rT{newInstance(t={}){var r;return{initialStyles:new Up(["mc","r","w","w14","w15"],"w14 w15"),importedStyles:[new $re((r=t.document)!=null?r:{}),new Sre(yt({run:{size:56}},t.title)),new Cre(yt({run:{color:"2E74B5",size:32}},t.heading1)),new Tre(yt({run:{color:"2E74B5",size:26}},t.heading2)),new Ere(yt({run:{color:"1F4D78",size:24}},t.heading3)),new Are(yt({run:{color:"2E74B5",italics:!0}},t.heading4)),new Dre(yt({run:{color:"2E74B5"}},t.heading5)),new Rre(yt({run:{color:"1F4D78"}},t.heading6)),new Mre(yt({run:{bold:!0}},t.strong)),new Ore(t.listParagraph||{}),new Fre(t.hyperlink||{}),new Pre(t.footnoteReference||{}),new Lre(t.footnoteText||{}),new Bre(t.footnoteTextChar||{})]}}}let H8=class{constructor(t){Me(this,"currentRelationshipId",1),Me(this,"documentWrapper"),Me(this,"headers",[]),Me(this,"footers",[]),Me(this,"coreProperties"),Me(this,"numbering"),Me(this,"media"),Me(this,"fileRelationships"),Me(this,"footnotesWrapper"),Me(this,"settings"),Me(this,"contentTypes"),Me(this,"customProperties"),Me(this,"appProperties"),Me(this,"styles"),Me(this,"comments"),Me(this,"fontWrapper");var r,a,n,i,o,c,u,h,m,f,p,j;if(this.coreProperties=new Cse(kd(yt({},t),{creator:(r=t.creator)!=null?r:"Un-named",revision:(a=t.revision)!=null?a:1,lastModifiedBy:(n=t.lastModifiedBy)!=null?n:"Un-named"})),this.numbering=new gre(t.numbering?t.numbering:{config:[]}),this.comments=new Dte((i=t.comments)!=null?i:{children:[]}),this.fileRelationships=new Xo,this.customProperties=new Mse((o=t.customProperties)!=null?o:[]),this.appProperties=new wse,this.footnotesWrapper=new Xse,this.contentTypes=new Sse,this.documentWrapper=new $8({background:t.background}),this.settings=new wre({compatibilityModeVersion:t.compatabilityModeVersion,compatibility:t.compatibility,evenAndOddHeaders:!!t.evenAndOddHeaderAndFooters,trackRevisions:(c=t.features)==null?void 0:c.trackRevisions,updateFields:(u=t.features)==null?void 0:u.updateFields,defaultTabStop:t.defaultTabStop,hyphenation:{autoHyphenation:(h=t.hyphenation)==null?void 0:h.autoHyphenation,hyphenationZone:(m=t.hyphenation)==null?void 0:m.hyphenationZone,consecutiveHyphenLimit:(f=t.hyphenation)==null?void 0:f.consecutiveHyphenLimit,doNotHyphenateCaps:(p=t.hyphenation)==null?void 0:p.doNotHyphenateCaps}}),this.media=new ere,t.externalStyles!==void 0){const g=new Ure;this.styles=g.newInstance(t.externalStyles)}else if(t.styles){const v=new rT().newInstance(t.styles.default);this.styles=new Zw(yt(yt({},v),t.styles))}else{const g=new rT;this.styles=new Zw(g.newInstance())}this.addDefaultRelationships();for(const g of t.sections)this.addSection(g);if(t.footnotes)for(const g in t.footnotes)this.footnotesWrapper.View.createFootNote(parseFloat(g),t.footnotes[g].children);this.fontWrapper=new Bse((j=t.fonts)!=null?j:[])}addSection({headers:t={},footers:r={},children:a,properties:n}){this.documentWrapper.View.Body.addSection(kd(yt({},n),{headerWrapperGroup:{default:t.default?this.createHeader(t.default):void 0,first:t.first?this.createHeader(t.first):void 0,even:t.even?this.createHeader(t.even):void 0},footerWrapperGroup:{default:r.default?this.createFooter(r.default):void 0,first:r.first?this.createFooter(r.first):void 0,even:r.even?this.createFooter(r.even):void 0}}));for(const i of a)this.documentWrapper.View.add(i)}createHeader(t){const r=new Jse(this.media,this.currentRelationshipId++);for(const a of t.options.children)r.add(a);return this.addHeaderToDocument(r),r}createFooter(t){const r=new Ise(this.media,this.currentRelationshipId++);for(const a of t.options.children)r.add(a);return this.addFooterToDocument(r),r}addHeaderToDocument(t,r=hd.DEFAULT){this.headers.push({header:t,type:r}),this.documentWrapper.Relationships.createRelationship(t.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/header",`header${this.headers.length}.xml`),this.contentTypes.addHeader(this.headers.length)}addFooterToDocument(t,r=hd.DEFAULT){this.footers.push({footer:t,type:r}),this.documentWrapper.Relationships.createRelationship(t.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footer",`footer${this.footers.length}.xml`),this.contentTypes.addFooter(this.footers.length)}addDefaultRelationships(){this.fileRelationships.createRelationship(1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument","word/document.xml"),this.fileRelationships.createRelationship(2,"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties","docProps/core.xml"),this.fileRelationships.createRelationship(3,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties","docProps/app.xml"),this.fileRelationships.createRelationship(4,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties","docProps/custom.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles","styles.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/numbering","numbering.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footnotes","footnotes.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/settings","settings.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments","comments.xml")}get Document(){return this.documentWrapper}get Styles(){return this.styles}get CoreProperties(){return this.coreProperties}get Numbering(){return this.numbering}get Media(){return this.media}get FileRelationships(){return this.fileRelationships}get Headers(){return this.headers.map(t=>t.header)}get Footers(){return this.footers.map(t=>t.footer)}get ContentTypes(){return this.contentTypes}get CustomProperties(){return this.customProperties}get AppProperties(){return this.appProperties}get FootNotes(){return this.footnotesWrapper}get Settings(){return this.settings}get Comments(){return this.comments}get FontTable(){return this.fontWrapper}};var Vre=P1();function bf(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Bj={exports:{}},aT;function Hre(){return aT||(aT=1,(function(s,t){(function(r){s.exports=r()})(function(){return(function r(a,n,i){function o(h,m){if(!n[h]){if(!a[h]){var f=typeof bf=="function"&&bf;if(!m&&f)return f(h,!0);if(c)return c(h,!0);var p=new Error("Cannot find module '"+h+"'");throw p.code="MODULE_NOT_FOUND",p}var j=n[h]={exports:{}};a[h][0].call(j.exports,function(g){var v=a[h][1][g];return o(v||g)},j,j.exports,r,a,n,i)}return n[h].exports}for(var c=typeof bf=="function"&&bf,u=0;u<i.length;u++)o(i[u]);return o})({1:[function(r,a,n){var i=r("./utils"),o=r("./support"),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(u){for(var h,m,f,p,j,g,v,y=[],N=0,S=u.length,k=S,_=i.getTypeOf(u)!=="string";N<u.length;)k=S-N,f=_?(h=u[N++],m=N<S?u[N++]:0,N<S?u[N++]:0):(h=u.charCodeAt(N++),m=N<S?u.charCodeAt(N++):0,N<S?u.charCodeAt(N++):0),p=h>>2,j=(3&h)<<4|m>>4,g=1<k?(15&m)<<2|f>>6:64,v=2<k?63&f:64,y.push(c.charAt(p)+c.charAt(j)+c.charAt(g)+c.charAt(v));return y.join("")},n.decode=function(u){var h,m,f,p,j,g,v=0,y=0,N="data:";if(u.substr(0,N.length)===N)throw new Error("Invalid base64 input, it looks like a data url.");var S,k=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===c.charAt(64)&&k--,u.charAt(u.length-2)===c.charAt(64)&&k--,k%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=o.uint8array?new Uint8Array(0|k):new Array(0|k);v<u.length;)h=c.indexOf(u.charAt(v++))<<2|(p=c.indexOf(u.charAt(v++)))>>4,m=(15&p)<<4|(j=c.indexOf(u.charAt(v++)))>>2,f=(3&j)<<6|(g=c.indexOf(u.charAt(v++))),S[y++]=h,j!==64&&(S[y++]=m),g!==64&&(S[y++]=f);return S}},{"./support":30,"./utils":32}],2:[function(r,a,n){var i=r("./external"),o=r("./stream/DataWorker"),c=r("./stream/Crc32Probe"),u=r("./stream/DataLengthProbe");function h(m,f,p,j,g){this.compressedSize=m,this.uncompressedSize=f,this.crc32=p,this.compression=j,this.compressedContent=g}h.prototype={getContentWorker:function(){var m=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),f=this;return m.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),m},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(m,f,p){return m.pipe(new c).pipe(new u("uncompressedSize")).pipe(f.compressWorker(p)).pipe(new u("compressedSize")).withStreamInfo("compression",f)},a.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,a,n){var i=r("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},n.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,a,n){var i=r("./utils"),o=(function(){for(var c,u=[],h=0;h<256;h++){c=h;for(var m=0;m<8;m++)c=1&c?3988292384^c>>>1:c>>>1;u[h]=c}return u})();a.exports=function(c,u){return c!==void 0&&c.length?i.getTypeOf(c)!=="string"?(function(h,m,f,p){var j=o,g=p+f;h^=-1;for(var v=p;v<g;v++)h=h>>>8^j[255&(h^m[v])];return-1^h})(0|u,c,c.length,0):(function(h,m,f,p){var j=o,g=p+f;h^=-1;for(var v=p;v<g;v++)h=h>>>8^j[255&(h^m.charCodeAt(v))];return-1^h})(0|u,c,c.length,0):0}},{"./utils":32}],5:[function(r,a,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(r,a,n){var i=null;i=typeof Promise<"u"?Promise:r("lie"),a.exports={Promise:i}},{lie:37}],7:[function(r,a,n){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=r("pako"),c=r("./utils"),u=r("./stream/GenericWorker"),h=i?"uint8array":"array";function m(f,p){u.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=p,this.meta={}}n.magic="\b\0",c.inherits(m,u),m.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(c.transformTo(h,f.data),!1)},m.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},m.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},m.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(p){f.push({data:p,meta:f.meta})}},n.compressWorker=function(f){return new m("Deflate",f)},n.uncompressWorker=function(){return new m("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,a,n){function i(j,g){var v,y="";for(v=0;v<g;v++)y+=String.fromCharCode(255&j),j>>>=8;return y}function o(j,g,v,y,N,S){var k,_,T=j.file,E=j.compression,z=S!==h.utf8encode,M=c.transformTo("string",S(T.name)),C=c.transformTo("string",h.utf8encode(T.name)),A=T.comment,Z=c.transformTo("string",S(A)),I=c.transformTo("string",h.utf8encode(A)),V=C.length!==T.name.length,R=I.length!==A.length,q="",J="",se="",Y=T.dir,ee=T.date,te={crc32:0,compressedSize:0,uncompressedSize:0};g&&!v||(te.crc32=j.crc32,te.compressedSize=j.compressedSize,te.uncompressedSize=j.uncompressedSize);var K=0;g&&(K|=8),z||!V&&!R||(K|=2048);var $=0,le=0;Y&&($|=16),N==="UNIX"?(le=798,$|=(function(oe,de){var U=oe;return oe||(U=de?16893:33204),(65535&U)<<16})(T.unixPermissions,Y)):(le=20,$|=(function(oe){return 63&(oe||0)})(T.dosPermissions)),k=ee.getUTCHours(),k<<=6,k|=ee.getUTCMinutes(),k<<=5,k|=ee.getUTCSeconds()/2,_=ee.getUTCFullYear()-1980,_<<=4,_|=ee.getUTCMonth()+1,_<<=5,_|=ee.getUTCDate(),V&&(J=i(1,1)+i(m(M),4)+C,q+="up"+i(J.length,2)+J),R&&(se=i(1,1)+i(m(Z),4)+I,q+="uc"+i(se.length,2)+se);var ie="";return ie+=`
\0`,ie+=i(K,2),ie+=E.magic,ie+=i(k,2),ie+=i(_,2),ie+=i(te.crc32,4),ie+=i(te.compressedSize,4),ie+=i(te.uncompressedSize,4),ie+=i(M.length,2),ie+=i(q.length,2),{fileRecord:f.LOCAL_FILE_HEADER+ie+M+q,dirRecord:f.CENTRAL_FILE_HEADER+i(le,2)+ie+i(Z.length,2)+"\0\0\0\0"+i($,4)+i(y,4)+M+q+Z}}var c=r("../utils"),u=r("../stream/GenericWorker"),h=r("../utf8"),m=r("../crc32"),f=r("../signature");function p(j,g,v,y){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=g,this.zipPlatform=v,this.encodeFileName=y,this.streamFiles=j,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}c.inherits(p,u),p.prototype.push=function(j){var g=j.meta.percent||0,v=this.entriesCount,y=this._sources.length;this.accumulate?this.contentBuffer.push(j):(this.bytesWritten+=j.data.length,u.prototype.push.call(this,{data:j.data,meta:{currentFile:this.currentFile,percent:v?(g+100*(v-y-1))/v:100}}))},p.prototype.openedSource=function(j){this.currentSourceOffset=this.bytesWritten,this.currentFile=j.file.name;var g=this.streamFiles&&!j.file.dir;if(g){var v=o(j,g,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:v.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(j){this.accumulate=!1;var g=this.streamFiles&&!j.file.dir,v=o(j,g,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(v.dirRecord),g)this.push({data:(function(y){return f.DATA_DESCRIPTOR+i(y.crc32,4)+i(y.compressedSize,4)+i(y.uncompressedSize,4)})(j),meta:{percent:100}});else for(this.push({data:v.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var j=this.bytesWritten,g=0;g<this.dirRecords.length;g++)this.push({data:this.dirRecords[g],meta:{percent:100}});var v=this.bytesWritten-j,y=(function(N,S,k,_,T){var E=c.transformTo("string",T(_));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(N,2)+i(N,2)+i(S,4)+i(k,4)+i(E.length,2)+E})(this.dirRecords.length,v,j,this.zipComment,this.encodeFileName);this.push({data:y,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(j){this._sources.push(j);var g=this;return j.on("data",function(v){g.processChunk(v)}),j.on("end",function(){g.closedSource(g.previous.streamInfo),g._sources.length?g.prepareNextSource():g.end()}),j.on("error",function(v){g.error(v)}),this},p.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(j){var g=this._sources;if(!u.prototype.error.call(this,j))return!1;for(var v=0;v<g.length;v++)try{g[v].error(j)}catch{}return!0},p.prototype.lock=function(){u.prototype.lock.call(this);for(var j=this._sources,g=0;g<j.length;g++)j[g].lock()},a.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,a,n){var i=r("../compressions"),o=r("./ZipFileWorker");n.generateWorker=function(c,u,h){var m=new o(u.streamFiles,h,u.platform,u.encodeFileName),f=0;try{c.forEach(function(p,j){f++;var g=(function(S,k){var _=S||k,T=i[_];if(!T)throw new Error(_+" is not a valid compression method !");return T})(j.options.compression,u.compression),v=j.options.compressionOptions||u.compressionOptions||{},y=j.dir,N=j.date;j._compressWorker(g,v).withStreamInfo("file",{name:p,dir:y,date:N,comment:j.comment||"",unixPermissions:j.unixPermissions,dosPermissions:j.dosPermissions}).pipe(m)}),m.entriesCount=f}catch(p){m.error(p)}return m}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,a,n){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var c in this)typeof this[c]!="function"&&(o[c]=this[c]);return o}}(i.prototype=r("./object")).loadAsync=r("./load"),i.support=r("./support"),i.defaults=r("./defaults"),i.version="3.10.1",i.loadAsync=function(o,c){return new i().loadAsync(o,c)},i.external=r("./external"),a.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,a,n){var i=r("./utils"),o=r("./external"),c=r("./utf8"),u=r("./zipEntries"),h=r("./stream/Crc32Probe"),m=r("./nodejsUtils");function f(p){return new o.Promise(function(j,g){var v=p.decompressed.getContentWorker().pipe(new h);v.on("error",function(y){g(y)}).on("end",function(){v.streamInfo.crc32!==p.decompressed.crc32?g(new Error("Corrupted zip : CRC32 mismatch")):j()}).resume()})}a.exports=function(p,j){var g=this;return j=i.extend(j||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:c.utf8decode}),m.isNode&&m.isStream(p)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",p,!0,j.optimizedBinaryString,j.base64).then(function(v){var y=new u(j);return y.load(v),y}).then(function(v){var y=[o.Promise.resolve(v)],N=v.files;if(j.checkCRC32)for(var S=0;S<N.length;S++)y.push(f(N[S]));return o.Promise.all(y)}).then(function(v){for(var y=v.shift(),N=y.files,S=0;S<N.length;S++){var k=N[S],_=k.fileNameStr,T=i.resolve(k.fileNameStr);g.file(T,k.decompressed,{binary:!0,optimizedBinaryString:!0,date:k.date,dir:k.dir,comment:k.fileCommentStr.length?k.fileCommentStr:null,unixPermissions:k.unixPermissions,dosPermissions:k.dosPermissions,createFolders:j.createFolders}),k.dir||(g.file(T).unsafeOriginalName=_)}return y.zipComment.length&&(g.comment=y.zipComment),g})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,a,n){var i=r("../utils"),o=r("../stream/GenericWorker");function c(u,h){o.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(h)}i.inherits(c,o),c.prototype._bindStream=function(u){var h=this;(this._stream=u).pause(),u.on("data",function(m){h.push({data:m,meta:{percent:0}})}).on("error",function(m){h.isPaused?this.generatedError=m:h.error(m)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},c.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},c.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},a.exports=c},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,a,n){var i=r("readable-stream").Readable;function o(c,u,h){i.call(this,u),this._helper=c;var m=this;c.on("data",function(f,p){m.push(f)||m._helper.pause(),h&&h(p)}).on("error",function(f){m.emit("error",f)}).on("end",function(){m.push(null)})}r("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},a.exports=o},{"../utils":32,"readable-stream":16}],14:[function(r,a,n){a.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,o)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var o=new Buffer(i);return o.fill(0),o},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(r,a,n){function i(T,E,z){var M,C=c.getTypeOf(E),A=c.extend(z||{},m);A.date=A.date||new Date,A.compression!==null&&(A.compression=A.compression.toUpperCase()),typeof A.unixPermissions=="string"&&(A.unixPermissions=parseInt(A.unixPermissions,8)),A.unixPermissions&&16384&A.unixPermissions&&(A.dir=!0),A.dosPermissions&&16&A.dosPermissions&&(A.dir=!0),A.dir&&(T=N(T)),A.createFolders&&(M=y(T))&&S.call(this,M,!0);var Z=C==="string"&&A.binary===!1&&A.base64===!1;z&&z.binary!==void 0||(A.binary=!Z),(E instanceof f&&E.uncompressedSize===0||A.dir||!E||E.length===0)&&(A.base64=!1,A.binary=!0,E="",A.compression="STORE",C="string");var I=null;I=E instanceof f||E instanceof u?E:g.isNode&&g.isStream(E)?new v(T,E):c.prepareContent(T,E,A.binary,A.optimizedBinaryString,A.base64);var V=new p(T,I,A);this.files[T]=V}var o=r("./utf8"),c=r("./utils"),u=r("./stream/GenericWorker"),h=r("./stream/StreamHelper"),m=r("./defaults"),f=r("./compressedObject"),p=r("./zipObject"),j=r("./generate"),g=r("./nodejsUtils"),v=r("./nodejs/NodejsStreamInputAdapter"),y=function(T){T.slice(-1)==="/"&&(T=T.substring(0,T.length-1));var E=T.lastIndexOf("/");return 0<E?T.substring(0,E):""},N=function(T){return T.slice(-1)!=="/"&&(T+="/"),T},S=function(T,E){return E=E!==void 0?E:m.createFolders,T=N(T),this.files[T]||i.call(this,T,null,{dir:!0,createFolders:E}),this.files[T]};function k(T){return Object.prototype.toString.call(T)==="[object RegExp]"}var _={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(T){var E,z,M;for(E in this.files)M=this.files[E],(z=E.slice(this.root.length,E.length))&&E.slice(0,this.root.length)===this.root&&T(z,M)},filter:function(T){var E=[];return this.forEach(function(z,M){T(z,M)&&E.push(M)}),E},file:function(T,E,z){if(arguments.length!==1)return T=this.root+T,i.call(this,T,E,z),this;if(k(T)){var M=T;return this.filter(function(A,Z){return!Z.dir&&M.test(A)})}var C=this.files[this.root+T];return C&&!C.dir?C:null},folder:function(T){if(!T)return this;if(k(T))return this.filter(function(C,A){return A.dir&&T.test(C)});var E=this.root+T,z=S.call(this,E),M=this.clone();return M.root=z.name,M},remove:function(T){T=this.root+T;var E=this.files[T];if(E||(T.slice(-1)!=="/"&&(T+="/"),E=this.files[T]),E&&!E.dir)delete this.files[T];else for(var z=this.filter(function(C,A){return A.name.slice(0,T.length)===T}),M=0;M<z.length;M++)delete this.files[z[M].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(T){var E,z={};try{if((z=c.extend(T||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=z.type.toLowerCase(),z.compression=z.compression.toUpperCase(),z.type==="binarystring"&&(z.type="string"),!z.type)throw new Error("No output type specified.");c.checkSupport(z.type),z.platform!=="darwin"&&z.platform!=="freebsd"&&z.platform!=="linux"&&z.platform!=="sunos"||(z.platform="UNIX"),z.platform==="win32"&&(z.platform="DOS");var M=z.comment||this.comment||"";E=j.generateWorker(this,z,M)}catch(C){(E=new u("error")).error(C)}return new h(E,z.type||"string",z.mimeType)},generateAsync:function(T,E){return this.generateInternalStream(T).accumulate(E)},generateNodeStream:function(T,E){return(T=T||{}).type||(T.type="nodebuffer"),this.generateInternalStream(T).toNodejsStream(E)}};a.exports=_},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,a,n){a.exports=r("stream")},{stream:void 0}],17:[function(r,a,n){var i=r("./DataReader");function o(c){i.call(this,c);for(var u=0;u<this.data.length;u++)c[u]=255&c[u]}r("../utils").inherits(o,i),o.prototype.byteAt=function(c){return this.data[this.zero+c]},o.prototype.lastIndexOfSignature=function(c){for(var u=c.charCodeAt(0),h=c.charCodeAt(1),m=c.charCodeAt(2),f=c.charCodeAt(3),p=this.length-4;0<=p;--p)if(this.data[p]===u&&this.data[p+1]===h&&this.data[p+2]===m&&this.data[p+3]===f)return p-this.zero;return-1},o.prototype.readAndCheckSignature=function(c){var u=c.charCodeAt(0),h=c.charCodeAt(1),m=c.charCodeAt(2),f=c.charCodeAt(3),p=this.readData(4);return u===p[0]&&h===p[1]&&m===p[2]&&f===p[3]},o.prototype.readData=function(c){if(this.checkOffset(c),c===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,u},a.exports=o},{"../utils":32,"./DataReader":18}],18:[function(r,a,n){var i=r("../utils");function o(c){this.data=c,this.length=c.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(c){this.checkIndex(this.index+c)},checkIndex:function(c){if(this.length<this.zero+c||c<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+c+"). Corrupted zip ?")},setIndex:function(c){this.checkIndex(c),this.index=c},skip:function(c){this.setIndex(this.index+c)},byteAt:function(){},readInt:function(c){var u,h=0;for(this.checkOffset(c),u=this.index+c-1;u>=this.index;u--)h=(h<<8)+this.byteAt(u);return this.index+=c,h},readString:function(c){return i.transformTo("string",this.readData(c))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var c=this.readInt(4);return new Date(Date.UTC(1980+(c>>25&127),(c>>21&15)-1,c>>16&31,c>>11&31,c>>5&63,(31&c)<<1))}},a.exports=o},{"../utils":32}],19:[function(r,a,n){var i=r("./Uint8ArrayReader");function o(c){i.call(this,c)}r("../utils").inherits(o,i),o.prototype.readData=function(c){this.checkOffset(c);var u=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,u},a.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,a,n){var i=r("./DataReader");function o(c){i.call(this,c)}r("../utils").inherits(o,i),o.prototype.byteAt=function(c){return this.data.charCodeAt(this.zero+c)},o.prototype.lastIndexOfSignature=function(c){return this.data.lastIndexOf(c)-this.zero},o.prototype.readAndCheckSignature=function(c){return c===this.readData(4)},o.prototype.readData=function(c){this.checkOffset(c);var u=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,u},a.exports=o},{"../utils":32,"./DataReader":18}],21:[function(r,a,n){var i=r("./ArrayReader");function o(c){i.call(this,c)}r("../utils").inherits(o,i),o.prototype.readData=function(c){if(this.checkOffset(c),c===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+c);return this.index+=c,u},a.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(r,a,n){var i=r("../utils"),o=r("../support"),c=r("./ArrayReader"),u=r("./StringReader"),h=r("./NodeBufferReader"),m=r("./Uint8ArrayReader");a.exports=function(f){var p=i.getTypeOf(f);return i.checkSupport(p),p!=="string"||o.uint8array?p==="nodebuffer"?new h(f):o.uint8array?new m(i.transformTo("uint8array",f)):new c(i.transformTo("array",f)):new u(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,a,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,a,n){var i=r("./GenericWorker"),o=r("../utils");function c(u){i.call(this,"ConvertWorker to "+u),this.destType=u}o.inherits(c,i),c.prototype.processChunk=function(u){this.push({data:o.transformTo(this.destType,u.data),meta:u.meta})},a.exports=c},{"../utils":32,"./GenericWorker":28}],25:[function(r,a,n){var i=r("./GenericWorker"),o=r("../crc32");function c(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(c,i),c.prototype.processChunk=function(u){this.streamInfo.crc32=o(u.data,this.streamInfo.crc32||0),this.push(u)},a.exports=c},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,a,n){var i=r("../utils"),o=r("./GenericWorker");function c(u){o.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}i.inherits(c,o),c.prototype.processChunk=function(u){if(u){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+u.data.length}o.prototype.processChunk.call(this,u)},a.exports=c},{"../utils":32,"./GenericWorker":28}],27:[function(r,a,n){var i=r("../utils"),o=r("./GenericWorker");function c(u){o.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(m){h.dataIsReady=!0,h.data=m,h.max=m&&m.length||0,h.type=i.getTypeOf(m),h.isPaused||h._tickAndRepeat()},function(m){h.error(m)})}i.inherits(c,o),c.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},c.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},c.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},c.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,h);break;case"uint8array":u=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":u=this.data.slice(this.index,h)}return this.index=h,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},a.exports=c},{"../utils":32,"./GenericWorker":28}],28:[function(r,a,n){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,c){return this._listeners[o].push(c),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,c){if(this._listeners[o])for(var u=0;u<this._listeners[o].length;u++)this._listeners[o][u].call(this,c)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var c=this;return o.on("data",function(u){c.processChunk(u)}),o.on("end",function(){c.end()}),o.on("error",function(u){c.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,c){return this.extraStreamInfo[o]=c,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},a.exports=i},{}],29:[function(r,a,n){var i=r("../utils"),o=r("./ConvertWorker"),c=r("./GenericWorker"),u=r("../base64"),h=r("../support"),m=r("../external"),f=null;if(h.nodestream)try{f=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function p(g,v){return new m.Promise(function(y,N){var S=[],k=g._internalType,_=g._outputType,T=g._mimeType;g.on("data",function(E,z){S.push(E),v&&v(z)}).on("error",function(E){S=[],N(E)}).on("end",function(){try{var E=(function(z,M,C){switch(z){case"blob":return i.newBlob(i.transformTo("arraybuffer",M),C);case"base64":return u.encode(M);default:return i.transformTo(z,M)}})(_,(function(z,M){var C,A=0,Z=null,I=0;for(C=0;C<M.length;C++)I+=M[C].length;switch(z){case"string":return M.join("");case"array":return Array.prototype.concat.apply([],M);case"uint8array":for(Z=new Uint8Array(I),C=0;C<M.length;C++)Z.set(M[C],A),A+=M[C].length;return Z;case"nodebuffer":return Buffer.concat(M);default:throw new Error("concat : unsupported type '"+z+"'")}})(k,S),T);y(E)}catch(z){N(z)}S=[]}).resume()})}function j(g,v,y){var N=v;switch(v){case"blob":case"arraybuffer":N="uint8array";break;case"base64":N="string"}try{this._internalType=N,this._outputType=v,this._mimeType=y,i.checkSupport(N),this._worker=g.pipe(new o(N)),g.lock()}catch(S){this._worker=new c("error"),this._worker.error(S)}}j.prototype={accumulate:function(g){return p(this,g)},on:function(g,v){var y=this;return g==="data"?this._worker.on(g,function(N){v.call(y,N.data,N.meta)}):this._worker.on(g,function(){i.delay(v,arguments,y)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(g){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},g)}},a.exports=j},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,a,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=typeof Buffer<"u",n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var i=new ArrayBuffer(0);try{n.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),n.blob=o.getBlob("application/zip").size===0}catch{n.blob=!1}}}try{n.nodestream=!!r("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(r,a,n){for(var i=r("./utils"),o=r("./support"),c=r("./nodejsUtils"),u=r("./stream/GenericWorker"),h=new Array(256),m=0;m<256;m++)h[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;h[254]=h[254]=1;function f(){u.call(this,"utf-8 decode"),this.leftOver=null}function p(){u.call(this,"utf-8 encode")}n.utf8encode=function(j){return o.nodebuffer?c.newBufferFrom(j,"utf-8"):(function(g){var v,y,N,S,k,_=g.length,T=0;for(S=0;S<_;S++)(64512&(y=g.charCodeAt(S)))==55296&&S+1<_&&(64512&(N=g.charCodeAt(S+1)))==56320&&(y=65536+(y-55296<<10)+(N-56320),S++),T+=y<128?1:y<2048?2:y<65536?3:4;for(v=o.uint8array?new Uint8Array(T):new Array(T),S=k=0;k<T;S++)(64512&(y=g.charCodeAt(S)))==55296&&S+1<_&&(64512&(N=g.charCodeAt(S+1)))==56320&&(y=65536+(y-55296<<10)+(N-56320),S++),y<128?v[k++]=y:(y<2048?v[k++]=192|y>>>6:(y<65536?v[k++]=224|y>>>12:(v[k++]=240|y>>>18,v[k++]=128|y>>>12&63),v[k++]=128|y>>>6&63),v[k++]=128|63&y);return v})(j)},n.utf8decode=function(j){return o.nodebuffer?i.transformTo("nodebuffer",j).toString("utf-8"):(function(g){var v,y,N,S,k=g.length,_=new Array(2*k);for(v=y=0;v<k;)if((N=g[v++])<128)_[y++]=N;else if(4<(S=h[N]))_[y++]=65533,v+=S-1;else{for(N&=S===2?31:S===3?15:7;1<S&&v<k;)N=N<<6|63&g[v++],S--;1<S?_[y++]=65533:N<65536?_[y++]=N:(N-=65536,_[y++]=55296|N>>10&1023,_[y++]=56320|1023&N)}return _.length!==y&&(_.subarray?_=_.subarray(0,y):_.length=y),i.applyFromCharCode(_)})(j=i.transformTo(o.uint8array?"uint8array":"array",j))},i.inherits(f,u),f.prototype.processChunk=function(j){var g=i.transformTo(o.uint8array?"uint8array":"array",j.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var v=g;(g=new Uint8Array(v.length+this.leftOver.length)).set(this.leftOver,0),g.set(v,this.leftOver.length)}else g=this.leftOver.concat(g);this.leftOver=null}var y=(function(S,k){var _;for((k=k||S.length)>S.length&&(k=S.length),_=k-1;0<=_&&(192&S[_])==128;)_--;return _<0||_===0?k:_+h[S[_]]>k?_:k})(g),N=g;y!==g.length&&(o.uint8array?(N=g.subarray(0,y),this.leftOver=g.subarray(y,g.length)):(N=g.slice(0,y),this.leftOver=g.slice(y,g.length))),this.push({data:n.utf8decode(N),meta:j.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=f,i.inherits(p,u),p.prototype.processChunk=function(j){this.push({data:n.utf8encode(j.data),meta:j.meta})},n.Utf8EncodeWorker=p},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,a,n){var i=r("./support"),o=r("./base64"),c=r("./nodejsUtils"),u=r("./external");function h(v){return v}function m(v,y){for(var N=0;N<v.length;++N)y[N]=255&v.charCodeAt(N);return y}r("setimmediate"),n.newBlob=function(v,y){n.checkSupport("blob");try{return new Blob([v],{type:y})}catch{try{var N=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return N.append(v),N.getBlob(y)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(v,y,N){var S=[],k=0,_=v.length;if(_<=N)return String.fromCharCode.apply(null,v);for(;k<_;)y==="array"||y==="nodebuffer"?S.push(String.fromCharCode.apply(null,v.slice(k,Math.min(k+N,_)))):S.push(String.fromCharCode.apply(null,v.subarray(k,Math.min(k+N,_)))),k+=N;return S.join("")},stringifyByChar:function(v){for(var y="",N=0;N<v.length;N++)y+=String.fromCharCode(v[N]);return y},applyCanBeUsed:{uint8array:(function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,c.allocBuffer(1)).length===1}catch{return!1}})()}};function p(v){var y=65536,N=n.getTypeOf(v),S=!0;if(N==="uint8array"?S=f.applyCanBeUsed.uint8array:N==="nodebuffer"&&(S=f.applyCanBeUsed.nodebuffer),S)for(;1<y;)try{return f.stringifyByChunk(v,N,y)}catch{y=Math.floor(y/2)}return f.stringifyByChar(v)}function j(v,y){for(var N=0;N<v.length;N++)y[N]=v[N];return y}n.applyFromCharCode=p;var g={};g.string={string:h,array:function(v){return m(v,new Array(v.length))},arraybuffer:function(v){return g.string.uint8array(v).buffer},uint8array:function(v){return m(v,new Uint8Array(v.length))},nodebuffer:function(v){return m(v,c.allocBuffer(v.length))}},g.array={string:p,array:h,arraybuffer:function(v){return new Uint8Array(v).buffer},uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return c.newBufferFrom(v)}},g.arraybuffer={string:function(v){return p(new Uint8Array(v))},array:function(v){return j(new Uint8Array(v),new Array(v.byteLength))},arraybuffer:h,uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return c.newBufferFrom(new Uint8Array(v))}},g.uint8array={string:p,array:function(v){return j(v,new Array(v.length))},arraybuffer:function(v){return v.buffer},uint8array:h,nodebuffer:function(v){return c.newBufferFrom(v)}},g.nodebuffer={string:p,array:function(v){return j(v,new Array(v.length))},arraybuffer:function(v){return g.nodebuffer.uint8array(v).buffer},uint8array:function(v){return j(v,new Uint8Array(v.length))},nodebuffer:h},n.transformTo=function(v,y){if(y=y||"",!v)return y;n.checkSupport(v);var N=n.getTypeOf(y);return g[N][v](y)},n.resolve=function(v){for(var y=v.split("/"),N=[],S=0;S<y.length;S++){var k=y[S];k==="."||k===""&&S!==0&&S!==y.length-1||(k===".."?N.pop():N.push(k))}return N.join("/")},n.getTypeOf=function(v){return typeof v=="string"?"string":Object.prototype.toString.call(v)==="[object Array]"?"array":i.nodebuffer&&c.isBuffer(v)?"nodebuffer":i.uint8array&&v instanceof Uint8Array?"uint8array":i.arraybuffer&&v instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(v){if(!i[v.toLowerCase()])throw new Error(v+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(v){var y,N,S="";for(N=0;N<(v||"").length;N++)S+="\\x"+((y=v.charCodeAt(N))<16?"0":"")+y.toString(16).toUpperCase();return S},n.delay=function(v,y,N){setImmediate(function(){v.apply(N||null,y||[])})},n.inherits=function(v,y){function N(){}N.prototype=y.prototype,v.prototype=new N},n.extend=function(){var v,y,N={};for(v=0;v<arguments.length;v++)for(y in arguments[v])Object.prototype.hasOwnProperty.call(arguments[v],y)&&N[y]===void 0&&(N[y]=arguments[v][y]);return N},n.prepareContent=function(v,y,N,S,k){return u.Promise.resolve(y).then(function(_){return i.blob&&(_ instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(_))!==-1)&&typeof FileReader<"u"?new u.Promise(function(T,E){var z=new FileReader;z.onload=function(M){T(M.target.result)},z.onerror=function(M){E(M.target.error)},z.readAsArrayBuffer(_)}):_}).then(function(_){var T=n.getTypeOf(_);return T?(T==="arraybuffer"?_=n.transformTo("uint8array",_):T==="string"&&(k?_=o.decode(_):N&&S!==!0&&(_=(function(E){return m(E,i.uint8array?new Uint8Array(E.length):new Array(E.length))})(_))),_):u.Promise.reject(new Error("Can't read the data of '"+v+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,a,n){var i=r("./reader/readerFor"),o=r("./utils"),c=r("./signature"),u=r("./zipEntry"),h=r("./support");function m(f){this.files=[],this.loadOptions=f}m.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var p=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(p)+", expected "+o.pretty(f)+")")}},isSignature:function(f,p){var j=this.reader.index;this.reader.setIndex(f);var g=this.reader.readString(4)===p;return this.reader.setIndex(j),g},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),p=h.uint8array?"uint8array":"array",j=o.transformTo(p,f);this.zipComment=this.loadOptions.decodeFileName(j)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,p,j,g=this.zip64EndOfCentralSize-44;0<g;)f=this.reader.readInt(2),p=this.reader.readInt(4),j=this.reader.readData(p),this.zip64ExtensibleData[f]={id:f,length:p,value:j}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,p;for(f=0;f<this.files.length;f++)p=this.files[f],this.reader.setIndex(p.localHeaderOffset),this.checkSignature(c.LOCAL_FILE_HEADER),p.readLocalPart(this.reader),p.handleUTF8(),p.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(c.CENTRAL_FILE_HEADER);)(f=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(c.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,c.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var p=f;if(this.checkSignature(c.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,c.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var j=this.centralDirOffset+this.centralDirSize;this.zip64&&(j+=20,j+=12+this.zip64EndOfCentralSize);var g=p-j;if(0<g)this.isSignature(p,c.CENTRAL_FILE_HEADER)||(this.reader.zero=g);else if(g<0)throw new Error("Corrupted zip: missing "+Math.abs(g)+" bytes.")},prepareReader:function(f){this.reader=i(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},a.exports=m},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,a,n){var i=r("./reader/readerFor"),o=r("./utils"),c=r("./compressedObject"),u=r("./crc32"),h=r("./utf8"),m=r("./compressions"),f=r("./support");function p(j,g){this.options=j,this.loadOptions=g}p.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(j){var g,v;if(j.skip(22),this.fileNameLength=j.readInt(2),v=j.readInt(2),this.fileName=j.readData(this.fileNameLength),j.skip(v),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((g=(function(y){for(var N in m)if(Object.prototype.hasOwnProperty.call(m,N)&&m[N].magic===y)return m[N];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new c(this.compressedSize,this.uncompressedSize,this.crc32,g,j.readData(this.compressedSize))},readCentralPart:function(j){this.versionMadeBy=j.readInt(2),j.skip(2),this.bitFlag=j.readInt(2),this.compressionMethod=j.readString(2),this.date=j.readDate(),this.crc32=j.readInt(4),this.compressedSize=j.readInt(4),this.uncompressedSize=j.readInt(4);var g=j.readInt(2);if(this.extraFieldsLength=j.readInt(2),this.fileCommentLength=j.readInt(2),this.diskNumberStart=j.readInt(2),this.internalFileAttributes=j.readInt(2),this.externalFileAttributes=j.readInt(4),this.localHeaderOffset=j.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");j.skip(g),this.readExtraFields(j),this.parseZIP64ExtraField(j),this.fileComment=j.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var j=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),j==0&&(this.dosPermissions=63&this.externalFileAttributes),j==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var j=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=j.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=j.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=j.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=j.readInt(4))}},readExtraFields:function(j){var g,v,y,N=j.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});j.index+4<N;)g=j.readInt(2),v=j.readInt(2),y=j.readData(v),this.extraFields[g]={id:g,length:v,value:y};j.setIndex(N)},handleUTF8:function(){var j=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var g=this.findExtraFieldUnicodePath();if(g!==null)this.fileNameStr=g;else{var v=o.transformTo(j,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(v)}var y=this.findExtraFieldUnicodeComment();if(y!==null)this.fileCommentStr=y;else{var N=o.transformTo(j,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(N)}}},findExtraFieldUnicodePath:function(){var j=this.extraFields[28789];if(j){var g=i(j.value);return g.readInt(1)!==1||u(this.fileName)!==g.readInt(4)?null:h.utf8decode(g.readData(j.length-5))}return null},findExtraFieldUnicodeComment:function(){var j=this.extraFields[25461];if(j){var g=i(j.value);return g.readInt(1)!==1||u(this.fileComment)!==g.readInt(4)?null:h.utf8decode(g.readData(j.length-5))}return null}},a.exports=p},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,a,n){function i(g,v,y){this.name=g,this.dir=y.dir,this.date=y.date,this.comment=y.comment,this.unixPermissions=y.unixPermissions,this.dosPermissions=y.dosPermissions,this._data=v,this._dataBinary=y.binary,this.options={compression:y.compression,compressionOptions:y.compressionOptions}}var o=r("./stream/StreamHelper"),c=r("./stream/DataWorker"),u=r("./utf8"),h=r("./compressedObject"),m=r("./stream/GenericWorker");i.prototype={internalStream:function(g){var v=null,y="string";try{if(!g)throw new Error("No output type specified.");var N=(y=g.toLowerCase())==="string"||y==="text";y!=="binarystring"&&y!=="text"||(y="string"),v=this._decompressWorker();var S=!this._dataBinary;S&&!N&&(v=v.pipe(new u.Utf8EncodeWorker)),!S&&N&&(v=v.pipe(new u.Utf8DecodeWorker))}catch(k){(v=new m("error")).error(k)}return new o(v,y,"")},async:function(g,v){return this.internalStream(g).accumulate(v)},nodeStream:function(g,v){return this.internalStream(g||"nodebuffer").toNodejsStream(v)},_compressWorker:function(g,v){if(this._data instanceof h&&this._data.compression.magic===g.magic)return this._data.getCompressedWorker();var y=this._decompressWorker();return this._dataBinary||(y=y.pipe(new u.Utf8EncodeWorker)),h.createWorkerFrom(y,g,v)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof m?this._data:new c(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],p=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},j=0;j<f.length;j++)i.prototype[f[j]]=p;a.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,a,n){(function(i){var o,c,u=i.MutationObserver||i.WebKitMutationObserver;if(u){var h=0,m=new u(g),f=i.document.createTextNode("");m.observe(f,{characterData:!0}),o=function(){f.data=h=++h%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var v=i.document.createElement("script");v.onreadystatechange=function(){g(),v.onreadystatechange=null,v.parentNode.removeChild(v),v=null},i.document.documentElement.appendChild(v)}:function(){setTimeout(g,0)};else{var p=new i.MessageChannel;p.port1.onmessage=g,o=function(){p.port2.postMessage(0)}}var j=[];function g(){var v,y;c=!0;for(var N=j.length;N;){for(y=j,j=[],v=-1;++v<N;)y[v]();N=j.length}c=!1}a.exports=function(v){j.push(v)!==1||c||o()}}).call(this,typeof xn<"u"?xn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,a,n){var i=r("immediate");function o(){}var c={},u=["REJECTED"],h=["FULFILLED"],m=["PENDING"];function f(N){if(typeof N!="function")throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,N!==o&&v(this,N)}function p(N,S,k){this.promise=N,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof k=="function"&&(this.onRejected=k,this.callRejected=this.otherCallRejected)}function j(N,S,k){i(function(){var _;try{_=S(k)}catch(T){return c.reject(N,T)}_===N?c.reject(N,new TypeError("Cannot resolve promise with itself")):c.resolve(N,_)})}function g(N){var S=N&&N.then;if(N&&(typeof N=="object"||typeof N=="function")&&typeof S=="function")return function(){S.apply(N,arguments)}}function v(N,S){var k=!1;function _(z){k||(k=!0,c.reject(N,z))}function T(z){k||(k=!0,c.resolve(N,z))}var E=y(function(){S(T,_)});E.status==="error"&&_(E.value)}function y(N,S){var k={};try{k.value=N(S),k.status="success"}catch(_){k.status="error",k.value=_}return k}(a.exports=f).prototype.finally=function(N){if(typeof N!="function")return this;var S=this.constructor;return this.then(function(k){return S.resolve(N()).then(function(){return k})},function(k){return S.resolve(N()).then(function(){throw k})})},f.prototype.catch=function(N){return this.then(null,N)},f.prototype.then=function(N,S){if(typeof N!="function"&&this.state===h||typeof S!="function"&&this.state===u)return this;var k=new this.constructor(o);return this.state!==m?j(k,this.state===h?N:S,this.outcome):this.queue.push(new p(k,N,S)),k},p.prototype.callFulfilled=function(N){c.resolve(this.promise,N)},p.prototype.otherCallFulfilled=function(N){j(this.promise,this.onFulfilled,N)},p.prototype.callRejected=function(N){c.reject(this.promise,N)},p.prototype.otherCallRejected=function(N){j(this.promise,this.onRejected,N)},c.resolve=function(N,S){var k=y(g,S);if(k.status==="error")return c.reject(N,k.value);var _=k.value;if(_)v(N,_);else{N.state=h,N.outcome=S;for(var T=-1,E=N.queue.length;++T<E;)N.queue[T].callFulfilled(S)}return N},c.reject=function(N,S){N.state=u,N.outcome=S;for(var k=-1,_=N.queue.length;++k<_;)N.queue[k].callRejected(S);return N},f.resolve=function(N){return N instanceof this?N:c.resolve(new this(o),N)},f.reject=function(N){var S=new this(o);return c.reject(S,N)},f.all=function(N){var S=this;if(Object.prototype.toString.call(N)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=N.length,_=!1;if(!k)return this.resolve([]);for(var T=new Array(k),E=0,z=-1,M=new this(o);++z<k;)C(N[z],z);return M;function C(A,Z){S.resolve(A).then(function(I){T[Z]=I,++E!==k||_||(_=!0,c.resolve(M,T))},function(I){_||(_=!0,c.reject(M,I))})}},f.race=function(N){var S=this;if(Object.prototype.toString.call(N)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=N.length,_=!1;if(!k)return this.resolve([]);for(var T=-1,E=new this(o);++T<k;)z=N[T],S.resolve(z).then(function(M){_||(_=!0,c.resolve(E,M))},function(M){_||(_=!0,c.reject(E,M))});var z;return E}},{immediate:36}],38:[function(r,a,n){var i={};(0,r("./lib/utils/common").assign)(i,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),a.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,a,n){var i=r("./zlib/deflate"),o=r("./utils/common"),c=r("./utils/strings"),u=r("./zlib/messages"),h=r("./zlib/zstream"),m=Object.prototype.toString,f=0,p=-1,j=0,g=8;function v(N){if(!(this instanceof v))return new v(N);this.options=o.assign({level:p,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:j,to:""},N||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var k=i.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(k!==f)throw new Error(u[k]);if(S.header&&i.deflateSetHeader(this.strm,S.header),S.dictionary){var _;if(_=typeof S.dictionary=="string"?c.string2buf(S.dictionary):m.call(S.dictionary)==="[object ArrayBuffer]"?new Uint8Array(S.dictionary):S.dictionary,(k=i.deflateSetDictionary(this.strm,_))!==f)throw new Error(u[k]);this._dict_set=!0}}function y(N,S){var k=new v(S);if(k.push(N,!0),k.err)throw k.msg||u[k.err];return k.result}v.prototype.push=function(N,S){var k,_,T=this.strm,E=this.options.chunkSize;if(this.ended)return!1;_=S===~~S?S:S===!0?4:0,typeof N=="string"?T.input=c.string2buf(N):m.call(N)==="[object ArrayBuffer]"?T.input=new Uint8Array(N):T.input=N,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new o.Buf8(E),T.next_out=0,T.avail_out=E),(k=i.deflate(T,_))!==1&&k!==f)return this.onEnd(k),!(this.ended=!0);T.avail_out!==0&&(T.avail_in!==0||_!==4&&_!==2)||(this.options.to==="string"?this.onData(c.buf2binstring(o.shrinkBuf(T.output,T.next_out))):this.onData(o.shrinkBuf(T.output,T.next_out)))}while((0<T.avail_in||T.avail_out===0)&&k!==1);return _===4?(k=i.deflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===f):_!==2||(this.onEnd(f),!(T.avail_out=0))},v.prototype.onData=function(N){this.chunks.push(N)},v.prototype.onEnd=function(N){N===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=N,this.msg=this.strm.msg},n.Deflate=v,n.deflate=y,n.deflateRaw=function(N,S){return(S=S||{}).raw=!0,y(N,S)},n.gzip=function(N,S){return(S=S||{}).gzip=!0,y(N,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,a,n){var i=r("./zlib/inflate"),o=r("./utils/common"),c=r("./utils/strings"),u=r("./zlib/constants"),h=r("./zlib/messages"),m=r("./zlib/zstream"),f=r("./zlib/gzheader"),p=Object.prototype.toString;function j(v){if(!(this instanceof j))return new j(v);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},v||{});var y=this.options;y.raw&&0<=y.windowBits&&y.windowBits<16&&(y.windowBits=-y.windowBits,y.windowBits===0&&(y.windowBits=-15)),!(0<=y.windowBits&&y.windowBits<16)||v&&v.windowBits||(y.windowBits+=32),15<y.windowBits&&y.windowBits<48&&(15&y.windowBits)==0&&(y.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var N=i.inflateInit2(this.strm,y.windowBits);if(N!==u.Z_OK)throw new Error(h[N]);this.header=new f,i.inflateGetHeader(this.strm,this.header)}function g(v,y){var N=new j(y);if(N.push(v,!0),N.err)throw N.msg||h[N.err];return N.result}j.prototype.push=function(v,y){var N,S,k,_,T,E,z=this.strm,M=this.options.chunkSize,C=this.options.dictionary,A=!1;if(this.ended)return!1;S=y===~~y?y:y===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof v=="string"?z.input=c.binstring2buf(v):p.call(v)==="[object ArrayBuffer]"?z.input=new Uint8Array(v):z.input=v,z.next_in=0,z.avail_in=z.input.length;do{if(z.avail_out===0&&(z.output=new o.Buf8(M),z.next_out=0,z.avail_out=M),(N=i.inflate(z,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&C&&(E=typeof C=="string"?c.string2buf(C):p.call(C)==="[object ArrayBuffer]"?new Uint8Array(C):C,N=i.inflateSetDictionary(this.strm,E)),N===u.Z_BUF_ERROR&&A===!0&&(N=u.Z_OK,A=!1),N!==u.Z_STREAM_END&&N!==u.Z_OK)return this.onEnd(N),!(this.ended=!0);z.next_out&&(z.avail_out!==0&&N!==u.Z_STREAM_END&&(z.avail_in!==0||S!==u.Z_FINISH&&S!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(k=c.utf8border(z.output,z.next_out),_=z.next_out-k,T=c.buf2string(z.output,k),z.next_out=_,z.avail_out=M-_,_&&o.arraySet(z.output,z.output,k,_,0),this.onData(T)):this.onData(o.shrinkBuf(z.output,z.next_out)))),z.avail_in===0&&z.avail_out===0&&(A=!0)}while((0<z.avail_in||z.avail_out===0)&&N!==u.Z_STREAM_END);return N===u.Z_STREAM_END&&(S=u.Z_FINISH),S===u.Z_FINISH?(N=i.inflateEnd(this.strm),this.onEnd(N),this.ended=!0,N===u.Z_OK):S!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(z.avail_out=0))},j.prototype.onData=function(v){this.chunks.push(v)},j.prototype.onEnd=function(v){v===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},n.Inflate=j,n.inflate=g,n.inflateRaw=function(v,y){return(y=y||{}).raw=!0,g(v,y)},n.ungzip=g},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,a,n){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(u){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var m=h.shift();if(m){if(typeof m!="object")throw new TypeError(m+"must be non-object");for(var f in m)m.hasOwnProperty(f)&&(u[f]=m[f])}}return u},n.shrinkBuf=function(u,h){return u.length===h?u:u.subarray?u.subarray(0,h):(u.length=h,u)};var o={arraySet:function(u,h,m,f,p){if(h.subarray&&u.subarray)u.set(h.subarray(m,m+f),p);else for(var j=0;j<f;j++)u[p+j]=h[m+j]},flattenChunks:function(u){var h,m,f,p,j,g;for(h=f=0,m=u.length;h<m;h++)f+=u[h].length;for(g=new Uint8Array(f),h=p=0,m=u.length;h<m;h++)j=u[h],g.set(j,p),p+=j.length;return g}},c={arraySet:function(u,h,m,f,p){for(var j=0;j<f;j++)u[p+j]=h[m+j]},flattenChunks:function(u){return[].concat.apply([],u)}};n.setTyped=function(u){u?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,o)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,c))},n.setTyped(i)},{}],42:[function(r,a,n){var i=r("./common"),o=!0,c=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{c=!1}for(var u=new i.Buf8(256),h=0;h<256;h++)u[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function m(f,p){if(p<65537&&(f.subarray&&c||!f.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(f,p));for(var j="",g=0;g<p;g++)j+=String.fromCharCode(f[g]);return j}u[254]=u[254]=1,n.string2buf=function(f){var p,j,g,v,y,N=f.length,S=0;for(v=0;v<N;v++)(64512&(j=f.charCodeAt(v)))==55296&&v+1<N&&(64512&(g=f.charCodeAt(v+1)))==56320&&(j=65536+(j-55296<<10)+(g-56320),v++),S+=j<128?1:j<2048?2:j<65536?3:4;for(p=new i.Buf8(S),v=y=0;y<S;v++)(64512&(j=f.charCodeAt(v)))==55296&&v+1<N&&(64512&(g=f.charCodeAt(v+1)))==56320&&(j=65536+(j-55296<<10)+(g-56320),v++),j<128?p[y++]=j:(j<2048?p[y++]=192|j>>>6:(j<65536?p[y++]=224|j>>>12:(p[y++]=240|j>>>18,p[y++]=128|j>>>12&63),p[y++]=128|j>>>6&63),p[y++]=128|63&j);return p},n.buf2binstring=function(f){return m(f,f.length)},n.binstring2buf=function(f){for(var p=new i.Buf8(f.length),j=0,g=p.length;j<g;j++)p[j]=f.charCodeAt(j);return p},n.buf2string=function(f,p){var j,g,v,y,N=p||f.length,S=new Array(2*N);for(j=g=0;j<N;)if((v=f[j++])<128)S[g++]=v;else if(4<(y=u[v]))S[g++]=65533,j+=y-1;else{for(v&=y===2?31:y===3?15:7;1<y&&j<N;)v=v<<6|63&f[j++],y--;1<y?S[g++]=65533:v<65536?S[g++]=v:(v-=65536,S[g++]=55296|v>>10&1023,S[g++]=56320|1023&v)}return m(S,g)},n.utf8border=function(f,p){var j;for((p=p||f.length)>f.length&&(p=f.length),j=p-1;0<=j&&(192&f[j])==128;)j--;return j<0||j===0?p:j+u[f[j]]>p?j:p}},{"./common":41}],43:[function(r,a,n){a.exports=function(i,o,c,u){for(var h=65535&i|0,m=i>>>16&65535|0,f=0;c!==0;){for(c-=f=2e3<c?2e3:c;m=m+(h=h+o[u++]|0)|0,--f;);h%=65521,m%=65521}return h|m<<16|0}},{}],44:[function(r,a,n){a.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,a,n){var i=(function(){for(var o,c=[],u=0;u<256;u++){o=u;for(var h=0;h<8;h++)o=1&o?3988292384^o>>>1:o>>>1;c[u]=o}return c})();a.exports=function(o,c,u,h){var m=i,f=h+u;o^=-1;for(var p=h;p<f;p++)o=o>>>8^m[255&(o^c[p])];return-1^o}},{}],46:[function(r,a,n){var i,o=r("../utils/common"),c=r("./trees"),u=r("./adler32"),h=r("./crc32"),m=r("./messages"),f=0,p=4,j=0,g=-2,v=-1,y=4,N=2,S=8,k=9,_=286,T=30,E=19,z=2*_+1,M=15,C=3,A=258,Z=A+C+1,I=42,V=113,R=1,q=2,J=3,se=4;function Y(G,ce){return G.msg=m[ce],ce}function ee(G){return(G<<1)-(4<G?9:0)}function te(G){for(var ce=G.length;0<=--ce;)G[ce]=0}function K(G){var ce=G.state,X=ce.pending;X>G.avail_out&&(X=G.avail_out),X!==0&&(o.arraySet(G.output,ce.pending_buf,ce.pending_out,X,G.next_out),G.next_out+=X,ce.pending_out+=X,G.total_out+=X,G.avail_out-=X,ce.pending-=X,ce.pending===0&&(ce.pending_out=0))}function $(G,ce){c._tr_flush_block(G,0<=G.block_start?G.block_start:-1,G.strstart-G.block_start,ce),G.block_start=G.strstart,K(G.strm)}function le(G,ce){G.pending_buf[G.pending++]=ce}function ie(G,ce){G.pending_buf[G.pending++]=ce>>>8&255,G.pending_buf[G.pending++]=255&ce}function oe(G,ce){var X,O,L=G.max_chain_length,B=G.strstart,ne=G.prev_length,me=G.nice_match,xe=G.strstart>G.w_size-Z?G.strstart-(G.w_size-Z):0,_e=G.window,Ce=G.w_mask,Te=G.prev,Be=G.strstart+A,ze=_e[B+ne-1],We=_e[B+ne];G.prev_length>=G.good_match&&(L>>=2),me>G.lookahead&&(me=G.lookahead);do if(_e[(X=ce)+ne]===We&&_e[X+ne-1]===ze&&_e[X]===_e[B]&&_e[++X]===_e[B+1]){B+=2,X++;do;while(_e[++B]===_e[++X]&&_e[++B]===_e[++X]&&_e[++B]===_e[++X]&&_e[++B]===_e[++X]&&_e[++B]===_e[++X]&&_e[++B]===_e[++X]&&_e[++B]===_e[++X]&&_e[++B]===_e[++X]&&B<Be);if(O=A-(Be-B),B=Be-A,ne<O){if(G.match_start=ce,me<=(ne=O))break;ze=_e[B+ne-1],We=_e[B+ne]}}while((ce=Te[ce&Ce])>xe&&--L!=0);return ne<=G.lookahead?ne:G.lookahead}function de(G){var ce,X,O,L,B,ne,me,xe,_e,Ce,Te=G.w_size;do{if(L=G.window_size-G.lookahead-G.strstart,G.strstart>=Te+(Te-Z)){for(o.arraySet(G.window,G.window,Te,Te,0),G.match_start-=Te,G.strstart-=Te,G.block_start-=Te,ce=X=G.hash_size;O=G.head[--ce],G.head[ce]=Te<=O?O-Te:0,--X;);for(ce=X=Te;O=G.prev[--ce],G.prev[ce]=Te<=O?O-Te:0,--X;);L+=Te}if(G.strm.avail_in===0)break;if(ne=G.strm,me=G.window,xe=G.strstart+G.lookahead,_e=L,Ce=void 0,Ce=ne.avail_in,_e<Ce&&(Ce=_e),X=Ce===0?0:(ne.avail_in-=Ce,o.arraySet(me,ne.input,ne.next_in,Ce,xe),ne.state.wrap===1?ne.adler=u(ne.adler,me,Ce,xe):ne.state.wrap===2&&(ne.adler=h(ne.adler,me,Ce,xe)),ne.next_in+=Ce,ne.total_in+=Ce,Ce),G.lookahead+=X,G.lookahead+G.insert>=C)for(B=G.strstart-G.insert,G.ins_h=G.window[B],G.ins_h=(G.ins_h<<G.hash_shift^G.window[B+1])&G.hash_mask;G.insert&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[B+C-1])&G.hash_mask,G.prev[B&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=B,B++,G.insert--,!(G.lookahead+G.insert<C)););}while(G.lookahead<Z&&G.strm.avail_in!==0)}function U(G,ce){for(var X,O;;){if(G.lookahead<Z){if(de(G),G.lookahead<Z&&ce===f)return R;if(G.lookahead===0)break}if(X=0,G.lookahead>=C&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+C-1])&G.hash_mask,X=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart),X!==0&&G.strstart-X<=G.w_size-Z&&(G.match_length=oe(G,X)),G.match_length>=C)if(O=c._tr_tally(G,G.strstart-G.match_start,G.match_length-C),G.lookahead-=G.match_length,G.match_length<=G.max_lazy_match&&G.lookahead>=C){for(G.match_length--;G.strstart++,G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+C-1])&G.hash_mask,X=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart,--G.match_length!=0;);G.strstart++}else G.strstart+=G.match_length,G.match_length=0,G.ins_h=G.window[G.strstart],G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+1])&G.hash_mask;else O=c._tr_tally(G,0,G.window[G.strstart]),G.lookahead--,G.strstart++;if(O&&($(G,!1),G.strm.avail_out===0))return R}return G.insert=G.strstart<C-1?G.strstart:C-1,ce===p?($(G,!0),G.strm.avail_out===0?J:se):G.last_lit&&($(G,!1),G.strm.avail_out===0)?R:q}function F(G,ce){for(var X,O,L;;){if(G.lookahead<Z){if(de(G),G.lookahead<Z&&ce===f)return R;if(G.lookahead===0)break}if(X=0,G.lookahead>=C&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+C-1])&G.hash_mask,X=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart),G.prev_length=G.match_length,G.prev_match=G.match_start,G.match_length=C-1,X!==0&&G.prev_length<G.max_lazy_match&&G.strstart-X<=G.w_size-Z&&(G.match_length=oe(G,X),G.match_length<=5&&(G.strategy===1||G.match_length===C&&4096<G.strstart-G.match_start)&&(G.match_length=C-1)),G.prev_length>=C&&G.match_length<=G.prev_length){for(L=G.strstart+G.lookahead-C,O=c._tr_tally(G,G.strstart-1-G.prev_match,G.prev_length-C),G.lookahead-=G.prev_length-1,G.prev_length-=2;++G.strstart<=L&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+C-1])&G.hash_mask,X=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart),--G.prev_length!=0;);if(G.match_available=0,G.match_length=C-1,G.strstart++,O&&($(G,!1),G.strm.avail_out===0))return R}else if(G.match_available){if((O=c._tr_tally(G,0,G.window[G.strstart-1]))&&$(G,!1),G.strstart++,G.lookahead--,G.strm.avail_out===0)return R}else G.match_available=1,G.strstart++,G.lookahead--}return G.match_available&&(O=c._tr_tally(G,0,G.window[G.strstart-1]),G.match_available=0),G.insert=G.strstart<C-1?G.strstart:C-1,ce===p?($(G,!0),G.strm.avail_out===0?J:se):G.last_lit&&($(G,!1),G.strm.avail_out===0)?R:q}function Q(G,ce,X,O,L){this.good_length=G,this.max_lazy=ce,this.nice_length=X,this.max_chain=O,this.func=L}function W(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*z),this.dyn_dtree=new o.Buf16(2*(2*T+1)),this.bl_tree=new o.Buf16(2*(2*E+1)),te(this.dyn_ltree),te(this.dyn_dtree),te(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(M+1),this.heap=new o.Buf16(2*_+1),te(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*_+1),te(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function H(G){var ce;return G&&G.state?(G.total_in=G.total_out=0,G.data_type=N,(ce=G.state).pending=0,ce.pending_out=0,ce.wrap<0&&(ce.wrap=-ce.wrap),ce.status=ce.wrap?I:V,G.adler=ce.wrap===2?0:1,ce.last_flush=f,c._tr_init(ce),j):Y(G,g)}function re(G){var ce=H(G);return ce===j&&(function(X){X.window_size=2*X.w_size,te(X.head),X.max_lazy_match=i[X.level].max_lazy,X.good_match=i[X.level].good_length,X.nice_match=i[X.level].nice_length,X.max_chain_length=i[X.level].max_chain,X.strstart=0,X.block_start=0,X.lookahead=0,X.insert=0,X.match_length=X.prev_length=C-1,X.match_available=0,X.ins_h=0})(G.state),ce}function he(G,ce,X,O,L,B){if(!G)return g;var ne=1;if(ce===v&&(ce=6),O<0?(ne=0,O=-O):15<O&&(ne=2,O-=16),L<1||k<L||X!==S||O<8||15<O||ce<0||9<ce||B<0||y<B)return Y(G,g);O===8&&(O=9);var me=new W;return(G.state=me).strm=G,me.wrap=ne,me.gzhead=null,me.w_bits=O,me.w_size=1<<me.w_bits,me.w_mask=me.w_size-1,me.hash_bits=L+7,me.hash_size=1<<me.hash_bits,me.hash_mask=me.hash_size-1,me.hash_shift=~~((me.hash_bits+C-1)/C),me.window=new o.Buf8(2*me.w_size),me.head=new o.Buf16(me.hash_size),me.prev=new o.Buf16(me.w_size),me.lit_bufsize=1<<L+6,me.pending_buf_size=4*me.lit_bufsize,me.pending_buf=new o.Buf8(me.pending_buf_size),me.d_buf=1*me.lit_bufsize,me.l_buf=3*me.lit_bufsize,me.level=ce,me.strategy=B,me.method=X,re(G)}i=[new Q(0,0,0,0,function(G,ce){var X=65535;for(X>G.pending_buf_size-5&&(X=G.pending_buf_size-5);;){if(G.lookahead<=1){if(de(G),G.lookahead===0&&ce===f)return R;if(G.lookahead===0)break}G.strstart+=G.lookahead,G.lookahead=0;var O=G.block_start+X;if((G.strstart===0||G.strstart>=O)&&(G.lookahead=G.strstart-O,G.strstart=O,$(G,!1),G.strm.avail_out===0)||G.strstart-G.block_start>=G.w_size-Z&&($(G,!1),G.strm.avail_out===0))return R}return G.insert=0,ce===p?($(G,!0),G.strm.avail_out===0?J:se):(G.strstart>G.block_start&&($(G,!1),G.strm.avail_out),R)}),new Q(4,4,8,4,U),new Q(4,5,16,8,U),new Q(4,6,32,32,U),new Q(4,4,16,16,F),new Q(8,16,32,32,F),new Q(8,16,128,128,F),new Q(8,32,128,256,F),new Q(32,128,258,1024,F),new Q(32,258,258,4096,F)],n.deflateInit=function(G,ce){return he(G,ce,S,15,8,0)},n.deflateInit2=he,n.deflateReset=re,n.deflateResetKeep=H,n.deflateSetHeader=function(G,ce){return G&&G.state?G.state.wrap!==2?g:(G.state.gzhead=ce,j):g},n.deflate=function(G,ce){var X,O,L,B;if(!G||!G.state||5<ce||ce<0)return G?Y(G,g):g;if(O=G.state,!G.output||!G.input&&G.avail_in!==0||O.status===666&&ce!==p)return Y(G,G.avail_out===0?-5:g);if(O.strm=G,X=O.last_flush,O.last_flush=ce,O.status===I)if(O.wrap===2)G.adler=0,le(O,31),le(O,139),le(O,8),O.gzhead?(le(O,(O.gzhead.text?1:0)+(O.gzhead.hcrc?2:0)+(O.gzhead.extra?4:0)+(O.gzhead.name?8:0)+(O.gzhead.comment?16:0)),le(O,255&O.gzhead.time),le(O,O.gzhead.time>>8&255),le(O,O.gzhead.time>>16&255),le(O,O.gzhead.time>>24&255),le(O,O.level===9?2:2<=O.strategy||O.level<2?4:0),le(O,255&O.gzhead.os),O.gzhead.extra&&O.gzhead.extra.length&&(le(O,255&O.gzhead.extra.length),le(O,O.gzhead.extra.length>>8&255)),O.gzhead.hcrc&&(G.adler=h(G.adler,O.pending_buf,O.pending,0)),O.gzindex=0,O.status=69):(le(O,0),le(O,0),le(O,0),le(O,0),le(O,0),le(O,O.level===9?2:2<=O.strategy||O.level<2?4:0),le(O,3),O.status=V);else{var ne=S+(O.w_bits-8<<4)<<8;ne|=(2<=O.strategy||O.level<2?0:O.level<6?1:O.level===6?2:3)<<6,O.strstart!==0&&(ne|=32),ne+=31-ne%31,O.status=V,ie(O,ne),O.strstart!==0&&(ie(O,G.adler>>>16),ie(O,65535&G.adler)),G.adler=1}if(O.status===69)if(O.gzhead.extra){for(L=O.pending;O.gzindex<(65535&O.gzhead.extra.length)&&(O.pending!==O.pending_buf_size||(O.gzhead.hcrc&&O.pending>L&&(G.adler=h(G.adler,O.pending_buf,O.pending-L,L)),K(G),L=O.pending,O.pending!==O.pending_buf_size));)le(O,255&O.gzhead.extra[O.gzindex]),O.gzindex++;O.gzhead.hcrc&&O.pending>L&&(G.adler=h(G.adler,O.pending_buf,O.pending-L,L)),O.gzindex===O.gzhead.extra.length&&(O.gzindex=0,O.status=73)}else O.status=73;if(O.status===73)if(O.gzhead.name){L=O.pending;do{if(O.pending===O.pending_buf_size&&(O.gzhead.hcrc&&O.pending>L&&(G.adler=h(G.adler,O.pending_buf,O.pending-L,L)),K(G),L=O.pending,O.pending===O.pending_buf_size)){B=1;break}B=O.gzindex<O.gzhead.name.length?255&O.gzhead.name.charCodeAt(O.gzindex++):0,le(O,B)}while(B!==0);O.gzhead.hcrc&&O.pending>L&&(G.adler=h(G.adler,O.pending_buf,O.pending-L,L)),B===0&&(O.gzindex=0,O.status=91)}else O.status=91;if(O.status===91)if(O.gzhead.comment){L=O.pending;do{if(O.pending===O.pending_buf_size&&(O.gzhead.hcrc&&O.pending>L&&(G.adler=h(G.adler,O.pending_buf,O.pending-L,L)),K(G),L=O.pending,O.pending===O.pending_buf_size)){B=1;break}B=O.gzindex<O.gzhead.comment.length?255&O.gzhead.comment.charCodeAt(O.gzindex++):0,le(O,B)}while(B!==0);O.gzhead.hcrc&&O.pending>L&&(G.adler=h(G.adler,O.pending_buf,O.pending-L,L)),B===0&&(O.status=103)}else O.status=103;if(O.status===103&&(O.gzhead.hcrc?(O.pending+2>O.pending_buf_size&&K(G),O.pending+2<=O.pending_buf_size&&(le(O,255&G.adler),le(O,G.adler>>8&255),G.adler=0,O.status=V)):O.status=V),O.pending!==0){if(K(G),G.avail_out===0)return O.last_flush=-1,j}else if(G.avail_in===0&&ee(ce)<=ee(X)&&ce!==p)return Y(G,-5);if(O.status===666&&G.avail_in!==0)return Y(G,-5);if(G.avail_in!==0||O.lookahead!==0||ce!==f&&O.status!==666){var me=O.strategy===2?(function(xe,_e){for(var Ce;;){if(xe.lookahead===0&&(de(xe),xe.lookahead===0)){if(_e===f)return R;break}if(xe.match_length=0,Ce=c._tr_tally(xe,0,xe.window[xe.strstart]),xe.lookahead--,xe.strstart++,Ce&&($(xe,!1),xe.strm.avail_out===0))return R}return xe.insert=0,_e===p?($(xe,!0),xe.strm.avail_out===0?J:se):xe.last_lit&&($(xe,!1),xe.strm.avail_out===0)?R:q})(O,ce):O.strategy===3?(function(xe,_e){for(var Ce,Te,Be,ze,We=xe.window;;){if(xe.lookahead<=A){if(de(xe),xe.lookahead<=A&&_e===f)return R;if(xe.lookahead===0)break}if(xe.match_length=0,xe.lookahead>=C&&0<xe.strstart&&(Te=We[Be=xe.strstart-1])===We[++Be]&&Te===We[++Be]&&Te===We[++Be]){ze=xe.strstart+A;do;while(Te===We[++Be]&&Te===We[++Be]&&Te===We[++Be]&&Te===We[++Be]&&Te===We[++Be]&&Te===We[++Be]&&Te===We[++Be]&&Te===We[++Be]&&Be<ze);xe.match_length=A-(ze-Be),xe.match_length>xe.lookahead&&(xe.match_length=xe.lookahead)}if(xe.match_length>=C?(Ce=c._tr_tally(xe,1,xe.match_length-C),xe.lookahead-=xe.match_length,xe.strstart+=xe.match_length,xe.match_length=0):(Ce=c._tr_tally(xe,0,xe.window[xe.strstart]),xe.lookahead--,xe.strstart++),Ce&&($(xe,!1),xe.strm.avail_out===0))return R}return xe.insert=0,_e===p?($(xe,!0),xe.strm.avail_out===0?J:se):xe.last_lit&&($(xe,!1),xe.strm.avail_out===0)?R:q})(O,ce):i[O.level].func(O,ce);if(me!==J&&me!==se||(O.status=666),me===R||me===J)return G.avail_out===0&&(O.last_flush=-1),j;if(me===q&&(ce===1?c._tr_align(O):ce!==5&&(c._tr_stored_block(O,0,0,!1),ce===3&&(te(O.head),O.lookahead===0&&(O.strstart=0,O.block_start=0,O.insert=0))),K(G),G.avail_out===0))return O.last_flush=-1,j}return ce!==p?j:O.wrap<=0?1:(O.wrap===2?(le(O,255&G.adler),le(O,G.adler>>8&255),le(O,G.adler>>16&255),le(O,G.adler>>24&255),le(O,255&G.total_in),le(O,G.total_in>>8&255),le(O,G.total_in>>16&255),le(O,G.total_in>>24&255)):(ie(O,G.adler>>>16),ie(O,65535&G.adler)),K(G),0<O.wrap&&(O.wrap=-O.wrap),O.pending!==0?j:1)},n.deflateEnd=function(G){var ce;return G&&G.state?(ce=G.state.status)!==I&&ce!==69&&ce!==73&&ce!==91&&ce!==103&&ce!==V&&ce!==666?Y(G,g):(G.state=null,ce===V?Y(G,-3):j):g},n.deflateSetDictionary=function(G,ce){var X,O,L,B,ne,me,xe,_e,Ce=ce.length;if(!G||!G.state||(B=(X=G.state).wrap)===2||B===1&&X.status!==I||X.lookahead)return g;for(B===1&&(G.adler=u(G.adler,ce,Ce,0)),X.wrap=0,Ce>=X.w_size&&(B===0&&(te(X.head),X.strstart=0,X.block_start=0,X.insert=0),_e=new o.Buf8(X.w_size),o.arraySet(_e,ce,Ce-X.w_size,X.w_size,0),ce=_e,Ce=X.w_size),ne=G.avail_in,me=G.next_in,xe=G.input,G.avail_in=Ce,G.next_in=0,G.input=ce,de(X);X.lookahead>=C;){for(O=X.strstart,L=X.lookahead-(C-1);X.ins_h=(X.ins_h<<X.hash_shift^X.window[O+C-1])&X.hash_mask,X.prev[O&X.w_mask]=X.head[X.ins_h],X.head[X.ins_h]=O,O++,--L;);X.strstart=O,X.lookahead=C-1,de(X)}return X.strstart+=X.lookahead,X.block_start=X.strstart,X.insert=X.lookahead,X.lookahead=0,X.match_length=X.prev_length=C-1,X.match_available=0,G.next_in=me,G.input=xe,G.avail_in=ne,X.wrap=B,j},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,a,n){a.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,a,n){a.exports=function(i,o){var c,u,h,m,f,p,j,g,v,y,N,S,k,_,T,E,z,M,C,A,Z,I,V,R,q;c=i.state,u=i.next_in,R=i.input,h=u+(i.avail_in-5),m=i.next_out,q=i.output,f=m-(o-i.avail_out),p=m+(i.avail_out-257),j=c.dmax,g=c.wsize,v=c.whave,y=c.wnext,N=c.window,S=c.hold,k=c.bits,_=c.lencode,T=c.distcode,E=(1<<c.lenbits)-1,z=(1<<c.distbits)-1;e:do{k<15&&(S+=R[u++]<<k,k+=8,S+=R[u++]<<k,k+=8),M=_[S&E];t:for(;;){if(S>>>=C=M>>>24,k-=C,(C=M>>>16&255)===0)q[m++]=65535&M;else{if(!(16&C)){if((64&C)==0){M=_[(65535&M)+(S&(1<<C)-1)];continue t}if(32&C){c.mode=12;break e}i.msg="invalid literal/length code",c.mode=30;break e}A=65535&M,(C&=15)&&(k<C&&(S+=R[u++]<<k,k+=8),A+=S&(1<<C)-1,S>>>=C,k-=C),k<15&&(S+=R[u++]<<k,k+=8,S+=R[u++]<<k,k+=8),M=T[S&z];s:for(;;){if(S>>>=C=M>>>24,k-=C,!(16&(C=M>>>16&255))){if((64&C)==0){M=T[(65535&M)+(S&(1<<C)-1)];continue s}i.msg="invalid distance code",c.mode=30;break e}if(Z=65535&M,k<(C&=15)&&(S+=R[u++]<<k,(k+=8)<C&&(S+=R[u++]<<k,k+=8)),j<(Z+=S&(1<<C)-1)){i.msg="invalid distance too far back",c.mode=30;break e}if(S>>>=C,k-=C,(C=m-f)<Z){if(v<(C=Z-C)&&c.sane){i.msg="invalid distance too far back",c.mode=30;break e}if(V=N,(I=0)===y){if(I+=g-C,C<A){for(A-=C;q[m++]=N[I++],--C;);I=m-Z,V=q}}else if(y<C){if(I+=g+y-C,(C-=y)<A){for(A-=C;q[m++]=N[I++],--C;);if(I=0,y<A){for(A-=C=y;q[m++]=N[I++],--C;);I=m-Z,V=q}}}else if(I+=y-C,C<A){for(A-=C;q[m++]=N[I++],--C;);I=m-Z,V=q}for(;2<A;)q[m++]=V[I++],q[m++]=V[I++],q[m++]=V[I++],A-=3;A&&(q[m++]=V[I++],1<A&&(q[m++]=V[I++]))}else{for(I=m-Z;q[m++]=q[I++],q[m++]=q[I++],q[m++]=q[I++],2<(A-=3););A&&(q[m++]=q[I++],1<A&&(q[m++]=q[I++]))}break}}break}}while(u<h&&m<p);u-=A=k>>3,S&=(1<<(k-=A<<3))-1,i.next_in=u,i.next_out=m,i.avail_in=u<h?h-u+5:5-(u-h),i.avail_out=m<p?p-m+257:257-(m-p),c.hold=S,c.bits=k}},{}],49:[function(r,a,n){var i=r("../utils/common"),o=r("./adler32"),c=r("./crc32"),u=r("./inffast"),h=r("./inftrees"),m=1,f=2,p=0,j=-2,g=1,v=852,y=592;function N(I){return(I>>>24&255)+(I>>>8&65280)+((65280&I)<<8)+((255&I)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function k(I){var V;return I&&I.state?(V=I.state,I.total_in=I.total_out=V.total=0,I.msg="",V.wrap&&(I.adler=1&V.wrap),V.mode=g,V.last=0,V.havedict=0,V.dmax=32768,V.head=null,V.hold=0,V.bits=0,V.lencode=V.lendyn=new i.Buf32(v),V.distcode=V.distdyn=new i.Buf32(y),V.sane=1,V.back=-1,p):j}function _(I){var V;return I&&I.state?((V=I.state).wsize=0,V.whave=0,V.wnext=0,k(I)):j}function T(I,V){var R,q;return I&&I.state?(q=I.state,V<0?(R=0,V=-V):(R=1+(V>>4),V<48&&(V&=15)),V&&(V<8||15<V)?j:(q.window!==null&&q.wbits!==V&&(q.window=null),q.wrap=R,q.wbits=V,_(I))):j}function E(I,V){var R,q;return I?(q=new S,(I.state=q).window=null,(R=T(I,V))!==p&&(I.state=null),R):j}var z,M,C=!0;function A(I){if(C){var V;for(z=new i.Buf32(512),M=new i.Buf32(32),V=0;V<144;)I.lens[V++]=8;for(;V<256;)I.lens[V++]=9;for(;V<280;)I.lens[V++]=7;for(;V<288;)I.lens[V++]=8;for(h(m,I.lens,0,288,z,0,I.work,{bits:9}),V=0;V<32;)I.lens[V++]=5;h(f,I.lens,0,32,M,0,I.work,{bits:5}),C=!1}I.lencode=z,I.lenbits=9,I.distcode=M,I.distbits=5}function Z(I,V,R,q){var J,se=I.state;return se.window===null&&(se.wsize=1<<se.wbits,se.wnext=0,se.whave=0,se.window=new i.Buf8(se.wsize)),q>=se.wsize?(i.arraySet(se.window,V,R-se.wsize,se.wsize,0),se.wnext=0,se.whave=se.wsize):(q<(J=se.wsize-se.wnext)&&(J=q),i.arraySet(se.window,V,R-q,J,se.wnext),(q-=J)?(i.arraySet(se.window,V,R-q,q,0),se.wnext=q,se.whave=se.wsize):(se.wnext+=J,se.wnext===se.wsize&&(se.wnext=0),se.whave<se.wsize&&(se.whave+=J))),0}n.inflateReset=_,n.inflateReset2=T,n.inflateResetKeep=k,n.inflateInit=function(I){return E(I,15)},n.inflateInit2=E,n.inflate=function(I,V){var R,q,J,se,Y,ee,te,K,$,le,ie,oe,de,U,F,Q,W,H,re,he,G,ce,X,O,L=0,B=new i.Buf8(4),ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!I||!I.state||!I.output||!I.input&&I.avail_in!==0)return j;(R=I.state).mode===12&&(R.mode=13),Y=I.next_out,J=I.output,te=I.avail_out,se=I.next_in,q=I.input,ee=I.avail_in,K=R.hold,$=R.bits,le=ee,ie=te,ce=p;e:for(;;)switch(R.mode){case g:if(R.wrap===0){R.mode=13;break}for(;$<16;){if(ee===0)break e;ee--,K+=q[se++]<<$,$+=8}if(2&R.wrap&&K===35615){B[R.check=0]=255&K,B[1]=K>>>8&255,R.check=c(R.check,B,2,0),$=K=0,R.mode=2;break}if(R.flags=0,R.head&&(R.head.done=!1),!(1&R.wrap)||(((255&K)<<8)+(K>>8))%31){I.msg="incorrect header check",R.mode=30;break}if((15&K)!=8){I.msg="unknown compression method",R.mode=30;break}if($-=4,G=8+(15&(K>>>=4)),R.wbits===0)R.wbits=G;else if(G>R.wbits){I.msg="invalid window size",R.mode=30;break}R.dmax=1<<G,I.adler=R.check=1,R.mode=512&K?10:12,$=K=0;break;case 2:for(;$<16;){if(ee===0)break e;ee--,K+=q[se++]<<$,$+=8}if(R.flags=K,(255&R.flags)!=8){I.msg="unknown compression method",R.mode=30;break}if(57344&R.flags){I.msg="unknown header flags set",R.mode=30;break}R.head&&(R.head.text=K>>8&1),512&R.flags&&(B[0]=255&K,B[1]=K>>>8&255,R.check=c(R.check,B,2,0)),$=K=0,R.mode=3;case 3:for(;$<32;){if(ee===0)break e;ee--,K+=q[se++]<<$,$+=8}R.head&&(R.head.time=K),512&R.flags&&(B[0]=255&K,B[1]=K>>>8&255,B[2]=K>>>16&255,B[3]=K>>>24&255,R.check=c(R.check,B,4,0)),$=K=0,R.mode=4;case 4:for(;$<16;){if(ee===0)break e;ee--,K+=q[se++]<<$,$+=8}R.head&&(R.head.xflags=255&K,R.head.os=K>>8),512&R.flags&&(B[0]=255&K,B[1]=K>>>8&255,R.check=c(R.check,B,2,0)),$=K=0,R.mode=5;case 5:if(1024&R.flags){for(;$<16;){if(ee===0)break e;ee--,K+=q[se++]<<$,$+=8}R.length=K,R.head&&(R.head.extra_len=K),512&R.flags&&(B[0]=255&K,B[1]=K>>>8&255,R.check=c(R.check,B,2,0)),$=K=0}else R.head&&(R.head.extra=null);R.mode=6;case 6:if(1024&R.flags&&(ee<(oe=R.length)&&(oe=ee),oe&&(R.head&&(G=R.head.extra_len-R.length,R.head.extra||(R.head.extra=new Array(R.head.extra_len)),i.arraySet(R.head.extra,q,se,oe,G)),512&R.flags&&(R.check=c(R.check,q,oe,se)),ee-=oe,se+=oe,R.length-=oe),R.length))break e;R.length=0,R.mode=7;case 7:if(2048&R.flags){if(ee===0)break e;for(oe=0;G=q[se+oe++],R.head&&G&&R.length<65536&&(R.head.name+=String.fromCharCode(G)),G&&oe<ee;);if(512&R.flags&&(R.check=c(R.check,q,oe,se)),ee-=oe,se+=oe,G)break e}else R.head&&(R.head.name=null);R.length=0,R.mode=8;case 8:if(4096&R.flags){if(ee===0)break e;for(oe=0;G=q[se+oe++],R.head&&G&&R.length<65536&&(R.head.comment+=String.fromCharCode(G)),G&&oe<ee;);if(512&R.flags&&(R.check=c(R.check,q,oe,se)),ee-=oe,se+=oe,G)break e}else R.head&&(R.head.comment=null);R.mode=9;case 9:if(512&R.flags){for(;$<16;){if(ee===0)break e;ee--,K+=q[se++]<<$,$+=8}if(K!==(65535&R.check)){I.msg="header crc mismatch",R.mode=30;break}$=K=0}R.head&&(R.head.hcrc=R.flags>>9&1,R.head.done=!0),I.adler=R.check=0,R.mode=12;break;case 10:for(;$<32;){if(ee===0)break e;ee--,K+=q[se++]<<$,$+=8}I.adler=R.check=N(K),$=K=0,R.mode=11;case 11:if(R.havedict===0)return I.next_out=Y,I.avail_out=te,I.next_in=se,I.avail_in=ee,R.hold=K,R.bits=$,2;I.adler=R.check=1,R.mode=12;case 12:if(V===5||V===6)break e;case 13:if(R.last){K>>>=7&$,$-=7&$,R.mode=27;break}for(;$<3;){if(ee===0)break e;ee--,K+=q[se++]<<$,$+=8}switch(R.last=1&K,$-=1,3&(K>>>=1)){case 0:R.mode=14;break;case 1:if(A(R),R.mode=20,V!==6)break;K>>>=2,$-=2;break e;case 2:R.mode=17;break;case 3:I.msg="invalid block type",R.mode=30}K>>>=2,$-=2;break;case 14:for(K>>>=7&$,$-=7&$;$<32;){if(ee===0)break e;ee--,K+=q[se++]<<$,$+=8}if((65535&K)!=(K>>>16^65535)){I.msg="invalid stored block lengths",R.mode=30;break}if(R.length=65535&K,$=K=0,R.mode=15,V===6)break e;case 15:R.mode=16;case 16:if(oe=R.length){if(ee<oe&&(oe=ee),te<oe&&(oe=te),oe===0)break e;i.arraySet(J,q,se,oe,Y),ee-=oe,se+=oe,te-=oe,Y+=oe,R.length-=oe;break}R.mode=12;break;case 17:for(;$<14;){if(ee===0)break e;ee--,K+=q[se++]<<$,$+=8}if(R.nlen=257+(31&K),K>>>=5,$-=5,R.ndist=1+(31&K),K>>>=5,$-=5,R.ncode=4+(15&K),K>>>=4,$-=4,286<R.nlen||30<R.ndist){I.msg="too many length or distance symbols",R.mode=30;break}R.have=0,R.mode=18;case 18:for(;R.have<R.ncode;){for(;$<3;){if(ee===0)break e;ee--,K+=q[se++]<<$,$+=8}R.lens[ne[R.have++]]=7&K,K>>>=3,$-=3}for(;R.have<19;)R.lens[ne[R.have++]]=0;if(R.lencode=R.lendyn,R.lenbits=7,X={bits:R.lenbits},ce=h(0,R.lens,0,19,R.lencode,0,R.work,X),R.lenbits=X.bits,ce){I.msg="invalid code lengths set",R.mode=30;break}R.have=0,R.mode=19;case 19:for(;R.have<R.nlen+R.ndist;){for(;Q=(L=R.lencode[K&(1<<R.lenbits)-1])>>>16&255,W=65535&L,!((F=L>>>24)<=$);){if(ee===0)break e;ee--,K+=q[se++]<<$,$+=8}if(W<16)K>>>=F,$-=F,R.lens[R.have++]=W;else{if(W===16){for(O=F+2;$<O;){if(ee===0)break e;ee--,K+=q[se++]<<$,$+=8}if(K>>>=F,$-=F,R.have===0){I.msg="invalid bit length repeat",R.mode=30;break}G=R.lens[R.have-1],oe=3+(3&K),K>>>=2,$-=2}else if(W===17){for(O=F+3;$<O;){if(ee===0)break e;ee--,K+=q[se++]<<$,$+=8}$-=F,G=0,oe=3+(7&(K>>>=F)),K>>>=3,$-=3}else{for(O=F+7;$<O;){if(ee===0)break e;ee--,K+=q[se++]<<$,$+=8}$-=F,G=0,oe=11+(127&(K>>>=F)),K>>>=7,$-=7}if(R.have+oe>R.nlen+R.ndist){I.msg="invalid bit length repeat",R.mode=30;break}for(;oe--;)R.lens[R.have++]=G}}if(R.mode===30)break;if(R.lens[256]===0){I.msg="invalid code -- missing end-of-block",R.mode=30;break}if(R.lenbits=9,X={bits:R.lenbits},ce=h(m,R.lens,0,R.nlen,R.lencode,0,R.work,X),R.lenbits=X.bits,ce){I.msg="invalid literal/lengths set",R.mode=30;break}if(R.distbits=6,R.distcode=R.distdyn,X={bits:R.distbits},ce=h(f,R.lens,R.nlen,R.ndist,R.distcode,0,R.work,X),R.distbits=X.bits,ce){I.msg="invalid distances set",R.mode=30;break}if(R.mode=20,V===6)break e;case 20:R.mode=21;case 21:if(6<=ee&&258<=te){I.next_out=Y,I.avail_out=te,I.next_in=se,I.avail_in=ee,R.hold=K,R.bits=$,u(I,ie),Y=I.next_out,J=I.output,te=I.avail_out,se=I.next_in,q=I.input,ee=I.avail_in,K=R.hold,$=R.bits,R.mode===12&&(R.back=-1);break}for(R.back=0;Q=(L=R.lencode[K&(1<<R.lenbits)-1])>>>16&255,W=65535&L,!((F=L>>>24)<=$);){if(ee===0)break e;ee--,K+=q[se++]<<$,$+=8}if(Q&&(240&Q)==0){for(H=F,re=Q,he=W;Q=(L=R.lencode[he+((K&(1<<H+re)-1)>>H)])>>>16&255,W=65535&L,!(H+(F=L>>>24)<=$);){if(ee===0)break e;ee--,K+=q[se++]<<$,$+=8}K>>>=H,$-=H,R.back+=H}if(K>>>=F,$-=F,R.back+=F,R.length=W,Q===0){R.mode=26;break}if(32&Q){R.back=-1,R.mode=12;break}if(64&Q){I.msg="invalid literal/length code",R.mode=30;break}R.extra=15&Q,R.mode=22;case 22:if(R.extra){for(O=R.extra;$<O;){if(ee===0)break e;ee--,K+=q[se++]<<$,$+=8}R.length+=K&(1<<R.extra)-1,K>>>=R.extra,$-=R.extra,R.back+=R.extra}R.was=R.length,R.mode=23;case 23:for(;Q=(L=R.distcode[K&(1<<R.distbits)-1])>>>16&255,W=65535&L,!((F=L>>>24)<=$);){if(ee===0)break e;ee--,K+=q[se++]<<$,$+=8}if((240&Q)==0){for(H=F,re=Q,he=W;Q=(L=R.distcode[he+((K&(1<<H+re)-1)>>H)])>>>16&255,W=65535&L,!(H+(F=L>>>24)<=$);){if(ee===0)break e;ee--,K+=q[se++]<<$,$+=8}K>>>=H,$-=H,R.back+=H}if(K>>>=F,$-=F,R.back+=F,64&Q){I.msg="invalid distance code",R.mode=30;break}R.offset=W,R.extra=15&Q,R.mode=24;case 24:if(R.extra){for(O=R.extra;$<O;){if(ee===0)break e;ee--,K+=q[se++]<<$,$+=8}R.offset+=K&(1<<R.extra)-1,K>>>=R.extra,$-=R.extra,R.back+=R.extra}if(R.offset>R.dmax){I.msg="invalid distance too far back",R.mode=30;break}R.mode=25;case 25:if(te===0)break e;if(oe=ie-te,R.offset>oe){if((oe=R.offset-oe)>R.whave&&R.sane){I.msg="invalid distance too far back",R.mode=30;break}de=oe>R.wnext?(oe-=R.wnext,R.wsize-oe):R.wnext-oe,oe>R.length&&(oe=R.length),U=R.window}else U=J,de=Y-R.offset,oe=R.length;for(te<oe&&(oe=te),te-=oe,R.length-=oe;J[Y++]=U[de++],--oe;);R.length===0&&(R.mode=21);break;case 26:if(te===0)break e;J[Y++]=R.length,te--,R.mode=21;break;case 27:if(R.wrap){for(;$<32;){if(ee===0)break e;ee--,K|=q[se++]<<$,$+=8}if(ie-=te,I.total_out+=ie,R.total+=ie,ie&&(I.adler=R.check=R.flags?c(R.check,J,ie,Y-ie):o(R.check,J,ie,Y-ie)),ie=te,(R.flags?K:N(K))!==R.check){I.msg="incorrect data check",R.mode=30;break}$=K=0}R.mode=28;case 28:if(R.wrap&&R.flags){for(;$<32;){if(ee===0)break e;ee--,K+=q[se++]<<$,$+=8}if(K!==(4294967295&R.total)){I.msg="incorrect length check",R.mode=30;break}$=K=0}R.mode=29;case 29:ce=1;break e;case 30:ce=-3;break e;case 31:return-4;case 32:default:return j}return I.next_out=Y,I.avail_out=te,I.next_in=se,I.avail_in=ee,R.hold=K,R.bits=$,(R.wsize||ie!==I.avail_out&&R.mode<30&&(R.mode<27||V!==4))&&Z(I,I.output,I.next_out,ie-I.avail_out)?(R.mode=31,-4):(le-=I.avail_in,ie-=I.avail_out,I.total_in+=le,I.total_out+=ie,R.total+=ie,R.wrap&&ie&&(I.adler=R.check=R.flags?c(R.check,J,ie,I.next_out-ie):o(R.check,J,ie,I.next_out-ie)),I.data_type=R.bits+(R.last?64:0)+(R.mode===12?128:0)+(R.mode===20||R.mode===15?256:0),(le==0&&ie===0||V===4)&&ce===p&&(ce=-5),ce)},n.inflateEnd=function(I){if(!I||!I.state)return j;var V=I.state;return V.window&&(V.window=null),I.state=null,p},n.inflateGetHeader=function(I,V){var R;return I&&I.state?(2&(R=I.state).wrap)==0?j:((R.head=V).done=!1,p):j},n.inflateSetDictionary=function(I,V){var R,q=V.length;return I&&I.state?(R=I.state).wrap!==0&&R.mode!==11?j:R.mode===11&&o(1,V,q,0)!==R.check?-3:Z(I,V,q,q)?(R.mode=31,-4):(R.havedict=1,p):j},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,a,n){var i=r("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];a.exports=function(m,f,p,j,g,v,y,N){var S,k,_,T,E,z,M,C,A,Z=N.bits,I=0,V=0,R=0,q=0,J=0,se=0,Y=0,ee=0,te=0,K=0,$=null,le=0,ie=new i.Buf16(16),oe=new i.Buf16(16),de=null,U=0;for(I=0;I<=15;I++)ie[I]=0;for(V=0;V<j;V++)ie[f[p+V]]++;for(J=Z,q=15;1<=q&&ie[q]===0;q--);if(q<J&&(J=q),q===0)return g[v++]=20971520,g[v++]=20971520,N.bits=1,0;for(R=1;R<q&&ie[R]===0;R++);for(J<R&&(J=R),I=ee=1;I<=15;I++)if(ee<<=1,(ee-=ie[I])<0)return-1;if(0<ee&&(m===0||q!==1))return-1;for(oe[1]=0,I=1;I<15;I++)oe[I+1]=oe[I]+ie[I];for(V=0;V<j;V++)f[p+V]!==0&&(y[oe[f[p+V]]++]=V);if(z=m===0?($=de=y,19):m===1?($=o,le-=257,de=c,U-=257,256):($=u,de=h,-1),I=R,E=v,Y=V=K=0,_=-1,T=(te=1<<(se=J))-1,m===1&&852<te||m===2&&592<te)return 1;for(;;){for(M=I-Y,A=y[V]<z?(C=0,y[V]):y[V]>z?(C=de[U+y[V]],$[le+y[V]]):(C=96,0),S=1<<I-Y,R=k=1<<se;g[E+(K>>Y)+(k-=S)]=M<<24|C<<16|A|0,k!==0;);for(S=1<<I-1;K&S;)S>>=1;if(S!==0?(K&=S-1,K+=S):K=0,V++,--ie[I]==0){if(I===q)break;I=f[p+y[V]]}if(J<I&&(K&T)!==_){for(Y===0&&(Y=J),E+=R,ee=1<<(se=I-Y);se+Y<q&&!((ee-=ie[se+Y])<=0);)se++,ee<<=1;if(te+=1<<se,m===1&&852<te||m===2&&592<te)return 1;g[_=K&T]=J<<24|se<<16|E-v|0}}return K!==0&&(g[E+K]=I-Y<<24|64<<16|0),N.bits=J,0}},{"../utils/common":41}],51:[function(r,a,n){a.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,a,n){var i=r("../utils/common"),o=0,c=1;function u(L){for(var B=L.length;0<=--B;)L[B]=0}var h=0,m=29,f=256,p=f+1+m,j=30,g=19,v=2*p+1,y=15,N=16,S=7,k=256,_=16,T=17,E=18,z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],M=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Z=new Array(2*(p+2));u(Z);var I=new Array(2*j);u(I);var V=new Array(512);u(V);var R=new Array(256);u(R);var q=new Array(m);u(q);var J,se,Y,ee=new Array(j);function te(L,B,ne,me,xe){this.static_tree=L,this.extra_bits=B,this.extra_base=ne,this.elems=me,this.max_length=xe,this.has_stree=L&&L.length}function K(L,B){this.dyn_tree=L,this.max_code=0,this.stat_desc=B}function $(L){return L<256?V[L]:V[256+(L>>>7)]}function le(L,B){L.pending_buf[L.pending++]=255&B,L.pending_buf[L.pending++]=B>>>8&255}function ie(L,B,ne){L.bi_valid>N-ne?(L.bi_buf|=B<<L.bi_valid&65535,le(L,L.bi_buf),L.bi_buf=B>>N-L.bi_valid,L.bi_valid+=ne-N):(L.bi_buf|=B<<L.bi_valid&65535,L.bi_valid+=ne)}function oe(L,B,ne){ie(L,ne[2*B],ne[2*B+1])}function de(L,B){for(var ne=0;ne|=1&L,L>>>=1,ne<<=1,0<--B;);return ne>>>1}function U(L,B,ne){var me,xe,_e=new Array(y+1),Ce=0;for(me=1;me<=y;me++)_e[me]=Ce=Ce+ne[me-1]<<1;for(xe=0;xe<=B;xe++){var Te=L[2*xe+1];Te!==0&&(L[2*xe]=de(_e[Te]++,Te))}}function F(L){var B;for(B=0;B<p;B++)L.dyn_ltree[2*B]=0;for(B=0;B<j;B++)L.dyn_dtree[2*B]=0;for(B=0;B<g;B++)L.bl_tree[2*B]=0;L.dyn_ltree[2*k]=1,L.opt_len=L.static_len=0,L.last_lit=L.matches=0}function Q(L){8<L.bi_valid?le(L,L.bi_buf):0<L.bi_valid&&(L.pending_buf[L.pending++]=L.bi_buf),L.bi_buf=0,L.bi_valid=0}function W(L,B,ne,me){var xe=2*B,_e=2*ne;return L[xe]<L[_e]||L[xe]===L[_e]&&me[B]<=me[ne]}function H(L,B,ne){for(var me=L.heap[ne],xe=ne<<1;xe<=L.heap_len&&(xe<L.heap_len&&W(B,L.heap[xe+1],L.heap[xe],L.depth)&&xe++,!W(B,me,L.heap[xe],L.depth));)L.heap[ne]=L.heap[xe],ne=xe,xe<<=1;L.heap[ne]=me}function re(L,B,ne){var me,xe,_e,Ce,Te=0;if(L.last_lit!==0)for(;me=L.pending_buf[L.d_buf+2*Te]<<8|L.pending_buf[L.d_buf+2*Te+1],xe=L.pending_buf[L.l_buf+Te],Te++,me===0?oe(L,xe,B):(oe(L,(_e=R[xe])+f+1,B),(Ce=z[_e])!==0&&ie(L,xe-=q[_e],Ce),oe(L,_e=$(--me),ne),(Ce=M[_e])!==0&&ie(L,me-=ee[_e],Ce)),Te<L.last_lit;);oe(L,k,B)}function he(L,B){var ne,me,xe,_e=B.dyn_tree,Ce=B.stat_desc.static_tree,Te=B.stat_desc.has_stree,Be=B.stat_desc.elems,ze=-1;for(L.heap_len=0,L.heap_max=v,ne=0;ne<Be;ne++)_e[2*ne]!==0?(L.heap[++L.heap_len]=ze=ne,L.depth[ne]=0):_e[2*ne+1]=0;for(;L.heap_len<2;)_e[2*(xe=L.heap[++L.heap_len]=ze<2?++ze:0)]=1,L.depth[xe]=0,L.opt_len--,Te&&(L.static_len-=Ce[2*xe+1]);for(B.max_code=ze,ne=L.heap_len>>1;1<=ne;ne--)H(L,_e,ne);for(xe=Be;ne=L.heap[1],L.heap[1]=L.heap[L.heap_len--],H(L,_e,1),me=L.heap[1],L.heap[--L.heap_max]=ne,L.heap[--L.heap_max]=me,_e[2*xe]=_e[2*ne]+_e[2*me],L.depth[xe]=(L.depth[ne]>=L.depth[me]?L.depth[ne]:L.depth[me])+1,_e[2*ne+1]=_e[2*me+1]=xe,L.heap[1]=xe++,H(L,_e,1),2<=L.heap_len;);L.heap[--L.heap_max]=L.heap[1],(function(We,Ds){var Ur,br,Ea,_t,ds,yr,zt=Ds.dyn_tree,Cn=Ds.max_code,Zo=Ds.stat_desc.static_tree,Qo=Ds.stat_desc.has_stree,Tn=Ds.stat_desc.extra_bits,En=Ds.stat_desc.extra_base,ra=Ds.stat_desc.max_length,hr=0;for(_t=0;_t<=y;_t++)We.bl_count[_t]=0;for(zt[2*We.heap[We.heap_max]+1]=0,Ur=We.heap_max+1;Ur<v;Ur++)ra<(_t=zt[2*zt[2*(br=We.heap[Ur])+1]+1]+1)&&(_t=ra,hr++),zt[2*br+1]=_t,Cn<br||(We.bl_count[_t]++,ds=0,En<=br&&(ds=Tn[br-En]),yr=zt[2*br],We.opt_len+=yr*(_t+ds),Qo&&(We.static_len+=yr*(Zo[2*br+1]+ds)));if(hr!==0){do{for(_t=ra-1;We.bl_count[_t]===0;)_t--;We.bl_count[_t]--,We.bl_count[_t+1]+=2,We.bl_count[ra]--,hr-=2}while(0<hr);for(_t=ra;_t!==0;_t--)for(br=We.bl_count[_t];br!==0;)Cn<(Ea=We.heap[--Ur])||(zt[2*Ea+1]!==_t&&(We.opt_len+=(_t-zt[2*Ea+1])*zt[2*Ea],zt[2*Ea+1]=_t),br--)}})(L,B),U(_e,ze,L.bl_count)}function G(L,B,ne){var me,xe,_e=-1,Ce=B[1],Te=0,Be=7,ze=4;for(Ce===0&&(Be=138,ze=3),B[2*(ne+1)+1]=65535,me=0;me<=ne;me++)xe=Ce,Ce=B[2*(me+1)+1],++Te<Be&&xe===Ce||(Te<ze?L.bl_tree[2*xe]+=Te:xe!==0?(xe!==_e&&L.bl_tree[2*xe]++,L.bl_tree[2*_]++):Te<=10?L.bl_tree[2*T]++:L.bl_tree[2*E]++,_e=xe,ze=(Te=0)===Ce?(Be=138,3):xe===Ce?(Be=6,3):(Be=7,4))}function ce(L,B,ne){var me,xe,_e=-1,Ce=B[1],Te=0,Be=7,ze=4;for(Ce===0&&(Be=138,ze=3),me=0;me<=ne;me++)if(xe=Ce,Ce=B[2*(me+1)+1],!(++Te<Be&&xe===Ce)){if(Te<ze)for(;oe(L,xe,L.bl_tree),--Te!=0;);else xe!==0?(xe!==_e&&(oe(L,xe,L.bl_tree),Te--),oe(L,_,L.bl_tree),ie(L,Te-3,2)):Te<=10?(oe(L,T,L.bl_tree),ie(L,Te-3,3)):(oe(L,E,L.bl_tree),ie(L,Te-11,7));_e=xe,ze=(Te=0)===Ce?(Be=138,3):xe===Ce?(Be=6,3):(Be=7,4)}}u(ee);var X=!1;function O(L,B,ne,me){ie(L,(h<<1)+(me?1:0),3),(function(xe,_e,Ce,Te){Q(xe),le(xe,Ce),le(xe,~Ce),i.arraySet(xe.pending_buf,xe.window,_e,Ce,xe.pending),xe.pending+=Ce})(L,B,ne)}n._tr_init=function(L){X||((function(){var B,ne,me,xe,_e,Ce=new Array(y+1);for(xe=me=0;xe<m-1;xe++)for(q[xe]=me,B=0;B<1<<z[xe];B++)R[me++]=xe;for(R[me-1]=xe,xe=_e=0;xe<16;xe++)for(ee[xe]=_e,B=0;B<1<<M[xe];B++)V[_e++]=xe;for(_e>>=7;xe<j;xe++)for(ee[xe]=_e<<7,B=0;B<1<<M[xe]-7;B++)V[256+_e++]=xe;for(ne=0;ne<=y;ne++)Ce[ne]=0;for(B=0;B<=143;)Z[2*B+1]=8,B++,Ce[8]++;for(;B<=255;)Z[2*B+1]=9,B++,Ce[9]++;for(;B<=279;)Z[2*B+1]=7,B++,Ce[7]++;for(;B<=287;)Z[2*B+1]=8,B++,Ce[8]++;for(U(Z,p+1,Ce),B=0;B<j;B++)I[2*B+1]=5,I[2*B]=de(B,5);J=new te(Z,z,f+1,p,y),se=new te(I,M,0,j,y),Y=new te(new Array(0),C,0,g,S)})(),X=!0),L.l_desc=new K(L.dyn_ltree,J),L.d_desc=new K(L.dyn_dtree,se),L.bl_desc=new K(L.bl_tree,Y),L.bi_buf=0,L.bi_valid=0,F(L)},n._tr_stored_block=O,n._tr_flush_block=function(L,B,ne,me){var xe,_e,Ce=0;0<L.level?(L.strm.data_type===2&&(L.strm.data_type=(function(Te){var Be,ze=4093624447;for(Be=0;Be<=31;Be++,ze>>>=1)if(1&ze&&Te.dyn_ltree[2*Be]!==0)return o;if(Te.dyn_ltree[18]!==0||Te.dyn_ltree[20]!==0||Te.dyn_ltree[26]!==0)return c;for(Be=32;Be<f;Be++)if(Te.dyn_ltree[2*Be]!==0)return c;return o})(L)),he(L,L.l_desc),he(L,L.d_desc),Ce=(function(Te){var Be;for(G(Te,Te.dyn_ltree,Te.l_desc.max_code),G(Te,Te.dyn_dtree,Te.d_desc.max_code),he(Te,Te.bl_desc),Be=g-1;3<=Be&&Te.bl_tree[2*A[Be]+1]===0;Be--);return Te.opt_len+=3*(Be+1)+5+5+4,Be})(L),xe=L.opt_len+3+7>>>3,(_e=L.static_len+3+7>>>3)<=xe&&(xe=_e)):xe=_e=ne+5,ne+4<=xe&&B!==-1?O(L,B,ne,me):L.strategy===4||_e===xe?(ie(L,2+(me?1:0),3),re(L,Z,I)):(ie(L,4+(me?1:0),3),(function(Te,Be,ze,We){var Ds;for(ie(Te,Be-257,5),ie(Te,ze-1,5),ie(Te,We-4,4),Ds=0;Ds<We;Ds++)ie(Te,Te.bl_tree[2*A[Ds]+1],3);ce(Te,Te.dyn_ltree,Be-1),ce(Te,Te.dyn_dtree,ze-1)})(L,L.l_desc.max_code+1,L.d_desc.max_code+1,Ce+1),re(L,L.dyn_ltree,L.dyn_dtree)),F(L),me&&Q(L)},n._tr_tally=function(L,B,ne){return L.pending_buf[L.d_buf+2*L.last_lit]=B>>>8&255,L.pending_buf[L.d_buf+2*L.last_lit+1]=255&B,L.pending_buf[L.l_buf+L.last_lit]=255&ne,L.last_lit++,B===0?L.dyn_ltree[2*ne]++:(L.matches++,B--,L.dyn_ltree[2*(R[ne]+f+1)]++,L.dyn_dtree[2*$(B)]++),L.last_lit===L.lit_bufsize-1},n._tr_align=function(L){ie(L,2,3),oe(L,k,Z),(function(B){B.bi_valid===16?(le(B,B.bi_buf),B.bi_buf=0,B.bi_valid=0):8<=B.bi_valid&&(B.pending_buf[B.pending++]=255&B.bi_buf,B.bi_buf>>=8,B.bi_valid-=8)})(L)}},{"../utils/common":41}],53:[function(r,a,n){a.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,a,n){(function(i){(function(o,c){if(!o.setImmediate){var u,h,m,f,p=1,j={},g=!1,v=o.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(o);y=y&&y.setTimeout?y:o,u={}.toString.call(o.process)==="[object process]"?function(_){ot.nextTick(function(){S(_)})}:(function(){if(o.postMessage&&!o.importScripts){var _=!0,T=o.onmessage;return o.onmessage=function(){_=!1},o.postMessage("","*"),o.onmessage=T,_}})()?(f="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",k,!1):o.attachEvent("onmessage",k),function(_){o.postMessage(f+_,"*")}):o.MessageChannel?((m=new MessageChannel).port1.onmessage=function(_){S(_.data)},function(_){m.port2.postMessage(_)}):v&&"onreadystatechange"in v.createElement("script")?(h=v.documentElement,function(_){var T=v.createElement("script");T.onreadystatechange=function(){S(_),T.onreadystatechange=null,h.removeChild(T),T=null},h.appendChild(T)}):function(_){setTimeout(S,0,_)},y.setImmediate=function(_){typeof _!="function"&&(_=new Function(""+_));for(var T=new Array(arguments.length-1),E=0;E<T.length;E++)T[E]=arguments[E+1];var z={callback:_,args:T};return j[p]=z,u(p),p++},y.clearImmediate=N}function N(_){delete j[_]}function S(_){if(g)setTimeout(S,0,_);else{var T=j[_];if(T){g=!0;try{(function(E){var z=E.callback,M=E.args;switch(M.length){case 0:z();break;case 1:z(M[0]);break;case 2:z(M[0],M[1]);break;case 3:z(M[0],M[1],M[2]);break;default:z.apply(c,M)}})(T)}finally{N(_),g=!1}}}}function k(_){_.source===o&&typeof _.data=="string"&&_.data.indexOf(f)===0&&S(+_.data.slice(f.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof xn<"u"?xn:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Bj)),Bj.exports}var qre=Hre();const Wre=l8(qre);var Sh={exports:{}},Fj,nT;function Yre(){if(nT)return Fj;nT=1;var s={"&":"&amp;",'"':"&quot;","'":"&apos;","<":"&lt;",">":"&gt;"};function t(r){return r&&r.replace?r.replace(/([&"<>'])/g,function(a,n){return s[n]}):r}return Fj=t,Fj}var iT;function Gre(){if(iT)return Sh.exports;iT=1;var s=Yre(),t=P1().Stream,r="    ";function a(h,m){typeof m!="object"&&(m={indent:m});var f=m.stream?new t:null,p="",j=!1,g=m.indent?m.indent===!0?r:m.indent:"",v=!0;function y(T){v?ot.nextTick(T):T()}function N(T,E){if(E!==void 0&&(p+=E),T&&!j&&(f=f||new t,j=!0),T&&j){var z=p;y(function(){f.emit("data",z)}),p=""}}function S(T,E){c(N,o(T,g,g?1:0),E)}function k(){if(f){var T=p;y(function(){f.emit("data",T),f.emit("end"),f.readable=!1,f.emit("close")})}}function _(T){var E=T.encoding||"UTF-8",z={version:"1.0",encoding:E};T.standalone&&(z.standalone=T.standalone),S({"?xml":{_attr:z}}),p=p.replace("/>","?>")}return y(function(){v=!1}),m.declaration&&_(m.declaration),h&&h.forEach?h.forEach(function(T,E){var z;E+1===h.length&&(z=k),S(T,z)}):S(h,k),f?(f.readable=!0,f):p}function n(){var h=Array.prototype.slice.call(arguments),m={_elem:o(h)};return m.push=function(f){if(!this.append)throw new Error("not assigned to a parent!");var p=this,j=this._elem.indent;c(this.append,o(f,j,this._elem.icount+(j?1:0)),function(){p.append(!0)})},m.close=function(f){f!==void 0&&this.push(f),this.end&&this.end()},m}function i(h,m){return new Array(m||0).join(h||"")}function o(h,m,f){f=f||0;var p=i(m,f),j,g=h,v=!1;if(typeof h=="object"){var y=Object.keys(h);if(j=y[0],g=h[j],g&&g._elem)return g._elem.name=j,g._elem.icount=f,g._elem.indent=m,g._elem.indents=p,g._elem.interrupt=g,g._elem}var N=[],S=[],k;function _(T){var E=Object.keys(T);E.forEach(function(z){N.push(u(z,T[z]))})}switch(typeof g){case"object":if(g===null)break;g._attr&&_(g._attr),g._cdata&&S.push(("<![CDATA["+g._cdata).replace(/\]\]>/g,"]]]]><![CDATA[>")+"]]>"),g.forEach&&(k=!1,S.push(""),g.forEach(function(T){if(typeof T=="object"){var E=Object.keys(T)[0];E=="_attr"?_(T._attr):S.push(o(T,m,f+1))}else S.pop(),k=!0,S.push(s(T))}),k||S.push(""));break;default:S.push(s(g))}return{name:j,interrupt:v,attributes:N,content:S,icount:f,indents:p,indent:m}}function c(h,m,f){if(typeof m!="object")return h(!1,m);var p=m.interrupt?1:m.content.length;function j(){for(;m.content.length;){var v=m.content.shift();if(v!==void 0){if(g(v))return;c(h,v)}}h(!1,(p>1?m.indents:"")+(m.name?"</"+m.name+">":"")+(m.indent&&!f?`
`:"")),f&&f()}function g(v){return v.interrupt?(v.interrupt.append=h,v.interrupt.end=j,v.interrupt=!1,h(!0),!0):!1}if(h(!1,m.indents+(m.name?"<"+m.name:"")+(m.attributes.length?" "+m.attributes.join(" "):"")+(p?m.name?">":"":m.name?"/>":"")+(m.indent&&p>1?`
`:"")),!p)return h(!1,m.indent?`
`:"");g(m)||j()}function u(h,m){return h+'="'+s(m)+'"'}return Sh.exports=a,Sh.exports.element=Sh.exports.Element=n,Sh.exports}var Kre=Gre();const is=l8(Kre),Ch=0,zj=32,Xre=32,Zre=(s,t)=>{const r=t.replace(/-/g,"");if(r.length!==Xre)throw new Error(`Error: Cannot extract GUID from font filename: ${t}`);const n=r.replace(/(..)/g,"$1 ").trim().split(" ").map(u=>parseInt(u,16));n.reverse();const o=s.slice(Ch,zj).map((u,h)=>u^n[h%n.length]),c=new Uint8Array(Ch+o.length+Math.max(0,s.length-zj));return c.set(s.slice(0,Ch)),c.set(o,Ch),c.set(s.slice(zj),Ch+o.length),c};class Qre{format(t,r={stack:[]}){const a=t.prepForXml(r);if(a)return a;throw Error("XMLComponent did not format correctly")}}class Jre{replace(t,r,a){let n=t;return r.forEach((i,o)=>{n=n.replace(new RegExp(`{${i.fileName}}`,"g"),(a+o).toString())}),n}getMediaData(t,r){return r.Array.filter(a=>t.search(`{${a.fileName}}`)>0)}}class eae{replace(t,r){let a=t;for(const n of r)a=a.replace(new RegExp(`{${n.reference}-${n.instance}}`,"g"),n.numId.toString());return a}}class tae{constructor(){Me(this,"formatter"),Me(this,"imageReplacer"),Me(this,"numberingReplacer"),this.formatter=new Qre,this.imageReplacer=new Jre,this.numberingReplacer=new eae}compile(t,r,a=[]){const n=new Wre,i=this.xmlifyFile(t,r),o=new Map(Object.entries(i));for(const[,c]of o)if(Array.isArray(c))for(const u of c)n.file(u.path,u.data);else n.file(c.path,c.data);for(const c of a)n.file(c.path,c.data);for(const c of t.Media.Array)c.type!=="svg"?n.file(`word/media/${c.fileName}`,c.data):(n.file(`word/media/${c.fileName}`,c.data),n.file(`word/media/${c.fallback.fileName}`,c.fallback.data));for(const{data:c,name:u,fontKey:h}of t.FontTable.fontOptionsWithKey){const[m]=u.split(".");n.file(`word/fonts/${m}.odttf`,Zre(c,h))}return n}xmlifyFile(t,r){const a=t.Document.Relationships.RelationshipCount+1,n=is(this.formatter.format(t.Document.View,{viewWrapper:t.Document,file:t,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),i=t.Comments.Relationships.RelationshipCount+1,o=is(this.formatter.format(t.Comments,{viewWrapper:{View:t.Comments,Relationships:t.Comments.Relationships},file:t,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),c=this.imageReplacer.getMediaData(n,t.Media),u=this.imageReplacer.getMediaData(o,t.Media);return{Relationships:{data:(c.forEach((h,m)=>{t.Document.Relationships.createRelationship(a+m,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${h.fileName}`)}),t.Document.Relationships.createRelationship(t.Document.Relationships.RelationshipCount+1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/fontTable","fontTable.xml"),is(this.formatter.format(t.Document.Relationships,{viewWrapper:t.Document,file:t,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}})),path:"word/_rels/document.xml.rels"},Document:{data:(()=>{const h=this.imageReplacer.replace(n,c,a);return this.numberingReplacer.replace(h,t.Numbering.ConcreteNumbering)})(),path:"word/document.xml"},Styles:{data:(()=>{const h=is(this.formatter.format(t.Styles,{viewWrapper:t.Document,file:t,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}});return this.numberingReplacer.replace(h,t.Numbering.ConcreteNumbering)})(),path:"word/styles.xml"},Properties:{data:is(this.formatter.format(t.CoreProperties,{viewWrapper:t.Document,file:t,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/core.xml"},Numbering:{data:is(this.formatter.format(t.Numbering,{viewWrapper:t.Document,file:t,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/numbering.xml"},FileRelationships:{data:is(this.formatter.format(t.FileRelationships,{viewWrapper:t.Document,file:t,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:"_rels/.rels"},HeaderRelationships:t.Headers.map((h,m)=>{const f=is(this.formatter.format(h.View,{viewWrapper:h,file:t,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(f,t.Media).forEach((j,g)=>{h.Relationships.createRelationship(g,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${j.fileName}`)}),{data:is(this.formatter.format(h.Relationships,{viewWrapper:h,file:t,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:`word/_rels/header${m+1}.xml.rels`}}),FooterRelationships:t.Footers.map((h,m)=>{const f=is(this.formatter.format(h.View,{viewWrapper:h,file:t,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(f,t.Media).forEach((j,g)=>{h.Relationships.createRelationship(g,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${j.fileName}`)}),{data:is(this.formatter.format(h.Relationships,{viewWrapper:h,file:t,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:`word/_rels/footer${m+1}.xml.rels`}}),Headers:t.Headers.map((h,m)=>{const f=is(this.formatter.format(h.View,{viewWrapper:h,file:t,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),p=this.imageReplacer.getMediaData(f,t.Media),j=this.imageReplacer.replace(f,p,0);return{data:this.numberingReplacer.replace(j,t.Numbering.ConcreteNumbering),path:`word/header${m+1}.xml`}}),Footers:t.Footers.map((h,m)=>{const f=is(this.formatter.format(h.View,{viewWrapper:h,file:t,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),p=this.imageReplacer.getMediaData(f,t.Media),j=this.imageReplacer.replace(f,p,0);return{data:this.numberingReplacer.replace(j,t.Numbering.ConcreteNumbering),path:`word/footer${m+1}.xml`}}),ContentTypes:{data:is(this.formatter.format(t.ContentTypes,{viewWrapper:t.Document,file:t,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:"[Content_Types].xml"},CustomProperties:{data:is(this.formatter.format(t.CustomProperties,{viewWrapper:t.Document,file:t,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/custom.xml"},AppProperties:{data:is(this.formatter.format(t.AppProperties,{viewWrapper:t.Document,file:t,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/app.xml"},FootNotes:{data:is(this.formatter.format(t.FootNotes.View,{viewWrapper:t.FootNotes,file:t,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:"word/footnotes.xml"},FootNotesRelationships:{data:is(this.formatter.format(t.FootNotes.Relationships,{viewWrapper:t.FootNotes,file:t,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:"word/_rels/footnotes.xml.rels"},Settings:{data:is(this.formatter.format(t.Settings,{viewWrapper:t.Document,file:t,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/settings.xml"},Comments:{data:(()=>{const h=this.imageReplacer.replace(o,u,i);return this.numberingReplacer.replace(h,t.Numbering.ConcreteNumbering)})(),path:"word/comments.xml"},CommentsRelationships:{data:(u.forEach((h,m)=>{t.Comments.Relationships.createRelationship(i+m,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${h.fileName}`)}),is(this.formatter.format(t.Comments.Relationships,{viewWrapper:{View:t.Comments,Relationships:t.Comments.Relationships},file:t,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}})),path:"word/_rels/comments.xml.rels"},FontTable:{data:is(this.formatter.format(t.FontTable.View,{viewWrapper:t.Document,file:t,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/fontTable.xml"},FontTableRelationships:{data:is(this.formatter.format(t.FontTable.Relationships,{viewWrapper:t.Document,file:t,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:"word/_rels/fontTable.xml.rels"}}}}const sae={WITH_2_BLANKS:"  "},lT=s=>s===!0?sae.WITH_2_BLANKS:s===!1?void 0:s,q8=class Yc{static pack(t,r,a){return RJ(this,arguments,function*(n,i,o,c=[]){return this.compiler.compile(n,lT(o),c).generateAsync({type:i,mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})})}static toString(t,r,a=[]){return Yc.pack(t,"string",r,a)}static toBuffer(t,r,a=[]){return Yc.pack(t,"nodebuffer",r,a)}static toBase64String(t,r,a=[]){return Yc.pack(t,"base64",r,a)}static toBlob(t,r,a=[]){return Yc.pack(t,"blob",r,a)}static toArrayBuffer(t,r,a=[]){return Yc.pack(t,"arraybuffer",r,a)}static toStream(t,r,a=[]){const n=new Vre.Stream;return this.compiler.compile(t,lT(r),a).generateAsync({type:"nodebuffer",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"}).then(o=>{n.emit("data",o),n.emit("end")}),n}};Me(q8,"compiler",new tae);let W8=q8;var Ff={exports:{}},rae=Ff.exports,oT;function aae(){return oT||(oT=1,(function(s,t){(function(r,a){a()})(rae,function(){function r(h,m){return typeof m>"u"?m={autoBom:!1}:typeof m!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),m={autoBom:!m}),m.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function a(h,m,f){var p=new XMLHttpRequest;p.open("GET",h),p.responseType="blob",p.onload=function(){u(p.response,m,f)},p.onerror=function(){console.error("could not download file")},p.send()}function n(h){var m=new XMLHttpRequest;m.open("HEAD",h,!1);try{m.send()}catch{}return 200<=m.status&&299>=m.status}function i(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var m=document.createEvent("MouseEvents");m.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(m)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof D0=="object"&&D0.global===D0?D0:void 0,c=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(h,m,f){var p=o.URL||o.webkitURL,j=document.createElement("a");m=m||h.name||"download",j.download=m,j.rel="noopener",typeof h=="string"?(j.href=h,j.origin===location.origin?i(j):n(j.href)?a(h,m,f):i(j,j.target="_blank")):(j.href=p.createObjectURL(h),setTimeout(function(){p.revokeObjectURL(j.href)},4e4),setTimeout(function(){i(j)},0))}:"msSaveOrOpenBlob"in navigator?function(h,m,f){if(m=m||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(r(h,f),m);else if(n(h))a(h,m,f);else{var p=document.createElement("a");p.href=h,p.target="_blank",setTimeout(function(){i(p)})}}:function(h,m,f,p){if(p=p||open("","_blank"),p&&(p.document.title=p.document.body.innerText="downloading..."),typeof h=="string")return a(h,m,f);var j=h.type==="application/octet-stream",g=/constructor/i.test(o.HTMLElement)||o.safari,v=/CriOS\/[\d]+/.test(navigator.userAgent);if((v||j&&g||c)&&typeof FileReader<"u"){var y=new FileReader;y.onloadend=function(){var k=y.result;k=v?k:k.replace(/^data:[^;]*;/,"data:attachment/file;"),p?p.location.href=k:location=k,p=null},y.readAsDataURL(h)}else{var N=o.URL||o.webkitURL,S=N.createObjectURL(h);p?p.location=S:location.href=S,p=null,setTimeout(function(){N.revokeObjectURL(S)},4e4)}});o.saveAs=u.saveAs=u,s.exports=u})})(Ff)),Ff.exports}var Y8=aae();const cT=s=>{const r=s.replace(/\*\*([^*]+)\*\*/g,"$1").replace(/\*([^*]+)\*/g,"$1").trim().split(`
`).filter(a=>a.trim());return e.jsx("div",{className:"space-y-2",children:r.map((a,n)=>{const i=a.trim(),o=i.match(/^(?:[\u{1F300}-\u{1F9FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}])?\s*([--A-Za-z\s]+):\s*(.+)$/u);if(o){const[,c,u]=o,h=i.match(/^([\u{1F300}-\u{1F9FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}])/u),m=h?h[1]+" ":"";return e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-gray-900",children:m}),e.jsxs("span",{className:"font-semibold text-gray-700",children:[c,":"]})," ",e.jsx("span",{className:"text-gray-900",children:u})]},n)}return e.jsx("div",{className:"text-gray-900",children:i},n)})})},Th="ai_call_persistent_state",nae=()=>{const[s,t]=w.useState(!1),[r,a]=w.useState(!1),[n,i]=w.useState(!1),[o,c]=w.useState("client"),[u,h]=w.useState([]),[m,f]=w.useState(""),[p,j]=w.useState(""),[g,v]=w.useState([]),[y,N]=w.useState(null),[S,k]=w.useState({duration:0,messagesCount:0,questionsDetected:0,suggestionsGenerated:0}),_=w.useRef(null),T=w.useRef(null),E=w.useRef(null),z=w.useRef(null),M=w.useRef(!1),[C,A]=w.useState(!1),[Z,I]=w.useState(null),V=()=>{if(!s){localStorage.removeItem(Th);return}const F={isCallActive:s,currentSpeaker:o,messages:u.map(Q=>({...Q,timestamp:Q.timestamp.toISOString()})),suggestions:g.map(Q=>({...Q,timestamp:Q.timestamp.toISOString()})),callStats:S,startTime:Date.now()-S.duration*1e3};localStorage.setItem(Th,JSON.stringify(F))},R=()=>{const F=localStorage.getItem(Th);if(!F)return!1;try{const Q=JSON.parse(F);c(Q.currentSpeaker),h(Q.messages.map(H=>({...H,timestamp:new Date(H.timestamp)}))),v(Q.suggestions.map(H=>({...H,timestamp:new Date(H.timestamp)})));const W=Math.floor((Date.now()-Q.startTime)/1e3);return k({...Q.callStats,duration:W}),!0}catch(Q){return console.error("Error restoring state:",Q),localStorage.removeItem(Th),!1}};w.useEffect(()=>{R()&&(console.log("   "),t(!0),M.current=!0,q(),setTimeout(()=>{te()},500))},[]),w.useEffect(()=>{V()},[s,u,g,S,o]),w.useEffect(()=>{const F=window.SpeechRecognition||window.webkitSpeechRecognition;if(!F){I("Web Speech API     .  Chrome  Edge.");return}const Q=new F;return Q.continuous=!0,Q.interimResults=!0,Q.lang="ru-RU",Q.maxAlternatives=1,Q.onresult=W=>{console.log(" Recognition result received:",W);let H="",re="";for(let he=W.resultIndex;he<W.results.length;he++){const G=W.results[he][0].transcript;W.results[he].isFinal?(re+=G+" ",console.log(" Final transcript:",G)):(H+=G,console.log(" Interim transcript:",G))}j(H),re&&(console.log(" Sending final text to AI:",re.trim()),f(he=>he+re),se(re.trim()))},Q.onerror=W=>{console.error("Speech recognition error:",W.error),W.error==="no-speech"||W.error==="aborted"||I(` : ${W.error}`)},Q.onend=()=>{if(s&&!n)try{Q.start()}catch(W){console.log("Recognition restart failed:",W)}},T.current=Q,()=>{Q&&Q.stop()}},[s,n]),w.useEffect(()=>(s?E.current=setInterval(()=>{k(F=>({...F,duration:F.duration+1}))},1e3):E.current&&clearInterval(E.current),()=>{E.current&&clearInterval(E.current)}),[s]),w.useEffect(()=>{z.current?.scrollIntoView({behavior:"smooth"})},[u,y]);const q=()=>{try{const F=localStorage.getItem("auth");if(!F){I("   ");return}const{username:Q,password:W}=JSON.parse(F),H=btoa(`${Q}:${W}`),re=window.location.protocol==="https:"?"wss:":"ws:",he=window.location.host,G=`${re}//${he}/ws/voice-assistant?auth=${H}`;console.log("Connecting to WebSocket:",G);const ce=new WebSocket(G);ce.onopen=()=>{console.log("WebSocket connected"),A(!0),I(null)},ce.onmessage=X=>{try{const O=JSON.parse(X.data);J(O)}catch(O){console.error("Error parsing WebSocket message:",O)}},ce.onerror=X=>{console.error("WebSocket error:",X),I("    AI"),A(!1)},ce.onclose=()=>{console.log("WebSocket disconnected"),A(!1),M.current?(console.log("Will reconnect in 3 seconds..."),setTimeout(()=>{q()},3e3)):console.log("Call not active, will not reconnect")},_.current=ce}catch(F){console.error("Error connecting to WebSocket:",F),I("     AI")}},J=F=>{if(F.type==="suggestion"){const Q={id:Date.now().toString(),question:F.question,answer:F.answer,category:F.category||"general",confidence:F.confidence||.8,timestamp:new Date};v(W=>[Q,...W]),N(Q),k(W=>({...W,suggestionsGenerated:W.suggestionsGenerated+1})),setTimeout(()=>{N(W=>W?.id===Q.id?null:W)},3e4)}else F.type==="question_detected"&&k(Q=>({...Q,questionsDetected:Q.questionsDetected+1}))},se=F=>{if(!F.trim())return;const Q={id:Date.now().toString(),type:o,text:F,timestamp:new Date};h(W=>[...W,Q]),k(W=>({...W,messagesCount:W.messagesCount+1})),_.current&&_.current.readyState===WebSocket.OPEN?_.current.send(JSON.stringify({type:"speech",text:F,timestamp:new Date().toISOString(),speaker:o})):console.warn("WebSocket not connected, message not sent to AI"),f("")},Y=()=>{t(!0),M.current=!0,h([]),v([]),N(null),k({duration:0,messagesCount:0,questionsDetected:0,suggestionsGenerated:0}),I(null),q(),te()},ee=()=>{t(!1),M.current=!1,K(),_.current&&(_.current.close(),_.current=null),A(!1),localStorage.removeItem(Th)},te=()=>{if(T.current&&!r)try{T.current.start(),a(!0),i(!1)}catch(F){console.error("Error starting recognition:",F)}},K=()=>{T.current&&r&&(T.current.stop(),a(!1))},$=()=>{n?te():(K(),i(!0))},le=F=>{v(Q=>Q.map(W=>W.id===F.id?{...W,used:!0}:W)),N(null)},ie=()=>{N(null)},oe=()=>{h([]),v([]),N(null)},de=async()=>{try{const F=new Date,Q=F.toLocaleDateString("ru-RU"),W=F.toLocaleTimeString("ru-RU"),H=new H8({sections:[{children:[new ht({text:" AI ",heading:yl.HEADING_1,alignment:sr.CENTER}),new ht({text:`: ${Q} ${W}`,alignment:sr.CENTER}),new ht({text:`: ${U(S.duration)}`,alignment:sr.CENTER}),new ht({text:""}),new ht({text:" ",heading:yl.HEADING_2}),new ht({children:[new kt({text:": ",bold:!0}),new kt({text:`${S.messagesCount}`})]}),new ht({children:[new kt({text:" : ",bold:!0}),new kt({text:`${S.questionsDetected}`})]}),new ht({children:[new kt({text:"  AI: ",bold:!0}),new kt({text:`${S.suggestionsGenerated}`})]}),new ht({text:""}),new ht({text:"",heading:yl.HEADING_2}),...u.map(he=>new ht({children:[new kt({text:he.type==="client"?": ":": ",bold:!0,color:he.type==="client"?"2563EB":"9333EA"}),new kt({text:he.text}),new kt({text:` (${he.timestamp.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})})`,italics:!0,color:"6B7280"})]})),new ht({text:""}),new ht({text:" AI",heading:yl.HEADING_2}),...g.map(he=>[new ht({children:[new kt({text:": ",bold:!0}),new kt({text:he.question,italics:!0})]}),new ht({children:[new kt({text:": ",bold:!0}),new kt({text:he.answer})]}),new ht({children:[new kt({text:": ",bold:!0}),new kt({text:he.category}),new kt({text:" | "}),new kt({text:he.used?" ":" ",color:he.used?"10B981":"6B7280"})]}),new ht({text:""})]).flat()]}]}),re=await W8.toBlob(H);Y8.saveAs(re,`call_${F.toISOString().split("T")[0]}_${F.getHours()}-${F.getMinutes()}.docx`)}catch(F){console.error("Error saving conversation:",F),I("   ")}},U=F=>{const Q=Math.floor(F/3600),W=Math.floor(F%3600/60),H=F%60;return`${Q>0?Q.toString().padStart(2,"0")+":":""}${W.toString().padStart(2,"0")}:${H.toString().padStart(2,"0")}`};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 p-6",children:[s&&e.jsx("div",{className:"mb-6 bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-400 rounded-xl p-4 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-green-900",children:" "}),e.jsx("p",{className:"text-sm text-green-700",children:"     -  "})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-green-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsx("span",{className:"font-mono",children:U(S.duration)})]}),r&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(sm,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{children:""})]})]})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-normal text-gray-900 mb-2",children:"AI "}),e.jsx("p",{className:"text-gray-600",children:"     AI    "})]}),Z&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(qe,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-900",children:""}),e.jsx("p",{className:"text-sm text-red-700",children:Z})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(fi,{className:"w-5 h-5 text-purple-600"})," "]}),s?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 rounded-xl p-4 border border-purple-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:""}),e.jsxs("div",{className:"flex items-center gap-2 text-2xl font-light text-gray-900",children:[e.jsx(Ue,{className:"w-5 h-5 text-purple-600"}),U(S.duration)]})]})}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"AI "}),e.jsx("div",{className:"flex items-center gap-2",children:C?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-green-700 font-medium",children:""})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),e.jsx("span",{className:"text-red-700 font-medium",children:""})]})})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:""}),e.jsx("div",{className:"flex items-center gap-2",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-green-700 font-medium",children:""})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full"}),e.jsx("span",{className:"text-gray-700 font-medium",children:""})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:$,className:`flex items-center justify-center gap-2 px-4 py-3 rounded-xl transition-all ${n?"bg-red-600 text-white hover:bg-red-700":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[n?e.jsx(xE,{className:"w-5 h-5"}):e.jsx(sm,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:n?"":""})]}),e.jsxs("button",{onClick:ee,className:"flex items-center justify-center gap-2 px-4 py-3 bg-red-600 text-white rounded-xl hover:bg-red-700 transition-all",children:[e.jsx(pE,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:""})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl p-4 border border-indigo-200",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-2 text-center",children:" :"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("button",{onClick:()=>c("client"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${o==="client"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-50"}`,children:" "}),e.jsx("button",{onClick:()=>c("salesperson"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${o==="salesperson"?"bg-green-600 text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-50"}`,children:" "})]})]})]}):e.jsxs("button",{onClick:Y,className:"w-full flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl hover:from-green-700 hover:to-emerald-700 transition-all shadow-lg hover:shadow-xl",children:[e.jsx(fi,{className:"w-6 h-6"}),e.jsx("span",{className:"text-lg font-medium",children:" "})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Fr,{className:"w-5 h-5 text-blue-600"}),""]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-700",children:""}),e.jsx("span",{className:"text-lg font-semibold text-blue-600",children:S.messagesCount})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-700",children:""}),e.jsx("span",{className:"text-lg font-semibold text-purple-600",children:S.questionsDetected})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-700",children:""}),e.jsx("span",{className:"text-lg font-semibold text-green-600",children:S.suggestionsGenerated})]})]})]}),u.length>0&&e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-lg p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:""}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:de,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-all",children:[e.jsx(wt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:" "})]}),e.jsxs("button",{onClick:oe,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-all",children:[e.jsx(Xe,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:" "})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-lg flex flex-col h-[calc(100vh-200px)]",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-medium text-gray-900 flex items-center gap-2",children:[e.jsx(Es,{className:"w-5 h-5 text-purple-600"}),""]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[u.length===0&&!s&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[e.jsx(fi,{className:"w-16 h-16 text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500",children:" ,   "})]}),u.map(F=>e.jsxs("div",{className:`flex gap-3 ${F.type==="salesperson"?"justify-end":"justify-start"}`,children:[F.type==="client"&&e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0",children:e.jsx(st,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{className:`max-w-[75%] rounded-2xl px-4 py-3 ${F.type==="salesperson"?"bg-purple-600 text-white":F.isQuestion?"bg-yellow-50 text-gray-900 border-2 border-yellow-300":"bg-gray-100 text-gray-900"}`,children:[e.jsx("p",{className:"text-sm",children:F.text}),e.jsx("p",{className:`text-xs mt-1 ${F.type==="salesperson"?"text-purple-200":"text-gray-500"}`,children:F.timestamp.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})})]}),F.type==="salesperson"&&e.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center flex-shrink-0",children:e.jsx(st,{className:"w-4 h-4 text-purple-600"})})]},F.id)),(m||p)&&e.jsxs("div",{className:"flex gap-3 justify-start",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0",children:e.jsx(st,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{className:"max-w-[75%] rounded-2xl px-4 py-3 bg-gray-100 text-gray-900 border-2 border-purple-300",children:[e.jsxs("p",{className:"text-sm",children:[m,e.jsx("span",{className:"text-gray-500 italic",children:p})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"..."})]})]}),e.jsx("div",{ref:z})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-lg flex flex-col h-[calc(100vh-200px)]",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-medium text-gray-900 flex items-center gap-2",children:[e.jsx(Xj,{className:"w-5 h-5 text-yellow-600"}),"AI "]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[y&&e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 border-2 border-yellow-400 rounded-xl p-4 shadow-lg animate-pulse-subtle",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xj,{className:"w-5 h-5 text-yellow-600"}),e.jsx("span",{className:"text-sm font-medium text-yellow-900",children:" "})]}),e.jsx("button",{onClick:ie,className:"p-1 hover:bg-yellow-100 rounded transition-all",children:e.jsx(kl,{className:"w-4 h-4 text-yellow-700"})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-yellow-700 mb-1 font-medium",children:" :"}),e.jsxs("p",{className:"text-sm text-yellow-900 italic",children:['"',y.question,'"']})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-green-700 mb-1 font-medium",children:" :"}),e.jsx("div",{className:"text-sm text-gray-900 bg-white rounded-lg p-3",children:cT(y.answer)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-yellow-700",children:[": ",y.category]}),e.jsxs("button",{onClick:()=>le(y),className:"flex items-center gap-1 px-3 py-1 bg-green-600 text-white text-xs rounded-lg hover:bg-green-700 transition-all",children:[e.jsx(zr,{className:"w-3 h-3"}),""]})]})]}),g.length===0&&!y&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[e.jsx(kf,{className:"w-16 h-16 text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"    "})]}),g.filter(F=>F.id!==y?.id).map(F=>e.jsxs("div",{className:`border rounded-xl p-4 transition-all ${F.used?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200 hover:border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("span",{className:"text-xs text-gray-600",children:F.timestamp.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})}),F.used&&e.jsx(zr,{className:"w-4 h-4 text-green-600"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-xs text-gray-700 mb-1",children:":"}),e.jsxs("p",{className:"text-sm text-gray-900 italic",children:['"',F.question,'"']})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-700 mb-1",children:":"}),e.jsx("div",{className:"text-sm text-gray-900",children:cT(F.answer)})]})]},F.id))]})]})]}),e.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(qe,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-900",children:[e.jsx("p",{className:"font-medium mb-1",children:"  "}),e.jsxs("ul",{className:"list-disc list-inside text-blue-700 space-y-1",children:[e.jsx("li",{children:' " "     '}),e.jsx("li",{children:"    -    "}),e.jsx("li",{children:"AI       "}),e.jsx("li",{children:"       "}),e.jsx("li",{children:"     "})]})]})]})})]})},yf={greeting:{label:"",color:"bg-blue-100 text-blue-700 border-blue-300",emoji:""},discovery:{label:" ",color:"bg-purple-100 text-purple-700 border-purple-300",emoji:""},presentation:{label:"",color:"bg-indigo-100 text-indigo-700 border-indigo-300",emoji:""},pricing:{label:" ",color:"bg-yellow-100 text-yellow-700 border-yellow-300",emoji:""},objection:{label:"",color:"bg-orange-100 text-orange-700 border-orange-300",emoji:""},closing:{label:" ",color:"bg-green-100 text-green-700 border-green-300",emoji:""}},Ij={unknown:{label:"",color:"bg-gray-100 text-gray-700"},newbie:{label:"",color:"bg-blue-100 text-blue-700"},technical:{label:"",color:"bg-purple-100 text-purple-700"},business:{label:"",color:"bg-green-100 text-green-700"},toxic:{label:"",color:"bg-red-100 text-red-700"}},iae=()=>{const[s,t]=w.useState(!1),[r,a]=w.useState(!1),[n,i]=w.useState(!1),[o,c]=w.useState("client"),[u,h]=w.useState([]),[m,f]=w.useState(""),[p,j]=w.useState(""),[g,v]=w.useState(null),[y,N]=w.useState([]),[S,k]=w.useState(new Set),[_,T]=w.useState(null),[E,z]=w.useState({duration:0,messagesCount:0,questionsDetected:0,suggestionsGenerated:0}),M=w.useRef(null),C=w.useRef(null),A=w.useRef(null),Z=w.useRef(null),I=w.useRef(!1),[V,R]=w.useState(!1),[q,J]=w.useState(null);w.useEffect(()=>{Z.current?.scrollIntoView({behavior:"smooth"})},[u,g]),w.useEffect(()=>{const F=window.SpeechRecognition||window.webkitSpeechRecognition;if(!F){J("Web Speech API     .  Chrome  Edge.");return}const Q=new F;return Q.continuous=!0,Q.interimResults=!0,Q.lang="ru-RU",Q.maxAlternatives=1,Q.onresult=W=>{let H="",re="";for(let he=W.resultIndex;he<W.results.length;he++){const G=W.results[he][0].transcript;W.results[he].isFinal?re+=G+" ":H+=G}j(H),re&&(f(he=>he+re),ee(re.trim()))},Q.onerror=W=>{W.error!=="no-speech"&&W.error!=="aborted"&&J(` : ${W.error}`)},Q.onend=()=>{if(s&&!n)try{Q.start()}catch(W){console.log("Recognition restart failed:",W)}},C.current=Q,()=>{Q&&Q.stop()}},[s,n]),w.useEffect(()=>(s?A.current=setInterval(()=>{z(F=>({...F,duration:F.duration+1}))},1e3):A.current&&clearInterval(A.current),()=>{A.current&&clearInterval(A.current)}),[s]);const se=()=>{try{const F=localStorage.getItem("auth");if(!F){J("   ");return}const{username:Q,password:W}=JSON.parse(F),H=btoa(`${Q}:${W}`),re=window.location.protocol==="https:"?"wss:":"ws:",he=window.location.host,G=`${re}//${he}/ws/voice-assistant-v2?auth=${H}`;console.log("Connecting to V2 WebSocket:",G);const ce=new WebSocket(G);ce.onopen=()=>{console.log("V2 WebSocket connected"),R(!0),J(null)},ce.onmessage=X=>{try{const O=JSON.parse(X.data);Y(O)}catch(O){console.error("Error parsing WebSocket message:",O)}},ce.onerror=X=>{console.error("WebSocket error:",X),J("    AI"),R(!1)},ce.onclose=()=>{console.log("WebSocket disconnected"),R(!1),I.current&&setTimeout(()=>{se()},3e3)},M.current=ce}catch(F){console.error("Error connecting to WebSocket:",F),J("     AI")}},Y=F=>{if(console.log("[V2] Received:",F.type),F.type==="connected")console.log("[V2] Connected:",F.message);else if(F.type==="suggestion_v2"){const Q={reply_now:F.reply_now||"",next_steps:F.next_steps||[],explanation:F.explanation||"",context:F.context,timestamp:new Date};v(Q),N(W=>[Q,...W]),k(new Set),F.context&&T(F.context),z(W=>({...W,suggestionsGenerated:W.suggestionsGenerated+1}))}else F.type==="context_data"&&T(F.context)},ee=F=>{if(!F.trim())return;const Q={id:Date.now().toString(),type:o,text:F,timestamp:new Date};h(W=>[...W,Q]),z(W=>({...W,messagesCount:W.messagesCount+1})),M.current&&M.current.readyState===WebSocket.OPEN?M.current.send(JSON.stringify({type:"speech",text:F,timestamp:new Date().toISOString(),speaker:o})):console.warn("WebSocket not connected"),f("")},te=()=>{t(!0),I.current=!0,h([]),N([]),v(null),T(null),z({duration:0,messagesCount:0,questionsDetected:0,suggestionsGenerated:0}),J(null),se(),$()},K=()=>{t(!1),I.current=!1,le(),M.current&&(M.current.close(),M.current=null),R(!1)},$=()=>{if(C.current&&!r)try{C.current.start(),a(!0),i(!1)}catch(F){console.error("Error starting recognition:",F)}},le=()=>{C.current&&r&&(C.current.stop(),a(!1))},ie=()=>{n?$():(le(),i(!0))},oe=F=>{k(Q=>{const W=new Set(Q);return W.has(F)?W.delete(F):W.add(F),W})},de=async()=>{try{const F=new Date,Q=F.toLocaleDateString("ru-RU"),W=F.toLocaleTimeString("ru-RU"),H=new H8({sections:[{children:[new ht({text:" AI  V2",heading:yl.HEADING_1,alignment:sr.CENTER}),new ht({text:`: ${Q} ${W}`,alignment:sr.CENTER}),new ht({text:`: ${U(E.duration)}`,alignment:sr.CENTER}),new ht({text:""}),new ht({text:" ",heading:yl.HEADING_2}),..._?[new ht({children:[new kt({text:": ",bold:!0}),new kt({text:yf[_.stage].label})]}),new ht({children:[new kt({text:" : ",bold:!0}),new kt({text:Ij[_.client_type].label})]}),new ht({children:[new kt({text:": ",bold:!0}),new kt({text:_.requirements.join(", ")||""})]}),new ht({text:""})]:[],new ht({text:"",heading:yl.HEADING_2}),...u.map(he=>new ht({children:[new kt({text:he.type==="client"?": ":": ",bold:!0,color:he.type==="client"?"2563EB":"9333EA"}),new kt({text:he.text})]})),new ht({text:""}),new ht({text:" AI",heading:yl.HEADING_2}),...y.map(he=>[new ht({children:[new kt({text:" : ",bold:!0}),new kt({text:he.reply_now})]}),new ht({children:[new kt({text:": ",bold:!0})]}),...he.next_steps.map(G=>new ht({text:`   ${G}`})),new ht({text:""})]).flat()]}]}),re=await W8.toBlob(H);Y8.saveAs(re,`ai_call_v2_${F.toISOString().split("T")[0]}_${F.getHours()}-${F.getMinutes()}.docx`)}catch(F){console.error("Error saving conversation:",F),J("   ")}},U=F=>{const Q=Math.floor(F/3600),W=Math.floor(F%3600/60),H=F%60;return`${Q>0?Q.toString().padStart(2,"0")+":":""}${W.toString().padStart(2,"0")}:${H.toString().padStart(2,"0")}`};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-normal text-gray-900 mb-2",children:"AI  V2 ( )"}),e.jsx("p",{className:"text-gray-600",children:" AI-      "})]}),q&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(qe,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-900",children:""}),e.jsx("p",{className:"text-sm text-red-700",children:q})]})]})}),s&&_&&e.jsx("div",{className:"mb-6 bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-400 rounded-xl p-4 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-green-900",children:" "}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${yf[_.stage].color}`,children:[yf[_.stage].emoji," ",yf[_.stage].label]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Ij[_.client_type].color}`,children:Ij[_.client_type].label})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-green-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsx("span",{className:"font-mono",children:U(E.duration)})]}),r&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(sm,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{children:""})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[e.jsxs("div",{className:"col-span-3 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(fi,{className:"w-5 h-5 text-purple-600"}),""]}),s?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:ie,className:`flex items-center justify-center gap-2 px-4 py-3 rounded-xl transition-all ${n?"bg-red-600 text-white hover:bg-red-700":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:n?e.jsx(xE,{className:"w-5 h-5"}):e.jsx(sm,{className:"w-5 h-5"})}),e.jsx("button",{onClick:K,className:"flex items-center justify-center gap-2 px-4 py-3 bg-red-600 text-white rounded-xl hover:bg-red-700 transition-all",children:e.jsx(pE,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl p-4 border border-indigo-200",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-2 text-center",children:" :"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("button",{onClick:()=>c("client"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${o==="client"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-50"}`,children:""}),e.jsx("button",{onClick:()=>c("salesperson"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${o==="salesperson"?"bg-green-600 text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-50"}`,children:""})]})]})]}):e.jsxs("button",{onClick:te,className:"w-full flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl hover:from-green-700 hover:to-emerald-700 transition-all shadow-lg",children:[e.jsx(fi,{className:"w-6 h-6"}),e.jsx("span",{className:"text-lg font-medium",children:" "})]})]}),_&&e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-lg p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:" "}),e.jsxs("div",{className:"space-y-4",children:[_.requirements.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Zj,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:":"})]}),e.jsx("div",{className:"space-y-1",children:_.requirements.map((F,Q)=>e.jsxs("div",{className:"text-sm text-gray-600 pl-6",children:[" ",F]},Q))})]}),_.budget_signals.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ge,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:":"})]}),e.jsx("div",{className:"space-y-1",children:_.budget_signals.map((F,Q)=>e.jsxs("div",{className:"text-sm text-gray-600 pl-6",children:[" ",F]},Q))})]}),_.red_flags.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Cf,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"text-sm font-medium text-red-700",children:" :"})]}),e.jsx("div",{className:"space-y-1",children:_.red_flags.map((F,Q)=>e.jsxs("div",{className:"text-sm text-red-600 pl-6",children:[" ",F]},Q))})]})]})]}),u.length>0&&e.jsx("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-lg p-6",children:e.jsxs("button",{onClick:de,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-all",children:[e.jsx(wt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:""})]})})]}),e.jsxs("div",{className:"col-span-5 bg-white rounded-2xl border border-gray-200 shadow-lg flex flex-col h-[calc(100vh-200px)]",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-medium text-gray-900 flex items-center gap-2",children:[e.jsx(Es,{className:"w-5 h-5 text-purple-600"}),""]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[u.length===0&&!s&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[e.jsx(fi,{className:"w-16 h-16 text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500",children:" "})]}),u.map(F=>e.jsxs("div",{className:`flex gap-3 ${F.type==="salesperson"?"justify-end":"justify-start"}`,children:[F.type==="client"&&e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0",children:e.jsx(st,{className:"w-4 h-4 text-blue-600"})}),e.jsx("div",{className:`max-w-[75%] rounded-2xl px-4 py-3 ${F.type==="salesperson"?"bg-purple-600 text-white":"bg-gray-100 text-gray-900"}`,children:e.jsx("p",{className:"text-sm",children:F.text})}),F.type==="salesperson"&&e.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center flex-shrink-0",children:e.jsx(st,{className:"w-4 h-4 text-purple-600"})})]},F.id)),(m||p)&&e.jsxs("div",{className:"flex gap-3 justify-start",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0",children:e.jsx(st,{className:"w-4 h-4 text-blue-600"})}),e.jsx("div",{className:"max-w-[75%] rounded-2xl px-4 py-3 bg-gray-100 text-gray-900 border-2 border-purple-300",children:e.jsxs("p",{className:"text-sm",children:[m,e.jsx("span",{className:"text-gray-500 italic",children:p})]})})]}),e.jsx("div",{ref:Z})]})]}),e.jsxs("div",{className:"col-span-4 space-y-6",children:[g&&e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-400 rounded-xl p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ar,{className:"w-6 h-6 text-green-600"}),e.jsx("h3",{className:"text-lg font-bold text-green-900",children:"  "})]}),e.jsx("p",{className:"text-gray-900 text-base leading-relaxed",children:g.reply_now})]}),g&&g.next_steps.length>0&&e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-300 rounded-xl p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ct,{className:"w-6 h-6 text-blue-600"}),e.jsx("h3",{className:"text-lg font-bold text-blue-900",children:"  2-3 "})]}),e.jsx("div",{className:"space-y-3",children:g.next_steps.map((F,Q)=>e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:S.has(Q),onChange:()=>oe(Q),className:"mt-1 rounded border-blue-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:`text-sm ${S.has(Q)?"line-through text-gray-500":"text-gray-900"}`,children:F})]},Q))})]}),g&&g.explanation&&e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-amber-50 border-2 border-yellow-300 rounded-xl p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(vP,{className:"w-6 h-6 text-yellow-600"}),e.jsx("h3",{className:"text-lg font-bold text-yellow-900",children:"  "})]}),e.jsx("p",{className:"text-gray-900 text-sm leading-relaxed",children:g.explanation})]}),!g&&s&&e.jsx("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-lg p-8",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[e.jsx(Xj,{className:"w-16 h-16 text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"    "})]})})]})]})]})},dT={Book:e.jsx(qL,{className:"w-6 h-6"}),CheckSquare:e.jsx(ar,{className:"w-6 h-6"}),Users:e.jsx(tt,{className:"w-6 h-6"}),CalendarCheck:e.jsx(ZL,{className:"w-6 h-6"}),TrendingUp:e.jsx(ct,{className:"w-6 h-6"}),FileText:e.jsx(Ie,{className:"w-6 h-6"}),Settings:e.jsx(Na,{className:"w-6 h-6"}),Shield:e.jsx(Er,{className:"w-6 h-6"})},lae=()=>{const[s,t]=w.useState([]),[r,a]=w.useState(!0),[n,i]=w.useState(null),[o,c]=w.useState({title:"",content:"",icon:"",allowed_roles:[]}),[u,h]=w.useState(!1),[m,f]=w.useState("");w.useEffect(()=>{j(),p()},[]);const p=async()=>{const N=localStorage.getItem("auth");if(N)try{const S=JSON.parse(N);if(S.role){f(S.role);return}console.log("Role not in localStorage, fetching from server...");const _=(await fe.get("/admin/api/auth/me")).data.role;S.role=_,localStorage.setItem("auth",JSON.stringify(S)),f(_),console.log("User role fetched and saved:",_)}catch(S){console.error("Error loading user role:",S)}},j=async()=>{try{a(!0);const N=await fe.get("/admin/api/timlead-regulations/");t(N.data)}catch(N){console.error("Error loading regulations:",N)}finally{a(!1)}},g=N=>{i(N),c({title:N.title,content:N.content,icon:N.icon,allowed_roles:N.allowed_roles||[]})},v=async()=>{if(n)try{h(!0),await fe.put(`/admin/api/timlead-regulations/${n.id}`,o),await j(),i(null)}catch(N){console.error("Error saving regulation:",N),alert(N.response?.data?.detail||"  ")}finally{h(!1)}},y=m==="owner";return r?e.jsx("div",{className:"p-6 flex items-center justify-center",children:e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(SP,{className:"w-8 h-8 text-purple-600"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"  "})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-blue-500 rounded-full p-1 mt-0.5",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-blue-900 dark:text-blue-100",children:"  :"}),e.jsxs("p",{className:"text-blue-800 dark:text-blue-200 mt-1",children:["        .",y&&"     ."]})]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(N=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-gray-700 hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4 pb-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-purple-500 to-purple-700 flex items-center justify-center text-white flex-shrink-0",children:dT[N.icon]||e.jsx(Ie,{className:"w-6 h-6"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:N.title})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1.5 text-sm font-medium rounded-md ${N.content.includes(" ")?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200":"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200"}`,children:[e.jsx(Ue,{className:"w-4 h-4"}),N.content.includes(" ")?" ":""]})}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed mb-6 min-h-[60px]",children:N.content.length>150?`${N.content.substring(0,150)}...`:N.content}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>g(N),className:"flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(Ft,{className:"w-4 h-4"}),""]}),y&&e.jsxs("button",{onClick:()=>g(N),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg text-sm font-medium hover:bg-purple-700 transition-colors",children:[e.jsx(kn,{className:"w-4 h-4"}),""]})]})]},N.id))}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:y?" ":" "}),e.jsx("button",{onClick:()=>i(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(Ae,{className:"w-6 h-6 text-gray-500 dark:text-gray-400"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:" "}),e.jsx("input",{type:"text",value:o.title,onChange:N=>c({...o,title:N.target.value}),disabled:!y,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white disabled:bg-gray-100 dark:disabled:bg-gray-600 disabled:cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsx("textarea",{value:o.content,onChange:N=>c({...o,content:N.target.value}),disabled:!y,rows:15,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white disabled:bg-gray-100 dark:disabled:bg-gray-600 disabled:cursor-not-allowed font-mono text-sm",placeholder:"  ..."})]}),y&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:""}),e.jsx("select",{value:o.icon,onChange:N=>c({...o,icon:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:Object.keys(dT).map(N=>e.jsx("option",{value:N,children:N},N))})]}),y&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"  "}),e.jsx("div",{className:"space-y-2",children:[{value:"owner",label:""},{value:"admin",label:""},{value:"timlead",label:""},{value:"executor",label:""},{value:"salesperson",label:""},{value:"developer",label:""}].map(N=>e.jsxs("label",{className:"flex items-center gap-3 p-3 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:o.allowed_roles.includes(N.value),onChange:S=>{S.target.checked?c({...o,allowed_roles:[...o.allowed_roles,N.value]}):c({...o,allowed_roles:o.allowed_roles.filter(k=>k!==N.value)})},className:"w-5 h-5 text-purple-600 rounded focus:ring-2 focus:ring-purple-500"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:N.label})]},N.value))}),e.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:" ,     "})]})]}),y&&e.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>i(null),disabled:u,className:"px-6 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg font-medium transition-colors disabled:opacity-50",children:""}),e.jsx("button",{onClick:v,disabled:u,className:"px-6 py-2 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ka,{className:"w-4 h-4"}),""]})})]})]})})]})};function oae(){return e.jsx(Y9,{children:e.jsx(q9,{children:e.jsx(_L,{children:e.jsx(L9,{basename:"/admin",children:e.jsxs(h9,{children:[e.jsx(et,{path:"/login",element:e.jsx(DI,{})}),e.jsx(et,{element:e.jsx(AI,{}),children:e.jsxs(et,{path:"/",element:e.jsx(EI,{}),children:[e.jsx(et,{index:!0,element:e.jsx(wk,{})}),e.jsx(et,{path:"dashboard",element:e.jsx(wk,{})}),e.jsx(et,{path:"projects",element:e.jsx(NY,{})}),e.jsxs(et,{path:"projects/:projectId",element:e.jsx(_Y,{}),children:[e.jsx(et,{index:!0,element:e.jsx(wT,{to:"overview",replace:!0})}),e.jsx(et,{path:"overview",element:e.jsx(kY,{})}),e.jsx(et,{path:"tasks",element:e.jsx(SY,{})}),e.jsx(et,{path:"revisions",element:e.jsx(CY,{})}),e.jsx(et,{path:"chat",element:e.jsx(TY,{})}),e.jsx(et,{path:"documents",element:e.jsx(EY,{})}),e.jsx(et,{path:"finance",element:e.jsx(AY,{})}),e.jsx(et,{path:"hosting",element:e.jsx(DY,{})})]}),e.jsx(et,{path:"project-files",element:e.jsx(nG,{})}),e.jsx(et,{path:"tasks",element:e.jsx(zY,{})}),e.jsx(et,{path:"tasks-archive",element:e.jsx(lG,{})}),e.jsx(et,{path:"my-tasks",element:e.jsx(cG,{})}),e.jsx(et,{path:"revisions",element:e.jsx(IY,{})}),e.jsx(et,{path:"clients",element:e.jsx(UY,{})}),e.jsx(et,{path:"leads",element:e.jsx(VY,{})}),e.jsx(et,{path:"deals",element:e.jsx(GY,{})}),e.jsx(et,{path:"contractors",element:e.jsx(rG,{})}),e.jsx(et,{path:"chats",element:e.jsx(dG,{})}),e.jsx(et,{path:"chats/:chatId",element:e.jsx(uG,{})}),e.jsx(et,{path:"avito",element:e.jsx(hG,{})}),e.jsx(et,{path:"documents",element:e.jsx(mG,{})}),e.jsx(et,{path:"portfolio",element:e.jsx(xG,{})}),e.jsx(et,{path:"finance",element:e.jsx(fG,{})}),e.jsx(et,{path:"services",element:e.jsx(bG,{})}),e.jsx(et,{path:"analytics",element:e.jsx(aJ,{})}),e.jsx(et,{path:"reports",element:e.jsx(nJ,{})}),e.jsx(et,{path:"notifications",element:e.jsx(iJ,{})}),e.jsx(et,{path:"automation",element:e.jsx(lJ,{})}),e.jsx(et,{path:"hosting",element:e.jsx(dJ,{})}),e.jsx(et,{path:"permissions",element:e.jsx(NJ,{})}),e.jsx(et,{path:"users",element:e.jsx(_J,{})}),e.jsx(et,{path:"settings",element:e.jsx(kJ,{})}),e.jsx(et,{path:"transcription",element:e.jsx(SJ,{})}),e.jsx(et,{path:"ai-calls",element:e.jsx(nae,{})}),e.jsx(et,{path:"ai-calls-v2",element:e.jsx(iae,{})}),e.jsx(et,{path:"timlead-regulations",element:e.jsx(lae,{})})]})})]})})})})})}jM.createRoot(document.getElementById("root")).render(e.jsx(w.StrictMode,{children:e.jsx(oae,{})}));
